/* This file has been generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2015 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <windows.h>
#include <math.h>
#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

#define __thiscall __cdecl // Test compile in C mode

void *Clr_Weaps();
void *Clr_Inv();
signed int __cdecl TSC_AMplus(int a1, int a2);
signed int __cdecl TSC_AMminus(int a1);
signed int __cdecl TSC_TAM(int a1, int a2, int a3);
signed int __cdecl TSC_ITplus(int a1);
signed int __cdecl TSC_ITminus(int a1);
int Mng_Inv_Curs();
int Rend_Inv_Win_();
signed int Inv_Menu_Code();
signed int __cdecl Chk_If_Has_Item(int a1);
signed int __cdecl Chk_If_Has_Weap(int a1);
signed int __cdecl Rmv_Ammo_From_Weap(int Ammo_To_Remove); // idb
signed int __cdecl Add_Ammo_To_Weap(int Ammo_To_Add); // idb
int TSC_AEplus();
int Switch_to_Next_Weap();
int Switch_to_Prev_Weap();
int Unequ_Weap();
signed int __cdecl Bckgrd_(char *source, int a2);
int Bckgrd_Modes_();
int __cdecl Bckgrd_Code(signed int a1, signed int a2);
int __cdecl Rend_Map_Bckgrd(signed int a1, signed int a2);
signed int __cdecl Chk_Starblck_break(int a1, int a2, int a3);
int __cdecl Solid_Tile_Complicated(int a1, int a2, _BYTE *a3, int a4);
int __cdecl Sound_When_Bullet_Hits_Wall_(int a1);
signed int __cdecl Bullet_Tile_Collision_Roof_Slope_1(int, int, int BulletID); // idb
signed int __cdecl Bullet_Tile_Collision_Roof_Slope_2(int, int, int BulletID); // idb
signed int __cdecl Bullet_Tile_Collision_Roof_Slope_3(int, int, int BulletID); // idb
signed int __cdecl Bullet_Tile_Collision_Roof_Slope_4(int, int, int BulletID); // idb
signed int __cdecl Bullet_Tile_Collision_Floor_Slope_1(int, int, int BulletID); // idb
signed int __cdecl Bullet_Tile_Collision_Floor_Slope_2(int, int, int BulletID); // idb
signed int __cdecl Bullet_Tile_Collision_Floor_Slope_3(int, int, int BulletID); // idb
signed int __cdecl Bullet_Tile_Collision_Floor_Slope_4(int, int, int BulletID); // idb
void Bul_Til_Coll_Algo();
int Clear_All_Weapons_Object_Slots();
int __cdecl Count_Weapon_Shot_Occurences(int WeaponID); // idb
int __cdecl Count_All_Slots_Using_Shot(int ShotID); // idb
int Clear_All_Weapons_Obj_Slots();
int __cdecl Render_Bullets(signed int a1, signed int a2);
int __cdecl Create_Bullet(int BulletID, int X_Position, int Y_Position, char Direction); // idb
int __cdecl Snake_Lvl_1_Bullet(int a1);
int __cdecl Bullet_02_03_Snake(int a1, int a2);
int __cdecl Bullet_04_05_06_Polar_Star(int Weapon_Obj, int Level); // idb
int __cdecl Bullet_07_08_09_Fireball(int Weapon_Obj, int); // idb
int __cdecl Bullet_0A_0B_0C_Machine_Gun(int a1, int a2);
int __cdecl Bullet_0D_0E_0F_Missile_Launcher(int a1, int a2);
int __cdecl Bullet_10_11_12_Missile_Explosion(int a1, int a2);
int __cdecl Bullet_13_Bubbler_Lvl1(int a1);
int __cdecl Bullet_14_Bubbler_Lvl2(int a1);
int __cdecl Bullet_15_Bubbler_Lvl3(int a1);
int __cdecl Bullet_16_Bubble_Spurs(int a1);
int __cdecl Bullet_19_Blade_Lvl1(int a1);
int __cdecl Bullet_1A_BladeLevel2(int a1);
int __cdecl Bullet_1B_BladeLevel3(int a1);
int __cdecl Bullet_17_BladeSlash(int a1);
int __cdecl Bullet_18__Unused_(int a1);
int __cdecl Bullet_1C_1D_1E_Sup_Mis_Launcher(int a1, int a2);
int __cdecl Bullet_1F_20_21(int a1, int a2);
int __cdecl Bullet_22_23_24_2B_Nemesis(int a1, int a2);
int __cdecl Bullet_25_26_27_ChargelessSpur_AllLevels(int a1, int a2);
int __cdecl Bullet_28_to_2A_NonMovingSpur_AllLevels(int a1, int a2);
int __cdecl Bullet_2C_Spur_Lvl_2(int a1);
int __cdecl Bullet_2D_SpurLevel3(int a1);
int Run_Bullet_Code();
signed int sub_4095C0();
void *Clear_All_Effects();
// int __cdecl No_Effect(_DWORD); weak
int __cdecl Random_Fountain_Pulsing_Disc_Particles(BOOL mode); // idb
int __cdecl Rising_Disc_And_Exploding_Diamond(BOOL mode); // idb
int __cdecl Star(BOOL mode); // idb
int __cdecl Fireball_Impact(BOOL mode); // idb
int __cdecl ZzZ___(BOOL mode); // idb
int __cdecl Booster_Smoke(BOOL mode); // idb
signed int __cdecl Drowned_Quote(BOOL mode); // idb
signed int __cdecl Exclamation(BOOL mode); // idb
signed int __cdecl Level_Up_Or_Down(BOOL mode); // idb
signed int __cdecl Red_Damage_Rings(BOOL mode); // idb
signed int __cdecl Big_Explosion(BOOL mode); // idb
signed int __cdecl Headbump_Sparks(BOOL mode); // idb
int __cdecl Unknown_Unused_Effect(int a1);
signed int __cdecl Small_White_Explosion_Disc(BOOL mode); // idb
signed int __cdecl Empty__Effect_(BOOL mode); // idb
signed int __cdecl Push_Jump_Key_Effect(BOOL mode); // idb
int Update_All_Effects();
int __cdecl Draw_All_Effect_Obj(signed int a1, signed int a2);
int __cdecl Create_Animated_Effect(int X_Position, int Y_Position, int Effect_ID, int Effect_Mode); // idb
int __cdecl Load_Config_dat(char *str1); // idb
void *__cdecl Set_Default_Config_dat(void *ptr);
bool __stdcall Version_Button(HWND hWnd, UINT a2, WPARAM a3, LPARAM a4);
bool __stdcall Mute_Button(HWND hWnd, UINT a2, WPARAM a3, LPARAM a4);
bool __stdcall Debug_Save_Button(HWND hDlg, UINT a2, WPARAM a3, LPARAM a4);
bool __stdcall Quit_Button(HWND hDlg, UINT a2, WPARAM a3, LPARAM lpString);
int __cdecl Change_Screen_Offsets(int New_Screen_Offset_Y, int New_Screen_Offset_X); // idb
int __cdecl Upd_Scr_With_Wind_(HWND hWnd); // idb
signed int __cdecl DDRAW_Setup_(int a1, int a2, int a3);
void *__cdecl DDRAW_Destroy_(int a1);
void *__cdecl Destroy_Bitmap_Obj_(int a1);
int __cdecl Load_Image_From_Res(char *Ptr_Graphic, int GraphicID); // idb
int __cdecl Load_Image_From_File(char *source, int destination); // idb
int __cdecl Load_Image_From_Resource_Reloadable_(char *, int); // idb
int __cdecl LoadImage_Must_Prep_RAM(char *source, int destination); // idb
signed int __cdecl Prep_RAM_For_Img_(int a1, int a2, signed int a3, int a4);
int __cdecl Blit_Rect_From_Img_File_To_Region(int DstRect, int X_Position);
int __cdecl Render_Graphics(int Dst_Rects, int X_Position, int Y_Position, int Src_Rects, int GraphicsID); // idb
int __cdecl Draw_Obj(int Dst_Rects, int X_Position, int Y_Position, int Src_Rects, int); // idb
int __cdecl Blit_For_Dmg_Num_(int a1, int a2, int a3, int a4, int a5);
int __cdecl Set_BG_Color(COLORREF color); // idb
int __cdecl FillRects_Memory(int Ptr_Img_Rects, int Mask_Color); // idb
int __cdecl FillRects_Memory_(int a1, int a2, int a3);
signed int Upd_Scr_With_Wind_sub_sub();
int Upd_Scr_With_Wind_sub();
HFONT __cdecl Create_Font(LPCSTR a1);
int __cdecl Draw_Text_To_Screen(int X_Position, int Y_Position, char *Ptr_String, COLORREF color, int DDraw_Thingy); // idb
// int Delete_Font_Obj(void); weak
int sub_40CF90();
int Draw_From_Slot_0x25();
int __cdecl Draws_Some_Text(int, int, char *, int); // idb
int Draws_Some_Text_();
int sub_40D2D0();
int sub_40D350();
int __cdecl sub_40D3A0(int a1);
void *sub_40D3E0();
void sub_40D410();
signed int sub_40D440();
int sub_40D5C0();
int sub_40D620();
int __cdecl sub_40DB00(int a1);
int __cdecl sub_40DB40(int a1);
void sub_40DB60();
int __cdecl sub_40DB70(HWND hWnd, int); // idb
int __cdecl sub_40DD70(HWND hWnd); // idb
int sub_40DE60();
// void __cdecl __setargv(); idb
void sub_40DEA0();
char __cdecl sub_40DEC0(char a1);
char __cdecl sub_40DF50(char a1);
int sub_40DFE0();
int TSC_FAI_and_FAO();
bool sub_40E830();
void *sub_40E850();
void *sub_40E870();
int __cdecl sub_40E890(signed int a1);
int __cdecl sub_40E8E0(signed int a1);
bool __cdecl Check_Flag(signed int Flag_hashtag);
int __cdecl sub_40E970(signed int a1);
int __cdecl sub_40E9C0(signed int a1);
bool __cdecl sub_40EA10(signed int a1);
// int _initp_eh_hooks(void); weak
int __cdecl Explosion_(int X_Position, int Y_Position, int); // idb
int __cdecl sub_40EAC0(int a1, int a2);
int sub_40ED20();
int __cdecl sub_40EDE0(int a1, int a2);
int sub_40EE20();
// int _crt_debugger_hook(void); weak
int Camera_Code();
int __cdecl sub_40F020(_DWORD *a1, _DWORD *a2);
int sub_40F130();
int __cdecl sub_40F220(int a1);
int *__cdecl sub_40F250(int a1, int a2);
int *__cdecl sub_40F2D0(int a1, int a2);
int __cdecl sub_40F310(int a1);
int __cdecl sub_40F320(int a1);
void sub_40F330();
int __cdecl RNG_Range(int minimum, int maximum); // idb
int __cdecl Render_Numbers(int X_Position, int Y_Position, int Numbers_To_Display, int Number_Of_Digits); // idb
int __cdecl Upd_Win(HWND hWnd); // idb
signed int sub_40F730();
signed int Title_Screen_Code();
signed int __cdecl Main_Game_Loop(HWND hWnd);
int __cdecl sub_4108B0(int a1, _DWORD *a2, int a3);
int __cdecl Get_Version_Number(int, int, int, int); // idb
bool __cdecl sub_410AB0(HWND hwnd);
signed int __cdecl Check_for_file(int a1);
DWORD __cdecl FileLength(char *FileName);
signed int __cdecl sub_410DE0(int a1, int a2);
bool __cdecl sub_410E90(unsigned __int8 a1);
bool __cdecl CenterWindow(HWND hWnd);
int __cdecl Get_Window_Rects(HWND hWnd, int, int); // idb
int __cdecl sub_4111F0(HWND hWnd, int); // idb
bool __cdecl sub_4112E0(char *filename);
signed int sub_411390();
signed int __cdecl sub_411E60(int a1);
bool __cdecl sub_411EB0(HINSTANCE hinst, int a2);
signed int __cdecl sub_411EF0(int a1);
signed int __stdcall sub_411FC0(int a1, int a2);
signed int __cdecl sub_4120F0(int a1);
signed int sub_412250();
int Update_Keys();
bool __cdecl sub_412320(HWND hWnd);
void Display_FPS();
int Calculate_FPS();
int __stdcall WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nShowCmd); // idb
int sub_412BC0();
int sub_412BF0();
signed int __cdecl sub_412C30(int a1, HDROP a2);
LRESULT __stdcall Handle_Inputs_(HWND hWnd, UINT Msg, WPARAM wParam, LPARAM lParam);
signed int MessageQueue(void); // idb
signed int sub_4135E0();
signed int sub_413750();
signed int __cdecl sub_413770(int a1);
signed int __cdecl sub_4138A0(int a1);
void sub_413930();
__int16 __cdecl sub_413960(_DWORD *a1, _WORD *a2, _WORD *a3);
char __cdecl sub_4139A0(signed int a1, signed int a2);
char *__cdecl sub_413A00(int a1, int a2);
int __cdecl sub_413A20(int a1, int a2);
signed int __cdecl sub_413A60(int a1, int a2, unsigned __int8 a3);
int __cdecl Render_Background_Layer_(signed int a1, signed int a2);
int __cdecl Render_Foreground_Layer_And_Star_Block_(signed int a1, signed int a2);
int __cdecl Render_Caret_pbm_(signed int a1, signed int a2);
int __cdecl sub_4140F0(char *); // idb
int __cdecl TSC_MNA(int a1);
void sub_414310();
int sub_414330();
void __cdecl sub_4143C0(signed int a1);
signed int sub_414640();
bool sub_414B00();
void *memset_init_maps();
int __cdecl sub_414B40(int a1);
void *sub_414B50();
int *__cdecl sub_414BF0(int a1);
int __cdecl sub_415220(int a1);
int __cdecl Render_Quote_and_Gun(signed int, signed int); // idb
int __cdecl Physics(int a1);
int __cdecl sub_416470(int a1);
int __cdecl sub_4168C0(int a1);
int Quote_Air();
int __cdecl GetPlayerXY(int *X, int *Y); // idb
int __cdecl Move_Quote(int New_X_Position, int New_Y_Position);
// int _crt_debugger_hook_0(void); weak
int Return_InFishBattle();
int *__cdecl sub_416B70(unsigned __int8 a1);
int __cdecl sub_416C40(unsigned __int8 a1);
int __cdecl TSC_EQplus(int a1, int a2);
int __cdecl TSC_SSS_SPS_(int a1, int a2);
int TSC_SSS_SPS__2();
int TSC_SSS_SPS__3();
int TSC_SSS_SPS__4();
// int _crt_debugger_hook_1(void); weak
signed int __cdecl sub_416E30(int a1, int a2);
int sub_417160();
signed int __cdecl sub_4171D0(int a1, int a2);
signed int __cdecl sub_4172E0(int a1, int a2);
signed int __cdecl sub_4173F0(int a1, int a2);
signed int __cdecl sub_417500(int a1, int a2);
signed int __cdecl sub_417610(int a1, int a2);
signed int __cdecl sub_417720(int a1, int a2);
signed int __cdecl sub_417830(int a1, int a2);
signed int __cdecl sub_417940(int a1, int a2);
signed int __cdecl sub_417A50(int a1, int a2);
signed int __cdecl sub_417AE0(int a1, int a2);
signed int __cdecl sub_417B70(int a1, int a2);
signed int __cdecl sub_417C00(int a1, int a2);
signed int __cdecl sub_417C90(int a1, int a2);
signed int __cdecl sub_417D20(int a1, int a2);
signed int __cdecl sub_417DB0(int a1, int a2);
int Tile_Code();
signed int __cdecl sub_4187F0(int a1);
char __cdecl sub_418B10(int a1);
signed int __cdecl sub_418C20(int a1);
char sub_419030();
int sub_419450();
int __cdecl EXP_Add(int EXP_To_Add); // idb
int ResetSelectedWeapon(void); // idb
bool LevelDownFrom3(void);
int __cdecl Take_Damage(int Damage); // idb
int sub_419B50();
int __cdecl sub_419BA0(int a1, int a2);
int __cdecl TSC_LIplus(__int16 Health_To_Restore); // idb
int __cdecl TSC_MLplus(__int16 Life_To_Add); // idb
int __cdecl Render_XP_Bar_And_Misc(int a1);
int Render_Weapon_Icons();
int __cdecl Render_Health_Bar(int a1);
int __cdecl Underwater_Timer(int X_Position, int Y_Position); // idb
int __cdecl sub_41A430(int X_Position, int Y_Position);
signed int sub_41A5D0();
int Get_Hell_Time();
signed int __cdecl sub_41A8F0(int a1, char a2, char a3);
int __cdecl sub_41ABA0(unsigned __int8 a1, char a2, int a3);
int __cdecl sub_41AC70(int a1, unsigned __int8 a2, char a3);
int __cdecl sub_41AD20(int a1, int a2, char a3);
int __cdecl sub_41ADC0(unsigned __int8 a1, int a2, char a3, int a4);
int __cdecl sub_41B2A0(char a1);
signed int sub_41B380();
signed int __cdecl sub_41B3F0(char a1, char a2, char a3);
int __cdecl sub_41B440(unsigned __int8 a1, char a2);
int __cdecl sub_41B480(unsigned __int8 a1, char a2);
int __cdecl sub_41B4D0(int a1, char a2);
int __cdecl sub_41B510(unsigned __int8 a1, int a2, char a3);
_DWORD *__thiscall sub_41B600(_DWORD *this);
signed int __thiscall sub_41B650(int this);
signed int __thiscall sub_41B730(int this, int a2, char a3);
signed int __thiscall sub_41B890(_BYTE *this, unsigned __int16 a2);
int __thiscall sub_41BA70(void **this);
int __thiscall sub_41BAD0(_BYTE *this, LPCSTR lpName);
bool sub_41C180();
int __cdecl sub_41C1E0(UINT uDelay); // idb
int __stdcall fptc(UINT uTimerID, UINT uMsg, DWORD dwUser, DWORD dw1, DWORD dw2);
signed int sub_41C250();
int __thiscall sub_41C2B0(_WORD *this);
int __thiscall sub_41C630(_DWORD *this, int a2);
signed int sub_41C6C0();
int __cdecl sub_41C6F0(LPCSTR lpName); // idb
int __cdecl sub_41C730(int a1);
int sub_41C770();
int sub_41C790();
signed int __cdecl sub_41C7C0(signed int a1);
void sub_41C7F0();
// int __setargv_0(void); weak
int sub_41C890();
void sub_41C8F0();
signed int __cdecl Sound_Thingy(int a1, int a2);
bool Check_Profile_DAT(void);
signed int __cdecl sub_41D040(int a1);
signed int __cdecl sub_41D260(int a1);
int __cdecl sub_41D550(HWND hWnd); // idb
void *sub_41D610();
signed int __cdecl sub_41D630(int a1, int a2);
int sub_41D740();
int sub_41D840();
signed int __cdecl sub_41DA00(_DWORD *a1);
int __cdecl Snake(int Level); // idb
int __cdecl PolarStar(int Level); // idb
int __cdecl Fireball(int); // idb
char __cdecl MachineGun(int Level);
int __cdecl Missile_Launcher(int Level, int Super_Or_Normal); // idb
int Bubbler_Lvl_1();
char __cdecl Bubbler_Lvl_2_3(int Level);
int __cdecl Blade(int a1);
int __cdecl Nemesis(int Bullet_Level);
int sub_41F9E0();
int __cdecl Spur(int a1);
char sub_41FE70();
signed int __cdecl sub_4200C0(int a1);
int sub_4201A0();
int __cdecl Play_Sound_Effect(int SoundID, int Channel); // idb
int __cdecl sub_420720(int a1, int a2);
size_t __cdecl Sound_Loader(int Ptr_Sound, int Channels, int SoundID); // idb
signed int __cdecl sub_420BE0(int a1, int Event, int a3, int a4);
int __cdecl Tsc_CMU(int Music_To_Play); // idb
int Tsc_RMU();
int sub_420FA0();
int sub_421040();
int __cdecl sub_4213B0(signed int a1, signed int a2);
bool sub_4214E0();
void *sub_421570();
_BYTE *__cdecl sub_4215C0(int a1, signed int a2);
int __cdecl sub_421660(char *); // idb
int __cdecl sub_421750(char *); // idb
// int __cdecl _fputchar(int); idb
int __cdecl TSC_Dec_to_Hex(int num); // idb
signed int __cdecl Call_TSC_Event(int Event); // idb
signed int __cdecl sub_421AF0(int a1);
unsigned int sub_421C50();
void *sub_421C80();
void *__cdecl sub_421D10(int a1);
int sub_421E90();
int sub_421F10();
int Tsc_Parser(void); // idb
int sub_425790();
void sub_4257F0();
int __cdecl SIN_function(unsigned __int8 a1);
int __cdecl COS_function(char a1);
unsigned __int8 __cdecl Angle_Calculator(int a1, int a2);
int __cdecl Unknown_Library_1(float); // idb
void __cdecl sub_425B60(float a1);
int __cdecl Unknown_Library_2(float); // idb
void __cdecl sub_425BA0(float a1);
void *sub_425BC0();
int __cdecl sub_425BF0(int a1, int a2, int a3);
int sub_426360();
int __cdecl sub_426430(signed int a1, signed int a2);
int __cdecl NPC0_Nothing(int a1);
int __cdecl NPC1_Weapon_Energy(int a1);
int __cdecl NPC2_Enemy_Behemoth(int a1);
int __cdecl NPC3_Deletes_Itself(int a1);
int __cdecl NPC4_Smoke(int a1);
int __cdecl NPC5_Enemy_Critter_hopping_green(int a1);
int __cdecl NPC6_Enemy_Beetle_horiz_green(int a1);
int __cdecl NPC7_Enemy_Basil(int a1);
int __cdecl NPC8_Enemy_Beetle_follow1(int a1);
int __cdecl NPC9_Balrog_DropIn(int a1);
int __cdecl NPC10_Boss_Balrog_shooting(int a1);
int __cdecl NPC11_Projectile_Balrog_energy_bounce(int a1);
int __cdecl NPC12_Balrog_cutscene(int a1);
int __cdecl NPC13_Forcefield(int a1);
int __cdecl NPC14_Santas_Key(int a1);
int __cdecl NPC15_TreasureChestClosed(int a1);
int __cdecl NPC16(int a1);
int __cdecl NPC17(int a1);
int __cdecl NPC18(int a1);
int __cdecl NPC19(int a1);
int __cdecl NPC20(int a1);
int __cdecl NPC21(int a1);
int __cdecl NPC22(int a1);
int __cdecl NPC23(int a1);
int __cdecl NPC24(int a1);
int __cdecl NPC25(int a1);
int __cdecl NPC26(int a1);
int __cdecl NPC27(int a1);
int __cdecl NPC28(int a1);
int __cdecl NPC29(int a1);
int __cdecl NPC30(int a1);
int __cdecl NPC31(int a1);
int __cdecl NPC32(int a1);
int __cdecl NPC33(int a1);
signed int __cdecl NPC34(int a1);
int __cdecl NPC35(int a1);
int __cdecl NPC36(int a1);
int __cdecl NPC37(int a1);
int __cdecl NPC38(int a1);
int __cdecl NPC39(int a1);
int __cdecl NPC40(int a1);
signed int __cdecl NPC41(int a1);
int __cdecl NPC42(int a1);
signed int __cdecl NPC43(int a1);
int __cdecl NPC44(int a1);
int __cdecl NPC45(int a1);
signed int __cdecl NPC46(int a1);
int __cdecl NPC47(int a1);
char *__cdecl NPC48(void *a1);
int __cdecl NPC49(int a1);
int __cdecl NPC50(int a1);
int __cdecl NPC51(int a1);
int __cdecl NPC52_Sitting_Blue_Bot(int a1);
int __cdecl NPC53(void *); // idb
char *__cdecl NPC54(void *a1);
int __cdecl NPC55(int a1);
int __cdecl NPC56(int a1);
int __cdecl NPC57(int a1);
int __cdecl NPC58(int a1);
int __cdecl NPC59(int a1);
int __cdecl NPC60(int a1);
int __cdecl NPC61(int a1);
int __cdecl NPC62(int a1);
int __cdecl NPC63(int a1);
int __cdecl NPC64(int a1);
int __cdecl NPC65(int a1);
int __cdecl NPC66(int a1);
int __cdecl NPC67(int a1);
int __cdecl NPC68(int a1);
int __cdecl NPC69(int a1);
int __cdecl NPC70(int a1);
int __cdecl NPC71(int a1);
int __cdecl NPC72(int a1);
int __cdecl NPC73(int a1);
int __cdecl NPC74(int a1);
int __cdecl NPC75(int a1);
int __cdecl NPC76(int a1);
int __cdecl NPC77_Sandaim_the_Farmer(int a1);
signed int __cdecl NPC78_Pot(int a1);
int __cdecl NPC79(int a1);
int __cdecl NPC80(int a1);
int __cdecl NPC81(int a1);
int __cdecl NPC82(int a1);
int __cdecl NPC83(int a1);
int __cdecl NPC84(int a1);
int __cdecl NPC85(int a1);
int __cdecl NPC86(int a1);
int __cdecl NPC87(int a1);
int __cdecl NPC88(int a1);
int __cdecl NPC89(int a1);
int __cdecl NPC90(int a1);
signed int __cdecl NPC91(int a1);
int __cdecl NPC92(int a1);
int __cdecl NPC93(int a1);
int __cdecl NPC94_Giant_Jelly(int a1);
int __cdecl NPC95(int a1);
int __cdecl NPC96(int a1);
int __cdecl NPC97(int a1);
int __cdecl NPC98(int a1);
int __cdecl NPC99(int a1);
signed int __cdecl NPC100(int a1);
int __cdecl NPC101(int a1);
int __cdecl NPC102(int a1);
int __cdecl NPC103(int a1);
int __cdecl NPC104(int a1);
int __cdecl NPC105(int a1);
int __cdecl NPC106(int a1);
int __cdecl NPC107(int a1);
int __cdecl NPC108(int a1);
int __cdecl NPC109(int a1);
int __cdecl NPC110(int a1);
int __cdecl NPC111(int a1);
int __cdecl NPC112(int a1);
int __cdecl NPC113(int a1);
int __cdecl NPC114(int a1);
int __cdecl NPC115(int a1);
int __cdecl NPC116(int a1);
int __cdecl NPC117(int a1);
int __cdecl NPC118(int a1);
int __cdecl NPC119(int a1);
signed int __cdecl NPC120(int a1);
int __cdecl NPC121(int a1);
int __cdecl NPC122(int a1);
int __cdecl NPC123(int a1);
int __cdecl NPC124(int a1);
int __cdecl NPC125(int a1);
int __cdecl NPC126(int a1);
int __cdecl NPC127(int a1);
int __cdecl NPC128(int a1);
int __cdecl NPC129(int a1);
int __cdecl NPC130(int a1);
int __cdecl NPC131(int a1);
int __cdecl NPC132(int a1);
int __cdecl NPC133(int a1);
int __cdecl NPC134(int a1);
int __cdecl NPC135(int a1);
int __cdecl NPC136(int a1);
int __cdecl NPC137(int a1);
int __cdecl NPC138(int a1);
int __cdecl NPC139(int a1);
int __cdecl NPC140(int a1);
int __cdecl NPC141(int a1);
int __cdecl NPC142(int a1);
int __cdecl NPC143(int a1);
int __cdecl NPC144(int a1);
int __cdecl NPC145(int a1);
int __cdecl NPC146(int a1);
int __cdecl NPC147(int a1);
int __cdecl NPC148(int a1);
signed int __cdecl NPC149(int a1);
int __cdecl NPC150(int a1);
int __cdecl NPC151(int a1);
int __cdecl NPC152(int a1);
int __cdecl NPC153(int a1);
int __cdecl NPC154(int NPC_Vars_Pointer);
int __cdecl NPC155(int a1);
int __cdecl NPC156(int a1);
signed int __cdecl NPC157(int a1);
int __cdecl NPC158(int a1);
int __cdecl NPC159(int a1);
int __cdecl NPC160(int a1);
int __cdecl NPC161(int a1);
int __cdecl NPC162(int a1);
int __cdecl NPC163(int a1);
int __cdecl NPC164(int a1);
int __cdecl NPC165(int a1);
int __cdecl NPC166(int a1);
int __cdecl NPC167(int a1);
signed int __cdecl NPC168(int a1);
int __cdecl NPC169(int a1);
int __cdecl NPC170(void *Frame_1_A_4); // idb
int __cdecl NPC171(int a1);
int __cdecl NPC172(void *); // idb
int __cdecl NPC173(int a1);
int __cdecl NPC174(int a1);
int __cdecl NPC175(void *); // idb
int __cdecl NPC176(void *); // idb
int __cdecl NPC177(int a1);
void *__cdecl NPC178(void *a1);
void *__cdecl NPC179(void *a1);
int __cdecl NPC180(int a1);
int __cdecl NPC181(int a1);
int __cdecl NPC182(int a1);
int __cdecl NPC183(int a1);
int __cdecl NPC184(int a1);
int __cdecl NPC185(int a1);
int __cdecl NPC186(int a1);
int __cdecl NPC187(int a1);
int __cdecl NPC188(int a1);
int __cdecl NPC189(int a1);
int __cdecl NPC190(int a1);
int __cdecl NPC191(int a1);
int __cdecl NPC192(int a1);
int __cdecl NPC193(int a1);
signed int __cdecl NPC194(int a1);
int __cdecl NPC195(int a1);
signed int __cdecl NPC196(int a1);
int __cdecl NPC197(void *); // idb
int __cdecl NPC198(int a1);
int __cdecl NPC199(int a1);
int __cdecl NPC200(int a1);
int __cdecl NPC201(int a1);
int __cdecl NPC202(int a1);
int __cdecl NPC203(int a1);
int __cdecl NPC204(int a1);
int __cdecl NPC205(int a1);
int __cdecl NPC206(int a1);
int __cdecl NPC207(int a1);
int __cdecl NPC208(int a1);
int __cdecl NPC209(int a1);
int __cdecl NPC210(int a1);
int __cdecl NPC211(int a1);
int __cdecl NPC212(int a1);
int __cdecl NPC213(int a1);
int __cdecl NPC214(int a1);
int __cdecl NPC215(int a1);
int __cdecl NPC216(int a1);
int __cdecl NPC217(int a1);
int __cdecl NPC218(int a1);
int __cdecl NPC219(int a1);
int __cdecl NPC220(int a1);
int __cdecl NPC221(int a1);
signed int __cdecl NPC222(int a1);
int __cdecl NPC223(int a1);
int __cdecl NPC224(int a1);
int __cdecl NPC225(int a1);
int __cdecl NPC226(int a1);
int __cdecl NPC227(int a1);
int __cdecl NPC228(int a1);
signed int __cdecl NPC229(int a1);
signed int __cdecl NPC230(int a1);
int __cdecl NPC231(int a1);
int __cdecl NPC232(int a1);
int __cdecl NPC233(int a1);
signed int __cdecl NPC234(int a1);
int __cdecl NPC235(int a1);
int __cdecl NPC236(int a1);
int __cdecl NPC237(int a1);
int __cdecl NPC238(int a1);
int __cdecl NPC239(int a1);
int __cdecl NPC240(int a1);
int __cdecl NPC241(int a1);
int __cdecl NPC242(void *); // idb
int __cdecl NPC243(int a1);
signed int __cdecl NPC244(signed int a1);
int __cdecl NPC245(int a1);
int __cdecl NPC246(int a1);
int __cdecl NPC247(int a1);
int __cdecl NPC248(int a1);
int __cdecl NPC249(int a1);
int __cdecl NPC250(int a1);
int __cdecl NPC251(int a1);
int __cdecl NPC252(int a1);
int __cdecl NPC253(int a1);
signed int __cdecl NPC254(int a1);
int __cdecl NPC255(int a1);
int __cdecl NPC256(int a1);
int __cdecl NPC257(int a1);
int __cdecl NPC258(int a1);
char *__cdecl NPC259(void *a1);
int __cdecl NPC260(int a1);
int __cdecl NPC261(int a1);
int __cdecl NPC262(int a1);
int __cdecl NPC263(int a1);
char *__cdecl NPC264(void *a1);
int __cdecl NPC265(int a1);
int __cdecl NPC266(void *); // idb
int __cdecl NPC267(int a1);
int __cdecl NPC268(int a1);
int __cdecl NPC269(int a1);
int __cdecl NPC270(int a1);
void *__cdecl NPC271(void *a1);
int __cdecl NPC272(int a1);
int __cdecl NPC273(void *); // idb
int __cdecl NPC274(int a1);
int __cdecl NPC275(int a1);
int __cdecl NPC276(int a1);
int __cdecl NPC277(void *); // idb
int __cdecl NPC278(int a1);
int __cdecl NPC279(int a1);
int __cdecl NPC280(int a1);
int __cdecl NPC281(int a1);
int __cdecl NPC282(int a1);
int __cdecl NPC283(int a1);
int __cdecl NPC284(int a1);
int __cdecl NPC285(void *); // idb
int __cdecl NPC286(int a1);
int __cdecl NPC287(int a1);
int __cdecl NPC288(int a1);
int __cdecl NPC289(void *); // idb
int __cdecl NPC290(void *); // idb
int __cdecl NPC291(int a1);
int NPC292();
int __cdecl NPC293(int a1);
int __cdecl NPC294(int a1);
int __cdecl NPC295(int a1);
int __cdecl NPC296(int a1);
signed int __cdecl NPC297(int a1);
int __cdecl NPC298(int a1);
int __cdecl NPC299(int a1);
signed int __cdecl NPC300(int a1);
int __cdecl NPC301(int a1);
int __cdecl NPC302(int a1);
int __cdecl NPC303(int a1);
int __cdecl NPC304(int a1);
int __cdecl NPC305(int a1);
int __cdecl NPC306(int a1);
int __cdecl NPC307(int a1);
int __cdecl NPC308(int a1);
int __cdecl NPC309(int a1);
int __cdecl NPC310(int a1);
int __cdecl NPC311(int a1);
int __cdecl NPC312(int a1);
int __cdecl NPC313(int a1);
int __cdecl NPC314(int a1);
int __cdecl NPC315(void *); // idb
int __cdecl NPC316(int a1);
int __cdecl NPC317(int a1);
int __cdecl NPC318(int a1);
int __cdecl NPC319(int a1);
int __cdecl NPC320(int a1);
int __cdecl NPC321(int a1);
int __cdecl NPC322(int a1);
int __cdecl NPC323(int a1);
int __cdecl NPC324(int a1);
int __cdecl NPC325(int a1);
int __cdecl NPC326(int a1);
int __cdecl NPC327(int a1);
int __cdecl NPC328(int a1);
signed int __cdecl NPC329(int a1);
int __cdecl NPC330(int a1);
int __cdecl NPC331(int a1);
int __cdecl NPC332(int a1);
int __cdecl NPC333(int a1);
int __cdecl NPC334(int a1);
int __cdecl NPC335(int a1);
int __cdecl NPC336(int a1);
int __cdecl NPC337(int a1);
char *__cdecl NPC338(void *a1);
int __cdecl NPC339(int a1);
int __cdecl NPC340(int a1);
int __cdecl NPC341(int a1);
int __cdecl NPC342(void *); // idb
int __cdecl NPC343(int a1);
int __cdecl NPC344(int a1);
int __cdecl NPC345(int a1);
int __cdecl NPC346(int a1);
int __cdecl NPC347(int a1);
int __cdecl NPC348(int a1);
signed int __cdecl NPC349(int a1);
int __cdecl NPC350(void *); // idb
int __cdecl NPC351(int a1);
int __cdecl NPC352(int a1);
int __cdecl NPC353(int a1);
int __cdecl NPC354(int a1);
int __cdecl NPC355(int a1);
int __cdecl NPC356(int a1);
int __cdecl NPC357(int a1);
int __cdecl NPC358(int a1);
int __cdecl NPC359(int a1);
signed int __cdecl NPC360_Thank_You(int a1);
void *sub_46EB30();
signed int __cdecl sub_46EB50(int a1);
int __cdecl sub_46EE50(int a1);
int __cdecl NPC_Create(int NPC_ID, int X_Position, int Y_Position, int X_Velocity, int Y_Velocity, int, int, int); // idb
int __cdecl sub_46F150(int X_Position, int Y_Position, int maximum, int a4);
int __cdecl sub_46F200(int X_Position, int Y_Position, int maximum, int a4);
int __cdecl Spawn_Exp(int X_Position, int Y_Position, signed int XP_Amount); // idb
signed int __cdecl Spawn_Missiles(int a1, int a2, int a3);
signed int __cdecl Spawn_HP(int a1, int a2, int a3);
int __cdecl sub_46F760(void *); // idb
void __cdecl sub_46F810(signed int a1, signed int a2);
int sub_46FA00();
int __cdecl sub_46FAB0(int a1, int a2, int a3);
int __cdecl sub_46FD10(int a1, int a2, int a3);
int __cdecl sub_46FF90(int a1, int a2, int a3);
int __cdecl sub_470060(int a1, int a2, int a3, int a4);
int __cdecl sub_470150(int a1);
int __cdecl sub_470250(int a1);
int __cdecl sub_4702D0(int a1, int a2);
signed int __cdecl sub_470490(int a1);
bool __cdecl sub_4704F0(int a1);
int __cdecl sub_4705C0(int a1, int a2, int a3);
int __cdecl sub_470870(int a1, int a2, int a3);
int __cdecl sub_470970(int a1, int a2, int a3);
int __cdecl sub_470A70(int a1, int a2, int a3);
int __cdecl sub_470B70(int a1, int a2, int a3);
int __cdecl sub_470C70(int a1, int a2, int a3);
int __cdecl sub_470D80(int a1, int a2, int a3);
int __cdecl sub_470E90(int a1, int a2, int a3);
int __cdecl sub_470FA0(int a1, int a2, int a3);
int __cdecl sub_4710B0(int a1, int a2, int a3);
void sub_471160();
void *__cdecl sub_471B80(void *a1, int a2);
int sub_471D50();
int __cdecl sub_472400(LPCSTR lpFileName); // idb
void sub_472710();
int __cdecl sub_472740(int a1);
void __cdecl sub_472770(signed int a1, signed int a2);
int __cdecl sub_472940(int); // idb
int sub_472950();
// int __cdecl Boss0_NoSpecialBoss(_DWORD); weak
int sub_473000();
int sub_473080();
int __cdecl sub_4739B0(int a1);
int __cdecl sub_473BD0(int a1);
int __cdecl sub_473DE0(int a1);
int __cdecl sub_474340(int a1);
int Boss_4_Core();
int Boss_7_Undead_Core();
int __cdecl sub_476790(int a1);
int __cdecl sub_4769A0(int a1);
int __cdecl sub_476B90(int a1);
int __cdecl sub_476E50(int a1);
int __cdecl sub_477230(int a1);
int Boss_9_Ballos_Ball();
int __cdecl sub_478AA0(int a1);
int __cdecl sub_478F20(int a1);
int __cdecl sub_478FE0(int a1);
int __cdecl sub_479010(int a1);
char *Boss_2_Balfrog();
char *sub_47A6A0();
char *sub_47A800();
char *sub_47A8A0();
// int _crt_debugger_hook_2(void); weak
signed int __cdecl sub_47B460(int a1);
signed int sub_47B500();
LONG sub_47B540();
int Boss_1_Omega();
int sub_47C380();
int sub_47C4E0();
int sub_47C7A0();
char *Boss_8_Heavy_Press();
int Boss_6_Dragon_Sisters();
int __cdecl sub_47DAA0(int a1);
int __cdecl sub_47DF10(int a1);
void *Boss_3_Monster_X();
int __cdecl sub_47F710(int a1);
int __cdecl sub_480090(int a1);
int __cdecl sub_4802A0(int a1);
int __cdecl sub_480550(int a1);
int __cdecl sub_4808C0(int a1);
// HRESULT __stdcall DirectDrawCreate(GUID *lpGUID, LPDIRECTDRAW *lplpDD, IUnknown *pUnkOuter); idb
// HRESULT __stdcall DirectInputCreateA(HINSTANCE hinst, DWORD dwVersion, LPDIRECTINPUTA *ppDI, LPUNKNOWN punkOuter); idb
// HRESULT __stdcall DirectSoundCreate(LPGUID, LPDIRECTSOUND *, LPUNKNOWN); idb
// void *__cdecl memset(void *ptr, int value, size_t num); idb
signed int report_failure_Return_1();
// int __cdecl fclose(FILE *stream); idb
// size_t __cdecl fread(void *ptr, size_t size, size_t count, FILE *stream); idb
void __cdecl sub_480F55(FILE *file, size_t sizea, size_t counta, FILE *filea);
// FILE *__cdecl fopen(const char *filename, const char *mode); idb
// int sprintf(char *str, const char *format, ...); idb
// int __cdecl strcmp(const char *str1, const char *str2); idb
// char *__cdecl strcpy(char *destination, const char *source); idb
// char *__cdecl strcat(char *destination, const char *source); idb
// size_t __cdecl strlen(const char *str); idb
// void __cdecl free(void *ptr); idb
// void *__cdecl malloc(size_t size); idb
// void *__cdecl memcpy(void *destination, const void *source, size_t num); idb
// void __cdecl srand(unsigned int seed); idb
// int rand(void); idb
// int __cdecl memcmp(const void *ptr1, const void *ptr2, size_t num); idb
// int sscanf(const char *str, const char *format, ...); idb
// int fprintf(FILE *stream, const char *format, ...); idb
// size_t __cdecl fwrite(const void *ptr, size_t size, size_t count, FILE *stream); idb
void __cdecl sub_481981(FILE *file, size_t sizea, size_t counta, FILE *filea);
// int __cdecl fseek(FILE *stream, __int32 offset, int origin); idb
// double __cdecl sin(double angle_rad); idb
// double __cdecl cos(double angle_rad); idb
signed int __security_error_handler_return_1();
// _DWORD __cdecl _SEH_prolog(_DWORD, _DWORD); weak
// _DWORD __cdecl flsall(_DWORD); weak
// int __usercall flsall_sub_482475@<eax>(int a1@<esi>);
int flsall_sub_4824A1();
int Return_flsall_1();
// int __cdecl _lock_file(FILE *file); idb
// _DWORD __cdecl _unlock_file(_DWORD); weak
// _DWORD __cdecl _unlock_file2(_DWORD, _DWORD); weak
// _DWORD __cdecl _unlock(_DWORD); weak
// int __usercall freefls@<eax>(int a1@<ebp>);
// int freefls(void); weak
void sub_486CC0();
void sub_486D04(void); // idb
// _DWORD __cdecl _unlock_fhandle();
int _alloc_osfhnd_sub_48763C();
int commit_call___unlock_fhandle();
int _fcloseall_sub_48784E();
// _DWORD __cdecl _ld12cvt(_DWORD, _DWORD, _DWORD); weak
int __cdecl sub_488F49(int a1, int a2);
int __cdecl sub_488F5F(int a1, int a2);
int __cdecl sub_488F75(int a1, int a2);
int __cdecl sub_488FB2(int a1, int a2);
// _DWORD __cdecl __strgtold12(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); weak
int Return_0();
// int __usercall realloc_sub_48AF52@<eax>(int a1@<ebp>);
// int realloc_sub_48AF5A(void); weak
// char *__cdecl _itoa(int value, char *str, int base); idb
// BOOL __stdcall VerQueryValueA(const LPVOID pBlock, LPSTR lpSubBlock, LPVOID *lplpBuffer, PUINT puLen); idb
// BOOL __stdcall GetFileVersionInfoA(LPSTR lptstrFilename, DWORD dwHandle, DWORD dwLen, LPVOID lpData); idb
// DWORD __stdcall GetFileVersionInfoSizeA(LPSTR lptstrFilename, LPDWORD lpdwHandle); idb
// BOOL __stdcall ImmReleaseContext(HWND, HIMC); idb
// BOOL __stdcall ImmSetOpenStatus(HIMC, BOOL); idb
// HIMC __stdcall ImmGetContext(HWND); idb
// BOOL __stdcall StretchBlt(HDC, int, int, int, int, HDC, int, int, int, int, DWORD); idb
// int __stdcall SetBkMode(HDC, int); idb
// HGDIOBJ __stdcall SelectObject(HDC, HGDIOBJ); idb
// HGDIOBJ __stdcall GetStockObject(int); idb
// BOOL __stdcall DeleteDC(HDC); idb
// COLORREF __stdcall SetTextColor(HDC, COLORREF); idb
// BOOL __stdcall TextOutA(HDC, int, int, LPCSTR, int); idb
// HFONT __stdcall CreateFontA(int, int, int, int, int, DWORD, DWORD, DWORD, DWORD, DWORD, DWORD, DWORD, DWORD, LPCSTR); idb
// COLORREF __stdcall GetPixel(HDC, int, int); idb
// COLORREF __stdcall SetPixel(HDC, int, int, COLORREF); idb
// BOOL __stdcall DeleteObject(HGDIOBJ); idb
// int __stdcall GetObjectA(HGDIOBJ, int, LPVOID); idb
// HDC __stdcall CreateCompatibleDC(HDC); idb
// HRSRC __stdcall FindResourceA(HMODULE hModule, LPCSTR lpName, LPCSTR lpType); idb
// HGLOBAL __stdcall LoadResource(HMODULE hModule, HRSRC hResInfo); idb
// LPVOID __stdcall LockResource(HGLOBAL hResData); idb
// HANDLE __stdcall OpenMutexA(DWORD dwDesiredAccess, BOOL bInheritHandle, LPCSTR lpName); idb
// HANDLE __stdcall CreateMutexA(LPSECURITY_ATTRIBUTES lpMutexAttributes, BOOL bInitialOwner, LPCSTR lpName); idb
// BOOL __stdcall ReleaseMutex(HANDLE hMutex); idb
// void __stdcall OutputDebugStringA(LPCSTR lpOutputString); idb
// HANDLE __stdcall CreateFileA(LPCSTR lpFileName, DWORD dwDesiredAccess, DWORD dwShareMode, LPSECURITY_ATTRIBUTES lpSecurityAttributes, DWORD dwCreationDisposition, DWORD dwFlagsAndAttributes, HANDLE hTemplateFile); idb
// DWORD __stdcall GetFileSize(HANDLE hFile, LPDWORD lpFileSizeHigh); idb
// BOOL __stdcall CloseHandle(HANDLE hObject); idb
// BOOL __stdcall DeleteFileA(LPCSTR lpFileName); idb
// UINT __stdcall GetSystemDirectoryA(LPSTR lpBuffer, UINT uSize); idb
// DWORD __stdcall GetModuleFileNameA(HMODULE hModule, LPSTR lpFilename, DWORD nSize); idb
// HMODULE __stdcall GetModuleHandleA(LPCSTR lpModuleName); idb
// void __stdcall Sleep(DWORD dwMilliseconds); idb
// DWORD GetTickCount(void); idb
// void __stdcall DragFinish(HDROP); idb
// UINT __stdcall DragQueryFileA(HDROP, UINT, LPSTR, UINT); idb
// HINSTANCE __stdcall ShellExecuteA(HWND hwnd, LPCSTR lpOperation, LPCSTR lpFile, LPCSTR lpParameters, LPCSTR lpDirectory, INT nShowCmd); idb
// BOOL __stdcall PathRemoveFileSpecA(LPSTR pszPath); idb
// BOOL __stdcall GetWindowRect(HWND hWnd, LPRECT lpRect); idb
// BOOL __stdcall CheckDlgButton(HWND hDlg, int nIDButton, UINT uCheck); idb
// HANDLE __stdcall LoadImageA(HINSTANCE, LPCSTR, UINT, int, int, UINT); idb
// int __stdcall MessageBoxA(HWND hWnd, LPCSTR lpText, LPCSTR lpCaption, UINT uType); idb
// BOOL __stdcall SetWindowPos(HWND hWnd, HWND hWndInsertAfter, int X, int Y, int cx, int cy, UINT uFlags); idb
// HWND __stdcall GetParent(HWND hWnd); idb
// UINT __stdcall IsDlgButtonChecked(HWND hDlg, int nIDButton); idb
// BOOL __stdcall SetDlgItemTextA(HWND hDlg, int nIDDlgItem, LPCSTR lpString); idb
// BOOL __stdcall EndDialog(HWND hDlg, int nResult); idb
// UINT __stdcall GetDlgItemTextA(HWND hDlg, int nIDDlgItem, LPSTR lpString, int nMaxCount); idb
// BOOL __stdcall PeekMessageA(LPMSG lpMsg, HWND hWnd, UINT wMsgFilterMin, UINT wMsgFilterMax, UINT wRemoveMsg); idb
// BOOL __stdcall GetMessageA(LPMSG lpMsg, HWND hWnd, UINT wMsgFilterMin, UINT wMsgFilterMax); idb
// BOOL __stdcall TranslateMessage(MSG *lpMsg); idb
// LONG __stdcall DispatchMessageA(MSG *lpMsg); idb
// BOOL __stdcall DeleteMenu(HMENU hMenu, UINT uPosition, UINT uFlags); idb
// BOOL __stdcall DrawMenuBar(HWND hWnd); idb
// LRESULT __stdcall DefWindowProcA(HWND hWnd, UINT Msg, WPARAM wParam, LPARAM lParam); idb
// int __stdcall DialogBoxParamA(HINSTANCE hInstance, LPCSTR lpTemplateName, HWND hWndParent, DLGPROC lpDialogFunc, LPARAM dwInitParam); idb
// BOOL __stdcall PostMessageA(HWND hWnd, UINT Msg, WPARAM wParam, LPARAM lParam); idb
// void __stdcall PostQuitMessage(int nExitCode); idb
// HCURSOR __stdcall LoadCursorA(HINSTANCE hInstance, LPCSTR lpCursorName); idb
// HICON __stdcall LoadIconA(HINSTANCE hInstance, LPCSTR lpIconName); idb
// ATOM __stdcall RegisterClassExA(WNDCLASSEXA *); idb
// HWND __stdcall CreateWindowExA(DWORD dwExStyle, LPCSTR lpClassName, LPCSTR lpWindowName, DWORD dwStyle, int X, int Y, int nWidth, int nHeight, HWND hWndParent, HMENU hMenu, HINSTANCE hInstance, LPVOID lpParam); idb
// HMENU __stdcall GetMenu(HWND hWnd); idb
// int __stdcall ShowCursor(BOOL bShow); idb
// BOOL __stdcall SetWindowTextA(HWND hWnd, LPCSTR lpString); idb
// BOOL __stdcall GetWindowPlacement(HWND hWnd, WINDOWPLACEMENT *lpwndpl); idb
// int __stdcall GetSystemMetrics(int nIndex); idb
// BOOL __stdcall MoveWindow(HWND hWnd, int X, int Y, int nWidth, int nHeight, BOOL bRepaint); idb
// BOOL __stdcall ShowWindow(HWND hWnd, int nCmdShow); idb
// BOOL __stdcall SystemParametersInfoA(UINT uiAction, UINT uiParam, PVOID pvParam, UINT fWinIni); idb
// MMRESULT __stdcall timeBeginPeriod(UINT uPeriod); idb
// MMRESULT __stdcall timeGetDevCaps(LPTIMECAPS ptc, UINT cbtc); idb
// MMRESULT __stdcall timeSetEvent(UINT uDelay, UINT uResolution, LPTIMECALLBACK fptc, DWORD dwUser, UINT fuEvent); idb
// DWORD timeGetTime(void); idb
// MMRESULT __stdcall timeEndPeriod(UINT uPeriod); idb
// MMRESULT __stdcall timeKillEvent(UINT uTimerID); idb

//-------------------------------------------------------------------------
// Data declarations

int dword_480D10[6] = { 24, 16, 1, 80, 44, 4721232 }; // weak
_UNKNOWN loc_480F97; // weak
_UNKNOWN loc_4819C3; // weak
const CHAR off_48C6D4 = 'O'; // idb
_SCOPETABLE_ENTRY stru_48CAC8 = { 4294967295, NULL, &loc_4819C3 }; // weak
int WeaponIconXOffset = 16; // idb
char ROM_WeaponData_Damage[] = { '\0' }; // weak
char ROM_WeaponData_Num_Impacts[] = { '\0' }; // weak
int ROM_WeaponData_Max_Distance[] = { 0 }; // weak
int ROM_WeaponData_Behaviour_Flags[] = { 0 }; // weak
int ROM_WeaponData_Bullet_Size_Width[] = { 0 }; // weak
int ROM_WeaponData_Bullet_Size_Height[] = { 0 }; // weak
int ROM_WeaponData_Wall_Collision_X[] = { 0 }; // weak
int ROM_WeaponData_Wall_Collision_Y[] = { 0 }; // weak
int ROM_WeaponData_Pos_Offset_Left[] = { 0 }; // weak
int ROM_WeaponData_Pos_Offset_Up[] = { 0 }; // weak
int ROM_WeaponData_Pos_Offset_Right[] = { 0 }; // weak
int ROM_WeaponData_Pos_Offset_Down[] = { 0 }; // weak
int dword_48F830[] = { 0 }; // weak
int dword_48F834[] = { 0 }; // weak
int (*ROM_PEffects)() = &No_Effect; // weak
char *str2 = "DOUKUTSU20041206"; // idb
char *off_48F90C[2] =
{
  "Config.dat",
  "version.%d.%d.%d.%d\r\n2004/12/20 - %04d/%02d/%02d\r\nStudio Pixel"
}; // weak
char *off_48F910 = "version.%d.%d.%d.%d\r\n2004/12/20 - %04d/%02d/%02d\r\nStudio Pixel"; // idb
int GraphicScale = 1; // weak
char *off_48F918 = "credit.tsc"; // weak
int FullscreenRect = 0; // weak
_UNKNOWN unk_48F92C; // weak
char *ROM_PImageTag = "(C)Pixel"; // idb
_UNKNOWN ROM_SoundData; // weak
_UNKNOWN unk_48FA20; // weak
_UNKNOWN unk_48FB00; // weak
_UNKNOWN unk_48FBE0; // weak
_UNKNOWN unk_48FC50; // weak
_UNKNOWN unk_48FCC0; // weak
_UNKNOWN unk_48FD30; // weak
_UNKNOWN unk_48FE10; // weak
_UNKNOWN unk_48FEF0; // weak
_UNKNOWN unk_48FFD0; // weak
_UNKNOWN unk_4900B0; // weak
_UNKNOWN unk_490190; // weak
_UNKNOWN unk_490350; // weak
_UNKNOWN unk_490430; // weak
_UNKNOWN unk_490580; // weak
_UNKNOWN unk_490660; // weak
_UNKNOWN unk_4906D0; // weak
_UNKNOWN unk_490740; // weak
_UNKNOWN unk_4907B0; // weak
_UNKNOWN unk_490820; // weak
_UNKNOWN unk_490890; // weak
_UNKNOWN unk_490900; // weak
_UNKNOWN unk_4909E0; // weak
_UNKNOWN unk_490A50; // weak
_UNKNOWN unk_490B30; // weak
_UNKNOWN unk_490C10; // weak
_UNKNOWN unk_490C80; // weak
_UNKNOWN unk_490D60; // weak
_UNKNOWN unk_490E40; // weak
_UNKNOWN unk_490EB0; // weak
_UNKNOWN unk_491000; // weak
_UNKNOWN unk_4910E0; // weak
_UNKNOWN unk_4911C0; // weak
_UNKNOWN unk_491230; // weak
_UNKNOWN unk_491310; // weak
_UNKNOWN unk_491380; // weak
_UNKNOWN unk_4913F0; // weak
_UNKNOWN unk_491460; // weak
_UNKNOWN unk_4915B0; // weak
_UNKNOWN unk_491620; // weak
_UNKNOWN unk_491700; // weak
_UNKNOWN unk_491770; // weak
_UNKNOWN unk_4917E0; // weak
_UNKNOWN unk_4918C0; // weak
_UNKNOWN unk_491930; // weak
_UNKNOWN unk_491A80; // weak
_UNKNOWN unk_491B60; // weak
_UNKNOWN unk_491C40; // weak
_UNKNOWN unk_491CB0; // weak
_UNKNOWN unk_491D20; // weak
_UNKNOWN unk_491D90; // weak
_UNKNOWN unk_491E70; // weak
_UNKNOWN unk_491EE0; // weak
_UNKNOWN unk_491F50; // weak
_UNKNOWN unk_491FC0; // weak
_UNKNOWN unk_492030; // weak
_UNKNOWN unk_4920A0; // weak
_UNKNOWN unk_492110; // weak
_UNKNOWN unk_492180; // weak
_UNKNOWN unk_4921F0; // weak
_UNKNOWN unk_4922D0; // weak
_UNKNOWN unk_4923B0; // weak
_UNKNOWN unk_492490; // weak
_UNKNOWN unk_492500; // weak
_UNKNOWN unk_492570; // weak
_UNKNOWN unk_492650; // weak
_UNKNOWN unk_492730; // weak
_UNKNOWN unk_492810; // weak
_UNKNOWN unk_4928F0; // weak
_UNKNOWN unk_4929D0; // weak
_UNKNOWN unk_492AB0; // weak
_UNKNOWN unk_492C00; // weak
_UNKNOWN unk_492C70; // weak
_UNKNOWN unk_492DC0; // weak
_UNKNOWN unk_492EA0; // weak
_UNKNOWN unk_492F80; // weak
_UNKNOWN unk_493060; // weak
_UNKNOWN unk_4930D0; // weak
_UNKNOWN unk_493140; // weak
_UNKNOWN unk_4931B0; // weak
_UNKNOWN unk_493290; // weak
_UNKNOWN unk_493370; // weak
_UNKNOWN unk_493450; // weak
_UNKNOWN unk_4934C0; // weak
_UNKNOWN unk_493530; // weak
_UNKNOWN unk_4935A0; // weak
int Key_For_Jump_Duplicate = 64; // weak
int Key_For_Shoot_Duplicate = 32; // weak
int Key_For_Next_Weapon = 128; // weak
int Key_For_Prev_Weapon = 256; // weak
int Key_For_Menu = 4096; // weak
int Key_For_Minimap = 16; // weak
int Key_For_Jump = 64; // weak
int Key_For_Shoot = 32; // weak
int Key_For_Left = 1; // weak
int Key_For_Up = 4; // weak
int Key_For_Right = 2; // weak
int Key_For_Down = 8; // weak
LPCSTR ROM_PClassName = "Cave Story ~ Doukutsu Monogatari"; // idb
int dword_493644 = 1; // weak
LPCSTR lpName = "Doukutsu"; // idb
void *ptr2 = &aPxm; // idb
_UNKNOWN unk_493650; // weak
int ROM_WeaponExpTables[] = { 0 }; // weak
int dword_493668[] = { 100 }; // weak
__int16 word_493708[] = { 256 }; // weak
__int16 word_49370A[] = { 1 }; // weak
__int16 word_49370C[] = { 4 }; // weak
_UNKNOWN unk_493738; // weak
__int16 word_49374C[] = { 262 }; // weak
__int16 word_493764[] = { 0 }; // weak
void byte_493780; // idb
void aOrg01[]; // idb
void aOrg02[]; // idb
UINT uPeriod = 13u; // idb
int dword_4937A4 = 100; // weak
char *off_4937A8[2] = { "Profile.dat", "Do041220" }; // weak
void *off_4937AC = &aDo041220; // idb
char ROM_MapHeaders_Tileset_Name[32] = "0"; // weak
char ROM_MapHeaders_Map_File_Name[32] = "0"; // weak
int ROM_MapHeaders_BGType[] = { 4 }; // weak
char ROM_MapHeaders_BGImage_File[3] = "bk0"; // weak
char ROM_MapHeaders_Sprite_File_A[5] = "Guest"; // weak
int ROM_MapHeaders_Sprite_File_B[] = { 48 }; // weak
char ROM_MapHeaders_Boss_ID[] = { '\0' }; // weak
char ROM_MapHeaders_Name[5] = "Null"; // weak
LPCSTR Ptr_Songs = "XXXX"; // idb
char asc_498290[8] = ""; // weak
int dword_498298 = 216; // weak
int dword_49829C = 16; // weak
_UNKNOWN unk_4982A0; // weak
_UNKNOWN unk_4983F0; // weak
void *off_498540 = &off_48CA30; // idb
int (__cdecl *ROM_Ptr_NPC_Code[48])(int) =
{
  &NPC0_Nothing,
  &NPC1_Weapon_Energy,
  &NPC2_Enemy_Behemoth,
  &NPC3_Deletes_Itself,
  &NPC4_Smoke,
  &NPC5_Enemy_Critter_hopping_green,
  &NPC6_Enemy_Beetle_horiz_green,
  &NPC7_Enemy_Basil,
  &NPC8_Enemy_Beetle_follow1,
  &NPC9_Balrog_DropIn,
  &NPC10_Boss_Balrog_shooting,
  &NPC11_Projectile_Balrog_energy_bounce,
  &NPC12_Balrog_cutscene,
  &NPC13_Forcefield,
  &NPC14_Santas_Key,
  &NPC15_TreasureChestClosed,
  &NPC16,
  &NPC17,
  &NPC18,
  &NPC19,
  &NPC20,
  &NPC21,
  &NPC22,
  &NPC23,
  &NPC24,
  &NPC25,
  &NPC26,
  &NPC27,
  &NPC28,
  &NPC29,
  &NPC30,
  &NPC31,
  &NPC32,
  &NPC33,
  &NPC34,
  &NPC35,
  &NPC36,
  &NPC37,
  &NPC38,
  &NPC39,
  &NPC40,
  &NPC41,
  &NPC42,
  &NPC43,
  &NPC44,
  &NPC45,
  &NPC46,
  &NPC47
}; // weak
int (*ROM_Ptr_Boss_Code[10])() =
{
  &Boss0_NoSpecialBoss,
  &Boss_1_Omega,
  &Boss_2_Balfrog,
  &Boss_3_Monster_X,
  &Boss_4_Core,
  &sub_47A8A0,
  &Boss_6_Dragon_Sisters,
  &Boss_7_Undead_Core,
  &Boss_8_Heavy_Press,
  &Boss_9_Ballos_Ball
}; // weak
int dword_498B20 = 3141592654; // weak
_UNKNOWN unk_4994F0; // weak
_UNKNOWN unk_499508; // weak
int dword_499B3C[] = { 0 }; // weak
void Quote_Inventory[]; // idb
int InventoryViewType = 0; // weak
int InventoryLabelPos = 0; // idb
void WeaponData_ID; // idb
int WeaponData_Level[] = { 0 }; // weak
int WeaponData_Energy[] = { 0 }; // weak
int WeaponData_MaxAmmo[] = { 0 }; // weak
char WeaponData_Ammo[144] = ""; // weak
int SelectedWeaponID = 0; // weak
int SelectedItemID = 0; // weak
int MenuRectFlash = 0; // weak
int dword_499C74 = 0; // weak
int BackgroundSizeX = 0; // weak
int BackgroundSizeY = 0; // weak
int BackgroundMode = 0; // weak
int dword_499C8C = 0; // weak
int GlobalWaterDepth = 0; // weak
int dword_499C94 = 0; // weak
int WeaponObj_Collision[] = { 0 }; // weak
int WeaponObj_ShotID[] = { 0 }; // weak
int WeaponObj_Flags[] = { 0 }; // weak
int WeaponObj_In_Use[] = { 0 }; // weak
int WeaponObj_X_Position[] = { 0 }; // weak
int WeaponObj_Y_Position[] = { 0 }; // weak
char WeaponObj_Direction[] = { '\0' }; // weak
tagRECT WeaponObj_Rects = { 0, 0, 0, 0 }; // idb
int WeaponObj_Max_Distance[] = { 0 }; // weak
int WeaponObj_Damage[] = { 0 }; // weak
int WeaponObj_Num_Impacts[] = { 0 }; // weak
int dword_499CF8[] = { 0 }; // weak
int dword_499CFC[] = { 0 }; // weak
int dword_499D00[] = { 0 }; // weak
int dword_499D04[] = { 0 }; // weak
int dword_499D08[] = { 0 }; // weak
int dword_499D0C[] = { 0 }; // weak
int dword_499D10[] = { 0 }; // weak
int dword_499D14[] = { 0 }; // weak
int dword_49BC98; // weak
int dword_49BC9C; // weak
int dword_49BCA0; // weak
void EffectObj_InUse; // idb
int EffectObj_ID[]; // weak
int EffectObj_Mode[]; // weak
int EffectObj_X_Position[]; // weak
int EffectObj_Y_Position[]; // weak
int EffectObj_X_Offset[]; // weak
int EffectObj_Y_Offset[]; // weak
tagRECT EffectObj_Rect; // idb
int Screen_Offset_X; // weak
int Screen_Offset_Y; // weak
tagRECT Fullscreen_Rect; // idb
int dword_49CDC0; // weak
int dword_49CDC4; // weak
void ptr[]; // idb
int dword_49CDDC[]; // weak
int dword_49CDE0[]; // weak
int dword_49CDE4[]; // weak
int dword_49CDE8[]; // weak
HGDIOBJ Handle_Font_Object[]; // idb
int Fullscreen_Width; // weak
int Fullscreen_Height; // weak
LPDIRECTDRAW Direct_Draw_Obj; // idb
LPDIRECTDRAW DD7_SurfaceA; // idb
LPDIRECTDRAW DD7_SurfaceB; // idb
LPDIRECTDRAW Image_Res_Surface[]; // idb
tagRECT Window_Rect; // idb
int Last_Tick_Count; // weak
int Current_Tick_Count; // weak
int RECT_ScreenCopy; // weak
int dword_49D444; // weak
int dword_49D448; // weak
int dword_49D44C; // weak
void DDBLTFX_ScreenCopy; // idb
tagRECT Blit_Rect_4B4; // idb
tagRECT Blit_Rect_4C4; // idb
tagRECT Blit_Rect_4D4; // idb
tagRECT Blit_Rect_4E4; // idb
int dword_49D4F4; // weak
int dword_49D4F8; // weak
int dword_49D4FC; // weak
int dword_49D500; // weak
int dword_49D504; // weak
int dword_49D508; // weak
int dword_49D50C; // weak
int dword_49D510; // weak
int Rect_Clear; // weak
int dword_49D518; // weak
int dword_49D51C; // weak
int dword_49D520; // weak
void DDBLTFX_Clear[]; // idb
char asc_49D578[20]; // weak
int dword_49D58C; // weak
int dword_49D590; // weak
int dword_49D594; // weak
int dword_49D598; // weak
void asc_49D5A0[]; // idb
char asc_49D5F0[24]; // weak
int dword_49D608; // weak
int dword_49D60C; // weak
size_t size; // idb
void *dword_49D614; // idb
int dword_49D618; // weak
int dword_49D61C; // weak
int dword_49D620; // weak
int dword_49D624; // idb
void dword_49D628; // idb
int dword_49D62C[]; // weak
int dword_49D630[]; // weak
int dword_49D634[]; // weak
char asc_49D638[1264]; // weak
int Mask_Color; // idb
void dword_49DB30; // idb
int dword_49DB34; // weak
int dword_49DB38; // weak
char byte_49DB3C[]; // weak
char byte_49DC68[]; // weak
char byte_49DC69[1311]; // weak
int dword_49E188; // weak
int dword_49E18C; // weak
int OccasionalFlash; // weak
int dword_49E194; // weak
int dword_49E198; // weak
int dword_49E19C; // weak
int dword_49E1A0; // weak
int dword_49E1A4; // weak
int dword_49E1A8; // weak
int dword_49E1AC; // weak
int dword_49E1B0; // weak
int dword_49E1B4; // weak
int dword_49E1B8; // weak
int dword_49E1BC; // weak
int dword_49E1C0; // weak
int FlashColor; // idb
int dword_49E1C8; // weak
int dword_49E1CC; // weak
int dword_49E1D0; // weak
int dword_49E1D4; // weak
int dword_49E1D8; // weak
int SoftQuakeDuration; // weak
int HardQuakeDuration; // weak
int CursorPosition; // weak
int Game_State; // weak
int GameTime; // weak
LPDIRECTINPUTA DirectInputObj; // idb
int dword_49E1F4; // weak
int dword_49E1F8; // weak
int dword_49E1FC; // weak
int dword_49E200; // weak
int dword_49E204; // weak
int dword_49E208; // weak
int dword_49E20C; // weak
int Key_Held; // weak
int Key_Pressed; // weak
int LastKeyHeld; // weak
char byte_49E220[]; // idb
char FullExePath[]; // idb
int dword_49E42C[]; // weak
HINSTANCE AppInstance; // idb
int dword_49E450; // weak
int dword_49E454; // weak
HWND AppWinHandle; // idb
int dword_49E45C; // weak
int dword_49E460; // weak
int ShowFPS; // weak
int CanAcceptInput; // weak
int Timer1000Time; // weak
int Timer1000Elapsed; // weak
int Timer1000Ticks; // weak
HANDLE hMutex; // idb
HANDLE hObject; // idb
void *dword_49E480; // idb
void byte_49E484; // idb
void word_49E586; // idb
void word_49E588; // idb
char byte_49E58C; // weak
int dword_49E590; // weak
int dword_49E594; // weak
char Ptr_String[]; // idb
void byte_49E5B8; // idb
void Player_Flags; // idb
int Tile_On_Which_Quote_Is; // weak
char Quote_Direction_Faced; // idb
int Quote_IsFacingUp; // weak
int Quote_IsFacingDown; // weak
int InFishBattle; // weak
int EquippedItems; // weak
int Quote_X_Position; // idb
int Quote_Y_Position; // idb
int Camera_X_Position; // weak
int Camera_Y_Position; // weak
int Camera_X_Velocity; // weak
int Camera_Y_Velocity; // weak
int Quote_X_Velocity; // weak
int Quote_Y_Velocity; // weak
int dword_49E674; // weak
int Quote_Animation_Frame; // weak
int QuoteHitbox_Left; // weak
int QuoteHitbox_Up; // weak
int QuoteHitbox_Right; // weak
int QuoteHitbox_Down; // weak
int QuoteSizebox_Left; // weak
int QuoteSizebox_Up; // weak
int QuoteSizebox_Right; // weak
int QuoteSizebox_Down; // weak
int dword_49E69C; // weak
int dword_49E6A0; // weak
int dword_49E6A4; // weak
int dword_49E6A8; // weak
int WeaponRenderbox_Left; // weak
int WeaponRenderbox_Up; // weak
int WeaponRenderbox_Right; // weak
int WeaponRenderbox_Down; // weak
int LvBarFlashesLeft; // weak
int ExpToGained; // weak
char Invincibility_Timer; // weak
char Time_Between_Shots; // weak
char byte_49E6CB; // weak
__int16 Quote_Health_Current; // weak
__int16 NumWhimStars; // weak
__int16 Quote_Health_Max; // weak
int YellowHealthBar; // idb
int YellowHealthBarTimer; // weak
int Air; // weak
int dword_49E6E0; // weak
char byte_49E6E4; // weak
char byte_49E6E5; // weak
char byte_49E6E6; // weak
int Booster_Fuel; // weak
int dword_49E6EC; // weak
int dword_49E6F0; // weak
int NikumaruTime; // weak
char byte_49E6F8; // weak
void destination; // idb
int Song_Current_Beat; // weak
int dword_4A4B08[]; // weak
int dword_4A4B48[]; // weak
int dword_4A4B4C[]; // weak
int dword_4A4D48[]; // weak
int dword_4A4D4C; // weak
int dword_4A4D50; // weak
int dword_4A4D54; // weak
int dword_4A4D58; // weak
int dword_4A4D5C; // weak
int dword_4A4D60; // weak
int dword_4A4D64; // weak
void byte_4A4D88; // idb
void byte_4A4D98; // idb
UINT TimerHandle; // idb
int IsTimerActive; // weak
int dword_4A4DB0[]; // weak
int dword_4A4DD0[]; // weak
int dword_4A4E10; // weak
__int16 word_4A4E18; // weak
char byte_4A4F00[]; // weak
void dword_4A5500; // idb
int dword_4A5504[]; // weak
int Y_Position; // idb
int dword_4A5544; // weak
int dword_4A5548; // weak
int Empty_Effect_Timer; // weak
int dword_4A5550; // weak
int Machine_Gun_Reload_Timer; // weak
int dword_4A5558; // weak
int dword_4A555C; // weak
int dword_4A5560; // weak
int dword_4A5564; // weak
int SoundBufferArray[]; // weak
int dword_4A57C0[]; // weak
LPDIRECTSOUND DirectSoundObj; // idb
int dword_4A57EC; // weak
int CurrentMapID; // weak
int CurrentSongID; // weak
int PreviousSongBeat; // weak
int PreviousSongID; // weak
void WhimsicalStar; // idb
int WhimsicalStar_X_Position[]; // weak
int WhimsicalStar_Y_Position[]; // weak
int WhimsicalStar_X_Velocity[]; // weak
int WhimsicalStar_Y_Velocity[]; // weak
int dword_4A5850; // weak
int dword_4A5854; // weak
int dword_4A5858; // weak
int dword_4A585C; // weak
int dword_4A5894; // weak
int dword_4A5898; // weak
int dword_4A589C; // weak
int dword_4A58A0; // weak
int CurrentStarID; // weak
void unk_4A58D0; // idb
char byte_4A59D0[]; // idb
size_t dword_4A5AD4; // idb
void *Current_Script; // idb
char byte_4A5ADC; // weak
char byte_4A5ADD; // weak
int Script_Position; // idb
int TextColumn; // weak
int dword_4A5AE8; // weak
int dword_4A5AEC[]; // weak
int dword_4A5AFC; // weak
int dword_4A5B00; // weak
int dword_4A5B04; // weak
char byte_4A5B08; // weak
int FaceID; // weak
int dword_4A5B10; // weak
int dword_4A5B14; // weak
int dword_4A5B18; // idb
int dword_4A5B1C; // weak
int dword_4A5B20; // weak
int dword_4A5B24; // weak
int dword_4A5B28; // weak
int dword_4A5B2C; // weak
char byte_4A5B30; // weak
int dword_4A5B34[]; // weak
int dword_4A5B38; // weak
int dword_4A5B48[]; // weak
__int16 word_4A5F48[]; // weak
int dword_4A5F90; // weak
void Event_InUse; // idb
int Event_Collision[]; // weak
int Event_X_Position[]; // weak
int Event_Y_Position[]; // weak
int Event_X_Velocity[]; // weak
int Event_Y_Velocity[]; // weak
int Event_AltVel_X[]; // weak
int Event_AltVel_Y[]; // weak
int Event_Unknown1[]; // weak
int Event_Unknown2[]; // weak
int dword_4A6218; // weak
void Is_NPC_Alive; // idb
int Collision_Flag[]; // weak
int NPC_X_Position[]; // weak
int NPC_Y_Position[]; // weak
int NPC_X_Velocity[]; // weak
int NPC_Y_Velocity[]; // weak
int NPC_Type[]; // weak
int NPC_Unknown[]; // weak
int NPC_Event_Number[]; // weak
int NPC_Spritesheet[]; // weak
int NPC_Sound_When_Hit[]; // weak
int NPC_Death_Sound[]; // weak
int NPC_Current_Health[]; // weak
int NPC_EXP_Health_Missiles_Dropped[]; // weak
int NPC_Explosion_Size[]; // weak
int NPC_Direction[]; // weak
__int16 NPC_Flags[]; // weak
tagRECT NPC_Rects; // idb
int NPC_Generic__Counter_[]; // weak
int NPC_Generic[]; // weak
int NPC_Generic_2[]; // weak
int NPC_Generic_3[]; // weak
int NPC_Generic_4[]; // weak
int NPC_Generic_5[]; // weak
tagRECT NPC_Hitbox; // idb
int dword_4A62AC[]; // weak
int dword_4A62B0[]; // weak
int dword_4A62B4[]; // weak
char NPC_Touching_Bullet_Flag[]; // weak
int NPC_Damage_Taken[]; // weak
int NPC_Damage_On_Contact[]; // weak
int NPC_Parent_Variable[]; // weak
int dword_4BBA20; // weak
int dword_4BBA24; // weak
int dword_4BBA28; // weak
int dword_4BBA2C; // weak
int dword_4BBA30; // weak
void *NPCStruct_Flags; // idb
char NPCStruct_Tileset; // weak
char NPCStruct_DeathSnd; // weak
int NPCStruct_Exp; // weak
int NPCStruct_Damage; // weak
int NPCStruct_Hitbox; // weak
tagRECT NPCStruct_Rects; // idb
void byte_4BBA58; // idb
int dword_4BBA5C[]; // weak
int dword_4BBA60; // idb
int dword_4BBA64; // idb
int dword_4BBA68[]; // weak
int dword_4BBA6C; // weak
int dword_4BBA78; // weak
int dword_4BBA7C[]; // weak
int dword_4BBA80; // weak
int dword_4BBA88[]; // weak
int dword_4BBA90[]; // weak
int dword_4BBA94[]; // weak
int Omega_Health[]; // weak
int dword_4BBA9C; // weak
int dword_4BBAA0[]; // weak
int dword_4BBAA4[]; // weak
__int16 word_4BBAA8[]; // weak
int dword_4BBAAC[]; // weak
int dword_4BBAB0; // weak
int dword_4BBAB4; // weak
int dword_4BBAB8; // weak
int dword_4BBABC; // weak
int dword_4BBAC0[]; // weak
int dword_4BBACC[]; // weak
int dword_4BBAD0; // weak
int dword_4BBAD4; // weak
int dword_4BBAD8[]; // weak
int dword_4BBADC[]; // weak
int dword_4BBAE0[]; // weak
int dword_4BBAE4[]; // weak
int dword_4BBAE8[]; // weak
int dword_4BBAEC[]; // weak
int dword_4BBAF0; // weak
char byte_4BBAF4[]; // weak
int dword_4BBAF8[]; // weak
int dword_4BBAFC[]; // weak
char byte_4BBB04; // weak
int dword_4BBB0C; // weak
int dword_4BBB10; // weak
int dword_4BBB34; // weak
int dword_4BBB3C; // weak
int dword_4BBB44; // weak
int dword_4BBB4C; // weak
int dword_4BBB50; // weak
__int16 word_4BBB54; // weak
int dword_4BBB70; // weak
int dword_4BBB78; // weak
int dword_4BBB80; // weak
int dword_4BBB84; // weak
int dword_4BBB88; // weak
int dword_4BBB8C; // weak
int dword_4BBB90; // weak
int dword_4BBB94; // weak
int dword_4BBB98; // weak
int dword_4BBB9C; // weak
char byte_4BBBA0; // weak
int dword_4BBBA8; // weak
int dword_4BBBAC; // weak
char byte_4BBBB0; // weak
int dword_4BBBB8; // weak
int dword_4BBBBC; // weak
int dword_4BBBFC; // weak
__int16 word_4BBC00; // weak
int dword_4BBC20; // weak
int dword_4BBC24; // weak
int dword_4BBC2C; // weak
int dword_4BBC30; // weak
int dword_4BBC34; // weak
int dword_4BBC38; // weak
int dword_4BBC3C; // weak
int dword_4BBC40; // weak
int dword_4BBC44; // weak
int dword_4BBC48; // weak
char byte_4BBC4C; // weak
int dword_4BBC54; // weak
int dword_4BBC58; // weak
char byte_4BBC5C; // weak
int X_Position; // idb
int dword_4BBC68; // idb
int dword_4BBC7C; // weak
int dword_4BBC94; // weak
int dword_4BBC98; // weak
int dword_4BBC9C; // weak
int dword_4BBCA4; // weak
int dword_4BBCA8; // weak
__int16 word_4BBCAC; // weak
int dword_4BBCC4; // weak
int dword_4BBCD0; // weak
int dword_4BBCD8; // weak
int dword_4BBCDC; // weak
int dword_4BBCE0; // weak
int dword_4BBCE4; // weak
int dword_4BBCE8; // weak
int dword_4BBCEC; // weak
int dword_4BBCF0; // weak
int dword_4BBCF4; // weak
char byte_4BBCF8; // weak
int dword_4BBD00; // weak
int dword_4BBD04; // weak
char byte_4BBD08; // weak
int dword_4BBD10; // weak
int dword_4BBD14; // idb
int dword_4BBD28; // weak
int dword_4BBD54; // weak
__int16 word_4BBD58; // weak
int dword_4BBD70; // weak
int dword_4BBD7C; // weak
int dword_4BBD84; // weak
int dword_4BBD88; // weak
int dword_4BBD8C; // weak
int dword_4BBD90; // weak
char byte_4BBDA4; // weak
int dword_4BBDB0; // weak
char byte_4BBDB4; // weak
int dword_4BBDBC; // weak
int dword_4BBDC0; // weak
int dword_4BBDD4; // weak
int dword_4BBDF4; // weak
__int16 word_4BBE04; // weak
int dword_4BBE1C; // weak
int dword_4BBE20; // weak
int dword_4BBE28; // weak
int dword_4BBE30; // weak
int dword_4BBE34; // weak
int dword_4BBE38; // weak
int dword_4BBE3C; // weak
int dword_4BBE58; // weak
char byte_4BBE60; // weak
int dword_4BBE68; // weak
int dword_4BBE6C; // weak
int dword_4BBE80; // weak
int dword_4BBEA0; // weak
int dword_4BBECC; // weak
int dword_4BBED4; // weak
char byte_4BBF0C; // weak
int dword_4BBF14; // weak
int dword_4BBF18; // weak
int dword_4BBF44; // weak
int dword_4BBF54; // weak
__int16 word_4BBF5C; // weak
int dword_4BBF74; // weak
int dword_4BBF78; // weak
int dword_4BBF7C; // weak
int dword_4BBF80; // weak
int dword_4BBF88; // weak
int dword_4BBF8C; // weak
int dword_4BBF90; // weak
int dword_4BBF94; // weak
int dword_4BBF98; // weak
int dword_4BBF9C; // weak
int dword_4BBFA0; // weak
int dword_4BBFA4; // weak
char byte_4BBFB8; // weak
__int16 word_4BC008; // weak
int dword_4BC024; // weak
int dword_4BC038; // weak
int dword_4BC03C; // weak
int dword_4BC040; // weak
int dword_4BC044; // weak
int dword_4BC048; // weak
char byte_4BC064; // weak
int dword_4BC06C; // weak
int dword_4BC070; // weak
int dword_4BC09C; // weak
int dword_4BC0AC; // weak
int dword_4BC0B0; // weak
__int16 word_4BC0B4; // weak
int dword_4BC0D0; // weak
int dword_4BC0D8; // weak
int dword_4BC0E0; // weak
int dword_4BC0E4; // weak
int dword_4BC0E8; // weak
int dword_4BC0EC; // weak
int dword_4BC0F0; // weak
int dword_4BC0F4; // weak
int dword_4BC0F8; // weak
int dword_4BC0FC; // weak
_UNKNOWN unk_4BC110; // weak
int dword_4BC118; // weak
__int16 word_4BC160; // weak
int dword_4BC17C; // weak
int dword_4BC184; // weak
int dword_4BC190; // weak
int dword_4BC194; // weak
int dword_4BC198; // weak
char byte_4BC1BC; // weak
int dword_4BC1C4; // weak
int dword_4BC1C8; // weak
int dword_4BC208; // weak
__int16 word_4BC20C; // weak
int dword_4BC228; // weak
int dword_4BC230; // weak
int dword_4BC23C; // weak
int dword_4BC240; // weak
int dword_4BC244; // weak
int dword_4BC24C; // weak
int dword_4BC254; // weak
_UNKNOWN unk_4BC268; // weak
int dword_4BC270; // weak
int dword_4BC2DC; // weak
char byte_4BC314; // weak
__int16 word_4BC364; // weak
int dword_4BC37C; // weak
int dword_4BC380; // weak
int dword_4BC388; // weak
int dword_4BC3A0; // weak
int dword_4BC3A4; // weak
int dword_4BC3A8; // weak
int dword_4BC3AC; // weak
_UNKNOWN unk_4BC3C0; // weak
__int16 word_4BC410; // weak
int dword_4BC428; // weak
int dword_4BC42C; // weak
int dword_4BC434; // weak
int dword_4BC44C; // weak
int dword_4BC454; // weak
_UNKNOWN unk_4BC46C; // weak
__int16 word_4BC4BC; // weak
int dword_4BC4D4; // weak
int dword_4BC4D8; // weak
int dword_4BC4E0; // weak
int dword_4BC4FC; // weak
int dword_4BC504; // weak
_UNKNOWN unk_4BC518; // weak
__int16 word_4BC568; // weak
int dword_4BC580; // weak
int dword_4BC584; // weak
int dword_4BC58C; // weak
int dword_4BC5A4; // weak
int dword_4BC5AC; // weak
char byte_4BC7C8; // weak
char byte_4BC7C9; // weak
int dword_4BD034; // weak


//----- (00401000) --------------------------------------------------------
// Clear Weapons
void *Clr_Weaps()
{
  WeaponIconXOffset = 32;
  return memset(&WeaponData_ID, 0, 0xA0u);
}

//----- (00401030) --------------------------------------------------------
// Clear Inventory
void *Clr_Inv()
{
  return memset(Quote_Inventory, 0, 0x80u);
}

//----- (00401050) --------------------------------------------------------
// TSC Give Weapon [AM+]
signed int __cdecl TSC_AMplus(int a1, int a2)
{
  signed int result; // eax@7
  signed int i; // [sp+0h] [bp-4h]@1

  for ( i = 0; i < 8 && *((_DWORD *)&WeaponData_ID + 5 * i) != a1 && *((_DWORD *)&WeaponData_ID + 5 * i); ++i )
    ;
  if ( i == 8 )
  {
    result = 0;
  }
  else
  {
    if ( !*((_DWORD *)&WeaponData_ID + 5 * i) )
    {
      memset((char *)&WeaponData_ID + 20 * i, 0, 0x14u);
      WeaponData_Level[5 * i] = 1;
    }
    *((_DWORD *)&WeaponData_ID + 5 * i) = a1;
    WeaponData_MaxAmmo[5 * i] += a2;
    *(_DWORD *)&WeaponData_Ammo[20 * i] += a2;
    if ( *(_DWORD *)&WeaponData_Ammo[20 * i] > WeaponData_MaxAmmo[5 * i] )
      *(_DWORD *)&WeaponData_Ammo[20 * i] = WeaponData_MaxAmmo[5 * i];
    result = 1;
  }
  return result;
}
// 499BCC: using guessed type int WeaponData_Level[];
// 499BD4: using guessed type int WeaponData_MaxAmmo[];

//----- (00401160) --------------------------------------------------------
// TSC Lose Weapon [AM-]
signed int __cdecl TSC_AMminus(int a1)
{
  signed int result; // eax@6
  char *v2; // edx@9
  char *v3; // eax@9
  signed int i; // [sp+0h] [bp-4h]@1
  int j; // [sp+0h] [bp-4h]@7

  for ( i = 0; i < 8 && *((_DWORD *)&WeaponData_ID + 5 * i) != a1; ++i )
    ;
  if ( i == 32 )
  {
    result = 0;
  }
  else
  {
    for ( j = i + 1; j < 8; ++j )
    {
      v2 = (char *)&WeaponData_ID + 20 * j;
      v3 = (char *)&WeaponData_ID + 20 * (j - 1);
      *(_DWORD *)v3 = *(_DWORD *)v2;
      *((_DWORD *)v3 + 1) = *((_DWORD *)v2 + 1);
      *((_DWORD *)v3 + 2) = *((_DWORD *)v2 + 2);
      *((_DWORD *)v3 + 3) = *((_DWORD *)v2 + 3);
      *((_DWORD *)v3 + 4) = *((_DWORD *)v2 + 4);
    }
    *((_DWORD *)&WeaponData_ID + 5 * (j - 1)) = 0;
    SelectedWeaponID = 0;
    result = 1;
  }
  return result;
}
// 499C68: using guessed type int SelectedWeaponID;

//----- (00401220) --------------------------------------------------------
// TSC Trade Weapon [TAM]
signed int __cdecl TSC_TAM(int a1, int a2, int a3)
{
  signed int result; // eax@6
  signed int i; // [sp+0h] [bp-4h]@1

  for ( i = 0; i < 8 && *((_DWORD *)&WeaponData_ID + 5 * i) != a1; ++i )
    ;
  if ( i == 8 )
  {
    result = 0;
  }
  else
  {
    WeaponData_Level[5 * i] = 1;
    *((_DWORD *)&WeaponData_ID + 5 * i) = a2;
    WeaponData_MaxAmmo[5 * i] += a3;
    *(_DWORD *)&WeaponData_Ammo[20 * i] += a3;
    WeaponData_Energy[5 * i] = 0;
    result = 1;
  }
  return result;
}
// 499BCC: using guessed type int WeaponData_Level[];
// 499BD0: using guessed type int WeaponData_Energy[];
// 499BD4: using guessed type int WeaponData_MaxAmmo[];

//----- (004012D0) --------------------------------------------------------
signed int __cdecl TSC_ITplus(int a1)
{
  signed int result; // eax@7
  signed int i; // [sp+0h] [bp-4h]@1

  for ( i = 0; i < 32 && *((_DWORD *)Quote_Inventory + i) != a1 && *((_DWORD *)Quote_Inventory + i); ++i )
    ;
  if ( i == 32 )
  {
    result = 0;
  }
  else
  {
    *((_DWORD *)Quote_Inventory + i) = a1;
    result = 1;
  }
  return result;
}

//----- (00401330) --------------------------------------------------------
signed int __cdecl TSC_ITminus(int a1)
{
  signed int result; // eax@6
  signed int i; // [sp+0h] [bp-4h]@1
  int j; // [sp+0h] [bp-4h]@7

  for ( i = 0; i < 32 && *((_DWORD *)Quote_Inventory + i) != a1; ++i )
    ;
  if ( i == 32 )
  {
    result = 0;
  }
  else
  {
    for ( j = i + 1; j < 32; ++j )
      dword_499B3C[j] = *((_DWORD *)Quote_Inventory + j);
    dword_499B3C[j] = 0;
    SelectedItemID = 0;
    result = 1;
  }
  return result;
}
// 499B3C: using guessed type int dword_499B3C[];
// 499C6C: using guessed type int SelectedItemID;

//----- (004013C0) --------------------------------------------------------
// Manage Inventory Cursor
int Mng_Inv_Curs()
{
  int result; // eax@2
  signed int v1; // [sp+4h] [bp-Ch]@8
  int v2; // [sp+8h] [bp-8h]@1
  int v3; // [sp+Ch] [bp-4h]@1

  v2 = 0;
  v3 = 0;
  while ( 1 )
  {
    result = 20 * v2;
    if ( !*((_DWORD *)&WeaponData_ID + 5 * v2) )
      break;
    ++v2;
  }
  while ( *((_DWORD *)Quote_Inventory + v3) )
    result = v3++ + 1;
  if ( v2 || v3 )
  {
    v1 = 0;
    if ( InventoryViewType )
    {
      if ( Key_For_Left & Key_Pressed )
      {
        if ( SelectedItemID % 6 )
          --SelectedItemID;
        else
          SelectedItemID += 5;
        v1 = 1;
      }
      if ( Key_For_Right & Key_Pressed )
      {
        if ( SelectedItemID == v3 - 1 )
        {
          SelectedItemID = 6 * (SelectedItemID / 6);
        }
        else if ( SelectedItemID % 6 == 5 )
        {
          SelectedItemID -= 5;
        }
        else
        {
          ++SelectedItemID;
        }
        v1 = 1;
      }
      if ( Key_For_Up & Key_Pressed )
      {
        if ( SelectedItemID / 6 )
          SelectedItemID -= 6;
        else
          InventoryViewType = 0;
        v1 = 1;
      }
      if ( Key_For_Down & Key_Pressed )
      {
        if ( SelectedItemID / 6 == (v3 - 1) / 6 )
          InventoryViewType = 0;
        else
          SelectedItemID += 6;
        v1 = 1;
      }
      result = SelectedItemID;
      if ( SelectedItemID >= v3 )
        SelectedItemID = v3 - 1;
      if ( InventoryViewType && Key_For_Jump & Key_Pressed )
        result = Call_TSC_Event(*((_DWORD *)Quote_Inventory + SelectedItemID) + 6000);
    }
    else
    {
      if ( Key_For_Left & Key_Pressed )
      {
        --SelectedWeaponID;
        v1 = 1;
      }
      result = Key_For_Right & Key_Pressed;
      if ( Key_For_Right & Key_Pressed )
      {
        ++SelectedWeaponID;
        v1 = 1;
      }
      if ( Key_Pressed & (Key_For_Down | Key_For_Up) )
      {
        if ( v3 )
          InventoryViewType = 1;
        v1 = 1;
      }
      if ( SelectedWeaponID < 0 )
      {
        result = v2 - 1;
        SelectedWeaponID = v2 - 1;
      }
      if ( SelectedWeaponID > v2 - 1 )
        SelectedWeaponID = 0;
    }
    if ( v1 )
    {
      if ( InventoryViewType )
      {
        Play_Sound_Effect(1, 1);
        if ( v3 )
          result = Call_TSC_Event(*((_DWORD *)Quote_Inventory + SelectedItemID) + 5000);
        else
          result = Call_TSC_Event(5000);
      }
      else
      {
        Play_Sound_Effect(4, 1);
        if ( v2 )
          result = Call_TSC_Event(*((_DWORD *)&WeaponData_ID + 5 * SelectedWeaponID) + 1000);
        else
          result = Call_TSC_Event(1000);
      }
    }
  }
  return result;
}
// 493628: using guessed type int Key_For_Jump;
// 493630: using guessed type int Key_For_Left;
// 493634: using guessed type int Key_For_Up;
// 493638: using guessed type int Key_For_Right;
// 49363C: using guessed type int Key_For_Down;
// 499BC0: using guessed type int InventoryViewType;
// 499C68: using guessed type int SelectedWeaponID;
// 499C6C: using guessed type int SelectedItemID;
// 49E214: using guessed type int Key_Pressed;

//----- (004016F0) --------------------------------------------------------
// Render Inventory Window?
int Rend_Inv_Win_()
{
  int result; // eax@17
  int v1; // eax@22
  int v2; // [sp+0h] [bp-F4h]@1
  int v3; // [sp+4h] [bp-F0h]@1
  int v4; // [sp+8h] [bp-ECh]@1
  int v5; // [sp+Ch] [bp-E8h]@1
  int Dst_Rects; // [sp+10h] [bp-E4h]@1
  int v7; // [sp+14h] [bp-E0h]@1
  int v8; // [sp+18h] [bp-DCh]@1
  int v9; // [sp+1Ch] [bp-D8h]@1
  int v10; // [sp+20h] [bp-D4h]@1
  int v11; // [sp+24h] [bp-D0h]@1
  int v12; // [sp+28h] [bp-CCh]@1
  int v13; // [sp+2Ch] [bp-C8h]@1
  int v14; // [sp+30h] [bp-C4h]@22
  int v15; // [sp+34h] [bp-C0h]@22
  int v16; // [sp+38h] [bp-BCh]@22
  int v17; // [sp+3Ch] [bp-B8h]@22
  int v18; // [sp+40h] [bp-B4h]@1
  int v19; // [sp+44h] [bp-B0h]@1
  int v20; // [sp+48h] [bp-ACh]@1
  int v21; // [sp+4Ch] [bp-A8h]@1
  int v22; // [sp+50h] [bp-A4h]@1
  int v23; // [sp+54h] [bp-A0h]@1
  int v24; // [sp+58h] [bp-9Ch]@1
  int v25; // [sp+5Ch] [bp-98h]@1
  int v26; // [sp+60h] [bp-94h]@1
  int v27; // [sp+64h] [bp-90h]@1
  int v28; // [sp+68h] [bp-8Ch]@1
  int v29; // [sp+6Ch] [bp-88h]@1
  int v30; // [sp+70h] [bp-84h]@12
  int v31; // [sp+74h] [bp-80h]@12
  int v32; // [sp+78h] [bp-7Ch]@12
  int v33; // [sp+7Ch] [bp-78h]@12
  int v34; // [sp+80h] [bp-74h]@1
  int v35; // [sp+84h] [bp-70h]@1
  int v36; // [sp+88h] [bp-6Ch]@1
  int v37; // [sp+8Ch] [bp-68h]@1
  int v38; // [sp+90h] [bp-64h]@1
  int v39; // [sp+94h] [bp-60h]@1
  int v40; // [sp+98h] [bp-5Ch]@1
  int v41; // [sp+9Ch] [bp-58h]@1
  int v42; // [sp+A0h] [bp-54h]@1
  int v43; // [sp+A4h] [bp-50h]@1
  int v44; // [sp+A8h] [bp-4Ch]@1
  int v45; // [sp+ACh] [bp-48h]@1
  int v46; // [sp+B0h] [bp-44h]@1
  int v47; // [sp+B4h] [bp-40h]@1
  int v48; // [sp+B8h] [bp-3Ch]@1
  int v49; // [sp+BCh] [bp-38h]@1
  int i; // [sp+C0h] [bp-34h]@1
  int v51; // [sp+C4h] [bp-30h]@1
  int v52; // [sp+C8h] [bp-2Ch]@1
  int v53; // [sp+CCh] [bp-28h]@1
  int v54; // [sp+D0h] [bp-24h]@1
  int Src_Rects; // [sp+D4h] [bp-20h]@1
  int v56; // [sp+D8h] [bp-1Ch]@1
  int v57; // [sp+DCh] [bp-18h]@1
  int v58; // [sp+E0h] [bp-14h]@1
  int v59; // [sp+E4h] [bp-10h]@1
  int v60; // [sp+E8h] [bp-Ch]@1
  int v61; // [sp+ECh] [bp-8h]@1
  int v62; // [sp+F0h] [bp-4h]@1

  v26 = 72;
  v27 = 48;
  v28 = 80;
  v29 = 56;
  v2 = 80;
  v3 = 48;
  v4 = 96;
  v5 = 56;
  v34 = 80;
  v35 = 80;
  v36 = 96;
  v37 = 88;
  Dst_Rects = 0;
  v7 = 0;
  v8 = 320;
  v9 = 240;
  v38 = 0;
  v39 = 88;
  v40 = 40;
  v41 = 128;
  v42 = 40;
  v43 = 88;
  v44 = 80;
  v45 = 128;
  v18 = 80;
  v19 = 88;
  v20 = 112;
  v21 = 104;
  v22 = 80;
  v23 = 104;
  v24 = 112;
  v25 = 120;
  v46 = 80;
  v47 = 48;
  v48 = 144;
  v49 = 56;
  v59 = 80;
  v60 = 56;
  v61 = 144;
  v62 = 64;
  Src_Rects = 0;
  v56 = 0;
  v57 = 244;
  v58 = 8;
  v51 = 0;
  v52 = 8;
  v53 = 244;
  v54 = 16;
  v10 = 0;
  v11 = 16;
  v12 = 244;
  v13 = 24;
  Render_Graphics((int)&Dst_Rects, 38, 8, (int)&Src_Rects, 26);
  for ( i = 1; i < 18; ++i )
    Render_Graphics((int)&Dst_Rects, 38, 8 * i + 8, (int)&v51, 26);
  Render_Graphics((int)&Dst_Rects, 38, 8 * i + 8, (int)&v10, 26);
  if ( InventoryLabelPos > 16 )
    --InventoryLabelPos;
  Render_Graphics((int)&Dst_Rects, 48, InventoryLabelPos, (int)&v46, 26);
  Render_Graphics((int)&Dst_Rects, 48, InventoryLabelPos + 52, (int)&v59, 26);
  ++MenuRectFlash;
  if ( InventoryViewType )
    Render_Graphics((int)&Dst_Rects, 40 * SelectedWeaponID + 48, 24, (int)&v42, 26);
  else
    Render_Graphics(
      (int)&Dst_Rects,
      40 * SelectedWeaponID + 48,
      24,
      (int)(&v38 + 4 * (((unsigned int)MenuRectFlash >> 1) % 2)),
      26);
  for ( i = 0; i < 8 && *((_DWORD *)&WeaponData_ID + 5 * i); ++i )
  {
    v30 = 16 * (*((_DWORD *)&WeaponData_ID + 5 * i) % 16);
    v32 = v30 + 16;
    v31 = 16 * (*((_DWORD *)&WeaponData_ID + 5 * i) / 16);
    v33 = v31 + 16;
    Render_Graphics((int)&Dst_Rects, 40 * i + 48, 24, (int)&v30, 12);
    Render_Graphics((int)&Dst_Rects, 40 * i + 48, 56, (int)&v26, 26);
    Render_Graphics((int)&Dst_Rects, 40 * i + 48, 40, (int)&v34, 26);
    Render_Numbers(40 * i + 48, 40, WeaponData_Level[5 * i], 0);
    if ( WeaponData_MaxAmmo[5 * i] )
    {
      Render_Numbers(40 * i + 48, 48, *(_DWORD *)&WeaponData_Ammo[20 * i], 0);
      Render_Numbers(40 * i + 48, 56, WeaponData_MaxAmmo[5 * i], 0);
    }
    else
    {
      Render_Graphics((int)&Dst_Rects, 40 * i + 64, 48, (int)&v2, 26);
      Render_Graphics((int)&Dst_Rects, 40 * i + 64, 56, (int)&v2, 26);
    }
  }
  if ( InventoryViewType == 1 )
    result = Render_Graphics(
               (int)&Dst_Rects,
               32 * (SelectedItemID % 6) + 48,
               16 * (SelectedItemID / 6) + 76,
               (int)(&v18 + 4 * (((unsigned int)MenuRectFlash >> 1) % 2)),
               26);
  else
    result = Render_Graphics(
               (int)&Dst_Rects,
               32 * (SelectedItemID % 6) + 48,
               16 * (SelectedItemID / 6) + 76,
               (int)&v22,
               26);
  for ( i = 0; i < 32 && *((_DWORD *)Quote_Inventory + i); ++i )
  {
    v1 = *((_DWORD *)Quote_Inventory + i) % 8;
    v14 = 32 * v1;
    v16 = 32 * v1 + 32;
    v15 = 16 * (*((_DWORD *)Quote_Inventory + i) / 8);
    v17 = v15 + 16;
    Render_Graphics((int)&Dst_Rects, 32 * (i % 6) + 48, 16 * (i / 6) + 76, (int)&v14, 8);
    result = i + 1;
  }
  return result;
}
// 499BC0: using guessed type int InventoryViewType;
// 499BCC: using guessed type int WeaponData_Level[];
// 499BD4: using guessed type int WeaponData_MaxAmmo[];
// 499C68: using guessed type int SelectedWeaponID;
// 499C6C: using guessed type int SelectedItemID;
// 499C70: using guessed type int MenuRectFlash;

//----- (00401D10) --------------------------------------------------------
// Inventory Menu Code
signed int Inv_Menu_Code()
{
  int v1; // [sp+0h] [bp-128h]@15
  int v2; // [sp+4h] [bp-124h]@8
  char v3[4]; // [sp+8h] [bp-120h]@1
  int v4; // [sp+110h] [bp-18h]@1
  int Dst_Rects; // [sp+114h] [bp-14h]@1
  int v6; // [sp+118h] [bp-10h]@1
  int v7; // [sp+11Ch] [bp-Ch]@1
  int v8; // [sp+120h] [bp-8h]@1
  int i; // [sp+124h] [bp-4h]@1

  v4 = dword_498B20;
  Dst_Rects = 0;
  v6 = 0;
  v7 = 320;
  v8 = 240;
  _fputchar((int)v3);
  sub_421660("ArmsItem.tsc");
  InventoryLabelPos = 24;
  InventoryViewType = 0;
  SelectedItemID = 0;
  for ( i = 0; *((_DWORD *)&WeaponData_ID + 5 * i); ++i )
    ;
  if ( i )
    Call_TSC_Event(*((_DWORD *)&WeaponData_ID + 5 * SelectedWeaponID) + 1000);
  else
    Call_TSC_Event(*((_DWORD *)Quote_Inventory + SelectedItemID) + 5000);
  while ( 1 )
  {
    Update_Keys();
    if ( Key_Pressed & 0x8000 )
    {
      v2 = sub_40DD70(AppWinHandle);
      if ( !v2 )
        return 0;
      if ( v2 == 2 )
        return 2;
    }
    if ( Game_State & 2 )
      Mng_Inv_Curs();
    v1 = Tsc_Parser();
    if ( !v1 )
      return 0;
    if ( v1 == 2 )
      return 2;
    Draw_Obj((int)&Dst_Rects, 0, 0, (int)&Dst_Rects, 10);
    Rend_Inv_Win_();
    sub_421F10();
    Display_FPS();
    if ( !InventoryViewType )
      break;
    if ( Game_State & 2 && Key_Pressed & (Key_For_Menu | Key_For_Shoot) )
    {
      sub_421C50();
      goto LABEL_30;
    }
LABEL_27:
    if ( !Upd_Scr_With_Wind_(AppWinHandle) )
      return 0;
  }
  if ( !(Key_Pressed & (Key_For_Menu | Key_For_Shoot | Key_For_Jump)) )
    goto LABEL_27;
  sub_421C50();
LABEL_30:
  sub_421750(v3);
  WeaponIconXOffset = 32;
  return 1;
}
// 493620: using guessed type int Key_For_Menu;
// 493628: using guessed type int Key_For_Jump;
// 49362C: using guessed type int Key_For_Shoot;
// 498B20: using guessed type int dword_498B20;
// 499BC0: using guessed type int InventoryViewType;
// 499C68: using guessed type int SelectedWeaponID;
// 499C6C: using guessed type int SelectedItemID;
// 49E1E8: using guessed type int Game_State;
// 49E214: using guessed type int Key_Pressed;

//----- (00401F20) --------------------------------------------------------
// Check If Has Item
signed int __cdecl Chk_If_Has_Item(int a1)
{
  signed int i; // [sp+0h] [bp-4h]@1

  for ( i = 0; i < 32; ++i )
  {
    if ( *((_DWORD *)Quote_Inventory + i) == a1 )
      return 1;
  }
  return 0;
}

//----- (00401F60) --------------------------------------------------------
// Check If Has Weapon
signed int __cdecl Chk_If_Has_Weap(int a1)
{
  signed int i; // [sp+0h] [bp-4h]@1

  for ( i = 0; i < 8; ++i )
  {
    if ( *((_DWORD *)&WeaponData_ID + 5 * i) == a1 )
      return 1;
  }
  return 0;
}

//----- (00401FA0) --------------------------------------------------------
signed int __cdecl Rmv_Ammo_From_Weap(int Ammo_To_Remove)
{
  signed int result; // eax@2

  if ( WeaponData_MaxAmmo[5 * SelectedWeaponID] )
  {
    if ( *(_DWORD *)&WeaponData_Ammo[20 * SelectedWeaponID] )
    {
      *(_DWORD *)&WeaponData_Ammo[20 * SelectedWeaponID] -= Ammo_To_Remove;
      if ( *(_DWORD *)&WeaponData_Ammo[20 * SelectedWeaponID] < 0 )
        *(_DWORD *)&WeaponData_Ammo[20 * SelectedWeaponID] = 0;
      result = 1;
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    result = 1;
  }
  return result;
}
// 499BD4: using guessed type int WeaponData_MaxAmmo[];
// 499C68: using guessed type int SelectedWeaponID;

//----- (00402020) --------------------------------------------------------
// Add Ammo To Weapon
signed int __cdecl Add_Ammo_To_Weap(int Ammo_To_Add)
{
  *(_DWORD *)&WeaponData_Ammo[20 * SelectedWeaponID] += Ammo_To_Add;
  if ( *(_DWORD *)&WeaponData_Ammo[20 * SelectedWeaponID] > WeaponData_MaxAmmo[5 * SelectedWeaponID] )
    *(_DWORD *)&WeaponData_Ammo[20 * SelectedWeaponID] = WeaponData_MaxAmmo[5 * SelectedWeaponID];
  return 1;
}
// 499BD4: using guessed type int WeaponData_MaxAmmo[];
// 499C68: using guessed type int SelectedWeaponID;

//----- (00402090) --------------------------------------------------------
// TSC Fill All Weapon Ammo [AE+]
int TSC_AEplus()
{
  int result; // eax@2
  signed int i; // [sp+0h] [bp-4h]@1

  for ( i = 0; i < 8; ++i )
  {
    if ( *((_DWORD *)&WeaponData_ID + 5 * i) )
      *(_DWORD *)&WeaponData_Ammo[20 * i] = WeaponData_MaxAmmo[5 * i];
    result = i + 1;
  }
  return result;
}
// 499BD4: using guessed type int WeaponData_MaxAmmo[];

//----- (004020E0) --------------------------------------------------------
// Switch to Next Weapon
int Switch_to_Next_Weap()
{
  int result; // eax@5
  int i; // [sp+0h] [bp-4h]@1

  for ( i = 0; *((_DWORD *)&WeaponData_ID + 5 * i); ++i )
    ;
  if ( i )
  {
    sub_41F9E0();
    ++SelectedWeaponID;
    while ( SelectedWeaponID < i && !*((_DWORD *)&WeaponData_ID + 5 * SelectedWeaponID) )
      ++SelectedWeaponID;
    if ( SelectedWeaponID == i )
      SelectedWeaponID = 0;
    WeaponIconXOffset = 32;
    Play_Sound_Effect(4, 1);
    result = *((_DWORD *)&WeaponData_ID + 5 * SelectedWeaponID);
  }
  else
  {
    result = 0;
  }
  return result;
}
// 499C68: using guessed type int SelectedWeaponID;

//----- (00402190) --------------------------------------------------------
// Switch to Previous Weapon
int Switch_to_Prev_Weap()
{
  int result; // eax@5
  int i; // [sp+0h] [bp-4h]@1

  for ( i = 0; *((_DWORD *)&WeaponData_ID + 5 * i); ++i )
    ;
  if ( i )
  {
    sub_41F9E0();
    if ( --SelectedWeaponID < 0 )
      SelectedWeaponID = i - 1;
    while ( SelectedWeaponID < i && !*((_DWORD *)&WeaponData_ID + 5 * SelectedWeaponID) )
      --SelectedWeaponID;
    WeaponIconXOffset = 0;
    Play_Sound_Effect(4, 1);
    result = *((_DWORD *)&WeaponData_ID + 5 * SelectedWeaponID);
  }
  else
  {
    result = 0;
  }
  return result;
}
// 499C68: using guessed type int SelectedWeaponID;

//----- (00402240) --------------------------------------------------------
// Unequip Weapon
int Unequ_Weap()
{
  SelectedWeaponID = 0;
  WeaponIconXOffset = 32;
  return Play_Sound_Effect(4, 1);
}
// 499C68: using guessed type int SelectedWeaponID;

//----- (00402270) --------------------------------------------------------
signed int __cdecl Bckgrd_(char *source, int a2)
{
  signed int result; // eax@2
  char str; // [sp+0h] [bp-148h]@1
  int v4; // [sp+108h] [bp-40h]@1
  __int16 v5; // [sp+10Ch] [bp-3Ch]@3
  FILE *stream; // [sp+11Ch] [bp-2Ch]@1
  char v7; // [sp+120h] [bp-28h]@5
  int v8; // [sp+124h] [bp-24h]@5
  int v9; // [sp+128h] [bp-20h]@5

  v4 = dword_498B20;
  dword_499C94 = Set_BG_Color(0x100000u);
  sprintf(&str, "%s\\%s.pbm", byte_49E220, source);
  stream = fopen(&str, "rb");
  if ( stream )
  {
    sub_480F55((FILE *)&v5, 0xEu, 1u, stream);
    if ( v5 == 19778 )
    {
      sub_480F55((FILE *)&v7, 0x28u, 1u, stream);
      fclose(stream);
      BackgroundSizeX = v8;
      BackgroundSizeY = v9;
      dword_499C74 = 1;
      if ( LoadImage_Must_Prep_RAM(source, 28) )
      {
        BackgroundMode = a2;
        GlobalWaterDepth = 1966080;
        result = 1;
      }
      else
      {
        result = 0;
      }
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}
// 498B20: using guessed type int dword_498B20;
// 499C74: using guessed type int dword_499C74;
// 499C78: using guessed type int BackgroundSizeX;
// 499C7C: using guessed type int BackgroundSizeY;
// 499C88: using guessed type int BackgroundMode;
// 499C90: using guessed type int GlobalWaterDepth;
// 499C94: using guessed type int dword_499C94;

//----- (00402370) --------------------------------------------------------
// Background Modes?
int Bckgrd_Modes_()
{
  int result; // eax@1

  result = BackgroundMode;
  if ( BackgroundMode == 5 )
  {
    dword_499C8C += 3072;
  }
  else if ( BackgroundMode > 5 && BackgroundMode <= 7 )
  {
    result = ++dword_499C8C / 640;
    dword_499C8C %= 640;
  }
  return result;
}
// 499C88: using guessed type int BackgroundMode;
// 499C8C: using guessed type int dword_499C8C;

//----- (004023D0) --------------------------------------------------------
// Background Code
int __cdecl Bckgrd_Code(signed int a1, signed int a2)
{
  int result; // eax@1
  signed int X_Position; // [sp+4h] [bp-18h]@4
  int X_Positiona; // [sp+4h] [bp-18h]@11
  int X_Positionb; // [sp+4h] [bp-18h]@18
  int X_Positionc; // [sp+4h] [bp-18h]@25
  signed int Y_Position; // [sp+8h] [bp-14h]@2
  int Y_Positiona; // [sp+8h] [bp-14h]@9
  int Y_Positionb; // [sp+8h] [bp-14h]@16
  int Y_Positionc; // [sp+8h] [bp-14h]@23
  int Src_Rects; // [sp+Ch] [bp-10h]@1
  int v12; // [sp+10h] [bp-Ch]@1
  int v13; // [sp+14h] [bp-8h]@1
  int v14; // [sp+18h] [bp-4h]@1

  Src_Rects = 0;
  v12 = 0;
  v13 = BackgroundSizeX;
  v14 = BackgroundSizeY;
  result = BackgroundMode;
  switch ( BackgroundMode )
  {
    case 0:
      for ( Y_Position = 0; Y_Position < 240; Y_Position += BackgroundSizeY )
      {
        for ( X_Position = 0; X_Position < 320; X_Position += BackgroundSizeX )
          result = Draw_Obj((int)&FullscreenRect, X_Position, Y_Position, (int)&Src_Rects, 28);
      }
      break;
    case 1:
      result = a2 / 2 / 512 / BackgroundSizeY;
      for ( Y_Positiona = -(a2 / 2 / 512 % BackgroundSizeY); Y_Positiona < 240; Y_Positiona += BackgroundSizeY )
      {
        for ( X_Positiona = -(a1 / 2 / 512 % BackgroundSizeX); X_Positiona < 320; X_Positiona += BackgroundSizeX )
          Draw_Obj((int)&FullscreenRect, X_Positiona, Y_Positiona, (int)&Src_Rects, 28);
        result = BackgroundSizeY + Y_Positiona;
      }
      break;
    case 2:
      result = a2 / 512 / BackgroundSizeY;
      for ( Y_Positionb = -(a2 / 512 % BackgroundSizeY); Y_Positionb < 240; Y_Positionb += BackgroundSizeY )
      {
        result = a1 / 512 / BackgroundSizeX;
        for ( X_Positionb = -(a1 / 512 % BackgroundSizeX); X_Positionb < 320; X_Positionb += BackgroundSizeX )
        {
          Draw_Obj((int)&FullscreenRect, X_Positionb, Y_Positionb, (int)&Src_Rects, 28);
          result = BackgroundSizeX + X_Positionb;
        }
      }
      break;
    case 5:
      for ( Y_Positionc = -BackgroundSizeY; Y_Positionc < 240; Y_Positionc += BackgroundSizeY )
      {
        result = dword_499C8C / 512 / BackgroundSizeX;
        for ( X_Positionc = -(dword_499C8C / 512 % BackgroundSizeX); X_Positionc < 320; X_Positionc += BackgroundSizeX )
        {
          Draw_Obj((int)&FullscreenRect, X_Positionc, Y_Positionc, (int)&Src_Rects, 28);
          result = BackgroundSizeX + X_Positionc;
        }
      }
      break;
    case 6:
    case 7:
      v12 = 0;
      v14 = 88;
      Src_Rects = 0;
      v13 = 320;
      Draw_Obj((int)&FullscreenRect, 0, 0, (int)&Src_Rects, 28);
      v12 = 88;
      v14 = 123;
      Src_Rects = dword_499C8C / 2;
      v13 = 320;
      Draw_Obj((int)&FullscreenRect, 0, 88, (int)&Src_Rects, 28);
      Src_Rects = 0;
      Draw_Obj((int)&FullscreenRect, 320 - dword_499C8C / 2 % 320, 88, (int)&Src_Rects, 28);
      v12 = 123;
      v14 = 146;
      Src_Rects = dword_499C8C % 320;
      v13 = 320;
      Draw_Obj((int)&FullscreenRect, 0, 123, (int)&Src_Rects, 28);
      Src_Rects = 0;
      Draw_Obj((int)&FullscreenRect, 320 - dword_499C8C % 320, 123, (int)&Src_Rects, 28);
      v12 = 146;
      v14 = 176;
      Src_Rects = 2 * dword_499C8C % 320;
      v13 = 320;
      Draw_Obj((int)&FullscreenRect, 0, 146, (int)&Src_Rects, 28);
      Src_Rects = 0;
      Draw_Obj((int)&FullscreenRect, 320 - 2 * dword_499C8C % 320, 146, (int)&Src_Rects, 28);
      v12 = 176;
      v14 = 240;
      Src_Rects = 4 * dword_499C8C % 320;
      v13 = 320;
      Draw_Obj((int)&FullscreenRect, 0, 176, (int)&Src_Rects, 28);
      Src_Rects = 0;
      result = Draw_Obj((int)&FullscreenRect, 320 - 4 * dword_499C8C % 320, 176, (int)&Src_Rects, 28);
      break;
    default:
      return result;
  }
  return result;
}
// 48F91C: using guessed type int FullscreenRect;
// 499C78: using guessed type int BackgroundSizeX;
// 499C7C: using guessed type int BackgroundSizeY;
// 499C88: using guessed type int BackgroundMode;
// 499C8C: using guessed type int dword_499C8C;

//----- (00402830) --------------------------------------------------------
// Render Map Background (BackgroundMode 3 only)
int __cdecl Rend_Map_Bckgrd(signed int a1, signed int a2)
{
  int result; // eax@1
  int X_Position; // [sp+4h] [bp-40h]@9
  int v4; // [sp+Ch] [bp-38h]@1
  int v5; // [sp+10h] [bp-34h]@1
  int v6; // [sp+14h] [bp-30h]@1
  int v7; // [sp+18h] [bp-2Ch]@1
  int Src_Rects; // [sp+1Ch] [bp-28h]@1
  int v9; // [sp+20h] [bp-24h]@1
  int v10; // [sp+24h] [bp-20h]@1
  int v11; // [sp+28h] [bp-1Ch]@1
  int Y_Position; // [sp+2Ch] [bp-18h]@5
  int v13; // [sp+30h] [bp-14h]@2
  int v14; // [sp+34h] [bp-10h]@2
  int j; // [sp+38h] [bp-Ch]@7
  int i; // [sp+3Ch] [bp-8h]@2
  int v17; // [sp+40h] [bp-4h]@2

  v4 = 0;
  v5 = 0;
  v6 = 32;
  v7 = 16;
  Src_Rects = 0;
  v9 = 16;
  v10 = 32;
  v11 = 48;
  result = BackgroundMode;
  if ( BackgroundMode == 3 )
  {
    v13 = a1 / 0x4000;
    v14 = a1 / 0x4000 + 11;
    v17 = 0;
    result = 0;
    for ( i = 0; i < 32; ++i )
    {
      result = GlobalWaterDepth / 512;
      Y_Position = GlobalWaterDepth / 512 + (i << 14) / 512 - a2 / 512;
      if ( Y_Position >= -32 )
      {
        if ( Y_Position > 240 )
          return result;
        for ( j = v13; j < v14; ++j )
        {
          X_Position = (j << 14) / 512 - a1 / 512;
          Render_Graphics((int)&FullscreenRect, X_Position, Y_Position, (int)&Src_Rects, 28);
          if ( !i )
            Render_Graphics((int)&FullscreenRect, X_Position, Y_Position, (int)&v4, 28);
          result = j + 1;
        }
      }
    }
  }
  return result;
}
// 48F91C: using guessed type int FullscreenRect;
// 499C88: using guessed type int BackgroundMode;
// 499C90: using guessed type int GlobalWaterDepth;

//----- (004029B0) --------------------------------------------------------
// Check for whether a bullet can break a starblock
signed int __cdecl Chk_Starblck_break(int a1, int a2, int a3)
{
  int v3; // ST10_4@13
  int v4; // eax@13
  signed int v6; // [sp+0h] [bp-8h]@1
  signed int i; // [sp+4h] [bp-4h]@11

  v6 = 0;
  if ( *(_DWORD *)(a3 + 16) - *(_DWORD *)(a3 + 104) < (16 * a1 + 8) << 9
    && *(_DWORD *)(a3 + 104) + *(_DWORD *)(a3 + 16) > (16 * a1 - 8) << 9
    && *(_DWORD *)(a3 + 20) - *(_DWORD *)(a3 + 108) < (16 * a2 + 8) << 9
    && *(_DWORD *)(a3 + 108) + *(_DWORD *)(a3 + 20) > (16 * a2 - 8) << 9 )
  {
    v6 = 512;
  }
  if ( v6 && *(_DWORD *)(a3 + 8) & 0x60 && sub_4139A0(a1, a2) == 67 )
  {
    if ( !(*(_DWORD *)(a3 + 8) & 0x40) )
      *(_DWORD *)(a3 + 12) = 0;
    Create_Animated_Effect(*(_DWORD *)(a3 + 16), *(_DWORD *)(a3 + 20), 2, 0);
    Play_Sound_Effect(12, 1);
    for ( i = 0; i < 4; ++i )
    {
      v3 = RNG_Range(-512, 512);
      v4 = RNG_Range(-512, 512);
      NPC_Create(4, a1 << 13, a2 << 13, v4, v3, 0, 0, 256);
    }
    sub_413A20(a1, a2);
  }
  return v6;
}

//----- (00402B30) --------------------------------------------------------
// Solid tile -> Two stage filter for blocks that bullets are s'posta collide with
int __cdecl Solid_Tile_Complicated(int a1, int a2, _BYTE *a3, int a4)
{
  int v5; // [sp+0h] [bp-20h]@6
  int v6; // [sp+4h] [bp-1Ch]@34
  int v7; // [sp+8h] [bp-18h]@19
  int v8; // [sp+Ch] [bp-14h]@35
  int v9; // [sp+10h] [bp-10h]@18
  int v10; // [sp+14h] [bp-Ch]@1
  int i; // [sp+18h] [bp-8h]@2
  int v12; // [sp+1Ch] [bp-4h]@18

  v10 = 0;
  if ( *(_DWORD *)(a4 + 8) & 0x40 )
  {
    for ( i = 0; i < 4; ++i )
    {
      *(&v5 + i) = *a3 == 65 || *a3 == 97;
      ++a3;
    }
  }
  else
  {
    for ( i = 0; i < 4; ++i )
    {
      *(&v5 + i) = *a3 == 65 || *a3 == 67 || *a3 == 97;
      ++a3;
    }
  }
  v9 = (16 * a1 + 8) << 9;
  v12 = (16 * a2 + 8) << 9;
  if ( v5 && v7 )
  {
    if ( *(_DWORD *)(a4 + 16) - *(_DWORD *)(a4 + 104) < v9 )
      v10 |= 1u;
  }
  else if ( !v5 || v7 )
  {
    if ( !v5
      && v7
      && *(_DWORD *)(a4 + 16) - *(_DWORD *)(a4 + 104) < v9
      && *(_DWORD *)(a4 + 108) + *(_DWORD *)(a4 + 20) > v12 + 1536 )
    {
      v10 |= 1u;
    }
  }
  else if ( *(_DWORD *)(a4 + 16) - *(_DWORD *)(a4 + 104) < v9
         && *(_DWORD *)(a4 + 20) - *(_DWORD *)(a4 + 108) < v12 - 1536 )
  {
    v10 |= 1u;
  }
  if ( v6 && v8 )
  {
    if ( *(_DWORD *)(a4 + 104) + *(_DWORD *)(a4 + 16) > v9 )
      v10 |= 4u;
  }
  else if ( !v6 || v8 )
  {
    if ( !v6
      && v8
      && *(_DWORD *)(a4 + 104) + *(_DWORD *)(a4 + 16) > v9
      && *(_DWORD *)(a4 + 108) + *(_DWORD *)(a4 + 20) > v12 + 1536 )
    {
      v10 |= 4u;
    }
  }
  else if ( *(_DWORD *)(a4 + 104) + *(_DWORD *)(a4 + 16) > v9
         && *(_DWORD *)(a4 + 20) - *(_DWORD *)(a4 + 108) < v12 - 1536 )
  {
    v10 |= 4u;
  }
  if ( v5 && v6 )
  {
    if ( *(_DWORD *)(a4 + 20) - *(_DWORD *)(a4 + 108) < v12 )
      v10 |= 2u;
  }
  else if ( !v5 || v6 )
  {
    if ( !v5
      && v6
      && *(_DWORD *)(a4 + 20) - *(_DWORD *)(a4 + 108) < v12
      && *(_DWORD *)(a4 + 104) + *(_DWORD *)(a4 + 16) > v9 + 1536 )
    {
      v10 |= 2u;
    }
  }
  else if ( *(_DWORD *)(a4 + 20) - *(_DWORD *)(a4 + 108) < v12
         && *(_DWORD *)(a4 + 16) - *(_DWORD *)(a4 + 104) < v9 - 1536 )
  {
    v10 |= 2u;
  }
  if ( v7 && v8 )
  {
    if ( *(_DWORD *)(a4 + 108) + *(_DWORD *)(a4 + 20) > v12 )
      v10 |= 8u;
  }
  else if ( !v7 || v8 )
  {
    if ( !v7
      && v8
      && *(_DWORD *)(a4 + 108) + *(_DWORD *)(a4 + 20) > v12
      && *(_DWORD *)(a4 + 104) + *(_DWORD *)(a4 + 16) > v9 + 1536 )
    {
      v10 |= 8u;
    }
  }
  else if ( *(_DWORD *)(a4 + 108) + *(_DWORD *)(a4 + 20) > v12
         && *(_DWORD *)(a4 + 16) - *(_DWORD *)(a4 + 104) < v9 - 1536 )
  {
    v10 |= 8u;
  }
  if ( *(_DWORD *)(a4 + 8) & 8 )
  {
    if ( v10 & 1 )
    {
      *(_DWORD *)(a4 + 16) = *(_DWORD *)(a4 + 104) + v9;
    }
    else if ( v10 & 4 )
    {
      *(_DWORD *)(a4 + 16) = v9 - *(_DWORD *)(a4 + 104);
    }
    else if ( v10 & 2 )
    {
      *(_DWORD *)(a4 + 20) = *(_DWORD *)(a4 + 108) + v12;
    }
    else if ( v10 & 8 )
    {
      *(_DWORD *)(a4 + 20) = v12 - *(_DWORD *)(a4 + 108);
    }
  }
  else if ( v10 & 0xF )
  {
    Sound_When_Bullet_Hits_Wall_(a4);
  }
  return v10;
}

//----- (00402F50) --------------------------------------------------------
// Generate effect, sound when Bullet hits wall
int __cdecl Sound_When_Bullet_Hits_Wall_(int a1)
{
  if ( *(_DWORD *)(a1 + 4) != 37 && *(_DWORD *)(a1 + 4) != 38 && *(_DWORD *)(a1 + 4) != 39 )
    Play_Sound_Effect(28, 1);
  else
    Create_Animated_Effect(*(_DWORD *)(a1 + 16), *(_DWORD *)(a1 + 20), 2, 1);
  *(_DWORD *)(a1 + 12) = 0;
  return Create_Animated_Effect(*(_DWORD *)(a1 + 16), *(_DWORD *)(a1 + 20), 2, 2);
}

//----- (00402FC0) --------------------------------------------------------
signed int __cdecl Bullet_Tile_Collision_Roof_Slope_1(int a1, int a2, int BulletID)
{
  __int64 v3; // rax@3
  __int64 v4; // rax@6
  signed int v6; // [sp+4h] [bp-4h]@1

  v6 = 0;
  if ( *(_DWORD *)(BulletID + 16) < (16 * a1 + 8) << 9 && *(_DWORD *)(BulletID + 16) > (16 * a1 - 8) << 9 )
  {
    v3 = *(_DWORD *)(BulletID + 16) - (a1 << 13);
    if ( *(_DWORD *)(BulletID + 20) - 1024 < (a2 << 13) - (((signed int)v3 - HIDWORD(v3)) >> 1) + 2048
      && *(_DWORD *)(BulletID + 20) + 1024 > (16 * a2 - 8) << 9 )
    {
      if ( *(_DWORD *)(BulletID + 8) & 8 )
      {
        v4 = *(_DWORD *)(BulletID + 16) - (a1 << 13);
        *(_DWORD *)(BulletID + 20) = (a2 << 13) - (((signed int)v4 - HIDWORD(v4)) >> 1) + 3072;
      }
      else
      {
        Sound_When_Bullet_Hits_Wall_(BulletID);
      }
      v6 = 130;
    }
  }
  return v6;
}

//----- (004030B0) --------------------------------------------------------
signed int __cdecl Bullet_Tile_Collision_Roof_Slope_2(int a1, int a2, int BulletID)
{
  __int64 v3; // rax@3
  __int64 v4; // rax@6
  signed int v6; // [sp+4h] [bp-4h]@1

  v6 = 0;
  if ( *(_DWORD *)(BulletID + 16) < (16 * a1 + 8) << 9 && *(_DWORD *)(BulletID + 16) > (16 * a1 - 8) << 9 )
  {
    v3 = *(_DWORD *)(BulletID + 16) - (a1 << 13);
    if ( *(_DWORD *)(BulletID + 20) - 1024 < (a2 << 13) - (((signed int)v3 - HIDWORD(v3)) >> 1) - 2048
      && *(_DWORD *)(BulletID + 20) + 1024 > (16 * a2 - 8) << 9 )
    {
      if ( *(_DWORD *)(BulletID + 8) & 8 )
      {
        v4 = *(_DWORD *)(BulletID + 16) - (a1 << 13);
        *(_DWORD *)(BulletID + 20) = (a2 << 13) - (((signed int)v4 - HIDWORD(v4)) >> 1) - 1024;
      }
      else
      {
        Sound_When_Bullet_Hits_Wall_(BulletID);
      }
      v6 = 130;
    }
  }
  return v6;
}

//----- (004031A0) --------------------------------------------------------
signed int __cdecl Bullet_Tile_Collision_Roof_Slope_3(int a1, int a2, int BulletID)
{
  __int64 v3; // rax@3
  __int64 v4; // rax@6
  signed int v6; // [sp+4h] [bp-4h]@1

  v6 = 0;
  if ( *(_DWORD *)(BulletID + 16) < (16 * a1 + 8) << 9 && *(_DWORD *)(BulletID + 16) > (16 * a1 - 8) << 9 )
  {
    v3 = *(_DWORD *)(BulletID + 16) - (a1 << 13);
    if ( *(_DWORD *)(BulletID + 20) - 1024 < (a2 << 13) + (((signed int)v3 - HIDWORD(v3)) >> 1) - 2048
      && *(_DWORD *)(BulletID + 20) + 1024 > (16 * a2 - 8) << 9 )
    {
      if ( *(_DWORD *)(BulletID + 8) & 8 )
      {
        v4 = *(_DWORD *)(BulletID + 16) - (a1 << 13);
        *(_DWORD *)(BulletID + 20) = (a2 << 13) + (((signed int)v4 - HIDWORD(v4)) >> 1) - 1024;
      }
      else
      {
        Sound_When_Bullet_Hits_Wall_(BulletID);
      }
      v6 = 66;
    }
  }
  return v6;
}

//----- (00403290) --------------------------------------------------------
signed int __cdecl Bullet_Tile_Collision_Roof_Slope_4(int a1, int a2, int BulletID)
{
  __int64 v3; // rax@3
  __int64 v4; // rax@6
  signed int v6; // [sp+4h] [bp-4h]@1

  v6 = 0;
  if ( *(_DWORD *)(BulletID + 16) < (16 * a1 + 8) << 9 && *(_DWORD *)(BulletID + 16) > (16 * a1 - 8) << 9 )
  {
    v3 = *(_DWORD *)(BulletID + 16) - (a1 << 13);
    if ( *(_DWORD *)(BulletID + 20) - 1024 < (a2 << 13) + (((signed int)v3 - HIDWORD(v3)) >> 1) + 2048
      && *(_DWORD *)(BulletID + 20) + 1024 > (16 * a2 - 8) << 9 )
    {
      if ( *(_DWORD *)(BulletID + 8) & 8 )
      {
        v4 = *(_DWORD *)(BulletID + 16) - (a1 << 13);
        *(_DWORD *)(BulletID + 20) = (a2 << 13) + (((signed int)v4 - HIDWORD(v4)) >> 1) + 3072;
      }
      else
      {
        Sound_When_Bullet_Hits_Wall_(BulletID);
      }
      v6 = 66;
    }
  }
  return v6;
}

//----- (00403380) --------------------------------------------------------
signed int __cdecl Bullet_Tile_Collision_Floor_Slope_1(int a1, int a2, int BulletID)
{
  __int64 v3; // rax@3
  __int64 v4; // rax@6
  signed int v6; // [sp+4h] [bp-4h]@1

  v6 = 0;
  if ( *(_DWORD *)(BulletID + 16) < (16 * a1 + 8) << 9 && *(_DWORD *)(BulletID + 16) - 512 > (16 * a1 - 8) << 9 )
  {
    v3 = *(_DWORD *)(BulletID + 16) - (a1 << 13);
    if ( *(_DWORD *)(BulletID + 20) + 1024 > (a2 << 13) + (((signed int)v3 - HIDWORD(v3)) >> 1) - 2048
      && *(_DWORD *)(BulletID + 20) - 1024 < (16 * a2 + 8) << 9 )
    {
      if ( *(_DWORD *)(BulletID + 8) & 8 )
      {
        v4 = *(_DWORD *)(BulletID + 16) - (a1 << 13);
        *(_DWORD *)(BulletID + 20) = (a2 << 13) + (((signed int)v4 - HIDWORD(v4)) >> 1) - 3072;
      }
      else
      {
        Sound_When_Bullet_Hits_Wall_(BulletID);
      }
      v6 = 40;
    }
  }
  return v6;
}

//----- (00403470) --------------------------------------------------------
signed int __cdecl Bullet_Tile_Collision_Floor_Slope_2(int a1, int a2, int BulletID)
{
  __int64 v3; // rax@3
  __int64 v4; // rax@6
  signed int v6; // [sp+4h] [bp-4h]@1

  v6 = 0;
  if ( *(_DWORD *)(BulletID + 16) < (16 * a1 + 8) << 9 && *(_DWORD *)(BulletID + 16) > (16 * a1 - 8) << 9 )
  {
    v3 = *(_DWORD *)(BulletID + 16) - (a1 << 13);
    if ( *(_DWORD *)(BulletID + 20) + 1024 > (a2 << 13) + (((signed int)v3 - HIDWORD(v3)) >> 1) + 2048
      && *(_DWORD *)(BulletID + 20) - 1024 < (16 * a2 + 8) << 9 )
    {
      if ( *(_DWORD *)(BulletID + 8) & 8 )
      {
        v4 = *(_DWORD *)(BulletID + 16) - (a1 << 13);
        *(_DWORD *)(BulletID + 20) = (a2 << 13) + (((signed int)v4 - HIDWORD(v4)) >> 1) + 1024;
      }
      else
      {
        Sound_When_Bullet_Hits_Wall_(BulletID);
      }
      v6 = 40;
    }
  }
  return v6;
}

//----- (00403560) --------------------------------------------------------
signed int __cdecl Bullet_Tile_Collision_Floor_Slope_3(int a1, int a2, int BulletID)
{
  __int64 v3; // rax@3
  __int64 v4; // rax@6
  signed int v6; // [sp+4h] [bp-4h]@1

  v6 = 0;
  if ( *(_DWORD *)(BulletID + 16) < (16 * a1 + 8) << 9 && *(_DWORD *)(BulletID + 16) > (16 * a1 - 8) << 9 )
  {
    v3 = *(_DWORD *)(BulletID + 16) - (a1 << 13);
    if ( *(_DWORD *)(BulletID + 20) + 1024 > (a2 << 13) - (((signed int)v3 - HIDWORD(v3)) >> 1) + 2048
      && *(_DWORD *)(BulletID + 20) - 1024 < (16 * a2 + 8) << 9 )
    {
      if ( *(_DWORD *)(BulletID + 8) & 8 )
      {
        v4 = *(_DWORD *)(BulletID + 16) - (a1 << 13);
        *(_DWORD *)(BulletID + 20) = (a2 << 13) - (((signed int)v4 - HIDWORD(v4)) >> 1) + 1024;
      }
      else
      {
        Sound_When_Bullet_Hits_Wall_(BulletID);
      }
      v6 = 24;
    }
  }
  return v6;
}

//----- (00403650) --------------------------------------------------------
signed int __cdecl Bullet_Tile_Collision_Floor_Slope_4(int a1, int a2, int BulletID)
{
  __int64 v3; // rax@3
  __int64 v4; // rax@6
  signed int v6; // [sp+4h] [bp-4h]@1

  v6 = 0;
  if ( *(_DWORD *)(BulletID + 16) < (16 * a1 + 8) << 9 && *(_DWORD *)(BulletID + 16) > (16 * a1 - 8) << 9 )
  {
    v3 = *(_DWORD *)(BulletID + 16) - (a1 << 13);
    if ( *(_DWORD *)(BulletID + 20) + 1024 > (a2 << 13) - (((signed int)v3 - HIDWORD(v3)) >> 1) - 2048
      && *(_DWORD *)(BulletID + 20) - 1024 < (16 * a2 + 8) << 9 )
    {
      if ( *(_DWORD *)(BulletID + 8) & 8 )
      {
        v4 = *(_DWORD *)(BulletID + 16) - (a1 << 13);
        *(_DWORD *)(BulletID + 20) = (a2 << 13) - (((signed int)v4 - HIDWORD(v4)) >> 1) - 3072;
      }
      else
      {
        Sound_When_Bullet_Hits_Wall_(BulletID);
      }
      v6 = 24;
    }
  }
  return v6;
}

//----- (00403740) --------------------------------------------------------
// Bullet tile collision algorithm
void Bul_Til_Coll_Algo()
{
  __int64 v0; // rax@5
  __int64 v1; // rax@5
  int v2; // esi@11
  signed int v3; // eax@11
  int v4; // esi@12
  signed int v5; // eax@12
  int v6; // esi@13
  signed int v7; // eax@13
  int v8; // esi@14
  signed int v9; // eax@14
  int v10; // esi@15
  signed int v11; // eax@15
  int v12; // esi@16
  signed int v13; // eax@16
  int v14; // esi@17
  signed int v15; // eax@17
  int v16; // esi@18
  signed int v17; // eax@18
  int v18; // esi@19
  signed int v19; // eax@19
  int v20; // esi@21
  int v21; // eax@21
  int v22; // [sp+8h] [bp-34h]@5
  int v23; // [sp+Ch] [bp-30h]@5
  int v24; // [sp+10h] [bp-2Ch]@5
  int v25; // [sp+14h] [bp-28h]@5
  int v26; // [sp+18h] [bp-24h]@5
  int v27; // [sp+1Ch] [bp-20h]@5
  int v28; // [sp+20h] [bp-1Ch]@5
  int v29; // [sp+24h] [bp-18h]@5
  int j; // [sp+28h] [bp-14h]@6
  char v31; // [sp+2Ch] [bp-10h]@5
  char v32; // [sp+2Dh] [bp-Fh]@5
  char v33; // [sp+2Eh] [bp-Eh]@5
  char v34; // [sp+2Fh] [bp-Dh]@5
  int i; // [sp+30h] [bp-Ch]@1
  int v36; // [sp+34h] [bp-8h]@5
  int v37; // [sp+38h] [bp-4h]@5

  for ( i = 0; i < 64; ++i )
  {
    if ( WeaponObj_In_Use[32 * i] & 0x80 )
    {
      v0 = WeaponObj_X_Position[32 * i] / 16;
      v36 = ((WORD2(v0) & 0x1FF) + (signed int)v0) >> 9;
      v1 = WeaponObj_Y_Position[32 * i] / 16;
      v37 = ((WORD2(v1) & 0x1FF) + (signed int)v1) >> 9;
      v22 = 0;
      v23 = 1;
      v24 = 0;
      v25 = 1;
      v26 = 0;
      v27 = 0;
      v28 = 1;
      v29 = 1;
      v31 = sub_4139A0(v36, v37);
      v32 = sub_4139A0(v36 + 1, v37);
      v33 = sub_4139A0(v36, v37 + 1);
      v34 = sub_4139A0(v36 + 1, v37 + 1);
      WeaponObj_Collision[32 * i] = 0;
      if ( !(WeaponObj_Flags[32 * i] & 4) )
      {
        for ( j = 0; j < 4; ++j )
        {
          if ( WeaponObj_In_Use[32 * i] & 0x80 )
          {
            switch ( *(&v31 + j) )
            {
              case 0x41:
              case 0x43:
              case 0x44:
              case 0x61:
              case 0x64:
                v2 = i << 7;
                v3 = Chk_Starblck_break(*(&v22 + j) + v36, *(&v26 + j) + v37, (int)&WeaponObj_Collision[32 * i]);
                WeaponObj_Collision[32 * i] = *(int *)((char *)WeaponObj_Collision + v2) | v3;
                break;
              case 0x50:
              case 0x70:
                v4 = i << 7;
                v5 = Bullet_Tile_Collision_Roof_Slope_1(
                       *(&v22 + j) + v36,
                       *(&v26 + j) + v37,
                       (int)&WeaponObj_Collision[32 * i]);
                WeaponObj_Collision[32 * i] = *(int *)((char *)WeaponObj_Collision + v4) | v5;
                break;
              case 0x51:
              case 0x71:
                v6 = i << 7;
                v7 = Bullet_Tile_Collision_Roof_Slope_2(
                       *(&v22 + j) + v36,
                       *(&v26 + j) + v37,
                       (int)&WeaponObj_Collision[32 * i]);
                WeaponObj_Collision[32 * i] = *(int *)((char *)WeaponObj_Collision + v6) | v7;
                break;
              case 0x52:
              case 0x72:
                v8 = i << 7;
                v9 = Bullet_Tile_Collision_Roof_Slope_3(
                       *(&v22 + j) + v36,
                       *(&v26 + j) + v37,
                       (int)&WeaponObj_Collision[32 * i]);
                WeaponObj_Collision[32 * i] = *(int *)((char *)WeaponObj_Collision + v8) | v9;
                break;
              case 0x53:
              case 0x73:
                v10 = i << 7;
                v11 = Bullet_Tile_Collision_Roof_Slope_4(
                        *(&v22 + j) + v36,
                        *(&v26 + j) + v37,
                        (int)&WeaponObj_Collision[32 * i]);
                WeaponObj_Collision[32 * i] = *(int *)((char *)WeaponObj_Collision + v10) | v11;
                break;
              case 0x54:
              case 0x74:
                v12 = i << 7;
                v13 = Bullet_Tile_Collision_Floor_Slope_1(
                        *(&v22 + j) + v36,
                        *(&v26 + j) + v37,
                        (int)&WeaponObj_Collision[32 * i]);
                WeaponObj_Collision[32 * i] = *(int *)((char *)WeaponObj_Collision + v12) | v13;
                break;
              case 0x55:
              case 0x75:
                v14 = i << 7;
                v15 = Bullet_Tile_Collision_Floor_Slope_2(
                        *(&v22 + j) + v36,
                        *(&v26 + j) + v37,
                        (int)&WeaponObj_Collision[32 * i]);
                WeaponObj_Collision[32 * i] = *(int *)((char *)WeaponObj_Collision + v14) | v15;
                break;
              case 0x56:
              case 0x76:
                v16 = i << 7;
                v17 = Bullet_Tile_Collision_Floor_Slope_3(
                        *(&v22 + j) + v36,
                        *(&v26 + j) + v37,
                        (int)&WeaponObj_Collision[32 * i]);
                WeaponObj_Collision[32 * i] = *(int *)((char *)WeaponObj_Collision + v16) | v17;
                break;
              case 0x57:
              case 0x77:
                v18 = i << 7;
                v19 = Bullet_Tile_Collision_Floor_Slope_4(
                        *(&v22 + j) + v36,
                        *(&v26 + j) + v37,
                        (int)&WeaponObj_Collision[32 * i]);
                WeaponObj_Collision[32 * i] = *(int *)((char *)WeaponObj_Collision + v18) | v19;
                break;
              default:
                continue;
            }
          }
        }
        v20 = i << 7;
        v21 = Solid_Tile_Complicated(v36, v37, &v31, (int)&WeaponObj_Collision[32 * i]);
        WeaponObj_Collision[32 * i] = *(int *)((char *)WeaponObj_Collision + v20) | v21;
      }
    }
  }
}
// 499C98: using guessed type int WeaponObj_Collision[];
// 499CA0: using guessed type int WeaponObj_Flags[];
// 499CA4: using guessed type int WeaponObj_In_Use[];
// 499CA8: using guessed type int WeaponObj_X_Position[];
// 499CAC: using guessed type int WeaponObj_Y_Position[];

//----- (00403C00) --------------------------------------------------------
int Clear_All_Weapons_Object_Slots()
{
  int result; // eax@3
  signed int i; // [sp+0h] [bp-4h]@1

  for ( i = 0; i < 64; ++i )
  {
    WeaponObj_In_Use[32 * i] = 0;
    result = i + 1;
  }
  return result;
}
// 499CA4: using guessed type int WeaponObj_In_Use[];

//----- (00403C40) --------------------------------------------------------
int __cdecl Count_Weapon_Shot_Occurences(int WeaponID)
{
  signed int i; // [sp+0h] [bp-8h]@1
  int v3; // [sp+4h] [bp-4h]@1

  v3 = 0;
  for ( i = 0; i < 64; ++i )
  {
    if ( WeaponObj_In_Use[32 * i] & 0x80 )
    {
      if ( (WeaponObj_ShotID[32 * i] + 2) / 3 == WeaponID )
        ++v3;
    }
  }
  return v3;
}
// 499C9C: using guessed type int WeaponObj_ShotID[];
// 499CA4: using guessed type int WeaponObj_In_Use[];

//----- (00403CB0) --------------------------------------------------------
int __cdecl Count_All_Slots_Using_Shot(int ShotID)
{
  signed int i; // [sp+0h] [bp-8h]@1
  int v3; // [sp+4h] [bp-4h]@1

  v3 = 0;
  for ( i = 0; i < 64; ++i )
  {
    if ( WeaponObj_In_Use[32 * i] & 0x80 )
    {
      if ( WeaponObj_ShotID[32 * i] == ShotID )
        ++v3;
    }
  }
  return v3;
}
// 499C9C: using guessed type int WeaponObj_ShotID[];
// 499CA4: using guessed type int WeaponObj_In_Use[];

//----- (00403D80) --------------------------------------------------------
int Clear_All_Weapons_Obj_Slots()
{
  int result; // eax@3
  signed int i; // [sp+0h] [bp-4h]@1

  for ( i = 0; i < 64; ++i )
  {
    WeaponObj_In_Use[32 * i] = 0;
    result = i + 1;
  }
  return result;
}
// 499CA4: using guessed type int WeaponObj_In_Use[];

//----- (00403DC0) --------------------------------------------------------
int __cdecl Render_Bullets(signed int a1, signed int a2)
{
  int result; // eax@10
  signed int i; // [sp+4h] [bp-Ch]@1
  signed int v4; // [sp+8h] [bp-8h]@0
  signed int v5; // [sp+Ch] [bp-4h]@0

  for ( i = 0; i < 64; ++i )
  {
    if ( WeaponObj_In_Use[32 * i] & 0x80 )
    {
      switch ( WeaponObj_Direction[128 * i] )
      {
        case 0:
          v4 = WeaponObj_X_Position[32 * i] - dword_499D08[32 * i];
          v5 = WeaponObj_Y_Position[32 * i] - dword_499D0C[32 * i];
          break;
        case 2:
          v4 = WeaponObj_X_Position[32 * i] - dword_499D10[32 * i];
          v5 = WeaponObj_Y_Position[32 * i] - dword_499D0C[32 * i];
          break;
        case 1:
          v4 = WeaponObj_X_Position[32 * i] - dword_499D0C[32 * i];
          v5 = WeaponObj_Y_Position[32 * i] - dword_499D08[32 * i];
          break;
        case 3:
          v4 = WeaponObj_X_Position[32 * i] - dword_499D0C[32 * i];
          v5 = WeaponObj_Y_Position[32 * i] - dword_499D10[32 * i];
          break;
        default:
          break;
      }
      Render_Graphics(
        (int)&FullscreenRect,
        v4 / 512 - a1 / 512,
        v5 / 512 - a2 / 512,
        (int)(&WeaponObj_Rects + 8 * i),
        17);
    }
    result = i + 1;
  }
  return result;
}
// 48F91C: using guessed type int FullscreenRect;
// 499CA4: using guessed type int WeaponObj_In_Use[];
// 499CA8: using guessed type int WeaponObj_X_Position[];
// 499CAC: using guessed type int WeaponObj_Y_Position[];
// 499D08: using guessed type int dword_499D08[];
// 499D0C: using guessed type int dword_499D0C[];
// 499D10: using guessed type int dword_499D10[];

//----- (00403F80) --------------------------------------------------------
int __cdecl Create_Bullet(int BulletID, int X_Position, int Y_Position, char Direction)
{
  int result; // eax@3
  signed int i; // [sp+0h] [bp-4h]@1

  for ( i = 0; i < 64; ++i )
  {
    result = i << 7;
    if ( !(WeaponObj_In_Use[32 * i] & 0x80) )
      break;
  }
  if ( i < 64 )
  {
    memset(&WeaponObj_Collision[32 * i], 0, 0x80u);
    WeaponObj_ShotID[32 * i] = BulletID;
    WeaponObj_In_Use[32 * i] = 128;
    WeaponObj_Direction[128 * i] = Direction;
    WeaponObj_Damage[32 * i] = ROM_WeaponData_Damage[44 * BulletID];
    WeaponObj_Num_Impacts[32 * i] = ROM_WeaponData_Num_Impacts[44 * BulletID];
    WeaponObj_Max_Distance[32 * i] = ROM_WeaponData_Max_Distance[11 * BulletID];
    WeaponObj_Flags[32 * i] = ROM_WeaponData_Behaviour_Flags[11 * BulletID];
    dword_499CF8[32 * i] = ROM_WeaponData_Bullet_Size_Width[11 * BulletID] << 9;
    dword_499CFC[32 * i] = ROM_WeaponData_Bullet_Size_Height[11 * BulletID] << 9;
    dword_499D00[32 * i] = ROM_WeaponData_Wall_Collision_X[11 * BulletID] << 9;
    dword_499D04[32 * i] = ROM_WeaponData_Wall_Collision_Y[11 * BulletID] << 9;
    dword_499D10[32 * i] = ROM_WeaponData_Pos_Offset_Right[11 * BulletID] << 9;
    dword_499D08[32 * i] = ROM_WeaponData_Pos_Offset_Left[11 * BulletID] << 9;
    dword_499D0C[32 * i] = ROM_WeaponData_Pos_Offset_Up[11 * BulletID] << 9;
    dword_499D14[32 * i] = ROM_WeaponData_Pos_Offset_Down[11 * BulletID] << 9;
    WeaponObj_X_Position[32 * i] = X_Position;
    result = Y_Position;
    WeaponObj_Y_Position[32 * i] = Y_Position;
  }
  return result;
}
// 48F04C: using guessed type int ROM_WeaponData_Max_Distance[];
// 48F050: using guessed type int ROM_WeaponData_Behaviour_Flags[];
// 48F054: using guessed type int ROM_WeaponData_Bullet_Size_Width[];
// 48F058: using guessed type int ROM_WeaponData_Bullet_Size_Height[];
// 48F05C: using guessed type int ROM_WeaponData_Wall_Collision_X[];
// 48F060: using guessed type int ROM_WeaponData_Wall_Collision_Y[];
// 48F064: using guessed type int ROM_WeaponData_Pos_Offset_Left[];
// 48F068: using guessed type int ROM_WeaponData_Pos_Offset_Up[];
// 48F06C: using guessed type int ROM_WeaponData_Pos_Offset_Right[];
// 48F070: using guessed type int ROM_WeaponData_Pos_Offset_Down[];
// 499C98: using guessed type int WeaponObj_Collision[];
// 499C9C: using guessed type int WeaponObj_ShotID[];
// 499CA0: using guessed type int WeaponObj_Flags[];
// 499CA4: using guessed type int WeaponObj_In_Use[];
// 499CA8: using guessed type int WeaponObj_X_Position[];
// 499CAC: using guessed type int WeaponObj_Y_Position[];
// 499CEC: using guessed type int WeaponObj_Max_Distance[];
// 499CF0: using guessed type int WeaponObj_Damage[];
// 499CF4: using guessed type int WeaponObj_Num_Impacts[];
// 499CF8: using guessed type int dword_499CF8[];
// 499CFC: using guessed type int dword_499CFC[];
// 499D00: using guessed type int dword_499D00[];
// 499D04: using guessed type int dword_499D04[];
// 499D08: using guessed type int dword_499D08[];
// 499D0C: using guessed type int dword_499D0C[];
// 499D10: using guessed type int dword_499D10[];
// 499D14: using guessed type int dword_499D14[];

//----- (00404160) --------------------------------------------------------
int __cdecl Snake_Lvl_1_Bullet(int a1)
{
  int result; // eax@2
  int *v2; // edx@16
  int *v3; // edx@17
  int v4; // [sp+4h] [bp-80h]@15
  int v5; // [sp+8h] [bp-7Ch]@15
  int v6; // [sp+Ch] [bp-78h]@15
  int v7; // [sp+10h] [bp-74h]@15
  int v8; // [sp+14h] [bp-70h]@15
  int v9; // [sp+18h] [bp-6Ch]@15
  int v10; // [sp+1Ch] [bp-68h]@15
  int v11; // [sp+20h] [bp-64h]@15
  int v12; // [sp+24h] [bp-60h]@15
  int v13; // [sp+28h] [bp-5Ch]@15
  int v14; // [sp+2Ch] [bp-58h]@15
  int v15; // [sp+30h] [bp-54h]@15
  int v16; // [sp+34h] [bp-50h]@15
  int v17; // [sp+38h] [bp-4Ch]@15
  int v18; // [sp+3Ch] [bp-48h]@15
  int v19; // [sp+40h] [bp-44h]@15
  int v20; // [sp+44h] [bp-40h]@15
  int v21; // [sp+48h] [bp-3Ch]@15
  int v22; // [sp+4Ch] [bp-38h]@15
  int v23; // [sp+50h] [bp-34h]@15
  int v24; // [sp+54h] [bp-30h]@15
  int v25; // [sp+58h] [bp-2Ch]@15
  int v26; // [sp+5Ch] [bp-28h]@15
  int v27; // [sp+60h] [bp-24h]@15
  int v28; // [sp+64h] [bp-20h]@15
  int v29; // [sp+68h] [bp-1Ch]@15
  int v30; // [sp+6Ch] [bp-18h]@15
  int v31; // [sp+70h] [bp-14h]@15
  int v32; // [sp+74h] [bp-10h]@15
  int v33; // [sp+78h] [bp-Ch]@15
  int v34; // [sp+7Ch] [bp-8h]@15
  int v35; // [sp+80h] [bp-4h]@15

  if ( ++*(_DWORD *)(a1 + 76) <= *(_DWORD *)(a1 + 84) )
  {
    if ( *(_DWORD *)(a1 + 40) )
    {
      *(_DWORD *)(a1 + 16) += *(_DWORD *)(a1 + 24);
      *(_DWORD *)(a1 + 20) += *(_DWORD *)(a1 + 28);
    }
    else
    {
      *(_DWORD *)(a1 + 52) = RNG_Range(0, 2);
      *(_DWORD *)(a1 + 40) = 1;
      switch ( *(_BYTE *)(a1 + 56) )
      {
        case 0:
          *(_DWORD *)(a1 + 24) = -1536;
          break;
        case 1:
          *(_DWORD *)(a1 + 28) = -1536;
          break;
        case 2:
          *(_DWORD *)(a1 + 24) = 1536;
          break;
        case 3:
          *(_DWORD *)(a1 + 28) = 1536;
          break;
        default:
          break;
      }
    }
    if ( ++*(_DWORD *)(a1 + 48) > 0 )
    {
      *(_DWORD *)(a1 + 48) = 0;
      ++*(_DWORD *)(a1 + 52);
    }
    if ( *(_DWORD *)(a1 + 52) > 3 )
      *(_DWORD *)(a1 + 52) = 0;
    v20 = 136;
    v21 = 80;
    v22 = 152;
    v23 = 80;
    v24 = 120;
    v25 = 80;
    v26 = 136;
    v27 = 96;
    v28 = 136;
    v29 = 64;
    v30 = 152;
    v31 = 80;
    v32 = 120;
    v33 = 64;
    v34 = 136;
    v35 = 80;
    v4 = 120;
    v5 = 64;
    v6 = 136;
    v7 = 80;
    v8 = 136;
    v9 = 64;
    v10 = 152;
    v11 = 80;
    v12 = 120;
    v13 = 80;
    v14 = 136;
    v15 = 96;
    v16 = 136;
    v17 = 80;
    v18 = 152;
    v19 = 80;
    if ( *(_BYTE *)(a1 + 56) )
    {
      v3 = &v4 + 4 * *(_DWORD *)(a1 + 52);
      result = a1 + 60;
      *(_DWORD *)result = *v3;
      *(_DWORD *)(result + 4) = v3[1];
      *(_DWORD *)(result + 8) = v3[2];
      *(_DWORD *)(result + 12) = v3[3];
    }
    else
    {
      v2 = &v20 + 4 * *(_DWORD *)(a1 + 52);
      result = a1 + 60;
      *(_DWORD *)result = *v2;
      *(_DWORD *)(result + 4) = v2[1];
      *(_DWORD *)(result + 8) = v2[2];
      *(_DWORD *)(result + 12) = v2[3];
    }
  }
  else
  {
    *(_DWORD *)(a1 + 12) = 0;
    result = Create_Animated_Effect(*(_DWORD *)(a1 + 16), *(_DWORD *)(a1 + 20), 3, 0);
  }
  return result;
}

//----- (004043F0) --------------------------------------------------------
int __cdecl Bullet_02_03_Snake(int a1, int a2)
{
  int result; // eax@2
  int *v3; // ecx@38
  int v4; // edx@38
  int v5; // [sp+10h] [bp-30h]@38
  int v6; // [sp+14h] [bp-2Ch]@38
  int v7; // [sp+18h] [bp-28h]@38
  int v8; // [sp+1Ch] [bp-24h]@38
  int v9; // [sp+20h] [bp-20h]@38
  int v10; // [sp+24h] [bp-1Ch]@38
  int v11; // [sp+28h] [bp-18h]@38
  int v12; // [sp+2Ch] [bp-14h]@38
  int v13; // [sp+30h] [bp-10h]@38
  int v14; // [sp+34h] [bp-Ch]@38
  int v15; // [sp+38h] [bp-8h]@38
  int v16; // [sp+3Ch] [bp-4h]@38

  if ( ++*(_DWORD *)(a1 + 76) <= *(_DWORD *)(a1 + 84) )
  {
    if ( *(_DWORD *)(a1 + 40) )
    {
      switch ( *(_BYTE *)(a1 + 56) )
      {
        case 0:
          *(_DWORD *)(a1 + 24) -= 128;
          break;
        case 1:
          *(_DWORD *)(a1 + 28) -= 128;
          break;
        case 2:
          *(_DWORD *)(a1 + 24) += 128;
          break;
        case 3:
          *(_DWORD *)(a1 + 28) += 128;
          break;
        default:
          break;
      }
      switch ( *(_BYTE *)(a1 + 56) )
      {
        case 0:
        case 2:
          if ( *(_DWORD *)(a1 + 76) % 5 == 2 )
          {
            if ( *(_DWORD *)(a1 + 28) >= 0 )
              *(_DWORD *)(a1 + 28) = -1024;
            else
              *(_DWORD *)(a1 + 28) = 1024;
          }
          break;
        case 1:
        case 3:
          if ( *(_DWORD *)(a1 + 76) % 5 == 2 )
          {
            if ( *(_DWORD *)(a1 + 24) >= 0 )
              *(_DWORD *)(a1 + 24) = -1024;
            else
              *(_DWORD *)(a1 + 24) = 1024;
          }
          break;
        default:
          break;
      }
      *(_DWORD *)(a1 + 16) += *(_DWORD *)(a1 + 24);
      *(_DWORD *)(a1 + 20) += *(_DWORD *)(a1 + 28);
    }
    else
    {
      *(_DWORD *)(a1 + 52) = RNG_Range(0, 2);
      *(_DWORD *)(a1 + 40) = 1;
      switch ( *(_BYTE *)(a1 + 56) )
      {
        case 0:
          *(_DWORD *)(a1 + 24) = -512;
          break;
        case 1:
          *(_DWORD *)(a1 + 28) = -512;
          break;
        case 2:
          *(_DWORD *)(a1 + 24) = 512;
          break;
        case 3:
          *(_DWORD *)(a1 + 28) = 512;
          break;
        default:
          break;
      }
      ++dword_49BC98;
      switch ( *(_BYTE *)(a1 + 56) )
      {
        case 0:
        case 2:
          if ( dword_49BC98 % 2u )
            *(_DWORD *)(a1 + 28) = 1024;
          else
            *(_DWORD *)(a1 + 28) = -1024;
          break;
        case 1:
        case 3:
          if ( dword_49BC98 % 2u )
            *(_DWORD *)(a1 + 24) = 1024;
          else
            *(_DWORD *)(a1 + 24) = -1024;
          break;
        default:
          break;
      }
    }
    if ( ++*(_DWORD *)(a1 + 48) > 0 )
    {
      *(_DWORD *)(a1 + 48) = 0;
      ++*(_DWORD *)(a1 + 52);
    }
    if ( *(_DWORD *)(a1 + 52) > 2 )
      *(_DWORD *)(a1 + 52) = 0;
    v5 = 192;
    v6 = 16;
    v7 = 208;
    v8 = 32;
    v9 = 208;
    v10 = 16;
    v11 = 224;
    v12 = 32;
    v13 = 224;
    v14 = 16;
    v15 = 240;
    v16 = 32;
    v3 = &v5 + 4 * *(_DWORD *)(a1 + 52);
    v4 = a1 + 60;
    *(_DWORD *)v4 = *v3;
    *(_DWORD *)(v4 + 4) = v3[1];
    *(_DWORD *)(v4 + 8) = v3[2];
    *(_DWORD *)(v4 + 12) = v3[3];
    if ( a2 == 2 )
      result = NPC_Create(129, *(_DWORD *)(a1 + 16), *(_DWORD *)(a1 + 20), 0, -512, *(_DWORD *)(a1 + 52), 0, 256);
    else
      result = NPC_Create(129, *(_DWORD *)(a1 + 16), *(_DWORD *)(a1 + 20), 0, -512, *(_DWORD *)(a1 + 52) + 3, 0, 256);
  }
  else
  {
    *(_DWORD *)(a1 + 12) = 0;
    result = Create_Animated_Effect(*(_DWORD *)(a1 + 16), *(_DWORD *)(a1 + 20), 3, 0);
  }
  return result;
}
// 49BC98: using guessed type int dword_49BC98;

//----- (004047B0) --------------------------------------------------------
int __cdecl Bullet_04_05_06_Polar_Star(int Weapon_Obj, int Level)
{
  int result; // eax@2
  int v3; // ecx@36
  int v4; // ecx@37
  int v5; // edx@41
  int v6; // edx@42

  if ( ++*(_DWORD *)(Weapon_Obj + 76) <= *(_DWORD *)(Weapon_Obj + 84) )
  {
    if ( *(_DWORD *)(Weapon_Obj + 40) )
    {
      *(_DWORD *)(Weapon_Obj + 16) += *(_DWORD *)(Weapon_Obj + 24);
      result = Weapon_Obj;
      *(_DWORD *)(Weapon_Obj + 20) += *(_DWORD *)(Weapon_Obj + 28);
    }
    else
    {
      *(_DWORD *)(Weapon_Obj + 40) = 1;
      result = *(_BYTE *)(Weapon_Obj + 56);
      switch ( result )
      {
        case 0:
          *(_DWORD *)(Weapon_Obj + 24) = -4096;
          break;
        case 1:
          *(_DWORD *)(Weapon_Obj + 28) = -4096;
          break;
        case 2:
          result = Weapon_Obj;
          *(_DWORD *)(Weapon_Obj + 24) = 4096;
          break;
        case 3:
          *(_DWORD *)(Weapon_Obj + 28) = 4096;
          break;
        default:
          break;
      }
      if ( Level == 1 )
      {
        result = Weapon_Obj;
        switch ( *(_BYTE *)(Weapon_Obj + 56) )
        {
          case 0:
            result = Weapon_Obj;
            *(_DWORD *)(Weapon_Obj + 100) = 1024;
            break;
          case 1:
            *(_DWORD *)(Weapon_Obj + 96) = 1024;
            break;
          case 2:
            *(_DWORD *)(Weapon_Obj + 100) = 1024;
            break;
          case 3:
            result = Weapon_Obj;
            *(_DWORD *)(Weapon_Obj + 96) = 1024;
            break;
          default:
            break;
        }
      }
      else if ( Level == 2 )
      {
        result = *(_BYTE *)(Weapon_Obj + 56);
        switch ( result )
        {
          case 0:
            *(_DWORD *)(Weapon_Obj + 100) = 2048;
            break;
          case 1:
            *(_DWORD *)(Weapon_Obj + 96) = 2048;
            break;
          case 2:
            result = Weapon_Obj;
            *(_DWORD *)(Weapon_Obj + 100) = 2048;
            break;
          case 3:
            *(_DWORD *)(Weapon_Obj + 96) = 2048;
            break;
          default:
            break;
        }
      }
    }
    switch ( Level )
    {
      case 1:
        if ( *(_BYTE *)(Weapon_Obj + 56) != 1 && *(_BYTE *)(Weapon_Obj + 56) != 3 )
        {
          result = Weapon_Obj + 60;
          *(_DWORD *)result = 128;
          *(_DWORD *)(result + 4) = 32;
          *(_DWORD *)(result + 8) = 144;
          *(_DWORD *)(result + 12) = 48;
        }
        else
        {
          result = Weapon_Obj + 60;
          *(_DWORD *)result = 144;
          *(_DWORD *)(result + 4) = 32;
          *(_DWORD *)(result + 8) = 160;
          *(_DWORD *)(result + 12) = 48;
        }
        break;
      case 2:
        if ( *(_BYTE *)(Weapon_Obj + 56) != 1 && *(_BYTE *)(Weapon_Obj + 56) != 3 )
        {
          v4 = Weapon_Obj + 60;
          *(_DWORD *)v4 = 160;
          *(_DWORD *)(v4 + 4) = 32;
          *(_DWORD *)(v4 + 8) = 176;
          result = 48;
          *(_DWORD *)(v4 + 12) = 48;
        }
        else
        {
          v3 = Weapon_Obj + 60;
          *(_DWORD *)v3 = 176;
          *(_DWORD *)(v3 + 4) = 32;
          *(_DWORD *)(v3 + 8) = 192;
          result = 48;
          *(_DWORD *)(v3 + 12) = 48;
        }
        break;
      case 3:
        if ( *(_BYTE *)(Weapon_Obj + 56) != 1 && *(_BYTE *)(Weapon_Obj + 56) != 3 )
        {
          v6 = Weapon_Obj + 60;
          *(_DWORD *)v6 = 128;
          *(_DWORD *)(v6 + 4) = 48;
          result = 144;
          *(_DWORD *)(v6 + 8) = 144;
          *(_DWORD *)(v6 + 12) = 64;
        }
        else
        {
          v5 = Weapon_Obj + 60;
          *(_DWORD *)v5 = 144;
          *(_DWORD *)(v5 + 4) = 48;
          result = 160;
          *(_DWORD *)(v5 + 8) = 160;
          *(_DWORD *)(v5 + 12) = 64;
        }
        break;
    }
  }
  else
  {
    *(_DWORD *)(Weapon_Obj + 12) = 0;
    result = Create_Animated_Effect(*(_DWORD *)(Weapon_Obj + 16), *(_DWORD *)(Weapon_Obj + 20), 3, 0);
  }
  return result;
}

//----- (00404B30) --------------------------------------------------------
int __cdecl Bullet_07_08_09_Fireball(int Weapon_Obj, int a2)
{
  int result; // eax@2
  int *v3; // eax@47
  int v4; // ecx@47
  int *v5; // eax@48
  int v6; // ecx@48
  int *v7; // ecx@53
  int v8; // edx@53
  int *v9; // ecx@54
  int v10; // edx@54
  int v11; // [sp+4h] [bp-E8h]@43
  int v12; // [sp+8h] [bp-E4h]@43
  int v13; // [sp+Ch] [bp-E0h]@43
  int v14; // [sp+10h] [bp-DCh]@43
  int v15; // [sp+14h] [bp-D8h]@43
  int v16; // [sp+18h] [bp-D4h]@43
  int v17; // [sp+1Ch] [bp-D0h]@43
  int v18; // [sp+20h] [bp-CCh]@43
  int v19; // [sp+24h] [bp-C8h]@43
  int v20; // [sp+28h] [bp-C4h]@43
  int v21; // [sp+2Ch] [bp-C0h]@43
  int v22; // [sp+30h] [bp-BCh]@43
  int v23; // [sp+34h] [bp-B8h]@43
  int v24; // [sp+38h] [bp-B4h]@43
  int v25; // [sp+3Ch] [bp-B0h]@43
  int v26; // [sp+40h] [bp-ACh]@43
  int v27; // [sp+44h] [bp-A8h]@43
  int v28; // [sp+48h] [bp-A4h]@43
  int v29; // [sp+4Ch] [bp-A0h]@43
  int v30; // [sp+50h] [bp-9Ch]@43
  int v31; // [sp+54h] [bp-98h]@43
  int v32; // [sp+58h] [bp-94h]@43
  int v33; // [sp+5Ch] [bp-90h]@43
  int v34; // [sp+60h] [bp-8Ch]@43
  int v35; // [sp+64h] [bp-88h]@43
  int v36; // [sp+68h] [bp-84h]@43
  int v37; // [sp+6Ch] [bp-80h]@43
  int v38; // [sp+70h] [bp-7Ch]@43
  int v39; // [sp+74h] [bp-78h]@43
  int v40; // [sp+78h] [bp-74h]@43
  int v41; // [sp+7Ch] [bp-70h]@43
  int v42; // [sp+80h] [bp-6Ch]@43
  int v43; // [sp+88h] [bp-64h]@43
  int v44; // [sp+8Ch] [bp-60h]@43
  int v45; // [sp+90h] [bp-5Ch]@43
  int v46; // [sp+94h] [bp-58h]@43
  int v47; // [sp+98h] [bp-54h]@43
  int v48; // [sp+9Ch] [bp-50h]@43
  int v49; // [sp+A0h] [bp-4Ch]@43
  int v50; // [sp+A4h] [bp-48h]@43
  int v51; // [sp+A8h] [bp-44h]@43
  int v52; // [sp+ACh] [bp-40h]@43
  int v53; // [sp+B0h] [bp-3Ch]@43
  int v54; // [sp+B4h] [bp-38h]@43
  int v55; // [sp+B8h] [bp-34h]@3
  int v56; // [sp+BCh] [bp-30h]@43
  int v57; // [sp+C0h] [bp-2Ch]@43
  int v58; // [sp+C4h] [bp-28h]@43
  int v59; // [sp+C8h] [bp-24h]@43
  int v60; // [sp+CCh] [bp-20h]@43
  int v61; // [sp+D0h] [bp-1Ch]@43
  int v62; // [sp+D4h] [bp-18h]@43
  int v63; // [sp+D8h] [bp-14h]@43
  int v64; // [sp+DCh] [bp-10h]@43
  int v65; // [sp+E0h] [bp-Ch]@43
  int v66; // [sp+E4h] [bp-8h]@43
  int v67; // [sp+E8h] [bp-4h]@43

  if ( ++*(_DWORD *)(Weapon_Obj + 76) <= *(_DWORD *)(Weapon_Obj + 84) )
  {
    v55 = 0;
    if ( *(_DWORD *)Weapon_Obj & 2 && *(_DWORD *)Weapon_Obj & 8 )
      v55 = 1;
    if ( *(_DWORD *)Weapon_Obj & 1 && *(_DWORD *)Weapon_Obj & 4 )
      v55 = 1;
    if ( !*(_BYTE *)(Weapon_Obj + 56) && *(_DWORD *)Weapon_Obj & 1 )
      *(_BYTE *)(Weapon_Obj + 56) = 2;
    if ( *(_BYTE *)(Weapon_Obj + 56) == 2 && *(_DWORD *)Weapon_Obj & 4 )
      *(_BYTE *)(Weapon_Obj + 56) = 0;
    if ( v55 )
    {
      *(_DWORD *)(Weapon_Obj + 12) = 0;
      Create_Animated_Effect(*(_DWORD *)(Weapon_Obj + 16), *(_DWORD *)(Weapon_Obj + 20), 2, 0);
      result = Play_Sound_Effect(28, 1);
    }
    else
    {
      if ( *(_DWORD *)(Weapon_Obj + 40) )
      {
        if ( *(_DWORD *)Weapon_Obj & 8 )
        {
          *(_DWORD *)(Weapon_Obj + 28) = -1024;
        }
        else if ( *(_DWORD *)Weapon_Obj & 1 )
        {
          *(_DWORD *)(Weapon_Obj + 24) = 1024;
        }
        else if ( *(_DWORD *)Weapon_Obj & 4 )
        {
          *(_DWORD *)(Weapon_Obj + 24) = -1024;
        }
        *(_DWORD *)(Weapon_Obj + 28) += 85;
        if ( *(_DWORD *)(Weapon_Obj + 28) > 1023 )
          *(_DWORD *)(Weapon_Obj + 28) = 1023;
        *(_DWORD *)(Weapon_Obj + 16) += *(_DWORD *)(Weapon_Obj + 24);
        *(_DWORD *)(Weapon_Obj + 20) += *(_DWORD *)(Weapon_Obj + 28);
        if ( *(_DWORD *)Weapon_Obj & 0xD )
          Play_Sound_Effect(34, 1);
      }
      else
      {
        *(_DWORD *)(Weapon_Obj + 40) = 1;
        switch ( *(_BYTE *)(Weapon_Obj + 56) )
        {
          case 0:
            *(_DWORD *)(Weapon_Obj + 24) = -1024;
            break;
          case 1:
            *(_DWORD *)(Weapon_Obj + 24) = Quote_X_Velocity;
            if ( Quote_X_Velocity >= 0 )
              *(_BYTE *)(Weapon_Obj + 56) = 2;
            else
              *(_BYTE *)(Weapon_Obj + 56) = 0;
            if ( *(_DWORD *)&Quote_Direction_Faced )
              *(_DWORD *)(Weapon_Obj + 24) += 128;
            else
              *(_DWORD *)(Weapon_Obj + 24) -= 128;
            *(_DWORD *)(Weapon_Obj + 28) = -1535;
            break;
          case 2:
            *(_DWORD *)(Weapon_Obj + 24) = 1024;
            break;
          case 3:
            *(_DWORD *)(Weapon_Obj + 24) = Quote_X_Velocity;
            if ( Quote_X_Velocity >= 0 )
              *(_BYTE *)(Weapon_Obj + 56) = 2;
            else
              *(_BYTE *)(Weapon_Obj + 56) = 0;
            *(_DWORD *)(Weapon_Obj + 28) = 1535;
            break;
          default:
            break;
        }
      }
      v27 = 128;
      v28 = 0;
      v29 = 144;
      v30 = 16;
      v31 = 144;
      v32 = 0;
      v33 = 160;
      v34 = 16;
      v35 = 160;
      v36 = 0;
      v37 = 176;
      v38 = 16;
      v39 = 176;
      v40 = 0;
      v41 = 192;
      v42 = 16;
      v11 = 128;
      v12 = 16;
      v13 = 144;
      v14 = 32;
      v15 = 144;
      v16 = 16;
      v17 = 160;
      v18 = 32;
      v19 = 160;
      v20 = 16;
      v21 = 176;
      v22 = 32;
      v23 = 176;
      v24 = 16;
      v25 = 192;
      v26 = 32;
      v56 = 192;
      v57 = 16;
      v58 = 208;
      v59 = 32;
      v60 = 208;
      v61 = 16;
      v62 = 224;
      v63 = 32;
      v64 = 224;
      v65 = 16;
      v66 = 240;
      v67 = 32;
      v43 = 224;
      v44 = 16;
      v45 = 240;
      v46 = 32;
      v47 = 208;
      v48 = 16;
      v49 = 224;
      v50 = 32;
      v51 = 192;
      v52 = 16;
      v53 = 208;
      v54 = 32;
      ++*(_DWORD *)(Weapon_Obj + 52);
      if ( a2 == 1 )
      {
        if ( *(_DWORD *)(Weapon_Obj + 52) > 3 )
          *(_DWORD *)(Weapon_Obj + 52) = 0;
        if ( *(_BYTE *)(Weapon_Obj + 56) )
        {
          v5 = &v11 + 4 * *(_DWORD *)(Weapon_Obj + 52);
          v6 = Weapon_Obj + 60;
          *(_DWORD *)v6 = *v5;
          *(_DWORD *)(v6 + 4) = v5[1];
          *(_DWORD *)(v6 + 8) = v5[2];
          result = v5[3];
          *(_DWORD *)(v6 + 12) = result;
        }
        else
        {
          v3 = &v27 + 4 * *(_DWORD *)(Weapon_Obj + 52);
          v4 = Weapon_Obj + 60;
          *(_DWORD *)v4 = *v3;
          *(_DWORD *)(v4 + 4) = v3[1];
          *(_DWORD *)(v4 + 8) = v3[2];
          result = v3[3];
          *(_DWORD *)(v4 + 12) = result;
        }
      }
      else
      {
        if ( *(_DWORD *)(Weapon_Obj + 52) > 2 )
          *(_DWORD *)(Weapon_Obj + 52) = 0;
        if ( *(_BYTE *)(Weapon_Obj + 56) )
        {
          v9 = &v43 + 4 * *(_DWORD *)(Weapon_Obj + 52);
          v10 = Weapon_Obj + 60;
          *(_DWORD *)v10 = *v9;
          *(_DWORD *)(v10 + 4) = v9[1];
          *(_DWORD *)(v10 + 8) = v9[2];
          *(_DWORD *)(v10 + 12) = v9[3];
        }
        else
        {
          v7 = &v56 + 4 * *(_DWORD *)(Weapon_Obj + 52);
          v8 = Weapon_Obj + 60;
          *(_DWORD *)v8 = *v7;
          *(_DWORD *)(v8 + 4) = v7[1];
          *(_DWORD *)(v8 + 8) = v7[2];
          *(_DWORD *)(v8 + 12) = v7[3];
        }
        if ( a2 == 2 )
          result = NPC_Create(
                     129,
                     *(_DWORD *)(Weapon_Obj + 16),
                     *(_DWORD *)(Weapon_Obj + 20),
                     0,
                     -512,
                     *(_DWORD *)(Weapon_Obj + 52),
                     0,
                     256);
        else
          result = NPC_Create(
                     129,
                     *(_DWORD *)(Weapon_Obj + 16),
                     *(_DWORD *)(Weapon_Obj + 20),
                     0,
                     -512,
                     *(_DWORD *)(Weapon_Obj + 52) + 3,
                     0,
                     256);
      }
    }
  }
  else
  {
    *(_DWORD *)(Weapon_Obj + 12) = 0;
    result = Create_Animated_Effect(*(_DWORD *)(Weapon_Obj + 16), *(_DWORD *)(Weapon_Obj + 20), 3, 0);
  }
  return result;
}
// 49E66C: using guessed type int Quote_X_Velocity;

//----- (00405120) --------------------------------------------------------
int __cdecl Bullet_0A_0B_0C_Machine_Gun(int a1, int a2)
{
  int result; // eax@2
  int *v3; // ecx@21
  int v4; // edx@21
  int *v5; // ecx@22
  int v6; // edx@22
  int *v7; // ecx@27
  int v8; // edx@27
  int v9; // [sp+Ch] [bp-C8h]@1
  int v10; // [sp+10h] [bp-C4h]@1
  int v11; // [sp+14h] [bp-C0h]@1
  int v12; // [sp+18h] [bp-BCh]@1
  int v13; // [sp+1Ch] [bp-B8h]@1
  int v14; // [sp+20h] [bp-B4h]@1
  int v15; // [sp+24h] [bp-B0h]@1
  int v16; // [sp+28h] [bp-ACh]@1
  int v17; // [sp+2Ch] [bp-A8h]@1
  int v18; // [sp+30h] [bp-A4h]@1
  int v19; // [sp+34h] [bp-A0h]@1
  int v20; // [sp+38h] [bp-9Ch]@1
  int v21; // [sp+3Ch] [bp-98h]@1
  int v22; // [sp+40h] [bp-94h]@1
  int v23; // [sp+44h] [bp-90h]@1
  int v24; // [sp+48h] [bp-8Ch]@1
  int v25; // [sp+50h] [bp-84h]@8
  int v26; // [sp+54h] [bp-80h]@1
  int v27; // [sp+58h] [bp-7Ch]@1
  int v28; // [sp+5Ch] [bp-78h]@1
  int v29; // [sp+60h] [bp-74h]@1
  int v30; // [sp+64h] [bp-70h]@1
  int v31; // [sp+68h] [bp-6Ch]@1
  int v32; // [sp+6Ch] [bp-68h]@1
  int v33; // [sp+70h] [bp-64h]@1
  int v34; // [sp+74h] [bp-60h]@1
  int v35; // [sp+78h] [bp-5Ch]@1
  int v36; // [sp+7Ch] [bp-58h]@1
  int v37; // [sp+80h] [bp-54h]@1
  int v38; // [sp+84h] [bp-50h]@1
  int v39; // [sp+88h] [bp-4Ch]@1
  int v40; // [sp+8Ch] [bp-48h]@1
  int v41; // [sp+90h] [bp-44h]@1
  int v42; // [sp+94h] [bp-40h]@1
  int v43; // [sp+98h] [bp-3Ch]@1
  int v44; // [sp+9Ch] [bp-38h]@1
  int v45; // [sp+A0h] [bp-34h]@1
  int v46; // [sp+A4h] [bp-30h]@1
  int v47; // [sp+A8h] [bp-2Ch]@1
  int v48; // [sp+ACh] [bp-28h]@1
  int v49; // [sp+B0h] [bp-24h]@1
  int v50; // [sp+B4h] [bp-20h]@1
  int v51; // [sp+B8h] [bp-1Ch]@1
  int v52; // [sp+BCh] [bp-18h]@1
  int v53; // [sp+C0h] [bp-14h]@1
  int v54; // [sp+C4h] [bp-10h]@1
  int v55; // [sp+C8h] [bp-Ch]@1
  int v56; // [sp+CCh] [bp-8h]@1
  int v57; // [sp+D0h] [bp-4h]@1

  v42 = 64;
  v43 = 0;
  v44 = 80;
  v45 = 16;
  v46 = 80;
  v47 = 0;
  v48 = 96;
  v49 = 16;
  v50 = 96;
  v51 = 0;
  v52 = 112;
  v53 = 16;
  v54 = 112;
  v55 = 0;
  v56 = 128;
  v57 = 16;
  v9 = 64;
  v10 = 16;
  v11 = 80;
  v12 = 32;
  v13 = 80;
  v14 = 16;
  v15 = 96;
  v16 = 32;
  v17 = 96;
  v18 = 16;
  v19 = 112;
  v20 = 32;
  v21 = 112;
  v22 = 16;
  v23 = 128;
  v24 = 32;
  v26 = 64;
  v27 = 32;
  v28 = 80;
  v29 = 48;
  v30 = 80;
  v31 = 32;
  v32 = 96;
  v33 = 48;
  v34 = 96;
  v35 = 32;
  v36 = 112;
  v37 = 48;
  v38 = 112;
  v39 = 32;
  v40 = 128;
  v41 = 48;
  if ( ++*(_DWORD *)(a1 + 76) <= *(_DWORD *)(a1 + 84) )
  {
    if ( *(_DWORD *)(a1 + 40) )
    {
      *(_DWORD *)(a1 + 16) += *(_DWORD *)(a1 + 24);
      result = a1;
      *(_DWORD *)(a1 + 20) += *(_DWORD *)(a1 + 28);
      switch ( a2 )
      {
        case 1:
          v3 = &v42 + 4 * *(_BYTE *)(a1 + 56);
          v4 = a1 + 60;
          *(_DWORD *)v4 = *v3;
          *(_DWORD *)(v4 + 4) = v3[1];
          result = v3[2];
          *(_DWORD *)(v4 + 8) = result;
          *(_DWORD *)(v4 + 12) = v3[3];
          break;
        case 2:
          v5 = &v9 + 4 * *(_BYTE *)(a1 + 56);
          v6 = a1 + 60;
          *(_DWORD *)v6 = *v5;
          *(_DWORD *)(v6 + 4) = v5[1];
          *(_DWORD *)(v6 + 8) = v5[2];
          *(_DWORD *)(v6 + 12) = v5[3];
          if ( *(_BYTE *)(a1 + 56) != 1 && *(_BYTE *)(a1 + 56) != 3 )
            result = NPC_Create(127, *(_DWORD *)(a1 + 16), *(_DWORD *)(a1 + 20), 0, 0, 0, 0, 256);
          else
            result = NPC_Create(127, *(_DWORD *)(a1 + 16), *(_DWORD *)(a1 + 20), 0, 0, 1, 0, 256);
          break;
        case 3:
          v7 = &v26 + 4 * *(_BYTE *)(a1 + 56);
          v8 = a1 + 60;
          *(_DWORD *)v8 = *v7;
          *(_DWORD *)(v8 + 4) = v7[1];
          *(_DWORD *)(v8 + 8) = v7[2];
          *(_DWORD *)(v8 + 12) = v7[3];
          result = NPC_Create(128, *(_DWORD *)(a1 + 16), *(_DWORD *)(a1 + 20), 0, 0, *(_BYTE *)(a1 + 56), 0, 256);
          break;
      }
    }
    else
    {
      switch ( a2 )
      {
        case 1:
          v25 = 4096;
          break;
        case 2:
          v25 = 4096;
          break;
        case 3:
          v25 = 4096;
          break;
      }
      *(_DWORD *)(a1 + 40) = 1;
      result = *(_BYTE *)(a1 + 56);
      switch ( result )
      {
        case 0:
          *(_DWORD *)(a1 + 24) = -v25;
          result = RNG_Range(-170, 170);
          *(_DWORD *)(a1 + 28) = result;
          break;
        case 1:
          *(_DWORD *)(a1 + 28) = -v25;
          result = RNG_Range(-170, 170);
          *(_DWORD *)(a1 + 24) = result;
          break;
        case 2:
          *(_DWORD *)(a1 + 24) = v25;
          result = RNG_Range(-170, 170);
          *(_DWORD *)(a1 + 28) = result;
          break;
        case 3:
          *(_DWORD *)(a1 + 28) = v25;
          result = RNG_Range(-170, 170);
          *(_DWORD *)(a1 + 24) = result;
          break;
        default:
          return result;
      }
    }
  }
  else
  {
    *(_DWORD *)(a1 + 12) = 0;
    result = Create_Animated_Effect(*(_DWORD *)(a1 + 16), *(_DWORD *)(a1 + 20), 3, 0);
  }
  return result;
}

//----- (004055A0) --------------------------------------------------------
int __cdecl Bullet_0D_0E_0F_Missile_Launcher(int a1, int a2)
{
  int result; // eax@2
  int *v3; // edx@89
  int *v4; // edx@90
  int *v5; // edx@91
  unsigned int v6; // [sp+10h] [bp-D8h]@47
  int v7; // [sp+1Ch] [bp-CCh]@31
  int v8; // [sp+20h] [bp-C8h]@85
  int v9; // [sp+24h] [bp-C4h]@85
  int v10; // [sp+28h] [bp-C0h]@85
  int v11; // [sp+2Ch] [bp-BCh]@85
  int v12; // [sp+30h] [bp-B8h]@85
  int v13; // [sp+34h] [bp-B4h]@85
  int v14; // [sp+38h] [bp-B0h]@85
  int v15; // [sp+3Ch] [bp-ACh]@85
  int v16; // [sp+40h] [bp-A8h]@85
  int v17; // [sp+44h] [bp-A4h]@85
  int v18; // [sp+48h] [bp-A0h]@85
  int v19; // [sp+4Ch] [bp-9Ch]@85
  int v20; // [sp+50h] [bp-98h]@85
  int v21; // [sp+54h] [bp-94h]@85
  int v22; // [sp+58h] [bp-90h]@85
  int v23; // [sp+5Ch] [bp-8Ch]@85
  int v24; // [sp+60h] [bp-88h]@85
  int v25; // [sp+64h] [bp-84h]@85
  int v26; // [sp+68h] [bp-80h]@85
  int v27; // [sp+6Ch] [bp-7Ch]@85
  int v28; // [sp+70h] [bp-78h]@85
  int v29; // [sp+74h] [bp-74h]@85
  int v30; // [sp+78h] [bp-70h]@85
  int v31; // [sp+7Ch] [bp-6Ch]@85
  int v32; // [sp+80h] [bp-68h]@85
  int v33; // [sp+84h] [bp-64h]@85
  int v34; // [sp+88h] [bp-60h]@85
  int v35; // [sp+8Ch] [bp-5Ch]@85
  int v36; // [sp+90h] [bp-58h]@85
  int v37; // [sp+94h] [bp-54h]@85
  int v38; // [sp+98h] [bp-50h]@85
  int v39; // [sp+9Ch] [bp-4Ch]@85
  int v40; // [sp+A0h] [bp-48h]@85
  int v41; // [sp+A4h] [bp-44h]@85
  int v42; // [sp+A8h] [bp-40h]@85
  int v43; // [sp+ACh] [bp-3Ch]@85
  int v44; // [sp+B0h] [bp-38h]@85
  int v45; // [sp+B4h] [bp-34h]@85
  int v46; // [sp+B8h] [bp-30h]@85
  int v47; // [sp+BCh] [bp-2Ch]@85
  int v48; // [sp+C0h] [bp-28h]@85
  int v49; // [sp+C4h] [bp-24h]@85
  int v50; // [sp+C8h] [bp-20h]@85
  int v51; // [sp+CCh] [bp-1Ch]@85
  int v52; // [sp+D0h] [bp-18h]@85
  int v53; // [sp+D4h] [bp-14h]@85
  int v54; // [sp+D8h] [bp-10h]@85
  int v55; // [sp+DCh] [bp-Ch]@85
  int v56; // [sp+E4h] [bp-4h]@3

  if ( ++*(_DWORD *)(a1 + 76) > *(_DWORD *)(a1 + 84) )
  {
    *(_DWORD *)(a1 + 12) = 0;
    return Create_Animated_Effect(*(_DWORD *)(a1 + 16), *(_DWORD *)(a1 + 20), 3, 0);
  }
  v56 = 0;
  if ( *(_DWORD *)(a1 + 92) != 10 )
    v56 = 1;
  if ( !*(_BYTE *)(a1 + 56) && *(_DWORD *)a1 & 1 )
    v56 = 1;
  if ( *(_BYTE *)(a1 + 56) == 2 && *(_DWORD *)a1 & 4 )
    v56 = 1;
  if ( *(_BYTE *)(a1 + 56) == 1 && *(_DWORD *)a1 & 2 )
    v56 = 1;
  if ( *(_BYTE *)(a1 + 56) == 3 && *(_DWORD *)a1 & 8 )
    v56 = 1;
  if ( !*(_BYTE *)(a1 + 56) && *(_DWORD *)a1 & 0x80 )
    v56 = 1;
  if ( !*(_BYTE *)(a1 + 56) && *(_DWORD *)a1 & 0x20 )
    v56 = 1;
  if ( *(_BYTE *)(a1 + 56) == 2 && *(_DWORD *)a1 & 0x40 )
    v56 = 1;
  if ( *(_BYTE *)(a1 + 56) == 2 && *(_DWORD *)a1 & 0x10 )
    v56 = 1;
  if ( v56 )
  {
    Create_Bullet(a2 + 15, *(_DWORD *)(a1 + 16), *(_DWORD *)(a1 + 20), 0);
    *(_DWORD *)(a1 + 12) = 0;
  }
  v7 = *(_DWORD *)(a1 + 40);
  if ( !v7 )
  {
    *(_DWORD *)(a1 + 40) = 1;
    switch ( *(_BYTE *)(a1 + 56) )
    {
      case 0:
      case 2:
        *(_DWORD *)(a1 + 36) = *(_DWORD *)(a1 + 20);
        break;
      case 1:
      case 3:
        *(_DWORD *)(a1 + 32) = *(_DWORD *)(a1 + 16);
        break;
      default:
        break;
    }
    if ( a2 == 3 )
    {
      switch ( *(_BYTE *)(a1 + 56) )
      {
        case 0:
        case 2:
          if ( *(_DWORD *)(a1 + 20) <= Quote_Y_Position )
            *(_DWORD *)(a1 + 28) = -256;
          else
            *(_DWORD *)(a1 + 28) = 256;
          *(_DWORD *)(a1 + 24) = RNG_Range(-512, 512);
          break;
        case 1:
        case 3:
          if ( *(_DWORD *)(a1 + 16) <= Quote_X_Position )
            *(_DWORD *)(a1 + 24) = -256;
          else
            *(_DWORD *)(a1 + 24) = 256;
          *(_DWORD *)(a1 + 28) = RNG_Range(-512, 512);
          break;
        default:
          break;
      }
      v6 = ++dword_49BC9C % 3u;
      if ( dword_49BC9C % 3u )
      {
        if ( v6 == 1 )
        {
          *(_DWORD *)(a1 + 52) = 64;
        }
        else if ( v6 == 2 )
        {
          *(_DWORD *)(a1 + 52) = 51;
        }
      }
      else
      {
        *(_DWORD *)(a1 + 52) = 128;
      }
    }
    else
    {
      *(_DWORD *)(a1 + 52) = 128;
    }
    goto LABEL_56;
  }
  if ( v7 == 1 )
  {
LABEL_56:
    switch ( *(_BYTE *)(a1 + 56) )
    {
      case 0:
        *(_DWORD *)(a1 + 24) -= *(_DWORD *)(a1 + 52);
        break;
      case 1:
        *(_DWORD *)(a1 + 28) -= *(_DWORD *)(a1 + 52);
        break;
      case 2:
        *(_DWORD *)(a1 + 24) += *(_DWORD *)(a1 + 52);
        break;
      case 3:
        *(_DWORD *)(a1 + 28) += *(_DWORD *)(a1 + 52);
        break;
      default:
        break;
    }
    if ( a2 == 3 )
    {
      switch ( *(_BYTE *)(a1 + 56) )
      {
        case 0:
        case 2:
          if ( *(_DWORD *)(a1 + 20) >= *(_DWORD *)(a1 + 36) )
            *(_DWORD *)(a1 + 28) -= 32;
          else
            *(_DWORD *)(a1 + 28) += 32;
          break;
        case 1:
        case 3:
          if ( *(_DWORD *)(a1 + 16) >= *(_DWORD *)(a1 + 32) )
            *(_DWORD *)(a1 + 24) -= 32;
          else
            *(_DWORD *)(a1 + 24) += 32;
          break;
        default:
          break;
      }
    }
    if ( *(_DWORD *)(a1 + 24) < -2560 )
      *(_DWORD *)(a1 + 24) = -2560;
    if ( *(_DWORD *)(a1 + 24) > 2560 )
      *(_DWORD *)(a1 + 24) = 2560;
    if ( *(_DWORD *)(a1 + 28) < -2560 )
      *(_DWORD *)(a1 + 28) = -2560;
    if ( *(_DWORD *)(a1 + 28) > 2560 )
      *(_DWORD *)(a1 + 28) = 2560;
    *(_DWORD *)(a1 + 16) += *(_DWORD *)(a1 + 24);
    *(_DWORD *)(a1 + 20) += *(_DWORD *)(a1 + 28);
  }
  result = *(_DWORD *)(a1 + 80) + 1;
  *(_DWORD *)(a1 + 80) = result;
  if ( *(_DWORD *)(a1 + 80) > 2 )
  {
    *(_DWORD *)(a1 + 80) = 0;
    result = *(_BYTE *)(a1 + 56);
    switch ( result )
    {
      case 0:
        result = Create_Animated_Effect(*(_DWORD *)(a1 + 16) + 4096, *(_DWORD *)(a1 + 20), 7, 2);
        break;
      case 1:
        result = Create_Animated_Effect(*(_DWORD *)(a1 + 16), *(_DWORD *)(a1 + 20) + 4096, 7, 3);
        break;
      case 2:
        result = Create_Animated_Effect(*(_DWORD *)(a1 + 16) - 4096, *(_DWORD *)(a1 + 20), 7, 0);
        break;
      case 3:
        result = Create_Animated_Effect(*(_DWORD *)(a1 + 16), *(_DWORD *)(a1 + 20) - 4096, 7, 1);
        break;
      default:
        break;
    }
  }
  v40 = 0;
  v41 = 0;
  v42 = 16;
  v43 = 16;
  v44 = 16;
  v45 = 0;
  v46 = 32;
  v47 = 16;
  v48 = 32;
  v49 = 0;
  v50 = 48;
  v51 = 16;
  v52 = 48;
  v53 = 0;
  v54 = 64;
  v55 = 16;
  v8 = 0;
  v9 = 16;
  v10 = 16;
  v11 = 32;
  v12 = 16;
  v13 = 16;
  v14 = 32;
  v15 = 32;
  v16 = 32;
  v17 = 16;
  v18 = 48;
  v19 = 32;
  v20 = 48;
  v21 = 16;
  v22 = 64;
  v23 = 32;
  v24 = 0;
  v25 = 32;
  v26 = 16;
  v27 = 48;
  v28 = 16;
  v29 = 32;
  v30 = 32;
  v31 = 48;
  v32 = 32;
  v33 = 32;
  v34 = 48;
  v35 = 48;
  v36 = 48;
  v37 = 32;
  v38 = 64;
  v39 = 48;
  switch ( a2 )
  {
    case 1:
      v3 = &v40 + 4 * *(_BYTE *)(a1 + 56);
      result = a1 + 60;
      *(_DWORD *)result = *v3;
      *(_DWORD *)(result + 4) = v3[1];
      *(_DWORD *)(result + 8) = v3[2];
      *(_DWORD *)(result + 12) = v3[3];
      break;
    case 2:
      v4 = &v8 + 4 * *(_BYTE *)(a1 + 56);
      result = a1 + 60;
      *(_DWORD *)result = *v4;
      *(_DWORD *)(result + 4) = v4[1];
      *(_DWORD *)(result + 8) = v4[2];
      *(_DWORD *)(result + 12) = v4[3];
      break;
    case 3:
      v5 = &v24 + 4 * *(_BYTE *)(a1 + 56);
      result = a1 + 60;
      *(_DWORD *)result = *v5;
      *(_DWORD *)(result + 4) = v5[1];
      *(_DWORD *)(result + 8) = v5[2];
      *(_DWORD *)(result + 12) = v5[3];
      break;
  }
  return result;
}
// 49BC9C: using guessed type int dword_49BC9C;

//----- (00405D80) --------------------------------------------------------
int __cdecl Bullet_10_11_12_Missile_Explosion(int a1, int a2)
{
  int result; // eax@1
  int v3; // ST0C_4@17
  int v4; // ST08_4@17
  int v5; // eax@17
  int v6; // ST0C_4@20
  int v7; // ST08_4@20
  int v8; // eax@20
  int v9; // ST0C_4@23
  int v10; // ST08_4@23
  int v11; // eax@23
  int v12; // [sp+8h] [bp-4h]@1

  result = a1;
  v12 = *(_DWORD *)(a1 + 40);
  if ( v12 )
  {
    if ( v12 != 1 )
      return result;
  }
  else
  {
    *(_DWORD *)(a1 + 40) = 1;
    switch ( a2 )
    {
      case 1:
        *(_DWORD *)(a1 + 44) = 10;
        break;
      case 2:
        *(_DWORD *)(a1 + 44) = 15;
        break;
      case 3:
        *(_DWORD *)(a1 + 44) = 5;
        break;
    }
    Play_Sound_Effect(44, 1);
  }
  if ( a2 == 1 )
  {
    if ( !(*(_DWORD *)(a1 + 44) % 3) )
    {
      v3 = *(_DWORD *)(a1 + 96);
      v4 = *(_DWORD *)(a1 + 20) + (RNG_Range(-16, 16) << 9);
      v5 = RNG_Range(-16, 16);
      sub_46F200(*(_DWORD *)(a1 + 16) + (v5 << 9), v4, v3, 2);
    }
  }
  else if ( a2 == 2 )
  {
    if ( !(*(_DWORD *)(a1 + 44) % 3) )
    {
      v6 = *(_DWORD *)(a1 + 96);
      v7 = *(_DWORD *)(a1 + 20) + (RNG_Range(-32, 32) << 9);
      v8 = RNG_Range(-32, 32);
      sub_46F200(*(_DWORD *)(a1 + 16) + (v8 << 9), v7, v6, 2);
    }
  }
  else if ( a2 == 3 && !(*(_DWORD *)(a1 + 44) % 3) )
  {
    v9 = *(_DWORD *)(a1 + 96);
    v10 = *(_DWORD *)(a1 + 20) + (RNG_Range(-40, 40) << 9);
    v11 = RNG_Range(-40, 40);
    sub_46F200(*(_DWORD *)(a1 + 16) + (v11 << 9), v10, v9, 2);
  }
  --*(_DWORD *)(a1 + 44);
  result = a1;
  if ( *(_DWORD *)(a1 + 44) < 0 )
    *(_DWORD *)(a1 + 12) = 0;
  return result;
}

//----- (00405F30) --------------------------------------------------------
int __cdecl Bullet_13_Bubbler_Lvl1(int a1)
{
  int result; // eax@2
  int *v2; // ecx@20
  int v3; // edx@20
  int v4; // [sp+Ch] [bp-40h]@16
  int v5; // [sp+10h] [bp-3Ch]@16
  int v6; // [sp+14h] [bp-38h]@16
  int v7; // [sp+18h] [bp-34h]@16
  int v8; // [sp+1Ch] [bp-30h]@16
  int v9; // [sp+20h] [bp-2Ch]@16
  int v10; // [sp+24h] [bp-28h]@16
  int v11; // [sp+28h] [bp-24h]@16
  int v12; // [sp+2Ch] [bp-20h]@16
  int v13; // [sp+30h] [bp-1Ch]@16
  int v14; // [sp+34h] [bp-18h]@16
  int v15; // [sp+38h] [bp-14h]@16
  int v16; // [sp+3Ch] [bp-10h]@16
  int v17; // [sp+40h] [bp-Ch]@16
  int v18; // [sp+44h] [bp-8h]@16
  int v19; // [sp+48h] [bp-4h]@16

  if ( *(_DWORD *)a1 & 0x2FF )
  {
    *(_DWORD *)(a1 + 12) = 0;
    result = Create_Animated_Effect(*(_DWORD *)(a1 + 16), *(_DWORD *)(a1 + 20), 2, 0);
  }
  else
  {
    if ( !*(_DWORD *)(a1 + 40) )
    {
      *(_DWORD *)(a1 + 40) = 1;
      switch ( *(_BYTE *)(a1 + 56) )
      {
        case 0:
          *(_DWORD *)(a1 + 24) = -1536;
          break;
        case 2:
          *(_DWORD *)(a1 + 24) = 1536;
          break;
        case 1:
          *(_DWORD *)(a1 + 28) = -1536;
          break;
        case 3:
          *(_DWORD *)(a1 + 28) = 1536;
          break;
        default:
          break;
      }
    }
    switch ( *(_BYTE *)(a1 + 56) )
    {
      case 0:
        *(_DWORD *)(a1 + 24) += 42;
        break;
      case 2:
        *(_DWORD *)(a1 + 24) -= 42;
        break;
      case 1:
        *(_DWORD *)(a1 + 28) += 42;
        break;
      case 3:
        *(_DWORD *)(a1 + 28) -= 42;
        break;
      default:
        break;
    }
    *(_DWORD *)(a1 + 16) += *(_DWORD *)(a1 + 24);
    *(_DWORD *)(a1 + 20) += *(_DWORD *)(a1 + 28);
    if ( ++*(_DWORD *)(a1 + 44) > 40 )
    {
      *(_DWORD *)(a1 + 12) = 0;
      Create_Animated_Effect(*(_DWORD *)(a1 + 16), *(_DWORD *)(a1 + 20), 15, 0);
    }
    v4 = 192;
    v5 = 0;
    v6 = 200;
    v7 = 8;
    v8 = 200;
    v9 = 0;
    v10 = 208;
    v11 = 8;
    v12 = 208;
    v13 = 0;
    v14 = 216;
    v15 = 8;
    v16 = 216;
    v17 = 0;
    v18 = 224;
    v19 = 8;
    if ( ++*(_DWORD *)(a1 + 48) > 3 )
    {
      *(_DWORD *)(a1 + 48) = 0;
      ++*(_DWORD *)(a1 + 52);
    }
    if ( *(_DWORD *)(a1 + 52) > 3 )
      *(_DWORD *)(a1 + 52) = 3;
    v2 = &v4 + 4 * *(_DWORD *)(a1 + 52);
    v3 = a1 + 60;
    *(_DWORD *)v3 = *v2;
    *(_DWORD *)(v3 + 4) = v2[1];
    result = v2[2];
    *(_DWORD *)(v3 + 8) = result;
    *(_DWORD *)(v3 + 12) = v2[3];
  }
  return result;
}

//----- (00406190) --------------------------------------------------------
int __cdecl Bullet_14_Bubbler_Lvl2(int a1)
{
  int result; // eax@14
  int *v2; // ecx@32
  int v3; // edx@32
  signed int v4; // [sp+Ch] [bp-44h]@1
  int v5; // [sp+10h] [bp-40h]@28
  int v6; // [sp+14h] [bp-3Ch]@28
  int v7; // [sp+18h] [bp-38h]@28
  int v8; // [sp+1Ch] [bp-34h]@28
  int v9; // [sp+20h] [bp-30h]@28
  int v10; // [sp+24h] [bp-2Ch]@28
  int v11; // [sp+28h] [bp-28h]@28
  int v12; // [sp+2Ch] [bp-24h]@28
  int v13; // [sp+30h] [bp-20h]@28
  int v14; // [sp+34h] [bp-1Ch]@28
  int v15; // [sp+38h] [bp-18h]@28
  int v16; // [sp+3Ch] [bp-14h]@28
  int v17; // [sp+40h] [bp-10h]@28
  int v18; // [sp+44h] [bp-Ch]@28
  int v19; // [sp+48h] [bp-8h]@28
  int v20; // [sp+4Ch] [bp-4h]@28

  v4 = 0;
  if ( !*(_BYTE *)(a1 + 56) && *(_DWORD *)a1 & 1 )
    v4 = 1;
  if ( *(_BYTE *)(a1 + 56) == 2 && *(_DWORD *)a1 & 4 )
    v4 = 1;
  if ( *(_BYTE *)(a1 + 56) == 1 && *(_DWORD *)a1 & 2 )
    v4 = 1;
  if ( *(_BYTE *)(a1 + 56) == 3 && *(_DWORD *)a1 & 8 )
    v4 = 1;
  if ( v4 )
  {
    *(_DWORD *)(a1 + 12) = 0;
    result = Create_Animated_Effect(*(_DWORD *)(a1 + 16), *(_DWORD *)(a1 + 20), 2, 0);
  }
  else
  {
    if ( !*(_DWORD *)(a1 + 40) )
    {
      *(_DWORD *)(a1 + 40) = 1;
      switch ( *(_BYTE *)(a1 + 56) )
      {
        case 0:
          *(_DWORD *)(a1 + 24) = -1536;
          *(_DWORD *)(a1 + 28) = RNG_Range(-256, 256);
          break;
        case 2:
          *(_DWORD *)(a1 + 24) = 1536;
          *(_DWORD *)(a1 + 28) = RNG_Range(-256, 256);
          break;
        case 1:
          *(_DWORD *)(a1 + 28) = -1536;
          *(_DWORD *)(a1 + 24) = RNG_Range(-256, 256);
          break;
        case 3:
          *(_DWORD *)(a1 + 28) = 1536;
          *(_DWORD *)(a1 + 24) = RNG_Range(-256, 256);
          break;
        default:
          break;
      }
    }
    switch ( *(_BYTE *)(a1 + 56) )
    {
      case 0:
        *(_DWORD *)(a1 + 24) += 16;
        break;
      case 2:
        *(_DWORD *)(a1 + 24) -= 16;
        break;
      case 1:
        *(_DWORD *)(a1 + 28) += 16;
        break;
      case 3:
        *(_DWORD *)(a1 + 28) -= 16;
        break;
      default:
        break;
    }
    *(_DWORD *)(a1 + 16) += *(_DWORD *)(a1 + 24);
    *(_DWORD *)(a1 + 20) += *(_DWORD *)(a1 + 28);
    if ( ++*(_DWORD *)(a1 + 44) > 60 )
    {
      *(_DWORD *)(a1 + 12) = 0;
      Create_Animated_Effect(*(_DWORD *)(a1 + 16), *(_DWORD *)(a1 + 20), 15, 0);
    }
    v5 = 192;
    v6 = 8;
    v7 = 200;
    v8 = 16;
    v9 = 200;
    v10 = 8;
    v11 = 208;
    v12 = 16;
    v13 = 208;
    v14 = 8;
    v15 = 216;
    v16 = 16;
    v17 = 216;
    v18 = 8;
    v19 = 224;
    v20 = 16;
    if ( ++*(_DWORD *)(a1 + 48) > 3 )
    {
      *(_DWORD *)(a1 + 48) = 0;
      ++*(_DWORD *)(a1 + 52);
    }
    if ( *(_DWORD *)(a1 + 52) > 3 )
      *(_DWORD *)(a1 + 52) = 3;
    v2 = &v5 + 4 * *(_DWORD *)(a1 + 52);
    v3 = a1 + 60;
    *(_DWORD *)v3 = *v2;
    *(_DWORD *)(v3 + 4) = v2[1];
    result = v2[2];
    *(_DWORD *)(v3 + 8) = result;
    *(_DWORD *)(v3 + 12) = v2[3];
  }
  return result;
}

//----- (004064D0) --------------------------------------------------------
int __cdecl Bullet_15_Bubbler_Lvl3(int a1)
{
  int result; // eax@4
  int *v2; // ecx@39
  int v3; // edx@39
  int v4; // [sp+8h] [bp-40h]@35
  int v5; // [sp+Ch] [bp-3Ch]@35
  int v6; // [sp+10h] [bp-38h]@35
  int v7; // [sp+14h] [bp-34h]@35
  int v8; // [sp+18h] [bp-30h]@35
  int v9; // [sp+1Ch] [bp-2Ch]@35
  int v10; // [sp+20h] [bp-28h]@35
  int v11; // [sp+24h] [bp-24h]@35
  int v12; // [sp+28h] [bp-20h]@35
  int v13; // [sp+2Ch] [bp-1Ch]@35
  int v14; // [sp+30h] [bp-18h]@35
  int v15; // [sp+34h] [bp-14h]@35
  int v16; // [sp+38h] [bp-10h]@35
  int v17; // [sp+3Ch] [bp-Ch]@35
  int v18; // [sp+40h] [bp-8h]@35
  int v19; // [sp+44h] [bp-4h]@35

  if ( ++*(_DWORD *)(a1 + 44) <= 100 && Key_For_Shoot_Duplicate & Key_Held )
  {
    if ( !*(_DWORD *)(a1 + 40) )
    {
      *(_DWORD *)(a1 + 40) = 1;
      switch ( *(_BYTE *)(a1 + 56) )
      {
        case 0:
          *(_DWORD *)(a1 + 24) = RNG_Range(-1024, -512);
          *(_DWORD *)(a1 + 28) = (RNG_Range(-4, 4) << 9) / 2;
          break;
        case 2:
          *(_DWORD *)(a1 + 24) = RNG_Range(512, 1024);
          *(_DWORD *)(a1 + 28) = (RNG_Range(-4, 4) << 9) / 2;
          break;
        case 1:
          *(_DWORD *)(a1 + 28) = RNG_Range(-1024, -512);
          *(_DWORD *)(a1 + 24) = (RNG_Range(-4, 4) << 9) / 2;
          break;
        case 3:
          *(_DWORD *)(a1 + 28) = RNG_Range(128, 256);
          *(_DWORD *)(a1 + 24) = (RNG_Range(-4, 4) << 9) / 2;
          break;
        default:
          break;
      }
    }
    if ( *(_DWORD *)(a1 + 16) < Quote_X_Position )
      *(_DWORD *)(a1 + 24) += 32;
    if ( *(_DWORD *)(a1 + 16) > Quote_X_Position )
      *(_DWORD *)(a1 + 24) -= 32;
    if ( *(_DWORD *)(a1 + 20) < Quote_Y_Position )
      *(_DWORD *)(a1 + 28) += 32;
    if ( *(_DWORD *)(a1 + 20) > Quote_Y_Position )
      *(_DWORD *)(a1 + 28) -= 32;
    if ( *(_DWORD *)(a1 + 24) < 0 && *(_DWORD *)a1 & 1 )
      *(_DWORD *)(a1 + 24) = 1024;
    if ( *(_DWORD *)(a1 + 24) > 0 && *(_DWORD *)a1 & 4 )
      *(_DWORD *)(a1 + 24) = -1024;
    if ( *(_DWORD *)(a1 + 28) < 0 && *(_DWORD *)a1 & 2 )
      *(_DWORD *)(a1 + 28) = 1024;
    if ( *(_DWORD *)(a1 + 28) > 0 && *(_DWORD *)a1 & 8 )
      *(_DWORD *)(a1 + 28) = -1024;
    *(_DWORD *)(a1 + 16) += *(_DWORD *)(a1 + 24);
    *(_DWORD *)(a1 + 20) += *(_DWORD *)(a1 + 28);
    v4 = 240;
    v5 = 16;
    v6 = 248;
    v7 = 24;
    v8 = 248;
    v9 = 16;
    v10 = 256;
    v11 = 24;
    v12 = 240;
    v13 = 24;
    v14 = 248;
    v15 = 32;
    v16 = 248;
    v17 = 24;
    v18 = 256;
    v19 = 32;
    if ( ++*(_DWORD *)(a1 + 48) > 3 )
    {
      *(_DWORD *)(a1 + 48) = 0;
      ++*(_DWORD *)(a1 + 52);
    }
    if ( *(_DWORD *)(a1 + 52) > 3 )
      *(_DWORD *)(a1 + 52) = 3;
    v2 = &v4 + 4 * *(_DWORD *)(a1 + 52);
    v3 = a1 + 60;
    *(_DWORD *)v3 = *v2;
    *(_DWORD *)(v3 + 4) = v2[1];
    result = v2[2];
    *(_DWORD *)(v3 + 8) = result;
    *(_DWORD *)(v3 + 12) = v2[3];
  }
  else
  {
    *(_DWORD *)(a1 + 12) = 0;
    Create_Animated_Effect(*(_DWORD *)(a1 + 16), *(_DWORD *)(a1 + 20), 2, 0);
    Play_Sound_Effect(100, 1);
    if ( Quote_IsFacingUp )
    {
      result = Create_Bullet(22, *(_DWORD *)(a1 + 16), *(_DWORD *)(a1 + 20), 1);
    }
    else if ( Quote_IsFacingDown )
    {
      result = Create_Bullet(22, *(_DWORD *)(a1 + 16), *(_DWORD *)(a1 + 20), 3);
    }
    else
    {
      result = Create_Bullet(22, *(_DWORD *)(a1 + 16), *(_DWORD *)(a1 + 20), Quote_Direction_Faced);
    }
  }
  return result;
}
// 493614: using guessed type int Key_For_Shoot_Duplicate;
// 49E210: using guessed type int Key_Held;
// 49E644: using guessed type int Quote_IsFacingUp;
// 49E648: using guessed type int Quote_IsFacingDown;

//----- (004068B0) --------------------------------------------------------
int __cdecl Bullet_16_Bubble_Spurs(int a1)
{
  int result; // eax@3
  int *v2; // edx@17
  int *v3; // edx@18
  int *v4; // edx@19
  int *v5; // edx@20
  int v6; // [sp+8h] [bp-60h]@16
  int v7; // [sp+Ch] [bp-5Ch]@16
  int v8; // [sp+10h] [bp-58h]@16
  int v9; // [sp+14h] [bp-54h]@16
  int v10; // [sp+18h] [bp-50h]@16
  int v11; // [sp+1Ch] [bp-4Ch]@16
  int v12; // [sp+20h] [bp-48h]@16
  int v13; // [sp+24h] [bp-44h]@16
  int v14; // [sp+28h] [bp-40h]@16
  int v15; // [sp+2Ch] [bp-3Ch]@16
  int v16; // [sp+30h] [bp-38h]@16
  int v17; // [sp+34h] [bp-34h]@16
  int v18; // [sp+38h] [bp-30h]@16
  int v19; // [sp+3Ch] [bp-2Ch]@16
  int v20; // [sp+40h] [bp-28h]@16
  int v21; // [sp+44h] [bp-24h]@16
  int v22; // [sp+48h] [bp-20h]@16
  int v23; // [sp+4Ch] [bp-1Ch]@16
  int v24; // [sp+50h] [bp-18h]@16
  int v25; // [sp+54h] [bp-14h]@16
  int v26; // [sp+58h] [bp-10h]@16
  int v27; // [sp+5Ch] [bp-Ch]@16
  int v28; // [sp+60h] [bp-8h]@16
  int v29; // [sp+64h] [bp-4h]@16

  if ( ++*(_DWORD *)(a1 + 76) > *(_DWORD *)(a1 + 84) || *(_DWORD *)a1 & 8 )
  {
    *(_DWORD *)(a1 + 12) = 0;
    result = Create_Animated_Effect(*(_DWORD *)(a1 + 16), *(_DWORD *)(a1 + 20), 3, 0);
  }
  else
  {
    if ( *(_DWORD *)(a1 + 40) )
    {
      *(_DWORD *)(a1 + 16) += *(_DWORD *)(a1 + 24);
      *(_DWORD *)(a1 + 20) += *(_DWORD *)(a1 + 28);
    }
    else
    {
      *(_DWORD *)(a1 + 40) = 1;
      switch ( *(_BYTE *)(a1 + 56) )
      {
        case 0:
          *(_DWORD *)(a1 + 24) = -512 * RNG_Range(10, 16) / 2;
          break;
        case 1:
          *(_DWORD *)(a1 + 28) = -512 * RNG_Range(10, 16) / 2;
          break;
        case 2:
          *(_DWORD *)(a1 + 24) = (RNG_Range(10, 16) << 9) / 2;
          break;
        case 3:
          *(_DWORD *)(a1 + 28) = (RNG_Range(10, 16) << 9) / 2;
          break;
        default:
          break;
      }
    }
    if ( ++*(_DWORD *)(a1 + 48) > 1 )
    {
      *(_DWORD *)(a1 + 48) = 0;
      ++*(_DWORD *)(a1 + 52);
    }
    if ( *(_DWORD *)(a1 + 52) > 1 )
      *(_DWORD *)(a1 + 52) = 0;
    v22 = 224;
    v23 = 0;
    v24 = 232;
    v25 = 8;
    v26 = 232;
    v27 = 0;
    v28 = 240;
    v29 = 8;
    v14 = 224;
    v15 = 0;
    v16 = 232;
    v17 = 8;
    v18 = 232;
    v19 = 0;
    v20 = 240;
    v21 = 8;
    v6 = 224;
    v7 = 8;
    v8 = 232;
    v9 = 16;
    v10 = 232;
    v11 = 8;
    v12 = 240;
    v13 = 16;
    result = a1;
    switch ( *(_BYTE *)(a1 + 56) )
    {
      case 0:
        v2 = &v22 + 4 * *(_DWORD *)(a1 + 52);
        result = a1 + 60;
        *(_DWORD *)result = *v2;
        *(_DWORD *)(result + 4) = v2[1];
        *(_DWORD *)(result + 8) = v2[2];
        *(_DWORD *)(result + 12) = v2[3];
        break;
      case 1:
        v3 = &v6 + 4 * *(_DWORD *)(a1 + 52);
        result = a1 + 60;
        *(_DWORD *)result = *v3;
        *(_DWORD *)(result + 4) = v3[1];
        *(_DWORD *)(result + 8) = v3[2];
        *(_DWORD *)(result + 12) = v3[3];
        break;
      case 2:
        v4 = &v14 + 4 * *(_DWORD *)(a1 + 52);
        result = a1 + 60;
        *(_DWORD *)result = *v4;
        *(_DWORD *)(result + 4) = v4[1];
        *(_DWORD *)(result + 8) = v4[2];
        *(_DWORD *)(result + 12) = v4[3];
        break;
      case 3:
        v5 = &v6 + 4 * *(_DWORD *)(a1 + 52);
        result = a1 + 60;
        *(_DWORD *)result = *v5;
        *(_DWORD *)(result + 4) = v5[1];
        *(_DWORD *)(result + 8) = v5[2];
        *(_DWORD *)(result + 12) = v5[3];
        break;
      default:
        return result;
    }
  }
  return result;
}

//----- (00406BB0) --------------------------------------------------------
int __cdecl Bullet_19_Blade_Lvl1(int a1)
{
  int result; // eax@2
  int *v2; // eax@20
  int v3; // ecx@20
  int *v4; // eax@21
  int v5; // ecx@21
  int v6; // [sp+4h] [bp-80h]@15
  int v7; // [sp+8h] [bp-7Ch]@15
  int v8; // [sp+Ch] [bp-78h]@15
  int v9; // [sp+10h] [bp-74h]@15
  int v10; // [sp+14h] [bp-70h]@15
  int v11; // [sp+18h] [bp-6Ch]@15
  int v12; // [sp+1Ch] [bp-68h]@15
  int v13; // [sp+20h] [bp-64h]@15
  int v14; // [sp+24h] [bp-60h]@15
  int v15; // [sp+28h] [bp-5Ch]@15
  int v16; // [sp+2Ch] [bp-58h]@15
  int v17; // [sp+30h] [bp-54h]@15
  int v18; // [sp+34h] [bp-50h]@15
  int v19; // [sp+38h] [bp-4Ch]@15
  int v20; // [sp+3Ch] [bp-48h]@15
  int v21; // [sp+40h] [bp-44h]@15
  int v22; // [sp+44h] [bp-40h]@15
  int v23; // [sp+48h] [bp-3Ch]@15
  int v24; // [sp+4Ch] [bp-38h]@15
  int v25; // [sp+50h] [bp-34h]@15
  int v26; // [sp+54h] [bp-30h]@15
  int v27; // [sp+58h] [bp-2Ch]@15
  int v28; // [sp+5Ch] [bp-28h]@15
  int v29; // [sp+60h] [bp-24h]@15
  int v30; // [sp+64h] [bp-20h]@15
  int v31; // [sp+68h] [bp-1Ch]@15
  int v32; // [sp+6Ch] [bp-18h]@15
  int v33; // [sp+70h] [bp-14h]@15
  int v34; // [sp+74h] [bp-10h]@15
  int v35; // [sp+78h] [bp-Ch]@15
  int v36; // [sp+7Ch] [bp-8h]@15
  int v37; // [sp+80h] [bp-4h]@15

  if ( ++*(_DWORD *)(a1 + 76) <= *(_DWORD *)(a1 + 84) )
  {
    if ( *(_DWORD *)(a1 + 76) == 3 )
      *(_DWORD *)(a1 + 8) &= 0xFFFFFFFB;
    if ( *(_DWORD *)(a1 + 76) % 5 == 1 )
      Play_Sound_Effect(34, 1);
    if ( *(_DWORD *)(a1 + 40) )
    {
      *(_DWORD *)(a1 + 16) += *(_DWORD *)(a1 + 24);
      *(_DWORD *)(a1 + 20) += *(_DWORD *)(a1 + 28);
    }
    else
    {
      *(_DWORD *)(a1 + 40) = 1;
      switch ( *(_BYTE *)(a1 + 56) )
      {
        case 0:
          *(_DWORD *)(a1 + 24) = -2048;
          break;
        case 1:
          *(_DWORD *)(a1 + 28) = -2048;
          break;
        case 2:
          *(_DWORD *)(a1 + 24) = 2048;
          break;
        case 3:
          *(_DWORD *)(a1 + 28) = 2048;
          break;
        default:
          break;
      }
    }
    v22 = 0;
    v23 = 48;
    v24 = 16;
    v25 = 64;
    v26 = 16;
    v27 = 48;
    v28 = 32;
    v29 = 64;
    v30 = 32;
    v31 = 48;
    v32 = 48;
    v33 = 64;
    v34 = 48;
    v35 = 48;
    v36 = 64;
    v37 = 64;
    v6 = 64;
    v7 = 48;
    v8 = 80;
    v9 = 64;
    v10 = 80;
    v11 = 48;
    v12 = 96;
    v13 = 64;
    v14 = 96;
    v15 = 48;
    v16 = 112;
    v17 = 64;
    v18 = 112;
    v19 = 48;
    v20 = 128;
    v21 = 64;
    if ( ++*(_DWORD *)(a1 + 48) > 1 )
    {
      *(_DWORD *)(a1 + 48) = 0;
      ++*(_DWORD *)(a1 + 52);
    }
    if ( *(_DWORD *)(a1 + 52) > 3 )
      *(_DWORD *)(a1 + 52) = 0;
    if ( *(_BYTE *)(a1 + 56) )
    {
      v4 = &v6 + 4 * *(_DWORD *)(a1 + 52);
      v5 = a1 + 60;
      *(_DWORD *)v5 = *v4;
      *(_DWORD *)(v5 + 4) = v4[1];
      *(_DWORD *)(v5 + 8) = v4[2];
      result = v4[3];
      *(_DWORD *)(v5 + 12) = result;
    }
    else
    {
      v2 = &v22 + 4 * *(_DWORD *)(a1 + 52);
      v3 = a1 + 60;
      *(_DWORD *)v3 = *v2;
      *(_DWORD *)(v3 + 4) = v2[1];
      *(_DWORD *)(v3 + 8) = v2[2];
      result = v2[3];
      *(_DWORD *)(v3 + 12) = result;
    }
  }
  else
  {
    *(_DWORD *)(a1 + 12) = 0;
    result = Create_Animated_Effect(*(_DWORD *)(a1 + 16), *(_DWORD *)(a1 + 20), 3, 0);
  }
  return result;
}

//----- (00406E60) --------------------------------------------------------
int __cdecl Bullet_1A_BladeLevel2(int a1)
{
  int result; // eax@2
  int *v2; // eax@20
  int v3; // ecx@20
  int *v4; // eax@21
  int v5; // ecx@21
  int v6; // [sp+4h] [bp-80h]@15
  int v7; // [sp+8h] [bp-7Ch]@15
  int v8; // [sp+Ch] [bp-78h]@15
  int v9; // [sp+10h] [bp-74h]@15
  int v10; // [sp+14h] [bp-70h]@15
  int v11; // [sp+18h] [bp-6Ch]@15
  int v12; // [sp+1Ch] [bp-68h]@15
  int v13; // [sp+20h] [bp-64h]@15
  int v14; // [sp+24h] [bp-60h]@15
  int v15; // [sp+28h] [bp-5Ch]@15
  int v16; // [sp+2Ch] [bp-58h]@15
  int v17; // [sp+30h] [bp-54h]@15
  int v18; // [sp+34h] [bp-50h]@15
  int v19; // [sp+38h] [bp-4Ch]@15
  int v20; // [sp+3Ch] [bp-48h]@15
  int v21; // [sp+40h] [bp-44h]@15
  int v22; // [sp+44h] [bp-40h]@15
  int v23; // [sp+48h] [bp-3Ch]@15
  int v24; // [sp+4Ch] [bp-38h]@15
  int v25; // [sp+50h] [bp-34h]@15
  int v26; // [sp+54h] [bp-30h]@15
  int v27; // [sp+58h] [bp-2Ch]@15
  int v28; // [sp+5Ch] [bp-28h]@15
  int v29; // [sp+60h] [bp-24h]@15
  int v30; // [sp+64h] [bp-20h]@15
  int v31; // [sp+68h] [bp-1Ch]@15
  int v32; // [sp+6Ch] [bp-18h]@15
  int v33; // [sp+70h] [bp-14h]@15
  int v34; // [sp+74h] [bp-10h]@15
  int v35; // [sp+78h] [bp-Ch]@15
  int v36; // [sp+7Ch] [bp-8h]@15
  int v37; // [sp+80h] [bp-4h]@15

  if ( ++*(_DWORD *)(a1 + 76) <= *(_DWORD *)(a1 + 84) )
  {
    if ( *(_DWORD *)(a1 + 76) == 3 )
      *(_DWORD *)(a1 + 8) &= 0xFFFFFFFB;
    if ( *(_DWORD *)(a1 + 76) % 7 == 1 )
      Play_Sound_Effect(106, 1);
    if ( *(_DWORD *)(a1 + 40) )
    {
      *(_DWORD *)(a1 + 16) += *(_DWORD *)(a1 + 24);
      *(_DWORD *)(a1 + 20) += *(_DWORD *)(a1 + 28);
    }
    else
    {
      *(_DWORD *)(a1 + 40) = 1;
      switch ( *(_BYTE *)(a1 + 56) )
      {
        case 0:
          *(_DWORD *)(a1 + 24) = -2048;
          break;
        case 1:
          *(_DWORD *)(a1 + 28) = -2048;
          break;
        case 2:
          *(_DWORD *)(a1 + 24) = 2048;
          break;
        case 3:
          *(_DWORD *)(a1 + 28) = 2048;
          break;
        default:
          break;
      }
    }
    v22 = 160;
    v23 = 48;
    v24 = 184;
    v25 = 72;
    v26 = 184;
    v27 = 48;
    v28 = 208;
    v29 = 72;
    v30 = 208;
    v31 = 48;
    v32 = 232;
    v33 = 72;
    v34 = 232;
    v35 = 48;
    v36 = 256;
    v37 = 72;
    v6 = 160;
    v7 = 72;
    v8 = 184;
    v9 = 96;
    v10 = 184;
    v11 = 72;
    v12 = 208;
    v13 = 96;
    v14 = 208;
    v15 = 72;
    v16 = 232;
    v17 = 96;
    v18 = 232;
    v19 = 72;
    v20 = 256;
    v21 = 96;
    if ( ++*(_DWORD *)(a1 + 48) > 1 )
    {
      *(_DWORD *)(a1 + 48) = 0;
      ++*(_DWORD *)(a1 + 52);
    }
    if ( *(_DWORD *)(a1 + 52) > 3 )
      *(_DWORD *)(a1 + 52) = 0;
    if ( *(_BYTE *)(a1 + 56) )
    {
      v4 = &v6 + 4 * *(_DWORD *)(a1 + 52);
      v5 = a1 + 60;
      *(_DWORD *)v5 = *v4;
      *(_DWORD *)(v5 + 4) = v4[1];
      *(_DWORD *)(v5 + 8) = v4[2];
      result = v4[3];
      *(_DWORD *)(v5 + 12) = result;
    }
    else
    {
      v2 = &v22 + 4 * *(_DWORD *)(a1 + 52);
      v3 = a1 + 60;
      *(_DWORD *)v3 = *v2;
      *(_DWORD *)(v3 + 4) = v2[1];
      *(_DWORD *)(v3 + 8) = v2[2];
      result = v2[3];
      *(_DWORD *)(v3 + 12) = result;
    }
  }
  else
  {
    *(_DWORD *)(a1 + 12) = 0;
    result = Create_Animated_Effect(*(_DWORD *)(a1 + 16), *(_DWORD *)(a1 + 20), 3, 0);
  }
  return result;
}

//----- (00407110) --------------------------------------------------------
int __cdecl Bullet_1B_BladeLevel3(int a1)
{
  int result; // eax@20
  int v2; // ST08_4@24
  int v3; // eax@24
  int v4; // ST08_4@25
  int v5; // eax@25
  int *v6; // eax@29
  int v7; // ecx@29
  int *v8; // eax@30
  int v9; // ecx@30
  int *v10; // eax@31
  int v11; // ecx@31
  int *v12; // eax@32
  int v13; // ecx@32
  int v14; // [sp+8h] [bp-84h]@1
  int v15; // [sp+Ch] [bp-80h]@1
  int v16; // [sp+10h] [bp-7Ch]@1
  int v17; // [sp+14h] [bp-78h]@1
  int v18; // [sp+18h] [bp-74h]@1
  int v19; // [sp+1Ch] [bp-70h]@1
  int v20; // [sp+20h] [bp-6Ch]@1
  int v21; // [sp+24h] [bp-68h]@1
  int v22; // [sp+28h] [bp-64h]@1
  int v23; // [sp+2Ch] [bp-60h]@1
  int v24; // [sp+30h] [bp-5Ch]@1
  int v25; // [sp+34h] [bp-58h]@1
  int v26; // [sp+38h] [bp-54h]@1
  int v27; // [sp+3Ch] [bp-50h]@1
  int v28; // [sp+40h] [bp-4Ch]@1
  int v29; // [sp+44h] [bp-48h]@1
  int v30; // [sp+48h] [bp-44h]@1
  int v31; // [sp+4Ch] [bp-40h]@1
  int v32; // [sp+50h] [bp-3Ch]@1
  int v33; // [sp+54h] [bp-38h]@1
  int v34; // [sp+58h] [bp-34h]@1
  int v35; // [sp+5Ch] [bp-30h]@1
  int v36; // [sp+60h] [bp-2Ch]@1
  int v37; // [sp+64h] [bp-28h]@1
  int v38; // [sp+68h] [bp-24h]@1
  int v39; // [sp+6Ch] [bp-20h]@1
  int v40; // [sp+70h] [bp-1Ch]@1
  int v41; // [sp+74h] [bp-18h]@1
  int v42; // [sp+78h] [bp-14h]@1
  int v43; // [sp+7Ch] [bp-10h]@1
  int v44; // [sp+80h] [bp-Ch]@1
  int v45; // [sp+84h] [bp-8h]@1
  int v46; // [sp+88h] [bp-4h]@1

  v31 = 272;
  v32 = 0;
  v33 = 296;
  v34 = 24;
  v35 = 296;
  v36 = 0;
  v37 = 320;
  v38 = 24;
  v39 = 272;
  v40 = 48;
  v41 = 296;
  v42 = 72;
  v43 = 296;
  v44 = 0;
  v45 = 320;
  v46 = 24;
  v23 = 272;
  v24 = 24;
  v25 = 296;
  v26 = 48;
  v27 = 296;
  v28 = 24;
  v29 = 320;
  v30 = 48;
  v15 = 296;
  v16 = 48;
  v17 = 320;
  v18 = 72;
  v19 = 296;
  v20 = 24;
  v21 = 320;
  v22 = 48;
  v14 = *(_DWORD *)(a1 + 40);
  if ( v14 )
  {
    if ( v14 != 1 )
    {
      if ( v14 == 2 )
      {
        *(_DWORD *)(a1 + 24) = 0;
        *(_DWORD *)(a1 + 28) = 0;
        ++*(_DWORD *)(a1 + 44);
        if ( !RNG_Range(-1, 1) )
        {
          Play_Sound_Effect(106, 1);
          if ( RNG_Range(0, 1) % 2 )
          {
            v2 = *(_DWORD *)(a1 + 20) + (RNG_Range(-64, 64) << 9);
            v3 = RNG_Range(-64, 64);
            Create_Bullet(23, *(_DWORD *)(a1 + 16) + (v3 << 9), v2, 0);
          }
          else
          {
            v4 = *(_DWORD *)(a1 + 20) + (RNG_Range(-64, 64) << 9);
            v5 = RNG_Range(-64, 64);
            Create_Bullet(23, *(_DWORD *)(a1 + 16) + (v5 << 9), v4, 2);
          }
        }
        if ( *(_DWORD *)(a1 + 44) > 50 )
          *(_DWORD *)(a1 + 12) = 0;
      }
      goto LABEL_28;
    }
  }
  else
  {
    *(_DWORD *)(a1 + 40) = 1;
    *(_DWORD *)(a1 + 24) = 0;
    *(_DWORD *)(a1 + 28) = 0;
  }
  switch ( *(_BYTE *)(a1 + 56) )
  {
    case 0:
      *(_DWORD *)(a1 + 24) = -2048;
      break;
    case 1:
      *(_DWORD *)(a1 + 28) = -2048;
      break;
    case 2:
      *(_DWORD *)(a1 + 24) = 2048;
      break;
    case 3:
      *(_DWORD *)(a1 + 28) = 2048;
      break;
    default:
      break;
  }
  if ( *(_DWORD *)(a1 + 92) != 100 )
  {
    *(_DWORD *)(a1 + 40) = 2;
    *(_DWORD *)(a1 + 52) = 1;
    *(_DWORD *)(a1 + 88) = -1;
    *(_DWORD *)(a1 + 44) = 0;
  }
  if ( ++*(_DWORD *)(a1 + 44) % 4 == 1 )
  {
    Play_Sound_Effect(106, 1);
    if ( ++*(_DWORD *)(a1 + 76) % 2 )
      Create_Bullet(23, *(_DWORD *)(a1 + 16), *(_DWORD *)(a1 + 20), 0);
    else
      Create_Bullet(23, *(_DWORD *)(a1 + 16), *(_DWORD *)(a1 + 20), 2);
  }
  if ( ++*(_DWORD *)(a1 + 76) == 5 )
    *(_DWORD *)(a1 + 8) &= 0xFFFFFFFB;
  if ( *(_DWORD *)(a1 + 76) > *(_DWORD *)(a1 + 84) )
  {
    *(_DWORD *)(a1 + 12) = 0;
    return Create_Animated_Effect(*(_DWORD *)(a1 + 16), *(_DWORD *)(a1 + 20), 3, 0);
  }
LABEL_28:
  *(_DWORD *)(a1 + 16) += *(_DWORD *)(a1 + 24);
  *(_DWORD *)(a1 + 20) += *(_DWORD *)(a1 + 28);
  result = *(_BYTE *)(a1 + 56);
  switch ( result )
  {
    case 0:
      v6 = &v31 + 4 * *(_DWORD *)(a1 + 52);
      v7 = a1 + 60;
      *(_DWORD *)v7 = *v6;
      *(_DWORD *)(v7 + 4) = v6[1];
      *(_DWORD *)(v7 + 8) = v6[2];
      result = v6[3];
      *(_DWORD *)(v7 + 12) = result;
      break;
    case 1:
      v8 = &v39 + 4 * *(_DWORD *)(a1 + 52);
      v9 = a1 + 60;
      *(_DWORD *)v9 = *v8;
      *(_DWORD *)(v9 + 4) = v8[1];
      *(_DWORD *)(v9 + 8) = v8[2];
      result = v8[3];
      *(_DWORD *)(v9 + 12) = result;
      break;
    case 2:
      v10 = &v23 + 4 * *(_DWORD *)(a1 + 52);
      v11 = a1 + 60;
      *(_DWORD *)v11 = *v10;
      *(_DWORD *)(v11 + 4) = v10[1];
      *(_DWORD *)(v11 + 8) = v10[2];
      result = v10[3];
      *(_DWORD *)(v11 + 12) = result;
      break;
    case 3:
      v12 = &v15 + 4 * *(_DWORD *)(a1 + 52);
      v13 = a1 + 60;
      *(_DWORD *)v13 = *v12;
      *(_DWORD *)(v13 + 4) = v12[1];
      *(_DWORD *)(v13 + 8) = v12[2];
      result = v12[3];
      *(_DWORD *)(v13 + 12) = result;
      break;
    default:
      break;
  }
  if ( *(_DWORD *)(a1 + 44) % 2 )
  {
    result = a1;
    *(_DWORD *)(a1 + 68) = 0;
  }
  return result;
}

//----- (004075E0) --------------------------------------------------------
int __cdecl Bullet_17_BladeSlash(int a1)
{
  int *v1; // eax@18
  int v2; // ecx@18
  int result; // eax@18
  int *v4; // eax@19
  int v5; // ecx@19
  int v6; // [sp+0h] [bp-A4h]@1
  int v7; // [sp+4h] [bp-A0h]@17
  int v8; // [sp+8h] [bp-9Ch]@17
  int v9; // [sp+Ch] [bp-98h]@17
  int v10; // [sp+10h] [bp-94h]@17
  int v11; // [sp+14h] [bp-90h]@17
  int v12; // [sp+18h] [bp-8Ch]@17
  int v13; // [sp+1Ch] [bp-88h]@17
  int v14; // [sp+20h] [bp-84h]@17
  int v15; // [sp+24h] [bp-80h]@17
  int v16; // [sp+28h] [bp-7Ch]@17
  int v17; // [sp+2Ch] [bp-78h]@17
  int v18; // [sp+30h] [bp-74h]@17
  int v19; // [sp+34h] [bp-70h]@17
  int v20; // [sp+38h] [bp-6Ch]@17
  int v21; // [sp+3Ch] [bp-68h]@17
  int v22; // [sp+40h] [bp-64h]@17
  int v23; // [sp+44h] [bp-60h]@17
  int v24; // [sp+48h] [bp-5Ch]@17
  int v25; // [sp+4Ch] [bp-58h]@17
  int v26; // [sp+50h] [bp-54h]@17
  int v27; // [sp+54h] [bp-50h]@17
  int v28; // [sp+58h] [bp-4Ch]@17
  int v29; // [sp+5Ch] [bp-48h]@17
  int v30; // [sp+60h] [bp-44h]@17
  int v31; // [sp+64h] [bp-40h]@17
  int v32; // [sp+68h] [bp-3Ch]@17
  int v33; // [sp+6Ch] [bp-38h]@17
  int v34; // [sp+70h] [bp-34h]@17
  int v35; // [sp+74h] [bp-30h]@17
  int v36; // [sp+78h] [bp-2Ch]@17
  int v37; // [sp+7Ch] [bp-28h]@17
  int v38; // [sp+80h] [bp-24h]@17
  int v39; // [sp+84h] [bp-20h]@17
  int v40; // [sp+88h] [bp-1Ch]@17
  int v41; // [sp+8Ch] [bp-18h]@17
  int v42; // [sp+90h] [bp-14h]@17
  int v43; // [sp+94h] [bp-10h]@17
  int v44; // [sp+98h] [bp-Ch]@17
  int v45; // [sp+9Ch] [bp-8h]@17
  int v46; // [sp+A0h] [bp-4h]@17

  v6 = *(_DWORD *)(a1 + 40);
  if ( v6 )
  {
    if ( v6 != 1 )
      goto LABEL_17;
  }
  else
  {
    *(_DWORD *)(a1 + 40) = 1;
    *(_DWORD *)(a1 + 20) -= 6144;
    if ( *(_BYTE *)(a1 + 56) )
      *(_DWORD *)(a1 + 16) -= 0x2000;
    else
      *(_DWORD *)(a1 + 16) += 0x2000;
  }
  if ( ++*(_DWORD *)(a1 + 48) > 2 )
  {
    *(_DWORD *)(a1 + 48) = 0;
    ++*(_DWORD *)(a1 + 52);
  }
  if ( *(_BYTE *)(a1 + 56) )
    *(_DWORD *)(a1 + 16) += 1024;
  else
    *(_DWORD *)(a1 + 16) -= 1024;
  *(_DWORD *)(a1 + 20) += 1024;
  if ( *(_DWORD *)(a1 + 52) == 1 )
    *(_DWORD *)(a1 + 88) = 2;
  else
    *(_DWORD *)(a1 + 88) = 1;
  if ( *(_DWORD *)(a1 + 52) > 4 )
    *(_DWORD *)(a1 + 12) = 0;
LABEL_17:
  v27 = 0;
  v28 = 64;
  v29 = 24;
  v30 = 88;
  v31 = 24;
  v32 = 64;
  v33 = 48;
  v34 = 88;
  v35 = 48;
  v36 = 64;
  v37 = 72;
  v38 = 88;
  v39 = 72;
  v40 = 64;
  v41 = 96;
  v42 = 88;
  v43 = 96;
  v44 = 64;
  v45 = 120;
  v46 = 88;
  v7 = 0;
  v8 = 88;
  v9 = 24;
  v10 = 112;
  v11 = 24;
  v12 = 88;
  v13 = 48;
  v14 = 112;
  v15 = 48;
  v16 = 88;
  v17 = 72;
  v18 = 112;
  v19 = 72;
  v20 = 88;
  v21 = 96;
  v22 = 112;
  v23 = 96;
  v24 = 88;
  v25 = 120;
  v26 = 112;
  if ( *(_BYTE *)(a1 + 56) )
  {
    v4 = &v7 + 4 * *(_DWORD *)(a1 + 52);
    v5 = a1 + 60;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    *(_DWORD *)(v5 + 8) = v4[2];
    result = v4[3];
    *(_DWORD *)(v5 + 12) = result;
  }
  else
  {
    v1 = &v27 + 4 * *(_DWORD *)(a1 + 52);
    v2 = a1 + 60;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    *(_DWORD *)(v2 + 8) = v1[2];
    result = v1[3];
    *(_DWORD *)(v2 + 12) = result;
  }
  return result;
}

//----- (004078A0) --------------------------------------------------------
int __cdecl Bullet_18__Unused_(int a1)
{
  int v1; // edx@3
  int result; // eax@3

  if ( ++*(_DWORD *)(a1 + 44) > 2 )
    *(_DWORD *)(a1 + 12) = 0;
  v1 = a1 + 60;
  *(_DWORD *)v1 = 0;
  *(_DWORD *)(v1 + 4) = 0;
  result = 0;
  *(_DWORD *)(v1 + 8) = 0;
  *(_DWORD *)(v1 + 12) = 0;
  return result;
}

//----- (00407910) --------------------------------------------------------
int __cdecl Bullet_1C_1D_1E_Sup_Mis_Launcher(int a1, int a2)
{
  int result; // eax@2
  int *v3; // edx@89
  int *v4; // edx@90
  int *v5; // edx@91
  unsigned int v6; // [sp+10h] [bp-98h]@47
  int v7; // [sp+1Ch] [bp-8Ch]@31
  int v8; // [sp+20h] [bp-88h]@85
  int v9; // [sp+24h] [bp-84h]@85
  int v10; // [sp+28h] [bp-80h]@85
  int v11; // [sp+2Ch] [bp-7Ch]@85
  int v12; // [sp+30h] [bp-78h]@85
  int v13; // [sp+34h] [bp-74h]@85
  int v14; // [sp+38h] [bp-70h]@85
  int v15; // [sp+3Ch] [bp-6Ch]@85
  int v16; // [sp+40h] [bp-68h]@85
  int v17; // [sp+44h] [bp-64h]@85
  int v18; // [sp+48h] [bp-60h]@85
  int v19; // [sp+4Ch] [bp-5Ch]@85
  int v20; // [sp+50h] [bp-58h]@85
  int v21; // [sp+54h] [bp-54h]@85
  int v22; // [sp+58h] [bp-50h]@85
  int v23; // [sp+5Ch] [bp-4Ch]@85
  int v24; // [sp+60h] [bp-48h]@85
  int v25; // [sp+64h] [bp-44h]@85
  int v26; // [sp+68h] [bp-40h]@85
  int v27; // [sp+6Ch] [bp-3Ch]@85
  int v28; // [sp+70h] [bp-38h]@85
  int v29; // [sp+74h] [bp-34h]@85
  int v30; // [sp+78h] [bp-30h]@85
  int v31; // [sp+7Ch] [bp-2Ch]@85
  int v32; // [sp+80h] [bp-28h]@85
  int v33; // [sp+84h] [bp-24h]@85
  int v34; // [sp+88h] [bp-20h]@85
  int v35; // [sp+8Ch] [bp-1Ch]@85
  int v36; // [sp+90h] [bp-18h]@85
  int v37; // [sp+94h] [bp-14h]@85
  int v38; // [sp+98h] [bp-10h]@85
  int v39; // [sp+9Ch] [bp-Ch]@85
  int v40; // [sp+A4h] [bp-4h]@3

  if ( ++*(_DWORD *)(a1 + 76) > *(_DWORD *)(a1 + 84) )
  {
    *(_DWORD *)(a1 + 12) = 0;
    return Create_Animated_Effect(*(_DWORD *)(a1 + 16), *(_DWORD *)(a1 + 20), 3, 0);
  }
  v40 = 0;
  if ( *(_DWORD *)(a1 + 92) != 10 )
    v40 = 1;
  if ( !*(_BYTE *)(a1 + 56) && *(_DWORD *)a1 & 1 )
    v40 = 1;
  if ( *(_BYTE *)(a1 + 56) == 2 && *(_DWORD *)a1 & 4 )
    v40 = 1;
  if ( *(_BYTE *)(a1 + 56) == 1 && *(_DWORD *)a1 & 2 )
    v40 = 1;
  if ( *(_BYTE *)(a1 + 56) == 3 && *(_DWORD *)a1 & 8 )
    v40 = 1;
  if ( !*(_BYTE *)(a1 + 56) && *(_DWORD *)a1 & 0x80 )
    v40 = 1;
  if ( !*(_BYTE *)(a1 + 56) && *(_DWORD *)a1 & 0x20 )
    v40 = 1;
  if ( *(_BYTE *)(a1 + 56) == 2 && *(_DWORD *)a1 & 0x40 )
    v40 = 1;
  if ( *(_BYTE *)(a1 + 56) == 2 && *(_DWORD *)a1 & 0x10 )
    v40 = 1;
  if ( v40 )
  {
    Create_Bullet(a2 + 30, *(_DWORD *)(a1 + 16), *(_DWORD *)(a1 + 20), 0);
    *(_DWORD *)(a1 + 12) = 0;
  }
  v7 = *(_DWORD *)(a1 + 40);
  if ( !v7 )
  {
    *(_DWORD *)(a1 + 40) = 1;
    switch ( *(_BYTE *)(a1 + 56) )
    {
      case 0:
      case 2:
        *(_DWORD *)(a1 + 36) = *(_DWORD *)(a1 + 20);
        *(_DWORD *)(a1 + 96) = 4096;
        *(_DWORD *)(a1 + 104) = 4096;
        break;
      case 1:
      case 3:
        *(_DWORD *)(a1 + 32) = *(_DWORD *)(a1 + 16);
        *(_DWORD *)(a1 + 100) = 4096;
        *(_DWORD *)(a1 + 108) = 4096;
        break;
      default:
        break;
    }
    if ( a2 == 3 )
    {
      switch ( *(_BYTE *)(a1 + 56) )
      {
        case 0:
        case 2:
          if ( *(_DWORD *)(a1 + 20) <= Quote_Y_Position )
            *(_DWORD *)(a1 + 28) = -256;
          else
            *(_DWORD *)(a1 + 28) = 256;
          *(_DWORD *)(a1 + 24) = RNG_Range(-512, 512);
          break;
        case 1:
        case 3:
          if ( *(_DWORD *)(a1 + 16) <= Quote_X_Position )
            *(_DWORD *)(a1 + 24) = -256;
          else
            *(_DWORD *)(a1 + 24) = 256;
          *(_DWORD *)(a1 + 28) = RNG_Range(-512, 512);
          break;
        default:
          break;
      }
      v6 = ++dword_49BCA0 % 3u;
      if ( dword_49BCA0 % 3u )
      {
        if ( v6 == 1 )
        {
          *(_DWORD *)(a1 + 52) = 256;
        }
        else if ( v6 == 2 )
        {
          *(_DWORD *)(a1 + 52) = 170;
        }
      }
      else
      {
        *(_DWORD *)(a1 + 52) = 512;
      }
    }
    else
    {
      *(_DWORD *)(a1 + 52) = 512;
    }
    goto LABEL_56;
  }
  if ( v7 == 1 )
  {
LABEL_56:
    switch ( *(_BYTE *)(a1 + 56) )
    {
      case 0:
        *(_DWORD *)(a1 + 24) -= *(_DWORD *)(a1 + 52);
        break;
      case 1:
        *(_DWORD *)(a1 + 28) -= *(_DWORD *)(a1 + 52);
        break;
      case 2:
        *(_DWORD *)(a1 + 24) += *(_DWORD *)(a1 + 52);
        break;
      case 3:
        *(_DWORD *)(a1 + 28) += *(_DWORD *)(a1 + 52);
        break;
      default:
        break;
    }
    if ( a2 == 3 )
    {
      switch ( *(_BYTE *)(a1 + 56) )
      {
        case 0:
        case 2:
          if ( *(_DWORD *)(a1 + 20) >= *(_DWORD *)(a1 + 36) )
            *(_DWORD *)(a1 + 28) -= 64;
          else
            *(_DWORD *)(a1 + 28) += 64;
          break;
        case 1:
        case 3:
          if ( *(_DWORD *)(a1 + 16) >= *(_DWORD *)(a1 + 32) )
            *(_DWORD *)(a1 + 24) -= 64;
          else
            *(_DWORD *)(a1 + 24) += 64;
          break;
        default:
          break;
      }
    }
    if ( *(_DWORD *)(a1 + 24) < -5120 )
      *(_DWORD *)(a1 + 24) = -5120;
    if ( *(_DWORD *)(a1 + 24) > 5120 )
      *(_DWORD *)(a1 + 24) = 5120;
    if ( *(_DWORD *)(a1 + 28) < -5120 )
      *(_DWORD *)(a1 + 28) = -5120;
    if ( *(_DWORD *)(a1 + 28) > 5120 )
      *(_DWORD *)(a1 + 28) = 5120;
    *(_DWORD *)(a1 + 16) += *(_DWORD *)(a1 + 24);
    *(_DWORD *)(a1 + 20) += *(_DWORD *)(a1 + 28);
  }
  result = *(_DWORD *)(a1 + 80) + 1;
  *(_DWORD *)(a1 + 80) = result;
  if ( *(_DWORD *)(a1 + 80) > 2 )
  {
    *(_DWORD *)(a1 + 80) = 0;
    result = *(_BYTE *)(a1 + 56);
    switch ( result )
    {
      case 0:
        result = Create_Animated_Effect(*(_DWORD *)(a1 + 16) + 4096, *(_DWORD *)(a1 + 20), 7, 2);
        break;
      case 1:
        result = Create_Animated_Effect(*(_DWORD *)(a1 + 16), *(_DWORD *)(a1 + 20) + 4096, 7, 3);
        break;
      case 2:
        result = Create_Animated_Effect(*(_DWORD *)(a1 + 16) - 4096, *(_DWORD *)(a1 + 20), 7, 0);
        break;
      case 3:
        result = Create_Animated_Effect(*(_DWORD *)(a1 + 16), *(_DWORD *)(a1 + 20) - 4096, 7, 1);
        break;
      default:
        break;
    }
  }
  v24 = 120;
  v25 = 96;
  v26 = 136;
  v27 = 112;
  v28 = 136;
  v29 = 96;
  v30 = 152;
  v31 = 112;
  v32 = 152;
  v33 = 96;
  v34 = 168;
  v35 = 112;
  v36 = 168;
  v37 = 96;
  v38 = 184;
  v39 = 112;
  v8 = 184;
  v9 = 96;
  v10 = 200;
  v11 = 112;
  v12 = 200;
  v13 = 96;
  v14 = 216;
  v15 = 112;
  v16 = 216;
  v17 = 96;
  v18 = 232;
  v19 = 112;
  v20 = 232;
  v21 = 96;
  v22 = 248;
  v23 = 112;
  switch ( a2 )
  {
    case 1:
      v3 = &v24 + 4 * *(_BYTE *)(a1 + 56);
      result = a1 + 60;
      *(_DWORD *)result = *v3;
      *(_DWORD *)(result + 4) = v3[1];
      *(_DWORD *)(result + 8) = v3[2];
      *(_DWORD *)(result + 12) = v3[3];
      break;
    case 2:
      v4 = &v8 + 4 * *(_BYTE *)(a1 + 56);
      result = a1 + 60;
      *(_DWORD *)result = *v4;
      *(_DWORD *)(result + 4) = v4[1];
      *(_DWORD *)(result + 8) = v4[2];
      *(_DWORD *)(result + 12) = v4[3];
      break;
    case 3:
      v5 = &v24 + 4 * *(_BYTE *)(a1 + 56);
      result = a1 + 60;
      *(_DWORD *)result = *v5;
      *(_DWORD *)(result + 4) = v5[1];
      *(_DWORD *)(result + 8) = v5[2];
      *(_DWORD *)(result + 12) = v5[3];
      break;
  }
  return result;
}
// 49BCA0: using guessed type int dword_49BCA0;

//----- (00408080) --------------------------------------------------------
int __cdecl Bullet_1F_20_21(int a1, int a2)
{
  int result; // eax@1
  int v3; // ST0C_4@17
  int v4; // ST08_4@17
  int v5; // eax@17
  int v6; // ST0C_4@20
  int v7; // ST08_4@20
  int v8; // eax@20
  int v9; // ST0C_4@23
  int v10; // ST08_4@23
  int v11; // eax@23
  int v12; // [sp+8h] [bp-4h]@1

  result = a1;
  v12 = *(_DWORD *)(a1 + 40);
  if ( v12 )
  {
    if ( v12 != 1 )
      return result;
  }
  else
  {
    *(_DWORD *)(a1 + 40) = 1;
    switch ( a2 )
    {
      case 1:
        *(_DWORD *)(a1 + 44) = 10;
        break;
      case 2:
        *(_DWORD *)(a1 + 44) = 14;
        break;
      case 3:
        *(_DWORD *)(a1 + 44) = 6;
        break;
    }
    Play_Sound_Effect(44, 1);
  }
  if ( a2 == 1 )
  {
    if ( !(*(_DWORD *)(a1 + 44) % 3) )
    {
      v3 = *(_DWORD *)(a1 + 96);
      v4 = *(_DWORD *)(a1 + 20) + (RNG_Range(-16, 16) << 9);
      v5 = RNG_Range(-16, 16);
      sub_46F200(*(_DWORD *)(a1 + 16) + (v5 << 9), v4, v3, 2);
    }
  }
  else if ( a2 == 2 )
  {
    if ( !(*(_DWORD *)(a1 + 44) % 3) )
    {
      v6 = *(_DWORD *)(a1 + 96);
      v7 = *(_DWORD *)(a1 + 20) + (RNG_Range(-32, 32) << 9);
      v8 = RNG_Range(-32, 32);
      sub_46F200(*(_DWORD *)(a1 + 16) + (v8 << 9), v7, v6, 2);
    }
  }
  else if ( a2 == 3 && !(*(_DWORD *)(a1 + 44) % 3) )
  {
    v9 = *(_DWORD *)(a1 + 96);
    v10 = *(_DWORD *)(a1 + 20) + (RNG_Range(-40, 40) << 9);
    v11 = RNG_Range(-40, 40);
    sub_46F200(*(_DWORD *)(a1 + 16) + (v11 << 9), v10, v9, 2);
  }
  --*(_DWORD *)(a1 + 44);
  result = a1;
  if ( *(_DWORD *)(a1 + 44) < 0 )
    *(_DWORD *)(a1 + 12) = 0;
  return result;
}

//----- (00408230) --------------------------------------------------------
int __cdecl Bullet_22_23_24_2B_Nemesis(int a1, int a2)
{
  int result; // eax@2
  int v3; // eax@15
  int v4; // eax@16
  int v5; // eax@17
  int v6; // eax@18
  int *v7; // eax@23
  int v8; // ecx@23
  int *v9; // eax@24
  int v10; // ecx@24
  int *v11; // eax@25
  int v12; // ecx@25
  int *v13; // eax@26
  int v14; // ecx@26
  int v15; // [sp+10h] [bp-80h]@22
  int v16; // [sp+14h] [bp-7Ch]@22
  int v17; // [sp+18h] [bp-78h]@22
  int v18; // [sp+1Ch] [bp-74h]@22
  int v19; // [sp+20h] [bp-70h]@22
  int v20; // [sp+24h] [bp-6Ch]@22
  int v21; // [sp+28h] [bp-68h]@22
  int v22; // [sp+2Ch] [bp-64h]@22
  int v23; // [sp+30h] [bp-60h]@22
  int v24; // [sp+34h] [bp-5Ch]@22
  int v25; // [sp+38h] [bp-58h]@22
  int v26; // [sp+3Ch] [bp-54h]@22
  int v27; // [sp+40h] [bp-50h]@22
  int v28; // [sp+44h] [bp-4Ch]@22
  int v29; // [sp+48h] [bp-48h]@22
  int v30; // [sp+4Ch] [bp-44h]@22
  int v31; // [sp+50h] [bp-40h]@22
  int v32; // [sp+54h] [bp-3Ch]@22
  int v33; // [sp+58h] [bp-38h]@22
  int v34; // [sp+5Ch] [bp-34h]@22
  int v35; // [sp+60h] [bp-30h]@22
  int v36; // [sp+64h] [bp-2Ch]@22
  int v37; // [sp+68h] [bp-28h]@22
  int v38; // [sp+6Ch] [bp-24h]@22
  int v39; // [sp+70h] [bp-20h]@22
  int v40; // [sp+74h] [bp-1Ch]@22
  int v41; // [sp+78h] [bp-18h]@22
  int v42; // [sp+7Ch] [bp-14h]@22
  int v43; // [sp+80h] [bp-10h]@22
  int v44; // [sp+84h] [bp-Ch]@22
  int v45; // [sp+88h] [bp-8h]@22
  int v46; // [sp+8Ch] [bp-4h]@22

  if ( ++*(_DWORD *)(a1 + 76) <= *(_DWORD *)(a1 + 84) )
  {
    if ( *(_DWORD *)(a1 + 40) )
    {
      if ( a2 == 1 && *(_DWORD *)(a1 + 76) % 4 == 1 )
      {
        switch ( *(_BYTE *)(a1 + 56) )
        {
          case 0:
            v3 = RNG_Range(-512, 512);
            NPC_Create(4, *(_DWORD *)(a1 + 16), *(_DWORD *)(a1 + 20), -512, v3, 2, 0, 256);
            break;
          case 1:
            v4 = RNG_Range(-512, 512);
            NPC_Create(4, *(_DWORD *)(a1 + 16), *(_DWORD *)(a1 + 20), v4, -512, 2, 0, 256);
            break;
          case 2:
            v5 = RNG_Range(-512, 512);
            NPC_Create(4, *(_DWORD *)(a1 + 16), *(_DWORD *)(a1 + 20), 512, v5, 2, 0, 256);
            break;
          case 3:
            v6 = RNG_Range(-512, 512);
            NPC_Create(4, *(_DWORD *)(a1 + 16), *(_DWORD *)(a1 + 20), v6, 512, 2, 0, 256);
            break;
          default:
            break;
        }
      }
      *(_DWORD *)(a1 + 16) += *(_DWORD *)(a1 + 24);
      *(_DWORD *)(a1 + 20) += *(_DWORD *)(a1 + 28);
    }
    else
    {
      *(_DWORD *)(a1 + 40) = 1;
      *(_DWORD *)(a1 + 76) = 0;
      switch ( *(_BYTE *)(a1 + 56) )
      {
        case 0:
          *(_DWORD *)(a1 + 24) = -4096;
          break;
        case 1:
          *(_DWORD *)(a1 + 28) = -4096;
          break;
        case 2:
          *(_DWORD *)(a1 + 24) = 4096;
          break;
        case 3:
          *(_DWORD *)(a1 + 28) = 4096;
          break;
        default:
          break;
      }
      if ( a2 == 3 )
      {
        *(_DWORD *)(a1 + 24) /= 3;
        *(_DWORD *)(a1 + 28) /= 3;
      }
    }
    if ( ++*(_DWORD *)(a1 + 52) > 1 )
      *(_DWORD *)(a1 + 52) = 0;
    v23 = 0;
    v24 = 112;
    v25 = 32;
    v26 = 128;
    v27 = 0;
    v28 = 128;
    v29 = 32;
    v30 = 144;
    v31 = 32;
    v32 = 112;
    v33 = 48;
    v34 = 144;
    v35 = 48;
    v36 = 112;
    v37 = 64;
    v38 = 144;
    v39 = 64;
    v40 = 112;
    v41 = 96;
    v42 = 128;
    v43 = 64;
    v44 = 128;
    v45 = 96;
    v46 = 144;
    v15 = 96;
    v16 = 112;
    v17 = 112;
    v18 = 144;
    v19 = 112;
    v20 = 112;
    v21 = 128;
    v22 = 144;
    switch ( *(_BYTE *)(a1 + 56) )
    {
      case 0:
        v7 = &v23 + 4 * *(_DWORD *)(a1 + 52);
        v8 = a1 + 60;
        *(_DWORD *)v8 = *v7;
        *(_DWORD *)(v8 + 4) = v7[1];
        *(_DWORD *)(v8 + 8) = v7[2];
        *(_DWORD *)(v8 + 12) = v7[3];
        break;
      case 1:
        v9 = &v31 + 4 * *(_DWORD *)(a1 + 52);
        v10 = a1 + 60;
        *(_DWORD *)v10 = *v9;
        *(_DWORD *)(v10 + 4) = v9[1];
        *(_DWORD *)(v10 + 8) = v9[2];
        *(_DWORD *)(v10 + 12) = v9[3];
        break;
      case 2:
        v11 = &v39 + 4 * *(_DWORD *)(a1 + 52);
        v12 = a1 + 60;
        *(_DWORD *)v12 = *v11;
        *(_DWORD *)(v12 + 4) = v11[1];
        *(_DWORD *)(v12 + 8) = v11[2];
        *(_DWORD *)(v12 + 12) = v11[3];
        break;
      case 3:
        v13 = &v15 + 4 * *(_DWORD *)(a1 + 52);
        v14 = a1 + 60;
        *(_DWORD *)v14 = *v13;
        *(_DWORD *)(v14 + 4) = v13[1];
        *(_DWORD *)(v14 + 8) = v13[2];
        *(_DWORD *)(v14 + 12) = v13[3];
        break;
      default:
        break;
    }
    *(_DWORD *)(a1 + 64) += 32 * ((a2 - 1) / 2);
    *(_DWORD *)(a1 + 72) += 32 * ((a2 - 1) / 2);
    *(_DWORD *)(a1 + 60) += (a2 - 1) % 2 << 7;
    result = *(_DWORD *)(a1 + 68) + ((a2 - 1) % 2 << 7);
    *(_DWORD *)(a1 + 68) = result;
  }
  else
  {
    *(_DWORD *)(a1 + 12) = 0;
    result = Create_Animated_Effect(*(_DWORD *)(a1 + 16), *(_DWORD *)(a1 + 20), 3, 0);
  }
  return result;
}

//----- (00408710) --------------------------------------------------------
int __cdecl Bullet_25_26_27_ChargelessSpur_AllLevels(int a1, int a2)
{
  int result; // eax@2
  int v3; // eax@34
  int v4; // eax@35
  int v5; // ecx@39
  int v6; // ecx@40
  int v7; // edx@44
  int v8; // edx@45

  if ( ++*(_DWORD *)(a1 + 76) <= *(_DWORD *)(a1 + 84) )
  {
    if ( *(_DWORD *)(a1 + 88) && *(_DWORD *)(a1 + 92) != 100 )
      *(_DWORD *)(a1 + 88) = 0;
    if ( *(_DWORD *)(a1 + 40) )
    {
      *(_DWORD *)(a1 + 16) += *(_DWORD *)(a1 + 24);
      *(_DWORD *)(a1 + 20) += *(_DWORD *)(a1 + 28);
    }
    else
    {
      *(_DWORD *)(a1 + 40) = 1;
      switch ( *(_BYTE *)(a1 + 56) )
      {
        case 0:
          *(_DWORD *)(a1 + 24) = -4096;
          break;
        case 1:
          *(_DWORD *)(a1 + 28) = -4096;
          break;
        case 2:
          *(_DWORD *)(a1 + 24) = 4096;
          break;
        case 3:
          *(_DWORD *)(a1 + 28) = 4096;
          break;
        default:
          break;
      }
      if ( a2 == 1 )
      {
        switch ( *(_BYTE *)(a1 + 56) )
        {
          case 0:
            *(_DWORD *)(a1 + 100) = 1024;
            break;
          case 1:
            *(_DWORD *)(a1 + 96) = 1024;
            break;
          case 2:
            *(_DWORD *)(a1 + 100) = 1024;
            break;
          case 3:
            *(_DWORD *)(a1 + 96) = 1024;
            break;
          default:
            break;
        }
      }
      else if ( a2 == 2 )
      {
        switch ( *(_BYTE *)(a1 + 56) )
        {
          case 0:
            *(_DWORD *)(a1 + 100) = 2048;
            break;
          case 1:
            *(_DWORD *)(a1 + 96) = 2048;
            break;
          case 2:
            *(_DWORD *)(a1 + 100) = 2048;
            break;
          case 3:
            *(_DWORD *)(a1 + 96) = 2048;
            break;
          default:
            break;
        }
      }
    }
    *(_DWORD *)(a1 + 88) = *(_DWORD *)(a1 + 92);
    switch ( a2 )
    {
      case 1:
        if ( *(_BYTE *)(a1 + 56) != 1 && *(_BYTE *)(a1 + 56) != 3 )
        {
          v4 = a1 + 60;
          *(_DWORD *)v4 = 128;
          *(_DWORD *)(v4 + 4) = 32;
          *(_DWORD *)(v4 + 8) = 144;
          *(_DWORD *)(v4 + 12) = 48;
        }
        else
        {
          v3 = a1 + 60;
          *(_DWORD *)v3 = 144;
          *(_DWORD *)(v3 + 4) = 32;
          *(_DWORD *)(v3 + 8) = 160;
          *(_DWORD *)(v3 + 12) = 48;
        }
        break;
      case 2:
        if ( *(_BYTE *)(a1 + 56) != 1 && *(_BYTE *)(a1 + 56) != 3 )
        {
          v6 = a1 + 60;
          *(_DWORD *)v6 = 160;
          *(_DWORD *)(v6 + 4) = 32;
          *(_DWORD *)(v6 + 8) = 176;
          *(_DWORD *)(v6 + 12) = 48;
        }
        else
        {
          v5 = a1 + 60;
          *(_DWORD *)v5 = 176;
          *(_DWORD *)(v5 + 4) = 32;
          *(_DWORD *)(v5 + 8) = 192;
          *(_DWORD *)(v5 + 12) = 48;
        }
        break;
      case 3:
        if ( *(_BYTE *)(a1 + 56) != 1 && *(_BYTE *)(a1 + 56) != 3 )
        {
          v8 = a1 + 60;
          *(_DWORD *)v8 = 128;
          *(_DWORD *)(v8 + 4) = 48;
          *(_DWORD *)(v8 + 8) = 144;
          *(_DWORD *)(v8 + 12) = 64;
        }
        else
        {
          v7 = a1 + 60;
          *(_DWORD *)v7 = 144;
          *(_DWORD *)(v7 + 4) = 48;
          *(_DWORD *)(v7 + 8) = 160;
          *(_DWORD *)(v7 + 12) = 64;
        }
        break;
    }
    result = Create_Bullet(a2 + 39, *(_DWORD *)(a1 + 16), *(_DWORD *)(a1 + 20), *(_BYTE *)(a1 + 56));
  }
  else
  {
    *(_DWORD *)(a1 + 12) = 0;
    result = Create_Animated_Effect(*(_DWORD *)(a1 + 16), *(_DWORD *)(a1 + 20), 3, 0);
  }
  return result;
}

//----- (00408AE0) --------------------------------------------------------
int __cdecl Bullet_28_to_2A_NonMovingSpur_AllLevels(int a1, int a2)
{
  int result; // eax@8
  int *v3; // ecx@14
  int v4; // edx@14
  int *v5; // ecx@15
  int v6; // edx@15
  int *v7; // edx@19
  int *v8; // edx@20
  int *v9; // eax@24
  int v10; // ecx@24
  int *v11; // eax@25
  int v12; // ecx@25
  int v13; // [sp+4h] [bp-120h]@8
  int v14; // [sp+8h] [bp-11Ch]@8
  int v15; // [sp+Ch] [bp-118h]@8
  int v16; // [sp+10h] [bp-114h]@8
  int v17; // [sp+14h] [bp-110h]@8
  int v18; // [sp+18h] [bp-10Ch]@8
  int v19; // [sp+1Ch] [bp-108h]@8
  int v20; // [sp+20h] [bp-104h]@8
  int v21; // [sp+24h] [bp-100h]@8
  int v22; // [sp+28h] [bp-FCh]@8
  int v23; // [sp+2Ch] [bp-F8h]@8
  int v24; // [sp+30h] [bp-F4h]@8
  int v25; // [sp+34h] [bp-F0h]@8
  int v26; // [sp+38h] [bp-ECh]@8
  int v27; // [sp+3Ch] [bp-E8h]@8
  int v28; // [sp+40h] [bp-E4h]@8
  int v29; // [sp+44h] [bp-E0h]@8
  int v30; // [sp+48h] [bp-DCh]@8
  int v31; // [sp+4Ch] [bp-D8h]@8
  int v32; // [sp+50h] [bp-D4h]@8
  int v33; // [sp+54h] [bp-D0h]@8
  int v34; // [sp+58h] [bp-CCh]@8
  int v35; // [sp+5Ch] [bp-C8h]@8
  int v36; // [sp+60h] [bp-C4h]@8
  int v37; // [sp+64h] [bp-C0h]@8
  int v38; // [sp+68h] [bp-BCh]@8
  int v39; // [sp+6Ch] [bp-B8h]@8
  int v40; // [sp+70h] [bp-B4h]@8
  int v41; // [sp+74h] [bp-B0h]@8
  int v42; // [sp+78h] [bp-ACh]@8
  int v43; // [sp+7Ch] [bp-A8h]@8
  int v44; // [sp+80h] [bp-A4h]@8
  int v45; // [sp+84h] [bp-A0h]@8
  int v46; // [sp+88h] [bp-9Ch]@8
  int v47; // [sp+8Ch] [bp-98h]@8
  int v48; // [sp+90h] [bp-94h]@8
  int v49; // [sp+94h] [bp-90h]@8
  int v50; // [sp+98h] [bp-8Ch]@8
  int v51; // [sp+9Ch] [bp-88h]@8
  int v52; // [sp+A0h] [bp-84h]@8
  int v53; // [sp+A4h] [bp-80h]@8
  int v54; // [sp+A8h] [bp-7Ch]@8
  int v55; // [sp+ACh] [bp-78h]@8
  int v56; // [sp+B0h] [bp-74h]@8
  int v57; // [sp+B4h] [bp-70h]@8
  int v58; // [sp+B8h] [bp-6Ch]@8
  int v59; // [sp+BCh] [bp-68h]@8
  int v60; // [sp+C0h] [bp-64h]@8
  int v61; // [sp+C4h] [bp-60h]@8
  int v62; // [sp+C8h] [bp-5Ch]@8
  int v63; // [sp+CCh] [bp-58h]@8
  int v64; // [sp+D0h] [bp-54h]@8
  int v65; // [sp+D4h] [bp-50h]@8
  int v66; // [sp+D8h] [bp-4Ch]@8
  int v67; // [sp+DCh] [bp-48h]@8
  int v68; // [sp+E0h] [bp-44h]@8
  int v69; // [sp+E4h] [bp-40h]@8
  int v70; // [sp+E8h] [bp-3Ch]@8
  int v71; // [sp+ECh] [bp-38h]@8
  int v72; // [sp+F0h] [bp-34h]@8
  int v73; // [sp+F4h] [bp-30h]@8
  int v74; // [sp+F8h] [bp-2Ch]@8
  int v75; // [sp+FCh] [bp-28h]@8
  int v76; // [sp+100h] [bp-24h]@8
  int v77; // [sp+104h] [bp-20h]@8
  int v78; // [sp+108h] [bp-1Ch]@8
  int v79; // [sp+10Ch] [bp-18h]@8
  int v80; // [sp+110h] [bp-14h]@8
  int v81; // [sp+114h] [bp-10h]@8
  int v82; // [sp+118h] [bp-Ch]@8
  int v83; // [sp+11Ch] [bp-8h]@8
  int v84; // [sp+120h] [bp-4h]@8

  if ( ++*(_DWORD *)(a1 + 76) > 20 )
    *(_DWORD *)(a1 + 52) = *(_DWORD *)(a1 + 76) - 20;
  if ( *(_DWORD *)(a1 + 52) > 2 )
    *(_DWORD *)(a1 + 12) = 0;
  if ( *(_DWORD *)(a1 + 88) && *(_DWORD *)(a1 + 92) != 100 )
    *(_DWORD *)(a1 + 88) = 0;
  v61 = 192;
  v62 = 32;
  v63 = 200;
  v64 = 40;
  v65 = 200;
  v66 = 32;
  v67 = 208;
  v68 = 40;
  v69 = 208;
  v70 = 32;
  v71 = 216;
  v72 = 40;
  v73 = 192;
  v74 = 40;
  v75 = 200;
  v76 = 48;
  v77 = 200;
  v78 = 40;
  v79 = 208;
  v80 = 48;
  v81 = 208;
  v82 = 40;
  v83 = 216;
  v84 = 48;
  v37 = 216;
  v38 = 32;
  v39 = 224;
  v40 = 40;
  v41 = 224;
  v42 = 32;
  v43 = 232;
  v44 = 40;
  v45 = 232;
  v46 = 32;
  v47 = 240;
  v48 = 40;
  v49 = 216;
  v50 = 40;
  v51 = 224;
  v52 = 48;
  v53 = 224;
  v54 = 40;
  v55 = 232;
  v56 = 48;
  v57 = 232;
  v58 = 40;
  v59 = 240;
  v60 = 48;
  v13 = 240;
  v14 = 32;
  v15 = 248;
  v16 = 40;
  v17 = 248;
  v18 = 32;
  v19 = 256;
  v20 = 40;
  v21 = 256;
  v22 = 32;
  v23 = 264;
  v24 = 40;
  v25 = 240;
  v26 = 32;
  v27 = 248;
  v28 = 40;
  v29 = 248;
  v30 = 32;
  v31 = 256;
  v32 = 40;
  v33 = 256;
  v34 = 32;
  v35 = 264;
  v36 = 40;
  result = a2;
  switch ( a2 )
  {
    case 1:
      if ( *(_BYTE *)(a1 + 56) && *(_BYTE *)(a1 + 56) != 2 )
      {
        v5 = &v73 + 4 * *(_DWORD *)(a1 + 52);
        v6 = a1 + 60;
        *(_DWORD *)v6 = *v5;
        *(_DWORD *)(v6 + 4) = v5[1];
        result = v5[2];
        *(_DWORD *)(v6 + 8) = result;
        *(_DWORD *)(v6 + 12) = v5[3];
      }
      else
      {
        v3 = &v61 + 4 * *(_DWORD *)(a1 + 52);
        v4 = a1 + 60;
        *(_DWORD *)v4 = *v3;
        *(_DWORD *)(v4 + 4) = v3[1];
        result = v3[2];
        *(_DWORD *)(v4 + 8) = result;
        *(_DWORD *)(v4 + 12) = v3[3];
      }
      break;
    case 2:
      if ( *(_BYTE *)(a1 + 56) && *(_BYTE *)(a1 + 56) != 2 )
      {
        v8 = &v49 + 4 * *(_DWORD *)(a1 + 52);
        result = a1 + 60;
        *(_DWORD *)result = *v8;
        *(_DWORD *)(result + 4) = v8[1];
        *(_DWORD *)(result + 8) = v8[2];
        *(_DWORD *)(result + 12) = v8[3];
      }
      else
      {
        v7 = &v37 + 4 * *(_DWORD *)(a1 + 52);
        result = a1 + 60;
        *(_DWORD *)result = *v7;
        *(_DWORD *)(result + 4) = v7[1];
        *(_DWORD *)(result + 8) = v7[2];
        *(_DWORD *)(result + 12) = v7[3];
      }
      break;
    case 3:
      if ( *(_BYTE *)(a1 + 56) && *(_BYTE *)(a1 + 56) != 2 )
      {
        v11 = &v25 + 4 * *(_DWORD *)(a1 + 52);
        v12 = a1 + 60;
        *(_DWORD *)v12 = *v11;
        *(_DWORD *)(v12 + 4) = v11[1];
        *(_DWORD *)(v12 + 8) = v11[2];
        result = v11[3];
        *(_DWORD *)(v12 + 12) = result;
      }
      else
      {
        v9 = &v13 + 4 * *(_DWORD *)(a1 + 52);
        v10 = a1 + 60;
        *(_DWORD *)v10 = *v9;
        *(_DWORD *)(v10 + 4) = v9[1];
        *(_DWORD *)(v10 + 8) = v9[2];
        result = v9[3];
        *(_DWORD *)(v10 + 12) = result;
      }
      break;
  }
  return result;
}

//----- (00408F40) --------------------------------------------------------
int __cdecl Bullet_2C_Spur_Lvl_2(int a1)
{
  int result; // eax@2

  if ( ++*(_DWORD *)(a1 + 76) <= *(_DWORD *)(a1 + 84) )
  {
    *(_DWORD *)(a1 + 88) = 10000;
    *(_DWORD *)(a1 + 96) = 819200;
    result = a1;
    *(_DWORD *)(a1 + 100) = 819200;
  }
  else
  {
    result = a1;
    *(_DWORD *)(a1 + 12) = 0;
  }
  return result;
}

//----- (00408F90) --------------------------------------------------------
int __cdecl Bullet_2D_SpurLevel3(int a1)
{
  int result; // eax@1

  ++*(_DWORD *)(a1 + 76);
  result = a1;
  if ( *(_DWORD *)(a1 + 76) > *(_DWORD *)(a1 + 84) )
  {
    result = a1;
    *(_DWORD *)(a1 + 12) = 0;
  }
  return result;
}

//----- (00408FC0) --------------------------------------------------------
int Run_Bullet_Code()
{
  int result; // eax@2
  signed int i; // [sp+4h] [bp-4h]@1

  for ( i = 0; i < 64; ++i )
  {
    if ( WeaponObj_In_Use[32 * i] & 0x80 )
    {
      if ( WeaponObj_Num_Impacts[32 * i] >= 1 )
      {
        switch ( WeaponObj_ShotID[32 * i] )
        {
          case 1:
            Snake_Lvl_1_Bullet((int)&WeaponObj_Collision[32 * i]);
            break;
          case 2:
            Bullet_02_03_Snake((int)&WeaponObj_Collision[32 * i], 2);
            break;
          case 3:
            Bullet_02_03_Snake((int)&WeaponObj_Collision[32 * i], 3);
            break;
          case 4:
            Bullet_04_05_06_Polar_Star((int)&WeaponObj_Collision[32 * i], 1);
            break;
          case 5:
            Bullet_04_05_06_Polar_Star((int)&WeaponObj_Collision[32 * i], 2);
            break;
          case 6:
            Bullet_04_05_06_Polar_Star((int)&WeaponObj_Collision[32 * i], 3);
            break;
          case 7:
            Bullet_07_08_09_Fireball((int)&WeaponObj_Collision[32 * i], 1);
            break;
          case 8:
            Bullet_07_08_09_Fireball((int)&WeaponObj_Collision[32 * i], 2);
            break;
          case 9:
            Bullet_07_08_09_Fireball((int)&WeaponObj_Collision[32 * i], 3);
            break;
          case 10:
            Bullet_0A_0B_0C_Machine_Gun((int)&WeaponObj_Collision[32 * i], 1);
            break;
          case 11:
            Bullet_0A_0B_0C_Machine_Gun((int)&WeaponObj_Collision[32 * i], 2);
            break;
          case 12:
            Bullet_0A_0B_0C_Machine_Gun((int)&WeaponObj_Collision[32 * i], 3);
            break;
          case 13:
            Bullet_0D_0E_0F_Missile_Launcher((int)&WeaponObj_Collision[32 * i], 1);
            break;
          case 14:
            Bullet_0D_0E_0F_Missile_Launcher((int)&WeaponObj_Collision[32 * i], 2);
            break;
          case 15:
            Bullet_0D_0E_0F_Missile_Launcher((int)&WeaponObj_Collision[32 * i], 3);
            break;
          case 16:
            Bullet_10_11_12_Missile_Explosion((int)&WeaponObj_Collision[32 * i], 1);
            break;
          case 17:
            Bullet_10_11_12_Missile_Explosion((int)&WeaponObj_Collision[32 * i], 2);
            break;
          case 18:
            Bullet_10_11_12_Missile_Explosion((int)&WeaponObj_Collision[32 * i], 3);
            break;
          case 19:
            Bullet_13_Bubbler_Lvl1((int)&WeaponObj_Collision[32 * i]);
            break;
          case 20:
            Bullet_14_Bubbler_Lvl2((int)&WeaponObj_Collision[32 * i]);
            break;
          case 21:
            Bullet_15_Bubbler_Lvl3((int)&WeaponObj_Collision[32 * i]);
            break;
          case 22:
            Bullet_16_Bubble_Spurs((int)&WeaponObj_Collision[32 * i]);
            break;
          case 23:
            Bullet_17_BladeSlash((int)&WeaponObj_Collision[32 * i]);
            break;
          case 24:
            Bullet_18__Unused_((int)&WeaponObj_Collision[32 * i]);
            break;
          case 25:
            Bullet_19_Blade_Lvl1((int)&WeaponObj_Collision[32 * i]);
            break;
          case 26:
            Bullet_1A_BladeLevel2((int)&WeaponObj_Collision[32 * i]);
            break;
          case 27:
            Bullet_1B_BladeLevel3((int)&WeaponObj_Collision[32 * i]);
            break;
          case 28:
            Bullet_1C_1D_1E_Sup_Mis_Launcher((int)&WeaponObj_Collision[32 * i], 1);
            break;
          case 29:
            Bullet_1C_1D_1E_Sup_Mis_Launcher((int)&WeaponObj_Collision[32 * i], 2);
            break;
          case 30:
            Bullet_1C_1D_1E_Sup_Mis_Launcher((int)&WeaponObj_Collision[32 * i], 3);
            break;
          case 31:
            Bullet_1F_20_21((int)&WeaponObj_Collision[32 * i], 1);
            break;
          case 32:
            Bullet_1F_20_21((int)&WeaponObj_Collision[32 * i], 2);
            break;
          case 33:
            Bullet_1F_20_21((int)&WeaponObj_Collision[32 * i], 3);
            break;
          case 34:
            Bullet_22_23_24_2B_Nemesis((int)&WeaponObj_Collision[32 * i], 1);
            break;
          case 35:
            Bullet_22_23_24_2B_Nemesis((int)&WeaponObj_Collision[32 * i], 2);
            break;
          case 36:
            Bullet_22_23_24_2B_Nemesis((int)&WeaponObj_Collision[32 * i], 3);
            break;
          case 37:
            Bullet_25_26_27_ChargelessSpur_AllLevels((int)&WeaponObj_Collision[32 * i], 1);
            break;
          case 38:
            Bullet_25_26_27_ChargelessSpur_AllLevels((int)&WeaponObj_Collision[32 * i], 2);
            break;
          case 39:
            Bullet_25_26_27_ChargelessSpur_AllLevels((int)&WeaponObj_Collision[32 * i], 3);
            break;
          case 40:
            Bullet_28_to_2A_NonMovingSpur_AllLevels((int)&WeaponObj_Collision[32 * i], 1);
            break;
          case 41:
            Bullet_28_to_2A_NonMovingSpur_AllLevels((int)&WeaponObj_Collision[32 * i], 2);
            break;
          case 42:
            Bullet_28_to_2A_NonMovingSpur_AllLevels((int)&WeaponObj_Collision[32 * i], 3);
            break;
          case 43:
            Bullet_22_23_24_2B_Nemesis((int)&WeaponObj_Collision[32 * i], 1);
            break;
          case 44:
            Bullet_2C_Spur_Lvl_2((int)&WeaponObj_Collision[32 * i]);
            break;
          case 45:
            Bullet_2D_SpurLevel3((int)&WeaponObj_Collision[32 * i]);
            break;
          default:
            break;
        }
      }
      else
      {
        WeaponObj_In_Use[32 * i] = 0;
      }
    }
    result = i + 1;
  }
  return result;
}
// 499C98: using guessed type int WeaponObj_Collision[];
// 499C9C: using guessed type int WeaponObj_ShotID[];
// 499CA4: using guessed type int WeaponObj_In_Use[];
// 499CF4: using guessed type int WeaponObj_Num_Impacts[];

//----- (004095C0) --------------------------------------------------------
signed int sub_4095C0()
{
  signed int result; // eax@6
  signed int i; // [sp+4h] [bp-4h]@1

  for ( i = 0; ; ++i )
  {
    if ( i >= 64 )
      return 0;
    if ( WeaponObj_In_Use[32 * i] & 0x80 )
      break;
For_Loop_Restart:
    ;
  }
  switch ( WeaponObj_ShotID[32 * i] )
  {
    case 13:
    case 14:
    case 15:
    case 16:
    case 17:
    case 18:
    case 23:
    case 25:
    case 26:
    case 27:
    case 28:
    case 29:
    case 30:
    case 31:
    case 32:
    case 33:
      result = 1;
      break;
    default:
      goto For_Loop_Restart;
  }
  return result;
}
// 499C9C: using guessed type int WeaponObj_ShotID[];
// 499CA4: using guessed type int WeaponObj_In_Use[];

//----- (00409650) --------------------------------------------------------
void *Clear_All_Effects()
{
  return memset(&EffectObj_InUse, 0, 0x1100u);
}

//----- (00409680) --------------------------------------------------------
// mode 0: blue discs, mode 1: red discs
int __cdecl Random_Fountain_Pulsing_Disc_Particles(BOOL mode)
{
  int *v1; // edx@7
  int result; // eax@7
  int *v3; // edx@8
  int v4; // [sp+0h] [bp-80h]@1
  int v5; // [sp+4h] [bp-7Ch]@1
  int v6; // [sp+8h] [bp-78h]@1
  int v7; // [sp+Ch] [bp-74h]@1
  int v8; // [sp+10h] [bp-70h]@1
  int v9; // [sp+14h] [bp-6Ch]@1
  int v10; // [sp+18h] [bp-68h]@1
  int v11; // [sp+1Ch] [bp-64h]@1
  int v12; // [sp+20h] [bp-60h]@1
  int v13; // [sp+24h] [bp-5Ch]@1
  int v14; // [sp+28h] [bp-58h]@1
  int v15; // [sp+2Ch] [bp-54h]@1
  int v16; // [sp+30h] [bp-50h]@1
  int v17; // [sp+34h] [bp-4Ch]@1
  int v18; // [sp+38h] [bp-48h]@1
  int v19; // [sp+3Ch] [bp-44h]@1
  int v20; // [sp+40h] [bp-40h]@1
  int v21; // [sp+44h] [bp-3Ch]@1
  int v22; // [sp+48h] [bp-38h]@1
  int v23; // [sp+4Ch] [bp-34h]@1
  int v24; // [sp+50h] [bp-30h]@1
  int v25; // [sp+54h] [bp-2Ch]@1
  int v26; // [sp+58h] [bp-28h]@1
  int v27; // [sp+5Ch] [bp-24h]@1
  int v28; // [sp+60h] [bp-20h]@1
  int v29; // [sp+64h] [bp-1Ch]@1
  int v30; // [sp+68h] [bp-18h]@1
  int v31; // [sp+6Ch] [bp-14h]@1
  int v32; // [sp+70h] [bp-10h]@1
  int v33; // [sp+74h] [bp-Ch]@1
  int v34; // [sp+78h] [bp-8h]@1
  int v35; // [sp+7Ch] [bp-4h]@1

  v20 = 0;
  v21 = 64;
  v22 = 8;
  v23 = 72;
  v24 = 8;
  v25 = 64;
  v26 = 16;
  v27 = 72;
  v28 = 16;
  v29 = 64;
  v30 = 24;
  v31 = 72;
  v32 = 24;
  v33 = 64;
  v34 = 32;
  v35 = 72;
  v4 = 64;
  v5 = 24;
  v6 = 72;
  v7 = 32;
  v8 = 72;
  v9 = 24;
  v10 = 80;
  v11 = 32;
  v12 = 80;
  v13 = 24;
  v14 = 88;
  v15 = 32;
  v16 = 88;
  v17 = 24;
  v18 = 96;
  v19 = 32;
  if ( !*(_DWORD *)(mode + 28) )
  {
    *(_DWORD *)(mode + 28) = 1;
    *(_DWORD *)(mode + 20) = RNG_Range(-1024, 1024);
    *(_DWORD *)(mode + 24) = RNG_Range(-1024, 0);
  }
  *(_DWORD *)(mode + 24) += 64;
  *(_DWORD *)(mode + 12) += *(_DWORD *)(mode + 20);
  *(_DWORD *)(mode + 16) += *(_DWORD *)(mode + 24);
  if ( ++*(_DWORD *)(mode + 40) > 5 )
  {
    *(_DWORD *)(mode + 40) = 0;
    if ( ++*(_DWORD *)(mode + 36) > 3 )
      *(_DWORD *)mode = 0;
  }
  if ( *(_DWORD *)(mode + 8) )
  {
    v3 = &v4 + 4 * *(_DWORD *)(mode + 36);
    result = mode + 52;
    *(_DWORD *)result = *v3;
    *(_DWORD *)(result + 4) = v3[1];
    *(_DWORD *)(result + 8) = v3[2];
    *(_DWORD *)(result + 12) = v3[3];
  }
  else
  {
    v1 = &v20 + 4 * *(_DWORD *)(mode + 36);
    result = mode + 52;
    *(_DWORD *)result = *v1;
    *(_DWORD *)(result + 4) = v1[1];
    *(_DWORD *)(result + 8) = v1[2];
    *(_DWORD *)(result + 12) = v1[3];
  }
  return result;
}

//----- (00409880) --------------------------------------------------------
// mode 0: green disc, mode 1: diamond explosion
int __cdecl Rising_Disc_And_Exploding_Diamond(BOOL mode)
{
  int result; // eax@1
  int *v2; // eax@9
  int v3; // ecx@9
  int *v4; // ecx@14
  int v5; // edx@14
  int *v6; // edx@15
  int v7; // eax@15
  int v8; // [sp+0h] [bp-B4h]@1
  int v9; // [sp+4h] [bp-B0h]@1
  int v10; // [sp+8h] [bp-ACh]@1
  int v11; // [sp+Ch] [bp-A8h]@1
  int v12; // [sp+10h] [bp-A4h]@1
  int v13; // [sp+14h] [bp-A0h]@1
  int v14; // [sp+18h] [bp-9Ch]@1
  int v15; // [sp+1Ch] [bp-98h]@1
  int v16; // [sp+20h] [bp-94h]@1
  int v17; // [sp+24h] [bp-90h]@1
  int v18; // [sp+28h] [bp-8Ch]@1
  int v19; // [sp+2Ch] [bp-88h]@1
  int v20; // [sp+30h] [bp-84h]@1
  int v21; // [sp+34h] [bp-80h]@1
  int v22; // [sp+38h] [bp-7Ch]@1
  int v23; // [sp+3Ch] [bp-78h]@1
  int v24; // [sp+40h] [bp-74h]@1
  int v25; // [sp+44h] [bp-70h]@1
  int v26; // [sp+48h] [bp-6Ch]@1
  int v27; // [sp+4Ch] [bp-68h]@1
  int v28; // [sp+50h] [bp-64h]@1
  int v29; // [sp+54h] [bp-60h]@1
  int v30; // [sp+58h] [bp-5Ch]@1
  int v31; // [sp+5Ch] [bp-58h]@1
  int v32; // [sp+60h] [bp-54h]@1
  int v33; // [sp+64h] [bp-50h]@1
  int v34; // [sp+68h] [bp-4Ch]@1
  int v35; // [sp+6Ch] [bp-48h]@1
  int v36; // [sp+70h] [bp-44h]@1
  int v37; // [sp+74h] [bp-40h]@1
  int v38; // [sp+78h] [bp-3Ch]@1
  int v39; // [sp+7Ch] [bp-38h]@1
  int v40; // [sp+80h] [bp-34h]@1
  int v41; // [sp+84h] [bp-30h]@1
  int v42; // [sp+88h] [bp-2Ch]@1
  int v43; // [sp+8Ch] [bp-28h]@1
  int v44; // [sp+90h] [bp-24h]@1
  int v45; // [sp+94h] [bp-20h]@1
  int v46; // [sp+98h] [bp-1Ch]@1
  int v47; // [sp+9Ch] [bp-18h]@1
  int v48; // [sp+A0h] [bp-14h]@1
  int v49; // [sp+A4h] [bp-10h]@1
  int v50; // [sp+A8h] [bp-Ch]@1
  int v51; // [sp+ACh] [bp-8h]@1
  int v52; // [sp+B0h] [bp-4h]@1

  v37 = 0;
  v38 = 32;
  v39 = 16;
  v40 = 48;
  v41 = 16;
  v42 = 32;
  v43 = 32;
  v44 = 48;
  v45 = 32;
  v46 = 32;
  v47 = 48;
  v48 = 48;
  v49 = 48;
  v50 = 32;
  v51 = 64;
  v52 = 48;
  v21 = 176;
  v22 = 0;
  v23 = 192;
  v24 = 16;
  v25 = 192;
  v26 = 0;
  v27 = 208;
  v28 = 16;
  v29 = 208;
  v30 = 0;
  v31 = 224;
  v32 = 16;
  v33 = 224;
  v34 = 0;
  v35 = 240;
  v36 = 16;
  v9 = 0;
  v10 = 32;
  v11 = 16;
  v12 = 48;
  v13 = 32;
  v14 = 32;
  v15 = 48;
  v16 = 48;
  v17 = 16;
  v18 = 32;
  v19 = 32;
  v20 = 48;
  result = mode;
  v8 = *(_DWORD *)(mode + 8);
  if ( v8 )
  {
    if ( v8 == 1 )
    {
      v6 = &v9 + 4 * (++*(_DWORD *)(mode + 40) / 2 % 3);
      v7 = mode + 52;
      *(_DWORD *)v7 = *v6;
      *(_DWORD *)(v7 + 4) = v6[1];
      *(_DWORD *)(v7 + 8) = v6[2];
      *(_DWORD *)(v7 + 12) = v6[3];
      result = mode;
      if ( *(_DWORD *)(mode + 40) > 24 )
        *(_DWORD *)mode = 0;
    }
    else if ( v8 == 2 )
    {
      if ( ++*(_DWORD *)(mode + 40) > 2 )
      {
        *(_DWORD *)(mode + 40) = 0;
        ++*(_DWORD *)(mode + 36);
      }
      if ( *(_DWORD *)(mode + 36) > 3 )
        *(_DWORD *)mode = 0;
      v4 = &v21 + 4 * *(_DWORD *)(mode + 36);
      v5 = mode + 52;
      *(_DWORD *)v5 = *v4;
      *(_DWORD *)(v5 + 4) = v4[1];
      result = v4[2];
      *(_DWORD *)(v5 + 8) = result;
      *(_DWORD *)(v5 + 12) = v4[3];
    }
  }
  else
  {
    *(_DWORD *)(mode + 24) -= 16;
    *(_DWORD *)(mode + 16) += *(_DWORD *)(mode + 24);
    if ( ++*(_DWORD *)(mode + 40) > 5 )
    {
      *(_DWORD *)(mode + 40) = 0;
      ++*(_DWORD *)(mode + 36);
    }
    if ( *(_DWORD *)(mode + 36) > 3 )
      *(_DWORD *)mode = 0;
    v2 = &v37 + 4 * *(_DWORD *)(mode + 36);
    v3 = mode + 52;
    *(_DWORD *)v3 = *v2;
    *(_DWORD *)(v3 + 4) = v2[1];
    *(_DWORD *)(v3 + 8) = v2[2];
    result = v2[3];
    *(_DWORD *)(v3 + 12) = result;
  }
  return result;
}

//----- (00409B80) --------------------------------------------------------
// Mode 0 only
int __cdecl Star(BOOL mode)
{
  int *v1; // eax@4
  int v2; // ecx@4
  int result; // eax@4
  int v4; // [sp+0h] [bp-40h]@1
  int v5; // [sp+4h] [bp-3Ch]@1
  int v6; // [sp+8h] [bp-38h]@1
  int v7; // [sp+Ch] [bp-34h]@1
  int v8; // [sp+10h] [bp-30h]@1
  int v9; // [sp+14h] [bp-2Ch]@1
  int v10; // [sp+18h] [bp-28h]@1
  int v11; // [sp+1Ch] [bp-24h]@1
  int v12; // [sp+20h] [bp-20h]@1
  int v13; // [sp+24h] [bp-1Ch]@1
  int v14; // [sp+28h] [bp-18h]@1
  int v15; // [sp+2Ch] [bp-14h]@1
  int v16; // [sp+30h] [bp-10h]@1
  int v17; // [sp+34h] [bp-Ch]@1
  int v18; // [sp+38h] [bp-8h]@1
  int v19; // [sp+3Ch] [bp-4h]@1

  v4 = 0;
  v5 = 48;
  v6 = 16;
  v7 = 64;
  v8 = 16;
  v9 = 48;
  v10 = 32;
  v11 = 64;
  v12 = 32;
  v13 = 48;
  v14 = 48;
  v15 = 64;
  v16 = 48;
  v17 = 48;
  v18 = 64;
  v19 = 64;
  if ( ++*(_DWORD *)(mode + 40) > 2 )
  {
    *(_DWORD *)(mode + 40) = 0;
    if ( ++*(_DWORD *)(mode + 36) > 3 )
      *(_DWORD *)mode = 0;
  }
  v1 = &v4 + 4 * *(_DWORD *)(mode + 36);
  v2 = mode + 52;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  *(_DWORD *)(v2 + 8) = v1[2];
  result = v1[3];
  *(_DWORD *)(v2 + 12) = result;
  return result;
}

//----- (00409C70) --------------------------------------------------------
// mode 0 only
int __cdecl Fireball_Impact(BOOL mode)
{
  int *v1; // ecx@4
  int v2; // edx@4
  int result; // eax@4
  int v4; // [sp+0h] [bp-90h]@1
  int v5; // [sp+4h] [bp-8Ch]@1
  int v6; // [sp+8h] [bp-88h]@1
  int v7; // [sp+Ch] [bp-84h]@1
  int v8; // [sp+10h] [bp-80h]@1
  int v9; // [sp+14h] [bp-7Ch]@1
  int v10; // [sp+18h] [bp-78h]@1
  int v11; // [sp+1Ch] [bp-74h]@1
  int v12; // [sp+20h] [bp-70h]@1
  int v13; // [sp+24h] [bp-6Ch]@1
  int v14; // [sp+28h] [bp-68h]@1
  int v15; // [sp+2Ch] [bp-64h]@1
  int v16; // [sp+30h] [bp-60h]@1
  int v17; // [sp+34h] [bp-5Ch]@1
  int v18; // [sp+38h] [bp-58h]@1
  int v19; // [sp+3Ch] [bp-54h]@1
  int v20; // [sp+40h] [bp-50h]@1
  int v21; // [sp+44h] [bp-4Ch]@1
  int v22; // [sp+48h] [bp-48h]@1
  int v23; // [sp+4Ch] [bp-44h]@1
  int v24; // [sp+50h] [bp-40h]@1
  int v25; // [sp+54h] [bp-3Ch]@1
  int v26; // [sp+58h] [bp-38h]@1
  int v27; // [sp+5Ch] [bp-34h]@1
  int v28; // [sp+60h] [bp-30h]@1
  int v29; // [sp+64h] [bp-2Ch]@1
  int v30; // [sp+68h] [bp-28h]@1
  int v31; // [sp+6Ch] [bp-24h]@1
  int v32; // [sp+70h] [bp-20h]@1
  int v33; // [sp+74h] [bp-1Ch]@1
  int v34; // [sp+78h] [bp-18h]@1
  int v35; // [sp+7Ch] [bp-14h]@1
  int v36; // [sp+80h] [bp-10h]@1
  int v37; // [sp+84h] [bp-Ch]@1
  int v38; // [sp+88h] [bp-8h]@1
  int v39; // [sp+8Ch] [bp-4h]@1

  v4 = 64;
  v5 = 32;
  v6 = 80;
  v7 = 48;
  v8 = 80;
  v9 = 32;
  v10 = 96;
  v11 = 48;
  v12 = 96;
  v13 = 32;
  v14 = 112;
  v15 = 48;
  v16 = 64;
  v17 = 48;
  v18 = 80;
  v19 = 64;
  v20 = 80;
  v21 = 48;
  v22 = 96;
  v23 = 64;
  v24 = 96;
  v25 = 48;
  v26 = 112;
  v27 = 64;
  v28 = 64;
  v29 = 64;
  v30 = 80;
  v31 = 80;
  v32 = 80;
  v33 = 64;
  v34 = 96;
  v35 = 80;
  v36 = 96;
  v37 = 64;
  v38 = 112;
  v39 = 80;
  if ( ++*(_DWORD *)(mode + 40) > 1 )
  {
    *(_DWORD *)(mode + 40) = 0;
    if ( ++*(_DWORD *)(mode + 36) > 2 )
      *(_DWORD *)mode = 0;
  }
  v1 = &v4 + 4 * (*(_DWORD *)(mode + 36) + 3 * *(_DWORD *)(mode + 8));
  v2 = mode + 52;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  result = v1[2];
  *(_DWORD *)(v2 + 8) = result;
  *(_DWORD *)(v2 + 12) = v1[3];
  return result;
}

//----- (00409E00) --------------------------------------------------------
// mode 0 only
int __cdecl ZzZ___(BOOL mode)
{
  int *v1; // eax@5
  int v2; // ecx@5
  int result; // eax@5
  int v4; // [sp+0h] [bp-70h]@1
  int v5; // [sp+4h] [bp-6Ch]@1
  int v6; // [sp+8h] [bp-68h]@1
  int v7; // [sp+Ch] [bp-64h]@1
  int v8; // [sp+10h] [bp-60h]@1
  int v9; // [sp+14h] [bp-5Ch]@1
  int v10; // [sp+18h] [bp-58h]@1
  int v11; // [sp+1Ch] [bp-54h]@1
  int v12; // [sp+20h] [bp-50h]@1
  int v13; // [sp+24h] [bp-4Ch]@1
  int v14; // [sp+28h] [bp-48h]@1
  int v15; // [sp+2Ch] [bp-44h]@1
  int v16; // [sp+30h] [bp-40h]@1
  int v17; // [sp+34h] [bp-3Ch]@1
  int v18; // [sp+38h] [bp-38h]@1
  int v19; // [sp+3Ch] [bp-34h]@1
  int v20; // [sp+40h] [bp-30h]@1
  int v21; // [sp+44h] [bp-2Ch]@1
  int v22; // [sp+48h] [bp-28h]@1
  int v23; // [sp+4Ch] [bp-24h]@1
  int v24; // [sp+50h] [bp-20h]@1
  int v25; // [sp+54h] [bp-1Ch]@1
  int v26; // [sp+58h] [bp-18h]@1
  int v27; // [sp+5Ch] [bp-14h]@1
  int v28; // [sp+60h] [bp-10h]@1
  int v29; // [sp+64h] [bp-Ch]@1
  int v30; // [sp+68h] [bp-8h]@1
  int v31; // [sp+6Ch] [bp-4h]@1

  v4 = 32;
  v5 = 64;
  v6 = 40;
  v7 = 72;
  v8 = 32;
  v9 = 72;
  v10 = 40;
  v11 = 80;
  v12 = 40;
  v13 = 64;
  v14 = 48;
  v15 = 72;
  v16 = 40;
  v17 = 72;
  v18 = 48;
  v19 = 80;
  v20 = 40;
  v21 = 64;
  v22 = 48;
  v23 = 72;
  v24 = 40;
  v25 = 72;
  v26 = 48;
  v27 = 80;
  v28 = 40;
  v29 = 64;
  v30 = 48;
  v31 = 72;
  if ( ++*(_DWORD *)(mode + 40) > 4 )
  {
    *(_DWORD *)(mode + 40) = 0;
    ++*(_DWORD *)(mode + 36);
  }
  if ( *(_DWORD *)(mode + 36) > 6 )
    *(_DWORD *)mode = 0;
  *(_DWORD *)(mode + 12) += 128;
  *(_DWORD *)(mode + 16) -= 128;
  v1 = &v4 + 4 * *(_DWORD *)(mode + 36);
  v2 = mode + 52;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  *(_DWORD *)(v2 + 8) = v1[2];
  result = v1[3];
  *(_DWORD *)(v2 + 12) = result;
  return result;
}

//----- (00409F60) --------------------------------------------------------
// mode 0 only
int __cdecl Booster_Smoke(BOOL mode)
{
  int *v1; // eax@4
  int v2; // ecx@4
  int result; // eax@4
  int v4; // [sp+4h] [bp-70h]@1
  int v5; // [sp+8h] [bp-6Ch]@1
  int v6; // [sp+Ch] [bp-68h]@1
  int v7; // [sp+10h] [bp-64h]@1
  int v8; // [sp+14h] [bp-60h]@1
  int v9; // [sp+18h] [bp-5Ch]@1
  int v10; // [sp+1Ch] [bp-58h]@1
  int v11; // [sp+20h] [bp-54h]@1
  int v12; // [sp+24h] [bp-50h]@1
  int v13; // [sp+28h] [bp-4Ch]@1
  int v14; // [sp+2Ch] [bp-48h]@1
  int v15; // [sp+30h] [bp-44h]@1
  int v16; // [sp+34h] [bp-40h]@1
  int v17; // [sp+38h] [bp-3Ch]@1
  int v18; // [sp+3Ch] [bp-38h]@1
  int v19; // [sp+40h] [bp-34h]@1
  int v20; // [sp+44h] [bp-30h]@1
  int v21; // [sp+48h] [bp-2Ch]@1
  int v22; // [sp+4Ch] [bp-28h]@1
  int v23; // [sp+50h] [bp-24h]@1
  int v24; // [sp+54h] [bp-20h]@1
  int v25; // [sp+58h] [bp-1Ch]@1
  int v26; // [sp+5Ch] [bp-18h]@1
  int v27; // [sp+60h] [bp-14h]@1
  int v28; // [sp+64h] [bp-10h]@1
  int v29; // [sp+68h] [bp-Ch]@1
  int v30; // [sp+6Ch] [bp-8h]@1
  int v31; // [sp+70h] [bp-4h]@1

  v4 = 56;
  v5 = 0;
  v6 = 64;
  v7 = 8;
  v8 = 64;
  v9 = 0;
  v10 = 72;
  v11 = 8;
  v12 = 72;
  v13 = 0;
  v14 = 80;
  v15 = 8;
  v16 = 80;
  v17 = 0;
  v18 = 88;
  v19 = 8;
  v20 = 88;
  v21 = 0;
  v22 = 96;
  v23 = 8;
  v24 = 96;
  v25 = 0;
  v26 = 104;
  v27 = 8;
  v28 = 104;
  v29 = 0;
  v30 = 112;
  v31 = 8;
  if ( ++*(_DWORD *)(mode + 40) > 1 )
  {
    *(_DWORD *)(mode + 40) = 0;
    if ( ++*(_DWORD *)(mode + 36) > 6 )
      *(_DWORD *)mode = 0;
  }
  v1 = &v4 + 4 * *(_DWORD *)(mode + 36);
  v2 = mode + 52;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  *(_DWORD *)(v2 + 8) = v1[2];
  *(_DWORD *)(v2 + 12) = v1[3];
  result = *(_DWORD *)(mode + 8);
  switch ( result )
  {
    case 0:
      result = mode;
      *(_DWORD *)(mode + 12) -= 1024;
      break;
    case 1:
      result = mode;
      *(_DWORD *)(mode + 16) -= 1024;
      break;
    case 2:
      result = mode;
      *(_DWORD *)(mode + 12) += 1024;
      break;
    case 3:
      result = mode;
      *(_DWORD *)(mode + 16) += 1024;
      break;
    default:
      return result;
  }
  return result;
}

//----- (0040A120) --------------------------------------------------------
// mode 0: face left, mode 1: face right
signed int __cdecl Drowned_Quote(BOOL mode)
{
  int v1; // ecx@2
  signed int result; // eax@2
  int v3; // ecx@3

  if ( *(_DWORD *)(mode + 8) )
  {
    v3 = mode + 52;
    *(_DWORD *)v3 = 32;
    *(_DWORD *)(v3 + 4) = 80;
    *(_DWORD *)(v3 + 8) = 48;
    result = 96;
    *(_DWORD *)(v3 + 12) = 96;
  }
  else
  {
    v1 = mode + 52;
    *(_DWORD *)v1 = 16;
    *(_DWORD *)(v1 + 4) = 80;
    *(_DWORD *)(v1 + 8) = 32;
    result = 96;
    *(_DWORD *)(v1 + 12) = 96;
  }
  return result;
}

//----- (0040A1B0) --------------------------------------------------------
// mode 0: question mark, mode 1: exclamation mark
signed int __cdecl Exclamation(BOOL mode)
{
  int v1; // ecx@6
  signed int result; // eax@6
  int v3; // ecx@7

  if ( ++*(_DWORD *)(mode + 40) < 5 )
    *(_DWORD *)(mode + 16) -= 2048;
  if ( *(_DWORD *)(mode + 40) == 32 )
    *(_DWORD *)mode = 0;
  if ( *(_DWORD *)(mode + 8) )
  {
    v3 = mode + 52;
    *(_DWORD *)v3 = 48;
    *(_DWORD *)(v3 + 4) = 64;
    *(_DWORD *)(v3 + 8) = 64;
    result = 80;
    *(_DWORD *)(v3 + 12) = 80;
  }
  else
  {
    v1 = mode + 52;
    *(_DWORD *)v1 = 0;
    *(_DWORD *)(v1 + 4) = 80;
    *(_DWORD *)(v1 + 8) = 16;
    result = 96;
    *(_DWORD *)(v1 + 12) = 96;
  }
  return result;
}

//----- (0040A280) --------------------------------------------------------
// mode 0: level up, mode 1: level down
signed int __cdecl Level_Up_Or_Down(BOOL mode)
{
  int *v1; // eax@12
  int v2; // ecx@12
  signed int result; // eax@12
  int *v4; // edx@13
  int v5; // [sp+0h] [bp-40h]@1
  int v6; // [sp+4h] [bp-3Ch]@1
  int v7; // [sp+8h] [bp-38h]@1
  int v8; // [sp+Ch] [bp-34h]@1
  int v9; // [sp+10h] [bp-30h]@1
  int v10; // [sp+14h] [bp-2Ch]@1
  int v11; // [sp+18h] [bp-28h]@1
  int v12; // [sp+1Ch] [bp-24h]@1
  int v13; // [sp+20h] [bp-20h]@1
  int v14; // [sp+24h] [bp-1Ch]@1
  int v15; // [sp+28h] [bp-18h]@1
  int v16; // [sp+2Ch] [bp-14h]@1
  int v17; // [sp+30h] [bp-10h]@1
  int v18; // [sp+34h] [bp-Ch]@1
  int v19; // [sp+38h] [bp-8h]@1
  int v20; // [sp+3Ch] [bp-4h]@1

  v13 = 0;
  v14 = 0;
  v15 = 56;
  v16 = 16;
  v17 = 0;
  v18 = 16;
  v19 = 56;
  v20 = 32;
  v5 = 0;
  v6 = 96;
  v7 = 56;
  v8 = 112;
  v9 = 0;
  v10 = 112;
  v11 = 56;
  v12 = 128;
  ++*(_DWORD *)(mode + 40);
  if ( *(_DWORD *)(mode + 8) )
  {
    if ( *(_DWORD *)(mode + 40) < 20 )
      *(_DWORD *)(mode + 16) -= 512;
    if ( *(_DWORD *)(mode + 40) == 80 )
      *(_DWORD *)mode = 0;
  }
  else
  {
    if ( *(_DWORD *)(mode + 40) < 20 )
      *(_DWORD *)(mode + 16) -= 1024;
    if ( *(_DWORD *)(mode + 40) == 80 )
      *(_DWORD *)mode = 0;
  }
  if ( *(_DWORD *)(mode + 8) )
  {
    v4 = &v5 + 4 * (*(_DWORD *)(mode + 40) / 2 % 2);
    result = mode + 52;
    *(_DWORD *)result = *v4;
    *(_DWORD *)(result + 4) = v4[1];
    *(_DWORD *)(result + 8) = v4[2];
    *(_DWORD *)(result + 12) = v4[3];
  }
  else
  {
    v1 = &v13 + 4 * (*(_DWORD *)(mode + 40) / 2 % 2);
    v2 = mode + 52;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    *(_DWORD *)(v2 + 8) = v1[2];
    result = v1[3];
    *(_DWORD *)(v2 + 12) = result;
  }
  return result;
}

//----- (0040A3F0) --------------------------------------------------------
// mode 0 only
signed int __cdecl Red_Damage_Rings(BOOL mode)
{
  int *v1; // ecx@6
  int v2; // edx@6
  signed int result; // eax@6
  int v4; // [sp+0h] [bp-78h]@3
  int v5; // [sp+4h] [bp-74h]@3
  int v6; // [sp+8h] [bp-70h]@3
  int v7; // [sp+Ch] [bp-6Ch]@3
  int v8; // [sp+10h] [bp-68h]@3
  int v9; // [sp+14h] [bp-64h]@3
  int v10; // [sp+18h] [bp-60h]@3
  int v11; // [sp+1Ch] [bp-5Ch]@3
  int v12; // [sp+20h] [bp-58h]@3
  int v13; // [sp+24h] [bp-54h]@3
  int v14; // [sp+28h] [bp-50h]@3
  int v15; // [sp+2Ch] [bp-4Ch]@3
  int v16; // [sp+30h] [bp-48h]@3
  int v17; // [sp+34h] [bp-44h]@3
  int v18; // [sp+38h] [bp-40h]@3
  int v19; // [sp+3Ch] [bp-3Ch]@3
  int v20; // [sp+40h] [bp-38h]@3
  int v21; // [sp+44h] [bp-34h]@3
  int v22; // [sp+48h] [bp-30h]@3
  int v23; // [sp+4Ch] [bp-2Ch]@3
  int v24; // [sp+50h] [bp-28h]@3
  int v25; // [sp+54h] [bp-24h]@3
  int v26; // [sp+58h] [bp-20h]@3
  int v27; // [sp+5Ch] [bp-1Ch]@3
  int v28; // [sp+60h] [bp-18h]@3
  int v29; // [sp+64h] [bp-14h]@3
  int v30; // [sp+68h] [bp-10h]@3
  int v31; // [sp+6Ch] [bp-Ch]@3
  char v32; // [sp+77h] [bp-1h]@2

  if ( !*(_DWORD *)(mode + 28) )
  {
    *(_DWORD *)(mode + 28) = 1;
    v32 = RNG_Range(0, 255);
    *(_DWORD *)(mode + 20) = 2 * COS_function(v32);
    *(_DWORD *)(mode + 24) = 2 * SIN_function(v32);
  }
  *(_DWORD *)(mode + 12) += *(_DWORD *)(mode + 20);
  *(_DWORD *)(mode + 16) += *(_DWORD *)(mode + 24);
  v4 = 56;
  v5 = 8;
  v6 = 64;
  v7 = 16;
  v8 = 64;
  v9 = 8;
  v10 = 72;
  v11 = 16;
  v12 = 72;
  v13 = 8;
  v14 = 80;
  v15 = 16;
  v16 = 80;
  v17 = 8;
  v18 = 88;
  v19 = 16;
  v20 = 88;
  v21 = 8;
  v22 = 96;
  v23 = 16;
  v24 = 96;
  v25 = 8;
  v26 = 104;
  v27 = 16;
  v28 = 104;
  v29 = 8;
  v30 = 112;
  v31 = 16;
  if ( ++*(_DWORD *)(mode + 40) > 2 )
  {
    *(_DWORD *)(mode + 40) = 0;
    if ( ++*(_DWORD *)(mode + 36) > 6 )
      *(_DWORD *)mode = 0;
  }
  v1 = &v4 + 4 * *(_DWORD *)(mode + 36);
  v2 = mode + 52;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  result = v1[2];
  *(_DWORD *)(v2 + 8) = result;
  *(_DWORD *)(v2 + 12) = v1[3];
  return result;
}

//----- (0040A5A0) --------------------------------------------------------
// mode 0 only
signed int __cdecl Big_Explosion(BOOL mode)
{
  int *v1; // eax@4
  int v2; // ecx@4
  signed int result; // eax@4
  int v4; // [sp+0h] [bp-20h]@1
  int v5; // [sp+4h] [bp-1Ch]@1
  int v6; // [sp+8h] [bp-18h]@1
  int v7; // [sp+Ch] [bp-14h]@1
  int v8; // [sp+10h] [bp-10h]@1
  int v9; // [sp+14h] [bp-Ch]@1
  int v10; // [sp+18h] [bp-8h]@1
  int v11; // [sp+1Ch] [bp-4h]@1

  v4 = 112;
  v5 = 0;
  v6 = 144;
  v7 = 32;
  v8 = 144;
  v9 = 0;
  v10 = 176;
  v11 = 32;
  if ( ++*(_DWORD *)(mode + 40) > 2 )
  {
    *(_DWORD *)(mode + 40) = 0;
    if ( ++*(_DWORD *)(mode + 36) > 1 )
      *(_DWORD *)mode = 0;
  }
  v1 = &v4 + 4 * *(_DWORD *)(mode + 36);
  v2 = mode + 52;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  *(_DWORD *)(v2 + 8) = v1[2];
  result = v1[3];
  *(_DWORD *)(v2 + 12) = result;
  return result;
}

//----- (0040A650) --------------------------------------------------------
// mode 0 only
signed int __cdecl Headbump_Sparks(BOOL mode)
{
  int *v1; // edx@11
  int v2; // eax@11
  signed int result; // eax@11
  int v4; // [sp+4h] [bp-24h]@2
  int v5; // [sp+8h] [bp-20h]@1
  int v6; // [sp+Ch] [bp-1Ch]@1
  int v7; // [sp+10h] [bp-18h]@1
  int v8; // [sp+14h] [bp-14h]@1
  int v9; // [sp+18h] [bp-10h]@1
  int v10; // [sp+1Ch] [bp-Ch]@1
  int v11; // [sp+20h] [bp-8h]@1
  int v12; // [sp+24h] [bp-4h]@1

  v5 = 56;
  v6 = 24;
  v7 = 64;
  v8 = 32;
  v9 = 0;
  v10 = 0;
  v11 = 0;
  v12 = 0;
  if ( !*(_DWORD *)(mode + 28) )
  {
    *(_DWORD *)(mode + 28) = 1;
    v4 = *(_DWORD *)(mode + 8);
    if ( v4 )
    {
      if ( v4 == 1 )
        *(_DWORD *)(mode + 24) = -512 * RNG_Range(1, 3);
    }
    else
    {
      *(_DWORD *)(mode + 20) = RNG_Range(-1536, 1536);
      *(_DWORD *)(mode + 24) = RNG_Range(-512, 512);
    }
  }
  if ( !*(_DWORD *)(mode + 8) )
  {
    *(_DWORD *)(mode + 20) = 4 * *(_DWORD *)(mode + 20) / 5;
    *(_DWORD *)(mode + 24) = 4 * *(_DWORD *)(mode + 24) / 5;
  }
  *(_DWORD *)(mode + 12) += *(_DWORD *)(mode + 20);
  *(_DWORD *)(mode + 16) += *(_DWORD *)(mode + 24);
  if ( ++*(_DWORD *)(mode + 40) > 20 )
    *(_DWORD *)mode = 0;
  v1 = &v5 + 4 * (*(_DWORD *)(mode + 40) / 2 % 2);
  v2 = mode + 52;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  *(_DWORD *)(v2 + 8) = v1[2];
  *(_DWORD *)(v2 + 12) = v1[3];
  result = mode;
  if ( *(_DWORD *)(mode + 8) == 5 )
  {
    result = mode;
    *(_DWORD *)(mode + 12) -= 2048;
  }
  return result;
}

//----- (0040A7E0) --------------------------------------------------------
int __cdecl Unknown_Unused_Effect(int a1)
{
  int *v1; // eax@4
  int v2; // ecx@4
  int result; // eax@4
  int v4; // [sp+0h] [bp-50h]@1
  int v5; // [sp+4h] [bp-4Ch]@1
  int v6; // [sp+8h] [bp-48h]@1
  int v7; // [sp+Ch] [bp-44h]@1
  int v8; // [sp+10h] [bp-40h]@1
  int v9; // [sp+14h] [bp-3Ch]@1
  int v10; // [sp+18h] [bp-38h]@1
  int v11; // [sp+1Ch] [bp-34h]@1
  int v12; // [sp+20h] [bp-30h]@1
  int v13; // [sp+24h] [bp-2Ch]@1
  int v14; // [sp+28h] [bp-28h]@1
  int v15; // [sp+2Ch] [bp-24h]@1
  int v16; // [sp+30h] [bp-20h]@1
  int v17; // [sp+34h] [bp-1Ch]@1
  int v18; // [sp+38h] [bp-18h]@1
  int v19; // [sp+3Ch] [bp-14h]@1
  int v20; // [sp+40h] [bp-10h]@1
  int v21; // [sp+44h] [bp-Ch]@1
  int v22; // [sp+48h] [bp-8h]@1
  int v23; // [sp+4Ch] [bp-4h]@1

  v4 = 0;
  v5 = 96;
  v6 = 40;
  v7 = 136;
  v8 = 40;
  v9 = 96;
  v10 = 80;
  v11 = 136;
  v12 = 80;
  v13 = 96;
  v14 = 120;
  v15 = 136;
  v16 = 120;
  v17 = 96;
  v18 = 160;
  v19 = 136;
  v20 = 160;
  v21 = 96;
  v22 = 200;
  v23 = 136;
  if ( ++*(_DWORD *)(a1 + 40) > 1 )
  {
    *(_DWORD *)(a1 + 40) = 0;
    if ( ++*(_DWORD *)(a1 + 36) > 4 )
      *(_DWORD *)a1 = 0;
  }
  v1 = &v4 + 4 * *(_DWORD *)(a1 + 36);
  v2 = a1 + 52;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  *(_DWORD *)(v2 + 8) = v1[2];
  result = v1[3];
  *(_DWORD *)(v2 + 12) = result;
  return result;
}

//----- (0040A8F0) --------------------------------------------------------
// mode 0 only
signed int __cdecl Small_White_Explosion_Disc(BOOL mode)
{
  int *v1; // eax@4
  int v2; // ecx@4
  signed int result; // eax@4
  int v4; // [sp+0h] [bp-40h]@1
  int v5; // [sp+4h] [bp-3Ch]@1
  int v6; // [sp+8h] [bp-38h]@1
  int v7; // [sp+Ch] [bp-34h]@1
  int v8; // [sp+10h] [bp-30h]@1
  int v9; // [sp+14h] [bp-2Ch]@1
  int v10; // [sp+18h] [bp-28h]@1
  int v11; // [sp+1Ch] [bp-24h]@1
  int v12; // [sp+20h] [bp-20h]@1
  int v13; // [sp+24h] [bp-1Ch]@1
  int v14; // [sp+28h] [bp-18h]@1
  int v15; // [sp+2Ch] [bp-14h]@1
  int v16; // [sp+30h] [bp-10h]@1
  int v17; // [sp+34h] [bp-Ch]@1
  int v18; // [sp+38h] [bp-8h]@1
  int v19; // [sp+3Ch] [bp-4h]@1

  v4 = 0;
  v5 = 72;
  v6 = 8;
  v7 = 80;
  v8 = 8;
  v9 = 72;
  v10 = 16;
  v11 = 80;
  v12 = 16;
  v13 = 72;
  v14 = 24;
  v15 = 80;
  v16 = 24;
  v17 = 72;
  v18 = 32;
  v19 = 80;
  if ( ++*(_DWORD *)(mode + 40) > 2 )
  {
    *(_DWORD *)(mode + 40) = 0;
    if ( ++*(_DWORD *)(mode + 36) > 3 )
      *(_DWORD *)mode = 0;
  }
  v1 = &v4 + 4 * *(_DWORD *)(mode + 36);
  v2 = mode + 52;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  *(_DWORD *)(v2 + 8) = v1[2];
  result = v1[3];
  *(_DWORD *)(v2 + 12) = result;
  return result;
}

//----- (0040A9E0) --------------------------------------------------------
// mode 0 only
signed int __cdecl Empty__Effect_(BOOL mode)
{
  int *v1; // ecx@5
  int v2; // edx@5
  signed int result; // eax@5
  int v4; // [sp+0h] [bp-20h]@1
  int v5; // [sp+4h] [bp-1Ch]@1
  int v6; // [sp+8h] [bp-18h]@1
  int v7; // [sp+Ch] [bp-14h]@1
  int v8; // [sp+10h] [bp-10h]@1
  int v9; // [sp+14h] [bp-Ch]@1
  int v10; // [sp+18h] [bp-8h]@1
  int v11; // [sp+1Ch] [bp-4h]@1

  v4 = 104;
  v5 = 96;
  v6 = 144;
  v7 = 104;
  v8 = 104;
  v9 = 104;
  v10 = 144;
  v11 = 112;
  if ( ++*(_DWORD *)(mode + 40) < 10 )
    *(_DWORD *)(mode + 16) -= 1024;
  if ( *(_DWORD *)(mode + 40) == 40 )
    *(_DWORD *)mode = 0;
  v1 = &v4 + 4 * (*(_DWORD *)(mode + 40) / 2 % 2);
  v2 = mode + 52;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  result = v1[2];
  *(_DWORD *)(v2 + 8) = result;
  *(_DWORD *)(v2 + 12) = v1[3];
  return result;
}

//----- (0040AAA0) --------------------------------------------------------
// mode 0 only
signed int __cdecl Push_Jump_Key_Effect(BOOL mode)
{
  signed int result; // eax@4

  if ( ++*(_DWORD *)(mode + 40) >= 40 )
    *(_DWORD *)(mode + 40) = 0;
  if ( *(_DWORD *)(mode + 40) >= 30 )
  {
    result = mode + 52;
    *(_DWORD *)result = 0;
    *(_DWORD *)(result + 4) = 0;
    *(_DWORD *)(result + 8) = 0;
    *(_DWORD *)(result + 12) = 0;
  }
  else
  {
    result = mode + 52;
    *(_DWORD *)result = 0;
    *(_DWORD *)(result + 4) = 144;
    *(_DWORD *)(result + 8) = 144;
    *(_DWORD *)(result + 12) = 152;
  }
  return result;
}

//----- (0040AB50) --------------------------------------------------------
int Update_All_Effects()
{
  int result; // eax@5
  signed int i; // [sp+4h] [bp-4h]@1

  for ( i = 0; i < 64; ++i )
  {
    if ( *((_DWORD *)&EffectObj_InUse + 17 * i) & 0x80 )
      ((void (__cdecl *)(_DWORD))*(&ROM_PEffects + EffectObj_ID[17 * i]))((char *)&EffectObj_InUse + 68 * i);
    result = i + 1;
  }
  return result;
}
// 409670: using guessed type int __cdecl No_Effect(_DWORD);
// 48F8C0: using guessed type int (*ROM_PEffects)();
// 49BCAC: using guessed type int EffectObj_ID[];

//----- (0040ABC0) --------------------------------------------------------
int __cdecl Draw_All_Effect_Obj(signed int a1, signed int a2)
{
  int result; // eax@5
  __int64 v3; // rax@4
  int v4; // ST08_4@4
  __int64 v5; // rax@4
  signed int i; // [sp+0h] [bp-4h]@1

  for ( i = 0; i < 64; ++i )
  {
    if ( *((_DWORD *)&EffectObj_InUse + 17 * i) & 0x80 )
    {
      v3 = EffectObj_Y_Position[17 * i] - EffectObj_Y_Offset[17 * i];
      v4 = (((WORD2(v3) & 0x1FF) + (signed int)v3) >> 9) - a2 / 512;
      v5 = EffectObj_X_Position[17 * i] - EffectObj_X_Offset[17 * i];
      Render_Graphics(
        (int)&FullscreenRect,
        (((WORD2(v5) & 0x1FF) + (signed int)v5) >> 9) - a1 / 512,
        v4,
        (int)&EffectObj_Rect + 68 * i,
        19);
    }
    result = i + 1;
  }
  return result;
}
// 48F91C: using guessed type int FullscreenRect;
// 49BCB4: using guessed type int EffectObj_X_Position[];
// 49BCB8: using guessed type int EffectObj_Y_Position[];
// 49BCD4: using guessed type int EffectObj_X_Offset[];
// 49BCD8: using guessed type int EffectObj_Y_Offset[];

//----- (0040AC90) --------------------------------------------------------
int __cdecl Create_Animated_Effect(int X_Position, int Y_Position, int Effect_ID, int Effect_Mode)
{
  int result; // eax@4
  signed int i; // [sp+0h] [bp-4h]@1

  for ( i = 0; i < 64 && *((_DWORD *)&EffectObj_InUse + 17 * i); ++i )
    result = i + 1;
  if ( i != 64 )
  {
    memset((char *)&EffectObj_InUse + 68 * i, 0, 0x44u);
    *((_DWORD *)&EffectObj_InUse + 17 * i) = 128;
    EffectObj_ID[17 * i] = Effect_ID;
    EffectObj_X_Position[17 * i] = X_Position;
    EffectObj_Y_Position[17 * i] = Y_Position;
    EffectObj_X_Offset[17 * i] = dword_48F830[2 * Effect_ID];
    result = dword_48F834[2 * Effect_ID];
    EffectObj_Y_Offset[17 * i] = result;
    EffectObj_Mode[17 * i] = Effect_Mode;
  }
  return result;
}
// 48F830: using guessed type int dword_48F830[];
// 48F834: using guessed type int dword_48F834[];
// 49BCAC: using guessed type int EffectObj_ID[];
// 49BCB0: using guessed type int EffectObj_Mode[];
// 49BCB4: using guessed type int EffectObj_X_Position[];
// 49BCB8: using guessed type int EffectObj_Y_Position[];
// 49BCD4: using guessed type int EffectObj_X_Offset[];
// 49BCD8: using guessed type int EffectObj_Y_Offset[];

//----- (0040AD60) --------------------------------------------------------
// Load Config.dat, check string DOUKUTSU20041206 (return 0 if not equal)
int __cdecl Load_Config_dat(char *str1)
{
  int result; // eax@2
  int v2; // eax@3
  char str; // [sp+0h] [bp-118h]@1
  int v4; // [sp+10Ch] [bp-Ch]@1
  int v5; // [sp+110h] [bp-8h]@3
  FILE *stream; // [sp+114h] [bp-4h]@1

  v4 = dword_498B20;
  memset(str1, 0, 0x94u);
  sprintf(&str, "%s\\%s", FullExePath, off_48F90C[0]);
  stream = fopen(&str, "rb");
  if ( stream )
  {
    sub_480F55((FILE *)str1, 0x94u, 1u, stream);
    v5 = v2;
    fclose(stream);
    if ( v5 == 1 && !strcmp(str1, str2) )
    {
      result = 1;
    }
    else
    {
      memset(str1, 0, 0x94u);
      result = 0;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}
// 48F90C: using guessed type char *off_48F90C[2];
// 498B20: using guessed type int dword_498B20;

//----- (0040AE30) --------------------------------------------------------
// Sets Config.dat to default values (Called if check above fails)
void *__cdecl Set_Default_Config_dat(void *ptr)
{
  void *result; // eax@1

  memset(ptr, 0, 0x94u);
  *((_DWORD *)ptr + 28) = 1;
  *((_DWORD *)ptr + 29) = 2;
  *((_DWORD *)ptr + 30) = 1;
  *((_DWORD *)ptr + 31) = 5;
  *((_DWORD *)ptr + 32) = 6;
  *((_DWORD *)ptr + 33) = 3;
  *((_DWORD *)ptr + 34) = 4;
  *((_DWORD *)ptr + 35) = 6;
  result = ptr;
  *((_DWORD *)ptr + 36) = 3;
  return result;
}

//----- (0040AEC0) --------------------------------------------------------
// Runs when you hit "Version" menu button
bool __stdcall Version_Button(HWND hWnd, UINT a2, WPARAM a3, LPARAM a4)
{
  bool result; // eax@4
  char str; // [sp+8h] [bp-88h]@4
  int v6; // [sp+70h] [bp-20h]@1
  int v7; // [sp+74h] [bp-1Ch]@4
  int v8; // [sp+78h] [bp-18h]@4
  int v9; // [sp+7Ch] [bp-14h]@4
  int v10; // [sp+80h] [bp-10h]@4
  int v11; // [sp+84h] [bp-Ch]@4
  int v12; // [sp+88h] [bp-8h]@4
  int v13; // [sp+8Ch] [bp-4h]@4

  v6 = dword_498B20;
  if ( a2 == 272 )
  {
    sub_4108B0((int)&v12, &v7, (int)&v8);
    Get_Version_Number((int)&v11, (int)&v9, (int)&v13, (int)&v10);
    sprintf(&str, off_48F910, v11, v9, v13, v10, v12, v7, v8);
    SetDlgItemTextA(hWnd, 1011, &str);
    CenterWindow(hWnd);
    result = 1;
  }
  else
  {
    if ( a2 == 273 && (unsigned __int16)a3 == 1 )
      EndDialog(hWnd, 1);
    result = 0;
  }
  return result;
}
// 498B20: using guessed type int dword_498B20;

//----- (0040AFC0) --------------------------------------------------------
// Runs when you hit "Mute" menu button
bool __stdcall Mute_Button(HWND hWnd, UINT a2, WPARAM a3, LPARAM a4)
{
  bool result; // eax@4

  if ( a2 == 272 )
  {
    CenterWindow(hWnd);
    CheckDlgButton(hWnd, 1010, dword_4A4D48[0] != 0);
    CheckDlgButton(hWnd, 1018, dword_4A4D4C != 0);
    CheckDlgButton(hWnd, 1019, dword_4A4D50 != 0);
    CheckDlgButton(hWnd, 1020, dword_4A4D54 != 0);
    CheckDlgButton(hWnd, 1021, dword_4A4D58 != 0);
    CheckDlgButton(hWnd, 1022, dword_4A4D5C != 0);
    CheckDlgButton(hWnd, 1023, dword_4A4D60 != 0);
    CheckDlgButton(hWnd, 1024, dword_4A4D64 != 0);
    result = 1;
  }
  else
  {
    if ( a2 == 273 )
    {
      if ( (unsigned __int16)a3 == 1 )
      {
        dword_4A4D48[0] = IsDlgButtonChecked(hWnd, 1010);
        dword_4A4D4C = IsDlgButtonChecked(hWnd, 1018);
        dword_4A4D50 = IsDlgButtonChecked(hWnd, 1019);
        dword_4A4D54 = IsDlgButtonChecked(hWnd, 1020);
        dword_4A4D58 = IsDlgButtonChecked(hWnd, 1021);
        dword_4A4D5C = IsDlgButtonChecked(hWnd, 1022);
        dword_4A4D60 = IsDlgButtonChecked(hWnd, 1023);
        dword_4A4D64 = IsDlgButtonChecked(hWnd, 1024);
        EndDialog(hWnd, 1);
      }
      else if ( (unsigned __int16)a3 == 2 )
      {
        EndDialog(hWnd, 0);
      }
    }
    result = 0;
  }
  return result;
}
// 4A4D48: using guessed type int dword_4A4D48[];
// 4A4D4C: using guessed type int dword_4A4D4C;
// 4A4D50: using guessed type int dword_4A4D50;
// 4A4D54: using guessed type int dword_4A4D54;
// 4A4D58: using guessed type int dword_4A4D58;
// 4A4D5C: using guessed type int dword_4A4D5C;
// 4A4D60: using guessed type int dword_4A4D60;
// 4A4D64: using guessed type int dword_4A4D64;

//----- (0040B1D0) --------------------------------------------------------
// Runs when you hit "Debug Save" menu button
bool __stdcall Debug_Save_Button(HWND hDlg, UINT a2, WPARAM a3, LPARAM a4)
{
  bool result; // eax@4
  CHAR String; // [sp+8h] [bp-70h]@8
  int v6; // [sp+74h] [bp-4h]@1

  v6 = dword_498B20;
  if ( a2 == 272 )
  {
    SetDlgItemTextA(hDlg, 1008, "000.dat");
    CenterWindow(hDlg);
    result = 1;
  }
  else
  {
    if ( a2 == 273 )
    {
      if ( (unsigned __int16)a3 == 1 )
      {
        GetDlgItemTextA(hDlg, 1008, &String, 100);
        sub_41D040((int)&String);
        EndDialog(hDlg, 1);
      }
      else if ( (unsigned __int16)a3 == 2 )
      {
        EndDialog(hDlg, 0);
      }
    }
    result = 0;
  }
  return result;
}
// 498B20: using guessed type int dword_498B20;

//----- (0040B290) --------------------------------------------------------
// Runs when you hit "Quit" menu button
bool __stdcall Quit_Button(HWND hDlg, UINT a2, WPARAM a3, LPARAM lpString)
{
  bool result; // eax@4

  if ( a2 == 272 )
  {
    SetDlgItemTextA(hDlg, 1009, (LPCSTR)lpString);
    CenterWindow(hDlg);
    result = 1;
  }
  else
  {
    if ( a2 == 273 )
    {
      if ( (unsigned __int16)a3 == 1 )
      {
        EndDialog(hDlg, 1);
      }
      else if ( (unsigned __int16)a3 == 2 )
      {
        EndDialog(hDlg, 2);
      }
    }
    result = 0;
  }
  return result;
}

//----- (0040B320) --------------------------------------------------------
int __cdecl Change_Screen_Offsets(int New_Screen_Offset_Y, int New_Screen_Offset_X)
{
  int result; // eax@1

  result = New_Screen_Offset_Y;
  Screen_Offset_Y = New_Screen_Offset_Y;
  Screen_Offset_X = New_Screen_Offset_X;
  return result;
}
// 49CDA8: using guessed type int Screen_Offset_X;
// 49CDAC: using guessed type int Screen_Offset_Y;

//----- (0040B340) --------------------------------------------------------
// Update Screen with window? Also contains FPS delimiter
int __cdecl Upd_Scr_With_Wind_(HWND hWnd)
{
  while ( 1 )
  {
    if ( !MessageQueue() )
      return 0;
    Current_Tick_Count = GetTickCount();
    if ( Current_Tick_Count >= (unsigned int)(Last_Tick_Count + 20) )
      break;
    Sleep(1u);
  }
  if ( Current_Tick_Count < (unsigned int)(Last_Tick_Count + 100) )
    Last_Tick_Count += 20;
  else
    Last_Tick_Count = Current_Tick_Count;
  GetWindowRect(hWnd, &Window_Rect);
  Window_Rect.left += Screen_Offset_Y;
  Window_Rect.top += Screen_Offset_X;
  Window_Rect.right = Fullscreen_Width + Window_Rect.left;
  Window_Rect.bottom = Fullscreen_Height + Window_Rect.top;
  (*((void (__stdcall **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD))DD7_SurfaceA->lpVtbl + 5))(
    DD7_SurfaceA,
    &Window_Rect,
    DD7_SurfaceB,
    &Fullscreen_Rect,
    0x1000000,
    0);
  if ( Upd_Scr_With_Wind_sub() )
  {
    Draws_Some_Text_();
    sub_414330();
    sub_425790();
  }
  return 1;
}
// 49CDA8: using guessed type int Screen_Offset_X;
// 49CDAC: using guessed type int Screen_Offset_Y;
// 49D374: using guessed type int Fullscreen_Width;
// 49D378: using guessed type int Fullscreen_Height;
// 49D438: using guessed type int Last_Tick_Count;
// 49D43C: using guessed type int Current_Tick_Count;

//----- (0040B450) --------------------------------------------------------
signed int __cdecl DDRAW_Setup_(int a1, int a2, int a3)
{
  signed int result; // eax@2
  int ptr; // [sp+4h] [bp-70h]@10
  int v5; // [sp+8h] [bp-6Ch]@10
  int v6; // [sp+Ch] [bp-68h]@12
  int v7; // [sp+10h] [bp-64h]@12
  int v8; // [sp+18h] [bp-5Ch]@10
  int v9; // [sp+6Ch] [bp-8h]@10

  if ( DirectDrawCreate(0, &Direct_Draw_Obj, 0) )
  {
    result = 0;
  }
  else
  {
    memset(::ptr, 0, 0x5A0u);
    if ( a2 )
    {
      if ( a2 == 1 )
      {
        GraphicScale = 2;
        dword_49CDC0 = 0;
        (*((void (__cdecl **)(_DWORD, _DWORD, _DWORD))Direct_Draw_Obj->lpVtbl + 20))(Direct_Draw_Obj, a1, 8);
      }
      else if ( a2 == 2 )
      {
        GraphicScale = 2;
        dword_49CDC0 = 1;
        (*((void (__cdecl **)(_DWORD, _DWORD, _DWORD))Direct_Draw_Obj->lpVtbl + 20))(Direct_Draw_Obj, a1, 17);
        (*((void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))Direct_Draw_Obj->lpVtbl + 21))(
          Direct_Draw_Obj,
          320 * GraphicScale,
          240 * GraphicScale,
          a3);
      }
    }
    else
    {
      GraphicScale = 1;
      dword_49CDC0 = 0;
      (*((void (__cdecl **)(_DWORD, _DWORD, _DWORD))Direct_Draw_Obj->lpVtbl + 20))(Direct_Draw_Obj, a1, 8);
    }
    Fullscreen_Rect.left = 0;
    Fullscreen_Rect.top = 0;
    Fullscreen_Rect.right = 320 * GraphicScale;
    Fullscreen_Rect.bottom = 240 * GraphicScale;
    Fullscreen_Width = 320 * GraphicScale;
    Fullscreen_Height = 240 * GraphicScale;
    memset(&ptr, 0, 0x6Cu);
    ptr = 108;
    v5 = 1;
    v9 = 512;
    v8 = 0;
    if ( (*((int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))Direct_Draw_Obj->lpVtbl + 6))(
           Direct_Draw_Obj,
           &ptr,
           &DD7_SurfaceA,
           0) )
    {
      result = 0;
    }
    else
    {
      memset(&ptr, 0, 0x6Cu);
      ptr = 108;
      v5 = 7;
      v9 = 64;
      v7 = 320 * GraphicScale;
      v6 = 240 * GraphicScale;
      if ( (*((int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))Direct_Draw_Obj->lpVtbl + 6))(
             Direct_Draw_Obj,
             &ptr,
             &DD7_SurfaceB,
             0) )
      {
        result = 0;
      }
      else
      {
        (*((void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))Direct_Draw_Obj->lpVtbl + 4))(
          Direct_Draw_Obj,
          0,
          &dword_49CDC4,
          0);
        (*(void (__cdecl **)(int, _DWORD, int))(*(_DWORD *)dword_49CDC4 + 32))(dword_49CDC4, 0, a1);
        (*((void (__cdecl **)(_DWORD, _DWORD))DD7_SurfaceA->lpVtbl + 28))(DD7_SurfaceA, dword_49CDC4);
        result = 1;
      }
    }
  }
  return result;
}
// 48F914: using guessed type int GraphicScale;
// 49CDC0: using guessed type int dword_49CDC0;
// 49CDC4: using guessed type int dword_49CDC4;
// 49D374: using guessed type int Fullscreen_Width;
// 49D378: using guessed type int Fullscreen_Height;

//----- (0040B6C0) --------------------------------------------------------
// DDRAW destroy? (Called on program exit)
void *__cdecl DDRAW_Destroy_(int a1)
{
  signed int i; // [sp+0h] [bp-4h]@1

  for ( i = 0; i < 40; ++i )
  {
    if ( Image_Res_Surface[i] )
    {
      (*((void (__cdecl **)(_DWORD))Image_Res_Surface[i]->lpVtbl + 2))(Image_Res_Surface[i]);
      Image_Res_Surface[i] = 0;
    }
  }
  if ( DD7_SurfaceA )
  {
    (*((void (__cdecl **)(_DWORD))DD7_SurfaceA->lpVtbl + 2))(DD7_SurfaceA);
    DD7_SurfaceA = 0;
    DD7_SurfaceB = 0;
  }
  if ( dword_49CDC0 )
    (*((void (__cdecl **)(_DWORD, _DWORD, _DWORD))Direct_Draw_Obj->lpVtbl + 20))(Direct_Draw_Obj, a1, 8);
  if ( Direct_Draw_Obj )
  {
    (*((void (__cdecl **)(_DWORD))Direct_Draw_Obj->lpVtbl + 2))(Direct_Draw_Obj);
    Direct_Draw_Obj = 0;
  }
  return memset(ptr, 0, 0x5A0u);
}
// 49CDC0: using guessed type int dword_49CDC0;

//----- (0040B7A0) --------------------------------------------------------
// Destroy bitmap objects? (Called on program exit)
void *__cdecl Destroy_Bitmap_Obj_(int a1)
{
  if ( Image_Res_Surface[a1] )
  {
    (*((void (__stdcall **)(_DWORD))Image_Res_Surface[a1]->lpVtbl + 2))(Image_Res_Surface[a1]);
    Image_Res_Surface[a1] = 0;
  }
  return memset((char *)ptr + 36 * a1, 0, 0x24u);
}

//----- (0040B800) --------------------------------------------------------
// Load Image from Resource
int __cdecl Load_Image_From_Res(char *Ptr_Graphic, int GraphicID)
{
  int result; // eax@2
  HINSTANCE v3; // eax@5
  int v4; // ST4C_4@9
  int v5; // ST50_4@9
  HDC v6; // ST54_4@9
  char v7; // [sp+14h] [bp-B0h]@7
  int v8; // [sp+18h] [bp-ACh]@7
  int v9; // [sp+1Ch] [bp-A8h]@7
  int ptr; // [sp+2Ch] [bp-98h]@7
  int v11; // [sp+30h] [bp-94h]@7
  int v12; // [sp+34h] [bp-90h]@7
  int v13; // [sp+38h] [bp-8Ch]@7
  int v14; // [sp+94h] [bp-30h]@7
  HGDIOBJ v15; // [sp+A0h] [bp-24h]@9
  HDC v16; // [sp+A4h] [bp-20h]@9
  int v17; // [sp+A8h] [bp-1Ch]@9
  int v18; // [sp+ACh] [bp-18h]@9
  HGDIOBJ v19; // [sp+B0h] [bp-14h]@5
  int v20; // [sp+B4h] [bp-10h]@9
  int v21; // [sp+B8h] [bp-Ch]@9
  int v22; // [sp+BCh] [bp-8h]@9
  int v23; // [sp+C0h] [bp-4h]@9

  if ( GraphicID < 40 )
  {
    if ( Image_Res_Surface[GraphicID] )
    {
      result = 0;
    }
    else
    {
      v3 = GetModuleHandleA(0);
      v19 = LoadImageA(v3, Ptr_Graphic, 0, 0, 0, 0x2000u);
      if ( v19 )
      {
        GetObjectA(v19, 24, &v7);
        memset(&ptr, 0, 0x6Cu);
        ptr = 108;
        v11 = 7;
        v14 = 64;
        v13 = GraphicScale * v8;
        v12 = GraphicScale * v9;
        if ( (*((int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))Direct_Draw_Obj->lpVtbl + 6))(
               Direct_Draw_Obj,
               &ptr,
               4 * GraphicID + 4838280,
               0) )
        {
          result = 0;
        }
        else
        {
          v20 = 0;
          v21 = 0;
          v22 = v8;
          v23 = v9;
          v4 = GraphicScale * v8;
          v5 = GraphicScale * v9;
          v6 = CreateCompatibleDC(0);
          v15 = SelectObject(v6, v19);
          (*((void (__cdecl **)(_DWORD, _DWORD))Image_Res_Surface[GraphicID]->lpVtbl + 17))(
            Image_Res_Surface[GraphicID],
            &v16);
          StretchBlt(v16, 0, 0, v4, v5, v6, v20, v21, v22, v23, 0xCC0020u);
          (*((void (__cdecl **)(_DWORD, _DWORD))Image_Res_Surface[GraphicID]->lpVtbl + 26))(
            Image_Res_Surface[GraphicID],
            v16);
          SelectObject(v6, v15);
          DeleteDC(v6);
          v17 = 0;
          v18 = 0;
          (*((void (__cdecl **)(_DWORD, _DWORD, _DWORD))Image_Res_Surface[GraphicID]->lpVtbl + 29))(
            Image_Res_Surface[GraphicID],
            8,
            &v17);
          (*((void (__cdecl **)(_DWORD, _DWORD))Image_Res_Surface[GraphicID]->lpVtbl + 28))(
            Image_Res_Surface[GraphicID],
            dword_49CDC4);
          dword_49CDE4[9 * GraphicID] = 2;
          dword_49CDDC[9 * GraphicID] = v8;
          dword_49CDE0[9 * GraphicID] = v9;
          dword_49CDE8[9 * GraphicID] = 0;
          strcpy((char *)::ptr + 36 * GraphicID, Ptr_Graphic);
          result = 1;
        }
      }
      else
      {
        result = 0;
      }
    }
  }
  else
  {
    result = 0;
  }
  return result;
}
// 48F914: using guessed type int GraphicScale;
// 49CDC4: using guessed type int dword_49CDC4;
// 49CDDC: using guessed type int dword_49CDDC[];
// 49CDE0: using guessed type int dword_49CDE0[];
// 49CDE4: using guessed type int dword_49CDE4[];
// 49CDE8: using guessed type int dword_49CDE8[];

//----- (0040BAC0) --------------------------------------------------------
// Load Image from file (Permanent)
int __cdecl Load_Image_From_File(char *source, int destination)
{
  int result; // eax@2
  HINSTANCE v3; // eax@7
  char str; // [sp+0h] [bp-1D0h]@1
  int v5; // [sp+108h] [bp-C8h]@1
  int v6; // [sp+10Ch] [bp-C4h]@9
  int v7; // [sp+110h] [bp-C0h]@9
  int v8; // [sp+114h] [bp-BCh]@9
  int v9; // [sp+118h] [bp-B8h]@9
  HDC v10; // [sp+11Ch] [bp-B4h]@9
  char v11; // [sp+120h] [bp-B0h]@9
  int v12; // [sp+124h] [bp-ACh]@9
  int v13; // [sp+128h] [bp-A8h]@9
  int ptr; // [sp+138h] [bp-98h]@9
  int v15; // [sp+13Ch] [bp-94h]@9
  int v16; // [sp+140h] [bp-90h]@9
  int v17; // [sp+144h] [bp-8Ch]@9
  int v18; // [sp+1A0h] [bp-30h]@9
  HGDIOBJ v19; // [sp+1ACh] [bp-24h]@9
  HDC v20; // [sp+1B0h] [bp-20h]@9
  int v21; // [sp+1B4h] [bp-1Ch]@9
  int v22; // [sp+1B8h] [bp-18h]@9
  HGDIOBJ v23; // [sp+1BCh] [bp-14h]@7
  int v24; // [sp+1C0h] [bp-10h]@9
  int v25; // [sp+1C4h] [bp-Ch]@9
  int v26; // [sp+1C8h] [bp-8h]@9
  int v27; // [sp+1CCh] [bp-4h]@9

  v5 = dword_498B20;
  sprintf(&str, "%s\\%s.pbm", byte_49E220, source);
  if ( sub_4112E0(&str) )
  {
    if ( destination <= 40 )
    {
      if ( Image_Res_Surface[destination] )
      {
        sub_410DE0((int)"existing", destination);
        result = 0;
      }
      else
      {
        v3 = GetModuleHandleA(0);
        v23 = LoadImageA(v3, &str, 0, 0, 0, 0x2010u);
        if ( v23 )
        {
          GetObjectA(v23, 24, &v11);
          memset(&ptr, 0, 0x6Cu);
          ptr = 108;
          v15 = 7;
          v18 = 64;
          v17 = GraphicScale * v12;
          v16 = GraphicScale * v13;
          (*((void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))Direct_Draw_Obj->lpVtbl + 6))(
            Direct_Draw_Obj,
            &ptr,
            4 * destination + 4838280,
            0);
          v24 = 0;
          v25 = 0;
          v26 = v12;
          v27 = v13;
          v6 = 0;
          v7 = 0;
          v8 = GraphicScale * v12;
          v9 = GraphicScale * v13;
          v10 = CreateCompatibleDC(0);
          v19 = SelectObject(v10, v23);
          (*((void (__cdecl **)(_DWORD, _DWORD))Image_Res_Surface[destination]->lpVtbl + 17))(
            Image_Res_Surface[destination],
            &v20);
          StretchBlt(v20, v6, v7, v8, v9, v10, v24, v25, v26, v27, 0xCC0020u);
          (*((void (__cdecl **)(_DWORD, _DWORD))Image_Res_Surface[destination]->lpVtbl + 26))(
            Image_Res_Surface[destination],
            v20);
          SelectObject(v10, v19);
          DeleteDC(v10);
          v21 = 0;
          v22 = 0;
          (*((void (__cdecl **)(_DWORD, _DWORD, _DWORD))Image_Res_Surface[destination]->lpVtbl + 29))(
            Image_Res_Surface[destination],
            8,
            &v21);
          (*((void (__cdecl **)(_DWORD, _DWORD))Image_Res_Surface[destination]->lpVtbl + 28))(
            Image_Res_Surface[destination],
            dword_49CDC4);
          DeleteObject(v23);
          dword_49CDE4[9 * destination] = 3;
          dword_49CDDC[9 * destination] = v12;
          dword_49CDE0[9 * destination] = v13;
          dword_49CDE8[9 * destination] = 0;
          strcpy((char *)::ptr + 36 * destination, source);
          result = 1;
        }
        else
        {
          sub_410DE0((int)&str, 1);
          result = 0;
        }
      }
    }
    else
    {
      sub_410DE0((int)"surface no", destination);
      result = 0;
    }
  }
  else
  {
    sub_410DE0((int)&str, 0);
    result = 0;
  }
  return result;
}
// 48F914: using guessed type int GraphicScale;
// 498B20: using guessed type int dword_498B20;
// 49CDC4: using guessed type int dword_49CDC4;
// 49CDDC: using guessed type int dword_49CDDC[];
// 49CDE0: using guessed type int dword_49CDE0[];
// 49CDE4: using guessed type int dword_49CDE4[];
// 49CDE8: using guessed type int dword_49CDE8[];

//----- (0040BE10) --------------------------------------------------------
// Load Image (From Resource and reloadable??)
int __cdecl Load_Image_From_Resource_Reloadable_(char *source, int a2)
{
  int result; // eax@2
  HINSTANCE v3; // eax@3
  int v4; // ST3C_4@5
  int v5; // ST40_4@5
  HDC v6; // ST44_4@5
  char v7; // [sp+14h] [bp-3Ch]@5
  int v8; // [sp+18h] [bp-38h]@5
  int v9; // [sp+1Ch] [bp-34h]@5
  HGDIOBJ v10; // [sp+2Ch] [bp-24h]@5
  HDC v11; // [sp+30h] [bp-20h]@5
  int v12; // [sp+34h] [bp-1Ch]@5
  int v13; // [sp+38h] [bp-18h]@5
  HGDIOBJ v14; // [sp+3Ch] [bp-14h]@3
  int v15; // [sp+40h] [bp-10h]@5
  int v16; // [sp+44h] [bp-Ch]@5
  int v17; // [sp+48h] [bp-8h]@5
  int v18; // [sp+4Ch] [bp-4h]@5

  if ( a2 < 40 )
  {
    v3 = GetModuleHandleA(0);
    v14 = LoadImageA(v3, source, 0, 0, 0, 0x2000u);
    if ( v14 )
    {
      GetObjectA(v14, 24, &v7);
      v15 = 0;
      v16 = 0;
      v17 = v8;
      v18 = v9;
      v4 = GraphicScale * v8;
      v5 = GraphicScale * v9;
      v6 = CreateCompatibleDC(0);
      v10 = SelectObject(v6, v14);
      (*((void (__cdecl **)(_DWORD, _DWORD))Image_Res_Surface[a2]->lpVtbl + 17))(Image_Res_Surface[a2], &v11);
      StretchBlt(v11, 0, 0, v4, v5, v6, v15, v16, v17, v18, 0xCC0020u);
      (*((void (__cdecl **)(_DWORD, _DWORD))Image_Res_Surface[a2]->lpVtbl + 26))(Image_Res_Surface[a2], v11);
      SelectObject(v6, v10);
      DeleteDC(v6);
      v12 = 0;
      v13 = 0;
      (*((void (__cdecl **)(_DWORD, _DWORD, _DWORD))Image_Res_Surface[a2]->lpVtbl + 29))(Image_Res_Surface[a2], 8, &v12);
      (*((void (__cdecl **)(_DWORD, _DWORD))Image_Res_Surface[a2]->lpVtbl + 28))(Image_Res_Surface[a2], dword_49CDC4);
      dword_49CDE4[9 * a2] = 2;
      strcpy((char *)ptr + 36 * a2, source);
      result = 1;
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}
// 48F914: using guessed type int GraphicScale;
// 49CDC4: using guessed type int dword_49CDC4;
// 49CDE4: using guessed type int dword_49CDE4[];

//----- (0040BFD0) --------------------------------------------------------
// Load Image (Reloadable, must prep RAM first)
int __cdecl LoadImage_Must_Prep_RAM(char *source, int destination)
{
  int result; // eax@2
  HINSTANCE v3; // eax@5
  char str; // [sp+0h] [bp-158h]@1
  int v5; // [sp+10Ch] [bp-4Ch]@1
  int v6; // [sp+110h] [bp-48h]@7
  int v7; // [sp+114h] [bp-44h]@7
  int v8; // [sp+118h] [bp-40h]@7
  int v9; // [sp+11Ch] [bp-3Ch]@7
  HDC v10; // [sp+120h] [bp-38h]@7
  char v11; // [sp+124h] [bp-34h]@7
  int v12; // [sp+128h] [bp-30h]@7
  int v13; // [sp+12Ch] [bp-2Ch]@7
  HGDIOBJ v14; // [sp+13Ch] [bp-1Ch]@7
  HDC v15; // [sp+140h] [bp-18h]@7
  HGDIOBJ v16; // [sp+144h] [bp-14h]@5
  int v17; // [sp+148h] [bp-10h]@7
  int v18; // [sp+14Ch] [bp-Ch]@7
  int v19; // [sp+150h] [bp-8h]@7
  int v20; // [sp+154h] [bp-4h]@7

  v5 = dword_498B20;
  sprintf(&str, "%s\\%s.pbm", byte_49E220, source);
  if ( sub_4112E0(&str) )
  {
    if ( destination <= 40 )
    {
      v3 = GetModuleHandleA(0);
      v16 = LoadImageA(v3, &str, 0, 0, 0, 0x2010u);
      if ( v16 )
      {
        GetObjectA(v16, 24, &v11);
        v17 = 0;
        v18 = 0;
        v19 = v12;
        v20 = v13;
        v6 = 0;
        v7 = 0;
        v8 = GraphicScale * v12;
        v9 = GraphicScale * v13;
        v10 = CreateCompatibleDC(0);
        v14 = SelectObject(v10, v16);
        (*((void (__cdecl **)(_DWORD, _DWORD))Image_Res_Surface[destination]->lpVtbl + 17))(
          Image_Res_Surface[destination],
          &v15);
        StretchBlt(v15, v6, v7, v8, v9, v10, v17, v18, v19, v20, 0xCC0020u);
        (*((void (__cdecl **)(_DWORD, _DWORD))Image_Res_Surface[destination]->lpVtbl + 26))(
          Image_Res_Surface[destination],
          v15);
        SelectObject(v10, v14);
        DeleteDC(v10);
        DeleteObject(v16);
        dword_49CDE4[9 * destination] = 3;
        strcpy((char *)ptr + 36 * destination, source);
        result = 1;
      }
      else
      {
        sub_410DE0((int)&str, 1);
        result = 0;
      }
    }
    else
    {
      sub_410DE0((int)"surface no", destination);
      result = 0;
    }
  }
  else
  {
    sub_410DE0((int)&str, 0);
    result = 0;
  }
  return result;
}
// 48F914: using guessed type int GraphicScale;
// 498B20: using guessed type int dword_498B20;
// 49CDE4: using guessed type int dword_49CDE4[];

//----- (0040C1D0) --------------------------------------------------------
signed int __cdecl Prep_RAM_For_Img_(int a1, int a2, signed int a3, int a4)
{
  signed int result; // eax@2
  int v5; // [sp+0h] [bp-78h]@8
  int v6; // [sp+4h] [bp-74h]@8
  int ptr; // [sp+8h] [bp-70h]@5
  int v8; // [sp+Ch] [bp-6Ch]@5
  unsigned int v9; // [sp+10h] [bp-68h]@8
  unsigned int v10; // [sp+14h] [bp-64h]@8
  int v11; // [sp+70h] [bp-8h]@6

  if ( a3 <= 40 )
  {
    if ( Image_Res_Surface[a3] )
    {
      result = 0;
    }
    else
    {
      memset(&ptr, 0, 0x6Cu);
      ptr = 108;
      v8 = 7;
      if ( a4 )
        v11 = 2112;
      else
        v11 = 64;
      v10 = GraphicScale * a1;
      v9 = GraphicScale * a2;
      (*((void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))Direct_Draw_Obj->lpVtbl + 6))(
        Direct_Draw_Obj,
        &ptr,
        4 * a3 + 4838280,
        0);
      v5 = 0;
      v6 = 0;
      (*((void (__cdecl **)(_DWORD, _DWORD, _DWORD))Image_Res_Surface[a3]->lpVtbl + 29))(Image_Res_Surface[a3], 8, &v5);
      dword_49CDE4[9 * a3] = 1;
      dword_49CDDC[9 * a3] = v10 / GraphicScale;
      dword_49CDE0[9 * a3] = v9 / GraphicScale;
      if ( a4 )
        dword_49CDE8[9 * a3] = 1;
      else
        dword_49CDE8[9 * a3] = 0;
      strcpy((char *)::ptr + 36 * a3, "generic");
      result = 1;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}
// 48F914: using guessed type int GraphicScale;
// 49CDDC: using guessed type int dword_49CDDC[];
// 49CDE0: using guessed type int dword_49CDE0[];
// 49CDE4: using guessed type int dword_49CDE4[];
// 49CDE8: using guessed type int dword_49CDE8[];

//----- (0040C320) --------------------------------------------------------
int __cdecl Blit_Rect_From_Img_File_To_Region(int DstRect, int X_Position)
{
  memset(&DDBLTFX_ScreenCopy, 0, 0x64u);
  *(_DWORD *)&DDBLTFX_ScreenCopy = 100;
  RECT_ScreenCopy = GraphicScale * *(_DWORD *)X_Position;
  dword_49D444 = GraphicScale * *(_DWORD *)(X_Position + 4);
  dword_49D448 = GraphicScale * *(_DWORD *)(X_Position + 8);
  dword_49D44C = GraphicScale * *(_DWORD *)(X_Position + 12);
  return (*((int (__stdcall **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD))Image_Res_Surface[DstRect]->lpVtbl + 5))(
           Image_Res_Surface[DstRect],
           &RECT_ScreenCopy,
           DD7_SurfaceB,
           &RECT_ScreenCopy,
           0x1000000,
           &DDBLTFX_ScreenCopy);
}
// 48F914: using guessed type int GraphicScale;
// 49D440: using guessed type int RECT_ScreenCopy;
// 49D444: using guessed type int dword_49D444;
// 49D448: using guessed type int dword_49D448;
// 49D44C: using guessed type int dword_49D44C;

//----- (0040C3C0) --------------------------------------------------------
int __cdecl Render_Graphics(int Dst_Rects, int X_Position, int Y_Position, int Src_Rects, int GraphicsID)
{
  Blit_Rect_4C4.left = *(_DWORD *)Src_Rects;
  Blit_Rect_4C4.top = *(_DWORD *)(Src_Rects + 4);
  Blit_Rect_4C4.right = *(_DWORD *)(Src_Rects + 8);
  Blit_Rect_4C4.bottom = *(_DWORD *)(Src_Rects + 12);
  if ( *(_DWORD *)(Src_Rects + 8) + X_Position - *(_DWORD *)Src_Rects > *(_DWORD *)(Dst_Rects + 8) )
    Blit_Rect_4C4.right -= *(_DWORD *)(Src_Rects + 8) + X_Position - *(_DWORD *)Src_Rects - *(_DWORD *)(Dst_Rects + 8);
  if ( X_Position < *(_DWORD *)Dst_Rects )
  {
    Blit_Rect_4C4.left += *(_DWORD *)Dst_Rects - X_Position;
    X_Position = *(_DWORD *)Dst_Rects;
  }
  if ( *(_DWORD *)(Src_Rects + 12) + Y_Position - *(_DWORD *)(Src_Rects + 4) > *(_DWORD *)(Dst_Rects + 12) )
    Blit_Rect_4C4.bottom -= *(_DWORD *)(Src_Rects + 12)
                          + Y_Position
                          - *(_DWORD *)(Src_Rects + 4)
                          - *(_DWORD *)(Dst_Rects + 12);
  if ( Y_Position < *(_DWORD *)(Dst_Rects + 4) )
  {
    Blit_Rect_4C4.top += *(_DWORD *)(Dst_Rects + 4) - Y_Position;
    Y_Position = *(_DWORD *)(Dst_Rects + 4);
  }
  Blit_Rect_4B4.left = GraphicScale * X_Position;
  Blit_Rect_4B4.top = GraphicScale * Y_Position;
  Blit_Rect_4B4.right = GraphicScale * (Blit_Rect_4C4.right + X_Position - Blit_Rect_4C4.left);
  Blit_Rect_4B4.bottom = GraphicScale * (Blit_Rect_4C4.bottom + Y_Position - Blit_Rect_4C4.top);
  Blit_Rect_4C4.left *= GraphicScale;
  Blit_Rect_4C4.top *= GraphicScale;
  Blit_Rect_4C4.right *= GraphicScale;
  Blit_Rect_4C4.bottom *= GraphicScale;
  return (*((int (__stdcall **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD))DD7_SurfaceB->lpVtbl + 5))(
           DD7_SurfaceB,
           &Blit_Rect_4B4,
           Image_Res_Surface[GraphicsID],
           &Blit_Rect_4C4,
           16809984,
           0);
}
// 48F914: using guessed type int GraphicScale;

//----- (0040C5B0) --------------------------------------------------------
// Render_Graphics for backgrounds
int __cdecl Draw_Obj(int Dst_Rects, int X_Position, int Y_Position, int Src_Rects, int a5)
{
  Blit_Rect_4E4.left = *(_DWORD *)Src_Rects;
  Blit_Rect_4E4.top = *(_DWORD *)(Src_Rects + 4);
  Blit_Rect_4E4.right = *(_DWORD *)(Src_Rects + 8);
  Blit_Rect_4E4.bottom = *(_DWORD *)(Src_Rects + 12);
  if ( *(_DWORD *)(Src_Rects + 8) + X_Position - *(_DWORD *)Src_Rects > *(_DWORD *)(Dst_Rects + 8) )
    Blit_Rect_4E4.right -= *(_DWORD *)(Src_Rects + 8) + X_Position - *(_DWORD *)Src_Rects - *(_DWORD *)(Dst_Rects + 8);
  if ( X_Position < *(_DWORD *)Dst_Rects )
  {
    Blit_Rect_4E4.left += *(_DWORD *)Dst_Rects - X_Position;
    X_Position = *(_DWORD *)Dst_Rects;
  }
  if ( *(_DWORD *)(Src_Rects + 12) + Y_Position - *(_DWORD *)(Src_Rects + 4) > *(_DWORD *)(Dst_Rects + 12) )
    Blit_Rect_4E4.bottom -= *(_DWORD *)(Src_Rects + 12)
                          + Y_Position
                          - *(_DWORD *)(Src_Rects + 4)
                          - *(_DWORD *)(Dst_Rects + 12);
  if ( Y_Position < *(_DWORD *)(Dst_Rects + 4) )
  {
    Blit_Rect_4E4.top += *(_DWORD *)(Dst_Rects + 4) - Y_Position;
    Y_Position = *(_DWORD *)(Dst_Rects + 4);
  }
  Blit_Rect_4D4.left = GraphicScale * X_Position;
  Blit_Rect_4D4.top = GraphicScale * Y_Position;
  Blit_Rect_4D4.right = GraphicScale * (Blit_Rect_4E4.right + X_Position - Blit_Rect_4E4.left);
  Blit_Rect_4D4.bottom = GraphicScale * (Blit_Rect_4E4.bottom + Y_Position - Blit_Rect_4E4.top);
  Blit_Rect_4E4.left *= GraphicScale;
  Blit_Rect_4E4.top *= GraphicScale;
  Blit_Rect_4E4.right *= GraphicScale;
  Blit_Rect_4E4.bottom *= GraphicScale;
  return (*((int (__stdcall **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD))DD7_SurfaceB->lpVtbl + 5))(
           DD7_SurfaceB,
           &Blit_Rect_4D4,
           Image_Res_Surface[a5],
           &Blit_Rect_4E4,
           0x1000000,
           0);
}
// 48F914: using guessed type int GraphicScale;

//----- (0040C7A0) --------------------------------------------------------
// Some kind of blit? Used for damage numbers
int __cdecl Blit_For_Dmg_Num_(int a1, int a2, int a3, int a4, int a5)
{
  dword_49D504 = GraphicScale * *(_DWORD *)a3;
  dword_49D508 = GraphicScale * *(_DWORD *)(a3 + 4);
  dword_49D50C = GraphicScale * *(_DWORD *)(a3 + 8);
  dword_49D510 = GraphicScale * *(_DWORD *)(a3 + 12);
  dword_49D4F4 = a1;
  dword_49D4F8 = a2;
  dword_49D4FC = *(_DWORD *)(a3 + 8) + a1 - *(_DWORD *)a3;
  dword_49D500 = *(_DWORD *)(a3 + 12) + a2 - *(_DWORD *)(a3 + 4);
  dword_49D4F4 = GraphicScale * a1;
  dword_49D4F8 = GraphicScale * a2;
  dword_49D4FC *= GraphicScale;
  dword_49D500 *= GraphicScale;
  return (*((int (__stdcall **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD))Image_Res_Surface[a4]->lpVtbl + 5))(
           Image_Res_Surface[a4],
           &dword_49D4F4,
           Image_Res_Surface[a5],
           &dword_49D504,
           16809984,
           0);
}
// 48F914: using guessed type int GraphicScale;
// 49D4F4: using guessed type int dword_49D4F4;
// 49D4F8: using guessed type int dword_49D4F8;
// 49D4FC: using guessed type int dword_49D4FC;
// 49D500: using guessed type int dword_49D500;
// 49D504: using guessed type int dword_49D504;
// 49D508: using guessed type int dword_49D508;
// 49D50C: using guessed type int dword_49D50C;
// 49D510: using guessed type int dword_49D510;

//----- (0040C8B0) --------------------------------------------------------
int __cdecl Set_BG_Color(COLORREF color)
{
  int result; // eax@2
  COLORREF v2; // [sp+0h] [bp-7Ch]@3
  int ptr; // [sp+4h] [bp-78h]@3
  int *v4; // [sp+28h] [bp-54h]@5
  unsigned int v5; // [sp+58h] [bp-24h]@5
  HDC v6; // [sp+74h] [bp-8h]@1
  int v7; // [sp+78h] [bp-4h]@5

  if ( (*((int (__cdecl **)(_DWORD, _DWORD))DD7_SurfaceB->lpVtbl + 17))(DD7_SurfaceB, &v6) )
  {
    result = -1;
  }
  else
  {
    v2 = GetPixel(v6, 0, 0);
    SetPixel(v6, 0, 0, color);
    (*((void (__cdecl **)(_DWORD, _DWORD))DD7_SurfaceB->lpVtbl + 26))(DD7_SurfaceB, v6);
    memset(&ptr, 0, 0x6Cu);
    ptr = 108;
    if ( (*((int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))DD7_SurfaceB->lpVtbl + 25))(
           DD7_SurfaceB,
           0,
           &ptr,
           1,
           0) )
    {
      result = -1;
    }
    else
    {
      v7 = *v4;
      if ( v5 < 0x20 )
        v7 &= (1 << v5) - 1;
      (*((void (__cdecl **)(_DWORD, _DWORD))DD7_SurfaceB->lpVtbl + 32))(DD7_SurfaceB, 0);
      if ( (*((int (__cdecl **)(_DWORD, _DWORD))DD7_SurfaceB->lpVtbl + 17))(DD7_SurfaceB, &v6) )
      {
        result = -1;
      }
      else
      {
        SetPixel(v6, 0, 0, v2);
        (*((void (__cdecl **)(_DWORD, _DWORD))DD7_SurfaceB->lpVtbl + 26))(DD7_SurfaceB, v6);
        result = v7;
      }
    }
  }
  return result;
}

//----- (0040C9E0) --------------------------------------------------------
int __cdecl FillRects_Memory(int Ptr_Img_Rects, int Mask_Color)
{
  memset(DDBLTFX_Clear, 0, 0x64u);
  *(_DWORD *)DDBLTFX_Clear = 100;
  *(_DWORD *)asc_49D578 = Mask_Color;
  Rect_Clear = GraphicScale * *(_DWORD *)Ptr_Img_Rects;
  dword_49D518 = GraphicScale * *(_DWORD *)(Ptr_Img_Rects + 4);
  dword_49D51C = GraphicScale * *(_DWORD *)(Ptr_Img_Rects + 8);
  dword_49D520 = GraphicScale * *(_DWORD *)(Ptr_Img_Rects + 12);
  return (*((int (__stdcall **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD))DD7_SurfaceB->lpVtbl + 5))(
           DD7_SurfaceB,
           &Rect_Clear,
           0,
           0,
           16778240,
           DDBLTFX_Clear);
}
// 48F914: using guessed type int GraphicScale;
// 49D514: using guessed type int Rect_Clear;
// 49D518: using guessed type int dword_49D518;
// 49D51C: using guessed type int dword_49D51C;
// 49D520: using guessed type int dword_49D520;

//----- (0040CA80) --------------------------------------------------------
int __cdecl FillRects_Memory_(int a1, int a2, int a3)
{
  memset(asc_49D5A0, 0, 0x64u);
  *(_DWORD *)asc_49D5A0 = 100;
  *(_DWORD *)asc_49D5F0 = a2;
  dword_49D58C = GraphicScale * *(_DWORD *)a1;
  dword_49D590 = GraphicScale * *(_DWORD *)(a1 + 4);
  dword_49D594 = GraphicScale * *(_DWORD *)(a1 + 8);
  dword_49D598 = GraphicScale * *(_DWORD *)(a1 + 12);
  dword_49CDE4[9 * a3] = 1;
  return (*((int (__stdcall **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD))Image_Res_Surface[a3]->lpVtbl + 5))(
           Image_Res_Surface[a3],
           &dword_49D58C,
           0,
           0,
           16778240,
           asc_49D5A0);
}
// 48F914: using guessed type int GraphicScale;
// 49CDE4: using guessed type int dword_49CDE4[];
// 49D58C: using guessed type int dword_49D58C;
// 49D590: using guessed type int dword_49D590;
// 49D594: using guessed type int dword_49D594;
// 49D598: using guessed type int dword_49D598;

//----- (0040CB30) --------------------------------------------------------
signed int Upd_Scr_With_Wind_sub_sub()
{
  return 1;
}

//----- (0040CB60) --------------------------------------------------------
int Upd_Scr_With_Wind_sub()
{
  int result; // eax@2
  int v1; // [sp+0h] [bp-1Ch]@14
  int v2; // [sp+4h] [bp-18h]@18
  int v3; // [sp+8h] [bp-14h]@18
  int v4; // [sp+Ch] [bp-10h]@18
  int v5; // [sp+10h] [bp-Ch]@18
  int destination; // [sp+14h] [bp-8h]@9
  int v7; // [sp+18h] [bp-4h]@1

  v7 = 0;
  if ( DD7_SurfaceA )
  {
    if ( DD7_SurfaceB )
    {
      if ( (*((int (__cdecl **)(_DWORD))DD7_SurfaceA->lpVtbl + 24))(DD7_SurfaceA) == -2005532222 )
      {
        ++v7;
        (*((void (__cdecl **)(_DWORD))DD7_SurfaceA->lpVtbl + 27))(DD7_SurfaceA);
        Upd_Scr_With_Wind_sub_sub();
      }
      if ( (*((int (__cdecl **)(_DWORD))DD7_SurfaceB->lpVtbl + 24))(DD7_SurfaceB) == -2005532222 )
      {
        ++v7;
        (*((void (__cdecl **)(_DWORD))DD7_SurfaceB->lpVtbl + 27))(DD7_SurfaceB);
        Upd_Scr_With_Wind_sub_sub();
      }
      for ( destination = 0; destination < 40; ++destination )
      {
        if ( Image_Res_Surface[destination] )
        {
          if ( (*((int (__cdecl **)(_DWORD))Image_Res_Surface[destination]->lpVtbl + 24))(Image_Res_Surface[destination]) == -2005532222 )
          {
            ++v7;
            (*((void (__cdecl **)(_DWORD))Image_Res_Surface[destination]->lpVtbl + 27))(Image_Res_Surface[destination]);
            Upd_Scr_With_Wind_sub_sub();
            if ( !dword_49CDE8[9 * destination] )
            {
              v1 = dword_49CDE4[9 * destination];
              switch ( v1 )
              {
                case 1:
                  v2 = 0;
                  v3 = 0;
                  v4 = dword_49CDDC[9 * destination];
                  v5 = dword_49CDE0[9 * destination];
                  FillRects_Memory_((int)&v2, 0, destination);
                  break;
                case 2:
                  Load_Image_From_Resource_Reloadable_((char *)ptr + 36 * destination, destination);
                  break;
                case 3:
                  LoadImage_Must_Prep_RAM((char *)ptr + 36 * destination, destination);
                  break;
              }
            }
          }
        }
      }
      result = v7;
    }
    else
    {
      result = v7;
    }
  }
  else
  {
    result = v7;
  }
  return result;
}
// 49CDDC: using guessed type int dword_49CDDC[];
// 49CDE0: using guessed type int dword_49CDE0[];
// 49CDE4: using guessed type int dword_49CDE4[];
// 49CDE8: using guessed type int dword_49CDE8[];

//----- (0040CD50) --------------------------------------------------------
HFONT __cdecl Create_Font(LPCSTR a1)
{
  HFONT result; // eax@4
  signed int v2; // [sp+4h] [bp-8h]@0
  signed int v3; // [sp+8h] [bp-4h]@0

  if ( GraphicScale == 1 )
  {
    v2 = 12;
    v3 = 6;
    result = CreateFontA(12, 6, 0, 0, 400, 0, 0, 0, 1u, 4u, 0, 0, 1u, a1);
  }
  else
  {
    if ( GraphicScale == 2 )
    {
      v2 = 20;
      v3 = 10;
    }
    result = CreateFontA(v2, v3, 0, 0, 400, 0, 0, 0, 1u, 4u, 0, 0, 1u, a1);
  }
  Handle_Font_Object[0] = result;
  if ( !result )
  {
    result = CreateFontA(v2, v3, 0, 0, 400, 0, 0, 0, 1u, 4u, 0, 0, 1u, 0);
    Handle_Font_Object[0] = result;
  }
  return result;
}
// 48F914: using guessed type int GraphicScale;

//----- (0040CEB0) --------------------------------------------------------
// Draws text to screen (Message box writing?)
int __cdecl Draw_Text_To_Screen(int X_Position, int Y_Position, char *Ptr_String, COLORREF color, int DDraw_Thingy)
{
  int v5; // eax@1
  HDC v7; // [sp+0h] [bp-8h]@1
  HGDIOBJ v8; // [sp+4h] [bp-4h]@1

  (*((void (__cdecl **)(_DWORD, _DWORD))Image_Res_Surface[DDraw_Thingy]->lpVtbl + 17))(
    Image_Res_Surface[DDraw_Thingy],
    &v7);
  v8 = SelectObject(v7, Handle_Font_Object[0]);
  SetBkMode(v7, 1);
  SetTextColor(v7, color);
  v5 = strlen(Ptr_String);
  TextOutA(v7, GraphicScale * X_Position, GraphicScale * Y_Position, Ptr_String, v5);
  SelectObject(v7, v8);
  return (*((int (__cdecl **)(_DWORD, _DWORD))Image_Res_Surface[DDraw_Thingy]->lpVtbl + 26))(
           Image_Res_Surface[DDraw_Thingy],
           v7);
}
// 48F914: using guessed type int GraphicScale;

//----- (0040CF90) --------------------------------------------------------
int sub_40CF90()
{
  int result; // eax@8
  signed int i; // [sp+0h] [bp-4h]@1

  for ( i = 0; i < 16; ++i )
  {
    if ( *((_DWORD *)&dword_49D628 + 20 * i) & 0x80 && dword_49D620 )
      dword_49D630[20 * i] -= 256;
    if ( dword_49D630[20 * i] <= -8192 )
      *((_DWORD *)&dword_49D628 + 20 * i) = 0;
    result = i + 1;
  }
  return result;
}
// 49D620: using guessed type int dword_49D620;
// 49D630: using guessed type int dword_49D630[];

//----- (0040D010) --------------------------------------------------------
// Draws something from Bitmap Slot 0x25
int Draw_From_Slot_0x25()
{
  int result; // eax@5
  signed int i; // [sp+0h] [bp-14h]@1
  int Src_Rects; // [sp+4h] [bp-10h]@4
  int v3; // [sp+8h] [bp-Ch]@4
  int v4; // [sp+Ch] [bp-8h]@4
  int v5; // [sp+10h] [bp-4h]@4

  for ( i = 0; i < 16; ++i )
  {
    if ( *((_DWORD *)&dword_49D628 + 20 * i) & 0x80 )
    {
      Src_Rects = 0;
      v4 = 320;
      v3 = 16 * i;
      v5 = 16 * i + 16;
      Render_Graphics((int)&unk_48F92C, dword_49D62C[20 * i] / 512, dword_49D630[20 * i] / 512, (int)&Src_Rects, 35);
      Src_Rects = 24 * (dword_49D634[20 * i] % 13);
      v4 = Src_Rects + 24;
      v3 = 24 * (dword_49D634[20 * i] / 13);
      v5 = v3 + 24;
      Render_Graphics(
        (int)&unk_48F92C,
        dword_49D62C[20 * i] / 512 - 24,
        dword_49D630[20 * i] / 512 - 8,
        (int)&Src_Rects,
        37);
    }
    result = i + 1;
  }
  return result;
}
// 49D62C: using guessed type int dword_49D62C[];
// 49D630: using guessed type int dword_49D630[];
// 49D634: using guessed type int dword_49D634[];

//----- (0040D150) --------------------------------------------------------
// Draws some text
int __cdecl Draws_Some_Text(int a1, int a2, char *Ptr_String, int a4)
{
  int result; // eax@4
  signed int i; // [sp+0h] [bp-14h]@1
  int v6; // [sp+4h] [bp-10h]@6
  int Y_Position; // [sp+8h] [bp-Ch]@6
  int v8; // [sp+Ch] [bp-8h]@6
  int v9; // [sp+10h] [bp-4h]@6

  for ( i = 0; i < 16 && *((_DWORD *)&dword_49D628 + 20 * i) & 0x80; ++i )
    result = i + 1;
  if ( i != 16 )
  {
    *((_DWORD *)&dword_49D628 + 20 * i) = 128;
    dword_49D62C[20 * i] = a1;
    dword_49D630[20 * i] = a2;
    dword_49D634[20 * i] = a4;
    strcpy(&asc_49D638[80 * i], Ptr_String);
    v6 = 0;
    v8 = 320;
    Y_Position = 16 * i;
    v9 = 16 * i + 16;
    FillRects_Memory_((int)&v6, 0, 35);
    result = Draw_Text_To_Screen(0, Y_Position, Ptr_String, 0xFEFFFFu, 35);
  }
  return result;
}
// 49D62C: using guessed type int dword_49D62C[];
// 49D630: using guessed type int dword_49D630[];
// 49D634: using guessed type int dword_49D634[];

//----- (0040D240) --------------------------------------------------------
// Draws some text
int Draws_Some_Text_()
{
  int result; // eax@5
  signed int i; // [sp+0h] [bp-14h]@1
  int v2; // [sp+4h] [bp-10h]@4
  int Y_Position; // [sp+8h] [bp-Ch]@4
  int v4; // [sp+Ch] [bp-8h]@4
  int v5; // [sp+10h] [bp-4h]@4

  for ( i = 0; i < 16; ++i )
  {
    if ( *((_DWORD *)&dword_49D628 + 20 * i) & 0x80 )
    {
      v2 = 0;
      v4 = 320;
      Y_Position = 16 * i;
      v5 = 16 * i + 16;
      FillRects_Memory_((int)&v2, 0, 35);
      Draw_Text_To_Screen(0, Y_Position, &asc_49D638[80 * i], 0xFEFFFFu, 35);
    }
    result = i + 1;
  }
  return result;
}

//----- (0040D2D0) --------------------------------------------------------
// Does some odd stuff with a few variables based on what's the value of 49D608
int sub_40D2D0()
{
  int result; // eax@1

  result = dword_49D608;
  if ( dword_49D608 )
  {
    if ( dword_49D608 == 1 )
    {
      dword_49D60C += 20480;
      if ( dword_49D60C > 0 )
        dword_49D60C = 0;
    }
    else if ( dword_49D608 == 2 )
    {
      dword_49D60C -= 20480;
      if ( dword_49D60C < -81920 )
        dword_49D60C = -81920;
    }
  }
  else
  {
    dword_49D60C = -81920;
  }
  return result;
}
// 49D608: using guessed type int dword_49D608;
// 49D60C: using guessed type int dword_49D60C;

//----- (0040D350) --------------------------------------------------------
int sub_40D350()
{
  int Src_Rects; // [sp+0h] [bp-10h]@1
  int v2; // [sp+4h] [bp-Ch]@1
  int v3; // [sp+8h] [bp-8h]@1
  int v4; // [sp+Ch] [bp-4h]@1

  Src_Rects = 0;
  v2 = 0;
  v3 = 160;
  v4 = 240;
  return Render_Graphics((int)&unk_48F92C, dword_49D60C / 512, 0, (int)&Src_Rects, 36);
}
// 49D60C: using guessed type int dword_49D60C;

//----- (0040D3A0) --------------------------------------------------------
int __cdecl sub_40D3A0(int a1)
{
  char str; // [sp+0h] [bp-14h]@1
  int v3; // [sp+10h] [bp-4h]@1

  v3 = dword_498B20;
  sprintf(&str, "CREDIT%02d", a1);
  return Load_Image_From_Resource_Reloadable_(&str, 36);
}
// 498B20: using guessed type int dword_498B20;

//----- (0040D3E0) --------------------------------------------------------
void *sub_40D3E0()
{
  memset(&dword_49D610, 0, 0x18u);
  return memset(&dword_49D628, 0, 0x500u);
}

//----- (0040D410) --------------------------------------------------------
void sub_40D410()
{
  if ( dword_49D614 )
  {
    free(dword_49D614);
    dword_49D614 = 0;
  }
}

//----- (0040D440) --------------------------------------------------------
signed int sub_40D440()
{
  signed int result; // eax@4
  char str; // [sp+0h] [bp-110h]@3
  int v2; // [sp+108h] [bp-8h]@1
  FILE *v3; // [sp+10Ch] [bp-4h]@7

  v2 = dword_498B20;
  if ( dword_49D614 )
  {
    free(dword_49D614);
    dword_49D614 = 0;
  }
  sprintf(&str, "%s\\%s", byte_49E220, off_48F918);
  size = FileLength(&str);
  if ( size == -1 )
  {
    result = 0;
  }
  else
  {
    dword_49D614 = malloc(size);
    if ( dword_49D614 )
    {
      v3 = fopen(&str, "rb");
      if ( v3 )
      {
        sub_480F55((FILE *)dword_49D614, 1u, size, v3);
        sub_4215C0((int)dword_49D614, size);
        dword_49D618 = 0;
        dword_49D61C = 0;
        dword_49D620 = 1;
        dword_49D60C = -81920;
        dword_49D608 = 0;
        FullscreenRect = 160;
        if ( LoadImage_Must_Prep_RAM("casts", 37) )
        {
          memset(&dword_49D628, 0, 0x500u);
          result = 1;
        }
        else
        {
          result = 0;
        }
      }
      else
      {
        free(dword_49D614);
        result = 0;
      }
    }
    else
    {
      result = 0;
    }
  }
  return result;
}
// 48F918: using guessed type char *off_48F918;
// 48F91C: using guessed type int FullscreenRect;
// 498B20: using guessed type int dword_498B20;
// 49D608: using guessed type int dword_49D608;
// 49D60C: using guessed type int dword_49D60C;
// 49D618: using guessed type int dword_49D618;
// 49D61C: using guessed type int dword_49D61C;
// 49D620: using guessed type int dword_49D620;

//----- (0040D5C0) --------------------------------------------------------
int sub_40D5C0()
{
  int result; // eax@1

  result = dword_49D618;
  if ( dword_49D618 < (signed int)size )
  {
    if ( dword_49D620 == 1 )
    {
      result = sub_40D620();
    }
    else if ( dword_49D620 == 2 && --dword_49D61C <= 0 )
    {
      dword_49D620 = 1;
    }
  }
  return result;
}
// 49D618: using guessed type int dword_49D618;
// 49D61C: using guessed type int dword_49D61C;
// 49D620: using guessed type int dword_49D620;

//----- (0040D620) --------------------------------------------------------
int sub_40D620()
{
  int result; // eax@2
  size_t num; // ST18_4@10
  size_t v2; // ST18_4@10
  int v3; // ST1C_4@14
  int v4; // ST1C_4@19
  signed int v5; // ST1C_4@26
  int v6; // [sp+4h] [bp-38h]@16
  int v7; // [sp+4h] [bp-38h]@26
  int Music_To_Play; // [sp+Ch] [bp-30h]@4
  char destination[40]; // [sp+10h] [bp-2Ch]@10
  int v10; // [sp+38h] [bp-4h]@1

  v10 = dword_498B20;
  while ( 2 )
  {
    result = 1;
    if ( dword_49D618 < (signed int)size )
    {
      result = *((_BYTE *)dword_49D614 + dword_49D618);
      switch ( result )
      {
        case 91:
          Music_To_Play = ++dword_49D618;
          while ( *((_BYTE *)dword_49D614 + Music_To_Play) != 93 )
          {
            if ( sub_410E90(*((_BYTE *)dword_49D614 + Music_To_Play)) )
              Music_To_Play += 2;
            else
              ++Music_To_Play;
          }
          num = Music_To_Play - dword_49D618;
          memcpy(destination, (char *)dword_49D614 + dword_49D618, Music_To_Play - dword_49D618);
          destination[num] = 0;
          dword_49D618 = Music_To_Play + 1;
          v2 = sub_40DB00((int)dword_49D614 + Music_To_Play + 1);
          result = Draws_Some_Text(dword_49D624, 126976, destination, v2);
          dword_49D618 += 4;
          return result;
        case 45:
          result = sub_40DB00((int)dword_49D614 + ++dword_49D618);
          dword_49D61C = result;
          dword_49D618 += 4;
          dword_49D620 = 2;
          return result;
        case 43:
          result = sub_40DB00((int)dword_49D614 + ++dword_49D618) << 9;
          dword_49D624 = result;
          dword_49D618 += 4;
          return result;
        case 47:
          dword_49D620 = 0;
          return result;
        case 33:
          v3 = sub_40DB00((int)dword_49D614 + ++dword_49D618);
          dword_49D618 += 4;
          return Tsc_CMU(v3);
        case 126:
          ++dword_49D618;
          return __setargv_0();
        case 106:
          v6 = sub_40DB00((int)dword_49D614 + ++dword_49D618);
          dword_49D618 += 4;
          do
          {
LABEL_17:
            result = dword_49D618;
            if ( dword_49D618 >= (signed int)size )
              break;
            if ( *((_BYTE *)dword_49D614 + dword_49D618) != 108 )
            {
              if ( sub_410E90(*((_BYTE *)dword_49D614 + dword_49D618)) )
                dword_49D618 += 2;
              else
                ++dword_49D618;
              goto LABEL_17;
            }
            v4 = sub_40DB00((int)dword_49D614 + ++dword_49D618);
            dword_49D618 += 4;
            result = v6;
          }
          while ( v6 != v4 );
          return result;
        case 102:
          v5 = sub_40DB00((int)dword_49D614 + ++dword_49D618);
          dword_49D618 += 5;
          v7 = sub_40DB00((int)dword_49D614 + dword_49D618);
          dword_49D618 += 4;
          result = Check_Flag(v5);
          if ( !result )
            return result;
          break;
        default:
          ++dword_49D618;
          continue;
      }
      while ( dword_49D618 < (signed int)size )
      {
        if ( *((_BYTE *)dword_49D614 + dword_49D618) == 108 )
        {
          result = sub_40DB00((int)dword_49D614 + ++dword_49D618);
          dword_49D618 += 4;
          if ( v7 == result )
            return result;
        }
        else
        {
          result = sub_410E90(*((_BYTE *)dword_49D614 + dword_49D618));
          if ( result )
            dword_49D618 += 2;
          else
            result = dword_49D618++ + 1;
        }
      }
    }
    return result;
  }
}
// 41C880: using guessed type int __setargv_0(void);
// 498B20: using guessed type int dword_498B20;
// 49D618: using guessed type int dword_49D618;
// 49D61C: using guessed type int dword_49D61C;
// 49D620: using guessed type int dword_49D620;
// 40D620: using guessed type char destination[40];

//----- (0040DB00) --------------------------------------------------------
int __cdecl sub_40DB00(int a1)
{
  return 10 * (*(_BYTE *)(a1 + 2) - 48)
       + 100 * (*(_BYTE *)(a1 + 1) - 48)
       + 1000 * (*(_BYTE *)a1 - 48)
       + *(_BYTE *)(a1 + 3)
       - 48;
}

//----- (0040DB40) --------------------------------------------------------
int __cdecl sub_40DB40(int a1)
{
  int result; // eax@1

  result = sub_40D3A0(a1);
  dword_49D608 = 1;
  return result;
}
// 49D608: using guessed type int dword_49D608;

//----- (0040DB60) --------------------------------------------------------
void sub_40DB60()
{
  dword_49D608 = 2;
}
// 49D608: using guessed type int dword_49D608;

//----- (0040DB70) --------------------------------------------------------
// XX1 : ?
// Shows distant view of island?
int __cdecl sub_40DB70(HWND hWnd, int a2)
{
  int v3; // [sp+4h] [bp-50h]@4
  signed int i; // [sp+8h] [bp-4Ch]@1
  int v5; // [sp+Ch] [bp-48h]@1
  int v6; // [sp+10h] [bp-44h]@1
  int v7; // [sp+14h] [bp-40h]@1
  int v8; // [sp+18h] [bp-3Ch]@1
  int v9; // [sp+1Ch] [bp-38h]@1
  int v10; // [sp+20h] [bp-34h]@1
  int Dst_Rects; // [sp+24h] [bp-30h]@1
  int v12; // [sp+28h] [bp-2Ch]@1
  int v13; // [sp+2Ch] [bp-28h]@1
  int v14; // [sp+30h] [bp-24h]@1
  int Src_Rects; // [sp+34h] [bp-20h]@1
  int v16; // [sp+38h] [bp-1Ch]@1
  int v17; // [sp+3Ch] [bp-18h]@1
  int v18; // [sp+40h] [bp-14h]@1
  int v19; // [sp+44h] [bp-10h]@1
  int v20; // [sp+48h] [bp-Ch]@1
  int v21; // [sp+4Ch] [bp-8h]@1
  int v22; // [sp+50h] [bp-4h]@1

  Dst_Rects = 80;
  v12 = 80;
  v13 = 240;
  v14 = 160;
  Src_Rects = 0;
  v16 = 0;
  v17 = 160;
  v18 = 80;
  v5 = 160;
  v6 = 48;
  v7 = 320;
  v8 = 80;
  v19 = 160;
  v20 = 0;
  v21 = 200;
  v22 = 24;
  v9 = 86016;
  v10 = 0x8000;
  for ( i = 0; i < 900; ++i )
  {
    Update_Keys();
    if ( Key_Held & 0x8000 )
    {
      v3 = sub_40DD70(hWnd);
      if ( !v3 )
        return 0;
      if ( v3 == 2 )
        return 2;
    }
    if ( a2 )
    {
      if ( a2 == 1 )
      {
        if ( i >= 350 )
        {
          if ( i >= 500 )
          {
            if ( i >= 600 )
            {
              if ( i == 750 )
                i = 900;
            }
            else
            {
              v10 += 12;
            }
          }
          else
          {
            v10 += 25;
          }
        }
        else
        {
          v10 += 51;
        }
      }
    }
    else
    {
      v10 += 51;
    }
    FillRects_Memory((int)&unk_48F92C, 0);
    Render_Graphics((int)&Dst_Rects, 80, 80, (int)&Src_Rects, 21);
    Render_Graphics((int)&Dst_Rects, v9 / 512 - 20, v10 / 512 - 12, (int)&v19, 21);
    Render_Graphics((int)&Dst_Rects, 80, 128, (int)&v5, 21);
    sub_41A430(16, 8);
    Display_FPS();
    if ( !Upd_Scr_With_Wind_(hWnd) )
      return 0;
  }
  return 1;
}
// 49E210: using guessed type int Key_Held;

//----- (0040DD70) --------------------------------------------------------
int __cdecl sub_40DD70(HWND hWnd)
{
  int Src_Rects; // [sp+0h] [bp-10h]@1
  int v3; // [sp+4h] [bp-Ch]@1
  int v4; // [sp+8h] [bp-8h]@1
  int v5; // [sp+Ch] [bp-4h]@1

  Src_Rects = 0;
  v3 = 128;
  v4 = 208;
  v5 = 144;
  do
  {
    Update_Keys();
    if ( Key_Pressed & 0x8000 )
    {
      Key_Pressed = 0;
      return 0;
    }
    if ( Key_Pressed & 0x400 )
    {
      Key_Pressed = 0;
      return 1;
    }
    if ( Key_Pressed & 0x800 )
    {
      Key_Pressed = 0;
      return 2;
    }
    FillRects_Memory((int)&unk_48F92C, 0);
    Render_Graphics((int)&unk_48F92C, 56, 112, (int)&Src_Rects, 26);
    Display_FPS();
  }
  while ( Upd_Scr_With_Wind_(hWnd) );
  Key_Pressed = 0;
  return 0;
}
// 49E214: using guessed type int Key_Pressed;

//----- (0040DE60) --------------------------------------------------------
int sub_40DE60()
{
  int result; // eax@1

  memset(&dword_49DB30, 0, 0x268u);
  result = Set_BG_Color(0x200000u);
  Mask_Color = result;
  return result;
}

//----- (0040DEA0) --------------------------------------------------------
void sub_40DEA0()
{
  dword_49DB34 = 0;
  *(_DWORD *)&dword_49DB30 = 0;
}
// 49DB34: using guessed type int dword_49DB34;

//----- (0040DEC0) --------------------------------------------------------
char __cdecl sub_40DEC0(char a1)
{
  char result; // al@1
  signed int j; // [sp+0h] [bp-8h]@3
  signed int i; // [sp+4h] [bp-4h]@1

  *(_DWORD *)&dword_49DB30 = 2;
  dword_49DB38 = 0;
  result = a1;
  byte_49DC69[299] = a1;
  dword_49DB34 = 0;
  for ( i = 0; i < 15; ++i )
  {
    for ( j = 0; j < 20; ++j )
    {
      *(&byte_49DB3C[20 * i] + j) = 0;
      result = j;
      *(&byte_49DC68[20 * i] + j) = 0;
    }
  }
  return result;
}
// 49DB34: using guessed type int dword_49DB34;
// 49DB38: using guessed type int dword_49DB38;

//----- (0040DF50) --------------------------------------------------------
char __cdecl sub_40DF50(char a1)
{
  char result; // al@1
  signed int j; // [sp+0h] [bp-8h]@3
  signed int i; // [sp+4h] [bp-4h]@1

  *(_DWORD *)&dword_49DB30 = 1;
  dword_49DB38 = 0;
  result = a1;
  byte_49DC69[299] = a1;
  dword_49DB34 = 1;
  for ( i = 0; i < 15; ++i )
  {
    for ( j = 0; j < 20; ++j )
    {
      *(&byte_49DB3C[20 * i] + j) = 15;
      result = j;
      *(&byte_49DC68[20 * i] + j) = 0;
    }
  }
  return result;
}
// 49DB34: using guessed type int dword_49DB34;
// 49DB38: using guessed type int dword_49DB38;

//----- (0040DFE0) --------------------------------------------------------
int sub_40DFE0()
{
  int result; // eax@1
  signed int i8; // [sp+Ch] [bp-8h]@6
  signed int i10; // [sp+Ch] [bp-8h]@15
  signed int i12; // [sp+Ch] [bp-8h]@24
  signed int i14; // [sp+Ch] [bp-8h]@33
  signed int i16; // [sp+Ch] [bp-8h]@42
  signed int i18; // [sp+Ch] [bp-8h]@50
  signed int i20; // [sp+Ch] [bp-8h]@58
  signed int i22; // [sp+Ch] [bp-8h]@66
  signed int i24; // [sp+Ch] [bp-8h]@74
  signed int j; // [sp+Ch] [bp-8h]@87
  signed int l; // [sp+Ch] [bp-8h]@96
  signed int n; // [sp+Ch] [bp-8h]@105
  signed int jj; // [sp+Ch] [bp-8h]@114
  signed int ll; // [sp+Ch] [bp-8h]@123
  signed int nn; // [sp+Ch] [bp-8h]@131
  signed int i2; // [sp+Ch] [bp-8h]@139
  signed int i4; // [sp+Ch] [bp-8h]@147
  signed int i6; // [sp+Ch] [bp-8h]@155
  signed int i7; // [sp+10h] [bp-4h]@4
  signed int i9; // [sp+10h] [bp-4h]@13
  signed int i11; // [sp+10h] [bp-4h]@22
  signed int i13; // [sp+10h] [bp-4h]@31
  signed int i15; // [sp+10h] [bp-4h]@40
  signed int i17; // [sp+10h] [bp-4h]@48
  signed int i19; // [sp+10h] [bp-4h]@56
  signed int i21; // [sp+10h] [bp-4h]@64
  signed int i23; // [sp+10h] [bp-4h]@72
  signed int i; // [sp+10h] [bp-4h]@85
  signed int k; // [sp+10h] [bp-4h]@94
  signed int m; // [sp+10h] [bp-4h]@103
  signed int ii; // [sp+10h] [bp-4h]@112
  signed int kk; // [sp+10h] [bp-4h]@121
  signed int mm; // [sp+10h] [bp-4h]@129
  signed int i1; // [sp+10h] [bp-4h]@137
  signed int i3; // [sp+10h] [bp-4h]@145
  signed int i5; // [sp+10h] [bp-4h]@153

  result = *(_DWORD *)&dword_49DB30;
  if ( *(_DWORD *)&dword_49DB30 == 1 )
  {
    dword_49DB34 = 0;
    switch ( byte_49DC69[299] )
    {
      case 0:
        for ( i = 0; i < 15; ++i )
        {
          for ( j = 0; j < 20; ++j )
          {
            if ( 19 - dword_49DB38 == j )
              *(&byte_49DC68[20 * i] + j) = 1;
          }
          result = i + 1;
        }
        break;
      case 2:
        for ( k = 0; k < 15; ++k )
        {
          for ( l = 0; l < 20; ++l )
          {
            if ( dword_49DB38 == l )
              *(&byte_49DC68[20 * k] + l) = 1;
            result = l + 1;
          }
        }
        break;
      case 1:
        for ( m = 0; m < 15; ++m )
        {
          for ( n = 0; n < 20; ++n )
          {
            result = 14 - dword_49DB38;
            if ( 14 - dword_49DB38 == m )
              *(&byte_49DC68[20 * m] + n) = 1;
          }
        }
        break;
      case 3:
        for ( ii = 0; ii < 15; ++ii )
        {
          for ( jj = 0; jj < 20; ++jj )
          {
            if ( dword_49DB38 == ii )
              *(&byte_49DC68[20 * ii] + jj) = 1;
          }
          result = ii + 1;
        }
        break;
      case 4:
        for ( kk = 0; kk < 7; ++kk )
        {
          for ( ll = 0; ll < 10; ++ll )
          {
            if ( 19 - dword_49DB38 == kk + ll )
              *(&byte_49DC68[20 * kk] + ll) = 1;
            result = ll + 1;
          }
        }
        for ( mm = 0; mm < 7; ++mm )
        {
          for ( nn = 10; nn < 20; ++nn )
          {
            if ( 19 - dword_49DB38 == mm + 19 - nn )
              *(&byte_49DC68[20 * mm] + nn) = 1;
            result = nn + 1;
          }
        }
        for ( i1 = 7; i1 < 15; ++i1 )
        {
          for ( i2 = 0; i2 < 10; ++i2 )
          {
            if ( 19 - dword_49DB38 == i2 + 14 - i1 )
              *(&byte_49DC68[20 * i1] + i2) = 1;
            result = i2 + 1;
          }
        }
        for ( i3 = 7; i3 < 15; ++i3 )
        {
          for ( i4 = 10; i4 < 20; ++i4 )
          {
            if ( 19 - dword_49DB38 == 14 - i3 + 19 - i4 )
              *(&byte_49DC68[20 * i3] + i4) = 1;
            result = i4 + 1;
          }
        }
        break;
      default:
        break;
    }
    for ( i5 = 0; i5 < 15; ++i5 )
    {
      for ( i6 = 0; i6 < 20; ++i6 )
      {
        if ( *(&byte_49DB3C[20 * i5] + i6) > 0 && *(&byte_49DC68[20 * i5] + i6) )
          --*(&byte_49DB3C[20 * i5] + i6);
      }
      result = i5 + 1;
    }
    if ( ++dword_49DB38 > 36 )
      *(_DWORD *)&dword_49DB30 = 0;
  }
  else if ( *(_DWORD *)&dword_49DB30 == 2 )
  {
    switch ( byte_49DC69[299] )
    {
      case 0:
        for ( i7 = 0; i7 < 15; ++i7 )
        {
          for ( i8 = 0; i8 < 20; ++i8 )
          {
            if ( 19 - dword_49DB38 == i8 )
              *(&byte_49DC68[20 * i7] + i8) = 1;
          }
        }
        break;
      case 2:
        for ( i9 = 0; i9 < 15; ++i9 )
        {
          for ( i10 = 0; i10 < 20; ++i10 )
          {
            if ( dword_49DB38 == i10 )
              *(&byte_49DC68[20 * i9] + i10) = 1;
          }
        }
        break;
      case 1:
        for ( i11 = 0; i11 < 15; ++i11 )
        {
          for ( i12 = 0; i12 < 20; ++i12 )
          {
            if ( 14 - dword_49DB38 == i11 )
              *(&byte_49DC68[20 * i11] + i12) = 1;
          }
        }
        break;
      case 3:
        for ( i13 = 0; i13 < 15; ++i13 )
        {
          for ( i14 = 0; i14 < 20; ++i14 )
          {
            if ( dword_49DB38 == i13 )
              *(&byte_49DC68[20 * i13] + i14) = 1;
          }
        }
        break;
      case 4:
        for ( i15 = 0; i15 < 7; ++i15 )
        {
          for ( i16 = 0; i16 < 10; ++i16 )
          {
            if ( dword_49DB38 == i15 + i16 )
              *(&byte_49DC68[20 * i15] + i16) = 1;
          }
        }
        for ( i17 = 0; i17 < 7; ++i17 )
        {
          for ( i18 = 10; i18 < 20; ++i18 )
          {
            if ( dword_49DB38 == i17 + 19 - i18 )
              *(&byte_49DC68[20 * i17] + i18) = 1;
          }
        }
        for ( i19 = 7; i19 < 15; ++i19 )
        {
          for ( i20 = 0; i20 < 10; ++i20 )
          {
            if ( dword_49DB38 == i20 + 14 - i19 )
              *(&byte_49DC68[20 * i19] + i20) = 1;
          }
        }
        for ( i21 = 7; i21 < 15; ++i21 )
        {
          for ( i22 = 10; i22 < 20; ++i22 )
          {
            if ( dword_49DB38 == 14 - i21 + 19 - i22 )
              *(&byte_49DC68[20 * i21] + i22) = 1;
          }
        }
        break;
      default:
        break;
    }
    for ( i23 = 0; i23 < 15; ++i23 )
    {
      for ( i24 = 0; i24 < 20; ++i24 )
      {
        if ( *(&byte_49DB3C[20 * i23] + i24) < 15 && *(&byte_49DC68[20 * i23] + i24) )
          ++*(&byte_49DB3C[20 * i23] + i24);
      }
    }
    result = dword_49DB38++ + 1;
    if ( dword_49DB38 > 36 )
    {
      dword_49DB34 = 1;
      *(_DWORD *)&dword_49DB30 = 0;
    }
  }
  return result;
}
// 49DB34: using guessed type int dword_49DB34;
// 49DB38: using guessed type int dword_49DB38;

//----- (0040E770) --------------------------------------------------------
int TSC_FAI_and_FAO()
{
  int result; // eax@2
  signed int j; // [sp+0h] [bp-18h]@6
  signed int i; // [sp+4h] [bp-14h]@4
  int Src_Rects; // [sp+8h] [bp-10h]@8
  int v4; // [sp+Ch] [bp-Ch]@1
  int v5; // [sp+10h] [bp-8h]@8
  int v6; // [sp+14h] [bp-4h]@1

  v4 = 0;
  v6 = 16;
  if ( dword_49DB34 )
  {
    result = FillRects_Memory((int)&FullscreenRect, Mask_Color);
  }
  else if ( *(_DWORD *)&dword_49DB30 )
  {
    for ( i = 0; i < 15; ++i )
    {
      for ( j = 0; j < 20; ++j )
      {
        Src_Rects = 16 * *(&byte_49DB3C[20 * i] + j);
        v5 = Src_Rects + 16;
        result = Render_Graphics((int)&FullscreenRect, 16 * j, 16 * i, (int)&Src_Rects, 6);
      }
    }
  }
  return result;
}
// 48F91C: using guessed type int FullscreenRect;
// 49DB34: using guessed type int dword_49DB34;

//----- (0040E830) --------------------------------------------------------
bool sub_40E830()
{
  return *(_DWORD *)&dword_49DB30 != 0;
}

//----- (0040E850) --------------------------------------------------------
void *sub_40E850()
{
  return memset(&byte_49DC69[311], 0, 0x3E8u);
}

//----- (0040E870) --------------------------------------------------------
void *sub_40E870()
{
  return memset(&byte_49DC69[303], 0, 8u);
}

//----- (0040E890) --------------------------------------------------------
int __cdecl sub_40E890(signed int a1)
{
  int result; // eax@1

  result = a1 / 8;
  byte_49DC69[a1 / 8 + 311] |= 1 << a1 % 8;
  return result;
}

//----- (0040E8E0) --------------------------------------------------------
int __cdecl sub_40E8E0(signed int a1)
{
  int result; // eax@1

  result = a1 / 8;
  byte_49DC69[a1 / 8 + 311] &= ~(1 << a1 % 8);
  return result;
}

//----- (0040E930) --------------------------------------------------------
bool __cdecl Check_Flag(signed int Flag_hashtag)
{
  return ((1 << Flag_hashtag % 8) & (unsigned __int8)byte_49DC69[Flag_hashtag / 8 + 311]) != 0;
}

//----- (0040E970) --------------------------------------------------------
int __cdecl sub_40E970(signed int a1)
{
  int result; // eax@1

  result = a1 / 8;
  byte_49DC69[a1 / 8 + 303] |= 1 << a1 % 8;
  return result;
}

//----- (0040E9C0) --------------------------------------------------------
int __cdecl sub_40E9C0(signed int a1)
{
  int result; // eax@1

  result = a1 / 8;
  byte_49DC69[a1 / 8 + 303] &= ~(1 << a1 % 8);
  return result;
}

//----- (0040EA10) --------------------------------------------------------
bool __cdecl sub_40EA10(signed int a1)
{
  return ((1 << a1 % 8) & (unsigned __int8)byte_49DC69[a1 / 8 + 303]) != 0;
}

//----- (0040EA70) --------------------------------------------------------
int __cdecl Explosion_(int X_Position, int Y_Position, int a3)
{
  int result; // eax@1

  dword_49E18C = 0;
  OccasionalFlash = 1;
  result = X_Position;
  dword_49E19C = X_Position;
  dword_49E1A0 = Y_Position;
  dword_49E188 = a3;
  dword_49E194 = 0;
  dword_49E198 = 0;
  return result;
}
// 49E188: using guessed type int dword_49E188;
// 49E18C: using guessed type int dword_49E18C;
// 49E190: using guessed type int OccasionalFlash;
// 49E194: using guessed type int dword_49E194;
// 49E198: using guessed type int dword_49E198;
// 49E19C: using guessed type int dword_49E19C;
// 49E1A0: using guessed type int dword_49E1A0;

//----- (0040EAC0) --------------------------------------------------------
int __cdecl sub_40EAC0(int a1, int a2)
{
  int result; // eax@1
  int v3; // [sp+4h] [bp-10h]@4
  int v4; // [sp+4h] [bp-10h]@17
  int v5; // [sp+8h] [bp-Ch]@4
  int v6; // [sp+Ch] [bp-8h]@4
  int v7; // [sp+10h] [bp-4h]@4
  int v8; // [sp+10h] [bp-4h]@19

  result = dword_49E18C;
  if ( dword_49E18C )
  {
    if ( dword_49E18C == 1 )
    {
      dword_49E198 -= dword_49E198 / 8;
      if ( !(dword_49E198 / 256) )
        OccasionalFlash = 0;
      v4 = (dword_49E1A0 - a2 - dword_49E198) / 512;
      if ( v4 < 0 )
        v4 = 0;
      v8 = (dword_49E198 + dword_49E1A0 - a2) / 512;
      if ( v8 > 240 )
        v8 = 240;
      dword_49E1A4 = 0;
      dword_49E1AC = 0;
      dword_49E1A8 = 0;
      dword_49E1B0 = 0;
      dword_49E1B8 = v4;
      result = v8;
      dword_49E1C0 = v8;
      dword_49E1B4 = 0;
      dword_49E1BC = 320;
    }
  }
  else
  {
    dword_49E194 += 512;
    dword_49E198 += dword_49E194;
    v6 = (dword_49E19C - a1 - dword_49E198) / 512;
    v3 = (dword_49E1A0 - a2 - dword_49E198) / 512;
    v5 = (dword_49E198 + dword_49E19C - a1) / 512;
    v7 = (dword_49E198 + dword_49E1A0 - a2) / 512;
    if ( v6 < 0 )
      v6 = 0;
    if ( v3 < 0 )
      v3 = 0;
    if ( v5 > 320 )
      v5 = 320;
    if ( v7 > 240 )
      v7 = 240;
    dword_49E1A4 = v6;
    dword_49E1AC = v5;
    dword_49E1A8 = 0;
    dword_49E1B0 = 240;
    dword_49E1B4 = 0;
    dword_49E1BC = 320;
    dword_49E1B8 = v3;
    result = v7;
    dword_49E1C0 = v7;
    if ( dword_49E198 > 655360 )
    {
      dword_49E18C = 1;
      dword_49E194 = 0;
      dword_49E198 = 122880;
    }
  }
  return result;
}
// 49E18C: using guessed type int dword_49E18C;
// 49E190: using guessed type int OccasionalFlash;
// 49E194: using guessed type int dword_49E194;
// 49E198: using guessed type int dword_49E198;
// 49E19C: using guessed type int dword_49E19C;
// 49E1A0: using guessed type int dword_49E1A0;
// 49E1A4: using guessed type int dword_49E1A4;
// 49E1A8: using guessed type int dword_49E1A8;
// 49E1AC: using guessed type int dword_49E1AC;
// 49E1B0: using guessed type int dword_49E1B0;
// 49E1B4: using guessed type int dword_49E1B4;
// 49E1B8: using guessed type int dword_49E1B8;
// 49E1BC: using guessed type int dword_49E1BC;
// 49E1C0: using guessed type int dword_49E1C0;

//----- (0040ED20) --------------------------------------------------------
int sub_40ED20()
{
  int result; // eax@1

  ++dword_49E194;
  dword_49E1A4 = 0;
  dword_49E1AC = 0;
  dword_49E1A8 = 0;
  dword_49E1B0 = 0;
  result = dword_49E194 / 2 % 2;
  if ( result )
  {
    dword_49E1B8 = 0;
    dword_49E1C0 = 240;
    dword_49E1B4 = 0;
    dword_49E1BC = 320;
  }
  else
  {
    dword_49E1B4 = 0;
    dword_49E1BC = 0;
    dword_49E1B8 = 0;
    dword_49E1C0 = 0;
  }
  if ( dword_49E194 > 20 )
    OccasionalFlash = 0;
  return result;
}
// 49E190: using guessed type int OccasionalFlash;
// 49E194: using guessed type int dword_49E194;
// 49E1A4: using guessed type int dword_49E1A4;
// 49E1A8: using guessed type int dword_49E1A8;
// 49E1AC: using guessed type int dword_49E1AC;
// 49E1B0: using guessed type int dword_49E1B0;
// 49E1B4: using guessed type int dword_49E1B4;
// 49E1B8: using guessed type int dword_49E1B8;
// 49E1BC: using guessed type int dword_49E1BC;
// 49E1C0: using guessed type int dword_49E1C0;

//----- (0040EDE0) --------------------------------------------------------
int __cdecl sub_40EDE0(int a1, int a2)
{
  int result; // eax@2

  if ( OccasionalFlash )
  {
    result = dword_49E188;
    if ( dword_49E188 == 1 )
    {
      result = sub_40EAC0(a1, a2);
    }
    else if ( dword_49E188 == 2 )
    {
      result = sub_40ED20();
    }
  }
  return result;
}
// 49E188: using guessed type int dword_49E188;
// 49E190: using guessed type int OccasionalFlash;

//----- (0040EE20) --------------------------------------------------------
int sub_40EE20()
{
  int result; // eax@2

  if ( OccasionalFlash )
  {
    FillRects_Memory((int)&dword_49E1A4, FlashColor);
    result = FillRects_Memory((int)&dword_49E1B4, FlashColor);
  }
  return result;
}
// 49E190: using guessed type int OccasionalFlash;
// 49E1A4: using guessed type int dword_49E1A4;
// 49E1B4: using guessed type int dword_49E1B4;

//----- (0040EE70) --------------------------------------------------------
// The camera code. Handles quakes.
int Camera_Code()
{
  int result; // eax@7
  __int16 v1; // [sp+0h] [bp-8h]@1
  __int16 v2; // [sp+4h] [bp-4h]@1

  sub_413960(0, &v1, &v2);
  dword_49E1C8 += (*(_DWORD *)dword_49E1D0 - 81920 - dword_49E1C8) / dword_49E1D8;
  dword_49E1CC += (*(_DWORD *)dword_49E1D4 - 61440 - dword_49E1CC) / dword_49E1D8;
  if ( dword_49E1C8 / 512 < 0 )
    dword_49E1C8 = 0;
  if ( dword_49E1CC / 512 < 0 )
    dword_49E1CC = 0;
  if ( dword_49E1C8 > (16 * (v1 - 1) - 320) << 9 )
    dword_49E1C8 = (16 * (v1 - 1) - 320) << 9;
  result = (16 * (v2 - 1) - 240) << 9;
  if ( dword_49E1CC > result )
    dword_49E1CC = (16 * (v2 - 1) - 240) << 9;
  if ( HardQuakeDuration )
  {
    dword_49E1C8 += RNG_Range(-5, 5) << 9;
    result = dword_49E1CC + (RNG_Range(-3, 3) << 9);
    dword_49E1CC = result;
    --HardQuakeDuration;
  }
  else if ( SoftQuakeDuration )
  {
    dword_49E1C8 += RNG_Range(-1, 1) << 9;
    dword_49E1CC += RNG_Range(-1, 1) << 9;
    result = SoftQuakeDuration-- - 1;
  }
  return result;
}
// 49E1C8: using guessed type int dword_49E1C8;
// 49E1CC: using guessed type int dword_49E1CC;
// 49E1D0: using guessed type int dword_49E1D0;
// 49E1D4: using guessed type int dword_49E1D4;
// 49E1D8: using guessed type int dword_49E1D8;
// 49E1DC: using guessed type int SoftQuakeDuration;
// 49E1E0: using guessed type int HardQuakeDuration;

//----- (0040F020) --------------------------------------------------------
int __cdecl sub_40F020(_DWORD *a1, _DWORD *a2)
{
  int result; // eax@1

  *a1 = dword_49E1C8;
  result = dword_49E1CC;
  *a2 = dword_49E1CC;
  return result;
}
// 49E1C8: using guessed type int dword_49E1C8;
// 49E1CC: using guessed type int dword_49E1CC;

//----- (0040F130) --------------------------------------------------------
int sub_40F130()
{
  int result; // eax@5
  int Y; // [sp+0h] [bp-10h]@1
  int X; // [sp+4h] [bp-Ch]@1
  __int16 v3; // [sp+8h] [bp-8h]@1
  __int16 v4; // [sp+Ch] [bp-4h]@1

  GetPlayerXY(&X, &Y);
  sub_413960(0, &v3, &v4);
  dword_49E1C8 = X - 81920;
  dword_49E1CC = Y - 61440;
  if ( (X - 81920) / 512 < 0 )
    dword_49E1C8 = 0;
  if ( dword_49E1CC / 512 < 0 )
    dword_49E1CC = 0;
  result = (16 * (v3 - 1) - 320) << 9;
  if ( dword_49E1C8 > result )
    dword_49E1C8 = (16 * (v3 - 1) - 320) << 9;
  if ( dword_49E1CC > (16 * (v4 - 1) - 240) << 9 )
  {
    result = (16 * (v4 - 1) - 240) << 9;
    dword_49E1CC = (16 * (v4 - 1) - 240) << 9;
  }
  return result;
}
// 49E1C8: using guessed type int dword_49E1C8;
// 49E1CC: using guessed type int dword_49E1CC;

//----- (0040F220) --------------------------------------------------------
int __cdecl sub_40F220(int a1)
{
  int result; // eax@1

  dword_49E1D0 = (int)&Camera_X_Position;
  dword_49E1D4 = (int)&Camera_Y_Position;
  result = a1;
  dword_49E1D8 = a1;
  return result;
}
// 49E1D0: using guessed type int dword_49E1D0;
// 49E1D4: using guessed type int dword_49E1D4;
// 49E1D8: using guessed type int dword_49E1D8;
// 49E65C: using guessed type int Camera_X_Position;
// 49E660: using guessed type int Camera_Y_Position;

//----- (0040F250) --------------------------------------------------------
int *__cdecl sub_40F250(int a1, int a2)
{
  int *result; // eax@4
  signed int i; // [sp+0h] [bp-4h]@1

  for ( i = 0; i < 512 && NPC_Event_Number[43 * i] != a1; ++i )
    result = (int *)(i + 1);
  if ( i != 512 )
  {
    result = &NPC_X_Position[43 * i];
    dword_49E1D0 = (int)&NPC_X_Position[43 * i];
    dword_49E1D4 = (int)&NPC_Y_Position[43 * i];
    dword_49E1D8 = a2;
  }
  return result;
}
// 49E1D0: using guessed type int dword_49E1D0;
// 49E1D4: using guessed type int dword_49E1D4;
// 49E1D8: using guessed type int dword_49E1D8;
// 4A6228: using guessed type int NPC_X_Position[];
// 4A622C: using guessed type int NPC_Y_Position[];
// 4A6250: using guessed type int NPC_Event_Number[];

//----- (0040F2D0) --------------------------------------------------------
int *__cdecl sub_40F2D0(int a1, int a2)
{
  int *result; // eax@1

  result = &dword_4BBA60 + 43 * a1;
  dword_49E1D0 = (int)(&dword_4BBA60 + 43 * a1);
  dword_49E1D4 = (int)(&dword_4BBA64 + 43 * a1);
  dword_49E1D8 = a2;
  return result;
}
// 49E1D0: using guessed type int dword_49E1D0;
// 49E1D4: using guessed type int dword_49E1D4;
// 49E1D8: using guessed type int dword_49E1D8;

//----- (0040F310) --------------------------------------------------------
int __cdecl sub_40F310(int a1)
{
  int result; // eax@1

  result = a1;
  SoftQuakeDuration = a1;
  return result;
}
// 49E1DC: using guessed type int SoftQuakeDuration;

//----- (0040F320) --------------------------------------------------------
int __cdecl sub_40F320(int a1)
{
  int result; // eax@1

  result = a1;
  HardQuakeDuration = a1;
  return result;
}
// 49E1E0: using guessed type int HardQuakeDuration;

//----- (0040F330) --------------------------------------------------------
void sub_40F330()
{
  SoftQuakeDuration = 0;
  HardQuakeDuration = 0;
}
// 49E1DC: using guessed type int SoftQuakeDuration;
// 49E1E0: using guessed type int HardQuakeDuration;

//----- (0040F350) --------------------------------------------------------
// Random Number Generator (for number in designated range)
int __cdecl RNG_Range(int minimum, int maximum)
{
  return minimum + rand() % (maximum - minimum + 1);
}

//----- (0040F380) --------------------------------------------------------
int __cdecl Render_Numbers(int X_Position, int Y_Position, int Numbers_To_Display, int Number_Of_Digits)
{
  int result; // eax@6
  int Dst_Rects; // [sp+0h] [bp-D0h]@1
  int v6; // [sp+4h] [bp-CCh]@1
  int v7; // [sp+8h] [bp-C8h]@1
  int v8; // [sp+Ch] [bp-C4h]@1
  int v9; // [sp+10h] [bp-C0h]@3
  int v10; // [sp+14h] [bp-BCh]@3
  int Src_Rects; // [sp+18h] [bp-B8h]@1
  int v12; // [sp+1Ch] [bp-B4h]@1
  int v13; // [sp+20h] [bp-B0h]@1
  int v14; // [sp+24h] [bp-ACh]@1
  int v15; // [sp+28h] [bp-A8h]@1
  int v16; // [sp+2Ch] [bp-A4h]@1
  int v17; // [sp+30h] [bp-A0h]@1
  int v18; // [sp+34h] [bp-9Ch]@1
  int v19; // [sp+38h] [bp-98h]@1
  int v20; // [sp+3Ch] [bp-94h]@1
  int v21; // [sp+40h] [bp-90h]@1
  int v22; // [sp+44h] [bp-8Ch]@1
  int v23; // [sp+48h] [bp-88h]@1
  int v24; // [sp+4Ch] [bp-84h]@1
  int v25; // [sp+50h] [bp-80h]@1
  int v26; // [sp+54h] [bp-7Ch]@1
  int v27; // [sp+58h] [bp-78h]@1
  int v28; // [sp+5Ch] [bp-74h]@1
  int v29; // [sp+60h] [bp-70h]@1
  int v30; // [sp+64h] [bp-6Ch]@1
  int v31; // [sp+68h] [bp-68h]@1
  int v32; // [sp+6Ch] [bp-64h]@1
  int v33; // [sp+70h] [bp-60h]@1
  int v34; // [sp+74h] [bp-5Ch]@1
  int v35; // [sp+78h] [bp-58h]@1
  int v36; // [sp+7Ch] [bp-54h]@1
  int v37; // [sp+80h] [bp-50h]@1
  int v38; // [sp+84h] [bp-4Ch]@1
  int v39; // [sp+88h] [bp-48h]@1
  int v40; // [sp+8Ch] [bp-44h]@1
  int v41; // [sp+90h] [bp-40h]@1
  int v42; // [sp+94h] [bp-3Ch]@1
  int v43; // [sp+98h] [bp-38h]@1
  int v44; // [sp+9Ch] [bp-34h]@1
  int v45; // [sp+A0h] [bp-30h]@1
  int v46; // [sp+A4h] [bp-2Ch]@1
  int v47; // [sp+A8h] [bp-28h]@1
  int v48; // [sp+ACh] [bp-24h]@1
  int v49; // [sp+B0h] [bp-20h]@1
  int v50; // [sp+B4h] [bp-1Ch]@1
  int v51; // [sp+BCh] [bp-14h]@5
  int v52; // [sp+C0h] [bp-10h]@1
  int v53; // [sp+C4h] [bp-Ch]@1
  int v54; // [sp+C8h] [bp-8h]@1
  int v55; // [sp+CCh] [bp-4h]@1

  Dst_Rects = 0;
  v6 = 0;
  v7 = 320;
  v8 = 240;
  Src_Rects = 0;
  v12 = 56;
  v13 = 8;
  v14 = 64;
  v15 = 8;
  v16 = 56;
  v17 = 16;
  v18 = 64;
  v19 = 16;
  v20 = 56;
  v21 = 24;
  v22 = 64;
  v23 = 24;
  v24 = 56;
  v25 = 32;
  v26 = 64;
  v27 = 32;
  v28 = 56;
  v29 = 40;
  v30 = 64;
  v31 = 40;
  v32 = 56;
  v33 = 48;
  v34 = 64;
  v35 = 48;
  v36 = 56;
  v37 = 56;
  v38 = 64;
  v39 = 56;
  v40 = 56;
  v41 = 64;
  v42 = 64;
  v43 = 64;
  v44 = 56;
  v45 = 72;
  v46 = 64;
  v47 = 72;
  v48 = 56;
  v49 = 80;
  v50 = 64;
  v52 = 1000;
  v53 = 100;
  v54 = 10;
  v55 = 1;
  if ( Numbers_To_Display > 9999 )
    Numbers_To_Display = 9999;
  v10 = 0;
  v9 = 0;
  while ( v10 < 4 )
  {
    v51 = 0;
    while ( 1 )
    {
      result = v10;
      if ( Numbers_To_Display < *(&v52 + v10) )
        break;
      Numbers_To_Display -= *(&v52 + v10);
      ++v51;
      ++v9;
    }
    if ( Number_Of_Digits && v10 == 2 || v9 || v10 == 3 )
      result = Render_Graphics((int)&Dst_Rects, X_Position + 8 * v10, Y_Position, (int)(&Src_Rects + 4 * v51), 26);
    ++v10;
  }
  return result;
}

//----- (0040F5F0) --------------------------------------------------------
// Updating game window, maintaining game loop, etc
int __cdecl Upd_Win(HWND hWnd)
{
  int result; // eax@2
  char str; // [sp+0h] [bp-110h]@3
  int v3; // [sp+108h] [bp-8h]@1
  int v4; // [sp+10Ch] [bp-4h]@5

  v3 = dword_498B20;
  if ( sub_411390() )
  {
    Play_Sound_Effect(7, -1);
    sprintf(&str, "%s\\npc.tbl", byte_49E220);
    if ( sub_472400(&str) )
    {
      sub_4214E0();
      sub_40E870();
      sub_413750();
      sub_40D3E0();
      v4 = 1;
      while ( v4 )
      {
        if ( v4 == 1 )
          v4 = sub_40F730();
        if ( v4 == 2 )
          v4 = Title_Screen_Code();
        if ( v4 == 3 )
          v4 = Main_Game_Loop(hWnd);
      }
      Play_Sound_Effect(7, 0);
      sub_413930();
      sub_421570();
      sub_472710();
      sub_40D410();
      if ( !dword_49E460 )
        sub_4111F0(hWnd, (int)"window.rect");
      result = 1;
    }
    else
    {
      MessageBoxA(hWnd, "NPCe[u", "G[", 0);
      result = 0;
    }
  }
  else
  {
    MessageBoxA(hWnd, "pt@C", "G[", 0);
    result = 0;
  }
  return result;
}
// 498B20: using guessed type int dword_498B20;
// 49E460: using guessed type int dword_49E460;

//----- (0040F730) --------------------------------------------------------
signed int sub_40F730()
{
  int v1; // [sp+0h] [bp-14h]@10
  int v2; // [sp+4h] [bp-10h]@4
  int v3; // [sp+8h] [bp-Ch]@10
  unsigned int v4; // [sp+Ch] [bp-8h]@1
  int v5; // [sp+10h] [bp-4h]@10

  sub_46EB30();
  Clear_All_Effects();
  sub_420FA0();
  sub_40DE60();
  _initp_eh_hooks();
  _crt_debugger_hook_2();
  Tsc_CMU(0);
  sub_420BE0(72, 100, 3, 3);
  sub_40F220(16);
  __setargv();
  FullscreenRect = 0;
  Game_State = 3;
  TSC_SSS_SPS__2();
  v4 = 0;
  while ( v4 < 0x1F4 )
  {
    ++v4;
    Update_Keys();
    if ( Key_Held & 0x8000 )
    {
      v2 = sub_40DD70(AppWinHandle);
      if ( !v2 )
        return 0;
      if ( v2 == 2 )
        return 1;
    }
    if ( Key_For_Jump & Key_Held )
      break;
    sub_46FA00();
    sub_473000();
    Bckgrd_Modes_();
    _crt_debugger_hook_1();
    Tile_Code();
    sub_419030();
    sub_419450();
    sub_471160();
    sub_473080();
    sub_472950();
    Update_All_Effects();
    Camera_Code();
    sub_40DFE0();
    FillRects_Memory((int)&unk_48F92C, 0);
    sub_40F020(&v5, &v3);
    Bckgrd_Code(v5, v3);
    Render_Background_Layer_(v5, v3);
    sub_472770(v5, v3);
    sub_46F810(v5, v3);
    Render_Caret_pbm_(v5, v3);
    Render_Foreground_Layer_And_Star_Block_(v5, v3);
    Rend_Map_Bckgrd(v5, v3);
    Draw_All_Effect_Obj(v5, v3);
    TSC_FAI_and_FAO();
    v1 = Tsc_Parser();
    if ( !v1 )
      return 0;
    if ( v1 == 2 )
      return 1;
    TSC_MNA(0);
    sub_421F10();
    Display_FPS();
    if ( !Upd_Scr_With_Wind_(AppWinHandle) )
      return 0;
    ++GameTime;
  }
  v4 = GetTickCount();
  while ( GetTickCount() < v4 + 500 )
  {
    FillRects_Memory((int)&FullscreenRect, 0);
    Display_FPS();
    if ( !Upd_Scr_With_Wind_(AppWinHandle) )
      return 0;
  }
  return 2;
}
// 40EA50: using guessed type int _initp_eh_hooks(void);
// 416E20: using guessed type int _crt_debugger_hook_1(void);
// 47B450: using guessed type int _crt_debugger_hook_2(void);
// 48F91C: using guessed type int FullscreenRect;
// 493628: using guessed type int Key_For_Jump;
// 49E1E8: using guessed type int Game_State;
// 49E1EC: using guessed type int GameTime;
// 49E210: using guessed type int Key_Held;

//----- (0040F9B0) --------------------------------------------------------
signed int Title_Screen_Code()
{
  int *v1; // edx@39
  int *v2; // edx@40
  int *v3; // edx@41
  int *v4; // edx@42
  int *v5; // edx@43
  int v6; // [sp+4h] [bp-1ECh]@29
  int v7; // [sp+8h] [bp-1E8h]@1
  int v8; // [sp+Ch] [bp-1E4h]@1
  int v9; // [sp+10h] [bp-1E0h]@1
  int v10; // [sp+14h] [bp-1DCh]@1
  int v11; // [sp+18h] [bp-1D8h]@1
  int v12; // [sp+1Ch] [bp-1D4h]@1
  int v13; // [sp+20h] [bp-1D0h]@1
  int v14; // [sp+24h] [bp-1CCh]@1
  int v15; // [sp+28h] [bp-1C8h]@1
  int v16; // [sp+2Ch] [bp-1C4h]@1
  int v17; // [sp+30h] [bp-1C0h]@1
  int v18; // [sp+34h] [bp-1BCh]@1
  int v19; // [sp+38h] [bp-1B8h]@1
  int v20; // [sp+3Ch] [bp-1B4h]@1
  int v21; // [sp+40h] [bp-1B0h]@1
  int v22; // [sp+44h] [bp-1ACh]@1
  int v23; // [sp+48h] [bp-1A8h]@1
  int v24; // [sp+4Ch] [bp-1A4h]@1
  int v25; // [sp+50h] [bp-1A0h]@1
  int v26; // [sp+54h] [bp-19Ch]@1
  int v27; // [sp+58h] [bp-198h]@1
  int v28; // [sp+5Ch] [bp-194h]@1
  int v29; // [sp+60h] [bp-190h]@1
  int v30; // [sp+64h] [bp-18Ch]@1
  int v31; // [sp+68h] [bp-188h]@1
  int v32; // [sp+6Ch] [bp-184h]@1
  int v33; // [sp+70h] [bp-180h]@1
  int v34; // [sp+74h] [bp-17Ch]@1
  int v35; // [sp+78h] [bp-178h]@1
  int v36; // [sp+7Ch] [bp-174h]@1
  int v37; // [sp+80h] [bp-170h]@1
  int v38; // [sp+84h] [bp-16Ch]@1
  int v39; // [sp+8Ch] [bp-164h]@1
  int v40; // [sp+90h] [bp-160h]@1
  int v41; // [sp+94h] [bp-15Ch]@1
  int v42; // [sp+98h] [bp-158h]@1
  int v43; // [sp+9Ch] [bp-154h]@1
  int v44; // [sp+A0h] [bp-150h]@1
  int v45; // [sp+A4h] [bp-14Ch]@1
  int v46; // [sp+A8h] [bp-148h]@1
  int v47; // [sp+ACh] [bp-144h]@1
  int v48; // [sp+B0h] [bp-140h]@1
  int v49; // [sp+B4h] [bp-13Ch]@1
  int v50; // [sp+B8h] [bp-138h]@1
  int v51; // [sp+BCh] [bp-134h]@1
  int v52; // [sp+C0h] [bp-130h]@1
  int v53; // [sp+C4h] [bp-12Ch]@1
  int v54; // [sp+C8h] [bp-128h]@1
  int v55; // [sp+CCh] [bp-124h]@1
  int v56; // [sp+D4h] [bp-11Ch]@1
  unsigned int v57; // [sp+D8h] [bp-118h]@22
  int v58; // [sp+DCh] [bp-114h]@1
  int v59; // [sp+E0h] [bp-110h]@1
  int v60; // [sp+E4h] [bp-10Ch]@1
  int v61; // [sp+E8h] [bp-108h]@1
  int v62; // [sp+ECh] [bp-104h]@39
  int v63; // [sp+F0h] [bp-100h]@39
  int v64; // [sp+F4h] [bp-FCh]@39
  int v65; // [sp+F8h] [bp-F8h]@39
  int Y_Position; // [sp+FCh] [bp-F4h]@45
  int v67; // [sp+100h] [bp-F0h]@1
  int v68; // [sp+104h] [bp-ECh]@1
  int v69; // [sp+108h] [bp-E8h]@1
  int v70; // [sp+10Ch] [bp-E4h]@1
  int v71; // [sp+110h] [bp-E0h]@1
  int v72; // [sp+114h] [bp-DCh]@1
  int v73; // [sp+118h] [bp-D8h]@1
  int v74; // [sp+11Ch] [bp-D4h]@1
  int v75; // [sp+120h] [bp-D0h]@1
  int v76; // [sp+124h] [bp-CCh]@1
  int v77; // [sp+128h] [bp-C8h]@1
  int v78; // [sp+12Ch] [bp-C4h]@1
  int v79; // [sp+130h] [bp-C0h]@1
  int v80; // [sp+134h] [bp-BCh]@1
  int v81; // [sp+138h] [bp-B8h]@1
  int v82; // [sp+13Ch] [bp-B4h]@1
  int v83; // [sp+140h] [bp-B0h]@1
  int v84; // [sp+144h] [bp-ACh]@1
  int v85; // [sp+148h] [bp-A8h]@1
  int v86; // [sp+14Ch] [bp-A4h]@1
  int v87; // [sp+154h] [bp-9Ch]@1
  int v88; // [sp+158h] [bp-98h]@1
  int v89; // [sp+15Ch] [bp-94h]@1
  int v90; // [sp+160h] [bp-90h]@1
  int v91; // [sp+164h] [bp-8Ch]@1
  int v92; // [sp+168h] [bp-88h]@1
  int v93; // [sp+16Ch] [bp-84h]@1
  int v94; // [sp+170h] [bp-80h]@1
  int v95; // [sp+174h] [bp-7Ch]@1
  int v96; // [sp+178h] [bp-78h]@1
  int v97; // [sp+17Ch] [bp-74h]@1
  int v98; // [sp+180h] [bp-70h]@1
  int v99; // [sp+184h] [bp-6Ch]@1
  int v100; // [sp+188h] [bp-68h]@1
  int v101; // [sp+18Ch] [bp-64h]@1
  int v102; // [sp+190h] [bp-60h]@1
  int v103; // [sp+194h] [bp-5Ch]@1
  int v104; // [sp+198h] [bp-58h]@1
  int v105; // [sp+19Ch] [bp-54h]@1
  int v106; // [sp+1A0h] [bp-50h]@1
  int v107; // [sp+1A4h] [bp-4Ch]@1
  int v108; // [sp+1A8h] [bp-48h]@1
  int v109; // [sp+1ACh] [bp-44h]@1
  int Mask_Color; // [sp+1B0h] [bp-40h]@1
  int GraphicsID; // [sp+1B4h] [bp-3Ch]@39
  int Src_Rects; // [sp+1B8h] [bp-38h]@1
  int v113; // [sp+1BCh] [bp-34h]@1
  int v114; // [sp+1C0h] [bp-30h]@1
  int v115; // [sp+1C4h] [bp-2Ch]@1
  int Numbers_To_Display; // [sp+1C8h] [bp-28h]@1
  int v117; // [sp+1CCh] [bp-24h]@1
  int v118; // [sp+1D0h] [bp-20h]@1
  int v119; // [sp+1D4h] [bp-1Ch]@1
  int v120; // [sp+1D8h] [bp-18h]@1
  int v121; // [sp+1DCh] [bp-14h]@1
  int v122; // [sp+1E0h] [bp-10h]@1
  int v123; // [sp+1E4h] [bp-Ch]@1
  int v124; // [sp+1E8h] [bp-8h]@1
  int v125; // [sp+1ECh] [bp-4h]@1

  v118 = 0;
  v119 = 0;
  v120 = 144;
  v121 = 40;
  v58 = 0;
  v59 = 0;
  v60 = 160;
  v61 = 16;
  v67 = 144;
  v68 = 0;
  v69 = 192;
  v70 = 16;
  v122 = 144;
  v123 = 16;
  v124 = 192;
  v125 = 32;
  Src_Rects = 152;
  v113 = 80;
  v114 = 208;
  v115 = 88;
  v88 = 152;
  v89 = 88;
  v90 = 208;
  v91 = 96;
  v7 = 0;
  v8 = 16;
  v9 = 16;
  v10 = 32;
  v11 = 16;
  v12 = 16;
  v13 = 32;
  v14 = 32;
  v15 = 0;
  v16 = 16;
  v17 = 16;
  v18 = 32;
  v19 = 32;
  v20 = 16;
  v21 = 48;
  v22 = 32;
  v71 = 0;
  v72 = 112;
  v73 = 16;
  v74 = 128;
  v75 = 16;
  v76 = 112;
  v77 = 32;
  v78 = 128;
  v79 = 0;
  v80 = 112;
  v81 = 16;
  v82 = 128;
  v83 = 32;
  v84 = 112;
  v85 = 48;
  v86 = 128;
  v40 = 64;
  v41 = 80;
  v42 = 80;
  v43 = 96;
  v44 = 80;
  v45 = 80;
  v46 = 96;
  v47 = 96;
  v48 = 64;
  v49 = 80;
  v50 = 80;
  v51 = 96;
  v52 = 96;
  v53 = 80;
  v54 = 112;
  v55 = 96;
  v92 = 224;
  v93 = 48;
  v94 = 240;
  v95 = 64;
  v96 = 288;
  v97 = 48;
  v98 = 304;
  v99 = 64;
  v100 = 224;
  v101 = 48;
  v102 = 240;
  v103 = 64;
  v104 = 304;
  v105 = 48;
  v106 = 320;
  v107 = 64;
  v23 = 0;
  v24 = 16;
  v25 = 16;
  v26 = 32;
  v27 = 32;
  v28 = 16;
  v29 = 48;
  v30 = 32;
  v31 = 0;
  v32 = 16;
  v33 = 16;
  v34 = 32;
  v35 = 48;
  v36 = 16;
  v37 = 64;
  v38 = 32;
  Clear_All_Effects();
  sub_420FA0();
  TSC_SSS_SPS__2();
  v87 = 0;
  v56 = 0;
  Mask_Color = Set_BG_Color(0x202020u);
  Get_Version_Number((int)&Numbers_To_Display, (int)&v108, (int)&v117, (int)&v109);
  CursorPosition = Check_Profile_DAT() != 0;
  v39 = Get_Hell_Time();
  if ( v39 && v39 < 18000 )
    v56 = 1;
  if ( v39 && v39 < 15000 )
    v56 = 2;
  if ( v39 && v39 < 12000 )
    v56 = 3;
  if ( v39 && v39 < 9000 )
    v56 = 4;
  switch ( v56 )
  {
    case 1:
      Tsc_CMU(36);
      break;
    case 2:
      Tsc_CMU(40);
      break;
    case 3:
      Tsc_CMU(41);
      break;
    case 4:
      Tsc_CMU(2);
      break;
    default:
      Tsc_CMU(24);
      break;
  }
  FullscreenRect = 0;
  Game_State = 0;
  EquippedItems |= 0x100u;
  v57 = 0;
  while ( 1 )
  {
    if ( v57 < 0xA )
      ++v57;
    Update_Keys();
    if ( v57 >= 0xA )
    {
      if ( Key_For_Jump & Key_Pressed )
        break;
    }
    if ( Key_Held & 0x8000 )
    {
      v6 = sub_40DD70(AppWinHandle);
      if ( !v6 )
        return 0;
      if ( v6 == 2 )
        return 1;
    }
    if ( Key_Pressed & (Key_For_Down | Key_For_Up) )
    {
      Play_Sound_Effect(1, 1);
      CursorPosition = CursorPosition == 0;
    }
    Update_All_Effects();
    if ( ++v87 >= 40 )
      v87 = 0;
    FillRects_Memory((int)&FullscreenRect, Mask_Color);
    Render_Graphics((int)&FullscreenRect, 100, 216, (int)&Src_Rects, 26);
    Render_Graphics((int)&FullscreenRect, 156, 216, (int)&v88, 26);
    Render_Numbers(140, 216, Numbers_To_Display, 0);
    Render_Numbers(156, 216, v108, 0);
    Render_Numbers(172, 216, v117, 0);
    Render_Numbers(188, 216, v109, 0);
    Render_Graphics((int)&FullscreenRect, 88, 40, (int)&v118, 0);
    Render_Graphics((int)&FullscreenRect, 136, 128, (int)&v67, 0);
    Render_Graphics((int)&FullscreenRect, 136, 148, (int)&v122, 0);
    Render_Graphics((int)&FullscreenRect, 80, 192, (int)&v58, 1);
    switch ( v56 )
    {
      case 0:
        v1 = &v7 + 4 * (v87 / 10 % 4);
        v62 = *v1;
        v63 = v1[1];
        v64 = v1[2];
        v65 = v1[3];
        GraphicsID = 16;
        break;
      case 1:
        v2 = &v71 + 4 * (v87 / 10 % 4);
        v62 = *v2;
        v63 = v2[1];
        v64 = v2[2];
        v65 = v2[3];
        GraphicsID = 23;
        break;
      case 2:
        v3 = &v40 + 4 * (v87 / 10 % 4);
        v62 = *v3;
        v63 = v3[1];
        v64 = v3[2];
        v65 = v3[3];
        GraphicsID = 23;
        break;
      case 3:
        v4 = &v92 + 4 * (v87 / 10 % 4);
        v62 = *v4;
        v63 = v4[1];
        v64 = v4[2];
        v65 = v4[3];
        GraphicsID = 23;
        break;
      case 4:
        v5 = &v23 + 4 * (v87 / 10 % 4);
        v62 = *v5;
        v63 = v5[1];
        v64 = v5[2];
        v65 = v5[3];
        GraphicsID = 23;
        break;
      default:
        break;
    }
    if ( CursorPosition )
      Y_Position = 147;
    else
      Y_Position = 127;
    Render_Graphics((int)&FullscreenRect, 116, Y_Position, (int)&v62, GraphicsID);
    Draw_All_Effect_Obj(0, 0);
    if ( v39 )
      sub_41A430(16, 8);
    Display_FPS();
    if ( !Upd_Scr_With_Wind_(AppWinHandle) )
      return 0;
  }
  Play_Sound_Effect(18, 1);
  Tsc_CMU(0);
  v57 = GetTickCount();
  while ( GetTickCount() < v57 + 1000 )
  {
    FillRects_Memory((int)&FullscreenRect, 0);
    Display_FPS();
    if ( !Upd_Scr_With_Wind_(AppWinHandle) )
      return 0;
  }
  return 3;
}
// 48F91C: using guessed type int FullscreenRect;
// 493628: using guessed type int Key_For_Jump;
// 493634: using guessed type int Key_For_Up;
// 49363C: using guessed type int Key_For_Down;
// 49E1E4: using guessed type int CursorPosition;
// 49E1E8: using guessed type int Game_State;
// 49E210: using guessed type int Key_Held;
// 49E214: using guessed type int Key_Pressed;
// 49E64C: using guessed type int InFishBattle;
// 49E650: using guessed type int EquippedItems;

//----- (00410400) --------------------------------------------------------
// Main Game Loop
signed int __cdecl Main_Game_Loop(HWND hWnd)
{
  signed int result; // eax@4
  int v2; // [sp+0h] [bp-20h]@46
  signed int v3; // [sp+4h] [bp-1Ch]@35
  signed int v4; // [sp+8h] [bp-18h]@28
  int v5; // [sp+Ch] [bp-14h]@9
  signed int v6; // [sp+10h] [bp-10h]@21
  unsigned int v7; // [sp+14h] [bp-Ch]@1
  int Mask_Color; // [sp+18h] [bp-8h]@1
  signed int v9; // [sp+1Ch] [bp-4h]@21

  Mask_Color = Set_BG_Color(0x200000u);
  v7 = 1;
  GameTime = 0;
  FullscreenRect = 0;
  Game_State = 3;
  sub_414B50();
  sub_46EB30();
  Clear_All_Weapons_Object_Slots();
  Clear_All_Effects();
  sub_420FA0();
  sub_40DE60();
  _initp_eh_hooks();
  Clr_Weaps();
  Clr_Inv();
  sub_41D610();
  memset_init_maps();
  sub_40E850();
  _crt_debugger_hook_2();
  if ( CursorPosition )
  {
    if ( sub_41D260(0) || sub_41D550(hWnd) )
    {
      while ( 1 )
      {
LABEL_8:
        Update_Keys();
        if ( Key_Pressed & 0x8000 )
        {
          v5 = sub_40DD70(AppWinHandle);
          if ( !v5 )
            return 0;
          if ( v5 == 2 )
            return 1;
        }
        if ( v7 % 2 && Game_State & 1 )
        {
          if ( Game_State & 2 )
            sub_4168C0(1);
          else
            sub_4168C0(0);
          sub_421040();
          sub_46FA00();
          sub_473000();
          sub_426360();
          Bckgrd_Modes_();
          _crt_debugger_hook_1();
          Tile_Code();
          sub_419030();
          sub_419450();
          sub_471160();
          sub_473080();
          Bul_Til_Coll_Algo();
          sub_471D50();
          sub_472950();
          if ( Game_State & 2 )
            sub_41FE70();
          Run_Bullet_Code();
          Update_All_Effects();
          Camera_Code();
          sub_40EDE0(v9, v6);
          if ( Game_State & 2 )
            sub_414BF0(1);
          else
            sub_414BF0(0);
        }
        if ( Game_State & 8 )
        {
          sub_40D5C0();
          sub_40D2D0();
          sub_40CF90();
        }
        sub_40DFE0();
        FillRects_Memory((int)&unk_48F92C, Mask_Color);
        sub_40F020(&v9, &v6);
        Bckgrd_Code(v9, v6);
        Render_Background_Layer_(v9, v6);
        sub_472770(v9, v6);
        sub_46F810(v9, v6);
        Render_Bullets(v9, v6);
        Render_Quote_and_Gun(v9, v6);
        sub_4213B0(v9, v6);
        Render_Caret_pbm_(v9, v6);
        Render_Foreground_Layer_And_Star_Block_(v9, v6);
        Rend_Map_Bckgrd(v9, v6);
        sub_40EE20();
        Draw_All_Effect_Obj(v9, v6);
        sub_426430(v9, v6);
        sub_47B540();
        TSC_FAI_and_FAO();
        if ( !(Game_State & 4) )
        {
          if ( Key_For_Menu & Key_Pressed )
          {
            Blit_Rect_From_Img_File_To_Region(10, (int)&FullscreenRect);
            v4 = Inv_Menu_Code();
            if ( !v4 )
              return 0;
            if ( v4 == 2 )
              return 1;
            *(_BYTE *)&Player_Flags &= 0xFEu;
          }
          else if ( EquippedItems & 2 && Key_For_Minimap & Key_Pressed )
          {
            Blit_Rect_From_Img_File_To_Region(10, (int)&FullscreenRect);
            v3 = sub_414640();
            if ( !v3 )
              return 0;
            if ( v3 == 2 )
              return 1;
          }
        }
        if ( Game_State & 2 )
        {
          if ( Key_For_Next_Weapon & Key_Pressed )
          {
            Switch_to_Next_Weap();
          }
          else if ( Key_For_Prev_Weapon & Key_Pressed )
          {
            Switch_to_Prev_Weap();
          }
        }
        if ( v7 % 2 )
        {
          v2 = Tsc_Parser();
          if ( !v2 )
            return 0;
          if ( v2 == 2 )
            return 1;
        }
        TSC_MNA(0);
        sub_41A430(16, 8);
        if ( Game_State & 2 )
        {
          Render_Health_Bar(1);
          Render_XP_Bar_And_Misc(1);
          Underwater_Timer(120, 104);
          Render_Weapon_Icons();
        }
        if ( Game_State & 8 )
        {
          sub_40D350();
          Draw_From_Slot_0x25();
        }
        sub_421F10();
        Display_FPS();
        if ( !Upd_Scr_With_Wind_(AppWinHandle) )
          break;
        ++GameTime;
      }
      result = 0;
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    if ( sub_41D550(hWnd) )
      goto LABEL_8;
    result = 0;
  }
  return result;
}
// 40EA50: using guessed type int _initp_eh_hooks(void);
// 416E20: using guessed type int _crt_debugger_hook_1(void);
// 47B450: using guessed type int _crt_debugger_hook_2(void);
// 48F91C: using guessed type int FullscreenRect;
// 493618: using guessed type int Key_For_Next_Weapon;
// 49361C: using guessed type int Key_For_Prev_Weapon;
// 493620: using guessed type int Key_For_Menu;
// 493624: using guessed type int Key_For_Minimap;
// 49E1E4: using guessed type int CursorPosition;
// 49E1E8: using guessed type int Game_State;
// 49E1EC: using guessed type int GameTime;
// 49E214: using guessed type int Key_Pressed;
// 49E650: using guessed type int EquippedItems;

//----- (004108B0) --------------------------------------------------------
int __cdecl sub_4108B0(int a1, _DWORD *a2, int a3)
{
  int result; // eax@1
  char ptr1; // [sp+0h] [bp-4Ch]@1
  int v5; // [sp+10h] [bp-3Ch]@1
  void *ptr2; // [sp+14h] [bp-38h]@1
  const char *v7; // [sp+18h] [bp-34h]@1
  const char *v8; // [sp+1Ch] [bp-30h]@1
  const char *v9; // [sp+20h] [bp-2Ch]@1
  const char *v10; // [sp+24h] [bp-28h]@1
  const char *v11; // [sp+28h] [bp-24h]@1
  const char *v12; // [sp+2Ch] [bp-20h]@1
  const char *v13; // [sp+30h] [bp-1Ch]@1
  const char *v14; // [sp+34h] [bp-18h]@1
  const char *v15; // [sp+38h] [bp-14h]@1
  const char *v16; // [sp+3Ch] [bp-10h]@1
  const char *v17; // [sp+40h] [bp-Ch]@1
  const char *v18; // [sp+44h] [bp-8h]@1
  int i; // [sp+48h] [bp-4h]@1

  v5 = dword_498B20;
  ptr2 = "XXX";
  v7 = "Jan";
  v8 = "Feb";
  v9 = "Mar";
  v10 = "Apr";
  v11 = "May";
  v12 = "Jun";
  v13 = "Jul";
  v14 = "Aug";
  v15 = "Sep";
  v16 = "Oct";
  v17 = "Nov";
  v18 = "Dec";
  result = sscanf("Jun 12 2005", "%s %d %d", &ptr1, a3, a1);
  for ( i = 0; i < 12; ++i )
  {
    result = memcmp(&ptr1, *(&ptr2 + i), 3u);
    if ( !result )
      break;
    result = i + 1;
  }
  *a2 = i;
  return result;
}
// 498B20: using guessed type int dword_498B20;

//----- (00410990) --------------------------------------------------------
int __cdecl Get_Version_Number(int a1, int a2, int a3, int a4)
{
  CHAR Filename; // [sp+0h] [bp-128h]@1
  int v6; // [sp+10Ch] [bp-1Ch]@1
  unsigned int puLen; // [sp+110h] [bp-18h]@4
  LPVOID lpBuffer; // [sp+114h] [bp-14h]@4
  int v9; // [sp+118h] [bp-10h]@1
  DWORD dwHandle; // [sp+11Ch] [bp-Ch]@1
  size_t size; // [sp+120h] [bp-8h]@1
  LPVOID lpData; // [sp+124h] [bp-4h]@1

  v6 = dword_498B20;
  lpData = 0;
  v9 = 0;
  GetModuleFileNameA(0, &Filename, 0x104u);
  size = GetFileVersionInfoSizeA(&Filename, &dwHandle);
  if ( size )
  {
    lpData = malloc(size);
    if ( lpData )
    {
      if ( GetFileVersionInfoA(&Filename, 0, size, lpData) && VerQueryValueA(lpData, L"\\", &lpBuffer, &puLen) )
      {
        *(_DWORD *)a1 = (unsigned __int16)(*((_DWORD *)lpBuffer + 2) >> 16);
        *(_DWORD *)a2 = (unsigned __int16)*((_DWORD *)lpBuffer + 2);
        *(_DWORD *)a3 = (unsigned __int16)(*((_DWORD *)lpBuffer + 3) >> 16);
        *(_DWORD *)a4 = *((_WORD *)lpBuffer + 6);
        v9 = 1;
      }
    }
  }
  if ( lpData )
    free(lpData);
  return v9;
}
// 498B20: using guessed type int dword_498B20;

//----- (00410AB0) --------------------------------------------------------
bool __cdecl sub_410AB0(HWND hwnd)
{
  CHAR Buffer[264]; // [sp+0h] [bp-330h]@1
  char str; // [sp+108h] [bp-228h]@1
  HINSTANCE v4; // [sp+214h] [bp-11Ch]@4
  size_t i; // [sp+218h] [bp-118h]@1
  HINSTANCE v6; // [sp+21Ch] [bp-114h]@4
  CHAR File; // [sp+220h] [bp-110h]@4
  int v8; // [sp+32Ch] [bp-4h]@1

  v8 = dword_498B20;
  GetSystemDirectoryA(Buffer, 0x104u);
  sprintf(&str, "%s\\Sndvol32.exe", Buffer);
  for ( i = strlen(Buffer); Buffer[i] != 92; --i )
    ;
  Buffer[i] = 0;
  sprintf(&File, "%s\\Sndvol32.exe", Buffer);
  v4 = ShellExecuteA(hwnd, "open", &str, 0, 0, 5);
  v6 = ShellExecuteA(hwnd, "open", &File, 0, 0, 5);
  return (signed int)v4 > 32 || (signed int)v6 > 32;
}
// 498B20: using guessed type int dword_498B20;
// 410AB0: using guessed type CHAR Buffer[264];

//----- (00410D10) --------------------------------------------------------
signed int __cdecl Check_for_file(int a1)
{
  signed int result; // eax@2
  char str; // [sp+0h] [bp-110h]@1
  int v3; // [sp+108h] [bp-8h]@1
  FILE *stream; // [sp+10Ch] [bp-4h]@1

  v3 = dword_498B20;
  sprintf(&str, "%s\\%s", FullExePath, a1);
  stream = fopen(&str, "rb");
  if ( stream )
  {
    fclose(stream);
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}
// 498B20: using guessed type int dword_498B20;

//----- (00410D80) --------------------------------------------------------
DWORD __cdecl FileLength(char *FileName)
{
  DWORD result; // eax@2
  DWORD v2; // ST1C_4@3
  HANDLE hFile; // [sp+4h] [bp-4h]@1

  hFile = CreateFileA(FileName, 0, 1u, 0, 3u, 0x80u, 0);
  if ( hFile == (HANDLE)-1 )
  {
    result = -1;
  }
  else
  {
    v2 = GetFileSize(hFile, 0);
    CloseHandle(hFile);
    result = v2;
  }
  return result;
}

//----- (00410DE0) --------------------------------------------------------
signed int __cdecl sub_410DE0(int a1, int a2)
{
  signed int result; // eax@4
  char str; // [sp+0h] [bp-110h]@1
  int v4; // [sp+108h] [bp-8h]@1
  FILE *stream; // [sp+10Ch] [bp-4h]@3

  v4 = dword_498B20;
  sprintf(&str, "%s\\%s", FullExePath, "error.log");
  if ( (signed int)FileLength(&str) > 102400 )
    DeleteFileA(&str);
  stream = fopen(&str, "a+t");
  if ( stream )
  {
    fprintf(stream, "%s,%d\n", a1, a2);
    fclose(stream);
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}
// 498B20: using guessed type int dword_498B20;

//----- (00410E90) --------------------------------------------------------
bool __cdecl sub_410E90(unsigned __int8 a1)
{
  bool result; // eax@3

  if ( (signed int)a1 < 129 || (signed int)a1 > 159 )
    result = (signed int)a1 >= 224 && (signed int)a1 <= 239;
  else
    result = 1;
  return result;
}

//----- (00410EE0) --------------------------------------------------------
bool __cdecl CenterWindow(HWND hWnd)
{
  struct tagRECT Rect; // [sp+0h] [bp-3Ch]@1
  HWND v3; // [sp+10h] [bp-2Ch]@1
  struct tagRECT v4; // [sp+14h] [bp-28h]@2
  int X; // [sp+24h] [bp-18h]@4
  int Y; // [sp+28h] [bp-14h]@4
  int pvParam; // [sp+2Ch] [bp-10h]@1
  int v8; // [sp+30h] [bp-Ch]@6
  LONG v9; // [sp+34h] [bp-8h]@8
  LONG v10; // [sp+38h] [bp-4h]@10

  SystemParametersInfoA(0x30u, 0, &pvParam, 0);
  GetWindowRect(hWnd, &Rect);
  v3 = GetParent(hWnd);
  if ( v3 )
    GetWindowRect(v3, &v4);
  else
    SystemParametersInfoA(0x30u, 0, &v4, 0);
  X = v4.left + (v4.right - v4.left - (Rect.right - Rect.left)) / 2;
  Y = v4.top + (v4.bottom - v4.top - (Rect.bottom - Rect.top)) / 2;
  if ( v4.left + (v4.right - v4.left - (Rect.right - Rect.left)) / 2 < pvParam )
    X = pvParam;
  if ( Y < v8 )
    Y = v8;
  if ( X + Rect.right - Rect.left > v9 )
    X = v9 - (Rect.right - Rect.left);
  if ( Y + Rect.bottom - Rect.top > v10 )
    Y = v10 - (Rect.bottom - Rect.top);
  return SetWindowPos(hWnd, 0, X, Y, 0, 0, 1u);
}

//----- (00410FE0) --------------------------------------------------------
int __cdecl Get_Window_Rects(HWND hWnd, int a2, int a3)
{
  char str; // [sp+0h] [bp-148h]@1
  int v5; // [sp+10Ch] [bp-3Ch]@1
  int v6; // [sp+110h] [bp-38h]@2
  int v7; // [sp+114h] [bp-34h]@2
  int v8; // [sp+118h] [bp-30h]@2
  FILE *stream; // [sp+11Ch] [bp-2Ch]@1
  int v10; // [sp+120h] [bp-28h]@2
  int X; // [sp+124h] [bp-24h]@2
  int Y; // [sp+128h] [bp-20h]@4
  int v13; // [sp+12Ch] [bp-1Ch]@2
  int v14; // [sp+130h] [bp-18h]@4
  int v15; // [sp+134h] [bp-14h]@1
  int pvParam; // [sp+138h] [bp-10h]@2
  int v17; // [sp+13Ch] [bp-Ch]@12
  int v18; // [sp+140h] [bp-8h]@14
  int v19; // [sp+144h] [bp-4h]@16

  v5 = dword_498B20;
  v15 = 1;
  sprintf(&str, "%s\\%s", FullExePath, a2);
  stream = fopen(&str, "rb");
  if ( stream )
  {
    sub_480F55((FILE *)&X, 0x10u, 1u, stream);
    sub_480F55((FILE *)&v15, 4u, 1u, stream);
    fclose(stream);
    SystemParametersInfoA(0x30u, 0, &pvParam, 0);
    v8 = GetSystemMetrics(61);
    v6 = GetSystemMetrics(62);
    v7 = GetSystemMetrics(28);
    v10 = GetSystemMetrics(29);
    if ( v13 - X < v7 )
      v13 = v7 + X;
    if ( v14 - Y < v10 )
      v14 = v10 + Y;
    if ( v13 - X > v8 )
      v13 = v8 + X;
    if ( v14 - Y > v6 )
      v14 = v8 + Y;
    if ( X < pvParam )
    {
      v13 += pvParam - X;
      X = pvParam;
    }
    if ( Y < v17 )
    {
      v14 += v17 - Y;
      Y = v17;
    }
    if ( v13 > v18 )
    {
      X -= v13 - v18;
      v13 -= v13 - v18;
    }
    if ( v14 > v19 )
    {
      Y -= v14 - v19;
      v14 -= v14 - v19;
    }
    if ( a3 )
      MoveWindow(hWnd, X, Y, v13 - X, v14 - Y, 0);
    else
      SetWindowPos(hWnd, 0, X, Y, 0, 0, 1u);
  }
  if ( v15 == 3 )
  {
    if ( !ShowWindow(hWnd, 3) )
      return 0;
  }
  else
  {
    ShowWindow(hWnd, 1);
  }
  return 1;
}
// 498B20: using guessed type int dword_498B20;

//----- (004111F0) --------------------------------------------------------
int __cdecl sub_4111F0(HWND hWnd, int a2)
{
  int result; // eax@2
  char str; // [sp+0h] [bp-150h]@7
  int v4; // [sp+10Ch] [bp-44h]@1
  WINDOWPLACEMENT wndpl; // [sp+110h] [bp-40h]@1
  FILE *stream; // [sp+13Ch] [bp-14h]@7
  struct tagRECT Rect; // [sp+140h] [bp-10h]@4

  v4 = dword_498B20;
  if ( !GetWindowPlacement(hWnd, &wndpl) )
    return 0;
  if ( wndpl.showCmd == 1 )
  {
    if ( !GetWindowRect(hWnd, &Rect) )
      return 0;
    wndpl.rcNormalPosition = (RECT)Rect;
  }
  sprintf(&str, "%s\\%s", FullExePath, a2);
  stream = fopen(&str, "wb");
  if ( stream )
  {
    sub_481981((FILE *)&wndpl.rcNormalPosition, 0x10u, 1u, stream);
    sub_481981((FILE *)&wndpl.showCmd, 4u, 1u, stream);
    fclose(stream);
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}
// 498B20: using guessed type int dword_498B20;

//----- (004112E0) --------------------------------------------------------
bool __cdecl sub_4112E0(char *filename)
{
  bool result; // eax@2
  char ptr1; // [sp+0h] [bp-1Ch]@3
  int v3; // [sp+10h] [bp-Ch]@1
  size_t num; // [sp+14h] [bp-8h]@1
  FILE *stream; // [sp+18h] [bp-4h]@1

  v3 = dword_498B20;
  num = strlen(ROM_PImageTag);
  stream = fopen(filename, "rb");
  if ( stream )
  {
    fseek(stream, -num, 2);
    sub_480F55((FILE *)&ptr1, 1u, num, stream);
    fclose(stream);
    result = memcmp(&ptr1, ROM_PImageTag, num) == 0;
  }
  else
  {
    result = 0;
  }
  return result;
}
// 498B20: using guessed type int dword_498B20;

//----- (00411390) --------------------------------------------------------
signed int sub_411390()
{
  signed int result; // eax@28
  char str; // [sp+0h] [bp-50h]@29
  int v2; // [sp+44h] [bp-Ch]@1
  int v3; // [sp+48h] [bp-8h]@1
  size_t v4; // [sp+4Ch] [bp-4h]@29

  v2 = dword_498B20;
  Load_Image_From_Res("PIXEL", 1);
  v3 = 0;
  if ( !Load_Image_From_File("MyChar", 16) )
    v3 = 1;
  if ( !Load_Image_From_File("Title", 0) )
    v3 = 1;
  if ( !Load_Image_From_File("ArmsImage", 12) )
    v3 = 1;
  if ( !Load_Image_From_File("Arms", 11) )
    v3 = 1;
  if ( !Load_Image_From_File("ItemImage", 8) )
    v3 = 1;
  if ( !Load_Image_From_File("StageImage", 14) )
    v3 = 1;
  if ( !Load_Image_From_File("Npc\\NpcSym", 20) )
    v3 = 1;
  if ( !Load_Image_From_File("Npc\\NpcRegu", 23) )
    v3 = 1;
  if ( !Load_Image_From_File("TextBox", 26) )
    v3 = 1;
  if ( !Load_Image_From_File("Caret", 19) )
    v3 = 1;
  if ( !Load_Image_From_File("Bullet", 17) )
    v3 = 1;
  if ( !Load_Image_From_File("Face", 27) )
    v3 = 1;
  if ( !Load_Image_From_File("Fade", 6) )
    v3 = 1;
  Load_Image_From_Res("CREDIT01", 36);
  if ( v3 )
  {
    result = 0;
  }
  else
  {
    Prep_RAM_For_Img_(320, 240, 10, 1);
    Prep_RAM_For_Img_(320, 240, 28, 0);
    Prep_RAM_For_Img_(320, 240, 9, 1);
    Prep_RAM_For_Img_(320, 240, 37, 0);
    Prep_RAM_For_Img_(256, 256, 2, 0);
    Prep_RAM_For_Img_(160, 16, 13, 0);
    Prep_RAM_For_Img_(40, 240, 29, 0);
    Prep_RAM_For_Img_(320, 240, 21, 0);
    Prep_RAM_For_Img_(320, 240, 22, 0);
    Prep_RAM_For_Img_(320, 240, 35, 0);
    v4 = Sound_Loader((int)&ROM_SoundData, 2, 32);
    v4 += Sound_Loader((int)&unk_48FA20, 2, 33);
    v4 += Sound_Loader((int)&unk_48FB00, 2, 34);
    v4 += Sound_Loader((int)&unk_48FBE0, 1, 15);
    v4 += Sound_Loader((int)&unk_48FC50, 1, 24);
    v4 += Sound_Loader((int)&unk_48FCC0, 1, 23);
    v4 += Sound_Loader((int)&unk_48FD30, 2, 50);
    v4 += Sound_Loader((int)&unk_48FE10, 2, 51);
    v4 += Sound_Loader((int)&unk_4907B0, 1, 1);
    v4 += Sound_Loader((int)&unk_4909E0, 1, 2);
    v4 += Sound_Loader((int)&unk_4911C0, 1, 29);
    v4 += Sound_Loader((int)&unk_4913F0, 1, 43);
    v4 += Sound_Loader((int)&unk_491460, 3, 44);
    v4 += Sound_Loader((int)&unk_4915B0, 1, 45);
    v4 += Sound_Loader((int)&unk_491620, 1, 46);
    v4 += Sound_Loader((int)&unk_491700, 1, 47);
    v4 += Sound_Loader((int)&unk_490EB0, 3, 35);
    v4 += Sound_Loader((int)&unk_491000, 3, 39);
    v4 += Sound_Loader((int)&unk_48FEF0, 2, 52);
    v4 += Sound_Loader((int)&unk_490580, 2, 53);
    v4 += Sound_Loader((int)&unk_48FFD0, 2, 70);
    v4 += Sound_Loader((int)&unk_4900B0, 2, 71);
    v4 += Sound_Loader((int)&unk_490190, 2, 72);
    v4 += Sound_Loader((int)&unk_490660, 1, 5);
    v4 += Sound_Loader((int)&unk_490740, 1, 11);
    v4 += Sound_Loader((int)&unk_490890, 1, 4);
    v4 += Sound_Loader((int)&unk_490D60, 2, 25);
    v4 += Sound_Loader((int)&unk_490E40, 1, 27);
    v4 += Sound_Loader((int)&unk_4910E0, 2, 28);
    v4 += Sound_Loader((int)&unk_490A50, 1, 14);
    v4 += Sound_Loader((int)&unk_490350, 2, 16);
    v4 += Sound_Loader((int)&unk_490430, 3, 17);
    v4 += Sound_Loader((int)&unk_490820, 1, 18);
    v4 += Sound_Loader((int)&unk_490900, 2, 20);
    v4 += Sound_Loader((int)&unk_4906D0, 1, 22);
    v4 += Sound_Loader((int)&unk_490B30, 2, 26);
    v4 += Sound_Loader((int)&unk_490C10, 1, 21);
    v4 += Sound_Loader((int)&unk_490C80, 2, 12);
    v4 += Sound_Loader((int)&unk_491230, 2, 38);
    v4 += Sound_Loader((int)&unk_491310, 1, 31);
    v4 += Sound_Loader((int)&unk_491380, 1, 42);
    v4 += Sound_Loader((int)&unk_491770, 1, 48);
    v4 += Sound_Loader((int)&unk_4917E0, 2, 49);
    v4 += Sound_Loader((int)&unk_4918C0, 1, 100);
    v4 += Sound_Loader((int)&unk_491930, 3, 101);
    v4 += Sound_Loader((int)&unk_491A80, 2, 54);
    v4 += Sound_Loader((int)&unk_491B60, 2, 102);
    v4 += Sound_Loader((int)&unk_491C40, 2, 103);
    v4 += Sound_Loader((int)&unk_491CB0, 1, 104);
    v4 += Sound_Loader((int)&unk_491D20, 1, 105);
    v4 += Sound_Loader((int)&unk_491D90, 2, 106);
    v4 += Sound_Loader((int)&unk_491E70, 1, 107);
    v4 += Sound_Loader((int)&unk_491EE0, 1, 30);
    v4 += Sound_Loader((int)&unk_491F50, 1, 108);
    v4 += Sound_Loader((int)&unk_491FC0, 1, 109);
    v4 += Sound_Loader((int)&unk_492030, 1, 110);
    v4 += Sound_Loader((int)&unk_4920A0, 1, 111);
    v4 += Sound_Loader((int)&unk_492110, 1, 112);
    v4 += Sound_Loader((int)&unk_492180, 1, 113);
    v4 += Sound_Loader((int)&unk_4921F0, 2, 114);
    v4 += Sound_Loader((int)&unk_4922D0, 2, 150);
    v4 += Sound_Loader((int)&unk_4923B0, 2, 151);
    v4 += Sound_Loader((int)&unk_492490, 1, 152);
    v4 += Sound_Loader((int)&unk_492500, 1, 153);
    v4 += Sound_Loader((int)&unk_492570, 2, 154);
    v4 += Sound_Loader((int)&unk_4929D0, 2, 155);
    v4 += Sound_Loader((int)&unk_492650, 2, 56);
    v4 += Sound_Loader((int)&unk_492730, 2, 40);
    v4 += Sound_Loader((int)&unk_492730, 2, 41);
    v4 += Sound_Loader((int)&unk_492810, 2, 37);
    v4 += Sound_Loader((int)&unk_4928F0, 2, 57);
    v4 += Sound_Loader((int)&unk_492AB0, 3, 115);
    v4 += Sound_Loader((int)&unk_492C00, 1, 104);
    v4 += Sound_Loader((int)&unk_492C70, 3, 116);
    v4 += Sound_Loader((int)&unk_492DC0, 2, 58);
    v4 += Sound_Loader((int)&unk_492EA0, 2, 55);
    v4 += Sound_Loader((int)&unk_492F80, 2, 117);
    v4 += Sound_Loader((int)&unk_493060, 1, 59);
    v4 += Sound_Loader((int)&unk_4930D0, 1, 60);
    v4 += Sound_Loader((int)&unk_493140, 1, 61);
    v4 += Sound_Loader((int)&unk_4931B0, 2, 62);
    v4 += Sound_Loader((int)&unk_493290, 2, 63);
    v4 += Sound_Loader((int)&unk_493370, 2, 64);
    v4 += Sound_Loader((int)&unk_493450, 1, 65);
    v4 += Sound_Loader((int)&unk_4934C0, 1, 3);
    v4 += Sound_Loader((int)&unk_493530, 1, 6);
    v4 += Sound_Loader((int)&unk_4935A0, 1, 7);
    sprintf(&str, "PixTone = %d byte", v4);
    result = 1;
  }
  return result;
}
// 498B20: using guessed type int dword_498B20;

//----- (00411E60) --------------------------------------------------------
signed int __cdecl sub_411E60(int a1)
{
  if ( a1 == 1 )
  {
    if ( dword_49E1F4 )
      (*(void (__stdcall **)(int))(*(_DWORD *)dword_49E1F4 + 28))(dword_49E1F4);
  }
  else if ( dword_49E1F4 )
  {
    (*(void (__stdcall **)(int))(*(_DWORD *)dword_49E1F4 + 32))(dword_49E1F4);
  }
  return 1;
}
// 49E1F4: using guessed type int dword_49E1F4;

//----- (00411EB0) --------------------------------------------------------
bool __cdecl sub_411EB0(HINSTANCE hinst, int a2)
{
  bool result; // eax@2

  if ( DirectInputCreateA(hinst, 0x500u, &DirectInputObj, 0) )
    result = 0;
  else
    result = sub_411EF0(a2) != 0;
  return result;
}

//----- (00411EF0) --------------------------------------------------------
signed int __cdecl sub_411EF0(int a1)
{
  signed int result; // eax@4
  LPDIRECTINPUTA v2; // [sp+0h] [bp-8h]@1
  int v3; // [sp+4h] [bp-4h]@1

  v3 = 0;
  v2 = DirectInputObj;
  (*((void (__cdecl **)(_DWORD))DirectInputObj->lpVtbl + 1))(DirectInputObj);
  (*((void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))DirectInputObj->lpVtbl + 4))(
    DirectInputObj,
    4,
    sub_411FC0,
    &v2,
    1);
  if ( v2 )
  {
    (*((void (__cdecl **)(LPDIRECTINPUTA))v2->lpVtbl + 2))(v2);
    v2 = 0;
  }
  if ( v3 )
  {
    dword_49E1F4 = v3;
    if ( (*(int (__cdecl **)(int, int *))(*(_DWORD *)v3 + 44))(v3, dword_480D10) )
    {
      result = 0;
    }
    else if ( (*(int (__cdecl **)(int, int, signed int))(*(_DWORD *)dword_49E1F4 + 52))(dword_49E1F4, a1, 9) )
    {
      result = 0;
    }
    else
    {
      (*(void (__cdecl **)(int))(*(_DWORD *)dword_49E1F4 + 28))(dword_49E1F4);
      result = 1;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}
// 480D10: using guessed type int dword_480D10[6];
// 49E1F4: using guessed type int dword_49E1F4;

//----- (00411FC0) --------------------------------------------------------
signed int __stdcall sub_411FC0(int a1, int a2)
{
  signed int result; // eax@4
  char str; // [sp+0h] [bp-108h]@9
  int v4; // [sp+100h] [bp-8h]@1
  int v5; // [sp+104h] [bp-4h]@5

  v4 = dword_498B20;
  if ( !(dword_49E20C & 1) )
  {
    dword_49E20C |= 1u;
    dword_49E208 = a2;
  }
  if ( (*(int (__cdecl **)(_DWORD, int, int *, _DWORD))(**(_DWORD **)dword_49E208 + 12))(
         *(_DWORD *)dword_49E208,
         a1 + 4,
         &dword_49E204,
         0) )
  {
    *(_DWORD *)(dword_49E208 + 4) = 0;
    result = 1;
  }
  else
  {
    v5 = (**(int (__cdecl ***)(int, const char *, int *))dword_49E204)(dword_49E204, "DY.\x11DEST", &dword_49E200);
    if ( v5 >= 0 )
    {
      if ( dword_49E204 )
      {
        (*(void (__cdecl **)(int))(*(_DWORD *)dword_49E204 + 8))(dword_49E204);
        dword_49E204 = 0;
      }
      *(_DWORD *)(dword_49E208 + 4) = dword_49E200;
      sprintf(
        &str,
        "DeviceGUID = %x\n",
        *(_DWORD *)(a1 + 4),
        *(_DWORD *)(a1 + 8),
        *(_DWORD *)(a1 + 12),
        *(_DWORD *)(a1 + 16));
      OutputDebugStringA(&str);
      result = 0;
    }
    else
    {
      dword_49E1F4 = 0;
      result = 1;
    }
  }
  return result;
}
// 498B20: using guessed type int dword_498B20;
// 49E1F4: using guessed type int dword_49E1F4;
// 49E200: using guessed type int dword_49E200;
// 49E204: using guessed type int dword_49E204;
// 49E208: using guessed type int dword_49E208;
// 49E20C: using guessed type int dword_49E20C;

//----- (004120F0) --------------------------------------------------------
signed int __cdecl sub_4120F0(int a1)
{
  signed int i; // [sp+0h] [bp-5Ch]@9
  int v3; // [sp+4h] [bp-58h]@5
  int v4; // [sp+8h] [bp-54h]@19
  char v5[32]; // [sp+34h] [bp-28h]@11
  int v6; // [sp+54h] [bp-8h]@1
  int v7; // [sp+58h] [bp-4h]@5

  v6 = dword_498B20;
  if ( !dword_49E1F4 )
    return 0;
  if ( (*(int (__cdecl **)(int))(*(_DWORD *)dword_49E1F4 + 100))(dword_49E1F4) )
    return 0;
  v7 = (*(int (__cdecl **)(int, signed int, int *))(*(_DWORD *)dword_49E1F4 + 36))(dword_49E1F4, 80, &v3);
  if ( v7 )
  {
    if ( v7 != -2147024866 )
      return 0;
    sub_411E60(0);
  }
  for ( i = 0; i < 32; ++i )
  {
    if ( v5[i] & 0x80 )
      *(_DWORD *)(a1 + 4 * i + 16) = 1;
    else
      *(_DWORD *)(a1 + 4 * i + 16) = 0;
  }
  *(_DWORD *)(a1 + 12) = 0;
  *(_DWORD *)(a1 + 4) = 0;
  *(_DWORD *)(a1 + 8) = 0;
  *(_DWORD *)a1 = 0;
  if ( v3 >= dword_49E1F8 - 10000 )
  {
    if ( v3 > dword_49E1F8 + 10000 )
      *(_DWORD *)(a1 + 4) = 1;
  }
  else
  {
    *(_DWORD *)a1 = 1;
  }
  if ( v4 >= dword_49E1FC - 10000 )
  {
    if ( v4 > dword_49E1FC + 10000 )
      *(_DWORD *)(a1 + 12) = 1;
  }
  else
  {
    *(_DWORD *)(a1 + 8) = 1;
  }
  return 1;
}
// 498B20: using guessed type int dword_498B20;
// 49E1F4: using guessed type int dword_49E1F4;
// 49E1F8: using guessed type int dword_49E1F8;
// 49E1FC: using guessed type int dword_49E1FC;
// 4120F0: using guessed type char var_28[32];

//----- (00412250) --------------------------------------------------------
signed int sub_412250()
{
  int v1; // [sp+0h] [bp-58h]@5
  int v2; // [sp+4h] [bp-54h]@9
  int v3; // [sp+50h] [bp-8h]@1
  int v4; // [sp+54h] [bp-4h]@5

  v3 = dword_498B20;
  if ( !dword_49E1F4 )
    return 0;
  if ( (*(int (__cdecl **)(int))(*(_DWORD *)dword_49E1F4 + 100))(dword_49E1F4) )
    return 0;
  v4 = (*(int (__cdecl **)(int, signed int, int *))(*(_DWORD *)dword_49E1F4 + 36))(dword_49E1F4, 80, &v1);
  if ( v4 )
  {
    if ( v4 != -2147024866 )
      return 0;
    sub_411E60(0);
  }
  dword_49E1F8 = v1;
  dword_49E1FC = v2;
  return 1;
}
// 498B20: using guessed type int dword_498B20;
// 49E1F4: using guessed type int dword_49E1F4;
// 49E1F8: using guessed type int dword_49E1F8;
// 49E1FC: using guessed type int dword_49E1FC;

//----- (004122E0) --------------------------------------------------------
int Update_Keys()
{
  int result; // eax@1

  result = LastKeyHeld ^ Key_Held;
  Key_Pressed = (LastKeyHeld ^ Key_Held) & Key_Held;
  LastKeyHeld = Key_Held;
  return result;
}
// 49E210: using guessed type int Key_Held;
// 49E214: using guessed type int Key_Pressed;
// 49E218: using guessed type int LastKeyHeld;

//----- (00412320) --------------------------------------------------------
bool __cdecl sub_412320(HWND hWnd)
{
  char str; // [sp+0h] [bp-108h]@1
  int v3; // [sp+104h] [bp-4h]@1

  v3 = dword_498B20;
  sprintf(&str, "%s", ROM_PClassName);
  return SetWindowTextA(hWnd, &str);
}
// 498B20: using guessed type int dword_498B20;

//----- (00412370) --------------------------------------------------------
void Display_FPS()
{
  int Numbers_To_Display; // ST10_4@2

  if ( ShowFPS )
  {
    Numbers_To_Display = Calculate_FPS();
    Render_Numbers(280, 8, Numbers_To_Display, 0);
  }
}
// 49E464: using guessed type int ShowFPS;

//----- (004123A0) --------------------------------------------------------
int Calculate_FPS()
{
  unsigned int v0; // eax@3

  if ( dword_493644 )
  {
    Timer1000Ticks = GetTickCount();
    dword_493644 = 0;
  }
  v0 = GetTickCount();
  ++Timer1000Elapsed;
  if ( Timer1000Ticks + 1000 <= v0 )
  {
    Timer1000Ticks += 1000;
    Timer1000Time = Timer1000Elapsed;
    Timer1000Elapsed = 0;
  }
  return Timer1000Time;
}
// 493644: using guessed type int dword_493644;
// 49E46C: using guessed type int Timer1000Time;
// 49E470: using guessed type int Timer1000Elapsed;
// 49E474: using guessed type int Timer1000Ticks;

//----- (00412420) --------------------------------------------------------
// Creating game window, starting game
int __stdcall WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nShowCmd)
{
  int result; // eax@2
  int v5; // esi@39
  int v6; // esi@39
  int v7; // esi@39
  int v8; // esi@39
  int v9; // ST2C_4@39
  int v10; // eax@39
  int v11; // ST1C_4@47
  int v12; // eax@47
  int Ptr_Img_Rects; // [sp+1Ch] [bp-124h]@57
  int v14; // [sp+20h] [bp-120h]@57
  int v15; // [sp+24h] [bp-11Ch]@57
  int v16; // [sp+28h] [bp-118h]@57
  int Src_Rects; // [sp+2Ch] [bp-114h]@57
  int v18; // [sp+30h] [bp-110h]@57
  int v19; // [sp+34h] [bp-10Ch]@57
  int v20; // [sp+38h] [bp-108h]@57
  int v21; // [sp+3Ch] [bp-104h]@57
  int v22; // [sp+40h] [bp-100h]@53
  HMENU v23; // [sp+44h] [bp-FCh]@41
  char str1; // [sp+48h] [bp-F8h]@3
  CHAR v25; // [sp+68h] [bp-D8h]@62
  int v26; // [sp+A8h] [bp-98h]@17
  int v27; // [sp+ACh] [bp-94h]@5
  int v28; // [sp+B0h] [bp-90h]@10
  int v29; // [sp+B4h] [bp-8Ch]@33
  int v30; // [sp+B8h] [bp-88h]@59
  int v31[10]; // [sp+BCh] [bp-84h]@25
  int v32; // [sp+E4h] [bp-5Ch]@1
  int ptr; // [sp+E8h] [bp-58h]@33
  LRESULT (__stdcall *v34)(HWND, UINT, WPARAM, LPARAM); // [sp+F0h] [bp-50h]@33
  HINSTANCE v35; // [sp+FCh] [bp-44h]@33
  HICON v36; // [sp+100h] [bp-40h]@33
  HCURSOR v37; // [sp+104h] [bp-3Ch]@33
  HGDIOBJ v38; // [sp+108h] [bp-38h]@33
  const char *v39; // [sp+10Ch] [bp-34h]@34
  LPCSTR v40; // [sp+110h] [bp-30h]@33
  HICON v41; // [sp+114h] [bp-2Ch]@33
  int X; // [sp+118h] [bp-28h]@39
  int nHeight; // [sp+11Ch] [bp-24h]@39
  int nWidth; // [sp+120h] [bp-20h]@39
  int i; // [sp+124h] [bp-1Ch]@22
  HWND hWnd; // [sp+128h] [bp-18h]@39
  int Y; // [sp+12Ch] [bp-14h]@39
  int v48; // [sp+130h] [bp-10h]@33
  int v49; // [sp+134h] [bp-Ch]@33
  int v50; // [sp+138h] [bp-8h]@33
  int v51; // [sp+13Ch] [bp-4h]@33

  v32 = dword_498B20;
  hObject = OpenMutexA(0x1F0001u, 0, lpName);
  if ( hObject )
  {
    CloseHandle(hObject);
    result = 0;
  }
  else
  {
    hMutex = CreateMutexA(0, 0, lpName);
    AppInstance = hInstance;
    GetModuleFileNameA(0, FullExePath, 0x104u);
    PathRemoveFileSpecA(FullExePath);
    strcpy(byte_49E220, FullExePath);
    strcat(byte_49E220, "\\data");
    if ( !Load_Config_dat(&str1) )
      Set_Default_Config_dat(&str1);
    if ( v27 )
    {
      if ( v27 == 1 )
      {
        Key_For_Jump_Duplicate = 32;
        Key_For_Shoot_Duplicate = 64;
      }
    }
    else
    {
      Key_For_Jump_Duplicate = 64;
      Key_For_Shoot_Duplicate = 32;
    }
    if ( v28 )
    {
      if ( v28 == 1 )
      {
        Key_For_Jump = Key_For_Shoot_Duplicate;
        Key_For_Shoot = Key_For_Jump_Duplicate;
      }
    }
    else
    {
      Key_For_Jump = Key_For_Jump_Duplicate;
      Key_For_Shoot = Key_For_Shoot_Duplicate;
    }
    if ( Check_for_file((int)"s_reverse") )
    {
      Key_For_Next_Weapon = 256;
      Key_For_Prev_Weapon = 128;
    }
    if ( v26 )
    {
      if ( v26 == 1 )
      {
        Key_For_Left = 0x10000;
        Key_For_Up = 1572864;
        Key_For_Right = 0x40000;
        Key_For_Down = 0x20000;
      }
    }
    else
    {
      Key_For_Left = 1;
      Key_For_Up = 4;
      Key_For_Right = 2;
      Key_For_Down = 8;
    }
    for ( i = 0; i < 8; ++i )
    {
      switch ( v31[i] )
      {
        case 1:
          dword_49E42C[i] = Key_For_Jump_Duplicate;
          break;
        case 2:
          dword_49E42C[i] = Key_For_Shoot_Duplicate;
          break;
        case 3:
          dword_49E42C[i] = Key_For_Next_Weapon;
          break;
        case 6:
          dword_49E42C[i] = Key_For_Prev_Weapon;
          break;
        case 4:
          dword_49E42C[i] = Key_For_Menu;
          break;
        case 5:
          dword_49E42C[i] = Key_For_Minimap;
          break;
        default:
          continue;
      }
    }
    v48 = 0;
    v49 = 0;
    v50 = 320;
    v51 = 240;
    memset(&ptr, 0, 0x30u);
    ptr = 48;
    v34 = Handle_Inputs_;
    v35 = hInstance;
    v38 = GetStockObject(3);
    v40 = ROM_PClassName;
    v37 = LoadCursorA(hInstance, "CURSOR_NORMAL");
    v36 = LoadIconA(hInstance, L"0");
    v41 = LoadIconA(hInstance, "ICON_MINI");
    switch ( v29 )
    {
      case 1:
      case 2:
        v39 = "MENU_MAIN";
        if ( RegisterClassExA((WNDCLASSEXA *)&ptr) )
        {
          if ( v29 == 1 )
          {
            dword_49E450 = 320;
            dword_49E454 = 240;
          }
          else
          {
            dword_49E450 = 640;
            dword_49E454 = 480;
          }
          nWidth = dword_49E450 + 2 * GetSystemMetrics(7) + 2;
          v5 = GetSystemMetrics(8);
          v6 = GetSystemMetrics(4) + 2 * v5;
          nHeight = GetSystemMetrics(15) + dword_49E454 + v6 + 2;
          X = (GetSystemMetrics(0) - nWidth) / 2;
          Y = (GetSystemMetrics(1) - nHeight) / 2;
          v7 = GetSystemMetrics(8);
          v8 = GetSystemMetrics(4) + v7;
          v9 = v8 + GetSystemMetrics(15) + 1;
          v10 = GetSystemMetrics(7);
          Change_Screen_Offsets(v10 + 1, v9);
          hWnd = CreateWindowExA(
                   0,
                   ROM_PClassName,
                   ROM_PClassName,
                   0x10CA0000u,
                   X,
                   Y,
                   nWidth,
                   nHeight,
                   0,
                   0,
                   hInstance,
                   0);
          AppWinHandle = hWnd;
          if ( hWnd )
          {
            v23 = GetMenu(hWnd);
            if ( v29 == 1 )
              DDRAW_Setup_((int)hWnd, 0, 0);
            else
              DDRAW_Setup_((int)hWnd, 1, 0);
            goto Switch_412780_default;
          }
          ReleaseMutex(hMutex);
          result = 0;
        }
        else
        {
          ReleaseMutex(hMutex);
          result = 0;
        }
        break;
      case 0:
      case 3:
      case 4:
        if ( RegisterClassExA((WNDCLASSEXA *)&ptr) )
        {
          dword_49E450 = 640;
          dword_49E454 = 480;
          Change_Screen_Offsets(0, 0);
          v11 = GetSystemMetrics(1);
          v12 = GetSystemMetrics(0);
          hWnd = CreateWindowExA(0, ROM_PClassName, ROM_PClassName, 0x90080000, 0, 0, v12, v11, 0, 0, hInstance, 0);
          AppWinHandle = hWnd;
          if ( hWnd )
          {
            if ( v29 )
            {
              if ( v29 == 3 )
              {
                v22 = 24;
              }
              else if ( v29 == 4 )
              {
                v22 = 32;
              }
            }
            else
            {
              v22 = 16;
            }
            DDRAW_Setup_((int)hWnd, 2, v22);
            dword_49E460 = 1;
            ShowCursor(0);
            goto Switch_412780_default;
          }
          ReleaseMutex(hMutex);
          result = 0;
        }
        else
        {
          ReleaseMutex(hMutex);
          result = 0;
        }
        break;
      default:
Switch_412780_default:
        Src_Rects = 0;
        v18 = 0;
        v19 = 64;
        v20 = 8;
        Ptr_Img_Rects = 0;
        v14 = 0;
        v15 = 320;
        v16 = 240;
        v21 = Load_Image_From_File("Loading", 15);
        FillRects_Memory((int)&Ptr_Img_Rects, 0);
        Render_Graphics((int)&Ptr_Img_Rects, 128, 116, (int)&Src_Rects, 15);
        if ( Upd_Scr_With_Wind_(AppWinHandle) )
        {
          sub_4200C0((int)hWnd);
          if ( v30 && sub_411EB0(hInstance, (int)hWnd) )
          {
            sub_412250();
            dword_49E45C = 1;
          }
          Create_Font(&v25);
          sub_4257F0();
          Upd_Win(hWnd);
          Delete_Font_Obj();
          sub_4201A0();
          DDRAW_Destroy_((int)hWnd);
          ReleaseMutex(hMutex);
          result = 1;
        }
        else
        {
          ReleaseMutex(hMutex);
          result = 1;
        }
        break;
    }
  }
  return result;
}
// 40CF70: using guessed type int Delete_Font_Obj(void);
// 493610: using guessed type int Key_For_Jump_Duplicate;
// 493614: using guessed type int Key_For_Shoot_Duplicate;
// 493618: using guessed type int Key_For_Next_Weapon;
// 49361C: using guessed type int Key_For_Prev_Weapon;
// 493620: using guessed type int Key_For_Menu;
// 493624: using guessed type int Key_For_Minimap;
// 493628: using guessed type int Key_For_Jump;
// 49362C: using guessed type int Key_For_Shoot;
// 493630: using guessed type int Key_For_Left;
// 493634: using guessed type int Key_For_Up;
// 493638: using guessed type int Key_For_Right;
// 49363C: using guessed type int Key_For_Down;
// 498B20: using guessed type int dword_498B20;
// 49E42C: using guessed type int dword_49E42C[];
// 49E450: using guessed type int dword_49E450;
// 49E454: using guessed type int dword_49E454;
// 49E45C: using guessed type int dword_49E45C;
// 49E460: using guessed type int dword_49E460;
// 412420: using guessed type int var_84[10];

//----- (00412BC0) --------------------------------------------------------
int sub_412BC0()
{
  if ( CanAcceptInput )
  {
    CanAcceptInput = 0;
    sub_41C7F0();
    TSC_SSS_SPS__4();
  }
  return Play_Sound_Effect(7, 0);
}
// 49E468: using guessed type int CanAcceptInput;

//----- (00412BF0) --------------------------------------------------------
int sub_412BF0()
{
  if ( !CanAcceptInput )
  {
    CanAcceptInput = 1;
    sub_41C7F0();
    sub_41C790();
    TSC_SSS_SPS__3();
  }
  return Play_Sound_Effect(7, -1);
}
// 49E468: using guessed type int CanAcceptInput;

//----- (00412C30) --------------------------------------------------------
signed int __cdecl sub_412C30(int a1, HDROP a2)
{
  CHAR v3; // [sp+0h] [bp-110h]@2
  int v4; // [sp+108h] [bp-8h]@1
  HDROP v5; // [sp+10Ch] [bp-4h]@1

  v4 = dword_498B20;
  v5 = a2;
  if ( DragQueryFileA(a2, 0xFFFFFFFF, 0, 0) )
  {
    DragQueryFileA(v5, 0, &v3, 0x104u);
    sub_41D260((int)&v3);
  }
  DragFinish(v5);
  return 1;
}
// 498B20: using guessed type int dword_498B20;

//----- (00412CA0) --------------------------------------------------------
LRESULT __stdcall Handle_Inputs_(HWND hWnd, UINT Msg, WPARAM wParam, LPARAM lParam)
{
  HMENU hMenu; // ST38_4@17
  HIMC v5; // ST30_4@33
  bool v7; // [sp+18h] [bp-10h]@0
  HMENU v8; // [sp+20h] [bp-8h]@17

  if ( Msg > 0x101 )
  {
    if ( Msg > 0x233 )
    {
      if ( Msg != 642 )
        return DefWindowProcA(hWnd, Msg, wParam, lParam);
      if ( wParam == 8 )
      {
        v5 = ImmGetContext(hWnd);
        ImmSetOpenStatus(v5, 0);
        ImmReleaseContext(hWnd, v5);
      }
    }
    else if ( Msg == 563 )
    {
      sub_412C30((int)hWnd, (HDROP)wParam);
    }
    else if ( Msg == 273 )
    {
      switch ( (unsigned __int16)wParam )
      {
        case 0x9C41u:
          if ( DialogBoxParamA(AppInstance, "DLG_YESNO", hWnd, (DLGPROC)Quit_Button, (LPARAM)"Quit?") == 1 )
            PostMessageA(hWnd, 0x10u, 0, 0);
          break;
        case 0x9C42u:
          DialogBoxParamA(AppInstance, "DLG_ABOUT", hWnd, (DLGPROC)Version_Button, 0);
          break;
        case 0x9C44u:
          if ( !sub_410AB0(hWnd) )
            MessageBoxA(hWnd, "{[N", ROM_PClassName, 0);
          break;
        case 0x9C45u:
          DialogBoxParamA(AppInstance, "DLG_SAVE", hWnd, (DLGPROC)Debug_Save_Button, 0);
          break;
        case 0x9C47u:
          DialogBoxParamA(AppInstance, "DLG_MUTE", hWnd, (DLGPROC)Mute_Button, 0);
          break;
        default:
          return 1;
      }
    }
    else
    {
      if ( Msg != 274 )
        return DefWindowProcA(hWnd, Msg, wParam, lParam);
      if ( wParam != 61696 && wParam != 61760 && wParam != 61808 )
        DefWindowProcA(hWnd, Msg, wParam, lParam);
    }
  }
  else if ( Msg == 257 )
  {
    switch ( wParam )
    {
      case 0x1Bu:
        Key_Held &= 0xFFFF7FFF;
        break;
      case 0x57u:
        Key_Held &= 0xFFFFFFEF;
        break;
      case 0x25u:
        Key_Held &= 0xFFFFFFFE;
        break;
      case 0x27u:
        Key_Held &= 0xFFFFFFFD;
        break;
      case 0x26u:
        Key_Held &= 0xFFFFFFFB;
        break;
      case 0x28u:
        Key_Held &= 0xFFFFFFF7;
        break;
      case 0x58u:
        Key_Held &= 0xFFFFFFDF;
        break;
      case 0x5Au:
        Key_Held &= 0xFFFFFFBF;
        break;
      case 0x53u:
        Key_Held &= 0xFFFFFF7F;
        break;
      case 0x41u:
        Key_Held &= 0xFFFFFEFF;
        break;
      case 0x10u:
        Key_Held &= 0xFFFFFDFF;
        break;
      case 0x70u:
        Key_Held &= 0xFFFFFBFF;
        break;
      case 0x71u:
        Key_Held &= 0xFFFFF7FF;
        break;
      case 0x51u:
        Key_Held &= 0xFFFFEFFF;
        break;
      case 0xBCu:
        Key_Held &= 0xFFFEFFFF;
        break;
      case 0xBEu:
        Key_Held &= 0xFFFDFFFF;
        break;
      case 0xBFu:
        Key_Held &= 0xFFFBFFFF;
        break;
      case 0x4Cu:
        Key_Held &= 0xFFF7FFFF;
        break;
      case 0xBBu:
        Key_Held &= 0xFFEFFFFF;
        break;
      default:
        return 1;
    }
  }
  else if ( Msg > 0x10 )
  {
    if ( Msg != 256 )
      return DefWindowProcA(hWnd, Msg, wParam, lParam);
    switch ( wParam )
    {
      case 0x1Bu:
        Key_Held |= 0x8000u;
        break;
      case 0x57u:
        Key_Held |= 0x10u;
        break;
      case 0x25u:
        Key_Held |= 1u;
        break;
      case 0x27u:
        Key_Held |= 2u;
        break;
      case 0x26u:
        Key_Held |= 4u;
        break;
      case 0x28u:
        Key_Held |= 8u;
        break;
      case 0x58u:
        Key_Held |= 0x20u;
        break;
      case 0x5Au:
        Key_Held |= 0x40u;
        break;
      case 0x53u:
        Key_Held |= 0x80u;
        break;
      case 0x41u:
        Key_Held |= 0x100u;
        break;
      case 0x10u:
        Key_Held |= 0x200u;
        break;
      case 0x70u:
        Key_Held |= 0x400u;
        break;
      case 0x71u:
        Key_Held |= 0x800u;
        break;
      case 0x51u:
        Key_Held |= 0x1000u;
        break;
      case 0xBCu:
        Key_Held |= 0x10000u;
        break;
      case 0xBEu:
        Key_Held |= 0x20000u;
        break;
      case 0xBFu:
        Key_Held |= 0x40000u;
        break;
      case 0x4Cu:
        Key_Held |= 0x80000u;
        break;
      case 0xBBu:
        Key_Held |= 0x100000u;
        break;
      case 0x74u:
        dword_49E45C = 0;
        break;
      default:
        return 1;
    }
  }
  else if ( Msg == 16 )
  {
    sub_41C7F0();
    PostQuitMessage(0);
  }
  else if ( Msg == 1 )
  {
    hMenu = GetMenu(hWnd);
    DeleteMenu(hMenu, 0x9C45u, 0);
    DrawMenuBar(hWnd);
    v8 = GetMenu(hWnd);
    if ( !Check_for_file((int)"mute") )
      DeleteMenu(v8, 0x9C47u, 0);
    DrawMenuBar(hWnd);
    if ( Check_for_file((int)"fps") )
      ShowFPS = 1;
    if ( !dword_49E460 )
      Get_Window_Rects(hWnd, (int)"window.rect", 0);
    sub_412320(hWnd);
  }
  else
  {
    if ( Msg != 6 )
      return DefWindowProcA(hWnd, Msg, wParam, lParam);
    if ( (_WORD)wParam )
    {
      if ( (signed int)(unsigned __int16)wParam > 0 && (signed int)(unsigned __int16)wParam <= 2 )
        v7 = HIWORD(wParam) == 0;
    }
    else
    {
      v7 = 0;
    }
    if ( v7 )
      sub_412BF0();
    else
      sub_412BC0();
  }
  return 1;
}
// 49E20C: using guessed type int dword_49E20C;
// 49E210: using guessed type int Key_Held;
// 49E45C: using guessed type int dword_49E45C;
// 49E460: using guessed type int dword_49E460;
// 49E464: using guessed type int ShowFPS;

//----- (00413570) --------------------------------------------------------
signed int MessageQueue(void)
{
  struct tagMSG Msg; // [sp+0h] [bp-1Ch]@1

  while ( PeekMessageA(&Msg, 0, 0, 0, 0) || !CanAcceptInput )
  {
    if ( !GetMessageA(&Msg, 0, 0, 0) )
      return 0;
    TranslateMessage((MSG *)&Msg);
    DispatchMessageA((MSG *)&Msg);
  }
  if ( dword_49E45C )
    sub_4135E0();
  return 1;
}
// 49E45C: using guessed type int dword_49E45C;
// 49E468: using guessed type int CanAcceptInput;

//----- (004135E0) --------------------------------------------------------
signed int sub_4135E0()
{
  signed int result; // eax@1
  int v1; // [sp+0h] [bp-98h]@1
  int v2; // [sp+4h] [bp-94h]@5
  int v3; // [sp+8h] [bp-90h]@8
  int v4; // [sp+Ch] [bp-8Ch]@11
  int v5[33]; // [sp+10h] [bp-88h]@19
  int i; // [sp+94h] [bp-4h]@14

  result = sub_4120F0((int)&v1);
  if ( result )
  {
    Key_Held &= 0x8C00u;
    if ( v1 )
    {
      Key_Held |= Key_For_Left;
    }
    else
    {
      result = Key_Held & ~Key_For_Left;
      Key_Held &= ~Key_For_Left;
    }
    if ( v2 )
      Key_Held |= Key_For_Right;
    else
      Key_Held &= ~Key_For_Right;
    if ( v3 )
    {
      result = Key_For_Up | Key_Held;
      Key_Held |= Key_For_Up;
    }
    else
    {
      Key_Held &= ~Key_For_Up;
    }
    if ( v4 )
    {
      Key_Held |= Key_For_Down;
    }
    else
    {
      result = Key_Held & ~Key_For_Down;
      Key_Held &= ~Key_For_Down;
    }
    for ( i = 0; i < 8; ++i )
    {
      result = Key_Held & ~dword_49E42C[i];
      Key_Held &= ~dword_49E42C[i];
    }
    for ( i = 0; i < 8; ++i )
    {
      if ( v5[i] )
      {
        result = i;
        Key_Held |= dword_49E42C[i];
      }
    }
  }
  return result;
}
// 493630: using guessed type int Key_For_Left;
// 493634: using guessed type int Key_For_Up;
// 493638: using guessed type int Key_For_Right;
// 49363C: using guessed type int Key_For_Down;
// 49E20C: using guessed type int dword_49E20C;
// 49E210: using guessed type int Key_Held;
// 49E42C: using guessed type int dword_49E42C[];
// 4135E0: using guessed type int var_88[33];

//----- (00413750) --------------------------------------------------------
signed int sub_413750()
{
  dword_49E480 = malloc(0x4B000u);
  return 1;
}

//----- (00413770) --------------------------------------------------------
signed int __cdecl sub_413770(int a1)
{
  signed int result; // eax@2
  char str; // [sp+0h] [bp-118h]@1
  int v3; // [sp+108h] [bp-10h]@1
  char v4; // [sp+10Fh] [bp-9h]@5
  FILE *stream; // [sp+110h] [bp-8h]@1
  char ptr1; // [sp+114h] [bp-4h]@3

  v3 = dword_498B20;
  sprintf(&str, "%s\\%s", byte_49E220, a1);
  stream = fopen(&str, "rb");
  if ( stream )
  {
    sub_480F55((FILE *)&ptr1, 1u, 3u, stream);
    if ( !memcmp(&ptr1, ptr2, 3u) )
    {
      sub_480F55((FILE *)&v4, 1u, 1u, stream);
      sub_480F55((FILE *)&word_49E586, 2u, 1u, stream);
      sub_480F55((FILE *)&word_49E588, 2u, 1u, stream);
      if ( dword_49E480 )
      {
        sub_480F55((FILE *)dword_49E480, 1u, *(signed __int16 *)&word_49E588 * *(signed __int16 *)&word_49E586, stream);
        fclose(stream);
        result = 1;
      }
      else
      {
        fclose(stream);
        result = 0;
      }
    }
    else
    {
      fclose(stream);
      result = 0;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}
// 498B20: using guessed type int dword_498B20;

//----- (004138A0) --------------------------------------------------------
signed int __cdecl sub_4138A0(int a1)
{
  signed int result; // eax@2
  char str; // [sp+0h] [bp-110h]@1
  int v3; // [sp+108h] [bp-8h]@1
  FILE *stream; // [sp+10Ch] [bp-4h]@1

  v3 = dword_498B20;
  sprintf(&str, "%s\\%s", byte_49E220, a1);
  stream = fopen(&str, "rb");
  if ( stream )
  {
    sub_480F55((FILE *)&byte_49E484, 1u, 0x100u, stream);
    fclose(stream);
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}
// 498B20: using guessed type int dword_498B20;

//----- (00413930) --------------------------------------------------------
void sub_413930()
{
  free(dword_49E480);
}

//----- (00413960) --------------------------------------------------------
__int16 __cdecl sub_413960(_DWORD *a1, _WORD *a2, _WORD *a3)
{
  __int16 result; // ax@2

  if ( a1 )
  {
    result = (signed __int16)a1;
    *a1 = dword_49E480;
  }
  if ( a2 )
  {
    result = *(_WORD *)&word_49E586;
    *a2 = *(_WORD *)&word_49E586;
  }
  if ( a3 )
    *a3 = *(_WORD *)&word_49E588;
  return result;
}

//----- (004139A0) --------------------------------------------------------
char __cdecl sub_4139A0(signed int a1, signed int a2)
{
  char result; // al@5

  if ( a1 >= 0 && a2 >= 0 && a1 < *(signed __int16 *)&word_49E586 && a2 < *(signed __int16 *)&word_49E588 )
    result = *((_BYTE *)&byte_49E484 + *((_BYTE *)dword_49E480 + a1 + a2 * *(signed __int16 *)&word_49E586));
  else
    result = 0;
  return result;
}

//----- (00413A00) --------------------------------------------------------
char *__cdecl sub_413A00(int a1, int a2)
{
  char *result; // eax@1

  result = (char *)dword_49E480 + a1;
  *((_BYTE *)dword_49E480 + a1 + a2 * *(signed __int16 *)&word_49E586) = 0;
  return result;
}

//----- (00413A20) --------------------------------------------------------
int __cdecl sub_413A20(int a1, int a2)
{
  int result; // eax@1

  result = a2 * *(signed __int16 *)&word_49E586;
  *((_BYTE *)dword_49E480 + a1 + result) = *((_BYTE *)dword_49E480 + a1 + a2 * *(signed __int16 *)&word_49E586) - 1;
  return result;
}

//----- (00413A60) --------------------------------------------------------
signed int __cdecl sub_413A60(int a1, int a2, unsigned __int8 a3)
{
  signed int result; // eax@2
  signed int i; // [sp+0h] [bp-4h]@3

  if ( *((_BYTE *)dword_49E480 + a1 + a2 * *(signed __int16 *)&word_49E586) == a3 )
  {
    result = 0;
  }
  else
  {
    *((_BYTE *)dword_49E480 + a1 + a2 * *(signed __int16 *)&word_49E586) = a3;
    for ( i = 0; i < 3; ++i )
      NPC_Create(4, a1 << 13, a2 << 13, 0, 0, 0, 0, 0);
    result = 1;
  }
  return result;
}

//----- (00413AF0) --------------------------------------------------------
int __cdecl Render_Background_Layer_(signed int a1, signed int a2)
{
  int result; // eax@1
  int i; // [sp+0h] [bp-30h]@1
  int v4; // [sp+Ch] [bp-24h]@6
  int j; // [sp+18h] [bp-18h]@3
  int Src_Rects; // [sp+1Ch] [bp-14h]@7
  int v7; // [sp+20h] [bp-10h]@7
  int v8; // [sp+24h] [bp-Ch]@7
  int v9; // [sp+28h] [bp-8h]@7
  int v10; // [sp+2Ch] [bp-4h]@1

  v10 = 21;
  result = (a2 / 512 + 8) / 16;
  for ( i = (a2 / 512 + 8) / 16; i < (a2 / 512 + 8) / 16 + 16; ++i )
  {
    result = (a1 / 512 + 8) / 16;
    for ( j = (a1 / 512 + 8) / 16; j < v10 + (a1 / 512 + 8) / 16; ++j )
    {
      v4 = j + i * *(signed __int16 *)&word_49E586;
      result = (unsigned __int8)sub_4139A0(j, i);
      if ( (signed int)(unsigned __int8)result < 32 )
      {
        Src_Rects = 16 * (*((_BYTE *)dword_49E480 + v4) % 16);
        v7 = 16 * ((signed int)*((_BYTE *)dword_49E480 + v4) >> 4);
        v8 = Src_Rects + 16;
        v9 = v7 + 16;
        result = Render_Graphics((int)&FullscreenRect, 16 * j - 8 - a1 / 512, 16 * i - 8 - a2 / 512, (int)&Src_Rects, 2);
      }
    }
  }
  return result;
}
// 48F91C: using guessed type int FullscreenRect;

//----- (00413C60) --------------------------------------------------------
int __cdecl Render_Foreground_Layer_And_Star_Block_(signed int a1, signed int a2)
{
  int result; // eax@1
  int i; // [sp+0h] [bp-40h]@1
  int v4; // [sp+8h] [bp-38h]@6
  int v5; // [sp+Ch] [bp-34h]@1
  int v6; // [sp+10h] [bp-30h]@1
  int v7; // [sp+14h] [bp-2Ch]@1
  int v8; // [sp+18h] [bp-28h]@1
  int v9; // [sp+1Ch] [bp-24h]@6
  int v10; // [sp+20h] [bp-20h]@1
  int v11; // [sp+24h] [bp-1Ch]@1
  int j; // [sp+28h] [bp-18h]@3
  int Src_Rects; // [sp+2Ch] [bp-14h]@9
  int v14; // [sp+30h] [bp-10h]@9
  int v15; // [sp+34h] [bp-Ch]@9
  int v16; // [sp+38h] [bp-8h]@9
  int v17; // [sp+3Ch] [bp-4h]@1

  v5 = 256;
  v6 = 48;
  v7 = 272;
  v8 = 64;
  v17 = 21;
  v10 = (a1 / 512 + 8) / 16;
  result = (a2 / 512 + 8) / 16;
  v11 = (a2 / 512 + 8) / 16;
  for ( i = (a2 / 512 + 8) / 16; i < v11 + 16; ++i )
  {
    result = v10;
    for ( j = v10; j < v17 + v10; ++j )
    {
      v9 = j + i * *(signed __int16 *)&word_49E586;
      result = (unsigned __int8)sub_4139A0(j, i);
      v4 = (unsigned __int8)result;
      if ( (signed int)(unsigned __int8)result >= 64 && (signed int)(unsigned __int8)result < 128 )
      {
        Src_Rects = 16 * (*((_BYTE *)dword_49E480 + v9) % 16);
        v14 = 16 * ((signed int)*((_BYTE *)dword_49E480 + v9) >> 4);
        v15 = Src_Rects + 16;
        v16 = v14 + 16;
        result = Render_Graphics((int)&FullscreenRect, 16 * j - 8 - a1 / 512, 16 * i - 8 - a2 / 512, (int)&Src_Rects, 2);
        if ( v4 == 67 )
          result = Render_Graphics((int)&FullscreenRect, 16 * j - 8 - a1 / 512, 16 * i - 8 - a2 / 512, (int)&v5, 20);
      }
    }
  }
  return result;
}
// 48F91C: using guessed type int FullscreenRect;

//----- (00413E40) --------------------------------------------------------
int __cdecl Render_Caret_pbm_(signed int a1, signed int a2)
{
  signed int v2; // eax@1
  int result; // eax@2
  int v4; // eax@15
  int v5; // ecx@16
  int i; // [sp+4h] [bp-30h]@1
  int v7; // [sp+Ch] [bp-28h]@6
  int v8; // [sp+18h] [bp-1Ch]@1
  int j; // [sp+1Ch] [bp-18h]@3
  int Src_Rects; // [sp+20h] [bp-14h]@15
  int v11; // [sp+24h] [bp-10h]@15
  int v12; // [sp+28h] [bp-Ch]@15
  int v13; // [sp+2Ch] [bp-8h]@15
  int v14; // [sp+30h] [bp-4h]@1

  byte_49E58C += 2;
  v14 = 21;
  v2 = a2 / 512 + 8;
  v8 = v2 / 16;
  for ( i = v2 / 16; ; ++i )
  {
    result = v8 + 16;
    if ( i >= v8 + 16 )
      break;
    for ( j = (a1 / 512 + 8) / 16; j < v14 + (a1 / 512 + 8) / 16; ++j )
    {
      v7 = (unsigned __int8)sub_4139A0(j, i);
      if ( v7 == 128 || v7 == 129 || v7 == 130 || v7 == 131 || v7 == 160 || v7 == 161 || v7 == 162 || v7 == 163 )
      {
        switch ( v7 )
        {
          case 128:
          case 160:
            v4 = (unsigned __int8)byte_49E58C % 16;
            Src_Rects = v4 + 224;
            v12 = v4 + 240;
            v11 = 48;
            v13 = 64;
            break;
          case 129:
          case 161:
            Src_Rects = 224;
            v12 = 240;
            v5 = (unsigned __int8)byte_49E58C % 16;
            v11 = v5 + 48;
            v13 = v5 + 64;
            break;
          case 130:
          case 162:
            Src_Rects = 240 - (unsigned __int8)byte_49E58C % 16;
            v12 = Src_Rects + 16;
            v11 = 48;
            v13 = 64;
            break;
          case 131:
          case 163:
            Src_Rects = 224;
            v12 = 240;
            v11 = 64 - (unsigned __int8)byte_49E58C % 16;
            v13 = v11 + 16;
            break;
          default:
            break;
        }
        Render_Graphics((int)&FullscreenRect, 16 * j - 8 - a1 / 512, 16 * i - 8 - a2 / 512, (int)&Src_Rects, 19);
      }
    }
  }
  return result;
}
// 48F91C: using guessed type int FullscreenRect;
// 49E58C: using guessed type char byte_49E58C;

//----- (004140F0) --------------------------------------------------------
int __cdecl sub_4140F0(char *source)
{
  char v2; // [sp+0h] [bp-20h]@1
  char v3; // [sp+1h] [bp-1Fh]@1
  char v4; // [sp+2h] [bp-1Eh]@1
  char v5; // [sp+3h] [bp-1Dh]@1
  char v6; // [sp+4h] [bp-1Ch]@1
  char v7; // [sp+5h] [bp-1Bh]@1
  char v8; // [sp+6h] [bp-1Ah]@1
  char v9; // [sp+7h] [bp-19h]@1
  char v10; // [sp+8h] [bp-18h]@1
  char v11; // [sp+9h] [bp-17h]@1
  char v12; // [sp+Ah] [bp-16h]@1
  char v13; // [sp+Bh] [bp-15h]@1
  char v14; // [sp+Ch] [bp-14h]@1
  char v15; // [sp+Dh] [bp-13h]@1
  char v16; // [sp+Eh] [bp-12h]@1
  char v17; // [sp+Fh] [bp-11h]@1
  char v18; // [sp+10h] [bp-10h]@1
  char v19; // [sp+11h] [bp-Fh]@1
  char v20; // [sp+12h] [bp-Eh]@1
  char v21; // [sp+13h] [bp-Dh]@1
  char v22; // [sp+14h] [bp-Ch]@1
  char v23; // [sp+15h] [bp-Bh]@1
  char v24; // [sp+16h] [bp-Ah]@1
  char v25; // [sp+17h] [bp-9h]@1
  int v26; // [sp+18h] [bp-8h]@1
  int i; // [sp+1Ch] [bp-4h]@2

  v26 = dword_498B20;
  v2 = 31;
  v3 = 31;
  v4 = 82;
  v5 = 115;
  v6 = 116;
  v7 = 99;
  v8 = 104;
  v9 = 110;
  v10 = 31;
  v11 = 79;
  v12 = 104;
  v13 = 119;
  v14 = 100;
  v15 = 107;
  v16 = 31;
  v17 = 111;
  v18 = 113;
  v19 = 100;
  v20 = 114;
  v21 = 100;
  v22 = 109;
  v23 = 115;
  v24 = 114;
  v25 = -1;
  dword_49E590 = 0;
  dword_49E594 = 0;
  if ( !strcmp(source, L"u") )
  {
    for ( i = 0; i < 24; ++i )
      ++*(&v2 + i);
    source = &v2;
  }
  strcpy(Ptr_String, source);
  i = strlen(Ptr_String);
  FillRects_Memory_((int)&unk_493650, 0, 13);
  Draw_Text_To_Screen((160 - 6 * i) / 2 + 6, 1, Ptr_String, 0x220011u, 13);
  return Draw_Text_To_Screen((160 - 6 * i) / 2 + 6, 0, Ptr_String, 0xFEFFFFu, 13);
}
// 498B20: using guessed type int dword_498B20;
// 49E590: using guessed type int dword_49E590;
// 49E594: using guessed type int dword_49E594;

//----- (00414250) --------------------------------------------------------
int __cdecl TSC_MNA(int a1)
{
  int result; // eax@2
  int Ptr_Img_Rects; // [sp+0h] [bp-20h]@2
  int v3; // [sp+4h] [bp-1Ch]@2
  int v4; // [sp+8h] [bp-18h]@2
  int v5; // [sp+Ch] [bp-14h]@2
  int v6; // [sp+10h] [bp-10h]@1
  int v7; // [sp+14h] [bp-Ch]@1
  int v8; // [sp+18h] [bp-8h]@1
  int v9; // [sp+1Ch] [bp-4h]@1

  v6 = 0;
  v7 = 0;
  v8 = 160;
  v9 = 16;
  if ( a1 )
  {
    Ptr_Img_Rects = 0;
    v4 = 320;
    v3 = 7;
    v5 = 24;
    FillRects_Memory((int)&Ptr_Img_Rects, 0);
    result = Render_Graphics((int)&FullscreenRect, 74, 10, (int)&unk_493650, 13);
  }
  else if ( dword_49E590 )
  {
    result = Render_Graphics((int)&FullscreenRect, 74, 80, (int)&unk_493650, 13);
    if ( ++dword_49E594 > 160 )
      dword_49E590 = 0;
  }
  return result;
}
// 48F91C: using guessed type int FullscreenRect;
// 49E590: using guessed type int dword_49E590;
// 49E594: using guessed type int dword_49E594;

//----- (00414310) --------------------------------------------------------
void sub_414310()
{
  dword_49E590 = 1;
  dword_49E594 = 0;
}
// 49E590: using guessed type int dword_49E590;
// 49E594: using guessed type int dword_49E594;

//----- (00414330) --------------------------------------------------------
int sub_414330()
{
  size_t v0; // ST14_4@1

  v0 = strlen(Ptr_String);
  FillRects_Memory_((int)&unk_493650, 0, 13);
  Draw_Text_To_Screen((signed int)(160 - 6 * v0) / 2 + 6, 1, Ptr_String, 0x220011u, 13);
  return Draw_Text_To_Screen((signed int)(160 - 6 * v0) / 2 + 6, 0, Ptr_String, 0xFEFFFFu, 13);
}

//----- (004143C0) --------------------------------------------------------
void __cdecl sub_4143C0(signed int a1)
{
  int v1; // [sp+0h] [bp-48h]@1
  int v2; // [sp+4h] [bp-44h]@1
  int v3; // [sp+8h] [bp-40h]@1
  int v4; // [sp+Ch] [bp-3Ch]@1
  int v5; // [sp+10h] [bp-38h]@1
  int v6; // [sp+14h] [bp-34h]@1
  int v7; // [sp+18h] [bp-30h]@1
  int v8; // [sp+1Ch] [bp-2Ch]@1
  int v9; // [sp+20h] [bp-28h]@1
  int v10; // [sp+24h] [bp-24h]@1
  int v11; // [sp+28h] [bp-20h]@1
  int v12; // [sp+2Ch] [bp-1Ch]@1
  int v13; // [sp+30h] [bp-18h]@1
  int v14; // [sp+34h] [bp-14h]@1
  int v15; // [sp+38h] [bp-10h]@1
  int v16; // [sp+3Ch] [bp-Ch]@1
  int i; // [sp+40h] [bp-8h]@1
  char v18; // [sp+47h] [bp-1h]@3

  v1 = 240;
  v2 = 24;
  v3 = 241;
  v4 = 25;
  v5 = 241;
  v6 = 24;
  v7 = 242;
  v8 = 25;
  v9 = 242;
  v10 = 24;
  v11 = 243;
  v12 = 25;
  v13 = 243;
  v14 = 24;
  v15 = 244;
  v16 = 25;
  for ( i = 0; i < *(signed __int16 *)&word_49E586; ++i )
  {
    v18 = sub_4139A0(i, a1);
    if ( v18 )
    {
      if ( v18 != 68
        && v18 != 1
        && v18 != 64
        && (unsigned __int8)v18 != 128
        && (unsigned __int8)v18 != 129
        && (unsigned __int8)v18 != 130
        && (unsigned __int8)v18 != 131
        && v18 != 81
        && v18 != 82
        && v18 != 85
        && v18 != 86
        && v18 != 2
        && v18 != 96
        && v18 != 113
        && v18 != 114
        && v18 != 117
        && v18 != 118
        && (unsigned __int8)v18 != 160
        && (unsigned __int8)v18 != 161
        && (unsigned __int8)v18 != 162
        && (unsigned __int8)v18 != 163 )
      {
        if ( v18 != 67
          && v18 != 99
          && v18 != 80
          && v18 != 83
          && v18 != 84
          && v18 != 87
          && v18 != 96
          && v18 != 112
          && v18 != 115
          && v18 != 116
          && v18 != 119 )
        {
          Blit_For_Dmg_Num_(i, a1, (int)&v13, 9, 26);
        }
        else
        {
          Blit_For_Dmg_Num_(i, a1, (int)&v9, 9, 26);
        }
      }
      else
      {
        Blit_For_Dmg_Num_(i, a1, (int)&v5, 9, 26);
      }
    }
    else
    {
      Blit_For_Dmg_Num_(i, a1, (int)&v1, 9, 26);
    }
  }
}

//----- (00414640) --------------------------------------------------------
signed int sub_414640()
{
  int v1; // [sp+0h] [bp-50h]@32
  int v2; // [sp+4h] [bp-4Ch]@15
  int v3; // [sp+8h] [bp-48h]@4
  int Ptr_Img_Rects; // [sp+Ch] [bp-44h]@9
  int v5; // [sp+10h] [bp-40h]@9
  int v6; // [sp+14h] [bp-3Ch]@9
  int v7; // [sp+18h] [bp-38h]@9
  int v8; // [sp+1Ch] [bp-34h]@1
  int Src_Rects; // [sp+20h] [bp-30h]@12
  int v10; // [sp+24h] [bp-2Ch]@12
  int v11; // [sp+28h] [bp-28h]@12
  int v12; // [sp+2Ch] [bp-24h]@12
  int v13; // [sp+30h] [bp-20h]@1
  char v14; // [sp+37h] [bp-19h]@12
  int i; // [sp+38h] [bp-18h]@1
  int v16; // [sp+3Ch] [bp-14h]@12
  int v17; // [sp+40h] [bp-10h]@1
  int v18; // [sp+44h] [bp-Ch]@1
  int v19; // [sp+48h] [bp-8h]@1
  int v20; // [sp+4Ch] [bp-4h]@1

  v17 = 0;
  v18 = 57;
  v19 = 1;
  v20 = 58;
  v13 = (Quote_X_Position / 512 + 8) / 16;
  v8 = (Quote_Y_Position / 512 + 8) / 16;
  for ( i = 0; i <= 8; ++i )
  {
    Update_Keys();
    if ( Key_Held & 0x8000 )
    {
      v3 = sub_40DD70(AppWinHandle);
      if ( !v3 )
        return 0;
      if ( v3 == 2 )
        return 2;
    }
    Draw_Obj((int)&FullscreenRect, 0, 0, (int)&FullscreenRect, 10);
    Ptr_Img_Rects = 160 - i * *(signed __int16 *)&word_49E586 / 8 / 2;
    v6 = i * *(signed __int16 *)&word_49E586 / 8 / 2 + 160;
    v5 = 120 - i * *(signed __int16 *)&word_49E588 / 8 / 2;
    v7 = i * *(signed __int16 *)&word_49E588 / 8 / 2 + 120;
    TSC_MNA(1);
    FillRects_Memory((int)&Ptr_Img_Rects, 0);
    Display_FPS();
    if ( !Upd_Scr_With_Wind_(AppWinHandle) )
      return 0;
  }
  Src_Rects = 0;
  v11 = *(signed __int16 *)&word_49E586;
  v10 = 0;
  v12 = *(signed __int16 *)&word_49E588;
  v6 = --Ptr_Img_Rects + *(signed __int16 *)&word_49E586 + 2;
  v7 = --v5 + *(signed __int16 *)&word_49E588 + 2;
  FillRects_Memory_((int)&Src_Rects, 0, 9);
  v16 = 0;
  v14 = 0;
  while ( 1 )
  {
    Update_Keys();
    if ( Key_Pressed & (Key_For_Shoot | Key_For_Jump) )
      break;
    if ( Key_Held & 0x8000 )
    {
      v2 = sub_40DD70(AppWinHandle);
      if ( !v2 )
        return 0;
      if ( v2 == 2 )
        return 2;
    }
    Draw_Obj((int)&FullscreenRect, 0, 0, (int)&FullscreenRect, 10);
    FillRects_Memory((int)&Ptr_Img_Rects, 0);
    if ( v16 < *(signed __int16 *)&word_49E588 )
      sub_4143C0(v16++);
    if ( v16 < *(signed __int16 *)&word_49E588 )
      sub_4143C0(v16++);
    Render_Graphics((int)&FullscreenRect, Ptr_Img_Rects + 1, v5 + 1, (int)&Src_Rects, 9);
    TSC_MNA(1);
    if ( ((signed int)(unsigned __int8)++v14 >> 3) % 2 )
      Render_Graphics((int)&FullscreenRect, v13 + Ptr_Img_Rects + 1, v8 + v5 + 1, (int)&v17, 26);
    Display_FPS();
    if ( !Upd_Scr_With_Wind_(AppWinHandle) )
      return 0;
  }
  for ( i = 8; i >= -1; --i )
  {
    Update_Keys();
    if ( Key_Held & 0x8000 )
    {
      v1 = sub_40DD70(AppWinHandle);
      if ( !v1 )
        return 0;
      if ( v1 == 2 )
        return 2;
    }
    Draw_Obj((int)&FullscreenRect, 0, 0, (int)&FullscreenRect, 10);
    Ptr_Img_Rects = 160 - i * *(signed __int16 *)&word_49E586 / 8 / 2;
    v6 = i * *(signed __int16 *)&word_49E586 / 8 / 2 + 160;
    v5 = 120 - i * *(signed __int16 *)&word_49E588 / 8 / 2;
    v7 = i * *(signed __int16 *)&word_49E588 / 8 / 2 + 120;
    TSC_MNA(1);
    FillRects_Memory((int)&Ptr_Img_Rects, 0);
    Display_FPS();
    if ( !Upd_Scr_With_Wind_(AppWinHandle) )
      return 0;
  }
  return 1;
}
// 48F91C: using guessed type int FullscreenRect;
// 493628: using guessed type int Key_For_Jump;
// 49362C: using guessed type int Key_For_Shoot;
// 49E210: using guessed type int Key_Held;
// 49E214: using guessed type int Key_Pressed;

//----- (00414B00) --------------------------------------------------------
bool sub_414B00()
{
  return *((_BYTE *)&byte_49E5B8 + CurrentMapID) != 0;
}
// 4A57F0: using guessed type int CurrentMapID;

//----- (00414B20) --------------------------------------------------------
// Pushes reserved space onto the ram. used for maps, so the higher you set push 128, the more possible maps
void *memset_init_maps()
{
  return memset(&byte_49E5B8, 0, 0x80u);
}

//----- (00414B40) --------------------------------------------------------
int __cdecl sub_414B40(int a1)
{
  int result; // eax@1

  result = a1;
  *((_BYTE *)&byte_49E5B8 + a1) = 1;
  return result;
}

//----- (00414B50) --------------------------------------------------------
void *sub_414B50()
{
  void *result; // eax@1

  result = memset(&Player_Flags, 0, 0xB4u);
  *(_BYTE *)&Player_Flags = -128;
  *(_DWORD *)&Quote_Direction_Faced = 2;
  QuoteSizebox_Right = 4096;
  QuoteSizebox_Up = 4096;
  QuoteSizebox_Left = 4096;
  QuoteSizebox_Down = 4096;
  QuoteHitbox_Right = 2560;
  QuoteHitbox_Up = 4096;
  QuoteHitbox_Left = 2560;
  QuoteHitbox_Down = 4096;
  Quote_Health_Current = 3;
  Quote_Health_Max = 3;
  InFishBattle = 0;
  return result;
}
// 49E64C: using guessed type int InFishBattle;
// 49E67C: using guessed type int QuoteHitbox_Left;
// 49E680: using guessed type int QuoteHitbox_Up;
// 49E684: using guessed type int QuoteHitbox_Right;
// 49E688: using guessed type int QuoteHitbox_Down;
// 49E68C: using guessed type int QuoteSizebox_Left;
// 49E690: using guessed type int QuoteSizebox_Up;
// 49E694: using guessed type int QuoteSizebox_Right;
// 49E698: using guessed type int QuoteSizebox_Down;
// 49E6CC: using guessed type __int16 Quote_Health_Current;
// 49E6D0: using guessed type __int16 Quote_Health_Max;

//----- (00414BF0) --------------------------------------------------------
int *__cdecl sub_414BF0(int a1)
{
  int *result; // eax@1
  int *v2; // ecx@44
  int v3; // [sp+0h] [bp-180h]@1
  int v4; // [sp+4h] [bp-17Ch]@1
  int v5; // [sp+8h] [bp-178h]@1
  int v6; // [sp+Ch] [bp-174h]@1
  int v7; // [sp+10h] [bp-170h]@1
  int v8; // [sp+14h] [bp-16Ch]@1
  int v9; // [sp+18h] [bp-168h]@1
  int v10; // [sp+1Ch] [bp-164h]@1
  int v11; // [sp+20h] [bp-160h]@1
  int v12; // [sp+24h] [bp-15Ch]@1
  int v13; // [sp+28h] [bp-158h]@1
  int v14; // [sp+2Ch] [bp-154h]@1
  int v15; // [sp+30h] [bp-150h]@1
  int v16; // [sp+34h] [bp-14Ch]@1
  int v17; // [sp+38h] [bp-148h]@1
  int v18; // [sp+3Ch] [bp-144h]@1
  int v19; // [sp+40h] [bp-140h]@1
  int v20; // [sp+44h] [bp-13Ch]@1
  int v21; // [sp+48h] [bp-138h]@1
  int v22; // [sp+4Ch] [bp-134h]@1
  int v23; // [sp+50h] [bp-130h]@1
  int v24; // [sp+54h] [bp-12Ch]@1
  int v25; // [sp+58h] [bp-128h]@1
  int v26; // [sp+5Ch] [bp-124h]@1
  int v27; // [sp+60h] [bp-120h]@1
  int v28; // [sp+64h] [bp-11Ch]@1
  int v29; // [sp+68h] [bp-118h]@1
  int v30; // [sp+6Ch] [bp-114h]@1
  int v31; // [sp+70h] [bp-110h]@1
  int v32; // [sp+74h] [bp-10Ch]@1
  int v33; // [sp+78h] [bp-108h]@1
  int v34; // [sp+7Ch] [bp-104h]@1
  int v35; // [sp+80h] [bp-100h]@1
  int v36; // [sp+84h] [bp-FCh]@1
  int v37; // [sp+88h] [bp-F8h]@1
  int v38; // [sp+8Ch] [bp-F4h]@1
  int v39; // [sp+90h] [bp-F0h]@1
  int v40; // [sp+94h] [bp-ECh]@1
  int v41; // [sp+98h] [bp-E8h]@1
  int v42; // [sp+9Ch] [bp-E4h]@1
  int v43; // [sp+A0h] [bp-E0h]@1
  int v44; // [sp+A4h] [bp-DCh]@1
  int v45; // [sp+A8h] [bp-D8h]@1
  int v46; // [sp+ACh] [bp-D4h]@1
  int v47; // [sp+B0h] [bp-D0h]@1
  int v48; // [sp+B4h] [bp-CCh]@1
  int v49; // [sp+B8h] [bp-C8h]@1
  int v50; // [sp+BCh] [bp-C4h]@1
  int v51; // [sp+C0h] [bp-C0h]@1
  int v52; // [sp+C4h] [bp-BCh]@1
  int v53; // [sp+C8h] [bp-B8h]@1
  int v54; // [sp+CCh] [bp-B4h]@1
  int v55; // [sp+D0h] [bp-B0h]@1
  int v56; // [sp+D4h] [bp-ACh]@1
  int v57; // [sp+D8h] [bp-A8h]@1
  int v58; // [sp+DCh] [bp-A4h]@1
  int v59; // [sp+E0h] [bp-A0h]@1
  int v60; // [sp+E4h] [bp-9Ch]@1
  int v61; // [sp+E8h] [bp-98h]@1
  int v62; // [sp+ECh] [bp-94h]@1
  int v63; // [sp+F0h] [bp-90h]@1
  int v64; // [sp+F4h] [bp-8Ch]@1
  int v65; // [sp+F8h] [bp-88h]@1
  int v66; // [sp+FCh] [bp-84h]@1
  int v67; // [sp+100h] [bp-80h]@1
  int v68; // [sp+104h] [bp-7Ch]@1
  int v69; // [sp+108h] [bp-78h]@1
  int v70; // [sp+10Ch] [bp-74h]@1
  int v71; // [sp+110h] [bp-70h]@1
  int v72; // [sp+114h] [bp-6Ch]@1
  int v73; // [sp+118h] [bp-68h]@1
  int v74; // [sp+11Ch] [bp-64h]@1
  int v75; // [sp+120h] [bp-60h]@1
  int v76; // [sp+124h] [bp-5Ch]@1
  int v77; // [sp+128h] [bp-58h]@1
  int v78; // [sp+12Ch] [bp-54h]@1
  int v79; // [sp+130h] [bp-50h]@1
  int v80; // [sp+134h] [bp-4Ch]@1
  int v81; // [sp+138h] [bp-48h]@1
  int v82; // [sp+13Ch] [bp-44h]@1
  int v83; // [sp+140h] [bp-40h]@1
  int v84; // [sp+144h] [bp-3Ch]@1
  int v85; // [sp+148h] [bp-38h]@1
  int v86; // [sp+14Ch] [bp-34h]@1
  int v87; // [sp+150h] [bp-30h]@1
  int v88; // [sp+154h] [bp-2Ch]@1
  int v89; // [sp+158h] [bp-28h]@1
  int v90; // [sp+15Ch] [bp-24h]@1
  int v91; // [sp+160h] [bp-20h]@1
  int v92; // [sp+164h] [bp-1Ch]@1
  int v93; // [sp+168h] [bp-18h]@1
  int v94; // [sp+16Ch] [bp-14h]@1
  int v95; // [sp+170h] [bp-10h]@1
  int v96; // [sp+174h] [bp-Ch]@1
  int v97; // [sp+178h] [bp-8h]@1
  int v98; // [sp+17Ch] [bp-4h]@1

  v51 = 0;
  v52 = 0;
  v53 = 16;
  v54 = 16;
  v55 = 16;
  v56 = 0;
  v57 = 32;
  v58 = 16;
  v59 = 0;
  v60 = 0;
  v61 = 16;
  v62 = 16;
  v63 = 32;
  v64 = 0;
  v65 = 48;
  v66 = 16;
  v67 = 0;
  v68 = 0;
  v69 = 16;
  v70 = 16;
  v71 = 48;
  v72 = 0;
  v73 = 64;
  v74 = 16;
  v75 = 64;
  v76 = 0;
  v77 = 80;
  v78 = 16;
  v79 = 48;
  v80 = 0;
  v81 = 64;
  v82 = 16;
  v83 = 80;
  v84 = 0;
  v85 = 96;
  v86 = 16;
  v87 = 48;
  v88 = 0;
  v89 = 64;
  v90 = 16;
  v91 = 96;
  v92 = 0;
  v93 = 112;
  v94 = 16;
  v95 = 112;
  v96 = 0;
  v97 = 128;
  v98 = 16;
  v3 = 0;
  v4 = 16;
  v5 = 16;
  v6 = 32;
  v7 = 16;
  v8 = 16;
  v9 = 32;
  v10 = 32;
  v11 = 0;
  v12 = 16;
  v13 = 16;
  v14 = 32;
  v15 = 32;
  v16 = 16;
  v17 = 48;
  v18 = 32;
  v19 = 0;
  v20 = 16;
  v21 = 16;
  v22 = 32;
  v23 = 48;
  v24 = 16;
  v25 = 64;
  v26 = 32;
  v27 = 64;
  v28 = 16;
  v29 = 80;
  v30 = 32;
  v31 = 48;
  v32 = 16;
  v33 = 64;
  v34 = 32;
  v35 = 80;
  v36 = 16;
  v37 = 96;
  v38 = 32;
  v39 = 48;
  v40 = 16;
  v41 = 64;
  v42 = 32;
  v43 = 96;
  v44 = 16;
  v45 = 112;
  v46 = 32;
  v47 = 112;
  v48 = 16;
  v49 = 128;
  v50 = 32;
  result = (int *)(*(_BYTE *)&Player_Flags & 2);
  if ( !(*(_BYTE *)&Player_Flags & 2) )
  {
    if ( Tile_On_Which_Quote_Is & 8 )
    {
      if ( *(_BYTE *)&Player_Flags & 1 )
      {
        Quote_Animation_Frame = 11;
      }
      else if ( Key_For_Up & Key_Held && Key_Held & (Key_For_Right | Key_For_Left) && a1 )
      {
        *(_BYTE *)&Player_Flags |= 4u;
        if ( ++dword_49E674 > 4 )
        {
          dword_49E674 = 0;
          if ( ++Quote_Animation_Frame == 7 || Quote_Animation_Frame == 9 )
            Play_Sound_Effect(24, 1);
        }
        if ( Quote_Animation_Frame > 9 || Quote_Animation_Frame < 6 )
          Quote_Animation_Frame = 6;
      }
      else if ( Key_Held & (Key_For_Right | Key_For_Left) && a1 )
      {
        *(_BYTE *)&Player_Flags |= 4u;
        if ( ++dword_49E674 > 4 )
        {
          dword_49E674 = 0;
          if ( ++Quote_Animation_Frame == 2 || Quote_Animation_Frame == 4 )
            Play_Sound_Effect(24, 1);
        }
        if ( Quote_Animation_Frame > 4 || Quote_Animation_Frame < 1 )
          Quote_Animation_Frame = 1;
      }
      else if ( Key_For_Up & Key_Held && a1 )
      {
        if ( *(_BYTE *)&Player_Flags & 4 )
          Play_Sound_Effect(24, 1);
        *(_BYTE *)&Player_Flags &= 0xFBu;
        Quote_Animation_Frame = 5;
      }
      else
      {
        if ( *(_BYTE *)&Player_Flags & 4 )
          Play_Sound_Effect(24, 1);
        *(_BYTE *)&Player_Flags &= 0xFBu;
        Quote_Animation_Frame = 0;
      }
    }
    else if ( Quote_IsFacingUp )
    {
      Quote_Animation_Frame = 6;
    }
    else if ( Quote_IsFacingDown )
    {
      Quote_Animation_Frame = 10;
    }
    else if ( Quote_Y_Velocity <= 0 )
    {
      Quote_Animation_Frame = 3;
    }
    else
    {
      Quote_Animation_Frame = 1;
    }
    if ( *(_DWORD *)&Quote_Direction_Faced )
    {
      v2 = &v3 + 4 * Quote_Animation_Frame;
      dword_49E69C = *v2;
      dword_49E6A0 = v2[1];
      dword_49E6A4 = v2[2];
      result = (int *)v2[3];
      dword_49E6A8 = v2[3];
    }
    else
    {
      result = &v51 + 4 * Quote_Animation_Frame;
      dword_49E69C = *result;
      dword_49E6A0 = result[1];
      dword_49E6A4 = result[2];
      dword_49E6A8 = result[3];
    }
  }
  return result;
}
// 493630: using guessed type int Key_For_Left;
// 493634: using guessed type int Key_For_Up;
// 493638: using guessed type int Key_For_Right;
// 49E210: using guessed type int Key_Held;
// 49E63C: using guessed type int Tile_On_Which_Quote_Is;
// 49E644: using guessed type int Quote_IsFacingUp;
// 49E648: using guessed type int Quote_IsFacingDown;
// 49E670: using guessed type int Quote_Y_Velocity;
// 49E674: using guessed type int dword_49E674;
// 49E678: using guessed type int Quote_Animation_Frame;
// 49E69C: using guessed type int dword_49E69C;
// 49E6A0: using guessed type int dword_49E6A0;
// 49E6A4: using guessed type int dword_49E6A4;
// 49E6A8: using guessed type int dword_49E6A8;

//----- (00415220) --------------------------------------------------------
int __cdecl sub_415220(int a1)
{
  int result; // eax@2

  if ( a1 )
  {
    result = *(_BYTE *)&Player_Flags & 0xFD;
    *(_BYTE *)&Player_Flags &= 0xFDu;
  }
  else
  {
    *(_BYTE *)&Player_Flags |= 2u;
  }
  return result;
}

//----- (00415250) --------------------------------------------------------
int __cdecl Render_Quote_and_Gun(signed int a1, signed int a2)
{
  int result; // eax@1
  int v3; // [sp+0h] [bp-34h]@22
  int v4; // [sp+4h] [bp-30h]@22
  int v5; // [sp+8h] [bp-2Ch]@22
  int v6; // [sp+Ch] [bp-28h]@22
  int v7; // [sp+10h] [bp-24h]@22
  int v8; // [sp+14h] [bp-20h]@22
  int v9; // [sp+18h] [bp-1Ch]@22
  int v10; // [sp+1Ch] [bp-18h]@22
  int v11; // [sp+20h] [bp-14h]@7
  int Src_Rects; // [sp+24h] [bp-10h]@20
  int v13; // [sp+28h] [bp-Ch]@20
  int v14; // [sp+2Ch] [bp-8h]@20
  int v15; // [sp+30h] [bp-4h]@20

  result = *(_BYTE *)&Player_Flags & 0x80;
  if ( *(_BYTE *)&Player_Flags & 0x80 && !(*(_BYTE *)&Player_Flags & 2) )
  {
    WeaponRenderbox_Left = 24 * (*((_DWORD *)&WeaponData_ID + 5 * SelectedWeaponID) % 13);
    WeaponRenderbox_Right = WeaponRenderbox_Left + 24;
    WeaponRenderbox_Up = 96 * (*((_DWORD *)&WeaponData_ID + 5 * SelectedWeaponID) / 13);
    WeaponRenderbox_Down = WeaponRenderbox_Up + 16;
    if ( *(_DWORD *)&Quote_Direction_Faced == 2 )
    {
      WeaponRenderbox_Up += 16;
      WeaponRenderbox_Down += 16;
    }
    if ( Quote_IsFacingUp )
    {
      v11 = -4;
      WeaponRenderbox_Up += 32;
      WeaponRenderbox_Down += 32;
    }
    else if ( Quote_IsFacingDown )
    {
      v11 = 4;
      WeaponRenderbox_Up += 64;
      WeaponRenderbox_Down += 64;
    }
    else
    {
      v11 = 0;
    }
    if ( Quote_Animation_Frame == 1
      || Quote_Animation_Frame == 3
      || Quote_Animation_Frame == 6
      || Quote_Animation_Frame == 8 )
    {
      ++WeaponRenderbox_Up;
    }
    if ( *(_DWORD *)&Quote_Direction_Faced )
      Render_Graphics(
        (int)&FullscreenRect,
        (Quote_X_Position - QuoteSizebox_Left) / 512 - a1 / 512,
        v11 + (Quote_Y_Position - QuoteSizebox_Up) / 512 - a2 / 512,
        (int)&WeaponRenderbox_Left,
        11);
    else
      Render_Graphics(
        (int)&FullscreenRect,
        (Quote_X_Position - QuoteSizebox_Left) / 512 - a1 / 512 - 8,
        v11 + (Quote_Y_Position - QuoteSizebox_Up) / 512 - a2 / 512,
        (int)&WeaponRenderbox_Left,
        11);
    result = ((signed int)(unsigned __int8)Invincibility_Timer >> 1) % 2;
    if ( !result )
    {
      Src_Rects = dword_49E69C;
      v13 = dword_49E6A0;
      v14 = dword_49E6A4;
      v15 = dword_49E6A8;
      if ( EquippedItems & 0x40 )
      {
        v13 += 32;
        v15 += 32;
      }
      Render_Graphics(
        (int)&FullscreenRect,
        (Quote_X_Position - QuoteSizebox_Left) / 512 - a1 / 512,
        (Quote_Y_Position - QuoteSizebox_Up) / 512 - a2 / 512,
        (int)&Src_Rects,
        16);
      v3 = 56;
      v4 = 96;
      v5 = 80;
      v6 = 120;
      v7 = 80;
      v8 = 96;
      v9 = 104;
      v10 = 120;
      ++byte_49E6CB;
      result = EquippedItems & 0x10;
      if ( EquippedItems & 0x10 && Tile_On_Which_Quote_Is & 0x100 )
      {
        result = Render_Graphics(
                   (int)&FullscreenRect,
                   Quote_X_Position / 512 - 12 - a1 / 512,
                   Quote_Y_Position / 512 - 12 - a2 / 512,
                   (int)(&v3 + 4 * (((signed int)(unsigned __int8)byte_49E6CB >> 1) % 2)),
                   19);
      }
      else if ( InFishBattle == 1 )
      {
        result = Render_Graphics(
                   (int)&FullscreenRect,
                   Quote_X_Position / 512 - 12 - a1 / 512,
                   Quote_Y_Position / 512 - 12 - a2 / 512,
                   (int)(&v3 + 4 * (((signed int)(unsigned __int8)byte_49E6CB >> 1) % 2)),
                   19);
      }
    }
  }
  return result;
}
// 48F91C: using guessed type int FullscreenRect;
// 499C68: using guessed type int SelectedWeaponID;
// 49E63C: using guessed type int Tile_On_Which_Quote_Is;
// 49E644: using guessed type int Quote_IsFacingUp;
// 49E648: using guessed type int Quote_IsFacingDown;
// 49E64C: using guessed type int InFishBattle;
// 49E650: using guessed type int EquippedItems;
// 49E678: using guessed type int Quote_Animation_Frame;
// 49E68C: using guessed type int QuoteSizebox_Left;
// 49E690: using guessed type int QuoteSizebox_Up;
// 49E69C: using guessed type int dword_49E69C;
// 49E6A0: using guessed type int dword_49E6A0;
// 49E6A4: using guessed type int dword_49E6A4;
// 49E6A8: using guessed type int dword_49E6A8;
// 49E6AC: using guessed type int WeaponRenderbox_Left;
// 49E6B0: using guessed type int WeaponRenderbox_Up;
// 49E6B4: using guessed type int WeaponRenderbox_Right;
// 49E6B8: using guessed type int WeaponRenderbox_Down;
// 49E6C8: using guessed type char Invincibility_Timer;
// 49E6CB: using guessed type char byte_49E6CB;

//----- (004156C0) --------------------------------------------------------
int __cdecl Physics(int a1)
{
  int result; // eax@1
  int X_Position; // ST48_4@195
  int v3; // ST10_4@195
  int v4; // eax@195
  int v5; // ST48_4@201
  int v6; // ST10_4@201
  int v7; // eax@201
  signed int v8; // [sp+0h] [bp-2Ch]@189
  signed int v9; // [sp+4h] [bp-28h]@3
  signed int v10; // [sp+8h] [bp-24h]@3
  signed int v11; // [sp+Ch] [bp-20h]@3
  signed int v12; // [sp+10h] [bp-1Ch]@3
  signed int v13; // [sp+14h] [bp-18h]@3
  signed int v14; // [sp+18h] [bp-14h]@3
  signed int v15; // [sp+1Ch] [bp-10h]@3
  signed int j; // [sp+24h] [bp-8h]@193
  signed int i; // [sp+24h] [bp-8h]@199

  result = *(_BYTE *)&Player_Flags & 2;
  if ( !(*(_BYTE *)&Player_Flags & 2) )
  {
    if ( Tile_On_Which_Quote_Is & 0x100 )
    {
      v14 = 406;
      v12 = 40;
      v15 = 16;
      v9 = 640;
      v10 = 42;
      v13 = 16;
      v11 = 25;
    }
    else
    {
      v14 = 812;
      v12 = 80;
      v15 = 32;
      v9 = 1280;
      v10 = 85;
      v13 = 32;
      v11 = 51;
    }
    byte_49E6E5 = 0;
    if ( !a1 )
      byte_49E6E6 = 0;
    if ( Tile_On_Which_Quote_Is & 8 || Tile_On_Which_Quote_Is & 0x10 || Tile_On_Which_Quote_Is & 0x20 )
    {
      byte_49E6E6 = 0;
      if ( EquippedItems & 1 )
      {
        Booster_Fuel = 50;
      }
      else if ( EquippedItems & 0x20 )
      {
        Booster_Fuel = 50;
      }
      else
      {
        Booster_Fuel = 0;
      }
      if ( a1 )
      {
        if ( Key_Pressed != Key_For_Down || Key_Held != Key_For_Down || *(_BYTE *)&Player_Flags & 1 || Game_State & 4 )
        {
          if ( Key_Held != Key_For_Down )
          {
            if ( Key_For_Left & Key_Held && Quote_X_Velocity > -v14 )
              Quote_X_Velocity -= v10;
            if ( Key_For_Right & Key_Held && Quote_X_Velocity < v14 )
              Quote_X_Velocity += v10;
            if ( Key_For_Left & Key_Held )
              *(_DWORD *)&Quote_Direction_Faced = 0;
            if ( Key_For_Right & Key_Held )
              *(_DWORD *)&Quote_Direction_Faced = 2;
          }
        }
        else
        {
          *(_BYTE *)&Player_Flags |= 1u;
          byte_49E6E5 = 1;
        }
      }
      if ( !(*(_BYTE *)&Player_Flags & 0x20) )
      {
        if ( Quote_X_Velocity < 0 )
        {
          if ( Quote_X_Velocity <= -v11 )
            Quote_X_Velocity += v11;
          else
            Quote_X_Velocity = 0;
        }
        if ( Quote_X_Velocity > 0 )
        {
          if ( Quote_X_Velocity >= v11 )
            Quote_X_Velocity -= v11;
          else
            Quote_X_Velocity = 0;
        }
      }
    }
    else
    {
      if ( a1 )
      {
        if ( EquippedItems & 0x21 && Key_For_Jump_Duplicate & Key_Pressed && Booster_Fuel )
        {
          if ( EquippedItems & 1 )
          {
            byte_49E6E6 = 1;
            if ( Quote_Y_Velocity > 256 )
              Quote_Y_Velocity /= 2;
          }
          if ( EquippedItems & 0x20 )
          {
            if ( Key_For_Up & Key_Held )
            {
              byte_49E6E6 = 2;
              Quote_X_Velocity = 0;
              Quote_Y_Velocity = -1535;
            }
            else if ( Key_For_Left & Key_Held )
            {
              byte_49E6E6 = 1;
              Quote_Y_Velocity = 0;
              Quote_X_Velocity = -1535;
            }
            else if ( Key_For_Right & Key_Held )
            {
              byte_49E6E6 = 1;
              Quote_Y_Velocity = 0;
              Quote_X_Velocity = 1535;
            }
            else if ( Key_For_Down & Key_Held )
            {
              byte_49E6E6 = 3;
              Quote_X_Velocity = 0;
              Quote_Y_Velocity = 1535;
            }
            else
            {
              byte_49E6E6 = 2;
              Quote_X_Velocity = 0;
              Quote_Y_Velocity = -1535;
            }
          }
        }
        if ( Key_For_Left & Key_Held && Quote_X_Velocity > -v14 )
          Quote_X_Velocity -= v13;
        if ( Key_For_Right & Key_Held && Quote_X_Velocity < v14 )
          Quote_X_Velocity += v13;
        if ( Key_For_Left & Key_Held )
          *(_DWORD *)&Quote_Direction_Faced = 0;
        if ( Key_For_Right & Key_Held )
          *(_DWORD *)&Quote_Direction_Faced = 2;
      }
      if ( EquippedItems & 0x20 && byte_49E6E6 && (!(Key_For_Jump_Duplicate & Key_Held) || !Booster_Fuel) )
      {
        if ( byte_49E6E6 == 1 )
        {
          Quote_X_Velocity /= 2;
        }
        else if ( byte_49E6E6 == 2 )
        {
          Quote_Y_Velocity /= 2;
        }
      }
      if ( !Booster_Fuel || !(Key_For_Jump_Duplicate & Key_Held) )
        byte_49E6E6 = 0;
    }
    if ( a1 )
    {
      Quote_IsFacingUp = (Key_For_Up & Key_Held) != 0;
      Quote_IsFacingDown = Key_For_Down & Key_Held && !(Tile_On_Which_Quote_Is & 8);
      if ( Key_For_Jump_Duplicate & Key_Pressed
        && (Tile_On_Which_Quote_Is & 8 || Tile_On_Which_Quote_Is & 0x10 || Tile_On_Which_Quote_Is & 0x20)
        && !(Tile_On_Which_Quote_Is & 0x2000) )
      {
        Quote_Y_Velocity = -v9;
        Play_Sound_Effect(15, 1);
      }
    }
    if ( a1 && Key_Held & (Key_For_Shoot_Duplicate | Key_For_Jump_Duplicate | Key_For_Up | Key_For_Right | Key_For_Left) )
      *(_BYTE *)&Player_Flags &= 0xFEu;
    if ( byte_49E6E6 && Booster_Fuel )
      --Booster_Fuel;
    if ( Tile_On_Which_Quote_Is & 0x1000 )
      Quote_X_Velocity -= 136;
    if ( Tile_On_Which_Quote_Is & 0x2000 )
      Quote_Y_Velocity -= 128;
    if ( Tile_On_Which_Quote_Is & 0x4000 )
      Quote_X_Velocity += 136;
    if ( Tile_On_Which_Quote_Is & 0x8000 )
      Quote_Y_Velocity += 85;
    if ( EquippedItems & 0x20 && byte_49E6E6 )
    {
      if ( byte_49E6E6 == 1 )
      {
        if ( Tile_On_Which_Quote_Is & 5 )
          Quote_Y_Velocity = -256;
        if ( !*(_DWORD *)&Quote_Direction_Faced )
          Quote_X_Velocity -= 32;
        if ( *(_DWORD *)&Quote_Direction_Faced == 2 )
          Quote_X_Velocity += 32;
        if ( Key_For_Jump_Duplicate & Key_Pressed || Booster_Fuel % 3 == 1 )
        {
          if ( !*(_DWORD *)&Quote_Direction_Faced )
            Create_Animated_Effect(Quote_X_Position + 1024, Quote_Y_Position + 1024, 7, 2);
          if ( *(_DWORD *)&Quote_Direction_Faced == 2 )
            Create_Animated_Effect(Quote_X_Position - 1024, Quote_Y_Position + 1024, 7, 0);
          Play_Sound_Effect(113, 1);
        }
      }
      else if ( byte_49E6E6 == 2 )
      {
        Quote_Y_Velocity -= 32;
        if ( Key_For_Jump_Duplicate & Key_Pressed || Booster_Fuel % 3 == 1 )
        {
          Create_Animated_Effect(Quote_X_Position, Quote_Y_Position + 3072, 7, 3);
          Play_Sound_Effect(113, 1);
        }
      }
      else if ( byte_49E6E6 == 3 && (Key_For_Jump_Duplicate & Key_Pressed || Booster_Fuel % 3 == 1) )
      {
        Create_Animated_Effect(Quote_X_Position, Quote_Y_Position - 3072, 7, 1);
        Play_Sound_Effect(113, 1);
      }
    }
    else if ( Tile_On_Which_Quote_Is & 0x2000 )
    {
      Quote_Y_Velocity += v12;
    }
    else if ( EquippedItems & 1 && byte_49E6E6 && Quote_Y_Velocity > -1024 )
    {
      Quote_Y_Velocity -= 32;
      if ( !(Booster_Fuel % 3) )
      {
        Create_Animated_Effect(Quote_X_Position, Quote_Y_Position + QuoteHitbox_Down / 2, 7, 3);
        Play_Sound_Effect(113, 1);
      }
      if ( Tile_On_Which_Quote_Is & 2 )
        Quote_Y_Velocity = 512;
    }
    else if ( Quote_Y_Velocity < 0 && a1 && Key_For_Jump_Duplicate & Key_Held )
    {
      Quote_Y_Velocity += v15;
    }
    else
    {
      Quote_Y_Velocity += v12;
    }
    if ( !a1 || !(Key_For_Jump_Duplicate & Key_Pressed) )
    {
      if ( Tile_On_Which_Quote_Is & 0x10 && Quote_X_Velocity < 0 )
        Quote_Y_Velocity = -Quote_X_Velocity;
      if ( Tile_On_Which_Quote_Is & 0x20 && Quote_X_Velocity > 0 )
        Quote_Y_Velocity = Quote_X_Velocity;
      if ( Tile_On_Which_Quote_Is & 8 && Tile_On_Which_Quote_Is & 0x80000 && Quote_X_Velocity < 0 )
        Quote_Y_Velocity = 1024;
      if ( Tile_On_Which_Quote_Is & 8 && Tile_On_Which_Quote_Is & 0x10000 && Quote_X_Velocity > 0 )
        Quote_Y_Velocity = 1024;
      if ( Tile_On_Which_Quote_Is & 8 && Tile_On_Which_Quote_Is & 0x20000 && Tile_On_Which_Quote_Is & 0x40000 )
        Quote_Y_Velocity = 1024;
    }
    if ( !(Tile_On_Which_Quote_Is & 0x100) || Tile_On_Which_Quote_Is & 0xF000 )
    {
      if ( Quote_X_Velocity < -1535 )
        Quote_X_Velocity = -1535;
      if ( Quote_X_Velocity > 1535 )
        Quote_X_Velocity = 1535;
      if ( Quote_Y_Velocity < -1535 )
        Quote_Y_Velocity = -1535;
      if ( Quote_Y_Velocity > 1535 )
        Quote_Y_Velocity = 1535;
    }
    else
    {
      if ( Quote_X_Velocity < -767 )
        Quote_X_Velocity = -767;
      if ( Quote_X_Velocity > 767 )
        Quote_X_Velocity = 767;
      if ( Quote_Y_Velocity < -767 )
        Quote_Y_Velocity = -767;
      if ( Quote_Y_Velocity > 767 )
        Quote_Y_Velocity = 767;
    }
    if ( !byte_49E6E4 && Tile_On_Which_Quote_Is & 0x100 )
    {
      if ( Tile_On_Which_Quote_Is & 0x800 )
        v8 = 2;
      else
        v8 = 0;
      if ( Tile_On_Which_Quote_Is & 8 || Quote_Y_Velocity <= 512 )
      {
        if ( Quote_X_Velocity > 512 || Quote_X_Velocity < -512 )
        {
          for ( i = 0; i < 8; ++i )
          {
            v5 = Quote_X_Position + (RNG_Range(-8, 8) << 9);
            v6 = RNG_Range(-512, 128);
            v7 = RNG_Range(-512, 512);
            NPC_Create(73, v5, Quote_Y_Position, Quote_X_Velocity + v7, v6, v8, 0, 0);
          }
          Play_Sound_Effect(56, 1);
        }
      }
      else
      {
        for ( j = 0; j < 8; ++j )
        {
          X_Position = Quote_X_Position + (RNG_Range(-8, 8) << 9);
          v3 = RNG_Range(-512, 128) - Quote_Y_Velocity / 2;
          v4 = RNG_Range(-512, 512);
          NPC_Create(73, X_Position, Quote_Y_Position, Quote_X_Velocity + v4, v3, v8, 0, 0);
        }
        Play_Sound_Effect(56, 1);
      }
      byte_49E6E4 = 1;
    }
    if ( !(Tile_On_Which_Quote_Is & 0x100) )
      byte_49E6E4 = 0;
    if ( Tile_On_Which_Quote_Is & 0x400 )
      Take_Damage(10);
    if ( *(_DWORD *)&Quote_Direction_Faced )
    {
      Camera_X_Velocity += 512;
      if ( Camera_X_Velocity > 0x8000 )
        Camera_X_Velocity = 0x8000;
    }
    else
    {
      Camera_X_Velocity -= 512;
      if ( Camera_X_Velocity < -32768 )
        Camera_X_Velocity = -32768;
    }
    if ( Key_For_Up & Key_Held && a1 )
    {
      Camera_Y_Velocity -= 512;
      if ( Camera_Y_Velocity < -32768 )
        Camera_Y_Velocity = -32768;
    }
    else if ( Key_For_Down & Key_Held && a1 )
    {
      Camera_Y_Velocity += 512;
      if ( Camera_Y_Velocity > 0x8000 )
        Camera_Y_Velocity = 0x8000;
    }
    else
    {
      if ( Camera_Y_Velocity > 512 )
        Camera_Y_Velocity -= 512;
      if ( Camera_Y_Velocity < -512 )
        Camera_Y_Velocity += 512;
    }
    result = Camera_X_Velocity + Quote_X_Position;
    Camera_X_Position = Camera_X_Velocity + Quote_X_Position;
    Camera_Y_Position = Camera_Y_Velocity + Quote_Y_Position;
    if ( Quote_X_Velocity > v11 || (result = -v11, Quote_X_Velocity < -v11) )
      Quote_X_Position += Quote_X_Velocity;
    Quote_Y_Position += Quote_Y_Velocity;
  }
  return result;
}
// 493610: using guessed type int Key_For_Jump_Duplicate;
// 493614: using guessed type int Key_For_Shoot_Duplicate;
// 493630: using guessed type int Key_For_Left;
// 493634: using guessed type int Key_For_Up;
// 493638: using guessed type int Key_For_Right;
// 49363C: using guessed type int Key_For_Down;
// 49E1E8: using guessed type int Game_State;
// 49E210: using guessed type int Key_Held;
// 49E214: using guessed type int Key_Pressed;
// 49E63C: using guessed type int Tile_On_Which_Quote_Is;
// 49E644: using guessed type int Quote_IsFacingUp;
// 49E648: using guessed type int Quote_IsFacingDown;
// 49E650: using guessed type int EquippedItems;
// 49E65C: using guessed type int Camera_X_Position;
// 49E660: using guessed type int Camera_Y_Position;
// 49E664: using guessed type int Camera_X_Velocity;
// 49E668: using guessed type int Camera_Y_Velocity;
// 49E66C: using guessed type int Quote_X_Velocity;
// 49E670: using guessed type int Quote_Y_Velocity;
// 49E688: using guessed type int QuoteHitbox_Down;
// 49E6E4: using guessed type char byte_49E6E4;
// 49E6E5: using guessed type char byte_49E6E5;
// 49E6E6: using guessed type char byte_49E6E6;
// 49E6E8: using guessed type int Booster_Fuel;

//----- (00416470) --------------------------------------------------------
int __cdecl sub_416470(int a1)
{
  int result; // eax@73

  Quote_IsFacingUp = 0;
  Quote_IsFacingDown = 0;
  if ( a1 )
  {
    if ( Key_Held & (Key_For_Right | Key_For_Left) )
    {
      if ( Key_For_Left & Key_Held )
        Quote_X_Velocity -= 256;
      if ( Key_For_Right & Key_Held )
        Quote_X_Velocity += 256;
    }
    else if ( Quote_X_Velocity >= 128 || Quote_X_Velocity <= -128 )
    {
      if ( Quote_X_Velocity <= 0 )
        Quote_X_Velocity += Quote_X_Velocity < 0 ? 0x80 : 0;
      else
        Quote_X_Velocity -= 128;
    }
    else
    {
      Quote_X_Velocity = 0;
    }
    if ( Key_Held & (Key_For_Down | Key_For_Up) )
    {
      if ( Key_For_Up & Key_Held )
        Quote_Y_Velocity -= 256;
      if ( Key_For_Down & Key_Held )
        Quote_Y_Velocity += 256;
    }
    else if ( Quote_Y_Velocity >= 128 || Quote_Y_Velocity <= -128 )
    {
      if ( Quote_Y_Velocity <= 0 )
        Quote_Y_Velocity += Quote_Y_Velocity < 0 ? 0x80 : 0;
      else
        Quote_Y_Velocity -= 128;
    }
    else
    {
      Quote_Y_Velocity = 0;
    }
  }
  else
  {
    if ( Quote_X_Velocity >= 128 || Quote_X_Velocity <= -64 )
    {
      if ( Quote_X_Velocity <= 0 )
        Quote_X_Velocity += Quote_X_Velocity < 0 ? 0x80 : 0;
      else
        Quote_X_Velocity -= 128;
    }
    else
    {
      Quote_X_Velocity = 0;
    }
    if ( Quote_Y_Velocity >= 128 || Quote_Y_Velocity <= -64 )
    {
      if ( Quote_Y_Velocity <= 0 )
        Quote_Y_Velocity += Quote_Y_Velocity < 0 ? 0x80 : 0;
      else
        Quote_Y_Velocity -= 128;
    }
    else
    {
      Quote_Y_Velocity = 0;
    }
  }
  if ( Quote_Y_Velocity < -512 && Tile_On_Which_Quote_Is & 2 )
    Create_Animated_Effect(Quote_X_Position, Quote_Y_Position - QuoteHitbox_Up, 13, 5);
  if ( Quote_Y_Velocity > 512 && Tile_On_Which_Quote_Is & 8 )
    Create_Animated_Effect(Quote_X_Position, QuoteHitbox_Down + Quote_Y_Position, 13, 5);
  if ( Quote_X_Velocity > 1024 )
    Quote_X_Velocity = 1024;
  if ( Quote_X_Velocity < -1024 )
    Quote_X_Velocity = -1024;
  if ( Quote_Y_Velocity > 1024 )
    Quote_Y_Velocity = 1024;
  if ( Quote_Y_Velocity < -1024 )
    Quote_Y_Velocity = -1024;
  if ( (Key_Held & (Key_For_Up | Key_For_Left)) == (Key_For_Up | Key_For_Left) )
  {
    if ( Quote_X_Velocity < -780 )
      Quote_X_Velocity = -780;
    if ( Quote_Y_Velocity < -780 )
      Quote_Y_Velocity = -780;
  }
  if ( (Key_Held & (Key_For_Up | Key_For_Right)) == (Key_For_Up | Key_For_Right) )
  {
    if ( Quote_X_Velocity > 780 )
      Quote_X_Velocity = 780;
    if ( Quote_Y_Velocity < -780 )
      Quote_Y_Velocity = -780;
  }
  if ( (Key_Held & (Key_For_Down | Key_For_Left)) == (Key_For_Down | Key_For_Left) )
  {
    if ( Quote_X_Velocity < -780 )
      Quote_X_Velocity = -780;
    if ( Quote_Y_Velocity > 780 )
      Quote_Y_Velocity = 780;
  }
  if ( (Key_Held & (Key_For_Down | Key_For_Right)) == (Key_For_Down | Key_For_Right) )
  {
    if ( Quote_X_Velocity > 780 )
      Quote_X_Velocity = 780;
    if ( Quote_Y_Velocity > 780 )
      Quote_Y_Velocity = 780;
  }
  Quote_X_Position += Quote_X_Velocity;
  result = Quote_Y_Velocity + Quote_Y_Position;
  Quote_Y_Position += Quote_Y_Velocity;
  return result;
}
// 493630: using guessed type int Key_For_Left;
// 493634: using guessed type int Key_For_Up;
// 493638: using guessed type int Key_For_Right;
// 49363C: using guessed type int Key_For_Down;
// 49E210: using guessed type int Key_Held;
// 49E63C: using guessed type int Tile_On_Which_Quote_Is;
// 49E644: using guessed type int Quote_IsFacingUp;
// 49E648: using guessed type int Quote_IsFacingDown;
// 49E66C: using guessed type int Quote_X_Velocity;
// 49E670: using guessed type int Quote_Y_Velocity;
// 49E680: using guessed type int QuoteHitbox_Up;
// 49E688: using guessed type int QuoteHitbox_Down;

//----- (004168C0) --------------------------------------------------------
int __cdecl sub_4168C0(int a1)
{
  int result; // eax@1

  result = *(_BYTE *)&Player_Flags & 0x80;
  if ( *(_BYTE *)&Player_Flags & 0x80 )
  {
    if ( LvBarFlashesLeft )
      --LvBarFlashesLeft;
    if ( Invincibility_Timer )
    {
      --Invincibility_Timer;
    }
    else if ( ExpToGained )
    {
      sub_425BF0((int)&Quote_X_Position, (int)&Quote_Y_Position, ExpToGained);
      ExpToGained = 0;
    }
    if ( InFishBattle )
    {
      if ( InFishBattle == 1 )
        sub_416470(a1);
    }
    else
    {
      if ( !(Game_State & 4) && a1 )
        Quote_Air();
      Physics(a1);
    }
    result = *(_BYTE *)&Player_Flags & 0xDF;
    *(_BYTE *)&Player_Flags &= 0xDFu;
  }
  return result;
}
// 49E1E8: using guessed type int Game_State;
// 49E64C: using guessed type int InFishBattle;
// 49E6C0: using guessed type int LvBarFlashesLeft;
// 49E6C4: using guessed type int ExpToGained;
// 49E6C8: using guessed type char Invincibility_Timer;

//----- (00416990) --------------------------------------------------------
int Quote_Air()
{
  int result; // eax@1

  result = EquippedItems & 0x10;
  if ( EquippedItems & 0x10 )
  {
    Air = 1000;
    dword_49E6E0 = 0;
  }
  else
  {
    if ( Tile_On_Which_Quote_Is & 0x100 )
    {
      if ( --Air <= 0 )
      {
        if ( Check_Flag(4000) )
        {
          result = Call_TSC_Event(1100);
        }
        else
        {
          Call_TSC_Event(41);
          if ( *(_DWORD *)&Quote_Direction_Faced )
            result = Create_Animated_Effect(Quote_X_Position, Quote_Y_Position, 8, 2);
          else
            result = Create_Animated_Effect(Quote_X_Position, Quote_Y_Position, 8, 0);
          *(_BYTE *)&Player_Flags &= 0x7Fu;
        }
      }
    }
    else
    {
      Air = 1000;
    }
    if ( Tile_On_Which_Quote_Is & 0x100 )
    {
      dword_49E6E0 = 60;
    }
    else if ( dword_49E6E0 )
    {
      result = dword_49E6E0-- - 1;
    }
  }
  return result;
}
// 49E63C: using guessed type int Tile_On_Which_Quote_Is;
// 49E650: using guessed type int EquippedItems;
// 49E6DC: using guessed type int Air;
// 49E6E0: using guessed type int dword_49E6E0;

//----- (00416AA0) --------------------------------------------------------
int __cdecl GetPlayerXY(int *X, int *Y)
{
  int result; // eax@1

  *X = Quote_X_Position;
  result = Quote_Y_Position;
  *Y = Quote_Y_Position;
  return result;
}

//----- (00416AC0) --------------------------------------------------------
int __cdecl Move_Quote(int New_X_Position, int New_Y_Position)
{
  Quote_X_Position = New_X_Position;
  Quote_Y_Position = New_Y_Position;
  Camera_X_Position = New_X_Position;
  Camera_Y_Position = New_Y_Position;
  Camera_X_Velocity = 0;
  Camera_Y_Velocity = 0;
  Quote_X_Velocity = 0;
  Quote_Y_Velocity = 0;
  *(_BYTE *)&Player_Flags &= 0xFEu;
  return sub_420FA0();
}
// 49E65C: using guessed type int Camera_X_Position;
// 49E660: using guessed type int Camera_Y_Position;
// 49E664: using guessed type int Camera_X_Velocity;
// 49E668: using guessed type int Camera_Y_Velocity;
// 49E66C: using guessed type int Quote_X_Velocity;
// 49E670: using guessed type int Quote_Y_Velocity;

//----- (00416B60) --------------------------------------------------------
// Can be optimised to 
//    mov eax, InFishBattle
//    retn
// (offset 416B60
// A1 4C E6 49 00 C3 90 90)
int Return_InFishBattle()
{
  return InFishBattle;
}
// 49E64C: using guessed type int InFishBattle;

//----- (00416B70) --------------------------------------------------------
int *__cdecl sub_416B70(unsigned __int8 a1)
{
  int *result; // eax@3
  signed int i; // [sp+0h] [bp-4h]@5

  if ( a1 == 3 )
  {
    *(_BYTE *)&Player_Flags |= 1u;
LABEL_13:
    Quote_X_Velocity = 0;
    return sub_414BF0(0);
  }
  *(_BYTE *)&Player_Flags &= 0xFEu;
  result = (int *)a1;
  if ( (signed int)a1 < 10 )
  {
    *(_DWORD *)&Quote_Direction_Faced = a1;
    goto LABEL_13;
  }
  for ( i = 0; i < 512; ++i )
  {
    result = (int *)(172 * i);
    if ( NPC_Event_Number[43 * i] == a1 )
      break;
  }
  if ( i != 512 )
  {
    if ( Quote_X_Position <= NPC_X_Position[43 * i] )
      *(_DWORD *)&Quote_Direction_Faced = 2;
    else
      *(_DWORD *)&Quote_Direction_Faced = 0;
    goto LABEL_13;
  }
  return result;
}
// 49E66C: using guessed type int Quote_X_Velocity;
// 4A6228: using guessed type int NPC_X_Position[];
// 4A6250: using guessed type int NPC_Event_Number[];

//----- (00416C40) --------------------------------------------------------
int __cdecl sub_416C40(unsigned __int8 a1)
{
  int result; // eax@1

  result = a1;
  InFishBattle = a1;
  return result;
}
// 49E64C: using guessed type int InFishBattle;

//----- (00416C70) --------------------------------------------------------
// EQ+ : Equip +
// Add [insert variable name] to equip flag bytes
int __cdecl TSC_EQplus(int a1, int a2)
{
  int result; // eax@2

  if ( a2 )
  {
    result = a1 | EquippedItems;
    EquippedItems |= a1;
  }
  else
  {
    EquippedItems &= ~a1;
  }
  return result;
}
// 49E64C: using guessed type int InFishBattle;
// 49E650: using guessed type int EquippedItems;

//----- (00416CC0) --------------------------------------------------------
int __cdecl TSC_SSS_SPS_(int a1, int a2)
{
  int result; // eax@1

  result = a2;
  dword_49E6F0 = a2;
  dword_49E6EC = a1;
  if ( a1 == 1 )
  {
    sub_420720(40, dword_49E6F0);
    sub_420720(41, dword_49E6F0 + 100);
    Play_Sound_Effect(40, -1);
    result = Play_Sound_Effect(41, -1);
  }
  else if ( a1 == 2 )
  {
    result = Play_Sound_Effect(58, -1);
  }
  return result;
}
// 49E6EC: using guessed type int dword_49E6EC;
// 49E6F0: using guessed type int dword_49E6F0;

//----- (00416D40) --------------------------------------------------------
int TSC_SSS_SPS__2()
{
  dword_49E6EC = 0;
  Play_Sound_Effect(40, 0);
  Play_Sound_Effect(41, 0);
  return Play_Sound_Effect(58, 0);
}
// 49E6EC: using guessed type int dword_49E6EC;

//----- (00416D80) --------------------------------------------------------
int TSC_SSS_SPS__3()
{
  int result; // eax@1

  result = dword_49E6EC;
  if ( dword_49E6EC == 1 )
  {
    sub_420720(40, dword_49E6F0);
    sub_420720(41, dword_49E6F0 + 100);
    Play_Sound_Effect(40, -1);
    result = Play_Sound_Effect(41, -1);
  }
  else if ( dword_49E6EC == 2 )
  {
    result = Play_Sound_Effect(58, -1);
  }
  return result;
}
// 49E6EC: using guessed type int dword_49E6EC;
// 49E6F0: using guessed type int dword_49E6F0;

//----- (00416DF0) --------------------------------------------------------
int TSC_SSS_SPS__4()
{
  Play_Sound_Effect(40, 0);
  Play_Sound_Effect(41, 0);
  return Play_Sound_Effect(58, 0);
}

//----- (00416E30) --------------------------------------------------------
signed int __cdecl sub_416E30(int a1, int a2)
{
  signed int v3; // [sp+0h] [bp-4h]@1

  v3 = 0;
  if ( Quote_Y_Position - QuoteHitbox_Up < (16 * a2 + 4) << 9
    && QuoteHitbox_Down + Quote_Y_Position > (16 * a2 - 4) << 9
    && Quote_X_Position - QuoteHitbox_Right < (16 * a1 + 8) << 9
    && Quote_X_Position - QuoteHitbox_Right > a1 << 13 )
  {
    Quote_X_Position = QuoteHitbox_Right + ((16 * a1 + 8) << 9);
    if ( Quote_X_Velocity < -384 )
      Quote_X_Velocity = -384;
    if ( !(Key_For_Left & Key_Held) && Quote_X_Velocity < 0 )
      Quote_X_Velocity = 0;
    v3 = 1;
  }
  if ( Quote_Y_Position - QuoteHitbox_Up < (16 * a2 + 4) << 9
    && QuoteHitbox_Down + Quote_Y_Position > (16 * a2 - 4) << 9
    && QuoteHitbox_Right + Quote_X_Position > (16 * a1 - 8) << 9
    && QuoteHitbox_Right + Quote_X_Position < a1 << 13 )
  {
    Quote_X_Position = ((16 * a1 - 8) << 9) - QuoteHitbox_Right;
    if ( Quote_X_Velocity > 384 )
      Quote_X_Velocity = 384;
    if ( !(Key_For_Right & Key_Held) && Quote_X_Velocity > 0 )
      Quote_X_Velocity = 0;
    v3 |= 4u;
  }
  if ( Quote_X_Position - QuoteHitbox_Right < (16 * a1 + 5) << 9
    && QuoteHitbox_Right + Quote_X_Position > (16 * a1 - 5) << 9
    && Quote_Y_Position - QuoteHitbox_Up < (16 * a2 + 8) << 9
    && Quote_Y_Position - QuoteHitbox_Up > a2 << 13 )
  {
    Quote_Y_Position = QuoteHitbox_Up + ((16 * a2 + 8) << 9);
    if ( !(*(_BYTE *)&Player_Flags & 2) && Quote_Y_Velocity < -512 )
      sub_417160();
    if ( Quote_Y_Velocity < 0 )
      Quote_Y_Velocity = 0;
    v3 |= 2u;
  }
  if ( Quote_X_Position - QuoteHitbox_Right < (16 * a1 + 5) << 9
    && QuoteHitbox_Right + Quote_X_Position > (16 * a1 - 5) << 9
    && QuoteHitbox_Down + Quote_Y_Position > (16 * a2 - 8) << 9
    && QuoteHitbox_Down + Quote_Y_Position < a2 << 13 )
  {
    Quote_Y_Position = ((16 * a2 - 8) << 9) - QuoteHitbox_Down;
    if ( Quote_Y_Velocity > 1024 )
      Play_Sound_Effect(23, 1);
    if ( Quote_Y_Velocity > 0 )
      Quote_Y_Velocity = 0;
    v3 |= 8u;
  }
  return v3;
}
// 493630: using guessed type int Key_For_Left;
// 493638: using guessed type int Key_For_Right;
// 49E210: using guessed type int Key_Held;
// 49E66C: using guessed type int Quote_X_Velocity;
// 49E670: using guessed type int Quote_Y_Velocity;
// 49E680: using guessed type int QuoteHitbox_Up;
// 49E684: using guessed type int QuoteHitbox_Right;
// 49E688: using guessed type int QuoteHitbox_Down;

//----- (00417160) --------------------------------------------------------
int sub_417160()
{
  int result; // eax@1

  result = *(_BYTE *)&Player_Flags & 2;
  if ( !(*(_BYTE *)&Player_Flags & 2) && Quote_Y_Velocity < -512 )
  {
    Play_Sound_Effect(3, 1);
    Create_Animated_Effect(Quote_X_Position, Quote_Y_Position - QuoteHitbox_Up, 13, 0);
    result = Create_Animated_Effect(Quote_X_Position, Quote_Y_Position - QuoteHitbox_Up, 13, 0);
  }
  return result;
}
// 49E670: using guessed type int Quote_Y_Velocity;
// 49E680: using guessed type int QuoteHitbox_Up;

//----- (004171D0) --------------------------------------------------------
signed int __cdecl sub_4171D0(int a1, int a2)
{
  signed int v3; // [sp+4h] [bp-4h]@1

  v3 = 0;
  if ( Quote_X_Position < (16 * a1 + 8) << 9
    && Quote_X_Position > (16 * a1 - 8) << 9
    && Quote_Y_Position - QuoteHitbox_Up < (a2 << 13) - (Quote_X_Position - (a1 << 13)) / 2 + 2048
    && QuoteHitbox_Down + Quote_Y_Position > (16 * a2 - 8) << 9 )
  {
    Quote_Y_Position = (a2 << 13) - (Quote_X_Position - (a1 << 13)) / 2 + QuoteHitbox_Up + 2048;
    if ( !(*(_BYTE *)&Player_Flags & 2) && Quote_Y_Velocity < -512 )
      sub_417160();
    if ( Quote_Y_Velocity < 0 )
      Quote_Y_Velocity = 0;
    v3 = 2;
  }
  return v3;
}
// 49E670: using guessed type int Quote_Y_Velocity;
// 49E680: using guessed type int QuoteHitbox_Up;
// 49E688: using guessed type int QuoteHitbox_Down;

//----- (004172E0) --------------------------------------------------------
signed int __cdecl sub_4172E0(int a1, int a2)
{
  signed int v3; // [sp+4h] [bp-4h]@1

  v3 = 0;
  if ( Quote_X_Position < (16 * a1 + 8) << 9
    && Quote_X_Position > (16 * a1 - 8) << 9
    && Quote_Y_Position - QuoteHitbox_Up < (a2 << 13) - (Quote_X_Position - (a1 << 13)) / 2 - 2048
    && QuoteHitbox_Down + Quote_Y_Position > (16 * a2 - 8) << 9 )
  {
    Quote_Y_Position = (a2 << 13) - (Quote_X_Position - (a1 << 13)) / 2 + QuoteHitbox_Up - 2048;
    if ( !(*(_BYTE *)&Player_Flags & 2) && Quote_Y_Velocity < -512 )
      sub_417160();
    if ( Quote_Y_Velocity < 0 )
      Quote_Y_Velocity = 0;
    v3 = 2;
  }
  return v3;
}
// 49E670: using guessed type int Quote_Y_Velocity;
// 49E680: using guessed type int QuoteHitbox_Up;
// 49E688: using guessed type int QuoteHitbox_Down;

//----- (004173F0) --------------------------------------------------------
signed int __cdecl sub_4173F0(int a1, int a2)
{
  signed int v3; // [sp+4h] [bp-4h]@1

  v3 = 0;
  if ( Quote_X_Position < (16 * a1 + 8) << 9
    && Quote_X_Position > (16 * a1 - 8) << 9
    && Quote_Y_Position - QuoteHitbox_Up < (a2 << 13) + (Quote_X_Position - (a1 << 13)) / 2 - 2048
    && QuoteHitbox_Down + Quote_Y_Position > (16 * a2 - 8) << 9 )
  {
    Quote_Y_Position = (Quote_X_Position - (a1 << 13)) / 2 + QuoteHitbox_Up + (a2 << 13) - 2048;
    if ( !(*(_BYTE *)&Player_Flags & 2) && Quote_Y_Velocity < -512 )
      sub_417160();
    if ( Quote_Y_Velocity < 0 )
      Quote_Y_Velocity = 0;
    v3 = 2;
  }
  return v3;
}
// 49E670: using guessed type int Quote_Y_Velocity;
// 49E680: using guessed type int QuoteHitbox_Up;
// 49E688: using guessed type int QuoteHitbox_Down;

//----- (00417500) --------------------------------------------------------
signed int __cdecl sub_417500(int a1, int a2)
{
  signed int v3; // [sp+4h] [bp-4h]@1

  v3 = 0;
  if ( Quote_X_Position < (16 * a1 + 8) << 9
    && Quote_X_Position > (16 * a1 - 8) << 9
    && Quote_Y_Position - QuoteHitbox_Up < (a2 << 13) + (Quote_X_Position - (a1 << 13)) / 2 + 2048
    && QuoteHitbox_Down + Quote_Y_Position > (16 * a2 - 8) << 9 )
  {
    Quote_Y_Position = (Quote_X_Position - (a1 << 13)) / 2 + QuoteHitbox_Up + (a2 << 13) + 2048;
    if ( !(*(_BYTE *)&Player_Flags & 2) && Quote_Y_Velocity < -512 )
      sub_417160();
    if ( Quote_Y_Velocity < 0 )
      Quote_Y_Velocity = 0;
    v3 = 2;
  }
  return v3;
}
// 49E670: using guessed type int Quote_Y_Velocity;
// 49E680: using guessed type int QuoteHitbox_Up;
// 49E688: using guessed type int QuoteHitbox_Down;

//----- (00417610) --------------------------------------------------------
signed int __cdecl sub_417610(int a1, int a2)
{
  signed int v3; // [sp+4h] [bp-4h]@1

  v3 = 0x10000;
  if ( Quote_X_Position < (16 * a1 + 8) << 9
    && Quote_X_Position > (16 * a1 - 8) << 9
    && QuoteHitbox_Down + Quote_Y_Position > (a2 << 13) + (Quote_X_Position - (a1 << 13)) / 2 - 2048
    && Quote_Y_Position - QuoteHitbox_Up < (16 * a2 + 8) << 9 )
  {
    Quote_Y_Position = (a2 << 13) + (Quote_X_Position - (a1 << 13)) / 2 - 2048 - QuoteHitbox_Down;
    if ( Quote_Y_Velocity > 1024 )
      Play_Sound_Effect(23, 1);
    if ( Quote_Y_Velocity > 0 )
      Quote_Y_Velocity = 0;
    v3 = 65576;
  }
  return v3;
}
// 49E670: using guessed type int Quote_Y_Velocity;
// 49E680: using guessed type int QuoteHitbox_Up;
// 49E688: using guessed type int QuoteHitbox_Down;

//----- (00417720) --------------------------------------------------------
signed int __cdecl sub_417720(int a1, int a2)
{
  signed int v3; // [sp+4h] [bp-4h]@1

  v3 = 0x20000;
  if ( Quote_X_Position < (16 * a1 + 8) << 9
    && Quote_X_Position > (16 * a1 - 8) << 9
    && QuoteHitbox_Down + Quote_Y_Position > (a2 << 13) + (Quote_X_Position - (a1 << 13)) / 2 + 2048
    && Quote_Y_Position - QuoteHitbox_Up < (16 * a2 + 8) << 9 )
  {
    Quote_Y_Position = (a2 << 13) + (Quote_X_Position - (a1 << 13)) / 2 + 2048 - QuoteHitbox_Down;
    if ( Quote_Y_Velocity > 1024 )
      Play_Sound_Effect(23, 1);
    if ( Quote_Y_Velocity > 0 )
      Quote_Y_Velocity = 0;
    v3 = 131112;
  }
  return v3;
}
// 49E670: using guessed type int Quote_Y_Velocity;
// 49E680: using guessed type int QuoteHitbox_Up;
// 49E688: using guessed type int QuoteHitbox_Down;

//----- (00417830) --------------------------------------------------------
signed int __cdecl sub_417830(int a1, int a2)
{
  signed int v3; // [sp+4h] [bp-4h]@1

  v3 = 0x40000;
  if ( Quote_X_Position < (16 * a1 + 8) << 9
    && Quote_X_Position > (16 * a1 - 8) << 9
    && QuoteHitbox_Down + Quote_Y_Position > (a2 << 13) - (Quote_X_Position - (a1 << 13)) / 2 + 2048
    && Quote_Y_Position - QuoteHitbox_Up < (16 * a2 + 8) << 9 )
  {
    Quote_Y_Position = (a2 << 13) - (Quote_X_Position - (a1 << 13)) / 2 + 2048 - QuoteHitbox_Down;
    if ( Quote_Y_Velocity > 1024 )
      Play_Sound_Effect(23, 1);
    if ( Quote_Y_Velocity > 0 )
      Quote_Y_Velocity = 0;
    v3 = 262168;
  }
  return v3;
}
// 49E670: using guessed type int Quote_Y_Velocity;
// 49E680: using guessed type int QuoteHitbox_Up;
// 49E688: using guessed type int QuoteHitbox_Down;

//----- (00417940) --------------------------------------------------------
signed int __cdecl sub_417940(int a1, int a2)
{
  signed int v3; // [sp+4h] [bp-4h]@1

  v3 = 0x80000;
  if ( Quote_X_Position < (16 * a1 + 8) << 9
    && Quote_X_Position > (16 * a1 - 8) << 9
    && QuoteHitbox_Down + Quote_Y_Position > (a2 << 13) - (Quote_X_Position - (a1 << 13)) / 2 - 2048
    && Quote_Y_Position - QuoteHitbox_Up < (16 * a2 + 8) << 9 )
  {
    Quote_Y_Position = (a2 << 13) - (Quote_X_Position - (a1 << 13)) / 2 - 2048 - QuoteHitbox_Down;
    if ( Quote_Y_Velocity > 1024 )
      Play_Sound_Effect(23, 1);
    if ( Quote_Y_Velocity > 0 )
      Quote_Y_Velocity = 0;
    v3 = 524312;
  }
  return v3;
}
// 49E670: using guessed type int Quote_Y_Velocity;
// 49E680: using guessed type int QuoteHitbox_Up;
// 49E688: using guessed type int QuoteHitbox_Down;

//----- (00417A50) --------------------------------------------------------
signed int __cdecl sub_417A50(int a1, int a2)
{
  signed int v3; // [sp+0h] [bp-4h]@1

  v3 = 0;
  if ( Quote_X_Position - QuoteHitbox_Right < (16 * a1 + 5) << 9
    && QuoteHitbox_Right + Quote_X_Position > (16 * a1 - 5) << 9
    && Quote_Y_Position - QuoteHitbox_Up < (16 * a2 + 5) << 9
    && QuoteHitbox_Down + Quote_Y_Position > a2 << 13 )
  {
    v3 = 256;
  }
  return v3;
}
// 49E680: using guessed type int QuoteHitbox_Up;
// 49E684: using guessed type int QuoteHitbox_Right;
// 49E688: using guessed type int QuoteHitbox_Down;

//----- (00417AE0) --------------------------------------------------------
signed int __cdecl sub_417AE0(int a1, int a2)
{
  signed int v3; // [sp+0h] [bp-4h]@1

  v3 = 0;
  if ( Quote_X_Position - 2048 < (16 * a1 + 4) << 9
    && Quote_X_Position + 2048 > (16 * a1 - 4) << 9
    && Quote_Y_Position - 2048 < (16 * a2 + 3) << 9
    && Quote_Y_Position + 2048 > (16 * a2 - 3) << 9 )
  {
    v3 = 1024;
  }
  return v3;
}

//----- (00417B70) --------------------------------------------------------
signed int __cdecl sub_417B70(int a1, int a2)
{
  signed int v3; // [sp+0h] [bp-4h]@1

  v3 = 0;
  if ( Quote_X_Position - 2048 < (16 * a1 + 4) << 9
    && Quote_X_Position + 2048 > (16 * a1 - 4) << 9
    && Quote_Y_Position - 2048 < (16 * a2 + 3) << 9
    && Quote_Y_Position + 2048 > (16 * a2 - 3) << 9 )
  {
    v3 = 3328;
  }
  return v3;
}

//----- (00417C00) --------------------------------------------------------
signed int __cdecl sub_417C00(int a1, int a2)
{
  signed int v3; // [sp+0h] [bp-4h]@1

  v3 = 0;
  if ( Quote_X_Position - QuoteHitbox_Right < (16 * a1 + 6) << 9
    && QuoteHitbox_Right + Quote_X_Position > (16 * a1 - 6) << 9
    && Quote_Y_Position - QuoteHitbox_Up < (16 * a2 + 6) << 9
    && QuoteHitbox_Down + Quote_Y_Position > (16 * a2 - 6) << 9 )
  {
    v3 = 4096;
  }
  return v3;
}
// 49E680: using guessed type int QuoteHitbox_Up;
// 49E684: using guessed type int QuoteHitbox_Right;
// 49E688: using guessed type int QuoteHitbox_Down;

//----- (00417C90) --------------------------------------------------------
signed int __cdecl sub_417C90(int a1, int a2)
{
  signed int v3; // [sp+0h] [bp-4h]@1

  v3 = 0;
  if ( Quote_X_Position - QuoteHitbox_Right < (16 * a1 + 6) << 9
    && QuoteHitbox_Right + Quote_X_Position > (16 * a1 - 6) << 9
    && Quote_Y_Position - QuoteHitbox_Up < (16 * a2 + 6) << 9
    && QuoteHitbox_Down + Quote_Y_Position > (16 * a2 - 6) << 9 )
  {
    v3 = 0x2000;
  }
  return v3;
}
// 49E680: using guessed type int QuoteHitbox_Up;
// 49E684: using guessed type int QuoteHitbox_Right;
// 49E688: using guessed type int QuoteHitbox_Down;

//----- (00417D20) --------------------------------------------------------
signed int __cdecl sub_417D20(int a1, int a2)
{
  signed int v3; // [sp+0h] [bp-4h]@1

  v3 = 0;
  if ( Quote_X_Position - QuoteHitbox_Right < (16 * a1 + 6) << 9
    && QuoteHitbox_Right + Quote_X_Position > (16 * a1 - 6) << 9
    && Quote_Y_Position - QuoteHitbox_Up < (16 * a2 + 6) << 9
    && QuoteHitbox_Down + Quote_Y_Position > (16 * a2 - 6) << 9 )
  {
    v3 = 0x4000;
  }
  return v3;
}
// 49E680: using guessed type int QuoteHitbox_Up;
// 49E684: using guessed type int QuoteHitbox_Right;
// 49E688: using guessed type int QuoteHitbox_Down;

//----- (00417DB0) --------------------------------------------------------
signed int __cdecl sub_417DB0(int a1, int a2)
{
  signed int v3; // [sp+0h] [bp-4h]@1

  v3 = 0;
  if ( Quote_X_Position - QuoteHitbox_Right < (16 * a1 + 6) << 9
    && QuoteHitbox_Right + Quote_X_Position > (16 * a1 - 6) << 9
    && Quote_Y_Position - QuoteHitbox_Up < (16 * a2 + 6) << 9
    && QuoteHitbox_Down + Quote_Y_Position > (16 * a2 - 6) << 9 )
  {
    v3 = 0x8000;
  }
  return v3;
}
// 49E680: using guessed type int QuoteHitbox_Up;
// 49E684: using guessed type int QuoteHitbox_Right;
// 49E688: using guessed type int QuoteHitbox_Down;

//----- (00417E40) --------------------------------------------------------
int Tile_Code()
{
  int result; // eax@36
  int v1; // [sp+4h] [bp-30h]@1
  int v2; // [sp+8h] [bp-2Ch]@1
  int v3; // [sp+Ch] [bp-28h]@1
  int v4; // [sp+10h] [bp-24h]@1
  char v5[4]; // [sp+14h] [bp-20h]@4
  int i; // [sp+18h] [bp-1Ch]@1
  int v7; // [sp+1Ch] [bp-18h]@1
  int v8; // [sp+20h] [bp-14h]@1
  int v9; // [sp+24h] [bp-10h]@1
  int v10; // [sp+28h] [bp-Ch]@1
  int v11; // [sp+2Ch] [bp-8h]@1
  int v12; // [sp+30h] [bp-4h]@1

  v11 = Quote_X_Position / 16 / 512;
  v12 = Quote_Y_Position / 16 / 512;
  v1 = 0;
  v2 = 1;
  v3 = 0;
  v4 = 1;
  v7 = 0;
  v8 = 0;
  v9 = 1;
  v10 = 1;
  for ( i = 0; i < 4; ++i )
  {
    v5[i] = sub_4139A0(*(&v1 + i) + v11, *(&v7 + i) + v12);
    switch ( v5[i] )
    {
      case 5:
      case 0x41:
      case 0x43:
      case 0x46:
        Tile_On_Which_Quote_Is |= sub_416E30(*(&v1 + i) + v11, *(&v7 + i) + v12);
        break;
      case 0x50:
        Tile_On_Which_Quote_Is |= sub_4171D0(*(&v1 + i) + v11, *(&v7 + i) + v12);
        break;
      case 0x51:
        Tile_On_Which_Quote_Is |= sub_4172E0(*(&v1 + i) + v11, *(&v7 + i) + v12);
        break;
      case 0x52:
        Tile_On_Which_Quote_Is |= sub_4173F0(*(&v1 + i) + v11, *(&v7 + i) + v12);
        break;
      case 0x53:
        Tile_On_Which_Quote_Is |= sub_417500(*(&v1 + i) + v11, *(&v7 + i) + v12);
        break;
      case 0x54:
        Tile_On_Which_Quote_Is |= sub_417610(*(&v1 + i) + v11, *(&v7 + i) + v12);
        break;
      case 0x55:
        Tile_On_Which_Quote_Is |= sub_417720(*(&v1 + i) + v11, *(&v7 + i) + v12);
        break;
      case 0x56:
        Tile_On_Which_Quote_Is |= sub_417830(*(&v1 + i) + v11, *(&v7 + i) + v12);
        break;
      case 0x57:
        Tile_On_Which_Quote_Is |= sub_417940(*(&v1 + i) + v11, *(&v7 + i) + v12);
        break;
      case 0x42:
        Tile_On_Which_Quote_Is |= sub_417AE0(*(&v1 + i) + v11, *(&v7 + i) + v12);
        break;
      case 0x62:
        Tile_On_Which_Quote_Is |= sub_417B70(*(&v1 + i) + v11, *(&v7 + i) + v12);
        break;
      case 0x80:
        Tile_On_Which_Quote_Is |= sub_417C00(*(&v1 + i) + v11, *(&v7 + i) + v12);
        break;
      case 0x81:
        Tile_On_Which_Quote_Is |= sub_417C90(*(&v1 + i) + v11, *(&v7 + i) + v12);
        break;
      case 0x82:
        Tile_On_Which_Quote_Is |= sub_417D20(*(&v1 + i) + v11, *(&v7 + i) + v12);
        break;
      case 0x83:
        Tile_On_Which_Quote_Is |= sub_417DB0(*(&v1 + i) + v11, *(&v7 + i) + v12);
        break;
      case 2:
        Tile_On_Which_Quote_Is |= sub_417A50(*(&v1 + i) + v11, *(&v7 + i) + v12);
        break;
      case 0x60:
        Tile_On_Which_Quote_Is |= sub_417A50(*(&v1 + i) + v11, *(&v7 + i) + v12);
        break;
      case 0x61:
        Tile_On_Which_Quote_Is |= sub_416E30(*(&v1 + i) + v11, *(&v7 + i) + v12);
        Tile_On_Which_Quote_Is |= sub_417A50(*(&v1 + i) + v11, *(&v7 + i) + v12);
        break;
      case 0x70:
        Tile_On_Which_Quote_Is |= sub_4171D0(*(&v1 + i) + v11, *(&v7 + i) + v12);
        Tile_On_Which_Quote_Is |= sub_417A50(*(&v1 + i) + v11, *(&v7 + i) + v12);
        break;
      case 0x71:
        Tile_On_Which_Quote_Is |= sub_4172E0(*(&v1 + i) + v11, *(&v7 + i) + v12);
        Tile_On_Which_Quote_Is |= sub_417A50(*(&v1 + i) + v11, *(&v7 + i) + v12);
        break;
      case 0x72:
        Tile_On_Which_Quote_Is |= sub_4173F0(*(&v1 + i) + v11, *(&v7 + i) + v12);
        Tile_On_Which_Quote_Is |= sub_417A50(*(&v1 + i) + v11, *(&v7 + i) + v12);
        break;
      case 0x73:
        Tile_On_Which_Quote_Is |= sub_417500(*(&v1 + i) + v11, *(&v7 + i) + v12);
        Tile_On_Which_Quote_Is |= sub_417A50(*(&v1 + i) + v11, *(&v7 + i) + v12);
        break;
      case 0x74:
        Tile_On_Which_Quote_Is |= sub_417610(*(&v1 + i) + v11, *(&v7 + i) + v12);
        Tile_On_Which_Quote_Is |= sub_417A50(*(&v1 + i) + v11, *(&v7 + i) + v12);
        break;
      case 0x75:
        Tile_On_Which_Quote_Is |= sub_417720(*(&v1 + i) + v11, *(&v7 + i) + v12);
        Tile_On_Which_Quote_Is |= sub_417A50(*(&v1 + i) + v11, *(&v7 + i) + v12);
        break;
      case 0x76:
        Tile_On_Which_Quote_Is |= sub_417830(*(&v1 + i) + v11, *(&v7 + i) + v12);
        Tile_On_Which_Quote_Is |= sub_417A50(*(&v1 + i) + v11, *(&v7 + i) + v12);
        break;
      case 0x77:
        Tile_On_Which_Quote_Is |= sub_417940(*(&v1 + i) + v11, *(&v7 + i) + v12);
        Tile_On_Which_Quote_Is |= sub_417A50(*(&v1 + i) + v11, *(&v7 + i) + v12);
        break;
      case 0xA0:
        Tile_On_Which_Quote_Is |= sub_417C00(*(&v1 + i) + v11, *(&v7 + i) + v12);
        Tile_On_Which_Quote_Is |= sub_417A50(*(&v1 + i) + v11, *(&v7 + i) + v12);
        break;
      case 0xA1:
        Tile_On_Which_Quote_Is |= sub_417C90(*(&v1 + i) + v11, *(&v7 + i) + v12);
        Tile_On_Which_Quote_Is |= sub_417A50(*(&v1 + i) + v11, *(&v7 + i) + v12);
        break;
      case 0xA2:
        Tile_On_Which_Quote_Is |= sub_417D20(*(&v1 + i) + v11, *(&v7 + i) + v12);
        Tile_On_Which_Quote_Is |= sub_417A50(*(&v1 + i) + v11, *(&v7 + i) + v12);
        break;
      case 0xA3:
        Tile_On_Which_Quote_Is |= sub_417DB0(*(&v1 + i) + v11, *(&v7 + i) + v12);
        Tile_On_Which_Quote_Is |= sub_417A50(*(&v1 + i) + v11, *(&v7 + i) + v12);
        break;
      default:
        continue;
    }
  }
  result = GlobalWaterDepth + 2048;
  if ( Quote_Y_Position > GlobalWaterDepth + 2048 )
    Tile_On_Which_Quote_Is |= 0x100u;
  return result;
}
// 499C90: using guessed type int GlobalWaterDepth;
// 49E63C: using guessed type int Tile_On_Which_Quote_Is;
// 417E40: using guessed type char var_20[4];

//----- (004187F0) --------------------------------------------------------
signed int __cdecl sub_4187F0(int a1)
{
  signed int v2; // [sp+0h] [bp-4h]@1

  v2 = 0;
  if ( Quote_Y_Position - QuoteHitbox_Up < *(_DWORD *)(a1 + 12) + *(_DWORD *)(a1 + 136) - 1536
    && QuoteHitbox_Down + Quote_Y_Position > *(_DWORD *)(a1 + 12) - *(_DWORD *)(a1 + 128) + 1536
    && Quote_X_Position - QuoteHitbox_Right < *(_DWORD *)(a1 + 132) + *(_DWORD *)(a1 + 8)
    && Quote_X_Position - QuoteHitbox_Right > *(_DWORD *)(a1 + 8) )
  {
    if ( Quote_X_Velocity < 512 )
      Quote_X_Velocity += 512;
    v2 = 1;
  }
  if ( Quote_Y_Position - QuoteHitbox_Up < *(_DWORD *)(a1 + 12) + *(_DWORD *)(a1 + 136) - 1536
    && QuoteHitbox_Down + Quote_Y_Position > *(_DWORD *)(a1 + 12) - *(_DWORD *)(a1 + 128) + 1536
    && Quote_X_Position + QuoteHitbox_Right - 512 > *(_DWORD *)(a1 + 8) - *(_DWORD *)(a1 + 132)
    && Quote_X_Position + QuoteHitbox_Right - 512 < *(_DWORD *)(a1 + 8) )
  {
    if ( Quote_X_Velocity > -512 )
      Quote_X_Velocity -= 512;
    v2 |= 4u;
  }
  if ( Quote_X_Position - QuoteHitbox_Right < *(_DWORD *)(a1 + 8) + *(_DWORD *)(a1 + 132) - 1536
    && QuoteHitbox_Right + Quote_X_Position > *(_DWORD *)(a1 + 8) - *(_DWORD *)(a1 + 132) + 1536
    && Quote_Y_Position - QuoteHitbox_Up < *(_DWORD *)(a1 + 136) + *(_DWORD *)(a1 + 12)
    && Quote_Y_Position - QuoteHitbox_Up > *(_DWORD *)(a1 + 12) )
  {
    if ( Quote_Y_Velocity < 0 )
      Quote_Y_Velocity = 0;
    v2 |= 2u;
  }
  if ( Quote_X_Position - QuoteHitbox_Right < *(_DWORD *)(a1 + 8) + *(_DWORD *)(a1 + 132) - 1536
    && QuoteHitbox_Right + Quote_X_Position > *(_DWORD *)(a1 + 8) - *(_DWORD *)(a1 + 132) + 1536
    && QuoteHitbox_Down + Quote_Y_Position > *(_DWORD *)(a1 + 12) - *(_DWORD *)(a1 + 128)
    && QuoteHitbox_Down + Quote_Y_Position < *(_DWORD *)(a1 + 12) + 1536 )
  {
    if ( *(_WORD *)(a1 + 80) & 0x10 )
    {
      Quote_Y_Velocity = *(_DWORD *)(a1 + 20) - 512;
      v2 |= 8u;
    }
    else if ( !(Tile_On_Which_Quote_Is & 8) && Quote_Y_Velocity > *(_DWORD *)(a1 + 20) )
    {
      Quote_Y_Position = *(_DWORD *)(a1 + 12) - *(_DWORD *)(a1 + 128) - QuoteHitbox_Down + 512;
      Quote_Y_Velocity = *(_DWORD *)(a1 + 20);
      Quote_X_Position += *(_DWORD *)(a1 + 16);
      v2 |= 8u;
    }
  }
  return v2;
}
// 49E63C: using guessed type int Tile_On_Which_Quote_Is;
// 49E66C: using guessed type int Quote_X_Velocity;
// 49E670: using guessed type int Quote_Y_Velocity;
// 49E680: using guessed type int QuoteHitbox_Up;
// 49E684: using guessed type int QuoteHitbox_Right;
// 49E688: using guessed type int QuoteHitbox_Down;

//----- (00418B10) --------------------------------------------------------
char __cdecl sub_418B10(int a1)
{
  if ( *(_DWORD *)(a1 + 76) )
  {
    if ( Quote_X_Position + 1024 > *(_DWORD *)(a1 + 8) - *(_DWORD *)(a1 + 132)
      && Quote_X_Position - 1024 < *(_DWORD *)(a1 + 124) + *(_DWORD *)(a1 + 8)
      && Quote_Y_Position + 1024 > *(_DWORD *)(a1 + 12) - *(_DWORD *)(a1 + 128)
      && Quote_Y_Position - 1024 < *(_DWORD *)(a1 + 136) + *(_DWORD *)(a1 + 12) )
    {
      return 1;
    }
  }
  else if ( Quote_X_Position + 1024 > *(_DWORD *)(a1 + 8) - *(_DWORD *)(a1 + 124)
         && Quote_X_Position - 1024 < *(_DWORD *)(a1 + 132) + *(_DWORD *)(a1 + 8)
         && Quote_Y_Position + 1024 > *(_DWORD *)(a1 + 12) - *(_DWORD *)(a1 + 128)
         && Quote_Y_Position - 1024 < *(_DWORD *)(a1 + 136) + *(_DWORD *)(a1 + 12) )
  {
    return 1;
  }
  return 0;
}

//----- (00418C20) --------------------------------------------------------
signed int __cdecl sub_418C20(int a1)
{
  float v1; // ST1C_4@11
  float v3; // [sp+10h] [bp-14h]@7
  signed int v4; // [sp+18h] [bp-Ch]@1
  float v5; // [sp+1Ch] [bp-8h]@5
  float v6; // [sp+20h] [bp-4h]@2

  v4 = 0;
  if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
    v6 = (long double)(Quote_X_Position - *(_DWORD *)(a1 + 8));
  else
    v6 = (long double)(*(_DWORD *)(a1 + 8) - Quote_X_Position);
  if ( *(_DWORD *)(a1 + 12) <= Quote_Y_Position )
    v5 = (long double)(Quote_Y_Position - *(_DWORD *)(a1 + 12));
  else
    v5 = (long double)(*(_DWORD *)(a1 + 12) - Quote_Y_Position);
  v3 = (long double)*(signed int *)(a1 + 132);
  if ( v6 == 0.0 )
    v6 = 1.0;
  if ( v3 == 0.0 )
    v3 = 1.0;
  v1 = (long double)*(signed int *)(a1 + 128);
  if ( v1 / v3 >= v5 / v6 )
  {
    if ( Quote_Y_Position - QuoteHitbox_Up < *(_DWORD *)(a1 + 136) + *(_DWORD *)(a1 + 12)
      && QuoteHitbox_Down + Quote_Y_Position > *(_DWORD *)(a1 + 12) - *(_DWORD *)(a1 + 128) )
    {
      if ( Quote_X_Position - QuoteHitbox_Right < *(_DWORD *)(a1 + 132) + *(_DWORD *)(a1 + 8)
        && Quote_X_Position - QuoteHitbox_Right > *(_DWORD *)(a1 + 8) )
      {
        if ( Quote_X_Velocity < *(_DWORD *)(a1 + 16) )
          Quote_X_Velocity = *(_DWORD *)(a1 + 16);
        Quote_X_Position = QuoteHitbox_Right + *(_DWORD *)(a1 + 132) + *(_DWORD *)(a1 + 8);
        v4 = 1;
      }
      if ( QuoteHitbox_Right + Quote_X_Position > *(_DWORD *)(a1 + 8) - *(_DWORD *)(a1 + 132)
        && QuoteHitbox_Right + Quote_X_Position < *(_DWORD *)(a1 + 8) )
      {
        if ( Quote_X_Velocity > *(_DWORD *)(a1 + 16) )
          Quote_X_Velocity = *(_DWORD *)(a1 + 16);
        Quote_X_Position = *(_DWORD *)(a1 + 8) - *(_DWORD *)(a1 + 132) - QuoteHitbox_Right;
        v4 |= 4u;
      }
    }
  }
  else if ( Quote_X_Position - QuoteHitbox_Right < *(_DWORD *)(a1 + 132) + *(_DWORD *)(a1 + 8)
         && QuoteHitbox_Right + Quote_X_Position > *(_DWORD *)(a1 + 8) - *(_DWORD *)(a1 + 132) )
  {
    if ( Quote_Y_Position - QuoteHitbox_Up < *(_DWORD *)(a1 + 136) + *(_DWORD *)(a1 + 12)
      && Quote_Y_Position - QuoteHitbox_Up > *(_DWORD *)(a1 + 12) )
    {
      if ( Quote_Y_Velocity >= *(_DWORD *)(a1 + 20) )
      {
        if ( Quote_Y_Velocity < 0 )
          Quote_Y_Velocity = 0;
      }
      else
      {
        Quote_Y_Position = *(_DWORD *)(a1 + 136) + *(_DWORD *)(a1 + 12) + QuoteHitbox_Up + 512;
        Quote_Y_Velocity = *(_DWORD *)(a1 + 20);
      }
      v4 = 2;
    }
    if ( QuoteHitbox_Down + Quote_Y_Position > *(_DWORD *)(a1 + 12) - *(_DWORD *)(a1 + 128)
      && QuoteHitbox_Down + Quote_Y_Position < *(_DWORD *)(a1 + 12) + 1536 )
    {
      if ( Quote_Y_Velocity - *(_DWORD *)(a1 + 20) > 1024 )
        Play_Sound_Effect(23, 1);
      if ( InFishBattle == 1 )
      {
        Quote_Y_Position = *(_DWORD *)(a1 + 12) - *(_DWORD *)(a1 + 128) - QuoteHitbox_Down + 512;
        v4 |= 8u;
      }
      else if ( *(_WORD *)(a1 + 80) & 0x10 )
      {
        Quote_Y_Velocity = *(_DWORD *)(a1 + 20) - 512;
        v4 |= 8u;
      }
      else if ( !(Tile_On_Which_Quote_Is & 8) && Quote_Y_Velocity > *(_DWORD *)(a1 + 20) )
      {
        Quote_Y_Position = *(_DWORD *)(a1 + 12) - *(_DWORD *)(a1 + 128) - QuoteHitbox_Down + 512;
        Quote_Y_Velocity = *(_DWORD *)(a1 + 20);
        Quote_X_Position += *(_DWORD *)(a1 + 16);
        v4 |= 8u;
      }
    }
  }
  return v4;
}
// 49E63C: using guessed type int Tile_On_Which_Quote_Is;
// 49E64C: using guessed type int InFishBattle;
// 49E66C: using guessed type int Quote_X_Velocity;
// 49E670: using guessed type int Quote_Y_Velocity;
// 49E680: using guessed type int QuoteHitbox_Up;
// 49E684: using guessed type int QuoteHitbox_Right;
// 49E688: using guessed type int QuoteHitbox_Down;

//----- (00419030) --------------------------------------------------------
char sub_419030()
{
  signed int v0; // eax@1
  signed int v1; // eax@11
  signed int v3; // [sp+0h] [bp-8h]@9
  signed int i; // [sp+4h] [bp-4h]@4

  LOBYTE(v0) = *(_BYTE *)&Player_Flags & 0x80;
  if ( *(_BYTE *)&Player_Flags & 0x80 && !(*(_BYTE *)&Player_Flags & 2) )
  {
    for ( i = 0; i < 512; ++i )
    {
      LOBYTE(v0) = -84 * i;
      if ( *((_BYTE *)&Is_NPC_Alive + 172 * i) & 0x80 )
      {
        if ( NPC_Flags[86 * i] & 1 )
        {
          v0 = sub_4187F0((int)&Is_NPC_Alive + 172 * i);
          v3 = v0;
          Tile_On_Which_Quote_Is |= v0;
        }
        else if ( NPC_Flags[86 * i] & 0x40 )
        {
          v1 = sub_418C20((int)&Is_NPC_Alive + 172 * i);
          v3 = v1;
          v0 = v1 | Tile_On_Which_Quote_Is;
          Tile_On_Which_Quote_Is = v0;
        }
        else
        {
          LOBYTE(v0) = sub_418B10((int)&Is_NPC_Alive + 172 * i);
          v3 = (unsigned __int8)v0;
        }
        if ( v3 )
        {
          LOBYTE(v0) = -84 * i;
          if ( NPC_Type[43 * i] == 1 )
          {
            Play_Sound_Effect(14, 1);
            EXP_Add(NPC_EXP_Health_Missiles_Dropped[43 * i]);
            LOBYTE(v0) = -84 * i;
            *((_BYTE *)&Is_NPC_Alive + 172 * i) = 0;
          }
        }
        if ( v3 && NPC_Type[43 * i] == 86 )
        {
          Play_Sound_Effect(42, 1);
          sub_419BA0(NPC_Event_Number[43 * i], NPC_EXP_Health_Missiles_Dropped[43 * i]);
          LOBYTE(v0) = -84 * i;
          *((_BYTE *)&Is_NPC_Alive + 172 * i) = 0;
        }
        if ( v3 && NPC_Type[43 * i] == 87 )
        {
          Play_Sound_Effect(20, 1);
          LOBYTE(v0) = TSC_LIplus(NPC_EXP_Health_Missiles_Dropped[43 * i]);
          *((_BYTE *)&Is_NPC_Alive + 172 * i) = 0;
        }
        if ( !(Game_State & 4) )
        {
          if ( v3 )
          {
            LOBYTE(v0) = -84 * i;
            if ( NPC_Flags[86 * i] & 0x100 )
              LOBYTE(v0) = Call_TSC_Event(NPC_Event_Number[43 * i]);
          }
        }
        if ( Game_State & 2 )
        {
          LOWORD(v0) = NPC_Flags[86 * i] & 0x2000;
          if ( !(_WORD)v0 )
          {
            if ( NPC_Flags[86 * i] & 0x80 )
            {
              if ( v3 & 4 && NPC_X_Velocity[43 * i] < 0 )
                Take_Damage(NPC_Damage_On_Contact[43 * i]);
              if ( v3 & 1 && NPC_X_Velocity[43 * i] > 0 )
                Take_Damage(NPC_Damage_On_Contact[43 * i]);
              if ( v3 & 8 && NPC_Y_Velocity[43 * i] < 0 )
                Take_Damage(NPC_Damage_On_Contact[43 * i]);
              LOBYTE(v0) = v3 & 2;
              if ( v3 & 2 && NPC_Y_Velocity[43 * i] > 0 )
                LOBYTE(v0) = Take_Damage(NPC_Damage_On_Contact[43 * i]);
            }
            else if ( v3 && NPC_Damage_On_Contact[43 * i] && !(Game_State & 4) )
            {
              LOBYTE(v0) = Take_Damage(NPC_Damage_On_Contact[43 * i]);
            }
          }
        }
        if ( !(Game_State & 4) )
        {
          if ( v3 )
          {
            LOBYTE(v0) = *(_BYTE *)&Player_Flags & 1;
            if ( *(_BYTE *)&Player_Flags & 1 )
            {
              if ( NPC_Flags[86 * i] & 0x2000 )
              {
                LOBYTE(v0) = Call_TSC_Event(NPC_Event_Number[43 * i]);
                Quote_X_Velocity = 0;
                byte_49E6E5 = 0;
              }
            }
          }
        }
      }
    }
    if ( byte_49E6E5 )
      LOBYTE(v0) = Create_Animated_Effect(Quote_X_Position, Quote_Y_Position, 9, 0);
  }
  return v0;
}
// 49E1E8: using guessed type int Game_State;
// 49E63C: using guessed type int Tile_On_Which_Quote_Is;
// 49E66C: using guessed type int Quote_X_Velocity;
// 49E6E5: using guessed type char byte_49E6E5;
// 4A6230: using guessed type int NPC_X_Velocity[];
// 4A6234: using guessed type int NPC_Y_Velocity[];
// 4A6248: using guessed type int NPC_Type[];
// 4A6250: using guessed type int NPC_Event_Number[];
// 4A6264: using guessed type int NPC_EXP_Health_Missiles_Dropped[];
// 4A6270: using guessed type __int16 NPC_Flags[];
// 4A62C4: using guessed type int NPC_Damage_On_Contact[];

//----- (00419450) --------------------------------------------------------
int sub_419450()
{
  int result; // eax@1
  signed int i; // [sp+0h] [bp-8h]@4
  signed int v2; // [sp+4h] [bp-4h]@9

  result = *(_BYTE *)&Player_Flags & 0x80;
  if ( *(_BYTE *)&Player_Flags & 0x80 && !(*(_BYTE *)&Player_Flags & 2) )
  {
    for ( i = 0; i < 20; ++i )
    {
      result = 172 * i;
      if ( *((_BYTE *)&byte_4BBA58 + 172 * i) & 0x80 )
      {
        if ( word_4BBAA8[86 * i] & 1 )
        {
          v2 = sub_4187F0((int)&byte_4BBA58 + 172 * i);
          Tile_On_Which_Quote_Is |= v2;
        }
        else if ( word_4BBAA8[86 * i] & 0x40 )
        {
          v2 = sub_418C20((int)&byte_4BBA58 + 172 * i);
          Tile_On_Which_Quote_Is |= v2;
        }
        else
        {
          v2 = (unsigned __int8)sub_418B10((int)&byte_4BBA58 + 172 * i);
        }
        if ( !(Game_State & 4) && v2 && word_4BBAA8[86 * i] & 0x100 )
        {
          Call_TSC_Event(dword_4BBA88[43 * i]);
          byte_49E6E5 = 0;
        }
        result = word_4BBAA8[86 * i] & 0x80;
        if ( word_4BBAA8[86 * i] & 0x80 )
        {
          if ( v2 & 4 && dword_4BBA68[43 * i] < 0 )
            result = Take_Damage(dword_4BBAFC[43 * i]);
          if ( v2 & 1 )
          {
            result = 172 * i;
            if ( dword_4BBA68[43 * i] > 0 )
              result = Take_Damage(dword_4BBAFC[43 * i]);
          }
        }
        else if ( v2 )
        {
          result = 172 * i;
          if ( dword_4BBAFC[43 * i] )
          {
            if ( !(Game_State & 4) )
              result = Take_Damage(dword_4BBAFC[43 * i]);
          }
        }
        if ( !(Game_State & 4) && v2 && *(_BYTE *)&Player_Flags & 1 )
        {
          result = 172 * i;
          if ( word_4BBAA8[86 * i] & 0x2000 )
          {
            result = Call_TSC_Event(dword_4BBA88[43 * i]);
            Quote_X_Velocity = 0;
            byte_49E6E5 = 0;
          }
        }
      }
    }
    if ( byte_49E6E5 )
      result = Create_Animated_Effect(Quote_X_Position, Quote_Y_Position, 9, 0);
  }
  return result;
}
// 49E1E8: using guessed type int Game_State;
// 49E63C: using guessed type int Tile_On_Which_Quote_Is;
// 49E66C: using guessed type int Quote_X_Velocity;
// 49E6E5: using guessed type char byte_49E6E5;
// 4BBA68: using guessed type int dword_4BBA68[];
// 4BBA88: using guessed type int dword_4BBA88[];
// 4BBAA8: using guessed type __int16 word_4BBAA8[];
// 4BBAFC: using guessed type int dword_4BBAFC[];

//----- (004196F0) --------------------------------------------------------
int __cdecl EXP_Add(int EXP_To_Add)
{
  int result; // eax@12
  int v2; // [sp+0h] [bp-8h]@1
  int v3; // [sp+4h] [bp-4h]@1

  v2 = WeaponData_Level[5 * SelectedWeaponID] - 1;
  v3 = *((_DWORD *)&WeaponData_ID + 5 * SelectedWeaponID);
  WeaponData_Energy[5 * SelectedWeaponID] += EXP_To_Add;
  if ( v2 == 2 )
  {
    if ( WeaponData_Energy[5 * SelectedWeaponID] >= ROM_WeaponExpTables[3 * v3 + 2] )
    {
      WeaponData_Energy[5 * SelectedWeaponID] = ROM_WeaponExpTables[3 * v3 + 2];
      if ( EquippedItems & 0x80 )
      {
        if ( NumWhimStars < 3 )
          ++NumWhimStars;
      }
    }
  }
  else
  {
    while ( v2 < 2 )
    {
      if ( WeaponData_Energy[5 * SelectedWeaponID] >= *(&ROM_WeaponExpTables[3 * v3] + v2) )
      {
        ++WeaponData_Level[5 * SelectedWeaponID];
        WeaponData_Energy[5 * SelectedWeaponID] = 0;
        if ( *((_DWORD *)&WeaponData_ID + 5 * SelectedWeaponID) != 13 )
        {
          Play_Sound_Effect(27, 1);
          Create_Animated_Effect(Quote_X_Position, Quote_Y_Position, 10, 0);
        }
      }
      ++v2;
    }
  }
  result = 20 * SelectedWeaponID;
  if ( *((_DWORD *)&WeaponData_ID + 5 * SelectedWeaponID) == 13 )
  {
    LvBarFlashesLeft = 10;
  }
  else
  {
    ExpToGained += EXP_To_Add;
    LvBarFlashesLeft = 30;
  }
  return result;
}
// 493660: using guessed type int ROM_WeaponExpTables[];
// 499BCC: using guessed type int WeaponData_Level[];
// 499BD0: using guessed type int WeaponData_Energy[];
// 499C68: using guessed type int SelectedWeaponID;
// 49E650: using guessed type int EquippedItems;
// 49E6C0: using guessed type int LvBarFlashesLeft;
// 49E6C4: using guessed type int ExpToGained;
// 49E6CE: using guessed type __int16 NumWhimStars;

//----- (00419890) --------------------------------------------------------
int ResetSelectedWeapon(void)
{
  int result; // eax@1

  result = 20 * SelectedWeaponID;
  WeaponData_Level[5 * SelectedWeaponID] = 1;
  WeaponData_Energy[5 * SelectedWeaponID] = 0;
  return result;
}
// 499BCC: using guessed type int WeaponData_Level[];
// 499BD0: using guessed type int WeaponData_Energy[];
// 499C68: using guessed type int SelectedWeaponID;

//----- (004198C0) --------------------------------------------------------
bool LevelDownFrom3(void)
{
  return WeaponData_Level[5 * SelectedWeaponID] == 3
      && WeaponData_Energy[5 * SelectedWeaponID] >= dword_493668[3 * *((_DWORD *)&WeaponData_ID + 5 * SelectedWeaponID)];
}
// 493668: using guessed type int dword_493668[];
// 499BCC: using guessed type int WeaponData_Level[];
// 499BD0: using guessed type int WeaponData_Energy[];
// 499C68: using guessed type int SelectedWeaponID;

//----- (00419910) --------------------------------------------------------
int __cdecl Take_Damage(int Damage)
{
  int result; // eax@1

  result = Game_State | 2;
  if ( Game_State | 2 && !Invincibility_Timer )
  {
    Play_Sound_Effect(16, 1);
    *(_BYTE *)&Player_Flags &= 0xFEu;
    Invincibility_Timer = -128;
    if ( InFishBattle != 1 )
      Quote_Y_Velocity = -1024;
    Quote_Health_Current -= Damage;
    if ( EquippedItems & 0x80 && NumWhimStars > 0 )
      --NumWhimStars;
    if ( EquippedItems & 4 )
      WeaponData_Energy[5 * SelectedWeaponID] -= Damage;
    else
      WeaponData_Energy[5 * SelectedWeaponID] -= 2 * Damage;
    while ( WeaponData_Energy[5 * SelectedWeaponID] < 0 )
    {
      if ( WeaponData_Level[5 * SelectedWeaponID] <= 1 )
      {
        WeaponData_Energy[5 * SelectedWeaponID] = 0;
      }
      else
      {
        WeaponData_Energy[5 * SelectedWeaponID] += *(&ROM_WeaponExpTables[3
                                                                        * *((_DWORD *)&WeaponData_ID
                                                                          + 5 * SelectedWeaponID)]
                                                   + --WeaponData_Level[5 * SelectedWeaponID]
                                                   - 1);
        if ( Quote_Health_Current > 0 && *((_DWORD *)&WeaponData_ID + 5 * SelectedWeaponID) != 13 )
          Create_Animated_Effect(Quote_X_Position, Quote_Y_Position, 10, 2);
      }
    }
    sub_425BF0((int)&Quote_X_Position, (int)&Quote_Y_Position, -Damage);
    result = Quote_Health_Current;
    if ( Quote_Health_Current <= 0 )
    {
      Play_Sound_Effect(17, 1);
      *(_BYTE *)&Player_Flags = 0;
      sub_46F150(Quote_X_Position, Quote_Y_Position, 5120, 64);
      result = Call_TSC_Event(40);
    }
  }
  return result;
}
// 493660: using guessed type int ROM_WeaponExpTables[];
// 499BCC: using guessed type int WeaponData_Level[];
// 499BD0: using guessed type int WeaponData_Energy[];
// 499C68: using guessed type int SelectedWeaponID;
// 49E1E8: using guessed type int Game_State;
// 49E64C: using guessed type int InFishBattle;
// 49E650: using guessed type int EquippedItems;
// 49E670: using guessed type int Quote_Y_Velocity;
// 49E6C8: using guessed type char Invincibility_Timer;
// 49E6CC: using guessed type __int16 Quote_Health_Current;
// 49E6CE: using guessed type __int16 NumWhimStars;

//----- (00419B50) --------------------------------------------------------
int sub_419B50()
{
  int result; // eax@3
  signed int i; // [sp+0h] [bp-4h]@1

  for ( i = 0; i < 8; ++i )
  {
    WeaponData_Level[5 * i] = 1;
    WeaponData_Energy[5 * i] = 0;
    result = i + 1;
  }
  return result;
}
// 499BCC: using guessed type int WeaponData_Level[];
// 499BD0: using guessed type int WeaponData_Energy[];

//----- (00419BA0) --------------------------------------------------------
int __cdecl sub_419BA0(int a1, int a2)
{
  int result; // eax@3
  signed int i; // [sp+0h] [bp-4h]@1

  for ( i = 0; i < 8; ++i )
  {
    result = 20 * i;
    if ( *((_DWORD *)&WeaponData_ID + 5 * i) == 5 )
      break;
  }
  if ( i != 8 )
    goto LABEL_15;
  for ( i = 0; i < 8 && *((_DWORD *)&WeaponData_ID + 5 * i) != 10; result = i++ + 1 )
    ;
  if ( i != 8 )
  {
LABEL_15:
    *(_DWORD *)&WeaponData_Ammo[20 * i] += a2;
    result = *(_DWORD *)&WeaponData_Ammo[20 * i];
    if ( result > WeaponData_MaxAmmo[5 * i] )
    {
      result = WeaponData_MaxAmmo[5 * i];
      *(_DWORD *)&WeaponData_Ammo[20 * i] = result;
    }
  }
  return result;
}
// 499BD4: using guessed type int WeaponData_MaxAmmo[];

//----- (00419C60) --------------------------------------------------------
// LI+ : LIfe +
// Restore Health_To_Restore amount of health
int __cdecl TSC_LIplus(__int16 Health_To_Restore)
{
  int result; // eax@1

  Quote_Health_Current += Health_To_Restore;
  result = Quote_Health_Max;
  if ( Quote_Health_Current > Quote_Health_Max )
    Quote_Health_Current = Quote_Health_Max;
  YellowHealthBar = Quote_Health_Current;
  return result;
}
// 49E6CC: using guessed type __int16 Quote_Health_Current;
// 49E6D0: using guessed type __int16 Quote_Health_Max;

//----- (00419CB0) --------------------------------------------------------
// MP+ : Max Life +
// Max health increased by Life_To_Add
int __cdecl TSC_MLplus(__int16 Life_To_Add)
{
  int result; // eax@3

  Quote_Health_Max += Life_To_Add;
  if ( Quote_Health_Max > 232 )
    Quote_Health_Max = 232;
  result = Life_To_Add;
  Quote_Health_Current += Life_To_Add;
  YellowHealthBar = Quote_Health_Current;
  return result;
}
// 49E6CC: using guessed type __int16 Quote_Health_Current;
// 49E6D0: using guessed type __int16 Quote_Health_Max;

//----- (00419D10) --------------------------------------------------------
int __cdecl Render_XP_Bar_And_Misc(int a1)
{
  int result; // eax@9
  int Dst_Rects; // [sp+0h] [bp-90h]@1
  int v3; // [sp+4h] [bp-8Ch]@1
  int v4; // [sp+8h] [bp-88h]@1
  int v5; // [sp+Ch] [bp-84h]@1
  int Src_Rects; // [sp+10h] [bp-80h]@1
  int v7; // [sp+14h] [bp-7Ch]@1
  int v8; // [sp+18h] [bp-78h]@1
  int v9; // [sp+1Ch] [bp-74h]@1
  int v10; // [sp+20h] [bp-70h]@10
  int v11; // [sp+24h] [bp-6Ch]@10
  int v12; // [sp+28h] [bp-68h]@10
  int v13; // [sp+2Ch] [bp-64h]@10
  int v14; // [sp+30h] [bp-60h]@10
  int v15; // [sp+34h] [bp-5Ch]@10
  int v16; // [sp+38h] [bp-58h]@10
  int v17; // [sp+3Ch] [bp-54h]@10
  int v18; // [sp+40h] [bp-50h]@10
  int v19; // [sp+44h] [bp-4Ch]@10
  int v20; // [sp+48h] [bp-48h]@10
  int v21; // [sp+4Ch] [bp-44h]@10
  int v22; // [sp+50h] [bp-40h]@10
  int v23; // [sp+54h] [bp-3Ch]@10
  int v24; // [sp+58h] [bp-38h]@10
  int v25; // [sp+5Ch] [bp-34h]@10
  int v26; // [sp+60h] [bp-30h]@10
  int v27; // [sp+64h] [bp-2Ch]@10
  int v28; // [sp+68h] [bp-28h]@1
  int v29; // [sp+6Ch] [bp-24h]@1
  int v30; // [sp+70h] [bp-20h]@1
  int v31; // [sp+74h] [bp-1Ch]@1
  int v32; // [sp+78h] [bp-18h]@1
  int v33; // [sp+7Ch] [bp-14h]@1
  int v34; // [sp+80h] [bp-10h]@1
  int v35; // [sp+84h] [bp-Ch]@1
  int v36; // [sp+88h] [bp-8h]@10
  int v37; // [sp+8Ch] [bp-4h]@10

  v28 = 72;
  v29 = 48;
  v30 = 80;
  v31 = 56;
  v32 = 80;
  v33 = 80;
  v34 = 96;
  v35 = 88;
  Dst_Rects = 0;
  v3 = 0;
  v4 = 320;
  v5 = 240;
  Src_Rects = 80;
  v7 = 48;
  v8 = 96;
  v9 = 56;
  if ( WeaponIconXOffset > 16 )
    WeaponIconXOffset -= 2;
  if ( WeaponIconXOffset < 16 )
    WeaponIconXOffset += 2;
  if ( WeaponData_MaxAmmo[5 * SelectedWeaponID] )
  {
    Render_Numbers(WeaponIconXOffset + 32, 16, *(_DWORD *)&WeaponData_Ammo[20 * SelectedWeaponID], 0);
    Render_Numbers(WeaponIconXOffset + 32, 24, WeaponData_MaxAmmo[5 * SelectedWeaponID], 0);
  }
  else
  {
    Render_Graphics((int)&Dst_Rects, WeaponIconXOffset + 48, 16, (int)&Src_Rects, 26);
    Render_Graphics((int)&Dst_Rects, WeaponIconXOffset + 48, 24, (int)&Src_Rects, 26);
  }
  if ( a1 != 1 || (result = ((signed int)(unsigned __int8)Invincibility_Timer >> 1) % 2) == 0 )
  {
    Render_Graphics((int)&Dst_Rects, WeaponIconXOffset + 32, 24, (int)&v28, 26);
    Render_Graphics((int)&Dst_Rects, WeaponIconXOffset, 32, (int)&v32, 26);
    Render_Numbers(WeaponIconXOffset - 8, 32, WeaponData_Level[5 * SelectedWeaponID], 0);
    v19 = 0;
    v20 = 72;
    v21 = 40;
    v22 = 80;
    v10 = 0;
    v11 = 80;
    v12 = 0;
    v13 = 88;
    v23 = 40;
    v24 = 72;
    v25 = 80;
    v26 = 80;
    v15 = 40;
    v16 = 80;
    v17 = 80;
    v18 = 88;
    v36 = WeaponData_Level[5 * SelectedWeaponID] - 1;
    v37 = *((_DWORD *)&WeaponData_ID + 5 * SelectedWeaponID);
    v27 = WeaponData_Energy[5 * SelectedWeaponID];
    v14 = *(&ROM_WeaponExpTables[3 * v37] + v36);
    Render_Graphics((int)&Dst_Rects, WeaponIconXOffset + 24, 32, (int)&v19, 26);
    if ( v36 != 2 || WeaponData_Energy[5 * SelectedWeaponID] != ROM_WeaponExpTables[3 * v37 + 2] )
    {
      if ( v14 )
        v12 += 40 * v27 / v14;
      else
        v12 = 0;
      result = Render_Graphics((int)&Dst_Rects, WeaponIconXOffset + 24, 32, (int)&v10, 26);
    }
    else
    {
      result = Render_Graphics((int)&Dst_Rects, WeaponIconXOffset + 24, 32, (int)&v23, 26);
    }
    if ( LvBarFlashesLeft )
    {
      result = ((signed int)(unsigned __int8)byte_49E6F8++ >> 1) % 2;
      if ( result )
        result = Render_Graphics((int)&Dst_Rects, WeaponIconXOffset + 24, 32, (int)&v15, 26);
    }
  }
  return result;
}
// 493660: using guessed type int ROM_WeaponExpTables[];
// 499BCC: using guessed type int WeaponData_Level[];
// 499BD0: using guessed type int WeaponData_Energy[];
// 499BD4: using guessed type int WeaponData_MaxAmmo[];
// 499C68: using guessed type int SelectedWeaponID;
// 49E6C0: using guessed type int LvBarFlashesLeft;
// 49E6C8: using guessed type char Invincibility_Timer;
// 49E6F8: using guessed type char byte_49E6F8;

//----- (0041A0B0) --------------------------------------------------------
int Render_Weapon_Icons()
{
  int result; // eax@2
  int i; // [sp+0h] [bp-1Ch]@1
  int X_Position; // [sp+4h] [bp-18h]@7
  int j; // [sp+8h] [bp-14h]@5
  int Src_Rects; // [sp+Ch] [bp-10h]@1
  int v5; // [sp+10h] [bp-Ch]@1
  int v6; // [sp+14h] [bp-8h]@1
  int v7; // [sp+18h] [bp-4h]@1

  Src_Rects = 0;
  v5 = 0;
  v6 = 0;
  v7 = 16;
  for ( i = 0; ; ++i )
  {
    result = 20 * i;
    if ( !*((_DWORD *)&WeaponData_ID + 5 * i) )
      break;
  }
  if ( i )
  {
    for ( j = 0; ; ++j )
    {
      result = j;
      if ( j >= i )
        break;
      X_Position = WeaponIconXOffset + 16 * (j - SelectedWeaponID);
      if ( X_Position >= 8 )
      {
        if ( X_Position >= 24 )
          X_Position += 48;
      }
      else
      {
        X_Position += 16 * i + 48;
      }
      if ( X_Position >= 16 * (i - 1) + 72 )
        X_Position -= 16 * i + 48;
      if ( X_Position < 72 && X_Position >= 24 )
        X_Position -= 48;
      Src_Rects = 16 * *((_DWORD *)&WeaponData_ID + 5 * j);
      v6 = Src_Rects + 16;
      Render_Graphics((int)&FullscreenRect, X_Position, 16, (int)&Src_Rects, 12);
    }
  }
  return result;
}
// 48F91C: using guessed type int FullscreenRect;
// 499C68: using guessed type int SelectedWeaponID;

//----- (0041A1D0) --------------------------------------------------------
int __cdecl Render_Health_Bar(int a1)
{
  int result; // eax@2
  int Src_Rects; // [sp+0h] [bp-30h]@1
  int v3; // [sp+4h] [bp-2Ch]@1
  int v4; // [sp+8h] [bp-28h]@1
  int v5; // [sp+Ch] [bp-24h]@1
  int v6; // [sp+10h] [bp-20h]@1
  int v7; // [sp+14h] [bp-1Ch]@1
  int v8; // [sp+18h] [bp-18h]@1
  int v9; // [sp+1Ch] [bp-14h]@1
  int v10; // [sp+20h] [bp-10h]@1
  int v11; // [sp+24h] [bp-Ch]@1
  int v12; // [sp+28h] [bp-8h]@1
  int v13; // [sp+2Ch] [bp-4h]@1

  Src_Rects = 0;
  v3 = 40;
  v4 = 232;
  v5 = 48;
  v10 = 0;
  v11 = 24;
  v12 = 232;
  v13 = 32;
  v6 = 0;
  v7 = 32;
  v8 = 232;
  v9 = 40;
  if ( a1 != 1 || (result = ((signed int)(unsigned __int8)Invincibility_Timer >> 1) % 2) == 0 )
  {
    if ( YellowHealthBar < Quote_Health_Current )
      YellowHealthBar = Quote_Health_Current;
    if ( YellowHealthBar <= Quote_Health_Current )
    {
      YellowHealthBarTimer = 0;
    }
    else if ( ++YellowHealthBarTimer > 30 )
    {
      --YellowHealthBar;
    }
    v4 = 64;
    v12 = 40 * Quote_Health_Current / Quote_Health_Max - 1;
    v8 = 40 * YellowHealthBar / Quote_Health_Max - 1;
    Render_Graphics((int)&FullscreenRect, 16, 40, (int)&Src_Rects, 26);
    Render_Graphics((int)&FullscreenRect, 40, 40, (int)&v6, 26);
    Render_Graphics((int)&FullscreenRect, 40, 40, (int)&v10, 26);
    result = Render_Numbers(8, 40, YellowHealthBar, 0);
  }
  return result;
}
// 48F91C: using guessed type int FullscreenRect;
// 49E6C8: using guessed type char Invincibility_Timer;
// 49E6CC: using guessed type __int16 Quote_Health_Current;
// 49E6D0: using guessed type __int16 Quote_Health_Max;
// 49E6D8: using guessed type int YellowHealthBarTimer;

//----- (0041A350) --------------------------------------------------------
int __cdecl Underwater_Timer(int X_Position, int Y_Position)
{
  int result; // eax@1
  int Src_Rects; // [sp+0h] [bp-20h]@1
  int v4; // [sp+4h] [bp-1Ch]@1
  int v5; // [sp+8h] [bp-18h]@1
  int v6; // [sp+Ch] [bp-14h]@1
  int v7; // [sp+10h] [bp-10h]@1
  int v8; // [sp+14h] [bp-Ch]@1
  int v9; // [sp+18h] [bp-8h]@1
  int v10; // [sp+1Ch] [bp-4h]@1

  Src_Rects = 112;
  v4 = 72;
  v5 = 144;
  v6 = 80;
  v7 = 112;
  v8 = 80;
  v9 = 144;
  v10 = 88;
  result = EquippedItems & 0x10;
  if ( !(EquippedItems & 0x10) && dword_49E6E0 )
  {
    if ( dword_49E6E0 % 6 < 4 )
      Render_Numbers(X_Position + 32, Y_Position, Air / 10, 0);
    if ( Air % 30 <= 10 )
      result = Render_Graphics((int)&FullscreenRect, X_Position, Y_Position, (int)&v7, 26);
    else
      result = Render_Graphics((int)&FullscreenRect, X_Position, Y_Position, (int)&Src_Rects, 26);
  }
  return result;
}
// 48F91C: using guessed type int FullscreenRect;
// 49E650: using guessed type int EquippedItems;
// 49E6DC: using guessed type int Air;
// 49E6E0: using guessed type int dword_49E6E0;

//----- (0041A430) --------------------------------------------------------
int __cdecl sub_41A430(int X_Position, int Y_Position)
{
  int result; // eax@1
  int Src_Rects; // [sp+0h] [bp-30h]@1
  int v4; // [sp+4h] [bp-2Ch]@1
  int v5; // [sp+8h] [bp-28h]@1
  int v6; // [sp+Ch] [bp-24h]@1
  int v7; // [sp+10h] [bp-20h]@1
  int v8; // [sp+14h] [bp-1Ch]@1
  int v9; // [sp+18h] [bp-18h]@1
  int v10; // [sp+1Ch] [bp-14h]@1
  int v11; // [sp+20h] [bp-10h]@1
  int v12; // [sp+24h] [bp-Ch]@1
  int v13; // [sp+28h] [bp-8h]@1
  int v14; // [sp+2Ch] [bp-4h]@1

  Src_Rects = 112;
  v4 = 104;
  v5 = 120;
  v6 = 112;
  v7 = 120;
  v8 = 104;
  v9 = 128;
  v10 = 112;
  v11 = 128;
  v12 = 104;
  v13 = 160;
  v14 = 112;
  result = EquippedItems & 0x100;
  if ( EquippedItems & 0x100 )
  {
    if ( Game_State & 2 )
    {
      if ( NikumaruTime < 300000 )
        ++NikumaruTime;
      if ( NikumaruTime % 30 <= 10 )
        Render_Graphics((int)&FullscreenRect, X_Position, Y_Position, (int)&v7, 26);
      else
        Render_Graphics((int)&FullscreenRect, X_Position, Y_Position, (int)&Src_Rects, 26);
    }
    else
    {
      Render_Graphics((int)&FullscreenRect, X_Position, Y_Position, (int)&Src_Rects, 26);
    }
    Render_Numbers(X_Position, Y_Position, NikumaruTime / 3000, 0);
    Render_Numbers(X_Position + 20, Y_Position, NikumaruTime / 50 % 60, 1);
    Render_Numbers(X_Position + 32, Y_Position, NikumaruTime / 5 % 10, 0);
    result = Render_Graphics((int)&FullscreenRect, X_Position + 30, Y_Position, (int)&v11, 26);
  }
  else
  {
    NikumaruTime = 0;
  }
  return result;
}
// 48F91C: using guessed type int FullscreenRect;
// 49E1E8: using guessed type int Game_State;
// 49E650: using guessed type int EquippedItems;
// 49E6F4: using guessed type int NikumaruTime;

//----- (0041A5D0) --------------------------------------------------------
signed int sub_41A5D0()
{
  signed int result; // eax@2
  char v1; // al@8
  char str; // [sp+0h] [bp-130h]@3
  int v3[4]; // [sp+10Ch] [bp-24h]@4
  char v4[4]; // [sp+11Ch] [bp-14h]@4
  int v5; // [sp+120h] [bp-10h]@1
  FILE *stream; // [sp+124h] [bp-Ch]@3
  int i; // [sp+128h] [bp-8h]@6
  int *v8; // [sp+12Ch] [bp-4h]@4

  v5 = dword_498B20;
  if ( EquippedItems & 0x100 )
  {
    sprintf(&str, "%s\\290.rec", FullExePath);
    stream = fopen(&str, "rb");
    if ( stream
      && (sub_480F55((FILE *)v3, 0x14u, 1u, stream),
          fclose(stream),
          v8 = v3,
          LOBYTE(v3[0]) -= v4[0],
          BYTE1(v3[0]) -= v4[0],
          BYTE2(v3[0]) -= v4[0],
          BYTE3(v3[0]) -= (signed int)(unsigned __int8)v4[0] >> 1,
          v3[0] < NikumaruTime) )
    {
      result = 1;
    }
    else
    {
      for ( i = 0; i < 4; ++i )
      {
        v3[i] = NikumaruTime;
        v1 = RNG_Range(0, 250);
        v4[i] = i + v1;
        v8 = &v3[i];
        LOBYTE(v3[i]) += v4[i];
        *((_BYTE *)v8 + 1) += v4[i];
        *((_BYTE *)v8 + 2) += v4[i];
        *((_BYTE *)v8 + 3) += (signed int)(unsigned __int8)v4[i] >> 1;
      }
      stream = fopen(&str, "wb");
      if ( stream )
      {
        sub_481981((FILE *)v3, 0x14u, 1u, stream);
        fclose(stream);
        result = 1;
      }
      else
      {
        result = 0;
      }
    }
  }
  else
  {
    result = 1;
  }
  return result;
}
// 498B20: using guessed type int dword_498B20;
// 49E650: using guessed type int EquippedItems;
// 49E6F4: using guessed type int NikumaruTime;
// 41A5D0: using guessed type int var_24[4];
// 41A5D0: using guessed type char var_14[4];

//----- (0041A7C0) --------------------------------------------------------
// Returns time
int Get_Hell_Time()
{
  int result; // eax@2
  char str; // [sp+0h] [bp-130h]@1
  int v2; // [sp+10Ch] [bp-24h]@3
  int v3; // [sp+110h] [bp-20h]@6
  int v4; // [sp+114h] [bp-1Ch]@7
  char v5[4]; // [sp+11Ch] [bp-14h]@5
  int v6; // [sp+120h] [bp-10h]@1
  FILE *stream; // [sp+124h] [bp-Ch]@1
  int i; // [sp+128h] [bp-8h]@3
  int *v9; // [sp+12Ch] [bp-4h]@5

  v6 = dword_498B20;
  sprintf(&str, "%s\\290.rec", FullExePath);
  stream = fopen(&str, "rb");
  if ( stream )
  {
    sub_480F55((FILE *)&v2, 0x14u, 1u, stream);
    fclose(stream);
    for ( i = 0; i < 4; ++i )
    {
      v9 = &v2 + i;
      *((_BYTE *)&v2 + 4 * i) -= v5[i];
      *((_BYTE *)v9 + 1) -= v5[i];
      *((_BYTE *)v9 + 2) -= v5[i];
      *((_BYTE *)v9 + 3) -= (signed int)(unsigned __int8)v5[i] >> 1;
    }
    if ( v2 == v3 && v2 == v4 )
    {
      NikumaruTime = v2;
      result = v2;
    }
    else
    {
      NikumaruTime = 0;
      result = 0;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}
// 498B20: using guessed type int dword_498B20;
// 49E6F4: using guessed type int NikumaruTime;
// 41A7C0: using guessed type char var_14[4];

//----- (0041A8F0) --------------------------------------------------------
signed int __cdecl sub_41A8F0(int a1, char a2, char a3)
{
  signed int result; // eax@2
  void *v4; // [sp+0h] [bp-60h]@17
  int v5; // [sp+4h] [bp-5Ch]@17
  size_t num; // [sp+8h] [bp-58h]@17
  void *destination; // [sp+Ch] [bp-54h]@17
  size_t v8; // [sp+10h] [bp-50h]@17
  unsigned int i; // [sp+14h] [bp-4Ch]@3
  unsigned int j; // [sp+18h] [bp-48h]@5
  int ptr; // [sp+1Ch] [bp-44h]@10
  int v12; // [sp+20h] [bp-40h]@10
  size_t v13; // [sp+24h] [bp-3Ch]@10
  void *v14; // [sp+2Ch] [bp-34h]@10
  int v15; // [sp+40h] [bp-20h]@1
  size_t size; // [sp+44h] [bp-1Ch]@8
  void *source; // [sp+48h] [bp-18h]@12
  int v18; // [sp+4Ch] [bp-14h]@14
  _BYTE *v19; // [sp+50h] [bp-10h]@12
  size_t k; // [sp+54h] [bp-Ch]@12
  unsigned int v21; // [sp+58h] [bp-8h]@7
  unsigned int v22; // [sp+5Ch] [bp-4h]@12

  v15 = dword_498B20;
  if ( DirectSoundObj )
  {
    for ( i = 0; i < 8; ++i )
    {
      for ( j = 0; j < 2; ++j )
      {
        v21 = word_493708[3 * i];
        if ( a3 )
          size = v21 * word_49370C[3 * i];
        else
          size = v21;
        memset(&ptr, 0, 0x24u);
        ptr = 36;
        v13 = size;
        v14 = &unk_493738;
        v12 = 32994;
        if ( (*((int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))DirectSoundObj->lpVtbl + 3))(
               DirectSoundObj,
               &ptr,
               &dword_4A4B48[16 * a2] + 2 * i + j,
               0) )
        {
          return 0;
        }
        source = malloc(size);
        v19 = source;
        v22 = 0;
        for ( k = 0; k < size; ++k )
        {
          v18 = *(_BYTE *)(v22 + a1);
          v18 += 128;
          *v19 = v18;
          v22 += 0x100 / v21;
          if ( v22 > 0xFF )
            v22 -= 256;
          ++v19;
        }
        v8 = 0;
        v5 = (*(int (__cdecl **)(_DWORD, _DWORD, size_t, void **, size_t *, void **, size_t *, _DWORD))(*(_DWORD *)*(&dword_4A4B48[16 * a2] + 2 * i + j) + 44))(
               *(&dword_4A4B48[16 * a2] + 2 * i + j),
               0,
               size,
               &destination,
               &num,
               &v4,
               &v8,
               0);
        if ( v5 )
          return 0;
        memcpy(destination, source, num);
        if ( v8 )
          memcpy(v4, (char *)source + num, v8);
        (*(void (__cdecl **)(_DWORD, void *, size_t, void *, size_t))(*(_DWORD *)*(&dword_4A4B48[16 * a2] + 2 * i + j)
                                                                    + 76))(
          *(&dword_4A4B48[16 * a2] + 2 * i + j),
          destination,
          num,
          v4,
          v8);
        (*(void (__cdecl **)(_DWORD, _DWORD))(*(_DWORD *)*(&dword_4A4B48[16 * a2] + 2 * i + j) + 52))(
          *(&dword_4A4B48[16 * a2] + 2 * i + j),
          0);
        free(source);
      }
    }
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}
// D: found interdependent unknown calls
// 493708: using guessed type __int16 word_493708[];
// 49370C: using guessed type __int16 word_49370C[];
// 498B20: using guessed type int dword_498B20;
// 4A4B48: using guessed type int dword_4A4B48[];

//----- (0041ABA0) --------------------------------------------------------
int __cdecl sub_41ABA0(unsigned __int8 a1, char a2, int a3)
{
  int result; // eax@7
  __int64 v4; // rax@6
  signed int j; // [sp+0h] [bp-8h]@4
  signed int i; // [sp+4h] [bp-4h]@2

  if ( DirectSoundObj )
  {
    for ( i = 0; i < 8; ++i )
    {
      for ( j = 0; j < 2; ++j )
      {
        v4 = word_49370A[3 * i] * word_49374C[a1] * (signed int)word_493708[3 * i];
        (*(void (__cdecl **)(_DWORD, int))(*(_DWORD *)*(&dword_4A4B48[16 * a2] + 2 * i + j) + 68))(
          *(&dword_4A4B48[16 * a2] + 2 * i + j),
          (((BYTE4(v4) & 7) + (signed int)v4) >> 3) + a3 - 1000);
      }
      result = i + 1;
    }
  }
  return result;
}
// 493708: using guessed type __int16 word_493708[];
// 49370A: using guessed type __int16 word_49370A[];
// 49374C: using guessed type __int16 word_49374C[];
// 4A4B48: using guessed type int dword_4A4B48[];

//----- (0041AC70) --------------------------------------------------------
int __cdecl sub_41AC70(int a1, unsigned __int8 a2, char a3)
{
  int result; // eax@2

  if ( DirectSoundObj )
  {
    result = a3;
    if ( *((_BYTE *)&byte_493780 + a3) != 255 )
      result = (*(int (__stdcall **)(_DWORD, int))(*(_DWORD *)*(&dword_4A4B48[16 * a3]
                                                              + 2 * (*((_BYTE *)&byte_493780 + a3) / 12)
                                                              + *((_BYTE *)&byte_4A4D98 + a3))
                                                 + 64))(
                 *(&dword_4A4B48[16 * a3] + 2 * (*((_BYTE *)&byte_493780 + a3) / 12) + *((_BYTE *)&byte_4A4D98 + a3)),
                 10 * (word_493764[a2] - 256));
  }
  return result;
}
// 493764: using guessed type __int16 word_493764[];
// 4A4B48: using guessed type int dword_4A4B48[];

//----- (0041AD20) --------------------------------------------------------
int __cdecl sub_41AD20(int a1, int a2, char a3)
{
  int result; // eax@2

  if ( DirectSoundObj )
  {
    result = a3;
    if ( *((_BYTE *)&byte_493780 + a3) != 255 )
      result = (*(int (__stdcall **)(_DWORD, int))(*(_DWORD *)*(&dword_4A4B48[16 * a3]
                                                              + 2 * (*((_BYTE *)&byte_493780 + a3) / 12)
                                                              + *((_BYTE *)&byte_4A4D98 + a3))
                                                 + 60))(
                 *(&dword_4A4B48[16 * a3] + 2 * (*((_BYTE *)&byte_493780 + a3) / 12) + *((_BYTE *)&byte_4A4D98 + a3)),
                 8 * a2 - 2040);
  }
  return result;
}
// 4A4B48: using guessed type int dword_4A4B48[];

//----- (0041ADC0) --------------------------------------------------------
int __cdecl sub_41ADC0(unsigned __int8 a1, int a2, char a3, int a4)
{
  int result; // eax@2

  if ( DirectSoundObj )
  {
    result = a3;
    if ( *(&dword_4A4B48[16 * a3] + 2 * (a1 / 12) + *((_BYTE *)&byte_4A4D98 + a3)) )
    {
      if ( a2 == -1 )
      {
        if ( *((_BYTE *)&byte_493780 + a3) == 255 )
        {
          sub_41ABA0(a1 % 12, a3, a4);
          (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, signed int))(*(_DWORD *)*(&dword_4A4B48[16 * a3]
                                                                               + 2 * (a1 / 12)
                                                                               + *((_BYTE *)&byte_4A4D98 + a3))
                                                                  + 48))(
            *(&dword_4A4B48[16 * a3] + 2 * (a1 / 12) + *((_BYTE *)&byte_4A4D98 + a3)),
            0,
            0,
            1);
          *((_BYTE *)&byte_493780 + a3) = a1;
          result = a3;
          *((_BYTE *)&byte_4A4D88 + a3) = 1;
        }
        else if ( *((_BYTE *)&byte_4A4D88 + a3) != 1 || *((_BYTE *)&byte_493780 + a3) != a1 )
        {
          (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)*(&dword_4A4B48[16 * a3]
                                                                           + 2 * (*((_BYTE *)&byte_493780 + a3) / 12)
                                                                           + *((_BYTE *)&byte_4A4D98 + a3))
                                                              + 48))(
            *(&dword_4A4B48[16 * a3] + 2 * (*((_BYTE *)&byte_493780 + a3) / 12) + *((_BYTE *)&byte_4A4D98 + a3)),
            0,
            0,
            0);
          if ( (signed int)++*((_BYTE *)&byte_4A4D98 + a3) > 1 )
            *((_BYTE *)&byte_4A4D98 + a3) = 0;
          sub_41ABA0(a1 % 12, a3, a4);
          result = (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD, signed int))(*(_DWORD *)*(&dword_4A4B48[16 * a3]
                                                                                       + 2 * (a1 / 12)
                                                                                       + *((_BYTE *)&byte_4A4D98 + a3))
                                                                          + 48))(
                     *(&dword_4A4B48[16 * a3] + 2 * (a1 / 12) + *((_BYTE *)&byte_4A4D98 + a3)),
                     0,
                     0,
                     1);
          *((_BYTE *)&byte_493780 + a3) = a1;
        }
        else
        {
          (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)*(&dword_4A4B48[16 * a3]
                                                                           + 2 * (*((_BYTE *)&byte_493780 + a3) / 12)
                                                                           + *((_BYTE *)&byte_4A4D98 + a3))
                                                              + 48))(
            *(&dword_4A4B48[16 * a3] + 2 * (*((_BYTE *)&byte_493780 + a3) / 12) + *((_BYTE *)&byte_4A4D98 + a3)),
            0,
            0,
            0);
          if ( (signed int)++*((_BYTE *)&byte_4A4D98 + a3) > 1 )
            *((_BYTE *)&byte_4A4D98 + a3) = 0;
          result = (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD, signed int))(*(_DWORD *)*(&dword_4A4B48[16 * a3]
                                                                                       + 2 * (a1 / 12)
                                                                                       + *((_BYTE *)&byte_4A4D98 + a3))
                                                                          + 48))(
                     *(&dword_4A4B48[16 * a3] + 2 * (a1 / 12) + *((_BYTE *)&byte_4A4D98 + a3)),
                     0,
                     0,
                     1);
        }
      }
      else if ( a2 )
      {
        if ( a2 == 2 && *((_BYTE *)&byte_493780 + a3) != 255 )
        {
          result = (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)*(&dword_4A4B48[16 * a3]
                                                                                   + 2
                                                                                   * (*((_BYTE *)&byte_493780 + a3)
                                                                                    / 12)
                                                                                   + *((_BYTE *)&byte_4A4D98 + a3))
                                                                      + 48))(
                     *(&dword_4A4B48[16 * a3] + 2 * (*((_BYTE *)&byte_493780 + a3) / 12) + *((_BYTE *)&byte_4A4D98 + a3)),
                     0,
                     0,
                     0);
          *((_BYTE *)&byte_493780 + a3) = -1;
        }
      }
      else
      {
        result = a3;
        if ( *((_BYTE *)&byte_493780 + a3) != 255 )
        {
          (*(void (__cdecl **)(_DWORD))(*(_DWORD *)*(&dword_4A4B48[16 * a3]
                                                   + 2 * (*((_BYTE *)&byte_493780 + a3) / 12)
                                                   + *((_BYTE *)&byte_4A4D98 + a3))
                                      + 72))(*(&dword_4A4B48[16 * a3]
                                             + 2 * (*((_BYTE *)&byte_493780 + a3) / 12)
                                             + *((_BYTE *)&byte_4A4D98 + a3)));
          result = (*(int (__cdecl **)(_DWORD, _DWORD))(*(_DWORD *)*(&dword_4A4B48[16 * a3]
                                                                   + 2 * (*((_BYTE *)&byte_493780 + a3) / 12)
                                                                   + *((_BYTE *)&byte_4A4D98 + a3))
                                                      + 52))(
                     *(&dword_4A4B48[16 * a3] + 2 * (*((_BYTE *)&byte_493780 + a3) / 12) + *((_BYTE *)&byte_4A4D98 + a3)),
                     0);
        }
      }
    }
  }
  return result;
}
// 4A4B48: using guessed type int dword_4A4B48[];

//----- (0041B2A0) --------------------------------------------------------
int __cdecl sub_41B2A0(char a1)
{
  int result; // eax@8
  signed int i; // [sp+0h] [bp-4h]@2

  if ( DirectSoundObj )
  {
    for ( i = 0; i < 8; ++i )
    {
      if ( *(&dword_4A4B48[16 * a1] + 2 * i) )
      {
        (*(void (__cdecl **)(_DWORD))(*(_DWORD *)*(&dword_4A4B48[16 * a1] + 2 * i) + 8))(*(&dword_4A4B48[16 * a1] + 2 * i));
        *(&dword_4A4B48[16 * a1] + 2 * i) = 0;
      }
      if ( *(&dword_4A4B4C[16 * a1] + 2 * i) )
      {
        (*(void (__cdecl **)(_DWORD))(*(_DWORD *)*(&dword_4A4B4C[16 * a1] + 2 * i) + 8))(*(&dword_4A4B4C[16 * a1] + 2 * i));
        *(&dword_4A4B4C[16 * a1] + 2 * i) = 0;
      }
      result = i + 1;
    }
  }
  return result;
}
// 4A4B48: using guessed type int dword_4A4B48[];
// 4A4B4C: using guessed type int dword_4A4B4C[];

//----- (0041B380) --------------------------------------------------------
signed int sub_41B380()
{
  signed int result; // eax@2
  HGLOBAL v1; // eax@5
  void *source; // ST10_4@5
  HRSRC hResInfo; // [sp+0h] [bp-8h]@3

  if ( DirectSoundObj )
  {
    hResInfo = FindResourceA(0, "WAVE100", "WAVE");
    if ( hResInfo )
    {
      v1 = LoadResource(0, hResInfo);
      source = LockResource(v1);
      memcpy(&destination, source, 0x6400u);
      result = 1;
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (0041B3F0) --------------------------------------------------------
signed int __cdecl sub_41B3F0(char a1, char a2, char a3)
{
  signed int result; // eax@2

  if ( DirectSoundObj )
  {
    if ( a2 <= 99 )
    {
      sub_41B2A0(a1);
      sub_41A8F0((int)&destination + 256 * a2, a1, a3);
      result = 1;
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (0041B440) --------------------------------------------------------
int __cdecl sub_41B440(unsigned __int8 a1, char a2)
{
  int result; // eax@2

  if ( DirectSoundObj )
    result = (*(int (__stdcall **)(int, int))(*(_DWORD *)dword_4A57C0[a2] + 68))(dword_4A57C0[a2], 800 * a1 + 100);
  return result;
}
// 4A57C0: using guessed type int dword_4A57C0[];

//----- (0041B480) --------------------------------------------------------
int __cdecl sub_41B480(unsigned __int8 a1, char a2)
{
  int result; // eax@2

  if ( DirectSoundObj )
    result = (*(int (__stdcall **)(int, int))(*(_DWORD *)dword_4A57C0[a2] + 64))(
               dword_4A57C0[a2],
               10 * (word_493764[a1] - 256));
  return result;
}
// 493764: using guessed type __int16 word_493764[];
// 4A57C0: using guessed type int dword_4A57C0[];

//----- (0041B4D0) --------------------------------------------------------
int __cdecl sub_41B4D0(int a1, char a2)
{
  int result; // eax@2

  if ( DirectSoundObj )
    result = (*(int (__stdcall **)(int, int))(*(_DWORD *)dword_4A57C0[a2] + 60))(dword_4A57C0[a2], 8 * a1 - 2040);
  return result;
}
// 4A57C0: using guessed type int dword_4A57C0[];

//----- (0041B510) --------------------------------------------------------
int __cdecl sub_41B510(unsigned __int8 a1, int a2, char a3)
{
  int result; // eax@2

  if ( DirectSoundObj )
  {
    result = a3;
    if ( dword_4A57C0[a3] )
    {
      if ( a2 )
      {
        if ( a2 == 1 )
        {
          (*(void (__cdecl **)(int))(*(_DWORD *)dword_4A57C0[a3] + 72))(dword_4A57C0[a3]);
          (*(void (__cdecl **)(int, _DWORD))(*(_DWORD *)dword_4A57C0[a3] + 52))(dword_4A57C0[a3], 0);
          sub_41B440(a1, a3);
          result = (*(int (__cdecl **)(int, _DWORD, _DWORD, _DWORD))(*(_DWORD *)dword_4A57C0[a3] + 48))(
                     dword_4A57C0[a3],
                     0,
                     0,
                     0);
        }
      }
      else
      {
        (*(void (__cdecl **)(int))(*(_DWORD *)dword_4A57C0[a3] + 72))(dword_4A57C0[a3]);
        result = (*(int (__cdecl **)(int, _DWORD))(*(_DWORD *)dword_4A57C0[a3] + 52))(dword_4A57C0[a3], 0);
      }
    }
  }
  return result;
}
// 4A57C0: using guessed type int dword_4A57C0[];

//----- (0041B600) --------------------------------------------------------
_DWORD *__thiscall sub_41B600(_DWORD *this)
{
  signed int i; // [sp+4h] [bp-4h]@1

  for ( i = 0; i < 16; ++i )
  {
    this[3 * i + 6] = 0;
    this[3 * i + 5] = 0;
  }
  return this;
}

//----- (0041B650) --------------------------------------------------------
signed int __thiscall sub_41B650(int this)
{
  signed int result; // eax@4
  int v2; // [sp+0h] [bp-8h]@1
  signed int i; // [sp+4h] [bp-4h]@1

  v2 = this;
  *(_BYTE *)(this + 208) = 0;
  *(_WORD *)(this + 4) = 4096;
  *(_BYTE *)(this + 3) = 4;
  *(_BYTE *)(this + 2) = 4;
  *(_WORD *)this = 128;
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)(this + 12) = 255 * *(_BYTE *)(this + 2) * *(_BYTE *)(this + 3);
  for ( i = 0; i < 16; ++i )
  {
    *(_WORD *)(this + 12 * i + 16) = 1000;
    *(_BYTE *)(this + 12 * i + 18) = 0;
    *(_BYTE *)(this + 12 * i + 19) = 0;
  }
  sub_41B890((_BYTE *)this, *(_WORD *)(this + 4));
  result = sub_41B730(v2, v2, -1);
  *(_BYTE *)(v2 + 225) = 6;
  *(_BYTE *)(v2 + 226) = -56;
  return result;
}

//----- (0041B730) --------------------------------------------------------
signed int __thiscall sub_41B730(int this, int a2, char a3)
{
  int v4; // [sp+4h] [bp-2Ch]@1
  char str; // [sp+8h] [bp-28h]@4
  int v6; // [sp+28h] [bp-8h]@1
  int i; // [sp+2Ch] [bp-4h]@8

  v6 = dword_498B20;
  v4 = this;
  if ( a3 & 2 )
  {
    *(_BYTE *)(this + 3) = *(_BYTE *)(a2 + 3);
    *(_BYTE *)(this + 2) = *(_BYTE *)(a2 + 2);
  }
  if ( a3 & 1 )
  {
    *(_WORD *)this = *(_WORD *)a2;
    _itoa(*(_WORD *)a2, &str, 10);
  }
  if ( a3 & 8 )
  {
    *(_DWORD *)(v4 + 8) = *(_DWORD *)(a2 + 8);
    *(_DWORD *)(v4 + 12) = *(_DWORD *)(a2 + 12);
  }
  if ( a3 & 0x10 )
  {
    for ( i = 0; i < 8; ++i )
    {
      *(_WORD *)(v4 + 12 * i + 16) = *(_WORD *)(a2 + 12 * i + 16);
      *(_BYTE *)(v4 + 12 * i + 19) = *(_BYTE *)(v4 + 12 * i + 19);
    }
  }
  if ( a3 & 0x20 )
  {
    for ( i = 0; i < 16; ++i )
      *(_BYTE *)(v4 + 12 * i + 18) = *(_BYTE *)(a2 + 12 * i + 18);
  }
  if ( a3 & 0x40 )
  {
    for ( i = 0; i < 16; ++i )
      *(_BYTE *)(v4 + 12 * i + 19) = *(_BYTE *)(a2 + 12 * i + 19);
  }
  return 1;
}
// 498B20: using guessed type int dword_498B20;

//----- (0041B890) --------------------------------------------------------
signed int __thiscall sub_41B890(_BYTE *this, unsigned __int16 a2)
{
  _BYTE *v3; // [sp+0h] [bp-Ch]@1
  signed int i; // [sp+4h] [bp-8h]@1
  signed int j; // [sp+4h] [bp-8h]@14
  signed int l; // [sp+8h] [bp-4h]@4
  signed int k; // [sp+8h] [bp-4h]@10

  v3 = this;
  for ( i = 0; ; ++i )
  {
    if ( i >= 16 )
    {
      for ( j = 0; j < 8; ++j )
        sub_41B3F0(j, v3[12 * j + 18], v3[12 * j + 19]);
      v3[208] = 0;
      return 1;
    }
    v3[12 * i + 18] = 0;
    *(_DWORD *)&v3[12 * i + 24] = 0;
    *(_DWORD *)&v3[12 * i + 20] = malloc(16 * a2);
    if ( !*(_DWORD *)&v3[12 * i + 20] )
      break;
    for ( k = 0; k < a2; ++k )
    {
      *(_DWORD *)(16 * k + *(_DWORD *)&v3[12 * i + 20]) = 0;
      *(_DWORD *)(*(_DWORD *)&v3[12 * i + 20] + 16 * k + 4) = 0;
      *(_BYTE *)(*(_DWORD *)&v3[12 * i + 20] + 16 * k + 12) = 0;
      *(_BYTE *)(*(_DWORD *)&v3[12 * i + 20] + 16 * k + 15) = -1;
      *(_BYTE *)(*(_DWORD *)&v3[12 * i + 20] + 16 * k + 14) = -1;
      *(_BYTE *)(*(_DWORD *)&v3[12 * i + 20] + 16 * k + 13) = -1;
    }
  }
  for ( l = 0; l < 16; ++l )
  {
    if ( *(_DWORD *)&v3[12 * l + 20] )
    {
      free(*(void **)&v3[12 * l + 20]);
      *(_DWORD *)&v3[12 * i + 20] = 0;
    }
  }
  return 0;
}

//----- (0041BA70) --------------------------------------------------------
int __thiscall sub_41BA70(void **this)
{
  int result; // eax@5
  void **v2; // [sp+0h] [bp-8h]@1
  signed int i; // [sp+4h] [bp-4h]@1

  v2 = this;
  for ( i = 0; i < 16; ++i )
  {
    if ( v2[3 * i + 5] )
    {
      free(v2[3 * i + 5]);
      v2[3 * i + 5] = 0;
    }
    result = i + 1;
  }
  return result;
}

//----- (0041BAD0) --------------------------------------------------------
int __thiscall sub_41BAD0(_BYTE *this, LPCSTR lpName)
{
  int result; // eax@2
  HGLOBAL v3; // eax@3
  int v4; // ST18_4@20
  _BYTE *v5; // [sp+4h] [bp-9Ch]@1
  signed int j; // [sp+8h] [bp-98h]@15
  signed int k; // [sp+8h] [bp-98h]@39
  signed int l; // [sp+8h] [bp-98h]@42
  int v9; // [sp+Ch] [bp-94h]@20
  int v10; // [sp+Ch] [bp-94h]@23
  int v11; // [sp+Ch] [bp-94h]@26
  int v12; // [sp+Ch] [bp-94h]@29
  int v13; // [sp+Ch] [bp-94h]@32
  int v14; // [sp+Ch] [bp-94h]@35
  __int16 v15; // [sp+10h] [bp-90h]@9
  char v16; // [sp+12h] [bp-8Eh]@9
  char v17; // [sp+13h] [bp-8Dh]@9
  int v18; // [sp+14h] [bp-8Ch]@9
  int v19; // [sp+18h] [bp-88h]@9
  __int16 v20; // [sp+1Ch] [bp-84h]@11
  char v21; // [sp+1Eh] [bp-82h]@14
  char v22; // [sp+1Fh] [bp-81h]@13
  __int16 v23[50]; // [sp+20h] [bp-80h]@18
  char destination; // [sp+84h] [bp-1Ch]@3
  int v25; // [sp+8Ch] [bp-14h]@1
  HRSRC hResInfo; // [sp+90h] [bp-10h]@1
  char v27; // [sp+97h] [bp-9h]@1
  int i; // [sp+98h] [bp-8h]@9
  void *source; // [sp+9Ch] [bp-4h]@3

  v25 = dword_498B20;
  v5 = this;
  v27 = 0;
  hResInfo = FindResourceA(0, lpName, &off_48C6D4);
  if ( hResInfo )
  {
    v3 = LoadResource(0, hResInfo);
    source = LockResource(v3);
    memcpy(&destination, source, 6u);
    source = (char *)source + 6;
    if ( !memcmp(&destination, aOrg01, 6u) )
      v27 = 1;
    if ( !memcmp(&destination, aOrg02, 6u) )
      v27 = 2;
    if ( v27 )
    {
      memcpy(&v15, source, 0x6Cu);
      source = (char *)source + 108;
      *(_WORD *)v5 = v15;
      v5[2] = v16;
      v5[3] = v17;
      *((_DWORD *)v5 + 2) = v18;
      *((_DWORD *)v5 + 3) = v19;
      for ( i = 0; i < 16; ++i )
      {
        *(_WORD *)&v5[12 * i + 16] = *(&v20 + 3 * i);
        if ( v27 == 1 )
          v5[12 * i + 19] = 0;
        else
          v5[12 * i + 19] = *(&v22 + 6 * i);
        v5[12 * i + 18] = *(&v21 + 6 * i);
      }
      for ( j = 0; j < 16; ++j )
      {
        if ( v23[3 * j] )
        {
          v4 = *(_DWORD *)&v5[12 * j + 20];
          *(_DWORD *)&v5[12 * j + 24] = *(_DWORD *)&v5[12 * j + 20];
          *(_DWORD *)v4 = 0;
          *(_DWORD *)(v4 + 4) = v4 + 16;
          v9 = v4 + 16;
          for ( i = 1; i < (unsigned __int16)v23[3 * j]; ++i )
          {
            *(_DWORD *)v9 = v9 - 16;
            *(_DWORD *)(v9 + 4) = v9 + 16;
            v9 += 16;
          }
          *(_DWORD *)(v9 - 16 + 4) = 0;
          v10 = *(_DWORD *)&v5[12 * j + 20];
          for ( i = 0; i < (unsigned __int16)v23[3 * j]; ++i )
          {
            memcpy((void *)(v10 + 8), source, 4u);
            source = (char *)source + 4;
            v10 += 16;
          }
          v11 = *(_DWORD *)&v5[12 * j + 20];
          for ( i = 0; i < (unsigned __int16)v23[3 * j]; ++i )
          {
            memcpy((void *)(v11 + 13), source, 1u);
            source = (char *)source + 1;
            v11 += 16;
          }
          v12 = *(_DWORD *)&v5[12 * j + 20];
          for ( i = 0; i < (unsigned __int16)v23[3 * j]; ++i )
          {
            memcpy((void *)(v12 + 12), source, 1u);
            source = (char *)source + 1;
            v12 += 16;
          }
          v13 = *(_DWORD *)&v5[12 * j + 20];
          for ( i = 0; i < (unsigned __int16)v23[3 * j]; ++i )
          {
            memcpy((void *)(v13 + 14), source, 1u);
            source = (char *)source + 1;
            v13 += 16;
          }
          v14 = *(_DWORD *)&v5[12 * j + 20];
          for ( i = 0; i < (unsigned __int16)v23[3 * j]; ++i )
          {
            memcpy((void *)(v14 + 15), source, 1u);
            source = (char *)source + 1;
            v14 += 16;
          }
        }
        else
        {
          *(_DWORD *)&v5[12 * j + 24] = 0;
        }
      }
      for ( k = 0; k < 8; ++k )
        sub_41B3F0(k, v5[12 * k + 18], v5[12 * k + 19]);
      for ( l = 8; l < 16; ++l )
        i = v5[12 * l + 18];
      sub_41C630(v5, 0);
      result = 1;
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}
// 498B20: using guessed type int dword_498B20;
// 41BAD0: using guessed type __int16 var_80[50];

//----- (0041C180) --------------------------------------------------------
bool sub_41C180()
{
  bool result; // eax@2
  struct timecaps_tag ptc; // [sp+0h] [bp-Ch]@1
  MMRESULT v2; // [sp+8h] [bp-4h]@1

  v2 = timeGetDevCaps(&ptc, 8u);
  if ( v2 )
  {
    result = 0;
  }
  else
  {
    if ( uPeriod < ptc.wPeriodMin )
      uPeriod = ptc.wPeriodMin;
    v2 = timeBeginPeriod(uPeriod);
    result = v2 == 0;
  }
  return result;
}

//----- (0041C1E0) --------------------------------------------------------
int __cdecl sub_41C1E0(UINT uDelay)
{
  uPeriod = uDelay;
  TimerHandle = timeSetEvent(uDelay, 0xAu, (LPTIMECALLBACK)fptc, 0, 1u);
  IsTimerActive = 1;
  return 1;
}
// 4A4DAC: using guessed type int IsTimerActive;

//----- (0041C230) --------------------------------------------------------
int __stdcall fptc(UINT uTimerID, UINT uMsg, DWORD dwUser, DWORD dw1, DWORD dw2)
{
  timeGetTime();
  return sub_41C2B0(&word_4A4E18);
}
// 4A4E18: using guessed type __int16 word_4A4E18;

//----- (0041C250) --------------------------------------------------------
signed int sub_41C250()
{
  signed int result; // eax@2

  if ( IsTimerActive )
  {
    if ( TimerHandle && timeKillEvent(TimerHandle) )
    {
      result = 0;
    }
    else if ( timeEndPeriod(uPeriod) )
    {
      result = 0;
    }
    else
    {
      IsTimerActive = 0;
      result = 1;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}
// 4A4DAC: using guessed type int IsTimerActive;

//----- (0041C2B0) --------------------------------------------------------
int __thiscall sub_41C2B0(_WORD *this)
{
  int v1; // eax@13
  int result; // eax@40
  _WORD *v3; // [sp+0h] [bp-8h]@1
  signed int i; // [sp+4h] [bp-4h]@6
  signed int j; // [sp+4h] [bp-4h]@25

  v3 = this;
  if ( dword_4A4E10 && dword_4937A4 )
    dword_4937A4 -= 2;
  if ( dword_4937A4 < 0 )
    dword_4937A4 = 0;
  for ( i = 0; i < 8; ++i )
  {
    if ( dword_4A4B08[i] && Song_Current_Beat == *(_DWORD *)(dword_4A4B08[i] + 8) )
    {
      if ( !dword_4A4D48[i] && *(_BYTE *)(dword_4A4B08[i] + 13) != 255 )
      {
        sub_41ADC0(*(_BYTE *)(dword_4A4B08[i] + 13), -1, i, v3[6 * i + 8]);
        dword_4A4DB0[i] = *(_BYTE *)(dword_4A4B08[i] + 12);
      }
      v1 = i;
      if ( *(_BYTE *)(dword_4A4B08[i] + 15) != 255 )
      {
        LOBYTE(v1) = *(_BYTE *)(dword_4A4B08[i] + 13);
        sub_41AC70(v1, *(_BYTE *)(dword_4A4B08[i] + 15), i);
      }
      if ( *(_BYTE *)(dword_4A4B08[i] + 14) != 255 )
        dword_4A4DD0[i] = *(_BYTE *)(dword_4A4B08[i] + 14);
      dword_4A4B08[i] = *(_DWORD *)(dword_4A4B08[i] + 4);
    }
    if ( !dword_4A4DB0[i] )
      sub_41ADC0(0, 2, i, v3[6 * i + 8]);
    if ( dword_4A4DB0[i] > 0 )
      --dword_4A4DB0[i];
    if ( dword_4A4B08[i] )
      sub_41AD20(*(_BYTE *)(dword_4A4B08[i] + 13), dword_4937A4 * dword_4A4DD0[i] / 127, i);
  }
  for ( j = 8; j < 16; ++j )
  {
    if ( dword_4A4B08[j] && Song_Current_Beat == *(_DWORD *)(dword_4A4B08[j] + 8) )
    {
      if ( *(_BYTE *)(dword_4A4B08[j] + 13) != 255 && !dword_4A4D48[j] )
        sub_41B510(*(_BYTE *)(dword_4A4B08[j] + 13), 1, j - 8);
      if ( *(_BYTE *)(dword_4A4B08[j] + 15) != 255 )
        sub_41B480(*(_BYTE *)(dword_4A4B08[j] + 15), j - 8);
      if ( *(_BYTE *)(dword_4A4B08[j] + 14) != 255 )
        dword_4A4DD0[j] = *(_BYTE *)(dword_4A4B08[j] + 14);
      dword_4A4B08[j] = *(_DWORD *)(dword_4A4B08[j] + 4);
    }
    if ( dword_4A4B08[j] )
      sub_41B4D0(dword_4937A4 * dword_4A4DD0[j] / 127, j - 8);
  }
  ++Song_Current_Beat;
  result = (int)v3;
  if ( Song_Current_Beat >= *((_DWORD *)v3 + 3) )
  {
    Song_Current_Beat = *((_DWORD *)v3 + 2);
    result = sub_41C630(v3, Song_Current_Beat);
  }
  return result;
}
// 4937A4: using guessed type int dword_4937A4;
// 4A4B00: using guessed type int Song_Current_Beat;
// 4A4B08: using guessed type int dword_4A4B08[];
// 4A4D48: using guessed type int dword_4A4D48[];
// 4A4DB0: using guessed type int dword_4A4DB0[];
// 4A4DD0: using guessed type int dword_4A4DD0[];
// 4A4E10: using guessed type int dword_4A4E10;

//----- (0041C630) --------------------------------------------------------
int __thiscall sub_41C630(_DWORD *this, int a2)
{
  int result; // eax@7
  signed int i; // [sp+4h] [bp-4h]@1

  for ( i = 0; i < 16; ++i )
  {
    for ( dword_4A4B08[i] = this[3 * i + 6];
          dword_4A4B08[i] && *(_DWORD *)(dword_4A4B08[i] + 8) < a2;
          dword_4A4B08[i] = *(_DWORD *)(dword_4A4B08[i] + 4) )
    {
      ;
    }
    result = i + 1;
  }
  Song_Current_Beat = a2;
  return result;
}
// 4A4B00: using guessed type int Song_Current_Beat;
// 4A4B08: using guessed type int dword_4A4B08[];

//----- (0041C6C0) --------------------------------------------------------
signed int sub_41C6C0()
{
  signed int result; // eax@2

  if ( DirectSoundObj )
  {
    if ( sub_41B380() )
    {
      sub_41B650((int)&word_4A4E18);
      result = 1;
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}
// 4A4E18: using guessed type __int16 word_4A4E18;

//----- (0041C6F0) --------------------------------------------------------
int __cdecl sub_41C6F0(LPCSTR lpName)
{
  int result; // eax@2

  if ( DirectSoundObj )
  {
    if ( sub_41BAD0(&word_4A4E18, lpName) )
    {
      dword_4937A4 = 100;
      dword_4A4E10 = 0;
      result = 0;
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}
// 4937A4: using guessed type int dword_4937A4;
// 4A4E10: using guessed type int dword_4A4E10;
// 4A4E18: using guessed type __int16 word_4A4E18;

//----- (0041C730) --------------------------------------------------------
int __cdecl sub_41C730(int a1)
{
  int result; // eax@2

  if ( DirectSoundObj )
  {
    result = sub_41C630(&word_4A4E18, a1);
    dword_4937A4 = 100;
    dword_4A4E10 = 0;
  }
  return result;
}
// 4937A4: using guessed type int dword_4937A4;
// 4A4E10: using guessed type int dword_4A4E10;
// 4A4E18: using guessed type __int16 word_4A4E18;

//----- (0041C770) --------------------------------------------------------
int sub_41C770()
{
  int result; // eax@2

  if ( DirectSoundObj )
    result = Song_Current_Beat;
  else
    result = 0;
  return result;
}
// 4A4B00: using guessed type int Song_Current_Beat;

//----- (0041C790) --------------------------------------------------------
int sub_41C790()
{
  int result; // eax@2

  if ( DirectSoundObj )
  {
    sub_41C250();
    sub_41C180();
    result = sub_41C1E0((unsigned __int16)word_4A4E18);
  }
  return result;
}
// 4A4E18: using guessed type __int16 word_4A4E18;

//----- (0041C7C0) --------------------------------------------------------
signed int __cdecl sub_41C7C0(signed int a1)
{
  signed int result; // eax@2

  if ( DirectSoundObj )
  {
    if ( a1 >= 0 && a1 <= 100 )
    {
      dword_4937A4 = a1;
      result = 1;
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}
// 4937A4: using guessed type int dword_4937A4;

//----- (0041C7F0) --------------------------------------------------------
void sub_41C7F0()
{
  signed int i; // [sp+0h] [bp-4h]@2

  if ( DirectSoundObj )
  {
    sub_41C250();
    for ( i = 0; i < 8; ++i )
      sub_41ADC0(0, 2, i, 0);
    memset(&byte_493780, 255, 0x10u);
    memset(&byte_4A4D88, 0, 0x10u);
    memset(&byte_4A4D98, 0, 0x10u);
    Sleep(0x64u);
  }
}

//----- (0041C890) --------------------------------------------------------
int sub_41C890()
{
  int result; // eax@2
  signed int i; // [sp+0h] [bp-4h]@2

  if ( DirectSoundObj )
  {
    sub_41C250();
    result = sub_41BA70((void **)&word_4A4E18);
    for ( i = 0; i < 8; ++i )
    {
      sub_41ADC0(0, 0, i, 0);
      sub_41B2A0(i);
      result = i + 1;
    }
  }
  return result;
}
// 4A4E18: using guessed type __int16 word_4A4E18;

//----- (0041C8F0) --------------------------------------------------------
void sub_41C8F0()
{
  sin((long double)0 * 6.283184 / 256.0);
}

//----- (0041CB10) --------------------------------------------------------
signed int __cdecl Sound_Thingy(int a1, int a2)
{
  int v2; // ST40_4@24
  __int64 v3; // rax@24
  int v4; // ecx@24
  __int64 v5; // rax@24
  __int64 v6; // rax@24
  __int64 v7; // rax@24
  double v9; // [sp+18h] [bp-158h]@14
  double v10; // [sp+28h] [bp-148h]@13
  double v11; // [sp+38h] [bp-138h]@1
  double v12; // [sp+38h] [bp-138h]@4
  double v13; // [sp+38h] [bp-138h]@7
  double v14; // [sp+38h] [bp-138h]@10
  double v15; // [sp+40h] [bp-130h]@20
  double v16; // [sp+48h] [bp-128h]@17
  double v17; // [sp+50h] [bp-120h]@13
  char ptr[260]; // [sp+58h] [bp-118h]@1
  int v19; // [sp+15Ch] [bp-14h]@1
  int i; // [sp+160h] [bp-10h]@1
  int v21; // [sp+164h] [bp-Ch]@24
  double v22; // [sp+168h] [bp-8h]@13

  v19 = dword_498B20;
  sub_41C8F0();
  memset(ptr, 0, 0x100u);
  i = 0;
  v11 = (long double)*(signed int *)(a1 + 80);
  while ( i < *(_DWORD *)(a1 + 84) )
  {
    ptr[i] = (unsigned __int64)v11;
    v11 = ((long double)*(signed int *)(a1 + 88) - (long double)*(signed int *)(a1 + 80))
        / (long double)*(signed int *)(a1 + 84)
        + v11;
    ++i;
  }
  v12 = (long double)*(signed int *)(a1 + 88);
  while ( i < *(_DWORD *)(a1 + 92) )
  {
    ptr[i] = (unsigned __int64)v12;
    v12 = ((long double)*(signed int *)(a1 + 96) - (long double)*(signed int *)(a1 + 88))
        / (long double)(*(_DWORD *)(a1 + 92) - *(_DWORD *)(a1 + 84))
        + v12;
    ++i;
  }
  v13 = (long double)*(signed int *)(a1 + 96);
  while ( i < *(_DWORD *)(a1 + 100) )
  {
    ptr[i] = (unsigned __int64)v13;
    v13 = ((long double)*(signed int *)(a1 + 104) - (long double)*(signed int *)(a1 + 96))
        / (long double)(*(_DWORD *)(a1 + 100) - *(_DWORD *)(a1 + 92))
        + v13;
    ++i;
  }
  v14 = (long double)*(signed int *)(a1 + 104);
  while ( i < 256 )
  {
    ptr[i] = (unsigned __int64)v14;
    v14 = v14 - (long double)*(signed int *)(a1 + 104) / (long double)(256 - *(_DWORD *)(a1 + 100));
    ++i;
  }
  v17 = (long double)*(signed int *)(a1 + 52);
  v10 = (long double)*(signed int *)(a1 + 28);
  v22 = (long double)*(signed int *)(a1 + 76);
  if ( *(double *)(a1 + 16) == 0.0 )
    v9 = 0.0;
  else
    v9 = 256.0 / ((long double)*(signed int *)(a1 + 4) / *(double *)(a1 + 16));
  if ( *(double *)(a1 + 40) == 0.0 )
    v16 = 0.0;
  else
    v16 = 256.0 / ((long double)*(signed int *)(a1 + 4) / *(double *)(a1 + 40));
  if ( *(double *)(a1 + 64) == 0.0 )
    v15 = 0.0;
  else
    v15 = 256.0 / ((long double)*(signed int *)(a1 + 4) / *(double *)(a1 + 64));
  for ( i = 0; i < *(_DWORD *)(a1 + 4); ++i )
  {
    v21 = (signed int)(unsigned __int64)v10 % 256;
    v2 = (signed int)(unsigned __int64)v17 % 256;
    v3 = *(_DWORD *)(a1 + 24) * (signed int)*(&byte_4A4F00[256 * *(_DWORD *)(a1 + 8)] + v21);
    v4 = ((BYTE4(v3) & 0x3F) + (signed int)v3) >> 6;
    v5 = *(_DWORD *)(a1 + 72)
       * (signed int)*(&byte_4A4F00[256 * *(_DWORD *)(a1 + 56)] + (signed int)(unsigned __int64)v22 % 256);
    v6 = v4 * ((((BYTE4(v5) & 0x3F) + (signed int)v5) >> 6) + 64);
    v7 = ptr[(unsigned int)(unsigned __int64)((long double)(i << 8) / (long double)*(signed int *)(a1 + 4))]
       * (((BYTE4(v6) & 0x3F) + (signed int)v6) >> 6);
    *(_BYTE *)(i + a2) = (((BYTE4(v7) & 0x3F) + (signed int)v7) >> 6) + -128;
    if ( *(&byte_4A4F00[256 * *(_DWORD *)(a1 + 32)] + v2) >= 0 )
      v10 = (v9 + v9)
          * (long double)*(&byte_4A4F00[256 * *(_DWORD *)(a1 + 32)] + (signed int)(unsigned __int64)v17 % 256)
          * (long double)*(signed int *)(a1 + 48)
          / 64.0
          / 64.0
          + v9
          + v10;
    else
      v10 = v9
          - v9
          * 0.5
          * (long double)-*(&byte_4A4F00[256 * *(_DWORD *)(a1 + 32)] + (signed int)(unsigned __int64)v17 % 256)
          * (long double)*(signed int *)(a1 + 48)
          / 64.0
          / 64.0
          + v10;
    v17 = v17 + v16;
    v22 = v22 + v15;
  }
  return 1;
}
// 498B20: using guessed type int dword_498B20;
// 41CB10: using guessed type char ptr[260];

//----- (0041CFC0) --------------------------------------------------------
// Returns 1 or 0
bool Check_Profile_DAT(void)
{
  bool result; // eax@2
  char str; // [sp+0h] [bp-110h]@1
  int v2; // [sp+108h] [bp-8h]@1
  HANDLE hObject; // [sp+10Ch] [bp-4h]@1

  v2 = dword_498B20;
  sprintf(&str, "%s\\%s", FullExePath, off_4937A8[0]);
  hObject = CreateFileA(&str, 0, 1u, 0, 3u, 0x80u, 0);
  if ( hObject == (HANDLE)-1 )
  {
    result = 0;
  }
  else
  {
    CloseHandle(hObject);
    result = 1;
  }
  return result;
}
// 4937A8: using guessed type char *off_4937A8[2];
// 498B20: using guessed type int dword_498B20;

//----- (0041D040) --------------------------------------------------------
signed int __cdecl sub_41D040(int a1)
{
  signed int result; // eax@5
  char str; // [sp+0h] [bp-720h]@2
  char ptr; // [sp+108h] [bp-618h]@6
  int v4; // [sp+110h] [bp-610h]@6
  int v5; // [sp+114h] [bp-60Ch]@6
  int v6; // [sp+118h] [bp-608h]@6
  int v7; // [sp+11Ch] [bp-604h]@6
  int v8; // [sp+120h] [bp-600h]@6
  __int16 v9; // [sp+124h] [bp-5FCh]@6
  __int16 v10; // [sp+126h] [bp-5FAh]@6
  __int16 v11; // [sp+128h] [bp-5F8h]@6
  int v12; // [sp+12Ch] [bp-5F4h]@6
  int v13; // [sp+130h] [bp-5F0h]@6
  int v14; // [sp+134h] [bp-5ECh]@6
  int v15; // [sp+138h] [bp-5E8h]@6
  int v16; // [sp+13Ch] [bp-5E4h]@6
  char v17; // [sp+140h] [bp-5E0h]@6
  char v18; // [sp+1E0h] [bp-540h]@6
  char v19; // [sp+260h] [bp-4C0h]@6
  char v20; // [sp+2A0h] [bp-480h]@6
  char destination; // [sp+320h] [bp-400h]@6
  char v22; // [sp+324h] [bp-3FCh]@6
  int v23; // [sp+714h] [bp-Ch]@1
  FILE *stream; // [sp+718h] [bp-8h]@4
  void *source; // [sp+71Ch] [bp-4h]@1

  v23 = dword_498B20;
  source = "FLAG";
  if ( a1 )
    sprintf(&str, "%s\\%s", FullExePath, a1);
  else
    sprintf(&str, "%s\\%s", FullExePath, off_4937A8[0]);
  stream = fopen(&str, "wb");
  if ( stream )
  {
    memset(&ptr, 0, 0x604u);
    memcpy(&ptr, off_4937AC, 8u);
    memcpy(&destination, source, 4u);
    v4 = CurrentMapID;
    v5 = CurrentSongID;
    v6 = Quote_X_Position;
    v7 = Quote_Y_Position;
    v8 = *(_DWORD *)&Quote_Direction_Faced;
    v9 = Quote_Health_Max;
    v11 = Quote_Health_Current;
    v10 = NumWhimStars;
    v12 = SelectedWeaponID;
    v13 = SelectedItemID;
    v14 = EquippedItems;
    v15 = InFishBattle;
    v16 = GameTime;
    memcpy(&v17, &WeaponData_ID, 0xA0u);
    memcpy(&v18, Quote_Inventory, 0x80u);
    memcpy(&v19, &dword_4A5500, 0x40u);
    memcpy(&v20, &byte_49E5B8, 0x80u);
    memcpy(&v22, &byte_49DC69[311], 0x3E8u);
    sub_481981((FILE *)&ptr, 0x604u, 1u, stream);
    fclose(stream);
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}
// 4937A8: using guessed type char *off_4937A8[2];
// 498B20: using guessed type int dword_498B20;
// 499C68: using guessed type int SelectedWeaponID;
// 499C6C: using guessed type int SelectedItemID;
// 49E1EC: using guessed type int GameTime;
// 49E64C: using guessed type int InFishBattle;
// 49E650: using guessed type int EquippedItems;
// 49E6CC: using guessed type __int16 Quote_Health_Current;
// 49E6CE: using guessed type __int16 NumWhimStars;
// 49E6D0: using guessed type __int16 Quote_Health_Max;
// 4A57F0: using guessed type int CurrentMapID;
// 4A57F4: using guessed type int CurrentSongID;

//----- (0041D260) --------------------------------------------------------
signed int __cdecl sub_41D260(int a1)
{
  signed int result; // eax@5
  char str; // [sp+0h] [bp-718h]@2
  char ptr1; // [sp+108h] [bp-610h]@6
  int v4; // [sp+110h] [bp-608h]@8
  int Music_To_Play; // [sp+114h] [bp-604h]@8
  int v6; // [sp+118h] [bp-600h]@10
  int v7; // [sp+11Ch] [bp-5FCh]@10
  int v8; // [sp+120h] [bp-5F8h]@10
  __int16 v9; // [sp+124h] [bp-5F4h]@10
  __int16 v10; // [sp+126h] [bp-5F2h]@10
  __int16 v11; // [sp+128h] [bp-5F0h]@10
  int v12; // [sp+12Ch] [bp-5ECh]@8
  int v13; // [sp+130h] [bp-5E8h]@8
  int v14; // [sp+134h] [bp-5E4h]@10
  int v15; // [sp+138h] [bp-5E0h]@10
  int v16; // [sp+13Ch] [bp-5DCh]@8
  char source; // [sp+140h] [bp-5D8h]@8
  char v18; // [sp+1E0h] [bp-538h]@8
  char v19; // [sp+260h] [bp-4B8h]@8
  char v20; // [sp+2A0h] [bp-478h]@8
  char v21; // [sp+324h] [bp-3F4h]@8
  int v22; // [sp+710h] [bp-8h]@1
  FILE *stream; // [sp+714h] [bp-4h]@4

  v22 = dword_498B20;
  if ( a1 )
    sprintf(&str, "%s", a1);
  else
    sprintf(&str, "%s\\%s", FullExePath, off_4937A8[0]);
  stream = fopen(&str, "rb");
  if ( stream )
  {
    sub_480F55((FILE *)&ptr1, 8u, 1u, stream);
    if ( !memcmp(&ptr1, off_4937AC, 8u) )
    {
      fseek(stream, 0, 0);
      memset(&ptr1, 0, 0x604u);
      sub_480F55((FILE *)&ptr1, 0x604u, 1u, stream);
      fclose(stream);
      SelectedWeaponID = v12;
      SelectedItemID = v13;
      GameTime = v16;
      memcpy(&WeaponData_ID, &source, 0xA0u);
      memcpy(Quote_Inventory, &v18, 0x80u);
      memcpy(&dword_4A5500, &v19, 0x40u);
      memcpy(&byte_49E5B8, &v20, 0x80u);
      memcpy(&byte_49DC69[311], &v21, 0x3E8u);
      Tsc_CMU(Music_To_Play);
      sub_414B50();
      if ( sub_420BE0(v4, 0, 0, 1) )
      {
        EquippedItems = v14;
        InFishBattle = v15;
        *(_DWORD *)&Quote_Direction_Faced = v8;
        Quote_Health_Max = v9;
        Quote_Health_Current = v11;
        NumWhimStars = v10;
        *(_BYTE *)&Player_Flags = -128;
        Air = 1000;
        YellowHealthBar = v11;
        Quote_X_Position = v6;
        Quote_Y_Position = v7;
        WeaponRenderbox_Left = 24 * (*((_DWORD *)&WeaponData_ID + 5 * SelectedWeaponID) % 10);
        WeaponRenderbox_Right = WeaponRenderbox_Left + 24;
        WeaponRenderbox_Up = 32 * (*((_DWORD *)&WeaponData_ID + 5 * SelectedWeaponID) / 10);
        WeaponRenderbox_Down = WeaponRenderbox_Up + 16;
        sub_40DEA0();
        sub_40F130();
        sub_40F220(16);
        _crt_debugger_hook_2();
        TSC_SSS_SPS__2();
        sub_420FA0();
        sub_425BC0();
        dword_4BBA2C = 0;
        result = 1;
      }
      else
      {
        result = 0;
      }
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}
// 47B450: using guessed type int _crt_debugger_hook_2(void);
// 4937A8: using guessed type char *off_4937A8[2];
// 498B20: using guessed type int dword_498B20;
// 499C68: using guessed type int SelectedWeaponID;
// 499C6C: using guessed type int SelectedItemID;
// 49E1EC: using guessed type int GameTime;
// 49E64C: using guessed type int InFishBattle;
// 49E650: using guessed type int EquippedItems;
// 49E6AC: using guessed type int WeaponRenderbox_Left;
// 49E6B0: using guessed type int WeaponRenderbox_Up;
// 49E6B4: using guessed type int WeaponRenderbox_Right;
// 49E6B8: using guessed type int WeaponRenderbox_Down;
// 49E6CC: using guessed type __int16 Quote_Health_Current;
// 49E6CE: using guessed type __int16 NumWhimStars;
// 49E6D0: using guessed type __int16 Quote_Health_Max;
// 49E6DC: using guessed type int Air;
// 4BBA2C: using guessed type int dword_4BBA2C;

//----- (0041D550) --------------------------------------------------------
int __cdecl sub_41D550(HWND hWnd)
{
  int result; // eax@2

  sub_414B50();
  SelectedWeaponID = 0;
  SelectedItemID = 0;
  GameTime = 0;
  Clr_Weaps();
  Clr_Inv();
  sub_41D610();
  memset_init_maps();
  sub_40E850();
  if ( sub_420BE0(13, 200, 10, 8) )
  {
    sub_40DEA0();
    sub_40F130();
    sub_40F220(16);
    _crt_debugger_hook_2();
    TSC_SSS_SPS__2();
    sub_425BC0();
    dword_4BBA2C = 0;
    __setargv();
    sub_40F220(16);
    result = 1;
  }
  else
  {
    MessageBoxA(hWnd, "Xe[Ws", "G[", 0);
    result = 0;
  }
  return result;
}
// 47B450: using guessed type int _crt_debugger_hook_2(void);
// 499C68: using guessed type int SelectedWeaponID;
// 499C6C: using guessed type int SelectedItemID;
// 49E1EC: using guessed type int GameTime;
// 4BBA2C: using guessed type int dword_4BBA2C;

//----- (0041D610) --------------------------------------------------------
void *sub_41D610()
{
  return memset(&dword_4A5500, 0, 0x40u);
}

//----- (0041D630) --------------------------------------------------------
signed int __cdecl sub_41D630(int a1, int a2)
{
  signed int result; // eax@7
  signed int i; // [sp+0h] [bp-4h]@1

  for ( i = 0; i < 8 && *((_DWORD *)&dword_4A5500 + 2 * i) != a1 && *((_DWORD *)&dword_4A5500 + 2 * i); ++i )
    ;
  if ( i == 8 )
  {
    result = 0;
  }
  else
  {
    *((_DWORD *)&dword_4A5500 + 2 * i) = a1;
    dword_4A5504[2 * i] = a2;
    result = 1;
  }
  return result;
}
// 4A5504: using guessed type int dword_4A5504[];

//----- (0041D740) --------------------------------------------------------
int sub_41D740()
{
  int result; // eax@4
  int i; // [sp+0h] [bp-8h]@1

  for ( i = 0; *((_DWORD *)&dword_4A5500 + 2 * i); ++i )
    ;
  result = (320 - 40 * i) / 2;
  if ( i )
  {
    if ( Key_For_Left & Key_Pressed )
      --dword_4A5544;
    if ( Key_For_Right & Key_Pressed )
      ++dword_4A5544;
    if ( dword_4A5544 < 0 )
      dword_4A5544 = i - 1;
    if ( dword_4A5544 > i - 1 )
      dword_4A5544 = 0;
    if ( Key_Pressed & (Key_For_Right | Key_For_Left) )
      Call_TSC_Event(*((_DWORD *)&dword_4A5500 + 2 * dword_4A5544) + 1000);
    result = Key_Pressed & (Key_For_Right | Key_For_Left);
    if ( Key_Pressed & (Key_For_Right | Key_For_Left) )
      result = Play_Sound_Effect(1, 1);
  }
  return result;
}
// 493630: using guessed type int Key_For_Left;
// 493638: using guessed type int Key_For_Right;
// 49E214: using guessed type int Key_Pressed;
// 4A5544: using guessed type int dword_4A5544;

//----- (0041D840) --------------------------------------------------------
int sub_41D840()
{
  int result; // eax@6
  int v1; // [sp+0h] [bp-5Ch]@10
  int v2; // [sp+4h] [bp-58h]@10
  int v3; // [sp+8h] [bp-54h]@10
  int v4; // [sp+Ch] [bp-50h]@10
  int Dst_Rects; // [sp+10h] [bp-4Ch]@1
  int v6; // [sp+14h] [bp-48h]@1
  int v7; // [sp+18h] [bp-44h]@1
  int v8; // [sp+1Ch] [bp-40h]@1
  int i; // [sp+20h] [bp-3Ch]@3
  int v10; // [sp+24h] [bp-38h]@1
  int v11; // [sp+28h] [bp-34h]@1
  int v12; // [sp+2Ch] [bp-30h]@1
  int v13; // [sp+30h] [bp-2Ch]@1
  int v14; // [sp+34h] [bp-28h]@1
  int v15; // [sp+38h] [bp-24h]@1
  int v16; // [sp+3Ch] [bp-20h]@1
  int v17; // [sp+40h] [bp-1Ch]@1
  int Src_Rects; // [sp+44h] [bp-18h]@1
  int v19; // [sp+48h] [bp-14h]@1
  int v20; // [sp+4Ch] [bp-10h]@1
  int v21; // [sp+50h] [bp-Ch]@1
  int v22; // [sp+54h] [bp-8h]@7
  int j; // [sp+58h] [bp-4h]@7

  Dst_Rects = 0;
  v6 = 0;
  v7 = 320;
  v8 = 240;
  v10 = 80;
  v11 = 88;
  v12 = 112;
  v13 = 104;
  v14 = 80;
  v15 = 104;
  v16 = 112;
  v17 = 120;
  Src_Rects = 80;
  v19 = 64;
  v20 = 144;
  v21 = 72;
  if ( Y_Position > 46 )
    --Y_Position;
  Render_Graphics((int)&Dst_Rects, 128, Y_Position, (int)&Src_Rects, 26);
  for ( i = 0; *((_DWORD *)&dword_4A5500 + 2 * i); ++i )
    ;
  result = dword_4A5548++ + 1;
  if ( i )
  {
    v22 = (320 - 40 * i) / 2;
    result = Render_Graphics(
               (int)&Dst_Rects,
               v22 + 40 * dword_4A5544,
               64,
               (int)(&v10 + 4 * (((unsigned int)dword_4A5548 >> 1) % 2)),
               26);
    for ( j = 0; j < 8; ++j )
    {
      result = j;
      if ( !*((_DWORD *)&dword_4A5500 + 2 * j) )
        break;
      v1 = 32 * (*((_DWORD *)&dword_4A5500 + 2 * j) % 8);
      v3 = v1 + 32;
      v2 = 16 * (*((_DWORD *)&dword_4A5500 + 2 * j) / 8);
      v4 = v2 + 16;
      result = Render_Graphics((int)&Dst_Rects, v22 + 40 * j, 64, (int)&v1, 14);
    }
  }
  return result;
}
// 4A5544: using guessed type int dword_4A5544;
// 4A5548: using guessed type int dword_4A5548;

//----- (0041DA00) --------------------------------------------------------
signed int __cdecl sub_41DA00(_DWORD *a1)
{
  int v2; // [sp+0h] [bp-128h]@8
  int v3; // [sp+4h] [bp-124h]@3
  char v4[4]; // [sp+8h] [bp-120h]@1
  int v5; // [sp+114h] [bp-14h]@1
  int Dst_Rects; // [sp+118h] [bp-10h]@1
  int v7; // [sp+11Ch] [bp-Ch]@1
  int v8; // [sp+120h] [bp-8h]@1
  int v9; // [sp+124h] [bp-4h]@1

  v5 = dword_498B20;
  Dst_Rects = 0;
  v7 = 0;
  v8 = 320;
  v9 = 240;
  dword_4A5544 = 0;
  Blit_Rect_From_Img_File_To_Region(10, (int)&unk_48F92C);
  _fputchar((int)v4);
  sub_421660("StageSelect.tsc");
  Y_Position = 54;
  Call_TSC_Event(*((_DWORD *)&dword_4A5500 + 2 * dword_4A5544) + 1000);
  do
  {
    Update_Keys();
    if ( Key_Held & 0x8000 )
    {
      v3 = sub_40DD70(AppWinHandle);
      if ( !v3 )
        return 0;
      if ( v3 == 2 )
        return 2;
    }
    sub_41D740();
    v2 = Tsc_Parser();
    if ( !v2 )
      return 0;
    if ( v2 == 2 )
      return 2;
    Render_Graphics((int)&Dst_Rects, 0, 0, (int)&Dst_Rects, 10);
    sub_41D840();
    sub_421F10();
    if ( Key_For_Jump & Key_Pressed )
    {
      sub_421C50();
      sub_421750(v4);
      *a1 = dword_4A5504[2 * dword_4A5544];
      return 1;
    }
    if ( Key_For_Shoot & Key_Pressed )
    {
      sub_421C50();
      sub_421750(v4);
      *a1 = 0;
      return 1;
    }
    Display_FPS();
  }
  while ( Upd_Scr_With_Wind_(AppWinHandle) );
  return 0;
}
// 493628: using guessed type int Key_For_Jump;
// 49362C: using guessed type int Key_For_Shoot;
// 498B20: using guessed type int dword_498B20;
// 49E210: using guessed type int Key_Held;
// 49E214: using guessed type int Key_Pressed;
// 4A5504: using guessed type int dword_4A5504[];
// 4A5544: using guessed type int dword_4A5544;

//----- (0041DBD0) --------------------------------------------------------
int __cdecl Snake(int Level)
{
  int result; // eax@8
  signed int BulletID; // [sp+4h] [bp-4h]@0

  switch ( Level )
  {
    case 1:
      BulletID = 1;
      break;
    case 2:
      BulletID = 2;
      break;
    case 3:
      BulletID = 3;
      break;
  }
  result = Count_Weapon_Shot_Occurences(1);
  if ( result <= 3 && Key_For_Shoot_Duplicate & Key_Pressed )
  {
    if ( Rmv_Ammo_From_Weap(1) )
    {
      if ( Quote_IsFacingUp )
      {
        if ( *(_DWORD *)&Quote_Direction_Faced )
        {
          Create_Bullet(BulletID, Quote_X_Position + 1536, Quote_Y_Position - 5120, 1);
          Create_Animated_Effect(Quote_X_Position + 1536, Quote_Y_Position - 5120, 3, 0);
        }
        else
        {
          Create_Bullet(BulletID, Quote_X_Position - 1536, Quote_Y_Position - 5120, 1);
          Create_Animated_Effect(Quote_X_Position - 1536, Quote_Y_Position - 5120, 3, 0);
        }
      }
      else if ( Quote_IsFacingDown )
      {
        if ( *(_DWORD *)&Quote_Direction_Faced )
        {
          Create_Bullet(BulletID, Quote_X_Position + 1536, Quote_Y_Position + 5120, 3);
          Create_Animated_Effect(Quote_X_Position + 1536, Quote_Y_Position + 5120, 3, 0);
        }
        else
        {
          Create_Bullet(BulletID, Quote_X_Position - 1536, Quote_Y_Position + 5120, 3);
          Create_Animated_Effect(Quote_X_Position - 1536, Quote_Y_Position + 5120, 3, 0);
        }
      }
      else if ( *(_DWORD *)&Quote_Direction_Faced )
      {
        Create_Bullet(BulletID, Quote_X_Position + 3072, Quote_Y_Position + 1024, 2);
        Create_Animated_Effect(Quote_X_Position + 6144, Quote_Y_Position + 1024, 3, 0);
      }
      else
      {
        Create_Bullet(BulletID, Quote_X_Position - 3072, Quote_Y_Position + 1024, 0);
        Create_Animated_Effect(Quote_X_Position - 6144, Quote_Y_Position + 1024, 3, 0);
      }
      result = Play_Sound_Effect(33, 1);
    }
    else
    {
      result = Unequ_Weap();
    }
  }
  return result;
}
// 493614: using guessed type int Key_For_Shoot_Duplicate;
// 49E214: using guessed type int Key_Pressed;
// 49E644: using guessed type int Quote_IsFacingUp;
// 49E648: using guessed type int Quote_IsFacingDown;

//----- (0041DE60) --------------------------------------------------------
int __cdecl PolarStar(int Level)
{
  int result; // eax@8
  signed int BulletID; // [sp+4h] [bp-4h]@0

  switch ( Level )
  {
    case 1:
      BulletID = 4;
      break;
    case 2:
      BulletID = 5;
      break;
    case 3:
      BulletID = 6;
      break;
  }
  result = Count_Weapon_Shot_Occurences(2);
  if ( result <= 1 && Key_For_Shoot_Duplicate & Key_Pressed )
  {
    if ( Rmv_Ammo_From_Weap(1) )
    {
      if ( Quote_IsFacingUp )
      {
        if ( *(_DWORD *)&Quote_Direction_Faced )
        {
          Create_Bullet(BulletID, Quote_X_Position + 512, Quote_Y_Position - 4096, 1);
          Create_Animated_Effect(Quote_X_Position + 512, Quote_Y_Position - 4096, 3, 0);
        }
        else
        {
          Create_Bullet(BulletID, Quote_X_Position - 512, Quote_Y_Position - 4096, 1);
          Create_Animated_Effect(Quote_X_Position - 512, Quote_Y_Position - 4096, 3, 0);
        }
      }
      else if ( Quote_IsFacingDown )
      {
        if ( *(_DWORD *)&Quote_Direction_Faced )
        {
          Create_Bullet(BulletID, Quote_X_Position + 512, Quote_Y_Position + 4096, 3);
          Create_Animated_Effect(Quote_X_Position + 512, Quote_Y_Position + 4096, 3, 0);
        }
        else
        {
          Create_Bullet(BulletID, Quote_X_Position - 512, Quote_Y_Position + 4096, 3);
          Create_Animated_Effect(Quote_X_Position - 512, Quote_Y_Position + 4096, 3, 0);
        }
      }
      else if ( *(_DWORD *)&Quote_Direction_Faced )
      {
        Create_Bullet(BulletID, Quote_X_Position + 3072, Quote_Y_Position + 1536, 2);
        Create_Animated_Effect(Quote_X_Position + 6144, Quote_Y_Position + 1536, 3, 0);
      }
      else
      {
        Create_Bullet(BulletID, Quote_X_Position - 3072, Quote_Y_Position + 1536, 0);
        Create_Animated_Effect(Quote_X_Position - 6144, Quote_Y_Position + 1536, 3, 0);
      }
      if ( Level == 3 )
        result = Play_Sound_Effect(49, 1);
      else
        result = Play_Sound_Effect(32, 1);
    }
    else
    {
      result = Play_Sound_Effect(37, 1);
    }
  }
  return result;
}
// 493614: using guessed type int Key_For_Shoot_Duplicate;
// 49E214: using guessed type int Key_Pressed;
// 49E644: using guessed type int Quote_IsFacingUp;
// 49E648: using guessed type int Quote_IsFacingDown;

//----- (0041E110) --------------------------------------------------------
int __cdecl Fireball(int a1)
{
  int result; // eax@1
  signed int BulletID; // [sp+4h] [bp-4h]@0

  result = a1;
  switch ( a1 )
  {
    case 1:
      result = Count_Weapon_Shot_Occurences(3);
      if ( result > 1 )
        return result;
      BulletID = 7;
      break;
    case 2:
      result = Count_Weapon_Shot_Occurences(3);
      if ( result > 2 )
        return result;
      BulletID = 8;
      break;
    case 3:
      result = Count_Weapon_Shot_Occurences(3);
      if ( result > 3 )
        return result;
      BulletID = 9;
      break;
  }
  if ( Key_For_Shoot_Duplicate & Key_Pressed )
  {
    if ( Rmv_Ammo_From_Weap(1) )
    {
      if ( Quote_IsFacingUp )
      {
        if ( *(_DWORD *)&Quote_Direction_Faced )
        {
          Create_Bullet(BulletID, Quote_X_Position + 2048, Quote_Y_Position - 4096, 1);
          Create_Animated_Effect(Quote_X_Position + 2048, Quote_Y_Position - 4096, 3, 0);
        }
        else
        {
          Create_Bullet(BulletID, Quote_X_Position - 2048, Quote_Y_Position - 4096, 1);
          Create_Animated_Effect(Quote_X_Position - 2048, Quote_Y_Position - 4096, 3, 0);
        }
      }
      else if ( Quote_IsFacingDown )
      {
        if ( *(_DWORD *)&Quote_Direction_Faced )
        {
          Create_Bullet(BulletID, Quote_X_Position + 2048, Quote_Y_Position + 4096, 3);
          Create_Animated_Effect(Quote_X_Position + 2048, Quote_Y_Position + 4096, 3, 0);
        }
        else
        {
          Create_Bullet(BulletID, Quote_X_Position - 2048, Quote_Y_Position + 4096, 3);
          Create_Animated_Effect(Quote_X_Position - 2048, Quote_Y_Position + 4096, 3, 0);
        }
      }
      else if ( *(_DWORD *)&Quote_Direction_Faced )
      {
        Create_Bullet(BulletID, Quote_X_Position + 3072, Quote_Y_Position + 1024, 2);
        Create_Animated_Effect(Quote_X_Position + 6144, Quote_Y_Position + 1024, 3, 0);
      }
      else
      {
        Create_Bullet(BulletID, Quote_X_Position - 3072, Quote_Y_Position + 1024, 0);
        Create_Animated_Effect(Quote_X_Position - 6144, Quote_Y_Position + 1024, 3, 0);
      }
      result = Play_Sound_Effect(34, 1);
    }
    else
    {
      result = Unequ_Weap();
    }
  }
  return result;
}
// 493614: using guessed type int Key_For_Shoot_Duplicate;
// 49E214: using guessed type int Key_Pressed;
// 49E644: using guessed type int Quote_IsFacingUp;
// 49E648: using guessed type int Quote_IsFacingDown;

//----- (0041E3D0) --------------------------------------------------------
char __cdecl MachineGun(int Level)
{
  int v1; // eax@1
  signed int BulletID; // [sp+4h] [bp-4h]@0

  v1 = Count_Weapon_Shot_Occurences(4);
  if ( v1 <= 4 )
  {
    switch ( Level )
    {
      case 1:
        BulletID = 10;
        break;
      case 2:
        BulletID = 11;
        break;
      case 3:
        BulletID = 12;
        break;
    }
    if ( !(Key_For_Shoot_Duplicate & Key_Held) )
      Time_Between_Shots = 6;
    if ( Key_For_Shoot_Duplicate & Key_Held )
    {
      LOBYTE(v1) = Time_Between_Shots++ + 1;
      if ( (signed int)(unsigned __int8)Time_Between_Shots >= 6 )
      {
        Time_Between_Shots = 0;
        if ( Rmv_Ammo_From_Weap(1) )
        {
          if ( Quote_IsFacingUp )
          {
            if ( Level == 3 )
              Quote_Y_Velocity += 256;
            if ( *(_DWORD *)&Quote_Direction_Faced )
            {
              Create_Bullet(BulletID, Quote_X_Position + 1536, Quote_Y_Position - 4096, 1);
              Create_Animated_Effect(Quote_X_Position + 1536, Quote_Y_Position - 4096, 3, 0);
            }
            else
            {
              Create_Bullet(BulletID, Quote_X_Position - 1536, Quote_Y_Position - 4096, 1);
              Create_Animated_Effect(Quote_X_Position - 1536, Quote_Y_Position - 4096, 3, 0);
            }
          }
          else if ( Quote_IsFacingDown )
          {
            if ( Level == 3 )
            {
              if ( Quote_Y_Velocity > 0 )
                Quote_Y_Velocity /= 2;
              if ( Quote_Y_Velocity > -1024 )
              {
                Quote_Y_Velocity -= 512;
                if ( Quote_Y_Velocity < -1024 )
                  Quote_Y_Velocity = -1024;
              }
            }
            if ( *(_DWORD *)&Quote_Direction_Faced )
            {
              Create_Bullet(BulletID, Quote_X_Position + 1536, Quote_Y_Position + 4096, 3);
              Create_Animated_Effect(Quote_X_Position + 1536, Quote_Y_Position + 4096, 3, 0);
            }
            else
            {
              Create_Bullet(BulletID, Quote_X_Position - 1536, Quote_Y_Position + 4096, 3);
              Create_Animated_Effect(Quote_X_Position - 1536, Quote_Y_Position + 4096, 3, 0);
            }
          }
          else if ( *(_DWORD *)&Quote_Direction_Faced )
          {
            Create_Bullet(BulletID, Quote_X_Position + 6144, Quote_Y_Position + 1536, 2);
            Create_Animated_Effect(Quote_X_Position + 6144, Quote_Y_Position + 1536, 3, 0);
          }
          else
          {
            Create_Bullet(BulletID, Quote_X_Position - 6144, Quote_Y_Position + 1536, 0);
            Create_Animated_Effect(Quote_X_Position - 6144, Quote_Y_Position + 1536, 3, 0);
          }
          if ( Level == 3 )
            LOBYTE(v1) = Play_Sound_Effect(49, 1);
          else
            LOBYTE(v1) = Play_Sound_Effect(32, 1);
        }
        else
        {
          LOBYTE(v1) = Play_Sound_Effect(37, 1);
          if ( !Empty_Effect_Timer )
          {
            LOBYTE(v1) = Create_Animated_Effect(Quote_X_Position, Quote_Y_Position, 16, 0);
            Empty_Effect_Timer = 50;
          }
        }
      }
    }
    else
    {
      LOBYTE(v1) = Machine_Gun_Reload_Timer++ + 1;
      if ( EquippedItems & 8 )
      {
        if ( Machine_Gun_Reload_Timer > 1 )
        {
          Machine_Gun_Reload_Timer = 0;
          LOBYTE(v1) = Add_Ammo_To_Weap(1);
        }
      }
      else if ( Machine_Gun_Reload_Timer > 4 )
      {
        Machine_Gun_Reload_Timer = 0;
        LOBYTE(v1) = Add_Ammo_To_Weap(1);
      }
    }
  }
  return v1;
}
// 493614: using guessed type int Key_For_Shoot_Duplicate;
// 49E210: using guessed type int Key_Held;
// 49E644: using guessed type int Quote_IsFacingUp;
// 49E648: using guessed type int Quote_IsFacingDown;
// 49E650: using guessed type int EquippedItems;
// 49E670: using guessed type int Quote_Y_Velocity;
// 49E6CA: using guessed type char Time_Between_Shots;
// 4A554C: using guessed type int Empty_Effect_Timer;
// 4A5554: using guessed type int Machine_Gun_Reload_Timer;

//----- (0041E7B0) --------------------------------------------------------
int __cdecl Missile_Launcher(int Level, int Super_Or_Normal)
{
  int result; // eax@2
  signed int BulletID; // [sp+10h] [bp-4h]@0

  if ( Super_Or_Normal )
  {
    result = Level;
    switch ( Level )
    {
      case 1:
        BulletID = 28;
        break;
      case 2:
        BulletID = 29;
        break;
      case 3:
        BulletID = 30;
        break;
    }
    switch ( Level )
    {
      case 1:
        result = Count_Weapon_Shot_Occurences(10);
        if ( result > 0 )
          return result;
        result = Count_Weapon_Shot_Occurences(11);
        if ( result > 0 )
          return result;
        break;
      case 2:
        result = Count_Weapon_Shot_Occurences(10);
        if ( result > 1 )
          return result;
        result = Count_Weapon_Shot_Occurences(11);
        if ( result > 1 )
          return result;
        break;
      case 3:
        result = Count_Weapon_Shot_Occurences(10);
        if ( result > 3 )
          return result;
        result = Count_Weapon_Shot_Occurences(11);
        if ( result > 3 )
          return result;
        break;
    }
  }
  else
  {
    switch ( Level )
    {
      case 1:
        BulletID = 13;
        break;
      case 2:
        BulletID = 14;
        break;
      case 3:
        BulletID = 15;
        break;
    }
    result = Level;
    switch ( Level )
    {
      case 1:
        result = Count_Weapon_Shot_Occurences(5);
        if ( result > 0 )
          return result;
        result = Count_Weapon_Shot_Occurences(6);
        if ( result > 0 )
          return result;
        break;
      case 2:
        result = Count_Weapon_Shot_Occurences(5);
        if ( result > 1 )
          return result;
        result = Count_Weapon_Shot_Occurences(6);
        if ( result > 1 )
          return result;
        break;
      case 3:
        result = Count_Weapon_Shot_Occurences(5);
        if ( result > 3 )
          return result;
        result = Count_Weapon_Shot_Occurences(6);
        if ( result > 3 )
          return result;
        break;
    }
  }
  if ( !(Key_For_Shoot_Duplicate & Key_Pressed) )
    return result;
  if ( Level < 3 )
  {
    if ( !Rmv_Ammo_From_Weap(1) )
    {
      result = Play_Sound_Effect(37, 1);
      if ( !Empty_Effect_Timer )
      {
        result = Create_Animated_Effect(Quote_X_Position, Quote_Y_Position, 16, 0);
        Empty_Effect_Timer = 50;
      }
      return result;
    }
    if ( Quote_IsFacingUp )
    {
      if ( *(_DWORD *)&Quote_Direction_Faced )
      {
        Create_Bullet(BulletID, Quote_X_Position + 512, Quote_Y_Position - 4096, 1);
        Create_Animated_Effect(Quote_X_Position + 512, Quote_Y_Position - 4096, 3, 0);
      }
      else
      {
        Create_Bullet(BulletID, Quote_X_Position - 512, Quote_Y_Position - 4096, 1);
        Create_Animated_Effect(Quote_X_Position - 512, Quote_Y_Position - 4096, 3, 0);
      }
    }
    else if ( Quote_IsFacingDown )
    {
      if ( *(_DWORD *)&Quote_Direction_Faced )
      {
        Create_Bullet(BulletID, Quote_X_Position + 512, Quote_Y_Position + 4096, 3);
        Create_Animated_Effect(Quote_X_Position + 512, Quote_Y_Position + 4096, 3, 0);
      }
      else
      {
        Create_Bullet(BulletID, Quote_X_Position - 512, Quote_Y_Position + 4096, 3);
        Create_Animated_Effect(Quote_X_Position - 512, Quote_Y_Position + 4096, 3, 0);
      }
    }
    else if ( *(_DWORD *)&Quote_Direction_Faced )
    {
      Create_Bullet(BulletID, Quote_X_Position + 3072, Quote_Y_Position, 2);
      Create_Animated_Effect(Quote_X_Position + 6144, Quote_Y_Position, 3, 0);
    }
    else
    {
      Create_Bullet(BulletID, Quote_X_Position - 3072, Quote_Y_Position, 0);
      Create_Animated_Effect(Quote_X_Position - 6144, Quote_Y_Position, 3, 0);
    }
    return Play_Sound_Effect(32, 1);
  }
  if ( Rmv_Ammo_From_Weap(1) )
  {
    if ( Quote_IsFacingUp )
    {
      if ( *(_DWORD *)&Quote_Direction_Faced )
      {
        Create_Bullet(BulletID, Quote_X_Position + 512, Quote_Y_Position - 4096, 1);
        Create_Animated_Effect(Quote_X_Position + 512, Quote_Y_Position - 4096, 3, 0);
        Create_Bullet(BulletID, Quote_X_Position + 1536, Quote_Y_Position, 1);
        Create_Bullet(BulletID, Quote_X_Position - 1536, Quote_Y_Position, 1);
      }
      else
      {
        Create_Bullet(BulletID, Quote_X_Position - 512, Quote_Y_Position - 4096, 1);
        Create_Animated_Effect(Quote_X_Position - 512, Quote_Y_Position - 4096, 3, 0);
        Create_Bullet(BulletID, Quote_X_Position + 1536, Quote_Y_Position, 1);
        Create_Bullet(BulletID, Quote_X_Position - 1536, Quote_Y_Position, 1);
      }
    }
    else if ( Quote_IsFacingDown )
    {
      if ( *(_DWORD *)&Quote_Direction_Faced )
      {
        Create_Bullet(BulletID, Quote_X_Position + 512, Quote_Y_Position + 4096, 3);
        Create_Animated_Effect(Quote_X_Position + 512, Quote_Y_Position + 4096, 3, 0);
        Create_Bullet(BulletID, Quote_X_Position - 1536, Quote_Y_Position, 3);
        Create_Bullet(BulletID, Quote_X_Position + 1536, Quote_Y_Position, 3);
      }
      else
      {
        Create_Bullet(BulletID, Quote_X_Position - 512, Quote_Y_Position + 4096, 3);
        Create_Animated_Effect(Quote_X_Position - 512, Quote_Y_Position + 4096, 3, 0);
        Create_Bullet(BulletID, Quote_X_Position + 1536, Quote_Y_Position, 3);
        Create_Bullet(BulletID, Quote_X_Position - 1536, Quote_Y_Position, 3);
      }
    }
    else if ( *(_DWORD *)&Quote_Direction_Faced )
    {
      Create_Bullet(BulletID, Quote_X_Position + 3072, Quote_Y_Position + 512, 2);
      Create_Animated_Effect(Quote_X_Position + 6144, Quote_Y_Position + 512, 3, 0);
      Create_Bullet(BulletID, Quote_X_Position, Quote_Y_Position - 4096, 2);
      Create_Bullet(BulletID, Quote_X_Position - 2048, Quote_Y_Position - 512, 2);
    }
    else
    {
      Create_Bullet(BulletID, Quote_X_Position - 3072, Quote_Y_Position + 512, 0);
      Create_Animated_Effect(Quote_X_Position - 6144, Quote_Y_Position + 512, 3, 0);
      Create_Bullet(BulletID, Quote_X_Position, Quote_Y_Position - 4096, 0);
      Create_Bullet(BulletID, Quote_X_Position + 2048, Quote_Y_Position - 512, 0);
    }
    return Play_Sound_Effect(32, 1);
  }
  result = Play_Sound_Effect(37, 1);
  if ( !Empty_Effect_Timer )
  {
    result = Create_Animated_Effect(Quote_X_Position, Quote_Y_Position, 16, 0);
    Empty_Effect_Timer = 50;
  }
  return result;
}
// 493614: using guessed type int Key_For_Shoot_Duplicate;
// 49E214: using guessed type int Key_Pressed;
// 49E644: using guessed type int Quote_IsFacingUp;
// 49E648: using guessed type int Quote_IsFacingDown;
// 4A554C: using guessed type int Empty_Effect_Timer;

//----- (0041EFD0) --------------------------------------------------------
int Bubbler_Lvl_1()
{
  int result; // eax@1

  result = Count_Weapon_Shot_Occurences(7);
  if ( result <= 3 )
  {
    if ( Key_For_Shoot_Duplicate & Key_Pressed )
    {
      if ( Rmv_Ammo_From_Weap(1) )
      {
        if ( Quote_IsFacingUp )
        {
          if ( *(_DWORD *)&Quote_Direction_Faced )
          {
            Create_Bullet(19, Quote_X_Position + 512, Quote_Y_Position - 1024, 1);
            Create_Animated_Effect(Quote_X_Position + 512, Quote_Y_Position - 1024, 3, 0);
          }
          else
          {
            Create_Bullet(19, Quote_X_Position - 512, Quote_Y_Position - 1024, 1);
            Create_Animated_Effect(Quote_X_Position - 512, Quote_Y_Position - 1024, 3, 0);
          }
        }
        else if ( Quote_IsFacingDown )
        {
          if ( *(_DWORD *)&Quote_Direction_Faced )
          {
            Create_Bullet(19, Quote_X_Position + 512, Quote_Y_Position + 1024, 3);
            Create_Animated_Effect(Quote_X_Position + 512, Quote_Y_Position + 1024, 3, 0);
          }
          else
          {
            Create_Bullet(19, Quote_X_Position - 512, Quote_Y_Position + 1024, 3);
            Create_Animated_Effect(Quote_X_Position - 512, Quote_Y_Position + 1024, 3, 0);
          }
        }
        else if ( *(_DWORD *)&Quote_Direction_Faced )
        {
          Create_Bullet(19, Quote_X_Position + 3072, Quote_Y_Position + 1536, 2);
          Create_Animated_Effect(Quote_X_Position + 6144, Quote_Y_Position + 1536, 3, 0);
        }
        else
        {
          Create_Bullet(19, Quote_X_Position - 3072, Quote_Y_Position + 1536, 0);
          Create_Animated_Effect(Quote_X_Position - 6144, Quote_Y_Position + 1536, 3, 0);
        }
        result = Play_Sound_Effect(48, 1);
      }
      else
      {
        result = Play_Sound_Effect(37, 1);
        if ( !Empty_Effect_Timer )
        {
          result = Create_Animated_Effect(Quote_X_Position, Quote_Y_Position, 16, 0);
          Empty_Effect_Timer = 50;
        }
      }
    }
    else
    {
      result = dword_4A5558++ + 1;
      if ( dword_4A5558 > 20 )
      {
        dword_4A5558 = 0;
        result = Add_Ammo_To_Weap(1);
      }
    }
  }
  return result;
}
// 493614: using guessed type int Key_For_Shoot_Duplicate;
// 49E214: using guessed type int Key_Pressed;
// 49E644: using guessed type int Quote_IsFacingUp;
// 49E648: using guessed type int Quote_IsFacingDown;
// 4A554C: using guessed type int Empty_Effect_Timer;
// 4A5558: using guessed type int dword_4A5558;

//----- (0041F280) --------------------------------------------------------
char __cdecl Bubbler_Lvl_2_3(int Level)
{
  int v1; // eax@1
  int BulletID; // [sp+8h] [bp+8h]@2

  v1 = Count_Weapon_Shot_Occurences(7);
  if ( v1 <= 15 )
  {
    LOBYTE(v1) = Level + 18;
    BulletID = Level + 18;
    if ( !(Key_For_Shoot_Duplicate & Key_Held) )
      Time_Between_Shots = 6;
    if ( Key_For_Shoot_Duplicate & Key_Held )
    {
      LOBYTE(v1) = Time_Between_Shots++ + 1;
      if ( (signed int)(unsigned __int8)Time_Between_Shots >= 7 )
      {
        Time_Between_Shots = 0;
        if ( Rmv_Ammo_From_Weap(1) )
        {
          if ( Quote_IsFacingUp )
          {
            if ( *(_DWORD *)&Quote_Direction_Faced )
            {
              Create_Bullet(BulletID, Quote_X_Position + 1536, Quote_Y_Position - 4096, 1);
              Create_Animated_Effect(Quote_X_Position + 1536, Quote_Y_Position - 0x2000, 3, 0);
            }
            else
            {
              Create_Bullet(BulletID, Quote_X_Position - 1536, Quote_Y_Position - 4096, 1);
              Create_Animated_Effect(Quote_X_Position - 1536, Quote_Y_Position - 0x2000, 3, 0);
            }
          }
          else if ( Quote_IsFacingDown )
          {
            if ( *(_DWORD *)&Quote_Direction_Faced )
            {
              Create_Bullet(BulletID, Quote_X_Position + 1536, Quote_Y_Position + 4096, 3);
              Create_Animated_Effect(Quote_X_Position + 1536, Quote_Y_Position + 0x2000, 3, 0);
            }
            else
            {
              Create_Bullet(BulletID, Quote_X_Position - 1536, Quote_Y_Position + 4096, 3);
              Create_Animated_Effect(Quote_X_Position - 1536, Quote_Y_Position + 0x2000, 3, 0);
            }
          }
          else if ( *(_DWORD *)&Quote_Direction_Faced )
          {
            Create_Bullet(BulletID, Quote_X_Position + 3072, Quote_Y_Position + 1536, 2);
            Create_Animated_Effect(Quote_X_Position + 6144, Quote_Y_Position + 1536, 3, 0);
          }
          else
          {
            Create_Bullet(BulletID, Quote_X_Position - 3072, Quote_Y_Position + 1536, 0);
            Create_Animated_Effect(Quote_X_Position - 6144, Quote_Y_Position + 1536, 3, 0);
          }
          LOBYTE(v1) = Play_Sound_Effect(48, 1);
        }
        else
        {
          LOBYTE(v1) = Play_Sound_Effect(37, 1);
          if ( !Empty_Effect_Timer )
          {
            LOBYTE(v1) = Create_Animated_Effect(Quote_X_Position, Quote_Y_Position, 16, 0);
            Empty_Effect_Timer = 50;
          }
        }
      }
    }
    else if ( ++dword_4A555C > 1 )
    {
      dword_4A555C = 0;
      LOBYTE(v1) = Add_Ammo_To_Weap(1);
    }
  }
  return v1;
}
// 493614: using guessed type int Key_For_Shoot_Duplicate;
// 49E210: using guessed type int Key_Held;
// 49E644: using guessed type int Quote_IsFacingUp;
// 49E648: using guessed type int Quote_IsFacingDown;
// 49E6CA: using guessed type char Time_Between_Shots;
// 4A554C: using guessed type int Empty_Effect_Timer;
// 4A555C: using guessed type int dword_4A555C;

//----- (0041F580) --------------------------------------------------------
int __cdecl Blade(int a1)
{
  int result; // eax@1
  signed int BulletID; // [sp+4h] [bp-4h]@0

  result = Count_Weapon_Shot_Occurences(9);
  if ( result <= 0 )
  {
    result = a1;
    switch ( a1 )
    {
      case 1:
        BulletID = 25;
        break;
      case 2:
        BulletID = 26;
        break;
      case 3:
        BulletID = 27;
        break;
    }
    if ( Key_For_Shoot_Duplicate & Key_Pressed )
    {
      if ( Quote_IsFacingUp )
      {
        if ( *(_DWORD *)&Quote_Direction_Faced )
          Create_Bullet(BulletID, Quote_X_Position + 512, Quote_Y_Position + 2048, 1);
        else
          Create_Bullet(BulletID, Quote_X_Position - 512, Quote_Y_Position + 2048, 1);
      }
      else if ( Quote_IsFacingDown )
      {
        if ( *(_DWORD *)&Quote_Direction_Faced )
          Create_Bullet(BulletID, Quote_X_Position + 512, Quote_Y_Position - 3072, 3);
        else
          Create_Bullet(BulletID, Quote_X_Position - 512, Quote_Y_Position - 3072, 3);
      }
      else if ( *(_DWORD *)&Quote_Direction_Faced )
      {
        Create_Bullet(BulletID, Quote_X_Position - 3072, Quote_Y_Position - 1536, 2);
      }
      else
      {
        Create_Bullet(BulletID, Quote_X_Position + 3072, Quote_Y_Position - 1536, 0);
      }
      result = Play_Sound_Effect(34, 1);
    }
  }
  return result;
}
// 493614: using guessed type int Key_For_Shoot_Duplicate;
// 49E214: using guessed type int Key_Pressed;
// 49E644: using guessed type int Quote_IsFacingUp;
// 49E648: using guessed type int Quote_IsFacingDown;

//----- (0041F710) --------------------------------------------------------
int __cdecl Nemesis(int Bullet_Level)
{
  int result; // eax@8
  signed int BulletID; // [sp+8h] [bp-4h]@0

  switch ( Bullet_Level )
  {
    case 1:
      BulletID = 34;
      break;
    case 2:
      BulletID = 35;
      break;
    case 3:
      BulletID = 36;
      break;
  }
  result = Count_Weapon_Shot_Occurences(12);
  if ( result <= 1 && Key_For_Shoot_Duplicate & Key_Pressed )
  {
    if ( Rmv_Ammo_From_Weap(1) )
    {
      if ( Quote_IsFacingUp )
      {
        if ( *(_DWORD *)&Quote_Direction_Faced )
        {
          Create_Bullet(BulletID, Quote_X_Position + 512, Quote_Y_Position - 6144, 1);
          result = Create_Animated_Effect(Quote_X_Position + 512, Quote_Y_Position - 6144, 3, 0);
        }
        else
        {
          Create_Bullet(BulletID, Quote_X_Position - 512, Quote_Y_Position - 6144, 1);
          result = Create_Animated_Effect(Quote_X_Position - 512, Quote_Y_Position - 6144, 3, 0);
        }
      }
      else if ( Quote_IsFacingDown )
      {
        if ( *(_DWORD *)&Quote_Direction_Faced )
        {
          Create_Bullet(BulletID, Quote_X_Position + 512, Quote_Y_Position + 6144, 3);
          result = Create_Animated_Effect(Quote_X_Position + 512, Quote_Y_Position + 6144, 3, 0);
        }
        else
        {
          Create_Bullet(BulletID, Quote_X_Position - 512, Quote_Y_Position + 6144, 3);
          result = Create_Animated_Effect(Quote_X_Position - 512, Quote_Y_Position + 6144, 3, 0);
        }
      }
      else if ( *(_DWORD *)&Quote_Direction_Faced )
      {
        Create_Bullet(BulletID, Quote_X_Position + 11264, Quote_Y_Position + 1536, 2);
        result = Create_Animated_Effect(Quote_X_Position + 0x2000, Quote_Y_Position + 1536, 3, 0);
      }
      else
      {
        Create_Bullet(BulletID, Quote_X_Position - 11264, Quote_Y_Position + 1536, 0);
        result = Create_Animated_Effect(Quote_X_Position - 0x2000, Quote_Y_Position + 1536, 3, 0);
      }
      switch ( Bullet_Level )
      {
        case 1:
          result = Play_Sound_Effect(117, 1);
          break;
        case 2:
          result = Play_Sound_Effect(49, 1);
          break;
        case 3:
          result = Play_Sound_Effect(60, 1);
          break;
      }
    }
    else
    {
      result = Play_Sound_Effect(37, 1);
    }
  }
  return result;
}
// 493614: using guessed type int Key_For_Shoot_Duplicate;
// 49E214: using guessed type int Key_Pressed;
// 49E644: using guessed type int Quote_IsFacingUp;
// 49E648: using guessed type int Quote_IsFacingDown;

//----- (0041F9E0) --------------------------------------------------------
int sub_41F9E0()
{
  int result; // eax@1

  dword_4A5550 = 0;
  result = 20 * SelectedWeaponID;
  if ( *((_DWORD *)&WeaponData_ID + 5 * SelectedWeaponID) == 13 )
    result = ResetSelectedWeapon();
  return result;
}
// 499C68: using guessed type int SelectedWeaponID;
// 4A5550: using guessed type int dword_4A5550;

//----- (0041FA10) --------------------------------------------------------
int __cdecl Spur(int a1)
{
  int result; // eax@34
  signed int v2; // [sp+Ch] [bp-8h]@1
  signed int BulletID; // [sp+10h] [bp-4h]@0

  v2 = 0;
  if ( Key_For_Shoot_Duplicate & Key_Held )
  {
    if ( EquippedItems & 8 )
      EXP_Add(3);
    else
      EXP_Add(2);
    if ( ++dword_4A5550 / 2 % 2 )
    {
      if ( a1 == 1 )
      {
        Play_Sound_Effect(59, 1);
      }
      else if ( a1 == 2 )
      {
        Play_Sound_Effect(60, 1);
      }
      else if ( a1 == 3 && !LevelDownFrom3() )
      {
        Play_Sound_Effect(61, 1);
      }
    }
  }
  else
  {
    if ( dword_4A5550 )
      v2 = 1;
    dword_4A5550 = 0;
  }
  if ( LevelDownFrom3() )
  {
    if ( !dword_4A5560 )
    {
      dword_4A5560 = 1;
      Play_Sound_Effect(65, 1);
    }
  }
  else
  {
    dword_4A5560 = 0;
  }
  if ( !(Key_For_Shoot_Duplicate & Key_Held) )
    ResetSelectedWeapon();
  switch ( a1 )
  {
    case 1:
      BulletID = 6;
      v2 = 0;
      break;
    case 2:
      BulletID = 37;
      break;
    case 3:
      if ( dword_4A5560 )
        BulletID = 39;
      else
        BulletID = 38;
      break;
  }
  result = Count_Weapon_Shot_Occurences(13);
  if ( result <= 0 )
  {
    result = Count_Weapon_Shot_Occurences(14);
    if ( result <= 0 )
    {
      result = Key_For_Shoot_Duplicate & Key_Pressed;
      if ( Key_For_Shoot_Duplicate & Key_Pressed || v2 )
      {
        if ( Rmv_Ammo_From_Weap(1) )
        {
          if ( Quote_IsFacingUp )
          {
            if ( *(_DWORD *)&Quote_Direction_Faced )
            {
              Create_Bullet(BulletID, Quote_X_Position + 512, Quote_Y_Position - 4096, 1);
              Create_Animated_Effect(Quote_X_Position + 512, Quote_Y_Position - 4096, 3, 0);
            }
            else
            {
              Create_Bullet(BulletID, Quote_X_Position - 512, Quote_Y_Position - 4096, 1);
              Create_Animated_Effect(Quote_X_Position - 512, Quote_Y_Position - 4096, 3, 0);
            }
          }
          else if ( Quote_IsFacingDown )
          {
            if ( *(_DWORD *)&Quote_Direction_Faced )
            {
              Create_Bullet(BulletID, Quote_X_Position + 512, Quote_Y_Position + 4096, 3);
              Create_Animated_Effect(Quote_X_Position + 512, Quote_Y_Position + 4096, 3, 0);
            }
            else
            {
              Create_Bullet(BulletID, Quote_X_Position - 512, Quote_Y_Position + 4096, 3);
              Create_Animated_Effect(Quote_X_Position - 512, Quote_Y_Position + 4096, 3, 0);
            }
          }
          else if ( *(_DWORD *)&Quote_Direction_Faced )
          {
            Create_Bullet(BulletID, Quote_X_Position + 3072, Quote_Y_Position + 1536, 2);
            Create_Animated_Effect(Quote_X_Position + 6144, Quote_Y_Position + 1536, 3, 0);
          }
          else
          {
            Create_Bullet(BulletID, Quote_X_Position - 3072, Quote_Y_Position + 1536, 0);
            Create_Animated_Effect(Quote_X_Position - 6144, Quote_Y_Position + 1536, 3, 0);
          }
          result = BulletID - 6;
          switch ( BulletID )
          {
            case 6:
              result = Play_Sound_Effect(49, 1);
              break;
            case 37:
              result = Play_Sound_Effect(62, 1);
              break;
            case 38:
              result = Play_Sound_Effect(63, 1);
              break;
            case 39:
              result = Play_Sound_Effect(64, 1);
              break;
            default:
              return result;
          }
        }
        else
        {
          result = Play_Sound_Effect(37, 1);
        }
      }
    }
  }
  return result;
}
// 493614: using guessed type int Key_For_Shoot_Duplicate;
// 49E210: using guessed type int Key_Held;
// 49E214: using guessed type int Key_Pressed;
// 49E644: using guessed type int Quote_IsFacingUp;
// 49E648: using guessed type int Quote_IsFacingDown;
// 49E650: using guessed type int EquippedItems;
// 4A5550: using guessed type int dword_4A5550;
// 4A5560: using guessed type int dword_4A5560;

//----- (0041FE70) --------------------------------------------------------
char sub_41FE70()
{
  int v0; // eax@2
  int v1; // ST10_4@9
  int v3; // [sp+0h] [bp-Ch]@23
  int v4; // [sp+4h] [bp-8h]@15

  if ( Empty_Effect_Timer )
    LOBYTE(v0) = Empty_Effect_Timer-- - 1;
  if ( dword_4A5564 )
    --dword_4A5564;
  if ( Key_For_Shoot_Duplicate & Key_Pressed )
  {
    if ( dword_4A5564 )
      return v0;
    dword_4A5564 = 4;
  }
  LOBYTE(v0) = *(_BYTE *)&Player_Flags & 2;
  if ( !(*(_BYTE *)&Player_Flags & 2) )
  {
    v1 = *((_DWORD *)&WeaponData_ID + 5 * SelectedWeaponID);
    LOBYTE(v0) = v1 - 1;
    switch ( v1 )
    {
      case 1:
        LOBYTE(v0) = Snake(WeaponData_Level[5 * SelectedWeaponID]);
        break;
      case 2:
        LOBYTE(v0) = PolarStar(WeaponData_Level[5 * SelectedWeaponID]);
        break;
      case 3:
        LOBYTE(v0) = Fireball(WeaponData_Level[5 * SelectedWeaponID]);
        break;
      case 4:
        LOBYTE(v0) = MachineGun(WeaponData_Level[5 * SelectedWeaponID]);
        break;
      case 5:
        LOBYTE(v0) = Missile_Launcher(WeaponData_Level[5 * SelectedWeaponID], 0);
        break;
      case 7:
        LOBYTE(v0) = 20 * SelectedWeaponID;
        v4 = WeaponData_Level[5 * SelectedWeaponID];
        switch ( v4 )
        {
          case 1:
            LOBYTE(v0) = Bubbler_Lvl_1();
            break;
          case 2:
            LOBYTE(v0) = Bubbler_Lvl_2_3(2);
            break;
          case 3:
            LOBYTE(v0) = Bubbler_Lvl_2_3(3);
            break;
        }
        break;
      case 9:
        v0 = WeaponData_Level[5 * SelectedWeaponID];
        v3 = WeaponData_Level[5 * SelectedWeaponID];
        switch ( v3 )
        {
          case 1:
            LOBYTE(v0) = Blade(1);
            break;
          case 2:
            LOBYTE(v0) = Blade(2);
            break;
          case 3:
            LOBYTE(v0) = Blade(3);
            break;
        }
        break;
      case 10:
        LOBYTE(v0) = Missile_Launcher(WeaponData_Level[5 * SelectedWeaponID], 1);
        break;
      case 12:
        LOBYTE(v0) = Nemesis(WeaponData_Level[5 * SelectedWeaponID]);
        break;
      case 13:
        LOBYTE(v0) = Spur(WeaponData_Level[5 * SelectedWeaponID]);
        break;
      default:
        return v0;
    }
  }
  return v0;
}
// 493614: using guessed type int Key_For_Shoot_Duplicate;
// 499BCC: using guessed type int WeaponData_Level[];
// 499C68: using guessed type int SelectedWeaponID;
// 49E214: using guessed type int Key_Pressed;
// 4A554C: using guessed type int Empty_Effect_Timer;
// 4A5564: using guessed type int dword_4A5564;

//----- (004200C0) --------------------------------------------------------
signed int __cdecl sub_4200C0(int a1)
{
  signed int result; // eax@2
  int ptr; // [sp+0h] [bp-18h]@3
  int v3; // [sp+4h] [bp-14h]@3
  int i; // [sp+14h] [bp-4h]@3

  if ( DirectSoundCreate(0, &DirectSoundObj, 0) )
  {
    DirectSoundObj = 0;
    sub_41C6C0();
    result = 0;
  }
  else
  {
    (*((void (__cdecl **)(_DWORD, _DWORD, _DWORD))DirectSoundObj->lpVtbl + 6))(DirectSoundObj, a1, 3);
    memset(&ptr, 0, 0x14u);
    ptr = 20;
    v3 = 193;
    (*((void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))DirectSoundObj->lpVtbl + 3))(
      DirectSoundObj,
      &ptr,
      &dword_4A57EC,
      0);
    for ( i = 0; i < 160; ++i )
      SoundBufferArray[i] = 0;
    sub_41C6C0();
    result = 1;
  }
  return result;
}
// 4A5568: using guessed type int SoundBufferArray[];
// 4A57EC: using guessed type int dword_4A57EC;

//----- (004201A0) --------------------------------------------------------
int sub_4201A0()
{
  int result; // eax@2
  signed int i; // [sp+0h] [bp-4h]@2

  if ( DirectSoundObj )
  {
    result = sub_41C890();
    for ( i = 0; i < 160; ++i )
    {
      if ( SoundBufferArray[i] )
        (*(void (__cdecl **)(int))(*(_DWORD *)SoundBufferArray[i] + 8))(SoundBufferArray[i]);
      result = i + 1;
    }
    if ( dword_4A57EC )
      result = (*(int (__cdecl **)(int))(*(_DWORD *)dword_4A57EC + 8))(dword_4A57EC);
    if ( DirectSoundObj )
      result = (*((int (__cdecl **)(_DWORD))DirectSoundObj->lpVtbl + 2))(DirectSoundObj);
    DirectSoundObj = 0;
  }
  return result;
}
// 4A5568: using guessed type int SoundBufferArray[];
// 4A57EC: using guessed type int dword_4A57EC;

//----- (00420640) --------------------------------------------------------
int __cdecl Play_Sound_Effect(int SoundID, int Channel)
{
  int result; // eax@2

  if ( DirectSoundObj )
  {
    result = SoundID;
    if ( SoundBufferArray[SoundID] )
    {
      if ( Channel == -1 )
      {
        result = (*(int (__cdecl **)(int, _DWORD, _DWORD, signed int))(*(_DWORD *)SoundBufferArray[SoundID] + 48))(
                   SoundBufferArray[SoundID],
                   0,
                   0,
                   1);
      }
      else if ( Channel )
      {
        if ( Channel == 1 )
        {
          (*(void (__cdecl **)(int))(*(_DWORD *)SoundBufferArray[SoundID] + 72))(SoundBufferArray[SoundID]);
          (*(void (__cdecl **)(int, _DWORD))(*(_DWORD *)SoundBufferArray[SoundID] + 52))(SoundBufferArray[SoundID], 0);
          result = (*(int (__cdecl **)(int, _DWORD, _DWORD, _DWORD))(*(_DWORD *)SoundBufferArray[SoundID] + 48))(
                     SoundBufferArray[SoundID],
                     0,
                     0,
                     0);
        }
      }
      else
      {
        result = (*(int (__cdecl **)(int))(*(_DWORD *)SoundBufferArray[SoundID] + 72))(SoundBufferArray[SoundID]);
      }
    }
  }
  return result;
}
// 4A5568: using guessed type int SoundBufferArray[];

//----- (00420720) --------------------------------------------------------
int __cdecl sub_420720(int a1, int a2)
{
  int result; // eax@2

  if ( DirectSoundObj )
    result = (*(int (__stdcall **)(int, int))(*(_DWORD *)SoundBufferArray[a1] + 68))(
               SoundBufferArray[a1],
               10 * a2 + 100);
  return result;
}
// 4A5568: using guessed type int SoundBufferArray[];

//----- (004207E0) --------------------------------------------------------
size_t __cdecl Sound_Loader(int Ptr_Sound, int Channels, int SoundID)
{
  size_t result; // eax@2
  size_t num; // [sp+0h] [bp-7Ch]@34
  int j; // [sp+4h] [bp-78h]@25
  void *v6; // [sp+8h] [bp-74h]@34
  void *v7; // [sp+Ch] [bp-70h]@3
  int ptr; // [sp+10h] [bp-6Ch]@8
  int v9; // [sp+14h] [bp-68h]@8
  size_t v10; // [sp+18h] [bp-64h]@8
  __int16 *v11; // [sp+20h] [bp-5Ch]@8
  void *v12; // [sp+24h] [bp-58h]@34
  void *source; // [sp+28h] [bp-54h]@3
  void *v14; // [sp+2Ch] [bp-50h]@3
  size_t size; // [sp+30h] [bp-4Ch]@3
  void *v16; // [sp+34h] [bp-48h]@3
  int i; // [sp+38h] [bp-44h]@3
  void *v18; // [sp+3Ch] [bp-40h]@10
  void *v19; // [sp+40h] [bp-3Ch]@10
  size_t v20; // [sp+44h] [bp-38h]@34
  int v21; // [sp+48h] [bp-34h]@3
  char destination; // [sp+4Ch] [bp-30h]@3
  int v23; // [sp+50h] [bp-2Ch]@3
  char v24; // [sp+54h] [bp-28h]@3
  char v25; // [sp+58h] [bp-24h]@3
  int v26; // [sp+5Ch] [bp-20h]@3
  __int16 v27; // [sp+60h] [bp-1Ch]@3
  __int16 v28; // [sp+62h] [bp-1Ah]@3
  int v29; // [sp+64h] [bp-18h]@3
  int v30; // [sp+68h] [bp-14h]@3
  __int16 v31; // [sp+6Ch] [bp-10h]@3
  __int16 v32; // [sp+6Eh] [bp-Eh]@3
  char v33; // [sp+70h] [bp-Ch]@3
  int v34; // [sp+74h] [bp-8h]@3
  int v35; // [sp+78h] [bp-4h]@1

  v35 = dword_498B20;
  if ( DirectSoundObj )
  {
    source = "RIFF";
    v14 = "fmt ";
    v16 = "WAVE";
    v7 = "data";
    v32 = 8;
    v29 = 22050;
    v28 = 1;
    v27 = 1;
    v26 = 16;
    memcpy(&destination, "RIFF", 4u);
    memcpy(&v25, "fmt ", 4u);
    memcpy(&v24, "WAVE", 4u);
    memcpy(&v33, "data", 4u);
    v31 = 1;
    v30 = 22050;
    v34 = *(_DWORD *)(Ptr_Sound + 4);
    v23 = v34 + 36;
    v21 = Ptr_Sound;
    size = 0;
    for ( i = 0; i < Channels; ++i )
    {
      if ( *(_DWORD *)(v21 + 4) > (signed int)size )
        size = *(_DWORD *)(v21 + 4);
      v21 += 112;
    }
    memset(&ptr, 0, 0x14u);
    ptr = 20;
    v9 = 32994;
    v10 = size;
    v11 = &v27;
    if ( (*((int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))DirectSoundObj->lpVtbl + 3))(
           DirectSoundObj,
           &ptr,
           4 * SoundID + 4871528,
           0) )
    {
      result = -1;
    }
    else
    {
      v19 = 0;
      v18 = 0;
      v18 = malloc(size);
      v19 = malloc(size);
      if ( v18 && v19 )
      {
        memset(v18, 128, size);
        memset(v19, 128, size);
        v21 = Ptr_Sound;
        for ( i = 0; i < Channels; ++i )
        {
          if ( !Sound_Thingy(v21, (int)v18) )
          {
            if ( v18 )
              free(v18);
            if ( v19 )
              free(v19);
            return -1;
          }
          for ( j = 0; j < *(_DWORD *)(v21 + 4); ++j )
          {
            if ( *((_BYTE *)v18 + j) + *((_BYTE *)v19 + j) - 256 >= -127 )
            {
              if ( *((_BYTE *)v18 + j) + *((_BYTE *)v19 + j) - 256 <= 127 )
                *((_BYTE *)v19 + j) += *((_BYTE *)v18 + j) + -128;
              else
                *((_BYTE *)v19 + j) = -1;
            }
            else
            {
              *((_BYTE *)v19 + j) = 0;
            }
          }
          v21 += 112;
        }
        *(_BYTE *)v19 = *(_BYTE *)v19;
        *((char *)v19 + size - 1) = *((char *)v19 + size - 1);
        (*(void (__cdecl **)(int, _DWORD, size_t, void **, size_t *, void **, size_t *, _DWORD))(*(_DWORD *)SoundBufferArray[SoundID]
                                                                                               + 44))(
          SoundBufferArray[SoundID],
          0,
          size,
          &v6,
          &num,
          &v12,
          &v20,
          0);
        memcpy(v6, v19, num);
        if ( v20 )
          memcpy(v12, (char *)v19 + num, v20);
        (*(void (__cdecl **)(int, void *, size_t, void *, size_t))(*(_DWORD *)SoundBufferArray[SoundID] + 76))(
          SoundBufferArray[SoundID],
          v6,
          num,
          v12,
          v20);
        if ( v18 )
          free(v18);
        if ( v19 )
          free(v19);
        result = size;
      }
      else
      {
        if ( v18 )
          free(v18);
        if ( v19 )
          free(v19);
        result = -1;
      }
    }
  }
  else
  {
    result = 0;
  }
  return result;
}
// 498B20: using guessed type int dword_498B20;
// 4A5568: using guessed type int SoundBufferArray[];

//----- (00420BE0) --------------------------------------------------------
signed int __cdecl sub_420BE0(int a1, int Event, int a3, int a4)
{
  signed int result; // eax@18
  char str; // [sp+0h] [bp-128h]@1
  int v6; // [sp+10Ch] [bp-1Ch]@1
  char destination; // [sp+110h] [bp-18h]@1
  int v8; // [sp+124h] [bp-4h]@1

  v8 = dword_498B20;
  Move_Quote(a3 << 13, a4 << 13);
  v6 = 0;
  strcpy(&destination, "stage");
  sprintf(&str, "%s\\Prt%s", &destination, &ROM_MapHeaders_Tileset_Name[200 * a1]);
  if ( !LoadImage_Must_Prep_RAM(&str, 2) )
    v6 = 1;
  sprintf(&str, "%s\\%s.pxa", &destination, &ROM_MapHeaders_Tileset_Name[200 * a1]);
  if ( !sub_4138A0((int)&str) )
    v6 = 1;
  sprintf(&str, "%s\\%s.pxm", &destination, &ROM_MapHeaders_Map_File_Name[200 * a1]);
  if ( !sub_413770((int)&str) )
    v6 = 1;
  sprintf(&str, "%s\\%s.pxe", &destination, &ROM_MapHeaders_Map_File_Name[200 * a1]);
  if ( !sub_46EB50((int)&str) )
    v6 = 1;
  sprintf(&str, "%s\\%s.tsc", &destination, &ROM_MapHeaders_Map_File_Name[200 * a1]);
  if ( !sub_421750(&str) )
    v6 = 1;
  sprintf(&str, "%s", &ROM_MapHeaders_BGImage_File[200 * a1]);
  if ( !Bckgrd_(&str, ROM_MapHeaders_BGType[50 * a1]) )
    v6 = 1;
  strcpy(&destination, "Npc");
  sprintf(&str, "%s\\Npc%s", &destination, &ROM_MapHeaders_Sprite_File_A[200 * a1]);
  if ( !LoadImage_Must_Prep_RAM(&str, 21) )
    v6 = 1;
  sprintf(&str, "%s\\Npc%s", &destination, &ROM_MapHeaders_Sprite_File_B[50 * a1]);
  if ( !LoadImage_Must_Prep_RAM(&str, 22) )
    v6 = 1;
  if ( v6 )
  {
    result = 0;
  }
  else
  {
    sub_4140F0(&ROM_MapHeaders_Name[200 * a1]);
    Call_TSC_Event(Event);
    sub_40F130();
    Clear_All_Weapons_Obj_Slots();
    Clear_All_Effects();
    sub_425BC0();
    sub_40F330();
    sub_472740(ROM_MapHeaders_Boss_ID[200 * a1]);
    _crt_debugger_hook();
    CurrentMapID = a1;
    result = 1;
  }
  return result;
}
// 40EE60: using guessed type int _crt_debugger_hook(void);
// 4937F0: using guessed type int ROM_MapHeaders_BGType[];
// 493834: using guessed type int ROM_MapHeaders_Sprite_File_B[];
// 498B20: using guessed type int dword_498B20;
// 4A57F0: using guessed type int CurrentMapID;

//----- (00420EE0) --------------------------------------------------------
// CMU : Change MUsic
// Change playing music to Music_To_Play
int __cdecl Tsc_CMU(int Music_To_Play)
{
  int result; // eax@2

  if ( !Music_To_Play || (result = Music_To_Play, Music_To_Play != CurrentSongID) )
  {
    PreviousSongBeat = sub_41C770();
    PreviousSongID = CurrentSongID;
    sub_41C7F0();
    sub_41C6F0((&Ptr_Songs)[4 * Music_To_Play]);
    sub_41C7C0(100);
    sub_41C730(0);
    result = sub_41C790();
    CurrentSongID = Music_To_Play;
  }
  return result;
}
// 4A57F4: using guessed type int CurrentSongID;
// 4A57F8: using guessed type int PreviousSongBeat;
// 4A57FC: using guessed type int PreviousSongID;

//----- (00420F50) --------------------------------------------------------
int Tsc_RMU()
{
  int result; // eax@1

  sub_41C7F0();
  sub_41C6F0((&Ptr_Songs)[4 * PreviousSongID]);
  sub_41C730(PreviousSongBeat);
  sub_41C7C0(100);
  sub_41C790();
  result = PreviousSongID;
  CurrentSongID = PreviousSongID;
  return result;
}
// 4A57F4: using guessed type int CurrentSongID;
// 4A57F8: using guessed type int PreviousSongBeat;
// 4A57FC: using guessed type int PreviousSongID;

//----- (00420FA0) --------------------------------------------------------
int sub_420FA0()
{
  int result; // eax@1

  memset(&WhimsicalStar, 0, 0xCCu);
  WhimsicalStar_X_Position[0] = Quote_X_Position;
  WhimsicalStar_Y_Position[0] = Quote_Y_Position;
  dword_4A5850 = Quote_X_Position;
  result = Quote_Y_Position;
  dword_4A5854 = Quote_Y_Position;
  dword_4A5894 = Quote_X_Position;
  dword_4A5898 = Quote_Y_Position;
  WhimsicalStar_X_Velocity[0] = 1024;
  WhimsicalStar_Y_Velocity[0] = -512;
  dword_4A5858 = -512;
  dword_4A585C = 1024;
  dword_4A589C = 512;
  dword_4A58A0 = 512;
  return result;
}
// 4A580C: using guessed type int WhimsicalStar_X_Position[];
// 4A5810: using guessed type int WhimsicalStar_Y_Position[];
// 4A5814: using guessed type int WhimsicalStar_X_Velocity[];
// 4A5818: using guessed type int WhimsicalStar_Y_Velocity[];
// 4A5850: using guessed type int dword_4A5850;
// 4A5854: using guessed type int dword_4A5854;
// 4A5858: using guessed type int dword_4A5858;
// 4A585C: using guessed type int dword_4A585C;
// 4A5894: using guessed type int dword_4A5894;
// 4A5898: using guessed type int dword_4A5898;
// 4A589C: using guessed type int dword_4A589C;
// 4A58A0: using guessed type int dword_4A58A0;

//----- (00421040) --------------------------------------------------------
int sub_421040()
{
  int result; // eax@1
  signed int i; // [sp+0h] [bp-4h]@1

  result = ++CurrentStarID / 3;
  CurrentStarID %= 3;
  for ( i = 0; i < 3; ++i )
  {
    if ( i )
    {
      if ( WhimsicalStar_X_Position[17 * (i - 1)] >= WhimsicalStar_X_Position[17 * i] )
        WhimsicalStar_X_Velocity[17 * i] += 128;
      else
        WhimsicalStar_X_Velocity[17 * i] -= 128;
      if ( WhimsicalStar_Y_Position[17 * (i - 1)] >= WhimsicalStar_Y_Position[17 * i] )
        WhimsicalStar_Y_Velocity[17 * i] += 170;
      else
        WhimsicalStar_Y_Velocity[17 * i] -= 170;
    }
    else
    {
      if ( Quote_X_Position >= WhimsicalStar_X_Position[0] )
        WhimsicalStar_X_Velocity[0] += 128;
      else
        WhimsicalStar_X_Velocity[0] -= 128;
      if ( Quote_Y_Position >= WhimsicalStar_Y_Position[0] )
        WhimsicalStar_Y_Velocity[0] += 170;
      else
        WhimsicalStar_Y_Velocity[0] -= 170;
    }
    if ( WhimsicalStar_X_Velocity[17 * i] > 2560 )
      WhimsicalStar_X_Velocity[17 * i] = 2560;
    if ( WhimsicalStar_X_Velocity[17 * i] < -2560 )
      WhimsicalStar_X_Velocity[17 * i] = -2560;
    if ( WhimsicalStar_Y_Velocity[17 * i] > 2560 )
      WhimsicalStar_Y_Velocity[17 * i] = 2560;
    if ( WhimsicalStar_Y_Velocity[17 * i] < -2560 )
      WhimsicalStar_Y_Velocity[17 * i] = -2560;
    if ( WhimsicalStar_X_Velocity[17 * i] > 2560 )
      WhimsicalStar_X_Velocity[17 * i] = 2560;
    if ( WhimsicalStar_X_Velocity[17 * i] < -2560 )
      WhimsicalStar_X_Velocity[17 * i] = -2560;
    if ( WhimsicalStar_Y_Velocity[17 * i] > 2560 )
      WhimsicalStar_Y_Velocity[17 * i] = 2560;
    if ( WhimsicalStar_Y_Velocity[17 * i] < -2560 )
      WhimsicalStar_Y_Velocity[17 * i] = -2560;
    WhimsicalStar_X_Position[17 * i] += WhimsicalStar_X_Velocity[17 * i];
    result = 68 * i;
    WhimsicalStar_Y_Position[17 * i] += WhimsicalStar_Y_Velocity[17 * i];
    if ( i < NumWhimStars )
    {
      if ( EquippedItems & 0x80 )
      {
        result = Game_State & 2;
        if ( Game_State & 2 )
        {
          if ( CurrentStarID == i )
            result = Create_Bullet(
                       45,
                       WhimsicalStar_X_Position[17 * CurrentStarID],
                       WhimsicalStar_Y_Position[17 * CurrentStarID],
                       0);
        }
      }
    }
  }
  return result;
}
// 49E1E8: using guessed type int Game_State;
// 49E650: using guessed type int EquippedItems;
// 49E6CE: using guessed type __int16 NumWhimStars;
// 4A580C: using guessed type int WhimsicalStar_X_Position[];
// 4A5810: using guessed type int WhimsicalStar_Y_Position[];
// 4A5814: using guessed type int WhimsicalStar_X_Velocity[];
// 4A5818: using guessed type int WhimsicalStar_Y_Velocity[];
// 4A58CC: using guessed type int CurrentStarID;

//----- (004213B0) --------------------------------------------------------
int __cdecl sub_4213B0(signed int a1, signed int a2)
{
  int result; // eax@1
  signed int i; // [sp+0h] [bp-34h]@3
  int Src_Rects; // [sp+4h] [bp-30h]@1
  int v5; // [sp+8h] [bp-2Ch]@1
  int v6; // [sp+Ch] [bp-28h]@1
  int v7; // [sp+10h] [bp-24h]@1
  int v8; // [sp+14h] [bp-20h]@1
  int v9; // [sp+18h] [bp-1Ch]@1
  int v10; // [sp+1Ch] [bp-18h]@1
  int v11; // [sp+20h] [bp-14h]@1
  int v12; // [sp+24h] [bp-10h]@1
  int v13; // [sp+28h] [bp-Ch]@1
  int v14; // [sp+2Ch] [bp-8h]@1
  int v15; // [sp+30h] [bp-4h]@1

  Src_Rects = 192;
  v5 = 0;
  v6 = 200;
  v7 = 8;
  v8 = 192;
  v9 = 8;
  v10 = 200;
  v11 = 16;
  v12 = 192;
  v13 = 16;
  v14 = 200;
  v15 = 24;
  result = *(_BYTE *)&Player_Flags & 2;
  if ( !(*(_BYTE *)&Player_Flags & 2) && EquippedItems & 0x80 )
  {
    for ( i = 0; i < 3; ++i )
    {
      result = NumWhimStars;
      if ( i < NumWhimStars )
        result = Render_Graphics(
                   (int)&FullscreenRect,
                   WhimsicalStar_X_Position[17 * i] / 512 - a1 / 512 - 4,
                   WhimsicalStar_Y_Position[17 * i] / 512 - a2 / 512 - 4,
                   (int)(&Src_Rects + 4 * i),
                   16);
    }
  }
  return result;
}
// 48F91C: using guessed type int FullscreenRect;
// 49E650: using guessed type int EquippedItems;
// 49E6CE: using guessed type __int16 NumWhimStars;
// 4A580C: using guessed type int WhimsicalStar_X_Position[];
// 4A5810: using guessed type int WhimsicalStar_Y_Position[];

//----- (004214E0) --------------------------------------------------------
bool sub_4214E0()
{
  signed int i; // [sp+0h] [bp-4h]@1

  byte_4A5ADC = 0;
  Game_State &= 0xFFFFFFFB;
  for ( i = 0; i < 4; ++i )
    Prep_RAM_For_Img_(dword_498298, dword_49829C, i + 30, 0);
  memset(&unk_4A58D0, 0, 0x100u);
  Current_Script = malloc(0x5000u);
  return Current_Script != 0;
}
// 498298: using guessed type int dword_498298;
// 49829C: using guessed type int dword_49829C;
// 49E1E8: using guessed type int Game_State;
// 4A5ADC: using guessed type char byte_4A5ADC;

//----- (00421570) --------------------------------------------------------
void *sub_421570()
{
  void *result; // eax@1
  signed int i; // [sp+0h] [bp-4h]@1

  free(Current_Script);
  result = Destroy_Bitmap_Obj_(26);
  for ( i = 0; i < 4; ++i )
    result = Destroy_Bitmap_Obj_(i + 30);
  return result;
}

//----- (004215C0) --------------------------------------------------------
_BYTE *__cdecl sub_4215C0(int a1, signed int a2)
{
  _BYTE *result; // eax@1
  int v3; // [sp+0h] [bp-10h]@2
  _BYTE *i; // [sp+8h] [bp-8h]@4
  int v5; // [sp+Ch] [bp-4h]@1

  v5 = a2 / 2;
  result = (_BYTE *)(a2 / 2 + a1);
  if ( *result )
  {
    result = (_BYTE *)-(*(_BYTE *)(v5 + a1) % 256);
    v3 = -(*(_BYTE *)(v5 + a1) % 256);
  }
  else
  {
    LOBYTE(v3) = -7;
  }
  for ( i = 0; (signed int)i < a2; ++i )
  {
    result = i;
    if ( i != (_BYTE *)v5 )
      i[a1] += v3;
  }
  return result;
}

//----- (00421660) --------------------------------------------------------
int __cdecl sub_421660(char *source)
{
  int result; // eax@2
  char str; // [sp+0h] [bp-110h]@1
  int v3; // [sp+108h] [bp-8h]@1
  FILE *stream; // [sp+10Ch] [bp-4h]@3

  v3 = dword_498B20;
  sprintf(&str, "%s\\%s", byte_49E220, source);
  dword_4A5AD4 = FileLength(&str);
  if ( dword_4A5AD4 == -1 )
  {
    result = 0;
  }
  else
  {
    stream = fopen(&str, "rb");
    if ( stream )
    {
      sub_480F55((FILE *)Current_Script, 1u, dword_4A5AD4, stream);
      *((_BYTE *)Current_Script + dword_4A5AD4) = 0;
      fclose(stream);
      strcpy(byte_4A59D0, source);
      sub_4215C0((int)Current_Script, dword_4A5AD4);
      result = 1;
    }
    else
    {
      result = 0;
    }
  }
  return result;
}
// 498B20: using guessed type int dword_498B20;

//----- (00421750) --------------------------------------------------------
int __cdecl sub_421750(char *source)
{
  int result; // eax@2
  char str; // [sp+0h] [bp-118h]@1
  int v3; // [sp+108h] [bp-10h]@1
  size_t v4; // [sp+10Ch] [bp-Ch]@1
  FILE *stream; // [sp+110h] [bp-8h]@3
  size_t v6; // [sp+114h] [bp-4h]@5

  v3 = dword_498B20;
  sprintf(&str, "%s\\%s", byte_49E220, "Head.tsc");
  v4 = FileLength(&str);
  if ( v4 == -1 )
  {
    result = 0;
  }
  else
  {
    stream = fopen(&str, "rb");
    if ( stream )
    {
      sub_480F55((FILE *)Current_Script, 1u, v4, stream);
      sub_4215C0((int)Current_Script, v4);
      *((_BYTE *)Current_Script + v4) = 0;
      fclose(stream);
      sprintf(&str, "%s\\%s", byte_49E220, source);
      v6 = FileLength(&str);
      if ( v6 == -1 )
      {
        result = 0;
      }
      else
      {
        stream = fopen(&str, "rb");
        if ( stream )
        {
          sub_480F55((FILE *)((char *)Current_Script + v4), 1u, v6, stream);
          sub_4215C0((int)Current_Script + v4, v6);
          *((_BYTE *)Current_Script + v6 + v4) = 0;
          fclose(stream);
          dword_4A5AD4 = v6 + v4;
          strcpy(byte_4A59D0, source);
          result = 1;
        }
        else
        {
          result = 0;
        }
      }
    }
    else
    {
      result = 0;
    }
  }
  return result;
}
// 498B20: using guessed type int dword_498B20;

//----- (00421900) --------------------------------------------------------
// Getting 4 decimal digits from a TSC file and converting to hexadecimal number
int __cdecl TSC_Dec_to_Hex(int num)
{
  return 1000 * (*((_BYTE *)Current_Script + num) - 48)
       + 100 * (*((_BYTE *)Current_Script + num + 1) - 48)
       + 10 * (*((_BYTE *)Current_Script + num + 2) - 48)
       + *((_BYTE *)Current_Script + num + 3)
       - 48;
}

//----- (00421990) --------------------------------------------------------
signed int __cdecl Call_TSC_Event(int Event)
{
  int v2; // [sp+0h] [bp-4h]@5

  byte_4A5ADC = 1;
  Game_State |= 5u;
  dword_4A5AE8 = 0;
  TextColumn = 0;
  dword_4A5AFC = 4;
  byte_4A5ADD = 0;
  byte_4A5B30 = 0;
  FaceID = 0;
  dword_4A5B14 = 0;
  dword_4A5B2C = 0;
  Invincibility_Timer = 0;
  dword_4A5B1C = 52;
  dword_4A5B20 = 184;
  dword_4A5B24 = 268;
  dword_4A5B28 = 232;
  for ( Script_Position = 0; ; ++Script_Position )
  {
    if ( !*((_BYTE *)Current_Script + Script_Position) )
      return 0;
    if ( *((_BYTE *)Current_Script + Script_Position) != 35 )
      continue;
    v2 = TSC_Dec_to_Hex(++Script_Position);
    if ( Event == v2 )
      break;
    if ( Event < v2 )
      return 0;
  }
  while ( *((_BYTE *)Current_Script + Script_Position) != 10 )
    ++Script_Position;
  ++Script_Position;
  return 1;
}
// 49E1E8: using guessed type int Game_State;
// 49E6C8: using guessed type char Invincibility_Timer;
// 4A5ADC: using guessed type char byte_4A5ADC;
// 4A5ADD: using guessed type char byte_4A5ADD;
// 4A5AE4: using guessed type int TextColumn;
// 4A5AE8: using guessed type int dword_4A5AE8;
// 4A5AFC: using guessed type int dword_4A5AFC;
// 4A5B0C: using guessed type int FaceID;
// 4A5B14: using guessed type int dword_4A5B14;
// 4A5B1C: using guessed type int dword_4A5B1C;
// 4A5B20: using guessed type int dword_4A5B20;
// 4A5B24: using guessed type int dword_4A5B24;
// 4A5B28: using guessed type int dword_4A5B28;
// 4A5B2C: using guessed type int dword_4A5B2C;
// 4A5B30: using guessed type char byte_4A5B30;

//----- (00421AF0) --------------------------------------------------------
signed int __cdecl sub_421AF0(int a1)
{
  int v2; // [sp+0h] [bp-8h]@8
  signed int i; // [sp+4h] [bp-4h]@1

  byte_4A5ADC = 1;
  Game_State |= 4u;
  dword_4A5AE8 = 0;
  TextColumn = 0;
  dword_4A5AFC = 4;
  byte_4A5B30 = 0;
  for ( i = 0; i < 4; ++i )
  {
    dword_4A5AEC[i] = 16 * i;
    FillRects_Memory_((int)asc_498290, 0, i + 30);
    memset((char *)&unk_4A58D0 + 64 * i, 0, 0x40u);
  }
  for ( Script_Position = 0; ; ++Script_Position )
  {
    if ( !*((_BYTE *)Current_Script + Script_Position) )
      return 0;
    if ( *((_BYTE *)Current_Script + Script_Position) != 35 )
      continue;
    v2 = TSC_Dec_to_Hex(++Script_Position);
    if ( a1 == v2 )
      break;
    if ( a1 < v2 )
      return 0;
  }
  while ( *((_BYTE *)Current_Script + Script_Position) != 10 )
    ++Script_Position;
  ++Script_Position;
  return 1;
}
// 49E1E8: using guessed type int Game_State;
// 4A5ADC: using guessed type char byte_4A5ADC;
// 4A5AE4: using guessed type int TextColumn;
// 4A5AE8: using guessed type int dword_4A5AE8;
// 4A5AEC: using guessed type int dword_4A5AEC[];
// 4A5AFC: using guessed type int dword_4A5AFC;
// 4A5B30: using guessed type char byte_4A5B30;

//----- (00421C50) --------------------------------------------------------
unsigned int sub_421C50()
{
  unsigned int result; // eax@1

  byte_4A5ADC = 0;
  result = Game_State & 0xFFFFFFFB;
  Game_State &= 0xFFFFFFFB;
  Game_State |= 3u;
  byte_4A5ADD = 0;
  return result;
}
// 49E1E8: using guessed type int Game_State;
// 4A5ADC: using guessed type char byte_4A5ADC;
// 4A5ADD: using guessed type char byte_4A5ADD;

//----- (00421C80) --------------------------------------------------------
void *sub_421C80()
{
  void *result; // eax@1

  result = (void *)(dword_4A5AE8 % 4);
  if ( dword_4A5AEC[dword_4A5AE8 % 4] == 48 )
  {
    byte_4A5ADC = 3;
    Game_State |= 4u;
    FillRects_Memory_((int)asc_498290, 0, dword_4A5AE8 % 4 + 30);
    result = memset((char *)&unk_4A58D0 + 64 * (dword_4A5AE8 % 4), 0, 0x40u);
  }
  return result;
}
// 49E1E8: using guessed type int Game_State;
// 4A5ADC: using guessed type char byte_4A5ADC;
// 4A5AE8: using guessed type int dword_4A5AE8;
// 4A5AEC: using guessed type int dword_4A5AEC[];

//----- (00421D10) --------------------------------------------------------
void *__cdecl sub_421D10(int a1)
{
  void *result; // eax@7
  char Ptr_String; // [sp+0h] [bp-2Ch]@5
  char v3[7]; // [sp+1h] [bp-2Bh]@7
  int v4; // [sp+8h] [bp-24h]@1
  int v5; // [sp+Ch] [bp-20h]@1
  int v6; // [sp+10h] [bp-1Ch]@5
  int v7; // [sp+14h] [bp-18h]@1
  int v8; // [sp+18h] [bp-14h]@1
  int v9; // [sp+1Ch] [bp-10h]@1
  int v10; // [sp+20h] [bp-Ch]@1
  int i; // [sp+24h] [bp-8h]@1
  int v12; // [sp+28h] [bp-4h]@1

  v4 = dword_498B20;
  v7 = 1000;
  v8 = 100;
  v9 = 10;
  v12 = dword_4A5B34[a1];
  v5 = 0;
  v10 = 0;
  for ( i = 0; i < 3; ++i )
  {
    if ( v12 / *(&v7 + i) || v5 )
    {
      v6 = v12 / *(&v7 + i);
      *(&Ptr_String + v10) = v6 + 48;
      v5 = 1;
      v12 -= *(&v7 + i) * v6;
      ++v10;
    }
  }
  *(&Ptr_String + v10) = v12 + 48;
  v3[v10] = 0;
  Draw_Text_To_Screen(6 * TextColumn, 0, &Ptr_String, 0xFEFFFFu, dword_4A5AE8 % 4 + 30);
  strcat((char *)&unk_4A58D0 + 64 * (dword_4A5AE8 % 4), &Ptr_String);
  Play_Sound_Effect(2, 1);
  byte_4A5B30 = 0;
  result = (void *)(TextColumn + strlen(&Ptr_String));
  TextColumn = (int)result;
  if ( (signed int)result >= 35 )
  {
    TextColumn = 0;
    ++dword_4A5AE8;
    result = sub_421C80();
  }
  return result;
}
// 498B20: using guessed type int dword_498B20;
// 4A5AE4: using guessed type int TextColumn;
// 4A5AE8: using guessed type int dword_4A5AE8;
// 4A5B30: using guessed type char byte_4A5B30;
// 4A5B34: using guessed type int dword_4A5B34[];
// 421D10: using guessed type char var_2B[7];

//----- (00421E90) --------------------------------------------------------
int sub_421E90()
{
  int result; // eax@3
  signed int i; // [sp+0h] [bp-4h]@1

  dword_4A5AE8 = 0;
  TextColumn = 0;
  dword_4A5B2C = 0;
  for ( i = 0; i < 4; ++i )
  {
    dword_4A5AEC[i] = 16 * i;
    FillRects_Memory_((int)asc_498290, 0, i + 30);
    memset((char *)&unk_4A58D0 + 64 * i, 0, 0x40u);
    result = i + 1;
  }
  return result;
}
// 4A5AE4: using guessed type int TextColumn;
// 4A5AE8: using guessed type int dword_4A5AE8;
// 4A5AEC: using guessed type int dword_4A5AEC[];
// 4A5B2C: using guessed type int dword_4A5B2C;

//----- (00421F10) --------------------------------------------------------
int sub_421F10()
{
  int result; // eax@1
  int v1; // edx@19
  int v2; // [sp+0h] [bp-C8h]@7
  int v3; // [sp+4h] [bp-C4h]@7
  int v4; // [sp+8h] [bp-C0h]@7
  int v5; // [sp+Ch] [bp-BCh]@7
  int Src_Rects; // [sp+10h] [bp-B8h]@7
  int v7; // [sp+14h] [bp-B4h]@7
  int v8; // [sp+18h] [bp-B0h]@7
  int v9; // [sp+1Ch] [bp-ACh]@7
  int v10; // [sp+20h] [bp-A8h]@7
  int v11; // [sp+24h] [bp-A4h]@7
  int v12; // [sp+28h] [bp-A0h]@7
  int v13; // [sp+2Ch] [bp-9Ch]@7
  int v14; // [sp+30h] [bp-98h]@11
  int v15; // [sp+34h] [bp-94h]@11
  int v16; // [sp+38h] [bp-90h]@11
  int v17; // [sp+3Ch] [bp-8Ch]@11
  int v18; // [sp+40h] [bp-88h]@22
  int v19; // [sp+44h] [bp-84h]@22
  int v20; // [sp+48h] [bp-80h]@22
  int v21; // [sp+4Ch] [bp-7Ch]@22
  int v22; // [sp+50h] [bp-78h]@22
  int v23; // [sp+54h] [bp-74h]@22
  int v24; // [sp+58h] [bp-70h]@22
  int v25; // [sp+5Ch] [bp-6Ch]@22
  int v26; // [sp+60h] [bp-68h]@22
  int v27; // [sp+64h] [bp-64h]@22
  int v28; // [sp+68h] [bp-60h]@22
  int v29; // [sp+6Ch] [bp-5Ch]@22
  int v30; // [sp+70h] [bp-58h]@28
  int v31; // [sp+74h] [bp-54h]@28
  int v32; // [sp+78h] [bp-50h]@28
  int v33; // [sp+7Ch] [bp-4Ch]@28
  int v34; // [sp+80h] [bp-48h]@22
  int v35; // [sp+84h] [bp-44h]@22
  int v36; // [sp+88h] [bp-40h]@22
  int v37; // [sp+8Ch] [bp-3Ch]@22
  int Y_Position; // [sp+90h] [bp-38h]@7
  int v39; // [sp+94h] [bp-34h]@28
  int v40; // [sp+98h] [bp-30h]@28
  int v41; // [sp+9Ch] [bp-2Ch]@28
  int v42; // [sp+A0h] [bp-28h]@28
  int Ptr_Img_Rects; // [sp+A4h] [bp-24h]@21
  int v44; // [sp+A8h] [bp-20h]@21
  int v45; // [sp+ACh] [bp-1Ch]@21
  int v46; // [sp+B0h] [bp-18h]@21
  int v47; // [sp+B4h] [bp-14h]@14
  int v48; // [sp+B8h] [bp-10h]@22
  int v49; // [sp+BCh] [bp-Ch]@22
  int v50; // [sp+C0h] [bp-8h]@22
  int v51; // [sp+C4h] [bp-4h]@22

  result = byte_4A5ADC;
  if ( byte_4A5ADC && byte_4A5ADD & 1 )
  {
    if ( byte_4A5ADD & 0x20 )
    {
      dword_4A5B20 = 32;
      dword_4A5B28 = 80;
    }
    else
    {
      dword_4A5B20 = 184;
      dword_4A5B28 = 232;
    }
    if ( byte_4A5ADD & 2 )
    {
      Src_Rects = 0;
      v7 = 0;
      v8 = 244;
      v9 = 8;
      v10 = 0;
      v11 = 8;
      v12 = 244;
      v13 = 16;
      v2 = 0;
      v3 = 16;
      v4 = 244;
      v5 = 24;
      Render_Graphics((int)&unk_48F92C, 38, dword_4A5B20 - 10, (int)&Src_Rects, 26);
      for ( Y_Position = 1; Y_Position < 7; ++Y_Position )
        Render_Graphics((int)&unk_48F92C, 38, dword_4A5B20 + 8 * Y_Position - 10, (int)&v10, 26);
      Render_Graphics((int)&unk_48F92C, 38, dword_4A5B20 + 8 * Y_Position - 10, (int)&v2, 26);
    }
    v14 = 48 * (FaceID % 6);
    v15 = 48 * (FaceID / 6);
    v16 = 48 * (FaceID % 6) + 48;
    v17 = 48 * (FaceID / 6) + 48;
    if ( dword_4A5B10 < 26624 )
      dword_4A5B10 += 4096;
    Render_Graphics((int)&dword_4A5B1C, dword_4A5B10 / 512, dword_4A5B20 - 3, (int)&v14, 27);
    if ( FaceID )
      v47 = 56;
    else
      v47 = 0;
    for ( Y_Position = 0; Y_Position < 4; ++Y_Position )
      Render_Graphics(
        (int)&dword_4A5B1C,
        v47 + 52,
        dword_4A5B2C + dword_4A5AEC[Y_Position] + dword_4A5B20,
        (int)asc_498290,
        Y_Position + 30);
    v1 = (unsigned __int8)byte_4A5B30++ % 20;
    if ( v1 > 12 && byte_4A5ADC == 2 )
    {
      Ptr_Img_Rects = 6 * TextColumn + v47 + 52;
      v44 = dword_4A5B2C + dword_4A5B20 + dword_4A5AEC[dword_4A5AE8 % 4];
      v45 = 6 * TextColumn + v47 + 57;
      v46 = v44 + 11;
      FillRects_Memory((int)&Ptr_Img_Rects, 16711679);
    }
    v48 = 0;
    v49 = 0;
    v50 = 72;
    v51 = 16;
    v34 = 0;
    v35 = 8;
    v36 = 72;
    v37 = 24;
    v18 = 240;
    v19 = 0;
    v20 = 244;
    v21 = 8;
    v26 = 240;
    v27 = 8;
    v28 = 244;
    v29 = 16;
    v22 = 240;
    v23 = 16;
    v24 = 244;
    v25 = 24;
    if ( dword_4A5B14 )
    {
      Render_Graphics((int)&unk_48F92C, 120, 128, (int)&v48, 26);
      Render_Graphics((int)&unk_48F92C, 120, 144, (int)&v34, 26);
      Render_Graphics((int)&unk_48F92C, 192, 128, (int)&v18, 26);
      Render_Graphics((int)&unk_48F92C, 192, 136, (int)&v26, 26);
      Render_Graphics((int)&unk_48F92C, 192, 144, (int)&v26, 26);
      Render_Graphics((int)&unk_48F92C, 192, 152, (int)&v22, 26);
      if ( dword_4A5B18 < 136 )
        ++dword_4A5B18;
      if ( dword_4A5B14 >= 1000 )
      {
        Ptr_Img_Rects = 32 * ((dword_4A5B14 - 1000) % 8);
        v45 = Ptr_Img_Rects + 32;
        v44 = 16 * ((dword_4A5B14 - 1000) / 8);
        v46 = 16 * ((dword_4A5B14 - 1000) / 8) + 16;
        Render_Graphics((int)&unk_48F92C, 140, dword_4A5B18, (int)&Ptr_Img_Rects, 8);
      }
      else
      {
        Ptr_Img_Rects = 16 * (dword_4A5B14 % 16);
        v45 = Ptr_Img_Rects + 16;
        v44 = 16 * (dword_4A5B14 / 16);
        v46 = 16 * (dword_4A5B14 / 16) + 16;
        Render_Graphics((int)&unk_48F92C, 148, dword_4A5B18, (int)&Ptr_Img_Rects, 12);
      }
    }
    v30 = 152;
    v31 = 48;
    v32 = 244;
    v33 = 80;
    v39 = 112;
    v40 = 88;
    v41 = 128;
    v42 = 104;
    result = byte_4A5ADC;
    if ( byte_4A5ADC == 6 )
    {
      if ( dword_4A5AFC >= 2 )
        Y_Position = 144;
      else
        Y_Position = 4 * (2 - dword_4A5AFC) + 144;
      result = Render_Graphics((int)&unk_48F92C, 216, Y_Position, (int)&v30, 26);
      if ( dword_4A5AFC == 16 )
        result = Render_Graphics((int)&unk_48F92C, 41 * byte_4A5B08 + 211, 154, (int)&v39, 26);
    }
  }
  return result;
}
// 4A5ADC: using guessed type char byte_4A5ADC;
// 4A5ADD: using guessed type char byte_4A5ADD;
// 4A5AE4: using guessed type int TextColumn;
// 4A5AE8: using guessed type int dword_4A5AE8;
// 4A5AEC: using guessed type int dword_4A5AEC[];
// 4A5AFC: using guessed type int dword_4A5AFC;
// 4A5B08: using guessed type char byte_4A5B08;
// 4A5B0C: using guessed type int FaceID;
// 4A5B10: using guessed type int dword_4A5B10;
// 4A5B14: using guessed type int dword_4A5B14;
// 4A5B1C: using guessed type int dword_4A5B1C;
// 4A5B20: using guessed type int dword_4A5B20;
// 4A5B28: using guessed type int dword_4A5B28;
// 4A5B2C: using guessed type int dword_4A5B2C;
// 4A5B30: using guessed type char byte_4A5B30;

//----- (00422510) --------------------------------------------------------
int Tsc_Parser(void)
{
  int result; // eax@77
  int v1; // [sp+0h] [bp-C8h]@421
  signed int v2; // [sp+4h] [bp-C4h]@308
  signed int v3; // [sp+8h] [bp-C0h]@300
  char str; // [sp+10h] [bp-B8h]@430
  char destination[72]; // [sp+50h] [bp-78h]@443
  int v6; // [sp+98h] [bp-30h]@1
  int v7; // [sp+9Ch] [bp-2Ch]@6
  char Ptr_String; // [sp+A0h] [bp-28h]@446
  char v9; // [sp+A1h] [bp-27h]@447
  char v10; // [sp+A2h] [bp-26h]@447
  __int16 Life_To_Add[2]; // [sp+A4h] [bp-24h]@20
  int v12; // [sp+A8h] [bp-20h]@1
  int v13; // [sp+ACh] [bp-1Ch]@1
  int v14; // [sp+B0h] [bp-18h]@1
  int v15; // [sp+B4h] [bp-14h]@1
  int i; // [sp+B8h] [bp-10h]@463
  __int16 Health_To_Restore[2]; // [sp+BCh] [bp-Ch]@16
  size_t num; // [sp+C0h] [bp-8h]@56
  int NPC_ID; // [sp+C4h] [bp-4h]@44

  v6 = dword_498B20;
  v12 = 64;
  v13 = 48;
  v14 = 72;
  v15 = 56;
  switch ( byte_4A5ADC )
  {
    case 1:
      ++dword_4A5AFC;
      if ( !(Game_State & 2) && Key_Held & (Key_For_Shoot | Key_For_Jump) )
        dword_4A5AFC += 4;
      if ( dword_4A5AFC < 4 )
        goto jmp_42256C_default_case;
      dword_4A5AFC = 0;
      v7 = 0;
      break;
    case 2:
      if ( Key_Pressed & (Key_For_Shoot | Key_For_Jump) )
        byte_4A5ADC = 1;
      goto jmp_42256C_default_case;
    case 3:
      for ( i = 0; i < 4; ++i )
      {
        dword_4A5AEC[i] -= 4;
        if ( !dword_4A5AEC[i] )
          byte_4A5ADC = 1;
        if ( dword_4A5AEC[i] == -16 )
          dword_4A5AEC[i] = 48;
      }
      goto jmp_42256C_default_case;
    case 4:
      if ( dword_4A5B00 != 9999 )
      {
        if ( dword_4A5AFC != 9999 )
          ++dword_4A5AFC;
        if ( dword_4A5AFC >= dword_4A5B00 )
        {
          byte_4A5ADC = 1;
          byte_4A5B30 = 0;
        }
      }
      goto jmp_42256C_default_case;
    case 5:
      if ( !sub_40E830() )
      {
        byte_4A5ADC = 1;
        byte_4A5B30 = 0;
      }
      goto jmp_42256C_default_case;
    case 7:
      if ( Tile_On_Which_Quote_Is & 8 )
      {
        byte_4A5ADC = 1;
        byte_4A5B30 = 0;
      }
      goto jmp_42256C_default_case;
    case 6:
      if ( dword_4A5AFC >= 16 )
      {
        if ( Key_For_Jump & Key_Pressed )
        {
          Play_Sound_Effect(18, 1);
          if ( byte_4A5B08 == 1 )
          {
            sub_421AF0(dword_4A5B04);
          }
          else
          {
            byte_4A5ADC = 1;
            byte_4A5B30 = 0;
          }
        }
        else if ( Key_For_Left & Key_Pressed )
        {
          byte_4A5B08 = 0;
          Play_Sound_Effect(1, 1);
        }
        else if ( Key_For_Right & Key_Pressed )
        {
          byte_4A5B08 = 1;
          Play_Sound_Effect(1, 1);
        }
      }
      else
      {
        ++dword_4A5AFC;
      }
      goto jmp_42256C_default_case;
    default:
jmp_42256C_default_case:
      if ( byte_4A5ADC )
        Game_State |= 4u;
      else
        Game_State &= 0xFFFFFFFB;
      return 1;
  }
  while ( 1 )
  {
    while ( 1 )
    {
      while ( 1 )
      {
        while ( 1 )
        {
          while ( 1 )
          {
            while ( 1 )
            {
              while ( 1 )
              {
                while ( 1 )
                {
                  while ( 1 )
                  {
                    while ( 1 )
                    {
                      while ( 1 )
                      {
                        while ( 1 )
                        {
                          while ( 1 )
                          {
                            while ( 1 )
                            {
                              while ( 1 )
                              {
                                while ( 1 )
                                {
                                  while ( 1 )
                                  {
                                    while ( 1 )
                                    {
                                      while ( 1 )
                                      {
                                        while ( 1 )
                                        {
                                          while ( 1 )
                                          {
                                            while ( 1 )
                                            {
                                              while ( 1 )
                                              {
                                                while ( 1 )
                                                {
                                                  while ( 1 )
                                                  {
                                                    while ( 1 )
                                                    {
                                                      while ( 1 )
                                                      {
                                                        while ( 1 )
                                                        {
                                                          while ( 1 )
                                                          {
                                                            while ( 1 )
                                                            {
                                                              while ( 1 )
                                                              {
                                                                while ( 1 )
                                                                {
                                                                  while ( 1 )
                                                                  {
                                                                    while ( 1 )
                                                                    {
                                                                      while ( 1 )
                                                                      {
                                                                        while ( 1 )
                                                                        {
                                                                          while ( 1 )
                                                                          {
                                                                            while ( 1 )
                                                                            {
                                                                              while ( 1 )
                                                                              {
                                                                                while ( 1 )
                                                                                {
                                                                                  while ( 1 )
                                                                                  {
                                                                                    while ( 1 )
                                                                                    {
                                                                                      while ( 1 )
                                                                                      {
                                                                                        while ( 1 )
                                                                                        {
                                                                                          while ( 1 )
                                                                                          {
                                                                                            while ( 1 )
                                                                                            {
                                                                                              while ( 1 )
                                                                                              {
                                                                                                while ( 1 )
                                                                                                {
                                                                                                  while ( 1 )
                                                                                                  {
                                                                                                    while ( 1 )
                                                                                                    {
                                                                                                      while ( 1 )
                                                                                                      {
                                                                                                        while ( 1 )
                                                                                                        {
                                                                                                          while ( 1 )
                                                                                                          {
                                                                                                            while ( 1 )
                                                                                                            {
                                                                                                              while ( 1 )
                                                                                                              {
                                                                                                                while ( 1 )
                                                                                                                {
                                                                                                                  while ( 1 )
                                                                                                                  {
                                                                                                                    while ( 1 )
                                                                                                                    {
                                                                                                                      while ( 1 )
                                                                                                                      {
                                                                                                                        while ( 1 )
                                                                                                                        {
                                                                                                                          while ( 1 )
                                                                                                                          {
                                                                                                                            while ( 1 )
                                                                                                                            {
                                                                                                                              while ( 1 )
                                                                                                                              {
                                                                                                                                while ( 1 )
                                                                                                                                {
                                                                                                                                  while ( 1 )
                                                                                                                                  {
                                                                                                                                    while ( 1 )
                                                                                                                                    {
                                                                                                                                      while ( 1 )
                                                                                                                                      {
                                                                                                                                        while ( 1 )
                                                                                                                                        {
                                                                                                                                          while ( 1 )
                                                                                                                                          {
                                                                                                                                            while ( 1 )
                                                                                                                                            {
                                                                                                                                              while ( 1 )
                                                                                                                                              {
                                                                                                                                                while ( 1 )
                                                                                                                                                {
                                                                                                                                                  while ( 1 )
                                                                                                                                                  {
                                                                                                                                                    while ( 1 )
                                                                                                                                                    {
                                                                                                                                                      while ( 1 )
                                                                                                                                                      {
                                                                                                                                                        while ( 1 )
                                                                                                                                                        {
                                                                                                                                                          while ( 1 )
                                                                                                                                                          {
                                                                                                                                                            while ( 1 )
                                                                                                                                                            {
                                                                                                                                                              while ( 1 )
                                                                                                                                                              {
                                                                                                                                                                while ( 1 )
                                                                                                                                                                {
                                                                                                                                                                  while ( 1 )
                                                                                                                                                                  {
                                                                                                                                                                    while ( 1 )
                                                                                                                                                                    {
                                                                                                                                                                      while ( 1 )
                                                                                                                                                                      {
                                                                                                                                                                        while ( 1 )
                                                                                                                                                                        {
                                                                                                                                                                          while ( 1 )
                                                                                                                                                                          {
                                                                                                                                                                            while ( 1 )
                                                                                                                                                                            {
                                                                                                                                                                              while ( 1 )
                                                                                                                                                                              {
                                                                                                                                                                                while ( 1 )
                                                                                                                                                                                {
                                                                                                                                                                                  while ( 1 )
                                                                                                                                                                                  {
                                                                                                                                                                                    while ( 1 )
                                                                                                                                                                                    {
                                                                                                                                                                                      while ( 1 )
                                                                                                                                                                                      {
                                                                                                                                                                                        while ( 1 )
                                                                                                                                                                                        {
                                                                                                                                                                                          if ( v7 )
                                                                                                                                                                                            goto jmp_42256C_default_case;
                                                                                                                                                                                          if ( *((_BYTE *)Current_Script + Script_Position) == '<' )
                                                                                                                                                                                            break;
                                                                                                                                                                                          if ( *((_BYTE *)Current_Script + Script_Position) == 13 )
                                                                                                                                                                                          {
                                                                                                                                                                                            Script_Position += 2;
                                                                                                                                                                                            TextColumn = 0;
                                                                                                                                                                                            if ( byte_4A5ADD & 1 )
                                                                                                                                                                                            {
                                                                                                                                                                                              ++dword_4A5AE8;
                                                                                                                                                                                              sub_421C80();
                                                                                                                                                                                            }
                                                                                                                                                                                          }
                                                                                                                                                                                          else if ( byte_4A5ADD & 0x10 )
                                                                                                                                                                                          {
                                                                                                                                                                                            for ( *(_DWORD *)Health_To_Restore = Script_Position;
                                                                                                                                                                                                  *((_BYTE *)Current_Script + *(_DWORD *)Health_To_Restore) != 60 && *((_BYTE *)Current_Script + *(_DWORD *)Health_To_Restore) != 13;
                                                                                                                                                                                                  ++*(_DWORD *)Health_To_Restore )
                                                                                                                                                                                            {
                                                                                                                                                                                              if ( *((_BYTE *)Current_Script + *(_DWORD *)Health_To_Restore) & 0x80 )
                                                                                                                                                                                                ++*(_DWORD *)Health_To_Restore;
                                                                                                                                                                                            }
                                                                                                                                                                                            num = *(_DWORD *)Health_To_Restore - Script_Position;
                                                                                                                                                                                            memcpy(destination, (char *)Current_Script + Script_Position, *(_DWORD *)Health_To_Restore - Script_Position);
                                                                                                                                                                                            destination[num] = 0;
                                                                                                                                                                                            TextColumn = *(_DWORD *)Health_To_Restore;
                                                                                                                                                                                            Draw_Text_To_Screen(0, 0, destination, 0xFEFFFFu, dword_4A5AE8 % 4 + 30);
                                                                                                                                                                                            sprintf((char *)&unk_4A58D0 + 64 * (dword_4A5AE8 % 4), destination);
                                                                                                                                                                                            Script_Position += num;
                                                                                                                                                                                            if ( TextColumn >= 35 )
                                                                                                                                                                                              sub_421C80();
                                                                                                                                                                                            v7 = 1;
                                                                                                                                                                                          }
                                                                                                                                                                                          else
                                                                                                                                                                                          {
                                                                                                                                                                                            Ptr_String = *((_BYTE *)Current_Script + Script_Position);
                                                                                                                                                                                            if ( Ptr_String & 0x80 )
                                                                                                                                                                                            {
                                                                                                                                                                                              v9 = *((_BYTE *)Current_Script + Script_Position + 1);
                                                                                                                                                                                              v10 = 0;
                                                                                                                                                                                            }
                                                                                                                                                                                            else
                                                                                                                                                                                            {
                                                                                                                                                                                              v9 = 0;
                                                                                                                                                                                            }
                                                                                                                                                                                            if ( Ptr_String == 61 )
                                                                                                                                                                                              Blit_For_Dmg_Num_(6 * TextColumn, 2, (int)&v12, dword_4A5AE8 % 4 + 30, 26);
                                                                                                                                                                                            else
                                                                                                                                                                                              Draw_Text_To_Screen(6 * TextColumn, 0, &Ptr_String, 0xFEFFFFu, dword_4A5AE8 % 4 + 30);
                                                                                                                                                                                            strcat((char *)&unk_4A58D0 + 64 * (dword_4A5AE8 % 4), &Ptr_String);
                                                                                                                                                                                            Play_Sound_Effect(2, 1);
                                                                                                                                                                                            byte_4A5B30 = 0;
                                                                                                                                                                                            if ( Ptr_String & 0x80 )
                                                                                                                                                                                            {
                                                                                                                                                                                              Script_Position += 2;
                                                                                                                                                                                              TextColumn += 2;
                                                                                                                                                                                            }
                                                                                                                                                                                            else
                                                                                                                                                                                            {
                                                                                                                                                                                              ++Script_Position;
                                                                                                                                                                                              ++TextColumn;
                                                                                                                                                                                            }
                                                                                                                                                                                            if ( TextColumn >= 35 )
                                                                                                                                                                                            {
                                                                                                                                                                                              sub_421C80();
                                                                                                                                                                                              TextColumn = 0;
                                                                                                                                                                                              ++dword_4A5AE8;
                                                                                                                                                                                              sub_421C80();
                                                                                                                                                                                            }
                                                                                                                                                                                            v7 = 1;
                                                                                                                                                                                          }
                                                                                                                                                                                        }
                                                                                                                                                                                        if ( *((_BYTE *)Current_Script + Script_Position + 1) != 'E' || *((_BYTE *)Current_Script + Script_Position + 2) != 'N' || *((_BYTE *)Current_Script + Script_Position + 3) != 'D' )
                                                                                                                                                                                          break;
                                                                                                                                                                                        byte_4A5ADC = 0;
                                                                                                                                                                                        *(_BYTE *)&Player_Flags &= 0xFEu;
                                                                                                                                                                                        Game_State |= 3u;
                                                                                                                                                                                        FaceID = 0;
                                                                                                                                                                                        v7 = 1;
                                                                                                                                                                                      }
                                                                                                                                                                                      if ( *((_BYTE *)Current_Script + Script_Position + 1) != 'L' || *((_BYTE *)Current_Script + Script_Position + 2) != 'I' || *((_BYTE *)Current_Script + Script_Position + 3) != '+' )
                                                                                                                                                                                        break;
                                                                                                                                                                                      *(_DWORD *)Health_To_Restore = TSC_Dec_to_Hex(Script_Position + 4);
                                                                                                                                                                                      TSC_LIplus(Health_To_Restore[0]);
                                                                                                                                                                                      Script_Position += 8;
                                                                                                                                                                                    }
                                                                                                                                                                                    if ( *((_BYTE *)Current_Script + Script_Position + 1) != 'M' || *((_BYTE *)Current_Script + Script_Position + 2) != 'L' || *((_BYTE *)Current_Script + Script_Position + 3) != '+' )
                                                                                                                                                                                      break;
                                                                                                                                                                                    *(_DWORD *)Life_To_Add = TSC_Dec_to_Hex(Script_Position + 4);
                                                                                                                                                                                    TSC_MLplus(Life_To_Add[0]);
                                                                                                                                                                                    Script_Position += 8;
                                                                                                                                                                                  }
                                                                                                                                                                                  if ( *((_BYTE *)Current_Script + Script_Position + 1) != 'A' || *((_BYTE *)Current_Script + Script_Position + 2) != 'E' || *((_BYTE *)Current_Script + Script_Position + 3) != '+' )
                                                                                                                                                                                    break;
                                                                                                                                                                                  TSC_AEplus();
                                                                                                                                                                                  Script_Position += 4;
                                                                                                                                                                                }
                                                                                                                                                                                if ( *((_BYTE *)Current_Script + Script_Position + 1) != 'I' || *((_BYTE *)Current_Script + Script_Position + 2) != 'T' || *((_BYTE *)Current_Script + Script_Position + 3) != '+' )
                                                                                                                                                                                  break;
                                                                                                                                                                                *(_DWORD *)Health_To_Restore = TSC_Dec_to_Hex(Script_Position + 4);
                                                                                                                                                                                Play_Sound_Effect(38, 1);
                                                                                                                                                                                TSC_ITplus(*(int *)Health_To_Restore);
                                                                                                                                                                                Script_Position += 8;
                                                                                                                                                                              }
                                                                                                                                                                              if ( *((_BYTE *)Current_Script + Script_Position + 1) != 'I' || *((_BYTE *)Current_Script + Script_Position + 2) != 'T' || *((_BYTE *)Current_Script + Script_Position + 3) != '-' )
                                                                                                                                                                                break;
                                                                                                                                                                              *(_DWORD *)Life_To_Add = TSC_Dec_to_Hex(Script_Position + 4);
                                                                                                                                                                              TSC_ITminus(*(int *)Life_To_Add);
                                                                                                                                                                              Script_Position += 8;
                                                                                                                                                                            }
                                                                                                                                                                            if ( *((_BYTE *)Current_Script + Script_Position + 1) != 'E' || *((_BYTE *)Current_Script + Script_Position + 2) != 'Q' || *((_BYTE *)Current_Script + Script_Position + 3) != '+' )
                                                                                                                                                                              break;
                                                                                                                                                                            *(_DWORD *)Life_To_Add = TSC_Dec_to_Hex(Script_Position + 4);
                                                                                                                                                                            TSC_EQplus(*(int *)Life_To_Add, 1);
                                                                                                                                                                            Script_Position += 8;
                                                                                                                                                                          }
                                                                                                                                                                          if ( *((_BYTE *)Current_Script + Script_Position + 1) != 'E' || *((_BYTE *)Current_Script + Script_Position + 2) != 'Q' || *((_BYTE *)Current_Script + Script_Position + 3) != '-' )
                                                                                                                                                                            break;
                                                                                                                                                                          *(_DWORD *)Life_To_Add = TSC_Dec_to_Hex(Script_Position + 4);
                                                                                                                                                                          TSC_EQplus(*(int *)Life_To_Add, 0);
                                                                                                                                                                          Script_Position += 8;
                                                                                                                                                                        }
                                                                                                                                                                        if ( *((_BYTE *)Current_Script + Script_Position + 1) != 'A' || *((_BYTE *)Current_Script + Script_Position + 2) != 'M' || *((_BYTE *)Current_Script + Script_Position + 3) != '+' )
                                                                                                                                                                          break;
                                                                                                                                                                        NPC_ID = TSC_Dec_to_Hex(Script_Position + 4);
                                                                                                                                                                        *(_DWORD *)Health_To_Restore = TSC_Dec_to_Hex(Script_Position + 9);
                                                                                                                                                                        dword_4A5B34[0] = *(_DWORD *)Health_To_Restore;
                                                                                                                                                                        dword_4A5B38 = *(_DWORD *)Life_To_Add;
                                                                                                                                                                        Play_Sound_Effect(38, 1);
                                                                                                                                                                        TSC_AMplus(NPC_ID, *(int *)Health_To_Restore);
                                                                                                                                                                        Script_Position += 13;
                                                                                                                                                                      }
                                                                                                                                                                      if ( *((_BYTE *)Current_Script + Script_Position + 1) != 'A' || *((_BYTE *)Current_Script + Script_Position + 2) != 'M' || *((_BYTE *)Current_Script + Script_Position + 3) != '-' )
                                                                                                                                                                        break;
                                                                                                                                                                      *(_DWORD *)Life_To_Add = TSC_Dec_to_Hex(Script_Position + 4);
                                                                                                                                                                      TSC_AMminus(*(int *)Life_To_Add);
                                                                                                                                                                      Script_Position += 8;
                                                                                                                                                                    }
                                                                                                                                                                    if ( *((_BYTE *)Current_Script + Script_Position + 1) != 'Z' || *((_BYTE *)Current_Script + Script_Position + 2) != 'A' || *((_BYTE *)Current_Script + Script_Position + 3) != 'M' )
                                                                                                                                                                      break;
                                                                                                                                                                    sub_419B50();
                                                                                                                                                                    Script_Position += 4;
                                                                                                                                                                  }
                                                                                                                                                                  if ( *((_BYTE *)Current_Script + Script_Position + 1) != 'T' || *((_BYTE *)Current_Script + Script_Position + 2) != 'A' || *((_BYTE *)Current_Script + Script_Position + 3) != 'M' )
                                                                                                                                                                    break;
                                                                                                                                                                  *(_DWORD *)Health_To_Restore = TSC_Dec_to_Hex(Script_Position + 4);
                                                                                                                                                                  num = TSC_Dec_to_Hex(Script_Position + 9);
                                                                                                                                                                  *(_DWORD *)Life_To_Add = TSC_Dec_to_Hex(Script_Position + 14);
                                                                                                                                                                  TSC_TAM(*(int *)Health_To_Restore, num, *(int *)Life_To_Add);
                                                                                                                                                                  Script_Position += 18;
                                                                                                                                                                }
                                                                                                                                                                if ( *((_BYTE *)Current_Script + Script_Position + 1) != 80 || *((_BYTE *)Current_Script + Script_Position + 2) != 83 || *((_BYTE *)Current_Script + Script_Position + 3) != 43 )
                                                                                                                                                                  break;
                                                                                                                                                                *(_DWORD *)Health_To_Restore = TSC_Dec_to_Hex(Script_Position + 4);
                                                                                                                                                                num = TSC_Dec_to_Hex(Script_Position + 9);
                                                                                                                                                                sub_41D630(*(int *)Health_To_Restore, num);
                                                                                                                                                                Script_Position += 13;
                                                                                                                                                              }
                                                                                                                                                              if ( *((_BYTE *)Current_Script + Script_Position + 1) != 77 || *((_BYTE *)Current_Script + Script_Position + 2) != 80 || *((_BYTE *)Current_Script + Script_Position + 3) != 43 )
                                                                                                                                                                break;
                                                                                                                                                              *(_DWORD *)Health_To_Restore = TSC_Dec_to_Hex(Script_Position + 4);
                                                                                                                                                              sub_414B40(*(int *)Health_To_Restore);
                                                                                                                                                              Script_Position += 8;
                                                                                                                                                            }
                                                                                                                                                            if ( *((_BYTE *)Current_Script + Script_Position + 1) != 'U' || *((_BYTE *)Current_Script + Script_Position + 2) != 'N' || *((_BYTE *)Current_Script + Script_Position + 3) != 'I' )
                                                                                                                                                              break;
                                                                                                                                                            *(_DWORD *)Life_To_Add = TSC_Dec_to_Hex(Script_Position + 4);
                                                                                                                                                            sub_416C40(Life_To_Add[0]);
                                                                                                                                                            Script_Position += 8;
                                                                                                                                                          }
                                                                                                                                                          if ( *((_BYTE *)Current_Script + Script_Position + 1) != 83 || *((_BYTE *)Current_Script + Script_Position + 2) != 84 || *((_BYTE *)Current_Script + Script_Position + 3) != 67 )
                                                                                                                                                            break;
                                                                                                                                                          sub_41A5D0();
                                                                                                                                                          Script_Position += 4;
                                                                                                                                                        }
                                                                                                                                                        if ( *((_BYTE *)Current_Script + Script_Position + 1) != 84 || *((_BYTE *)Current_Script + Script_Position + 2) != 82 || *((_BYTE *)Current_Script + Script_Position + 3) != 65 )
                                                                                                                                                          break;
                                                                                                                                                        *(_DWORD *)Life_To_Add = TSC_Dec_to_Hex(Script_Position + 4);
                                                                                                                                                        NPC_ID = TSC_Dec_to_Hex(Script_Position + 9);
                                                                                                                                                        *(_DWORD *)Health_To_Restore = TSC_Dec_to_Hex(Script_Position + 14);
                                                                                                                                                        num = TSC_Dec_to_Hex(Script_Position + 19);
                                                                                                                                                        if ( !sub_420BE0(*(int *)Life_To_Add, NPC_ID, *(int *)Health_To_Restore, num) )
                                                                                                                                                        {
                                                                                                                                                          MessageBoxA(AppWinHandle, "Xe[Ws", "G[", 0);
                                                                                                                                                          return 0;
                                                                                                                                                        }
                                                                                                                                                      }
                                                                                                                                                      if ( *((_BYTE *)Current_Script + Script_Position + 1) != 'M' || *((_BYTE *)Current_Script + Script_Position + 2) != 'O' || *((_BYTE *)Current_Script + Script_Position + 3) != 'V' )
                                                                                                                                                        break;
                                                                                                                                                      *(_DWORD *)Health_To_Restore = TSC_Dec_to_Hex(Script_Position + 4);
                                                                                                                                                      num = TSC_Dec_to_Hex(Script_Position + 9);
                                                                                                                                                      Move_Quote(*(_DWORD *)Health_To_Restore << 13, num << 13);
                                                                                                                                                      Script_Position += 13;
                                                                                                                                                    }
                                                                                                                                                    if ( *((_BYTE *)Current_Script + Script_Position + 1) != 72 || *((_BYTE *)Current_Script + Script_Position + 2) != 77 || *((_BYTE *)Current_Script + Script_Position + 3) != 67 )
                                                                                                                                                      break;
                                                                                                                                                    sub_415220(0);
                                                                                                                                                    Script_Position += 4;
                                                                                                                                                  }
                                                                                                                                                  if ( *((_BYTE *)Current_Script + Script_Position + 1) != 83 || *((_BYTE *)Current_Script + Script_Position + 2) != 77 || *((_BYTE *)Current_Script + Script_Position + 3) != 67 )
                                                                                                                                                    break;
                                                                                                                                                  sub_415220(1);
                                                                                                                                                  Script_Position += 4;
                                                                                                                                                }
                                                                                                                                                if ( *((_BYTE *)Current_Script + Script_Position + 1) != 70 || *((_BYTE *)Current_Script + Script_Position + 2) != 76 || *((_BYTE *)Current_Script + Script_Position + 3) != 43 )
                                                                                                                                                  break;
                                                                                                                                                *(_DWORD *)Life_To_Add = TSC_Dec_to_Hex(Script_Position + 4);
                                                                                                                                                sub_40E890(*(signed int *)Life_To_Add);
                                                                                                                                                Script_Position += 8;
                                                                                                                                              }
                                                                                                                                              if ( *((_BYTE *)Current_Script + Script_Position + 1) != 70 || *((_BYTE *)Current_Script + Script_Position + 2) != 76 || *((_BYTE *)Current_Script + Script_Position + 3) != 45 )
                                                                                                                                                break;
                                                                                                                                              *(_DWORD *)Life_To_Add = TSC_Dec_to_Hex(Script_Position + 4);
                                                                                                                                              sub_40E8E0(*(signed int *)Life_To_Add);
                                                                                                                                              Script_Position += 8;
                                                                                                                                            }
                                                                                                                                            if ( *((_BYTE *)Current_Script + Script_Position + 1) != 83 || *((_BYTE *)Current_Script + Script_Position + 2) != 75 || *((_BYTE *)Current_Script + Script_Position + 3) != 43 )
                                                                                                                                              break;
                                                                                                                                            *(_DWORD *)Life_To_Add = TSC_Dec_to_Hex(Script_Position + 4);
                                                                                                                                            sub_40E970(*(signed int *)Life_To_Add);
                                                                                                                                            Script_Position += 8;
                                                                                                                                          }
                                                                                                                                          if ( *((_BYTE *)Current_Script + Script_Position + 1) != 83 || *((_BYTE *)Current_Script + Script_Position + 2) != 75 || *((_BYTE *)Current_Script + Script_Position + 3) != 45 )
                                                                                                                                            break;
                                                                                                                                          *(_DWORD *)Life_To_Add = TSC_Dec_to_Hex(Script_Position + 4);
                                                                                                                                          sub_40E9C0(*(signed int *)Life_To_Add);
                                                                                                                                          Script_Position += 8;
                                                                                                                                        }
                                                                                                                                        if ( *((_BYTE *)Current_Script + Script_Position + 1) != 'K' || *((_BYTE *)Current_Script + Script_Position + 2) != 'E' || *((_BYTE *)Current_Script + Script_Position + 3) != 'Y' )
                                                                                                                                          break;
                                                                                                                                        Game_State &= 0xFFFFFFFD;
                                                                                                                                        Game_State |= 1u;
                                                                                                                                        Quote_IsFacingUp = 0;
                                                                                                                                        Invincibility_Timer = 0;
                                                                                                                                        Script_Position += 4;
                                                                                                                                      }
                                                                                                                                      if ( *((_BYTE *)Current_Script + Script_Position + 1) != 80 || *((_BYTE *)Current_Script + Script_Position + 2) != 82 || *((_BYTE *)Current_Script + Script_Position + 3) != 73 )
                                                                                                                                        break;
                                                                                                                                      Game_State &= 0xFFFFFFFC;
                                                                                                                                      Invincibility_Timer = 0;
                                                                                                                                      Script_Position += 4;
                                                                                                                                    }
                                                                                                                                    if ( *((_BYTE *)Current_Script + Script_Position + 1) != 70 || *((_BYTE *)Current_Script + Script_Position + 2) != 82 || *((_BYTE *)Current_Script + Script_Position + 3) != 69 )
                                                                                                                                      break;
                                                                                                                                    Game_State |= 3u;
                                                                                                                                    Script_Position += 4;
                                                                                                                                  }
                                                                                                                                  if ( *((_BYTE *)Current_Script + Script_Position + 1) != 78 || *((_BYTE *)Current_Script + Script_Position + 2) != 79 || *((_BYTE *)Current_Script + Script_Position + 3) != 68 )
                                                                                                                                    break;
                                                                                                                                  byte_4A5ADC = 2;
                                                                                                                                  Script_Position += 4;
                                                                                                                                  v7 = 1;
                                                                                                                                }
                                                                                                                                if ( *((_BYTE *)Current_Script + Script_Position + 1) != 67 || *((_BYTE *)Current_Script + Script_Position + 2) != 76 || *((_BYTE *)Current_Script + Script_Position + 3) != 82 )
                                                                                                                                  break;
                                                                                                                                sub_421E90();
                                                                                                                                Script_Position += 4;
                                                                                                                              }
                                                                                                                              if ( *((_BYTE *)Current_Script + Script_Position + 1) != 77 || *((_BYTE *)Current_Script + Script_Position + 2) != 83 || *((_BYTE *)Current_Script + Script_Position + 3) != 71 )
                                                                                                                                break;
                                                                                                                              sub_421E90();
                                                                                                                              byte_4A5ADD |= 3u;
                                                                                                                              byte_4A5ADD &= 0xCFu;
                                                                                                                              if ( byte_4A5ADD & 0x40 )
                                                                                                                                byte_4A5ADD |= 0x10u;
                                                                                                                              Script_Position += 4;
                                                                                                                              v7 = 1;
                                                                                                                            }
                                                                                                                            if ( *((_BYTE *)Current_Script + Script_Position + 1) != 77 || *((_BYTE *)Current_Script + Script_Position + 2) != 83 || *((_BYTE *)Current_Script + Script_Position + 3) != 50 )
                                                                                                                              break;
                                                                                                                            sub_421E90();
                                                                                                                            byte_4A5ADD &= 0xEDu;
                                                                                                                            byte_4A5ADD |= 0x21u;
                                                                                                                            if ( byte_4A5ADD & 0x40 )
                                                                                                                              byte_4A5ADD |= 0x10u;
                                                                                                                            FaceID = 0;
                                                                                                                            Script_Position += 4;
                                                                                                                            v7 = 1;
                                                                                                                          }
                                                                                                                          if ( *((_BYTE *)Current_Script + Script_Position + 1) != 77 || *((_BYTE *)Current_Script + Script_Position + 2) != 83 || *((_BYTE *)Current_Script + Script_Position + 3) != 51 )
                                                                                                                            break;
                                                                                                                          sub_421E90();
                                                                                                                          byte_4A5ADD &= 0xEFu;
                                                                                                                          byte_4A5ADD |= 0x23u;
                                                                                                                          if ( byte_4A5ADD & 0x40 )
                                                                                                                            byte_4A5ADD |= 0x10u;
                                                                                                                          Script_Position += 4;
                                                                                                                          v7 = 1;
                                                                                                                        }
                                                                                                                        if ( *((_BYTE *)Current_Script + Script_Position + 1) != 87 || *((_BYTE *)Current_Script + Script_Position + 2) != 65 || *((_BYTE *)Current_Script + Script_Position + 3) != 73 )
                                                                                                                          break;
                                                                                                                        byte_4A5ADC = 4;
                                                                                                                        dword_4A5B00 = TSC_Dec_to_Hex(Script_Position + 4);
                                                                                                                        Script_Position += 8;
                                                                                                                        v7 = 1;
                                                                                                                      }
                                                                                                                      if ( *((_BYTE *)Current_Script + Script_Position + 1) != 87 || *((_BYTE *)Current_Script + Script_Position + 2) != 65 || *((_BYTE *)Current_Script + Script_Position + 3) != 83 )
                                                                                                                        break;
                                                                                                                      byte_4A5ADC = 7;
                                                                                                                      Script_Position += 4;
                                                                                                                      v7 = 1;
                                                                                                                    }
                                                                                                                    if ( *((_BYTE *)Current_Script + Script_Position + 1) != 84 || *((_BYTE *)Current_Script + Script_Position + 2) != 85 || *((_BYTE *)Current_Script + Script_Position + 3) != 82 )
                                                                                                                      break;
                                                                                                                    Script_Position += 4;
                                                                                                                    byte_4A5ADD |= 0x10u;
                                                                                                                  }
                                                                                                                  if ( *((_BYTE *)Current_Script + Script_Position + 1) != 83 || *((_BYTE *)Current_Script + Script_Position + 2) != 65 || *((_BYTE *)Current_Script + Script_Position + 3) != 84 )
                                                                                                                    break;
                                                                                                                  Script_Position += 4;
                                                                                                                  byte_4A5ADD |= 0x40u;
                                                                                                                }
                                                                                                                if ( *((_BYTE *)Current_Script + Script_Position + 1) != 67 || *((_BYTE *)Current_Script + Script_Position + 2) != 65 || *((_BYTE *)Current_Script + Script_Position + 3) != 84 )
                                                                                                                  break;
                                                                                                                Script_Position += 4;
                                                                                                                byte_4A5ADD |= 0x40u;
                                                                                                              }
                                                                                                              if ( *((_BYTE *)Current_Script + Script_Position + 1) != 67 || *((_BYTE *)Current_Script + Script_Position + 2) != 76 || *((_BYTE *)Current_Script + Script_Position + 3) != 79 )
                                                                                                                break;
                                                                                                              byte_4A5ADD &= 0xCCu;
                                                                                                              Script_Position += 4;
                                                                                                            }
                                                                                                            if ( *((_BYTE *)Current_Script + Script_Position + 1) != 69 || *((_BYTE *)Current_Script + Script_Position + 2) != 86 || *((_BYTE *)Current_Script + Script_Position + 3) != 69 )
                                                                                                              break;
                                                                                                            *(_DWORD *)Life_To_Add = TSC_Dec_to_Hex(Script_Position + 4);
                                                                                                            sub_421AF0(*(int *)Life_To_Add);
                                                                                                          }
                                                                                                          if ( *((_BYTE *)Current_Script + Script_Position + 1) != 'Y' || *((_BYTE *)Current_Script + Script_Position + 2) != 'N' || *((_BYTE *)Current_Script + Script_Position + 3) != 'J' )
                                                                                                            break;
                                                                                                          dword_4A5B04 = TSC_Dec_to_Hex(Script_Position + 4);
                                                                                                          Script_Position += 8;
                                                                                                          byte_4A5ADC = 6;
                                                                                                          Play_Sound_Effect(5, 1);
                                                                                                          dword_4A5AFC = 0;
                                                                                                          byte_4A5B08 = 0;
                                                                                                          v7 = 1;
                                                                                                        }
                                                                                                        if ( *((_BYTE *)Current_Script + Script_Position + 1) != 70 || *((_BYTE *)Current_Script + Script_Position + 2) != 76 || *((_BYTE *)Current_Script + Script_Position + 3) != 74 )
                                                                                                          break;
                                                                                                        *(_DWORD *)Health_To_Restore = TSC_Dec_to_Hex(Script_Position + 4);
                                                                                                        *(_DWORD *)Life_To_Add = TSC_Dec_to_Hex(Script_Position + 9);
                                                                                                        if ( Check_Flag(*(signed int *)Health_To_Restore) )
                                                                                                          sub_421AF0(*(int *)Life_To_Add);
                                                                                                        else
                                                                                                          Script_Position += 13;
                                                                                                      }
                                                                                                      if ( *((_BYTE *)Current_Script + Script_Position + 1) != 83 || *((_BYTE *)Current_Script + Script_Position + 2) != 75 || *((_BYTE *)Current_Script + Script_Position + 3) != 74 )
                                                                                                        break;
                                                                                                      *(_DWORD *)Health_To_Restore = TSC_Dec_to_Hex(Script_Position + 4);
                                                                                                      *(_DWORD *)Life_To_Add = TSC_Dec_to_Hex(Script_Position + 9);
                                                                                                      if ( sub_40EA10(*(signed int *)Health_To_Restore) )
                                                                                                        sub_421AF0(*(int *)Life_To_Add);
                                                                                                      else
                                                                                                        Script_Position += 13;
                                                                                                    }
                                                                                                    if ( *((_BYTE *)Current_Script + Script_Position + 1) != 73 || *((_BYTE *)Current_Script + Script_Position + 2) != 84 || *((_BYTE *)Current_Script + Script_Position + 3) != 74 )
                                                                                                      break;
                                                                                                    *(_DWORD *)Health_To_Restore = TSC_Dec_to_Hex(Script_Position + 4);
                                                                                                    *(_DWORD *)Life_To_Add = TSC_Dec_to_Hex(Script_Position + 9);
                                                                                                    if ( Chk_If_Has_Item(*(int *)Health_To_Restore) )
                                                                                                      sub_421AF0(*(int *)Life_To_Add);
                                                                                                    else
                                                                                                      Script_Position += 13;
                                                                                                  }
                                                                                                  if ( *((_BYTE *)Current_Script + Script_Position + 1) != 65 || *((_BYTE *)Current_Script + Script_Position + 2) != 77 || *((_BYTE *)Current_Script + Script_Position + 3) != 74 )
                                                                                                    break;
                                                                                                  *(_DWORD *)Health_To_Restore = TSC_Dec_to_Hex(Script_Position + 4);
                                                                                                  *(_DWORD *)Life_To_Add = TSC_Dec_to_Hex(Script_Position + 9);
                                                                                                  if ( Chk_If_Has_Weap(*(int *)Health_To_Restore) )
                                                                                                    sub_421AF0(*(int *)Life_To_Add);
                                                                                                  else
                                                                                                    Script_Position += 13;
                                                                                                }
                                                                                                if ( *((_BYTE *)Current_Script + Script_Position + 1) != 85 || *((_BYTE *)Current_Script + Script_Position + 2) != 78 || *((_BYTE *)Current_Script + Script_Position + 3) != 74 )
                                                                                                  break;
                                                                                                *(_DWORD *)Health_To_Restore = TSC_Dec_to_Hex(Script_Position + 4);
                                                                                                *(_DWORD *)Life_To_Add = TSC_Dec_to_Hex(Script_Position + 9);
                                                                                                if ( Return_InFishBattle() == *(_DWORD *)Health_To_Restore )
                                                                                                  sub_421AF0(*(int *)Life_To_Add);
                                                                                                else
                                                                                                  Script_Position += 13;
                                                                                              }
                                                                                              if ( *((_BYTE *)Current_Script + Script_Position + 1) != 69
                                                                                                || *((_BYTE *)Current_Script + Script_Position + 2) != 67
                                                                                                || *((_BYTE *)Current_Script + Script_Position + 3) != 74 )
                                                                                              {
                                                                                                break;
                                                                                              }
                                                                                              *(_DWORD *)Health_To_Restore = TSC_Dec_to_Hex(Script_Position + 4);
                                                                                              *(_DWORD *)Life_To_Add = TSC_Dec_to_Hex(Script_Position + 9);
                                                                                              if ( sub_4704F0(*(int *)Health_To_Restore) )
                                                                                                sub_421AF0(*(int *)Life_To_Add);
                                                                                              else
                                                                                                Script_Position += 13;
                                                                                            }
                                                                                            if ( *((_BYTE *)Current_Script
                                                                                                 + Script_Position
                                                                                                 + 1) != 78
                                                                                              || *((_BYTE *)Current_Script
                                                                                                 + Script_Position
                                                                                                 + 2) != 67
                                                                                              || *((_BYTE *)Current_Script
                                                                                                 + Script_Position
                                                                                                 + 3) != 74 )
                                                                                            {
                                                                                              break;
                                                                                            }
                                                                                            *(_DWORD *)Health_To_Restore = TSC_Dec_to_Hex(Script_Position + 4);
                                                                                            *(_DWORD *)Life_To_Add = TSC_Dec_to_Hex(Script_Position + 9);
                                                                                            if ( sub_470490(*(int *)Health_To_Restore) )
                                                                                              sub_421AF0(*(int *)Life_To_Add);
                                                                                            else
                                                                                              Script_Position += 13;
                                                                                          }
                                                                                          if ( *((_BYTE *)Current_Script
                                                                                               + Script_Position
                                                                                               + 1) != 77
                                                                                            || *((_BYTE *)Current_Script
                                                                                               + Script_Position
                                                                                               + 2) != 80
                                                                                            || *((_BYTE *)Current_Script
                                                                                               + Script_Position
                                                                                               + 3) != 74 )
                                                                                          {
                                                                                            break;
                                                                                          }
                                                                                          *(_DWORD *)Health_To_Restore = TSC_Dec_to_Hex(Script_Position + 4);
                                                                                          if ( sub_414B00() )
                                                                                            sub_421AF0(*(int *)Health_To_Restore);
                                                                                          else
                                                                                            Script_Position += 8;
                                                                                        }
                                                                                        if ( *((_BYTE *)Current_Script
                                                                                             + Script_Position
                                                                                             + 1) != 83
                                                                                          || *((_BYTE *)Current_Script
                                                                                             + Script_Position
                                                                                             + 2) != 83
                                                                                          || *((_BYTE *)Current_Script
                                                                                             + Script_Position
                                                                                             + 3) != 83 )
                                                                                        {
                                                                                          break;
                                                                                        }
                                                                                        *(_DWORD *)Health_To_Restore = TSC_Dec_to_Hex(Script_Position + 4);
                                                                                        TSC_SSS_SPS_(
                                                                                          1,
                                                                                          *(int *)Health_To_Restore);
                                                                                        Script_Position += 8;
                                                                                      }
                                                                                      if ( *((_BYTE *)Current_Script
                                                                                           + Script_Position
                                                                                           + 1) != 67
                                                                                        || *((_BYTE *)Current_Script
                                                                                           + Script_Position
                                                                                           + 2) != 83
                                                                                        || *((_BYTE *)Current_Script
                                                                                           + Script_Position
                                                                                           + 3) != 83 )
                                                                                      {
                                                                                        break;
                                                                                      }
                                                                                      TSC_SSS_SPS__2();
                                                                                      Script_Position += 4;
                                                                                    }
                                                                                    if ( *((_BYTE *)Current_Script
                                                                                         + Script_Position
                                                                                         + 1) != 83
                                                                                      || *((_BYTE *)Current_Script
                                                                                         + Script_Position
                                                                                         + 2) != 80
                                                                                      || *((_BYTE *)Current_Script
                                                                                         + Script_Position
                                                                                         + 3) != 83 )
                                                                                    {
                                                                                      break;
                                                                                    }
                                                                                    TSC_SSS_SPS_(
                                                                                      2,
                                                                                      *(int *)Health_To_Restore);
                                                                                    Script_Position += 4;
                                                                                  }
                                                                                  if ( *((_BYTE *)Current_Script
                                                                                       + Script_Position
                                                                                       + 1) != 67
                                                                                    || *((_BYTE *)Current_Script
                                                                                       + Script_Position
                                                                                       + 2) != 80
                                                                                    || *((_BYTE *)Current_Script
                                                                                       + Script_Position
                                                                                       + 3) != 83 )
                                                                                  {
                                                                                    break;
                                                                                  }
                                                                                  TSC_SSS_SPS__2();
                                                                                  Script_Position += 4;
                                                                                }
                                                                                if ( *((_BYTE *)Current_Script
                                                                                     + Script_Position
                                                                                     + 1) != 81
                                                                                  || *((_BYTE *)Current_Script
                                                                                     + Script_Position
                                                                                     + 2) != 85
                                                                                  || *((_BYTE *)Current_Script
                                                                                     + Script_Position
                                                                                     + 3) != 65 )
                                                                                {
                                                                                  break;
                                                                                }
                                                                                *(_DWORD *)Life_To_Add = TSC_Dec_to_Hex(Script_Position + 4);
                                                                                sub_40F310(*(int *)Life_To_Add);
                                                                                Script_Position += 8;
                                                                              }
                                                                              if ( *((_BYTE *)Current_Script
                                                                                   + Script_Position
                                                                                   + 1) != 70
                                                                                || *((_BYTE *)Current_Script
                                                                                   + Script_Position
                                                                                   + 2) != 76
                                                                                || *((_BYTE *)Current_Script
                                                                                   + Script_Position
                                                                                   + 3) != 65 )
                                                                              {
                                                                                break;
                                                                              }
                                                                              Explosion_(0, 0, 2);
                                                                              Script_Position += 4;
                                                                            }
                                                                            if ( *((_BYTE *)Current_Script
                                                                                 + Script_Position
                                                                                 + 1) != 70
                                                                              || *((_BYTE *)Current_Script
                                                                                 + Script_Position
                                                                                 + 2) != 65
                                                                              || *((_BYTE *)Current_Script
                                                                                 + Script_Position
                                                                                 + 3) != 73 )
                                                                            {
                                                                              break;
                                                                            }
                                                                            *(_DWORD *)Life_To_Add = TSC_Dec_to_Hex(Script_Position + 4);
                                                                            sub_40DF50(Life_To_Add[0]);
                                                                            byte_4A5ADC = 5;
                                                                            Script_Position += 8;
                                                                            v7 = 1;
                                                                          }
                                                                          if ( *((_BYTE *)Current_Script
                                                                               + Script_Position
                                                                               + 1) != 70
                                                                            || *((_BYTE *)Current_Script
                                                                               + Script_Position
                                                                               + 2) != 65
                                                                            || *((_BYTE *)Current_Script
                                                                               + Script_Position
                                                                               + 3) != 79 )
                                                                          {
                                                                            break;
                                                                          }
                                                                          *(_DWORD *)Life_To_Add = TSC_Dec_to_Hex(Script_Position + 4);
                                                                          sub_40DEC0(Life_To_Add[0]);
                                                                          byte_4A5ADC = 5;
                                                                          Script_Position += 8;
                                                                          v7 = 1;
                                                                        }
                                                                        if ( *((_BYTE *)Current_Script
                                                                             + Script_Position
                                                                             + 1) != 77
                                                                          || *((_BYTE *)Current_Script
                                                                             + Script_Position
                                                                             + 2) != 78
                                                                          || *((_BYTE *)Current_Script
                                                                             + Script_Position
                                                                             + 3) != 65 )
                                                                        {
                                                                          break;
                                                                        }
                                                                        sub_414310();
                                                                        Script_Position += 4;
                                                                      }
                                                                      if ( *((_BYTE *)Current_Script
                                                                           + Script_Position
                                                                           + 1) != 70
                                                                        || *((_BYTE *)Current_Script
                                                                           + Script_Position
                                                                           + 2) != 79
                                                                        || *((_BYTE *)Current_Script
                                                                           + Script_Position
                                                                           + 3) != 77 )
                                                                      {
                                                                        break;
                                                                      }
                                                                      *(_DWORD *)Life_To_Add = TSC_Dec_to_Hex(Script_Position + 4);
                                                                      sub_40F220(*(int *)Life_To_Add);
                                                                      Script_Position += 8;
                                                                    }
                                                                    if ( *((_BYTE *)Current_Script + Script_Position + 1) != 70
                                                                      || *((_BYTE *)Current_Script + Script_Position + 2) != 79
                                                                      || *((_BYTE *)Current_Script + Script_Position + 3) != 78 )
                                                                    {
                                                                      break;
                                                                    }
                                                                    *(_DWORD *)Health_To_Restore = TSC_Dec_to_Hex(Script_Position + 4);
                                                                    num = TSC_Dec_to_Hex(Script_Position + 9);
                                                                    sub_40F250(*(int *)Health_To_Restore, num);
                                                                    Script_Position += 13;
                                                                  }
                                                                  if ( *((_BYTE *)Current_Script + Script_Position + 1) != 'F'
                                                                    || *((_BYTE *)Current_Script + Script_Position + 2) != 'O'
                                                                    || *((_BYTE *)Current_Script + Script_Position + 3) != 'B' )
                                                                  {
                                                                    break;
                                                                  }
                                                                  *(_DWORD *)Health_To_Restore = TSC_Dec_to_Hex(Script_Position + 4);
                                                                  num = TSC_Dec_to_Hex(Script_Position + 9);
                                                                  sub_40F2D0(*(int *)Health_To_Restore, num);
                                                                  Script_Position += 13;
                                                                }
                                                                if ( *((_BYTE *)Current_Script + Script_Position + 1) != 'S'
                                                                  || *((_BYTE *)Current_Script + Script_Position + 2) != 'O'
                                                                  || *((_BYTE *)Current_Script + Script_Position + 3) != 'U' )
                                                                {
                                                                  break;
                                                                }
                                                                *(_DWORD *)Life_To_Add = TSC_Dec_to_Hex(Script_Position + 4);
                                                                Play_Sound_Effect(*(int *)Life_To_Add, 1);
                                                                Script_Position += 8;
                                                              }
                                                              if ( *((_BYTE *)Current_Script + Script_Position + 1) != 'C'
                                                                || *((_BYTE *)Current_Script + Script_Position + 2) != 'M'
                                                                || *((_BYTE *)Current_Script + Script_Position + 3) != 'U' )
                                                              {
                                                                break;
                                                              }
                                                              *(_DWORD *)Life_To_Add = TSC_Dec_to_Hex(Script_Position + 4);
                                                              Tsc_CMU(*(int *)Life_To_Add);
                                                              Script_Position += 8;
                                                            }
                                                            if ( *((_BYTE *)Current_Script + Script_Position + 1) != 70
                                                              || *((_BYTE *)Current_Script + Script_Position + 2) != 77
                                                              || *((_BYTE *)Current_Script + Script_Position + 3) != 85 )
                                                            {
                                                              break;
                                                            }
                                                            __setargv_0();
                                                            Script_Position += 4;
                                                          }
                                                          if ( *((_BYTE *)Current_Script + Script_Position + 1) != 'R'
                                                            || *((_BYTE *)Current_Script + Script_Position + 2) != 'M'
                                                            || *((_BYTE *)Current_Script + Script_Position + 3) != 'U' )
                                                          {
                                                            break;
                                                          }
                                                          Tsc_RMU();
                                                          Script_Position += 4;
                                                        }
                                                        if ( *((_BYTE *)Current_Script + Script_Position + 1) != 77
                                                          || *((_BYTE *)Current_Script + Script_Position + 2) != 76
                                                          || *((_BYTE *)Current_Script + Script_Position + 3) != 80 )
                                                        {
                                                          break;
                                                        }
                                                        Script_Position += 4;
                                                        v7 = 1;
                                                        v3 = sub_414640();
                                                        if ( !v3 )
                                                          return 0;
                                                        if ( v3 == 2 )
                                                          return 2;
                                                      }
                                                      if ( *((_BYTE *)Current_Script + Script_Position + 1) != 83
                                                        || *((_BYTE *)Current_Script + Script_Position + 2) != 76
                                                        || *((_BYTE *)Current_Script + Script_Position + 3) != 80 )
                                                      {
                                                        break;
                                                      }
                                                      v7 = 1;
                                                      v2 = sub_41DA00((_DWORD *)Life_To_Add);
                                                      if ( !v2 )
                                                        return 0;
                                                      if ( v2 == 2 )
                                                        return 2;
                                                      sub_421AF0(*(int *)Life_To_Add);
                                                      Game_State &= 0xFFFFFFFC;
                                                    }
                                                    if ( *((_BYTE *)Current_Script + Script_Position + 1) != 68
                                                      || *((_BYTE *)Current_Script + Script_Position + 2) != 78
                                                      || *((_BYTE *)Current_Script + Script_Position + 3) != 80 )
                                                    {
                                                      break;
                                                    }
                                                    *(_DWORD *)Life_To_Add = TSC_Dec_to_Hex(Script_Position + 4);
                                                    sub_470250(*(int *)Life_To_Add);
                                                    Script_Position += 8;
                                                  }
                                                  if ( *((_BYTE *)Current_Script + Script_Position + 1) != 68
                                                    || *((_BYTE *)Current_Script + Script_Position + 2) != 78
                                                    || *((_BYTE *)Current_Script + Script_Position + 3) != 65 )
                                                  {
                                                    break;
                                                  }
                                                  *(_DWORD *)Life_To_Add = TSC_Dec_to_Hex(Script_Position + 4);
                                                  sub_4702D0(*(int *)Life_To_Add, 1);
                                                  Script_Position += 8;
                                                }
                                                if ( *((_BYTE *)Current_Script + Script_Position + 1) != 66
                                                  || *((_BYTE *)Current_Script + Script_Position + 2) != 79
                                                  || *((_BYTE *)Current_Script + Script_Position + 3) != 65 )
                                                {
                                                  break;
                                                }
                                                *(_DWORD *)Life_To_Add = TSC_Dec_to_Hex(Script_Position + 4);
                                                sub_472940(*(int *)Life_To_Add);
                                                Script_Position += 8;
                                              }
                                              if ( *((_BYTE *)Current_Script + Script_Position + 1) != 67
                                                || *((_BYTE *)Current_Script + Script_Position + 2) != 78
                                                || *((_BYTE *)Current_Script + Script_Position + 3) != 80 )
                                              {
                                                break;
                                              }
                                              *(_DWORD *)Health_To_Restore = TSC_Dec_to_Hex(Script_Position + 4);
                                              num = TSC_Dec_to_Hex(Script_Position + 9);
                                              *(_DWORD *)Life_To_Add = TSC_Dec_to_Hex(Script_Position + 14);
                                              sub_46FAB0(*(int *)Health_To_Restore, num, *(int *)Life_To_Add);
                                              Script_Position += 18;
                                            }
                                            if ( *((_BYTE *)Current_Script + Script_Position + 1) != 65
                                              || *((_BYTE *)Current_Script + Script_Position + 2) != 78
                                              || *((_BYTE *)Current_Script + Script_Position + 3) != 80 )
                                            {
                                              break;
                                            }
                                            *(_DWORD *)Health_To_Restore = TSC_Dec_to_Hex(Script_Position + 4);
                                            num = TSC_Dec_to_Hex(Script_Position + 9);
                                            *(_DWORD *)Life_To_Add = TSC_Dec_to_Hex(Script_Position + 14);
                                            sub_46FF90(*(int *)Health_To_Restore, num, *(int *)Life_To_Add);
                                            Script_Position += 18;
                                          }
                                          if ( *((_BYTE *)Current_Script + Script_Position + 1) != 73
                                            || *((_BYTE *)Current_Script + Script_Position + 2) != 78
                                            || *((_BYTE *)Current_Script + Script_Position + 3) != 80 )
                                          {
                                            break;
                                          }
                                          *(_DWORD *)Health_To_Restore = TSC_Dec_to_Hex(Script_Position + 4);
                                          num = TSC_Dec_to_Hex(Script_Position + 9);
                                          *(_DWORD *)Life_To_Add = TSC_Dec_to_Hex(Script_Position + 14);
                                          sub_46FD10(*(int *)Health_To_Restore, num, *(int *)Life_To_Add);
                                          Script_Position += 18;
                                        }
                                        if ( *((_BYTE *)Current_Script + Script_Position + 1) != 83
                                          || *((_BYTE *)Current_Script + Script_Position + 2) != 78
                                          || *((_BYTE *)Current_Script + Script_Position + 3) != 80 )
                                        {
                                          break;
                                        }
                                        NPC_ID = TSC_Dec_to_Hex(Script_Position + 4);
                                        *(_DWORD *)Health_To_Restore = TSC_Dec_to_Hex(Script_Position + 9);
                                        num = TSC_Dec_to_Hex(Script_Position + 14);
                                        *(_DWORD *)Life_To_Add = TSC_Dec_to_Hex(Script_Position + 19);
                                        NPC_Create(
                                          NPC_ID,
                                          *(_DWORD *)Health_To_Restore << 13,
                                          num << 13,
                                          0,
                                          0,
                                          *(int *)Life_To_Add,
                                          0,
                                          256);
                                        Script_Position += 23;
                                      }
                                      if ( *((_BYTE *)Current_Script + Script_Position + 1) != 77
                                        || *((_BYTE *)Current_Script + Script_Position + 2) != 78
                                        || *((_BYTE *)Current_Script + Script_Position + 3) != 80 )
                                      {
                                        break;
                                      }
                                      NPC_ID = TSC_Dec_to_Hex(Script_Position + 4);
                                      *(_DWORD *)Health_To_Restore = TSC_Dec_to_Hex(Script_Position + 9);
                                      num = TSC_Dec_to_Hex(Script_Position + 14);
                                      *(_DWORD *)Life_To_Add = TSC_Dec_to_Hex(Script_Position + 19);
                                      sub_470060(
                                        NPC_ID,
                                        *(_DWORD *)Health_To_Restore << 13,
                                        num << 13,
                                        *(int *)Life_To_Add);
                                      Script_Position += 23;
                                    }
                                    if ( *((_BYTE *)Current_Script + Script_Position + 1) != 83
                                      || *((_BYTE *)Current_Script + Script_Position + 2) != 77
                                      || *((_BYTE *)Current_Script + Script_Position + 3) != 80 )
                                    {
                                      break;
                                    }
                                    *(_DWORD *)Health_To_Restore = TSC_Dec_to_Hex(Script_Position + 4);
                                    num = TSC_Dec_to_Hex(Script_Position + 9);
                                    sub_413A20(*(int *)Health_To_Restore, num);
                                    Script_Position += 13;
                                  }
                                  if ( *((_BYTE *)Current_Script + Script_Position + 1) != 67
                                    || *((_BYTE *)Current_Script + Script_Position + 2) != 77
                                    || *((_BYTE *)Current_Script + Script_Position + 3) != 80 )
                                  {
                                    break;
                                  }
                                  *(_DWORD *)Health_To_Restore = TSC_Dec_to_Hex(Script_Position + 4);
                                  num = TSC_Dec_to_Hex(Script_Position + 9);
                                  *(_DWORD *)Life_To_Add = TSC_Dec_to_Hex(Script_Position + 14);
                                  sub_413A60(*(int *)Health_To_Restore, num, Life_To_Add[0]);
                                  Script_Position += 18;
                                }
                                if ( *((_BYTE *)Current_Script + Script_Position + 1) != 66
                                  || *((_BYTE *)Current_Script + Script_Position + 2) != 83
                                  || *((_BYTE *)Current_Script + Script_Position + 3) != 76 )
                                {
                                  break;
                                }
                                *(_DWORD *)Life_To_Add = TSC_Dec_to_Hex(Script_Position + 4);
                                if ( *(_DWORD *)Life_To_Add )
                                  sub_47B460(*(int *)Life_To_Add);
                                else
                                  sub_47B500();
                                Script_Position += 8;
                              }
                              if ( *((_BYTE *)Current_Script + Script_Position + 1) != 77
                                || *((_BYTE *)Current_Script + Script_Position + 2) != 89
                                || *((_BYTE *)Current_Script + Script_Position + 3) != 68 )
                              {
                                break;
                              }
                              *(_DWORD *)Life_To_Add = TSC_Dec_to_Hex(Script_Position + 4);
                              sub_416B70(Life_To_Add[0]);
                              Script_Position += 8;
                            }
                            if ( *((_BYTE *)Current_Script + Script_Position + 1) != 77
                              || *((_BYTE *)Current_Script + Script_Position + 2) != 89
                              || *((_BYTE *)Current_Script + Script_Position + 3) != 66 )
                            {
                              break;
                            }
                            *(_DWORD *)Life_To_Add = TSC_Dec_to_Hex(Script_Position + 4);
                            sub_470150(*(int *)Life_To_Add);
                            Script_Position += 8;
                          }
                          if ( *((_BYTE *)Current_Script + Script_Position + 1) != 77
                            || *((_BYTE *)Current_Script + Script_Position + 2) != 77
                            || *((_BYTE *)Current_Script + Script_Position + 3) != 48 )
                          {
                            break;
                          }
                          _crt_debugger_hook_0();
                          Script_Position += 4;
                        }
                        if ( *((_BYTE *)Current_Script + Script_Position + 1) != 73
                          || *((_BYTE *)Current_Script + Script_Position + 2) != 78
                          || *((_BYTE *)Current_Script + Script_Position + 3) != 73 )
                        {
                          break;
                        }
                        sub_41D550(AppWinHandle);
                        Script_Position += 4;
                      }
                      if ( *((_BYTE *)Current_Script + Script_Position + 1) != 83
                        || *((_BYTE *)Current_Script + Script_Position + 2) != 86
                        || *((_BYTE *)Current_Script + Script_Position + 3) != 80 )
                      {
                        break;
                      }
                      sub_41D040(0);
                      Script_Position += 4;
                    }
                    if ( *((_BYTE *)Current_Script + Script_Position + 1) != 76
                      || *((_BYTE *)Current_Script + Script_Position + 2) != 68
                      || *((_BYTE *)Current_Script + Script_Position + 3) != 80 )
                    {
                      break;
                    }
                    if ( !sub_41D260(0) )
                      sub_41D550(AppWinHandle);
                  }
                  if ( *((_BYTE *)Current_Script + Script_Position + 1) != 'F'
                    || *((_BYTE *)Current_Script + Script_Position + 2) != 'A'
                    || *((_BYTE *)Current_Script + Script_Position + 3) != 'C' )
                  {
                    break;
                  }
                  *(_DWORD *)Life_To_Add = TSC_Dec_to_Hex(Script_Position + 4);
                  if ( FaceID != SLOBYTE(Life_To_Add[0]) )
                  {
                    FaceID = SLOBYTE(Life_To_Add[0]);
                    dword_4A5B10 = 2048;
                  }
                  Script_Position += 8;
                }
                if ( *((_BYTE *)Current_Script + Script_Position + 1) != 'F'
                  || *((_BYTE *)Current_Script + Script_Position + 2) != 'A'
                  || *((_BYTE *)Current_Script + Script_Position + 3) != 'C' )
                {
                  break;
                }
                *(_DWORD *)Life_To_Add = TSC_Dec_to_Hex(Script_Position + 4);
                if ( FaceID != SLOBYTE(Life_To_Add[0]) )
                {
                  FaceID = SLOBYTE(Life_To_Add[0]);
                  dword_4A5B10 = 2048;
                }
                Script_Position += 8;
              }
              if ( *((_BYTE *)Current_Script + Script_Position + 1) != 71
                || *((_BYTE *)Current_Script + Script_Position + 2) != 73
                || *((_BYTE *)Current_Script + Script_Position + 3) != 84 )
              {
                break;
              }
              *(_DWORD *)Life_To_Add = TSC_Dec_to_Hex(Script_Position + 4);
              dword_4A5B14 = *(_DWORD *)Life_To_Add;
              dword_4A5B18 = 128;
              Script_Position += 8;
            }
            if ( *((_BYTE *)Current_Script + Script_Position + 1) != 78
              || *((_BYTE *)Current_Script + Script_Position + 2) != 85
              || *((_BYTE *)Current_Script + Script_Position + 3) != 77 )
            {
              break;
            }
            *(_DWORD *)Life_To_Add = TSC_Dec_to_Hex(Script_Position + 4);
            sub_421D10(*(int *)Life_To_Add);
            Script_Position += 8;
          }
          if ( *((_BYTE *)Current_Script + Script_Position + 1) != 67
            || *((_BYTE *)Current_Script + Script_Position + 2) != 82
            || *((_BYTE *)Current_Script + Script_Position + 3) != 69 )
          {
            break;
          }
          Game_State |= 8u;
          sub_40D440();
          Script_Position += 4;
        }
        if ( *((_BYTE *)Current_Script + Script_Position + 1) != 83
          || *((_BYTE *)Current_Script + Script_Position + 2) != 73
          || *((_BYTE *)Current_Script + Script_Position + 3) != 76 )
        {
          break;
        }
        *(_DWORD *)Life_To_Add = TSC_Dec_to_Hex(Script_Position + 4);
        sub_40DB40(*(int *)Life_To_Add);
        Script_Position += 8;
      }
      if ( *((_BYTE *)Current_Script + Script_Position + 1) != 67
        || *((_BYTE *)Current_Script + Script_Position + 2) != 73
        || *((_BYTE *)Current_Script + Script_Position + 3) != 76 )
      {
        break;
      }
      sub_40DB60();
      Script_Position += 4;
    }
    if ( *((_BYTE *)Current_Script + Script_Position + 1) != 88
      || *((_BYTE *)Current_Script + Script_Position + 2) != 88
      || *((_BYTE *)Current_Script + Script_Position + 3) != 49 )
    {
      break;
    }
    v7 = 1;
    *(_DWORD *)Life_To_Add = TSC_Dec_to_Hex(Script_Position + 4);
    v1 = sub_40DB70(AppWinHandle, *(int *)Life_To_Add);
    if ( !v1 )
      return 0;
    if ( v1 == 2 )
      return 2;
    Script_Position += 8;
  }
  if ( *((_BYTE *)Current_Script + Script_Position + 1) != 'E'
    || *((_BYTE *)Current_Script + Script_Position + 2) != 'S'
    || *((_BYTE *)Current_Script + Script_Position + 3) != 'C' )
  {
    sprintf(
      &str,
      "sR[h:<%c%c%c",
      *((_BYTE *)Current_Script + Script_Position + 1),
      *((_BYTE *)Current_Script + Script_Position + 2),
      *((_BYTE *)Current_Script + Script_Position + 3));
    MessageBoxA(0, &str, "G[", 0);
    result = 0;
  }
  else
  {
    result = 2;
  }
  return result;
}
// 416B50: using guessed type int _crt_debugger_hook_0(void);
// 41C880: using guessed type int __setargv_0(void);
// 493628: using guessed type int Key_For_Jump;
// 49362C: using guessed type int Key_For_Shoot;
// 493630: using guessed type int Key_For_Left;
// 493638: using guessed type int Key_For_Right;
// 498B20: using guessed type int dword_498B20;
// 49E1E8: using guessed type int Game_State;
// 49E210: using guessed type int Key_Held;
// 49E214: using guessed type int Key_Pressed;
// 49E63C: using guessed type int Tile_On_Which_Quote_Is;
// 49E644: using guessed type int Quote_IsFacingUp;
// 49E6C8: using guessed type char Invincibility_Timer;
// 4A5ADC: using guessed type char byte_4A5ADC;
// 4A5ADD: using guessed type char byte_4A5ADD;
// 4A5AE4: using guessed type int TextColumn;
// 4A5AE8: using guessed type int dword_4A5AE8;
// 4A5AEC: using guessed type int dword_4A5AEC[];
// 4A5AFC: using guessed type int dword_4A5AFC;
// 4A5B00: using guessed type int dword_4A5B00;
// 4A5B04: using guessed type int dword_4A5B04;
// 4A5B08: using guessed type char byte_4A5B08;
// 4A5B0C: using guessed type int FaceID;
// 4A5B10: using guessed type int dword_4A5B10;
// 4A5B14: using guessed type int dword_4A5B14;
// 4A5B30: using guessed type char byte_4A5B30;
// 4A5B34: using guessed type int dword_4A5B34[];
// 4A5B38: using guessed type int dword_4A5B38;
// 422510: using guessed type char destination[72];

//----- (00425790) --------------------------------------------------------
int sub_425790()
{
  int result; // eax@3
  signed int i; // [sp+0h] [bp-4h]@1

  for ( i = 0; i < 4; ++i )
  {
    FillRects_Memory_((int)asc_498290, 0, i + 30);
    Draw_Text_To_Screen(0, 0, (char *)&unk_4A58D0 + 64 * i, 0xFEFFFFu, i + 30);
    result = i + 1;
  }
  return result;
}

//----- (004257F0) --------------------------------------------------------
void sub_4257F0()
{
  sin((long double)0 * 6.2832 / 256.0);
}

//----- (004258B0) --------------------------------------------------------
int __cdecl SIN_function(unsigned __int8 a1)
{
  return dword_4A5B48[a1];
}
// 4A5B48: using guessed type int dword_4A5B48[];

//----- (004258C0) --------------------------------------------------------
int __cdecl COS_function(char a1)
{
  return dword_4A5B48[(unsigned __int8)(a1 + 64)];
}
// 4A5B48: using guessed type int dword_4A5B48[];

//----- (004258E0) --------------------------------------------------------
unsigned __int8 __cdecl Angle_Calculator(int a1, int a2)
{
  unsigned __int8 v3; // [sp+7h] [bp-1h]@1
  signed int v4; // [sp+10h] [bp+8h]@1
  signed int v5; // [sp+14h] [bp+Ch]@1

  v4 = -a1;
  v5 = -a2;
  v3 = 0;
  if ( v4 <= 0 )
  {
    if ( v5 <= 0 )
    {
      if ( -v4 <= -v5 )
      {
        while ( (signed __int16)(-8192 * v4 / -v5) > word_4A5F48[v3] )
          ++v3;
        v3 = -64 - v3;
      }
      else
      {
        while ( (signed __int16)(-8192 * v5 / -v4) > word_4A5F48[v3] )
          ++v3;
        v3 += -128;
      }
    }
    else if ( -v4 <= v5 )
    {
      while ( (signed __int16)(-8192 * v4 / v5) > word_4A5F48[v3] )
        ++v3;
      v3 += 64;
    }
    else
    {
      while ( (signed __int16)((v5 << 13) / -v4) > word_4A5F48[v3] )
        ++v3;
      v3 = -128 - v3;
    }
  }
  else if ( v5 <= 0 )
  {
    if ( v4 <= -v5 )
    {
      while ( (signed __int16)((v4 << 13) / -v5) > word_4A5F48[v3] )
        ++v3;
      v3 -= 64;
    }
    else
    {
      while ( (signed __int16)(-8192 * v5 / v4) > word_4A5F48[v3] )
        ++v3;
      v3 = -v3;
    }
  }
  else if ( v4 <= v5 )
  {
    while ( (signed __int16)((v4 << 13) / v5) > word_4A5F48[v3] )
      ++v3;
    v3 = 64 - v3;
  }
  else
  {
    while ( (signed __int16)((v5 << 13) / v4) > word_4A5F48[v3] )
      ++v3;
  }
  return v3;
}
// 4A5F48: using guessed type __int16 word_4A5F48[];

//----- (00425B40) --------------------------------------------------------
// Microsoft VisualC 2-11/net runtime
void __cdecl Unknown_Library_1(float a1)
{
  sub_425B60(a1);
}

//----- (00425B60) --------------------------------------------------------
void __cdecl sub_425B60(float a1)
{
  cos(a1);
}

//----- (00425B80) --------------------------------------------------------
// Mcrosoft VisualC 2-11/net runtime
void __cdecl Unknown_Library_2(float a1)
{
  sub_425BA0(a1);
}

//----- (00425BA0) --------------------------------------------------------
void __cdecl sub_425BA0(float a1)
{
  sin(a1);
}

//----- (00425BC0) --------------------------------------------------------
void *sub_425BC0()
{
  void *result; // eax@1

  result = memset(&Event_InUse, 0, 0x280u);
  dword_4A5F90 = 0;
  return result;
}
// 4A5F90: using guessed type int dword_4A5F90;

//----- (00425BF0) --------------------------------------------------------
int __cdecl sub_425BF0(int a1, int a2, int a3)
{
  int result; // eax@32
  int v4; // [sp+0h] [bp-19Ch]@31
  int v5; // [sp+4h] [bp-198h]@31
  int v6; // [sp+8h] [bp-194h]@31
  int v7; // [sp+Ch] [bp-190h]@31
  int v8; // [sp+10h] [bp-18Ch]@31
  int v9; // [sp+14h] [bp-188h]@31
  int v10; // [sp+18h] [bp-184h]@31
  int v11; // [sp+1Ch] [bp-180h]@31
  int v12; // [sp+20h] [bp-17Ch]@31
  int v13; // [sp+24h] [bp-178h]@19
  int v14[4]; // [sp+28h] [bp-174h]@27
  int v15; // [sp+38h] [bp-164h]@11
  int v16; // [sp+3Ch] [bp-160h]@16
  int i; // [sp+40h] [bp-15Ch]@1
  int v18; // [sp+44h] [bp-158h]@25
  int v19; // [sp+48h] [bp-154h]@25
  int v20; // [sp+4Ch] [bp-150h]@25
  int v21; // [sp+50h] [bp-14Ch]@25
  int v22; // [sp+54h] [bp-148h]@25
  int v23; // [sp+58h] [bp-144h]@25
  int v24; // [sp+5Ch] [bp-140h]@25
  int v25; // [sp+60h] [bp-13Ch]@25
  int v26; // [sp+64h] [bp-138h]@25
  int v27; // [sp+68h] [bp-134h]@25
  int v28; // [sp+6Ch] [bp-130h]@25
  int v29; // [sp+70h] [bp-12Ch]@25
  int v30; // [sp+74h] [bp-128h]@25
  int v31; // [sp+78h] [bp-124h]@25
  int v32; // [sp+7Ch] [bp-120h]@25
  int v33; // [sp+80h] [bp-11Ch]@25
  int v34; // [sp+84h] [bp-118h]@25
  int v35; // [sp+88h] [bp-114h]@25
  int v36; // [sp+8Ch] [bp-110h]@25
  int v37; // [sp+90h] [bp-10Ch]@25
  int v38; // [sp+94h] [bp-108h]@25
  int v39; // [sp+98h] [bp-104h]@25
  int v40; // [sp+9Ch] [bp-100h]@25
  int v41; // [sp+A0h] [bp-FCh]@25
  int v42; // [sp+A4h] [bp-F8h]@25
  int v43; // [sp+A8h] [bp-F4h]@25
  int v44; // [sp+ACh] [bp-F0h]@25
  int v45; // [sp+B0h] [bp-ECh]@25
  int v46; // [sp+B4h] [bp-E8h]@25
  int v47; // [sp+B8h] [bp-E4h]@25
  int v48; // [sp+BCh] [bp-E0h]@25
  int v49; // [sp+C0h] [bp-DCh]@25
  int v50; // [sp+C4h] [bp-D8h]@25
  int v51; // [sp+C8h] [bp-D4h]@25
  int v52; // [sp+CCh] [bp-D0h]@25
  int v53; // [sp+D0h] [bp-CCh]@25
  int v54; // [sp+D4h] [bp-C8h]@25
  int v55; // [sp+D8h] [bp-C4h]@25
  int v56; // [sp+DCh] [bp-C0h]@25
  int v57; // [sp+E0h] [bp-BCh]@25
  int v58; // [sp+E4h] [bp-B8h]@25
  int v59; // [sp+E8h] [bp-B4h]@25
  int v60; // [sp+ECh] [bp-B0h]@25
  int v61; // [sp+F0h] [bp-ACh]@25
  int v62; // [sp+F4h] [bp-A8h]@25
  int v63; // [sp+F8h] [bp-A4h]@25
  int v64; // [sp+FCh] [bp-A0h]@25
  int v65; // [sp+100h] [bp-9Ch]@25
  int v66; // [sp+104h] [bp-98h]@25
  int v67; // [sp+108h] [bp-94h]@25
  int v68; // [sp+10Ch] [bp-90h]@25
  int v69; // [sp+110h] [bp-8Ch]@25
  int v70; // [sp+114h] [bp-88h]@25
  int v71; // [sp+118h] [bp-84h]@25
  int v72; // [sp+11Ch] [bp-80h]@25
  int v73; // [sp+120h] [bp-7Ch]@25
  int v74; // [sp+124h] [bp-78h]@25
  int v75; // [sp+128h] [bp-74h]@25
  int v76; // [sp+12Ch] [bp-70h]@25
  int v77; // [sp+130h] [bp-6Ch]@25
  int v78; // [sp+134h] [bp-68h]@25
  int v79; // [sp+138h] [bp-64h]@25
  int v80; // [sp+13Ch] [bp-60h]@25
  int v81; // [sp+140h] [bp-5Ch]@25
  int v82; // [sp+144h] [bp-58h]@25
  int v83; // [sp+148h] [bp-54h]@25
  int v84; // [sp+14Ch] [bp-50h]@25
  int v85; // [sp+150h] [bp-4Ch]@25
  int v86; // [sp+154h] [bp-48h]@25
  int v87; // [sp+158h] [bp-44h]@25
  int v88; // [sp+15Ch] [bp-40h]@25
  int v89; // [sp+160h] [bp-3Ch]@25
  int v90; // [sp+164h] [bp-38h]@25
  int v91; // [sp+168h] [bp-34h]@25
  int v92; // [sp+16Ch] [bp-30h]@25
  int v93; // [sp+170h] [bp-2Ch]@25
  int v94; // [sp+174h] [bp-28h]@25
  int v95; // [sp+178h] [bp-24h]@25
  int v96; // [sp+17Ch] [bp-20h]@25
  int v97; // [sp+180h] [bp-1Ch]@25
  int v98; // [sp+188h] [bp-14h]@18
  int v99; // [sp+18Ch] [bp-10h]@25
  int v100; // [sp+190h] [bp-Ch]@25
  int v101; // [sp+194h] [bp-8h]@25
  int v102; // [sp+198h] [bp-4h]@25

  for ( i = 0;
        i < 16
     && (!*((_DWORD *)&Event_InUse + 10 * i)
      || Event_Collision[10 * i] != a1
      || (Event_X_Velocity[10 * i] >= 0 || a3 >= 0) && (Event_X_Velocity[10 * i] <= 0 || a3 <= 0));
        ++i )
  {
    ;
  }
  if ( i == 16 )
  {
    v15 = dword_4A5F90++;
    if ( dword_4A5F90 == 16 )
      dword_4A5F90 = 0;
    Event_Y_Velocity[10 * v15] = 0;
    Event_Y_Position[10 * v15] = 0;
    Event_X_Velocity[10 * v15] = a3;
  }
  else
  {
    v15 = i;
    Event_Y_Velocity[10 * i] = 32;
    Event_X_Velocity[10 * v15] += a3;
    a3 = Event_X_Velocity[10 * v15];
  }
  if ( a3 >= 0 )
  {
    v16 = 0;
  }
  else
  {
    a3 = -a3;
    v16 = 1;
  }
  v98 = a3;
  if ( a3 <= 999 )
  {
    if ( a3 <= 99 )
    {
      if ( a3 <= 9 )
        v13 = 16;
      else
        v13 = 24;
    }
    else
    {
      v13 = 32;
    }
  }
  else
  {
    v13 = 40;
  }
  *((_DWORD *)&Event_InUse + 10 * v15) = 1;
  Event_Collision[10 * v15] = a1;
  Event_X_Position[10 * v15] = a2;
  Event_AltVel_X[10 * v15] = 40 - v13;
  Event_AltVel_Y[10 * v15] = 8 * v15;
  Event_Unknown1[10 * v15] = 40;
  Event_Unknown2[10 * v15] = 8 * v15 + 8;
  v18 = 0;
  v19 = 56;
  v20 = 8;
  v21 = 64;
  v22 = 8;
  v23 = 56;
  v24 = 16;
  v25 = 64;
  v26 = 16;
  v27 = 56;
  v28 = 24;
  v29 = 64;
  v30 = 24;
  v31 = 56;
  v32 = 32;
  v33 = 64;
  v34 = 32;
  v35 = 56;
  v36 = 40;
  v37 = 64;
  v38 = 40;
  v39 = 56;
  v40 = 48;
  v41 = 64;
  v42 = 48;
  v43 = 56;
  v44 = 56;
  v45 = 64;
  v46 = 56;
  v47 = 56;
  v48 = 64;
  v49 = 64;
  v50 = 64;
  v51 = 56;
  v52 = 72;
  v53 = 64;
  v54 = 72;
  v55 = 56;
  v56 = 80;
  v57 = 64;
  v58 = 0;
  v59 = 64;
  v60 = 8;
  v61 = 72;
  v62 = 8;
  v63 = 64;
  v64 = 16;
  v65 = 72;
  v66 = 16;
  v67 = 64;
  v68 = 24;
  v69 = 72;
  v70 = 24;
  v71 = 64;
  v72 = 32;
  v73 = 72;
  v74 = 32;
  v75 = 64;
  v76 = 40;
  v77 = 72;
  v78 = 40;
  v79 = 64;
  v80 = 48;
  v81 = 72;
  v82 = 48;
  v83 = 64;
  v84 = 56;
  v85 = 72;
  v86 = 56;
  v87 = 64;
  v88 = 64;
  v89 = 72;
  v90 = 64;
  v91 = 64;
  v92 = 72;
  v93 = 72;
  v94 = 72;
  v95 = 64;
  v96 = 80;
  v97 = 72;
  v99 = 1;
  v100 = 10;
  v101 = 100;
  v102 = 1000;
  for ( i = 3; i >= 0; --i )
  {
    v14[i] = 0;
    while ( v98 >= *(&v99 + i) )
    {
      v98 -= *(&v99 + i);
      ++v14[i];
    }
  }
  v12 = 0;
  v8 = 32;
  v9 = 48;
  v10 = 40;
  v11 = 56;
  v4 = 40;
  v5 = 48;
  v6 = 48;
  v7 = 56;
  FillRects_Memory_((int)&Event_AltVel_X[10 * v15], 0, 29);
  if ( v16 )
    result = Blit_For_Dmg_Num_(Event_AltVel_X[10 * v15], Event_AltVel_Y[10 * v15], (int)&v4, 29, 26);
  else
    result = Blit_For_Dmg_Num_(Event_AltVel_X[10 * v15], Event_AltVel_Y[10 * v15], (int)&v8, 29, 26);
  for ( i = 3; i >= 0; --i )
  {
    if ( v12 || !i || v14[i] )
    {
      v12 = 1;
      if ( v16 )
        v14[i] += 10;
      Blit_For_Dmg_Num_(8 * (3 - i) + 8, Event_AltVel_Y[10 * v15], (int)(&v18 + 4 * v14[i]), 29, 26);
    }
    result = i - 1;
  }
  return result;
}
// 4A5F90: using guessed type int dword_4A5F90;
// 4A5F9C: using guessed type int Event_Collision[];
// 4A5FA0: using guessed type int Event_X_Position[];
// 4A5FA4: using guessed type int Event_Y_Position[];
// 4A5FA8: using guessed type int Event_X_Velocity[];
// 4A5FAC: using guessed type int Event_Y_Velocity[];
// 4A5FB0: using guessed type int Event_AltVel_X[];
// 4A5FB4: using guessed type int Event_AltVel_Y[];
// 4A5FB8: using guessed type int Event_Unknown1[];
// 4A5FBC: using guessed type int Event_Unknown2[];
// 425BF0: using guessed type int var_174[4];

//----- (00426360) --------------------------------------------------------
int sub_426360()
{
  int result; // eax@2
  signed int i; // [sp+0h] [bp-4h]@1

  for ( i = 0; i < 16; ++i )
  {
    if ( *((_DWORD *)&Event_InUse + 10 * i) )
    {
      if ( ++Event_Y_Velocity[10 * i] < 32 )
        Event_Y_Position[10 * i] -= 256;
      if ( Event_Y_Velocity[10 * i] > 72 )
        ++Event_AltVel_Y[10 * i];
      if ( Event_Y_Velocity[10 * i] > 80 )
        *((_DWORD *)&Event_InUse + 10 * i) = 0;
    }
    result = i + 1;
  }
  return result;
}
// 4A5FA4: using guessed type int Event_Y_Position[];
// 4A5FAC: using guessed type int Event_Y_Velocity[];
// 4A5FB4: using guessed type int Event_AltVel_Y[];

//----- (00426430) --------------------------------------------------------
int __cdecl sub_426430(signed int a1, signed int a2)
{
  int result; // eax@2
  __int64 v3; // rax@5
  int v4; // ST14_4@5
  __int64 v5; // rax@5
  int v6; // ST08_4@5
  __int64 v7; // rax@5
  signed int i; // [sp+4h] [bp-4h]@1

  for ( i = 0; i < 16; ++i )
  {
    if ( *((_DWORD *)&Event_InUse + 10 * i) )
    {
      v3 = Event_Unknown1[10 * i] - Event_AltVel_X[10 * i];
      v4 = ((signed int)v3 - HIDWORD(v3)) >> 1;
      v5 = *(_DWORD *)Event_X_Position[10 * i];
      v6 = (((WORD2(v5) & 0x1FF) + (signed int)v5) >> 9) + Event_Y_Position[10 * i] / 512 - 4 - a2 / 512;
      v7 = *(_DWORD *)Event_Collision[10 * i];
      Render_Graphics(
        (int)&FullscreenRect,
        (((WORD2(v7) & 0x1FF) + (signed int)v7) >> 9) - v4 - a1 / 512,
        v6,
        (int)&Event_AltVel_X[10 * i],
        29);
    }
    result = i + 1;
  }
  return result;
}
// 48F91C: using guessed type int FullscreenRect;
// 4A5F9C: using guessed type int Event_Collision[];
// 4A5FA0: using guessed type int Event_X_Position[];
// 4A5FA4: using guessed type int Event_Y_Position[];
// 4A5FB0: using guessed type int Event_AltVel_X[];
// 4A5FB8: using guessed type int Event_Unknown1[];

//----- (00426530) --------------------------------------------------------
// NPC 0 : Nothing.
// This NPC does basically nothing.
int __cdecl NPC0_Nothing(int a1)
{
  int result; // eax@4

  if ( !*(_DWORD *)(a1 + 116) )
  {
    *(_DWORD *)(a1 + 116) = 1;
    if ( *(_DWORD *)(a1 + 76) == 2 )
      *(_DWORD *)(a1 + 12) += 0x2000;
  }
  result = a1 + 84;
  *(_DWORD *)result = 0;
  *(_DWORD *)(result + 4) = 0;
  *(_DWORD *)(result + 8) = 16;
  *(_DWORD *)(result + 12) = 16;
  return result;
}

//----- (004265B0) --------------------------------------------------------
// NPC 1 : Weapon Energy
// Gives you EXP
int __cdecl NPC1_Weapon_Energy(int a1)
{
  int *v1; // ecx@55
  int v2; // edx@55
  int result; // eax@62
  int v4; // [sp+0h] [bp-74h]@56
  int v5; // [sp+14h] [bp-60h]@47
  int v6; // [sp+18h] [bp-5Ch]@47
  int v7; // [sp+1Ch] [bp-58h]@47
  int v8; // [sp+20h] [bp-54h]@47
  int v9; // [sp+24h] [bp-50h]@47
  int v10; // [sp+28h] [bp-4Ch]@47
  int v11; // [sp+2Ch] [bp-48h]@47
  int v12; // [sp+30h] [bp-44h]@47
  int v13; // [sp+34h] [bp-40h]@47
  int v14; // [sp+38h] [bp-3Ch]@47
  int v15; // [sp+3Ch] [bp-38h]@47
  int v16; // [sp+40h] [bp-34h]@47
  int v17; // [sp+44h] [bp-30h]@47
  int v18; // [sp+48h] [bp-2Ch]@47
  int v19; // [sp+4Ch] [bp-28h]@47
  int v20; // [sp+50h] [bp-24h]@47
  int v21; // [sp+54h] [bp-20h]@47
  int v22; // [sp+58h] [bp-1Ch]@47
  int v23; // [sp+5Ch] [bp-18h]@47
  int v24; // [sp+60h] [bp-14h]@47
  int v25; // [sp+64h] [bp-10h]@47
  int v26; // [sp+68h] [bp-Ch]@47
  int v27; // [sp+6Ch] [bp-8h]@47
  int v28; // [sp+70h] [bp-4h]@47

  if ( BackgroundMode != 5 && BackgroundMode != 6 )
  {
    if ( !*(_DWORD *)(a1 + 116) )
    {
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 104) = RNG_Range(0, 4);
      *(_DWORD *)(a1 + 16) = RNG_Range(-512, 512);
      *(_DWORD *)(a1 + 20) = RNG_Range(-1024, 0);
      if ( RNG_Range(0, 1) )
        *(_DWORD *)(a1 + 76) = 0;
      else
        *(_DWORD *)(a1 + 76) = 2;
    }
    if ( *(_DWORD *)(a1 + 4) & 0x100 )
      *(_DWORD *)(a1 + 20) += 21;
    else
      *(_DWORD *)(a1 + 20) += 42;
    if ( *(_DWORD *)(a1 + 4) & 1 && *(_DWORD *)(a1 + 16) < 0 )
      *(_DWORD *)(a1 + 16) = -*(_DWORD *)(a1 + 16);
    if ( *(_DWORD *)(a1 + 4) & 4 && *(_DWORD *)(a1 + 16) > 0 )
      *(_DWORD *)(a1 + 16) = -*(_DWORD *)(a1 + 16);
    if ( *(_DWORD *)(a1 + 4) & 2 && *(_DWORD *)(a1 + 20) < 0 )
      *(_DWORD *)(a1 + 20) = -*(_DWORD *)(a1 + 20);
    if ( *(_DWORD *)(a1 + 4) & 8 )
    {
      Play_Sound_Effect(45, 1);
      *(_DWORD *)(a1 + 20) = -640;
      *(_DWORD *)(a1 + 16) = 2 * *(_DWORD *)(a1 + 16) / 3;
    }
    if ( *(_DWORD *)(a1 + 4) & 0xD )
    {
      Play_Sound_Effect(45, 1);
      if ( ++*(_DWORD *)(a1 + 112) > 2 )
        *(_DWORD *)(a1 + 12) -= 512;
    }
    else
    {
      *(_DWORD *)(a1 + 112) = 0;
    }
    if ( *(_DWORD *)(a1 + 16) < -1535 )
      *(_DWORD *)(a1 + 16) = -1535;
    if ( *(_DWORD *)(a1 + 16) > 1535 )
      *(_DWORD *)(a1 + 16) = 1535;
    if ( *(_DWORD *)(a1 + 20) < -1535 )
      *(_DWORD *)(a1 + 20) = -1535;
    if ( *(_DWORD *)(a1 + 20) > 1535 )
      *(_DWORD *)(a1 + 20) = 1535;
  }
  else
  {
    if ( !*(_DWORD *)(a1 + 116) )
    {
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 20) = RNG_Range(-128, 128);
      *(_DWORD *)(a1 + 16) = RNG_Range(127, 256);
    }
    *(_DWORD *)(a1 + 16) -= 8;
    if ( *(_DWORD *)(a1 + 8) < 40960 )
      *(_BYTE *)a1 = 0;
    if ( *(_DWORD *)(a1 + 8) < -1536 )
      *(_DWORD *)(a1 + 8) = -1536;
    if ( *(_DWORD *)(a1 + 4) & 1 )
      *(_DWORD *)(a1 + 16) = 256;
    if ( *(_DWORD *)(a1 + 4) & 2 )
      *(_DWORD *)(a1 + 20) = 64;
    if ( *(_DWORD *)(a1 + 4) & 8 )
      *(_DWORD *)(a1 + 20) = -64;
  }
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  v5 = 0;
  v6 = 16;
  v7 = 16;
  v8 = 32;
  v9 = 16;
  v10 = 16;
  v11 = 32;
  v12 = 32;
  v13 = 32;
  v14 = 16;
  v15 = 48;
  v16 = 32;
  v17 = 48;
  v18 = 16;
  v19 = 64;
  v20 = 32;
  v21 = 64;
  v22 = 16;
  v23 = 80;
  v24 = 32;
  v25 = 80;
  v26 = 16;
  v27 = 96;
  v28 = 32;
  ++*(_DWORD *)(a1 + 100);
  if ( *(_DWORD *)(a1 + 76) )
  {
    if ( *(_DWORD *)(a1 + 100) > 2 )
    {
      *(_DWORD *)(a1 + 100) = 0;
      if ( --*(_DWORD *)(a1 + 104) < 0 )
        *(_DWORD *)(a1 + 104) = 5;
    }
  }
  else if ( *(_DWORD *)(a1 + 100) > 2 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    if ( ++*(_DWORD *)(a1 + 104) > 5 )
      *(_DWORD *)(a1 + 104) = 0;
  }
  v1 = &v5 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  *(_DWORD *)(v2 + 8) = v1[2];
  *(_DWORD *)(v2 + 12) = v1[3];
  if ( *(_DWORD *)(a1 + 116) )
  {
    v4 = *(_DWORD *)(a1 + 68);
    if ( v4 == 5 )
    {
      *(_DWORD *)(a1 + 88) += 16;
      *(_DWORD *)(a1 + 96) += 16;
    }
    else if ( v4 == 20 )
    {
      *(_DWORD *)(a1 + 88) += 32;
      *(_DWORD *)(a1 + 96) += 32;
    }
    *(_DWORD *)(a1 + 116) = 1;
  }
  ++*(_DWORD *)(a1 + 108);
  result = a1;
  if ( *(_DWORD *)(a1 + 108) > 500 && *(_DWORD *)(a1 + 104) == 5 && *(_DWORD *)(a1 + 100) == 2 )
  {
    result = a1;
    *(_BYTE *)a1 = 0;
  }
  if ( *(_DWORD *)(a1 + 108) > 400 )
  {
    result = *(_DWORD *)(a1 + 108) / 2 % 2;
    if ( result )
    {
      result = a1 + 84;
      *(_DWORD *)result = 0;
      *(_DWORD *)(result + 4) = 0;
      *(_DWORD *)(result + 8) = 0;
      *(_DWORD *)(result + 12) = 0;
    }
  }
  return result;
}
// 499C88: using guessed type int BackgroundMode;

//----- (00426AF0) --------------------------------------------------------
// NPC 2 : Behemoth (Enemy)
// Appears in the Egg Corridor.
int __cdecl NPC2_Enemy_Behemoth(int a1)
{
  int *v1; // eax@36
  int v2; // ecx@36
  int result; // eax@36
  int *v4; // eax@37
  int v5; // ecx@37
  int v6; // [sp+0h] [bp-E4h]@5
  int v7; // [sp+4h] [bp-E0h]@1
  int v8; // [sp+8h] [bp-DCh]@1
  int v9; // [sp+Ch] [bp-D8h]@1
  int v10; // [sp+10h] [bp-D4h]@1
  int v11; // [sp+14h] [bp-D0h]@1
  int v12; // [sp+18h] [bp-CCh]@1
  int v13; // [sp+1Ch] [bp-C8h]@1
  int v14; // [sp+20h] [bp-C4h]@1
  int v15; // [sp+24h] [bp-C0h]@1
  int v16; // [sp+28h] [bp-BCh]@1
  int v17; // [sp+2Ch] [bp-B8h]@1
  int v18; // [sp+30h] [bp-B4h]@1
  int v19; // [sp+34h] [bp-B0h]@1
  int v20; // [sp+38h] [bp-ACh]@1
  int v21; // [sp+3Ch] [bp-A8h]@1
  int v22; // [sp+40h] [bp-A4h]@1
  int v23; // [sp+44h] [bp-A0h]@1
  int v24; // [sp+48h] [bp-9Ch]@1
  int v25; // [sp+4Ch] [bp-98h]@1
  int v26; // [sp+50h] [bp-94h]@1
  int v27; // [sp+54h] [bp-90h]@1
  int v28; // [sp+58h] [bp-8Ch]@1
  int v29; // [sp+5Ch] [bp-88h]@1
  int v30; // [sp+60h] [bp-84h]@1
  int v31; // [sp+64h] [bp-80h]@1
  int v32; // [sp+68h] [bp-7Ch]@1
  int v33; // [sp+6Ch] [bp-78h]@1
  int v34; // [sp+70h] [bp-74h]@1
  int v35; // [sp+74h] [bp-70h]@1
  int v36; // [sp+78h] [bp-6Ch]@1
  int v37; // [sp+7Ch] [bp-68h]@1
  int v38; // [sp+80h] [bp-64h]@1
  int v39; // [sp+84h] [bp-60h]@1
  int v40; // [sp+88h] [bp-5Ch]@1
  int v41; // [sp+8Ch] [bp-58h]@1
  int v42; // [sp+90h] [bp-54h]@1
  int v43; // [sp+94h] [bp-50h]@1
  int v44; // [sp+98h] [bp-4Ch]@1
  int v45; // [sp+9Ch] [bp-48h]@1
  int v46; // [sp+A0h] [bp-44h]@1
  int v47; // [sp+A4h] [bp-40h]@1
  int v48; // [sp+A8h] [bp-3Ch]@1
  int v49; // [sp+ACh] [bp-38h]@1
  int v50; // [sp+B0h] [bp-34h]@1
  int v51; // [sp+B4h] [bp-30h]@1
  int v52; // [sp+B8h] [bp-2Ch]@1
  int v53; // [sp+BCh] [bp-28h]@1
  int v54; // [sp+C0h] [bp-24h]@1
  int v55; // [sp+C4h] [bp-20h]@1
  int v56; // [sp+C8h] [bp-1Ch]@1
  int v57; // [sp+CCh] [bp-18h]@1
  int v58; // [sp+D0h] [bp-14h]@1
  int v59; // [sp+D4h] [bp-10h]@1
  int v60; // [sp+D8h] [bp-Ch]@1
  int v61; // [sp+DCh] [bp-8h]@1
  int v62; // [sp+E0h] [bp-4h]@1

  v35 = 32;
  v36 = 0;
  v37 = 64;
  v38 = 24;
  v39 = 0;
  v40 = 0;
  v41 = 32;
  v42 = 24;
  v43 = 32;
  v44 = 0;
  v45 = 64;
  v46 = 24;
  v47 = 64;
  v48 = 0;
  v49 = 96;
  v50 = 24;
  v51 = 96;
  v52 = 0;
  v53 = 128;
  v54 = 24;
  v55 = 128;
  v56 = 0;
  v57 = 160;
  v58 = 24;
  v59 = 160;
  v60 = 0;
  v61 = 192;
  v62 = 24;
  v7 = 32;
  v8 = 24;
  v9 = 64;
  v10 = 48;
  v11 = 0;
  v12 = 24;
  v13 = 32;
  v14 = 48;
  v15 = 32;
  v16 = 24;
  v17 = 64;
  v18 = 48;
  v19 = 64;
  v20 = 24;
  v21 = 96;
  v22 = 48;
  v23 = 96;
  v24 = 24;
  v25 = 128;
  v26 = 48;
  v27 = 128;
  v28 = 24;
  v29 = 160;
  v30 = 48;
  v31 = 160;
  v32 = 24;
  v33 = 192;
  v34 = 48;
  if ( *(_DWORD *)(a1 + 4) & 1 )
  {
    *(_DWORD *)(a1 + 76) = 2;
  }
  else if ( *(_DWORD *)(a1 + 4) & 4 )
  {
    *(_DWORD *)(a1 + 76) = 0;
  }
  v6 = *(_DWORD *)(a1 + 116);
  if ( v6 )
  {
    if ( v6 == 1 )
    {
      *(_DWORD *)(a1 + 16) = 7 * *(_DWORD *)(a1 + 16) / 8;
      if ( ++*(_DWORD *)(a1 + 108) > 40 )
      {
        if ( *(_BYTE *)(a1 + 156) )
        {
          *(_DWORD *)(a1 + 108) = 0;
          *(_DWORD *)(a1 + 116) = 2;
          *(_DWORD *)(a1 + 104) = 6;
          *(_DWORD *)(a1 + 100) = 0;
          *(_DWORD *)(a1 + 164) = 5;
        }
        else
        {
          *(_DWORD *)(a1 + 116) = 0;
          *(_DWORD *)(a1 + 100) = 0;
        }
      }
    }
    else if ( v6 == 2 )
    {
      if ( *(_DWORD *)(a1 + 76) )
        *(_DWORD *)(a1 + 16) = 1024;
      else
        *(_DWORD *)(a1 + 16) = -1024;
      if ( ++*(_DWORD *)(a1 + 108) > 200 )
      {
        *(_DWORD *)(a1 + 116) = 0;
        *(_DWORD *)(a1 + 164) = 1;
      }
      if ( ++*(_DWORD *)(a1 + 100) > 5 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 6 )
      {
        *(_DWORD *)(a1 + 104) = 5;
        Play_Sound_Effect(26, 1);
        NPC_Create(4, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12) + 1536, 0, 0, 0, 0, 256);
        sub_40F310(8);
      }
    }
  }
  else
  {
    if ( *(_DWORD *)(a1 + 76) )
      *(_DWORD *)(a1 + 16) = 256;
    else
      *(_DWORD *)(a1 + 16) = -256;
    if ( ++*(_DWORD *)(a1 + 100) > 8 )
    {
      *(_DWORD *)(a1 + 100) = 0;
      ++*(_DWORD *)(a1 + 104);
    }
    if ( *(_DWORD *)(a1 + 104) > 3 )
      *(_DWORD *)(a1 + 104) = 0;
    if ( *(_BYTE *)(a1 + 156) )
    {
      *(_DWORD *)(a1 + 108) = 0;
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 104) = 4;
    }
  }
  *(_DWORD *)(a1 + 20) += 64;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v7 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    *(_DWORD *)(v5 + 8) = v4[2];
    result = v4[3];
    *(_DWORD *)(v5 + 12) = result;
  }
  else
  {
    v1 = &v35 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    *(_DWORD *)(v2 + 8) = v1[2];
    result = v1[3];
    *(_DWORD *)(v2 + 12) = result;
  }
  return result;
}

//----- (00426FD0) --------------------------------------------------------
// NPC 3 : Nothing?
// This NPC deletes itself
int __cdecl NPC3_Deletes_Itself(int a1)
{
  int v1; // edx@3
  int result; // eax@3

  if ( ++*(_DWORD *)(a1 + 108) > 100 )
    *(_BYTE *)a1 = 0;
  v1 = a1 + 84;
  *(_DWORD *)v1 = 0;
  *(_DWORD *)(v1 + 4) = 0;
  result = 0;
  *(_DWORD *)(v1 + 8) = 0;
  *(_DWORD *)(v1 + 12) = 0;
  return result;
}

//----- (00427040) --------------------------------------------------------
// NPC 4 : Smoke
// This NPC simply is smoke.
int __cdecl NPC4_Smoke(int a1)
{
  int v1; // esi@4
  int v2; // esi@4
  int result; // eax@7
  int *v4; // eax@12
  int v5; // ecx@12
  int *v6; // ecx@14
  int v7; // edx@14
  int *v8; // edx@16
  int v9; // [sp+4h] [bp-108h]@1
  int v10; // [sp+8h] [bp-104h]@1
  int v11; // [sp+Ch] [bp-100h]@1
  int v12; // [sp+10h] [bp-FCh]@1
  int v13; // [sp+14h] [bp-F8h]@1
  int v14; // [sp+18h] [bp-F4h]@1
  int v15; // [sp+1Ch] [bp-F0h]@1
  int v16; // [sp+20h] [bp-ECh]@1
  int v17; // [sp+24h] [bp-E8h]@1
  int v18; // [sp+28h] [bp-E4h]@1
  int v19; // [sp+2Ch] [bp-E0h]@1
  int v20; // [sp+30h] [bp-DCh]@1
  int v21; // [sp+34h] [bp-D8h]@1
  int v22; // [sp+38h] [bp-D4h]@1
  int v23; // [sp+3Ch] [bp-D0h]@1
  int v24; // [sp+40h] [bp-CCh]@1
  int v25; // [sp+44h] [bp-C8h]@1
  int v26; // [sp+48h] [bp-C4h]@1
  int v27; // [sp+4Ch] [bp-C0h]@1
  int v28; // [sp+50h] [bp-BCh]@1
  int v29; // [sp+54h] [bp-B8h]@1
  int v30; // [sp+58h] [bp-B4h]@1
  int v31; // [sp+5Ch] [bp-B0h]@1
  int v32; // [sp+60h] [bp-ACh]@1
  int v33; // [sp+64h] [bp-A8h]@1
  int v34; // [sp+68h] [bp-A4h]@1
  int v35; // [sp+6Ch] [bp-A0h]@1
  int v36; // [sp+70h] [bp-9Ch]@1
  int v37; // [sp+74h] [bp-98h]@1
  int v38; // [sp+78h] [bp-94h]@1
  int v39; // [sp+7Ch] [bp-90h]@1
  int v40; // [sp+80h] [bp-8Ch]@1
  int v41; // [sp+84h] [bp-88h]@1
  int v42; // [sp+88h] [bp-84h]@1
  int v43; // [sp+8Ch] [bp-80h]@1
  int v44; // [sp+90h] [bp-7Ch]@1
  int v45; // [sp+94h] [bp-78h]@1
  int v46; // [sp+98h] [bp-74h]@1
  int v47; // [sp+9Ch] [bp-70h]@1
  int v48; // [sp+A0h] [bp-6Ch]@1
  int v49; // [sp+A4h] [bp-68h]@1
  int v50; // [sp+A8h] [bp-64h]@1
  int v51; // [sp+ACh] [bp-60h]@1
  int v52; // [sp+B0h] [bp-5Ch]@1
  int v53; // [sp+B4h] [bp-58h]@1
  int v54; // [sp+B8h] [bp-54h]@1
  int v55; // [sp+BCh] [bp-50h]@1
  int v56; // [sp+C0h] [bp-4Ch]@1
  int v57; // [sp+C4h] [bp-48h]@1
  int v58; // [sp+C8h] [bp-44h]@1
  int v59; // [sp+CCh] [bp-40h]@1
  int v60; // [sp+D0h] [bp-3Ch]@1
  int v61; // [sp+D4h] [bp-38h]@1
  int v62; // [sp+D8h] [bp-34h]@1
  int v63; // [sp+DCh] [bp-30h]@1
  int v64; // [sp+E0h] [bp-2Ch]@1
  int v65; // [sp+E4h] [bp-28h]@1
  int v66; // [sp+E8h] [bp-24h]@1
  int v67; // [sp+ECh] [bp-20h]@1
  int v68; // [sp+F0h] [bp-1Ch]@1
  int v69; // [sp+F4h] [bp-18h]@1
  int v70; // [sp+F8h] [bp-14h]@1
  int v71; // [sp+FCh] [bp-10h]@1
  int v72; // [sp+100h] [bp-Ch]@1
  char v73; // [sp+10Bh] [bp-1h]@4

  v9 = 16;
  v10 = 0;
  v11 = 17;
  v12 = 1;
  v13 = 16;
  v14 = 0;
  v15 = 32;
  v16 = 16;
  v17 = 32;
  v18 = 0;
  v19 = 48;
  v20 = 16;
  v21 = 48;
  v22 = 0;
  v23 = 64;
  v24 = 16;
  v25 = 64;
  v26 = 0;
  v27 = 80;
  v28 = 16;
  v29 = 80;
  v30 = 0;
  v31 = 96;
  v32 = 16;
  v33 = 96;
  v34 = 0;
  v35 = 112;
  v36 = 16;
  v37 = 112;
  v38 = 0;
  v39 = 128;
  v40 = 16;
  v41 = 16;
  v42 = 0;
  v43 = 17;
  v44 = 1;
  v45 = 80;
  v46 = 48;
  v47 = 96;
  v48 = 64;
  v49 = 0;
  v50 = 128;
  v51 = 16;
  v52 = 144;
  v53 = 16;
  v54 = 128;
  v55 = 32;
  v56 = 144;
  v57 = 32;
  v58 = 128;
  v59 = 48;
  v60 = 144;
  v61 = 48;
  v62 = 128;
  v63 = 64;
  v64 = 144;
  v65 = 64;
  v66 = 128;
  v67 = 80;
  v68 = 144;
  v69 = 80;
  v70 = 128;
  v71 = 96;
  v72 = 144;
  if ( *(_DWORD *)(a1 + 116) )
  {
    *(_DWORD *)(a1 + 16) = 20 * *(_DWORD *)(a1 + 16) / 21;
    *(_DWORD *)(a1 + 20) = 20 * *(_DWORD *)(a1 + 20) / 21;
    *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
    *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  }
  else
  {
    if ( !*(_DWORD *)(a1 + 76) || *(_DWORD *)(a1 + 76) == 1 )
    {
      v73 = RNG_Range(0, 255);
      v1 = COS_function(v73);
      *(_DWORD *)(a1 + 16) = v1 * RNG_Range(512, 1535) / 512;
      v2 = SIN_function(v73);
      *(_DWORD *)(a1 + 20) = v2 * RNG_Range(512, 1535) / 512;
    }
    *(_DWORD *)(a1 + 104) = RNG_Range(0, 4);
    *(_DWORD *)(a1 + 100) = RNG_Range(0, 3);
    *(_DWORD *)(a1 + 116) = 1;
  }
  result = *(_DWORD *)(a1 + 100) + 1;
  *(_DWORD *)(a1 + 100) = result;
  if ( *(_DWORD *)(a1 + 100) > 4 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    result = a1;
    ++*(_DWORD *)(a1 + 104);
  }
  if ( *(_DWORD *)(a1 + 104) <= 7 )
  {
    result = a1;
    if ( *(_DWORD *)(a1 + 76) == 1 )
    {
      v4 = &v41 + 4 * *(_DWORD *)(a1 + 104);
      v5 = a1 + 84;
      *(_DWORD *)v5 = *v4;
      *(_DWORD *)(v5 + 4) = v4[1];
      *(_DWORD *)(v5 + 8) = v4[2];
      result = v4[3];
      *(_DWORD *)(v5 + 12) = result;
    }
    if ( !*(_DWORD *)(a1 + 76) )
    {
      v6 = &v9 + 4 * *(_DWORD *)(a1 + 104);
      v7 = a1 + 84;
      *(_DWORD *)v7 = *v6;
      *(_DWORD *)(v7 + 4) = v6[1];
      result = v6[2];
      *(_DWORD *)(v7 + 8) = result;
      *(_DWORD *)(v7 + 12) = v6[3];
    }
    if ( *(_DWORD *)(a1 + 76) == 2 )
    {
      v8 = &v9 + 4 * *(_DWORD *)(a1 + 104);
      result = a1 + 84;
      *(_DWORD *)result = *v8;
      *(_DWORD *)(result + 4) = v8[1];
      *(_DWORD *)(result + 8) = v8[2];
      *(_DWORD *)(result + 12) = v8[3];
    }
  }
  else
  {
    *(_BYTE *)a1 = 0;
  }
  return result;
}

//----- (00427480) --------------------------------------------------------
// NPC 5 : Critter (Enemy) (Hopping, Green)
// Appears in the Egg Corridor.
int __cdecl NPC5_Enemy_Critter_hopping_green(int a1)
{
  int *v1; // eax@34
  int v2; // ecx@34
  int result; // eax@34
  int *v4; // eax@35
  int v5; // ecx@35
  int v6; // [sp+4h] [bp-60h]@1
  int v7; // [sp+8h] [bp-5Ch]@1
  int v8; // [sp+Ch] [bp-58h]@1
  int v9; // [sp+10h] [bp-54h]@1
  int v10; // [sp+14h] [bp-50h]@1
  int v11; // [sp+18h] [bp-4Ch]@1
  int v12; // [sp+1Ch] [bp-48h]@1
  int v13; // [sp+20h] [bp-44h]@1
  int v14; // [sp+24h] [bp-40h]@1
  int v15; // [sp+28h] [bp-3Ch]@1
  int v16; // [sp+2Ch] [bp-38h]@1
  int v17; // [sp+30h] [bp-34h]@1
  int v18; // [sp+34h] [bp-30h]@1
  int v19; // [sp+38h] [bp-2Ch]@1
  int v20; // [sp+3Ch] [bp-28h]@1
  int v21; // [sp+40h] [bp-24h]@1
  int v22; // [sp+44h] [bp-20h]@1
  int v23; // [sp+48h] [bp-1Ch]@1
  int v24; // [sp+4Ch] [bp-18h]@1
  int v25; // [sp+50h] [bp-14h]@1
  int v26; // [sp+54h] [bp-10h]@1
  int v27; // [sp+58h] [bp-Ch]@1
  int v28; // [sp+5Ch] [bp-8h]@1
  int v29; // [sp+60h] [bp-4h]@1

  v18 = 0;
  v19 = 48;
  v20 = 16;
  v21 = 64;
  v22 = 16;
  v23 = 48;
  v24 = 32;
  v25 = 64;
  v26 = 32;
  v27 = 48;
  v28 = 48;
  v29 = 64;
  v6 = 0;
  v7 = 64;
  v8 = 16;
  v9 = 80;
  v10 = 16;
  v11 = 64;
  v12 = 32;
  v13 = 80;
  v14 = 32;
  v15 = 64;
  v16 = 48;
  v17 = 80;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 12) += 1536;
      *(_DWORD *)(a1 + 116) = 1;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
        *(_DWORD *)(a1 + 76) = 2;
      else
        *(_DWORD *)(a1 + 76) = 0;
      if ( *(_DWORD *)(a1 + 120) < 8
        || *(_DWORD *)(a1 + 8) - 57344 >= Quote_X_Position
        || *(_DWORD *)(a1 + 8) + 57344 <= Quote_X_Position
        || *(_DWORD *)(a1 + 12) - 40960 >= Quote_Y_Position
        || *(_DWORD *)(a1 + 12) + 40960 <= Quote_Y_Position )
      {
        if ( *(_DWORD *)(a1 + 120) < 8 )
          ++*(_DWORD *)(a1 + 120);
        *(_DWORD *)(a1 + 104) = 0;
      }
      else
      {
        *(_DWORD *)(a1 + 104) = 1;
      }
      if ( *(_BYTE *)(a1 + 156) )
      {
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 104) = 0;
        *(_DWORD *)(a1 + 120) = 0;
      }
      if ( *(_DWORD *)(a1 + 120) >= 8
        && *(_DWORD *)(a1 + 8) - 24576 < Quote_X_Position
        && *(_DWORD *)(a1 + 8) + 24576 > Quote_X_Position
        && *(_DWORD *)(a1 + 12) - 40960 < Quote_Y_Position
        && *(_DWORD *)(a1 + 12) + 24576 > Quote_Y_Position )
      {
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 104) = 0;
        *(_DWORD *)(a1 + 120) = 0;
      }
      break;
    case 2:
      if ( ++*(_DWORD *)(a1 + 120) > 8 )
      {
        *(_DWORD *)(a1 + 116) = 3;
        *(_DWORD *)(a1 + 104) = 2;
        *(_DWORD *)(a1 + 20) = -1535;
        Play_Sound_Effect(30, 1);
        if ( *(_DWORD *)(a1 + 76) )
          *(_DWORD *)(a1 + 16) = 256;
        else
          *(_DWORD *)(a1 + 16) = -256;
      }
      break;
    case 3:
      if ( *(_DWORD *)(a1 + 4) & 8 )
      {
        *(_DWORD *)(a1 + 16) = 0;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 0;
        *(_DWORD *)(a1 + 116) = 1;
        Play_Sound_Effect(23, 1);
      }
      break;
    default:
      break;
  }
  *(_DWORD *)(a1 + 20) += 64;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v6 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    *(_DWORD *)(v5 + 8) = v4[2];
    result = v4[3];
    *(_DWORD *)(v5 + 12) = result;
  }
  else
  {
    v1 = &v18 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    *(_DWORD *)(v2 + 8) = v1[2];
    result = v1[3];
    *(_DWORD *)(v2 + 12) = result;
  }
  return result;
}

//----- (00427820) --------------------------------------------------------
// NPC 6 : Beetle (Enemy) (Horizontal, Green)
// Appears in the Egg Corridor.
int __cdecl NPC6_Enemy_Beetle_horiz_green(int a1)
{
  int *v1; // ecx@36
  int v2; // edx@36
  int result; // eax@36
  int *v4; // ecx@37
  int v5; // edx@37
  int v6; // [sp+4h] [bp-A0h]@1
  int v7; // [sp+8h] [bp-9Ch]@1
  int v8; // [sp+Ch] [bp-98h]@1
  int v9; // [sp+10h] [bp-94h]@1
  int v10; // [sp+14h] [bp-90h]@1
  int v11; // [sp+18h] [bp-8Ch]@1
  int v12; // [sp+1Ch] [bp-88h]@1
  int v13; // [sp+20h] [bp-84h]@1
  int v14; // [sp+24h] [bp-80h]@1
  int v15; // [sp+28h] [bp-7Ch]@1
  int v16; // [sp+2Ch] [bp-78h]@1
  int v17; // [sp+30h] [bp-74h]@1
  int v18; // [sp+34h] [bp-70h]@1
  int v19; // [sp+38h] [bp-6Ch]@1
  int v20; // [sp+3Ch] [bp-68h]@1
  int v21; // [sp+40h] [bp-64h]@1
  int v22; // [sp+44h] [bp-60h]@1
  int v23; // [sp+48h] [bp-5Ch]@1
  int v24; // [sp+4Ch] [bp-58h]@1
  int v25; // [sp+50h] [bp-54h]@1
  int v26; // [sp+54h] [bp-50h]@1
  int v27; // [sp+58h] [bp-4Ch]@1
  int v28; // [sp+5Ch] [bp-48h]@1
  int v29; // [sp+60h] [bp-44h]@1
  int v30; // [sp+64h] [bp-40h]@1
  int v31; // [sp+68h] [bp-3Ch]@1
  int v32; // [sp+6Ch] [bp-38h]@1
  int v33; // [sp+70h] [bp-34h]@1
  int v34; // [sp+74h] [bp-30h]@1
  int v35; // [sp+78h] [bp-2Ch]@1
  int v36; // [sp+7Ch] [bp-28h]@1
  int v37; // [sp+80h] [bp-24h]@1
  int v38; // [sp+84h] [bp-20h]@1
  int v39; // [sp+88h] [bp-1Ch]@1
  int v40; // [sp+8Ch] [bp-18h]@1
  int v41; // [sp+90h] [bp-14h]@1
  int v42; // [sp+94h] [bp-10h]@1
  int v43; // [sp+98h] [bp-Ch]@1
  int v44; // [sp+9Ch] [bp-8h]@1
  int v45; // [sp+A0h] [bp-4h]@1

  v26 = 0;
  v27 = 80;
  v28 = 16;
  v29 = 96;
  v30 = 16;
  v31 = 80;
  v32 = 32;
  v33 = 96;
  v34 = 32;
  v35 = 80;
  v36 = 48;
  v37 = 96;
  v38 = 48;
  v39 = 80;
  v40 = 64;
  v41 = 96;
  v42 = 64;
  v43 = 80;
  v44 = 80;
  v45 = 96;
  v6 = 0;
  v7 = 96;
  v8 = 16;
  v9 = 112;
  v10 = 16;
  v11 = 96;
  v12 = 32;
  v13 = 112;
  v14 = 32;
  v15 = 96;
  v16 = 48;
  v17 = 112;
  v18 = 48;
  v19 = 96;
  v20 = 64;
  v21 = 112;
  v22 = 64;
  v23 = 96;
  v24 = 80;
  v25 = 112;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      if ( *(_DWORD *)(a1 + 76) )
        *(_DWORD *)(a1 + 116) = 3;
      else
        *(_DWORD *)(a1 + 116) = 1;
      break;
    case 1:
      *(_DWORD *)(a1 + 16) -= 16;
      if ( *(_DWORD *)(a1 + 16) < -1024 )
        *(_DWORD *)(a1 + 16) = -1024;
      if ( *(_BYTE *)(a1 + 156) )
        *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16) / 2;
      else
        *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
      if ( ++*(_DWORD *)(a1 + 100) > 1 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 2 )
        *(_DWORD *)(a1 + 104) = 1;
      if ( *(_DWORD *)(a1 + 4) & 1 )
      {
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 0;
        *(_DWORD *)(a1 + 16) = 0;
        *(_DWORD *)(a1 + 76) = 2;
      }
      break;
    case 2:
      if ( ++*(_DWORD *)(a1 + 120) > 60 )
      {
        *(_DWORD *)(a1 + 116) = 3;
        *(_DWORD *)(a1 + 100) = 0;
        *(_DWORD *)(a1 + 104) = 1;
      }
      break;
    case 3:
      *(_DWORD *)(a1 + 16) += 16;
      if ( *(_DWORD *)(a1 + 16) > 1024 )
        *(_DWORD *)(a1 + 16) = 1024;
      if ( *(_BYTE *)(a1 + 156) )
        *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16) / 2;
      else
        *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
      if ( ++*(_DWORD *)(a1 + 100) > 1 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 2 )
        *(_DWORD *)(a1 + 104) = 1;
      if ( *(_DWORD *)(a1 + 4) & 4 )
      {
        *(_DWORD *)(a1 + 116) = 4;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 0;
        *(_DWORD *)(a1 + 16) = 0;
        *(_DWORD *)(a1 + 76) = 0;
      }
      break;
    case 4:
      if ( ++*(_DWORD *)(a1 + 120) > 60 )
      {
        *(_DWORD *)(a1 + 116) = 1;
        *(_DWORD *)(a1 + 100) = 0;
        *(_DWORD *)(a1 + 104) = 1;
      }
      break;
    default:
      break;
  }
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v6 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    result = v4[2];
    *(_DWORD *)(v5 + 8) = result;
    *(_DWORD *)(v5 + 12) = v4[3];
  }
  else
  {
    v1 = &v26 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    result = v1[2];
    *(_DWORD *)(v2 + 8) = result;
    *(_DWORD *)(v2 + 12) = v1[3];
  }
  return result;
}

//----- (00427C60) --------------------------------------------------------
// NPC 6 : Beetle (Enemy) (Horizontal, Green)
// Appears in the Egg Corridor.
int __cdecl NPC7_Enemy_Basil(int a1)
{
  int *v1; // eax@30
  int v2; // ecx@30
  int result; // eax@30
  int *v4; // eax@31
  int v5; // ecx@31
  int v6; // [sp+0h] [bp-64h]@1
  int v7; // [sp+4h] [bp-60h]@1
  int v8; // [sp+8h] [bp-5Ch]@1
  int v9; // [sp+Ch] [bp-58h]@1
  int v10; // [sp+10h] [bp-54h]@1
  int v11; // [sp+14h] [bp-50h]@1
  int v12; // [sp+18h] [bp-4Ch]@1
  int v13; // [sp+1Ch] [bp-48h]@1
  int v14; // [sp+20h] [bp-44h]@1
  int v15; // [sp+24h] [bp-40h]@1
  int v16; // [sp+28h] [bp-3Ch]@1
  int v17; // [sp+2Ch] [bp-38h]@1
  int v18; // [sp+30h] [bp-34h]@1
  int v19; // [sp+34h] [bp-30h]@1
  int v20; // [sp+38h] [bp-2Ch]@1
  int v21; // [sp+3Ch] [bp-28h]@1
  int v22; // [sp+40h] [bp-24h]@1
  int v23; // [sp+44h] [bp-20h]@1
  int v24; // [sp+48h] [bp-1Ch]@1
  int v25; // [sp+4Ch] [bp-18h]@1
  int v26; // [sp+50h] [bp-14h]@1
  int v27; // [sp+54h] [bp-10h]@1
  int v28; // [sp+58h] [bp-Ch]@1
  int v29; // [sp+5Ch] [bp-8h]@1
  int v30; // [sp+60h] [bp-4h]@1

  v19 = 256;
  v20 = 64;
  v21 = 288;
  v22 = 80;
  v23 = 256;
  v24 = 80;
  v25 = 288;
  v26 = 96;
  v27 = 256;
  v28 = 96;
  v29 = 288;
  v30 = 112;
  v7 = 288;
  v8 = 64;
  v9 = 320;
  v10 = 80;
  v11 = 288;
  v12 = 80;
  v13 = 320;
  v14 = 96;
  v15 = 288;
  v16 = 96;
  v17 = 320;
  v18 = 112;
  v6 = *(_DWORD *)(a1 + 116);
  if ( v6 )
  {
    if ( v6 == 1 )
    {
      *(_DWORD *)(a1 + 16) -= 64;
      if ( *(_DWORD *)(a1 + 8) < Quote_X_Position - 98304 )
        *(_DWORD *)(a1 + 116) = 2;
      if ( *(_DWORD *)(a1 + 4) & 1 )
      {
        *(_DWORD *)(a1 + 16) = 0;
        *(_DWORD *)(a1 + 116) = 2;
      }
    }
    else if ( v6 == 2 )
    {
      *(_DWORD *)(a1 + 16) += 64;
      if ( *(_DWORD *)(a1 + 8) > Quote_X_Position + 98304 )
        *(_DWORD *)(a1 + 116) = 1;
      if ( *(_DWORD *)(a1 + 4) & 4 )
      {
        *(_DWORD *)(a1 + 16) = 0;
        *(_DWORD *)(a1 + 116) = 1;
      }
    }
  }
  else
  {
    *(_DWORD *)(a1 + 8) = Quote_X_Position;
    if ( *(_DWORD *)(a1 + 76) )
      *(_DWORD *)(a1 + 116) = 2;
    else
      *(_DWORD *)(a1 + 116) = 1;
  }
  if ( *(_DWORD *)(a1 + 16) >= 0 )
    *(_DWORD *)(a1 + 76) = 2;
  else
    *(_DWORD *)(a1 + 76) = 0;
  if ( *(_DWORD *)(a1 + 16) > 1535 )
    *(_DWORD *)(a1 + 16) = 1535;
  if ( *(_DWORD *)(a1 + 16) < -1535 )
    *(_DWORD *)(a1 + 16) = -1535;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  if ( ++*(_DWORD *)(a1 + 100) > 1 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    ++*(_DWORD *)(a1 + 104);
  }
  if ( *(_DWORD *)(a1 + 104) > 2 )
    *(_DWORD *)(a1 + 104) = 0;
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v7 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    *(_DWORD *)(v5 + 8) = v4[2];
    result = v4[3];
    *(_DWORD *)(v5 + 12) = result;
  }
  else
  {
    v1 = &v19 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    *(_DWORD *)(v2 + 8) = v1[2];
    result = v1[3];
    *(_DWORD *)(v2 + 12) = result;
  }
  return result;
}

//----- (00427F00) --------------------------------------------------------
// NPC 8 : Beetle (Enemy) (Follow 1)
// Appears in the Egg Corridor.
int __cdecl NPC8_Enemy_Beetle_follow1(int a1)
{
  int result; // eax@10
  int *v2; // eax@33
  int v3; // ecx@33
  int *v4; // eax@34
  int v5; // ecx@34
  int v6; // [sp+0h] [bp-44h]@1
  int v7; // [sp+4h] [bp-40h]@1
  int v8; // [sp+8h] [bp-3Ch]@1
  int v9; // [sp+Ch] [bp-38h]@1
  int v10; // [sp+10h] [bp-34h]@1
  int v11; // [sp+14h] [bp-30h]@1
  int v12; // [sp+18h] [bp-2Ch]@1
  int v13; // [sp+1Ch] [bp-28h]@1
  int v14; // [sp+20h] [bp-24h]@1
  int v15; // [sp+24h] [bp-20h]@1
  int v16; // [sp+28h] [bp-1Ch]@1
  int v17; // [sp+2Ch] [bp-18h]@1
  int v18; // [sp+30h] [bp-14h]@1
  int v19; // [sp+34h] [bp-10h]@1
  int v20; // [sp+38h] [bp-Ch]@1
  int v21; // [sp+3Ch] [bp-8h]@1
  int v22; // [sp+40h] [bp-4h]@1

  v15 = 80;
  v16 = 80;
  v17 = 96;
  v18 = 96;
  v19 = 96;
  v20 = 80;
  v21 = 112;
  v22 = 96;
  v7 = 80;
  v8 = 96;
  v9 = 96;
  v10 = 112;
  v11 = 96;
  v12 = 96;
  v13 = 112;
  v14 = 112;
  v6 = *(_DWORD *)(a1 + 116);
  if ( v6 )
  {
    if ( v6 == 1 )
    {
      if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
      {
        *(_DWORD *)(a1 + 76) = 2;
        *(_DWORD *)(a1 + 16) += 16;
      }
      else
      {
        *(_DWORD *)(a1 + 76) = 0;
        *(_DWORD *)(a1 + 16) -= 16;
      }
      if ( *(_DWORD *)(a1 + 16) > 767 )
        *(_DWORD *)(a1 + 16) = 767;
      if ( *(_DWORD *)(a1 + 16) < -767 )
        *(_DWORD *)(a1 + 16) = -767;
      if ( *(_DWORD *)(a1 + 12) >= *(_DWORD *)(a1 + 36) )
        *(_DWORD *)(a1 + 20) -= 8;
      else
        *(_DWORD *)(a1 + 20) += 8;
      if ( *(_DWORD *)(a1 + 20) > 256 )
        *(_DWORD *)(a1 + 20) = 256;
      if ( *(_DWORD *)(a1 + 20) < -256 )
        *(_DWORD *)(a1 + 20) = -256;
      if ( *(_BYTE *)(a1 + 156) )
      {
        *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16) / 2;
        *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20) / 2;
      }
      else
      {
        *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
        *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
      }
    }
  }
  else
  {
    if ( Quote_X_Position >= *(_DWORD *)(a1 + 8) + 0x2000 || Quote_X_Position <= *(_DWORD *)(a1 + 8) - 0x2000 )
    {
      *(_WORD *)(a1 + 80) &= 0xFFDFu;
      *(_DWORD *)(a1 + 92) = 0;
      *(_DWORD *)(a1 + 164) = 0;
      result = a1;
      *(_DWORD *)(a1 + 16) = 0;
      *(_DWORD *)(a1 + 20) = 0;
      return result;
    }
    *(_WORD *)(a1 + 80) |= 0x20u;
    *(_DWORD *)(a1 + 20) = -256;
    *(_DWORD *)(a1 + 36) = *(_DWORD *)(a1 + 12);
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 164) = 2;
    if ( *(_DWORD *)(a1 + 76) )
    {
      *(_DWORD *)(a1 + 8) = Quote_X_Position - 0x20000;
      *(_DWORD *)(a1 + 16) = 767;
    }
    else
    {
      *(_DWORD *)(a1 + 8) = Quote_X_Position + 0x20000;
      *(_DWORD *)(a1 + 16) = -767;
    }
  }
  if ( ++*(_DWORD *)(a1 + 100) > 1 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    ++*(_DWORD *)(a1 + 104);
  }
  if ( *(_DWORD *)(a1 + 104) > 1 )
    *(_DWORD *)(a1 + 104) = 0;
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v7 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    *(_DWORD *)(v5 + 8) = v4[2];
    result = v4[3];
    *(_DWORD *)(v5 + 12) = result;
  }
  else
  {
    v2 = &v15 + 4 * *(_DWORD *)(a1 + 104);
    v3 = a1 + 84;
    *(_DWORD *)v3 = *v2;
    *(_DWORD *)(v3 + 4) = v2[1];
    *(_DWORD *)(v3 + 8) = v2[2];
    result = v2[3];
    *(_DWORD *)(v3 + 12) = result;
  }
  return result;
}

//----- (00428260) --------------------------------------------------------
// NPC 9 : Balrog (drops in)
int __cdecl NPC9_Balrog_DropIn(int a1)
{
  int v1; // ST10_4@12
  int v2; // ST0C_4@12
  int v3; // ST08_4@12
  int v4; // eax@12
  int *v5; // eax@22
  int v6; // ecx@22
  int result; // eax@22
  int *v8; // eax@23
  int v9; // ecx@23
  int v10; // [sp+0h] [bp-68h]@1
  int v11; // [sp+4h] [bp-64h]@21
  int v12; // [sp+8h] [bp-60h]@21
  int v13; // [sp+Ch] [bp-5Ch]@21
  int v14; // [sp+10h] [bp-58h]@21
  int v15; // [sp+14h] [bp-54h]@21
  int v16; // [sp+18h] [bp-50h]@21
  int v17; // [sp+1Ch] [bp-4Ch]@21
  int v18; // [sp+20h] [bp-48h]@21
  int v19; // [sp+24h] [bp-44h]@21
  int v20; // [sp+28h] [bp-40h]@21
  int v21; // [sp+2Ch] [bp-3Ch]@21
  int v22; // [sp+30h] [bp-38h]@21
  int v23; // [sp+34h] [bp-34h]@21
  int v24; // [sp+38h] [bp-30h]@21
  int v25; // [sp+3Ch] [bp-2Ch]@21
  int v26; // [sp+40h] [bp-28h]@21
  int v27; // [sp+44h] [bp-24h]@21
  int v28; // [sp+48h] [bp-20h]@21
  int v29; // [sp+4Ch] [bp-1Ch]@21
  int v30; // [sp+50h] [bp-18h]@21
  int v31; // [sp+54h] [bp-14h]@21
  int v32; // [sp+58h] [bp-10h]@21
  int v33; // [sp+5Ch] [bp-Ch]@21
  int v34; // [sp+60h] [bp-8h]@21
  int i; // [sp+64h] [bp-4h]@10

  v10 = *(_DWORD *)(a1 + 116);
  if ( v10 )
  {
    if ( v10 != 1 )
    {
      if ( v10 == 2 && ++*(_DWORD *)(a1 + 120) > 16 )
      {
        *(_DWORD *)(a1 + 116) = 3;
        *(_DWORD *)(a1 + 104) = 0;
        *(_DWORD *)(a1 + 100) = 0;
      }
      goto LABEL_17;
    }
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 104) = 2;
  }
  *(_DWORD *)(a1 + 20) += 32;
  if ( *(_DWORD *)(a1 + 108) >= 40 )
  {
    *(_WORD *)(a1 + 80) &= 0xFFF7u;
    *(_WORD *)(a1 + 80) |= 1u;
  }
  else
  {
    ++*(_DWORD *)(a1 + 108);
  }
  if ( *(_DWORD *)(a1 + 4) & 8 )
  {
    for ( i = 0; i < 4; ++i )
    {
      v1 = RNG_Range(-1536, 0);
      v2 = RNG_Range(-341, 341);
      v3 = *(_DWORD *)(a1 + 12) + (RNG_Range(-12, 12) << 9);
      v4 = RNG_Range(-12, 12);
      NPC_Create(4, *(_DWORD *)(a1 + 8) + (v4 << 9), v3, v2, v1, 0, 0, 256);
    }
    *(_DWORD *)(a1 + 116) = 2;
    *(_DWORD *)(a1 + 104) = 1;
    *(_DWORD *)(a1 + 120) = 0;
    Play_Sound_Effect(26, 1);
    sub_40F310(30);
  }
LABEL_17:
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  if ( *(_DWORD *)(a1 + 20) < -1535 )
    *(_DWORD *)(a1 + 20) = -1535;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  v23 = 0;
  v24 = 0;
  v25 = 40;
  v26 = 24;
  v27 = 80;
  v28 = 0;
  v29 = 120;
  v30 = 24;
  v31 = 120;
  v32 = 0;
  v33 = 160;
  v34 = 24;
  v11 = 0;
  v12 = 24;
  v13 = 40;
  v14 = 48;
  v15 = 80;
  v16 = 24;
  v17 = 120;
  v18 = 48;
  v19 = 120;
  v20 = 24;
  v21 = 160;
  v22 = 48;
  if ( *(_DWORD *)(a1 + 76) )
  {
    v8 = &v11 + 4 * *(_DWORD *)(a1 + 104);
    v9 = a1 + 84;
    *(_DWORD *)v9 = *v8;
    *(_DWORD *)(v9 + 4) = v8[1];
    *(_DWORD *)(v9 + 8) = v8[2];
    result = v8[3];
    *(_DWORD *)(v9 + 12) = result;
  }
  else
  {
    v5 = &v23 + 4 * *(_DWORD *)(a1 + 104);
    v6 = a1 + 84;
    *(_DWORD *)v6 = *v5;
    *(_DWORD *)(v6 + 4) = v5[1];
    *(_DWORD *)(v6 + 8) = v5[2];
    result = v5[3];
    *(_DWORD *)(v6 + 12) = result;
  }
  return result;
}

//----- (00428540) --------------------------------------------------------
// NPC 10 : Balrog (Boss) (Shooting)
// Balrog when he is shooting an energy shot.
int __cdecl NPC10_Boss_Balrog_shooting(int a1)
{
  int *v1; // eax@11
  int v2; // ecx@11
  int result; // eax@11
  int *v4; // eax@12
  int v5; // ecx@12
  int v6; // [sp+4h] [bp-90h]@7
  int v7; // [sp+8h] [bp-8Ch]@7
  int v8; // [sp+Ch] [bp-88h]@7
  int v9; // [sp+10h] [bp-84h]@7
  int v10; // [sp+14h] [bp-80h]@7
  int v11; // [sp+18h] [bp-7Ch]@7
  int v12; // [sp+1Ch] [bp-78h]@7
  int v13; // [sp+20h] [bp-74h]@7
  int v14; // [sp+24h] [bp-70h]@7
  int v15; // [sp+28h] [bp-6Ch]@7
  int v16; // [sp+2Ch] [bp-68h]@7
  int v17; // [sp+30h] [bp-64h]@7
  int v18; // [sp+34h] [bp-60h]@7
  int v19; // [sp+38h] [bp-5Ch]@7
  int v20; // [sp+3Ch] [bp-58h]@7
  int v21; // [sp+40h] [bp-54h]@7
  int v22; // [sp+4Ch] [bp-48h]@7
  int v23; // [sp+50h] [bp-44h]@7
  int v24; // [sp+54h] [bp-40h]@7
  int v25; // [sp+58h] [bp-3Ch]@7
  int v26; // [sp+5Ch] [bp-38h]@7
  int v27; // [sp+60h] [bp-34h]@7
  int v28; // [sp+64h] [bp-30h]@7
  int v29; // [sp+68h] [bp-2Ch]@7
  int v30; // [sp+6Ch] [bp-28h]@7
  int v31; // [sp+70h] [bp-24h]@7
  int v32; // [sp+74h] [bp-20h]@7
  int v33; // [sp+78h] [bp-1Ch]@7
  int v34; // [sp+7Ch] [bp-18h]@7
  int v35; // [sp+80h] [bp-14h]@7
  int v36; // [sp+84h] [bp-10h]@7
  int v37; // [sp+88h] [bp-Ch]@7

  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( ++*(_DWORD *)(a1 + 120) > 12 )
      {
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 108) = 3;
        *(_DWORD *)(a1 + 104) = 1;
      }
      break;
    default:
      break;
  }
  *(_DWORD *)(a1 + 20) += 32;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  v22 = 0;
  v23 = 0;
  v24 = 40;
  v25 = 24;
  v26 = 40;
  v27 = 0;
  v28 = 80;
  v29 = 24;
  v30 = 80;
  v31 = 0;
  v32 = 120;
  v33 = 24;
  v34 = 120;
  v35 = 0;
  v36 = 160;
  v37 = 24;
  v6 = 0;
  v7 = 24;
  v8 = 40;
  v9 = 48;
  v10 = 40;
  v11 = 24;
  v12 = 80;
  v13 = 48;
  v14 = 80;
  v15 = 24;
  v16 = 120;
  v17 = 48;
  v18 = 120;
  v19 = 24;
  v20 = 160;
  v21 = 48;
  if ( *(_DWORD *)(a1 + 8) >= Quote_X_Position )
    *(_DWORD *)(a1 + 76) = 0;
  else
    *(_DWORD *)(a1 + 76) = 2;
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v6 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    *(_DWORD *)(v5 + 8) = v4[2];
    result = v4[3];
    *(_DWORD *)(v5 + 12) = result;
  }
  else
  {
    v1 = &v22 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    *(_DWORD *)(v2 + 8) = v1[2];
    result = v1[3];
    *(_DWORD *)(v2 + 12) = result;
  }
  return result;
}

//----- (004289B0) --------------------------------------------------------
// NPC 11 : Balrog (Projectile) (energy bounce)
// The projectile Balrog 2 shoots.
int __cdecl NPC11_Projectile_Balrog_energy_bounce(int a1)
{
  int *v1; // eax@6
  int v2; // ecx@6
  int result; // eax@6
  int v4; // [sp+0h] [bp-30h]@3
  int v5; // [sp+4h] [bp-2Ch]@3
  int v6; // [sp+8h] [bp-28h]@3
  int v7; // [sp+Ch] [bp-24h]@3
  int v8; // [sp+10h] [bp-20h]@3
  int v9; // [sp+14h] [bp-1Ch]@3
  int v10; // [sp+18h] [bp-18h]@3
  int v11; // [sp+1Ch] [bp-14h]@3
  int v12; // [sp+20h] [bp-10h]@3
  int v13; // [sp+24h] [bp-Ch]@3
  int v14; // [sp+28h] [bp-8h]@3
  int v15; // [sp+2Ch] [bp-4h]@3

  if ( *(_DWORD *)(a1 + 4) & 0xFF )
  {
    *(_BYTE *)a1 = 0;
    Create_Animated_Effect(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 2, 0);
  }
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  v4 = 208;
  v5 = 104;
  v6 = 224;
  v7 = 120;
  v8 = 224;
  v9 = 104;
  v10 = 240;
  v11 = 120;
  v12 = 240;
  v13 = 104;
  v14 = 256;
  v15 = 120;
  if ( ++*(_DWORD *)(a1 + 100) > 1 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    if ( ++*(_DWORD *)(a1 + 104) > 2 )
      *(_DWORD *)(a1 + 104) = 0;
  }
  v1 = &v4 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  *(_DWORD *)(v2 + 8) = v1[2];
  *(_DWORD *)(v2 + 12) = v1[3];
  result = a1;
  if ( ++*(_DWORD *)(a1 + 108) > 150 )
  {
    Create_Animated_Effect(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 2, 0);
    result = a1;
    *(_BYTE *)a1 = 0;
  }
  return result;
}

//----- (00428B10) --------------------------------------------------------
// NPC 12 : Balrog (cutscene)
// Balrog when he is in a cutscene.
int __cdecl NPC12_Balrog_cutscene(int a1)
{
  int v1; // ST10_4@32
  int v2; // ST0C_4@32
  int v3; // ST08_4@32
  int v4; // eax@32
  int v5; // ST10_4@98
  int v6; // ST0C_4@98
  int v7; // ST08_4@98
  int v8; // eax@98
  int *v9; // ecx@102
  int v10; // edx@102
  int result; // eax@102
  int *v12; // ecx@103
  int v13; // edx@103
  int v14; // [sp+4h] [bp-1D0h]@101
  int v15; // [sp+8h] [bp-1CCh]@101
  int v16; // [sp+Ch] [bp-1C8h]@101
  int v17; // [sp+10h] [bp-1C4h]@101
  int v18; // [sp+14h] [bp-1C0h]@101
  int v19; // [sp+18h] [bp-1BCh]@101
  int v20; // [sp+1Ch] [bp-1B8h]@101
  int v21; // [sp+20h] [bp-1B4h]@101
  int v22; // [sp+24h] [bp-1B0h]@101
  int v23; // [sp+28h] [bp-1ACh]@101
  int v24; // [sp+2Ch] [bp-1A8h]@101
  int v25; // [sp+30h] [bp-1A4h]@101
  int v26; // [sp+34h] [bp-1A0h]@101
  int v27; // [sp+38h] [bp-19Ch]@101
  int v28; // [sp+3Ch] [bp-198h]@101
  int v29; // [sp+40h] [bp-194h]@101
  int v30; // [sp+44h] [bp-190h]@101
  int v31; // [sp+48h] [bp-18Ch]@101
  int v32; // [sp+4Ch] [bp-188h]@101
  int v33; // [sp+50h] [bp-184h]@101
  int v34; // [sp+54h] [bp-180h]@101
  int v35; // [sp+58h] [bp-17Ch]@101
  int v36; // [sp+5Ch] [bp-178h]@101
  int v37; // [sp+60h] [bp-174h]@101
  int v38; // [sp+64h] [bp-170h]@101
  int v39; // [sp+68h] [bp-16Ch]@101
  int v40; // [sp+6Ch] [bp-168h]@101
  int v41; // [sp+70h] [bp-164h]@101
  int v42; // [sp+74h] [bp-160h]@101
  int v43; // [sp+78h] [bp-15Ch]@101
  int v44; // [sp+7Ch] [bp-158h]@101
  int v45; // [sp+80h] [bp-154h]@101
  int v46; // [sp+84h] [bp-150h]@101
  int v47; // [sp+88h] [bp-14Ch]@101
  int v48; // [sp+8Ch] [bp-148h]@101
  int v49; // [sp+90h] [bp-144h]@101
  int v50; // [sp+94h] [bp-140h]@101
  int v51; // [sp+98h] [bp-13Ch]@101
  int v52; // [sp+9Ch] [bp-138h]@101
  int v53; // [sp+A0h] [bp-134h]@101
  int v54; // [sp+A4h] [bp-130h]@101
  int v55; // [sp+A8h] [bp-12Ch]@101
  int v56; // [sp+ACh] [bp-128h]@101
  int v57; // [sp+B0h] [bp-124h]@101
  int v58; // [sp+B4h] [bp-120h]@101
  int v59; // [sp+B8h] [bp-11Ch]@101
  int v60; // [sp+BCh] [bp-118h]@101
  int v61; // [sp+C0h] [bp-114h]@101
  int v62; // [sp+C4h] [bp-110h]@101
  int v63; // [sp+C8h] [bp-10Ch]@101
  int v64; // [sp+CCh] [bp-108h]@101
  int v65; // [sp+D0h] [bp-104h]@101
  int v66; // [sp+D4h] [bp-100h]@101
  int v67; // [sp+D8h] [bp-FCh]@101
  int v68; // [sp+DCh] [bp-F8h]@101
  int v69; // [sp+E0h] [bp-F4h]@101
  int v70; // [sp+E4h] [bp-F0h]@101
  int v71; // [sp+E8h] [bp-ECh]@101
  int v72; // [sp+ECh] [bp-E8h]@101
  int v73; // [sp+F0h] [bp-E4h]@101
  int v74; // [sp+F4h] [bp-E0h]@101
  int v75; // [sp+F8h] [bp-DCh]@101
  int v76; // [sp+FCh] [bp-D8h]@101
  int v77; // [sp+100h] [bp-D4h]@101
  int v78; // [sp+104h] [bp-D0h]@101
  int v79; // [sp+108h] [bp-CCh]@101
  int v80; // [sp+10Ch] [bp-C8h]@101
  int v81; // [sp+110h] [bp-C4h]@101
  int v82; // [sp+114h] [bp-C0h]@101
  int v83; // [sp+118h] [bp-BCh]@101
  int v84; // [sp+11Ch] [bp-B8h]@101
  int v85; // [sp+120h] [bp-B4h]@101
  int v86; // [sp+124h] [bp-B0h]@101
  int v87; // [sp+128h] [bp-ACh]@101
  int v88; // [sp+12Ch] [bp-A8h]@101
  int v89; // [sp+130h] [bp-A4h]@101
  int v90; // [sp+134h] [bp-A0h]@101
  int v91; // [sp+138h] [bp-9Ch]@101
  int v92; // [sp+13Ch] [bp-98h]@101
  int v93; // [sp+140h] [bp-94h]@101
  int v94; // [sp+144h] [bp-90h]@101
  int v95; // [sp+148h] [bp-8Ch]@101
  int v96; // [sp+14Ch] [bp-88h]@101
  int v97; // [sp+150h] [bp-84h]@101
  int v98; // [sp+154h] [bp-80h]@101
  int v99; // [sp+158h] [bp-7Ch]@101
  int v100; // [sp+15Ch] [bp-78h]@101
  int v101; // [sp+160h] [bp-74h]@101
  int v102; // [sp+164h] [bp-70h]@101
  int v103; // [sp+168h] [bp-6Ch]@101
  int v104; // [sp+16Ch] [bp-68h]@101
  int v105; // [sp+170h] [bp-64h]@101
  int v106; // [sp+174h] [bp-60h]@101
  int v107; // [sp+178h] [bp-5Ch]@101
  int v108; // [sp+17Ch] [bp-58h]@101
  int v109; // [sp+180h] [bp-54h]@101
  int v110; // [sp+184h] [bp-50h]@101
  int v111; // [sp+188h] [bp-4Ch]@101
  int v112; // [sp+18Ch] [bp-48h]@101
  int v113; // [sp+190h] [bp-44h]@101
  int v114; // [sp+194h] [bp-40h]@101
  int v115; // [sp+198h] [bp-3Ch]@101
  int v116; // [sp+19Ch] [bp-38h]@101
  int v117; // [sp+1A0h] [bp-34h]@101
  int v118; // [sp+1A4h] [bp-30h]@101
  int v119; // [sp+1A8h] [bp-2Ch]@101
  int v120; // [sp+1ACh] [bp-28h]@101
  int v121; // [sp+1B0h] [bp-24h]@101
  int v122; // [sp+1B4h] [bp-20h]@101
  int v123; // [sp+1B8h] [bp-1Ch]@101
  int v124; // [sp+1BCh] [bp-18h]@101
  int v125; // [sp+1C0h] [bp-14h]@101
  int i; // [sp+1C8h] [bp-Ch]@30
  int v127; // [sp+1CCh] [bp-8h]@90
  int v128; // [sp+1D0h] [bp-4h]@90

  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      if ( *(_DWORD *)(a1 + 76) == 4 )
      {
        if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
          *(_DWORD *)(a1 + 76) = 2;
        else
          *(_DWORD *)(a1 + 76) = 0;
      }
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 104) = 0;
      goto LABEL_7;
    case 1:
LABEL_7:
      if ( !RNG_Range(0, 100) )
      {
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 1;
      }
      break;
    case 2:
      if ( ++*(_DWORD *)(a1 + 120) > 16 )
      {
        *(_DWORD *)(a1 + 116) = 1;
        *(_DWORD *)(a1 + 104) = 0;
      }
      break;
    case 0xA:
      if ( *(_DWORD *)(a1 + 76) == 4 )
      {
        if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
          *(_DWORD *)(a1 + 76) = 2;
        else
          *(_DWORD *)(a1 + 76) = 0;
      }
      *(_DWORD *)(a1 + 116) = 11;
      *(_DWORD *)(a1 + 104) = 2;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 32) = 0;
      goto LABEL_18;
    case 0xB:
LABEL_18:
      if ( ++*(_DWORD *)(a1 + 120) > 30 )
      {
        *(_DWORD *)(a1 + 116) = 12;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 3;
        *(_DWORD *)(a1 + 20) = -2048;
        *(_WORD *)(a1 + 80) |= 8u;
      }
      break;
    case 0xC:
      if ( *(_DWORD *)(a1 + 4) & 5 )
        *(_DWORD *)(a1 + 16) = 0;
      if ( *(_DWORD *)(a1 + 12) < 0 )
      {
        *(_DWORD *)(a1 + 40) = 0;
        Play_Sound_Effect(26, 1);
        sub_40F310(30);
      }
      break;
    case 0x14:
      if ( *(_DWORD *)(a1 + 76) == 4 )
      {
        if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
          *(_DWORD *)(a1 + 76) = 2;
        else
          *(_DWORD *)(a1 + 76) = 0;
      }
      *(_DWORD *)(a1 + 116) = 21;
      *(_DWORD *)(a1 + 104) = 5;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 108) = 0;
      for ( i = 0; i < 4; ++i )
      {
        v1 = RNG_Range(-1536, 0);
        v2 = RNG_Range(-341, 341);
        v3 = *(_DWORD *)(a1 + 12) + (RNG_Range(-12, 12) << 9);
        v4 = RNG_Range(-12, 12);
        NPC_Create(4, *(_DWORD *)(a1 + 8) + (v4 << 9), v3, v2, v1, 0, 0, 256);
      }
      Play_Sound_Effect(72, 1);
      goto LABEL_34;
    case 0x15:
LABEL_34:
      *(_DWORD *)(a1 + 32) = 1;
      if ( *(_DWORD *)(a1 + 4) & 8 )
        ++*(_DWORD *)(a1 + 120);
      if ( ++*(_DWORD *)(a1 + 108) / 2 % 2 )
        *(_DWORD *)(a1 + 8) += 512;
      else
        *(_DWORD *)(a1 + 8) -= 512;
      if ( *(_DWORD *)(a1 + 120) > 100 )
      {
        *(_DWORD *)(a1 + 116) = 11;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 2;
      }
      *(_DWORD *)(a1 + 20) += 32;
      if ( *(_DWORD *)(a1 + 20) > 1535 )
        *(_DWORD *)(a1 + 20) = 1535;
      break;
    case 0x1E:
      *(_DWORD *)(a1 + 104) = 4;
      if ( ++*(_DWORD *)(a1 + 120) > 100 )
      {
        *(_DWORD *)(a1 + 116) = 0;
        *(_DWORD *)(a1 + 104) = 0;
      }
      break;
    case 0x28:
      if ( *(_DWORD *)(a1 + 76) == 4 )
      {
        if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
          *(_DWORD *)(a1 + 76) = 2;
        else
          *(_DWORD *)(a1 + 76) = 0;
      }
      *(_DWORD *)(a1 + 116) = 41;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 104) = 5;
      goto LABEL_52;
    case 0x29:
LABEL_52:
      if ( ++*(_DWORD *)(a1 + 100) / 2 % 2 )
        *(_DWORD *)(a1 + 104) = 5;
      else
        *(_DWORD *)(a1 + 104) = 6;
      break;
    case 0x2A:
      if ( *(_DWORD *)(a1 + 76) == 4 )
      {
        if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
          *(_DWORD *)(a1 + 76) = 2;
        else
          *(_DWORD *)(a1 + 76) = 0;
      }
      *(_DWORD *)(a1 + 116) = 43;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 104) = 6;
      goto LABEL_61;
    case 0x2B:
LABEL_61:
      if ( ++*(_DWORD *)(a1 + 100) / 2 % 2 )
        *(_DWORD *)(a1 + 104) = 7;
      else
        *(_DWORD *)(a1 + 104) = 6;
      break;
    case 0x32:
      *(_DWORD *)(a1 + 104) = 8;
      *(_DWORD *)(a1 + 16) = 0;
      break;
    case 0x3C:
      *(_DWORD *)(a1 + 116) = 61;
      *(_DWORD *)(a1 + 104) = 9;
      *(_DWORD *)(a1 + 100) = 0;
      goto LABEL_67;
    case 0x3D:
LABEL_67:
      if ( ++*(_DWORD *)(a1 + 100) > 3 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        if ( ++*(_DWORD *)(a1 + 104) == 10 || *(_DWORD *)(a1 + 104) == 11 )
          Play_Sound_Effect(23, 1);
      }
      if ( *(_DWORD *)(a1 + 104) > 12 )
        *(_DWORD *)(a1 + 104) = 9;
      if ( *(_DWORD *)(a1 + 76) )
        *(_DWORD *)(a1 + 16) = 512;
      else
        *(_DWORD *)(a1 + 16) = -512;
      break;
    case 0x46:
      *(_DWORD *)(a1 + 116) = 71;
      *(_DWORD *)(a1 + 120) = 64;
      Play_Sound_Effect(29, 1);
      *(_DWORD *)(a1 + 104) = 13;
      goto LABEL_78;
    case 0x47:
LABEL_78:
      if ( !--*(_DWORD *)(a1 + 120) )
        *(_BYTE *)a1 = 0;
      break;
    case 0x50:
      *(_DWORD *)(a1 + 108) = 0;
      *(_DWORD *)(a1 + 116) = 81;
      goto LABEL_82;
    case 0x51:
LABEL_82:
      if ( ++*(_DWORD *)(a1 + 108) / 2 % 2 )
        *(_DWORD *)(a1 + 8) += 512;
      else
        *(_DWORD *)(a1 + 8) -= 512;
      *(_DWORD *)(a1 + 104) = 5;
      *(_DWORD *)(a1 + 16) = 0;
      *(_DWORD *)(a1 + 20) += 32;
      break;
    case 0x64:
      *(_DWORD *)(a1 + 116) = 101;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 104) = 2;
      goto LABEL_87;
    case 0x65:
LABEL_87:
      if ( ++*(_DWORD *)(a1 + 120) > 20 )
      {
        *(_DWORD *)(a1 + 116) = 102;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 3;
        *(_DWORD *)(a1 + 20) = -2048;
        *(_WORD *)(a1 + 80) |= 8u;
        sub_4702D0(150, 0);
        sub_4702D0(117, 0);
        NPC_Create(355, 0, 0, 0, 0, 0, a1, 256);
        NPC_Create(355, 0, 0, 0, 0, 1, a1, 256);
      }
      break;
    case 0x66:
      v127 = *(_DWORD *)(a1 + 8) / 512 / 16;
      v128 = *(_DWORD *)(a1 + 12) / 512 / 16;
      if ( v128 >= 0 && v128 < 35 && sub_413A60(v127, v128, 0) )
      {
        sub_413A60(v127 - 1, v128, 0);
        sub_413A60(v127 + 1, v128, 0);
        Play_Sound_Effect(44, 1);
        sub_40F320(10);
      }
      if ( *(_DWORD *)(a1 + 12) < -16384 )
      {
        *(_DWORD *)(a1 + 40) = 0;
        sub_40F310(30);
      }
      break;
    default:
      break;
  }
  if ( *(_DWORD *)(a1 + 32) && !RNG_Range(0, 10) )
  {
    v5 = RNG_Range(-1536, 0);
    v6 = RNG_Range(-341, 341);
    v7 = *(_DWORD *)(a1 + 12) + (RNG_Range(-12, 12) << 9);
    v8 = RNG_Range(-12, 12);
    NPC_Create(4, *(_DWORD *)(a1 + 8) + (v8 << 9), v7, v6, v5, 0, 0, 256);
  }
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  v70 = 0;
  v71 = 0;
  v72 = 40;
  v73 = 24;
  v74 = 160;
  v75 = 0;
  v76 = 200;
  v77 = 24;
  v78 = 80;
  v79 = 0;
  v80 = 120;
  v81 = 24;
  v82 = 120;
  v83 = 0;
  v84 = 160;
  v85 = 24;
  v86 = 240;
  v87 = 0;
  v88 = 280;
  v89 = 24;
  v90 = 200;
  v91 = 0;
  v92 = 240;
  v93 = 24;
  v94 = 280;
  v95 = 0;
  v96 = 320;
  v97 = 24;
  v98 = 0;
  v99 = 0;
  v100 = 0;
  v101 = 0;
  v102 = 80;
  v103 = 48;
  v104 = 120;
  v105 = 72;
  v106 = 0;
  v107 = 48;
  v108 = 40;
  v109 = 72;
  v110 = 0;
  v111 = 0;
  v112 = 40;
  v113 = 24;
  v114 = 40;
  v115 = 48;
  v116 = 80;
  v117 = 72;
  v118 = 0;
  v119 = 0;
  v120 = 40;
  v121 = 24;
  v122 = 280;
  v123 = 0;
  v124 = 320;
  v125 = 24;
  v14 = 0;
  v15 = 24;
  v16 = 40;
  v17 = 48;
  v18 = 160;
  v19 = 24;
  v20 = 200;
  v21 = 48;
  v22 = 80;
  v23 = 24;
  v24 = 120;
  v25 = 48;
  v26 = 120;
  v27 = 24;
  v28 = 160;
  v29 = 48;
  v30 = 240;
  v31 = 24;
  v32 = 280;
  v33 = 48;
  v34 = 200;
  v35 = 24;
  v36 = 240;
  v37 = 48;
  v38 = 280;
  v39 = 24;
  v40 = 320;
  v41 = 48;
  v42 = 0;
  v43 = 0;
  v44 = 0;
  v45 = 0;
  v46 = 80;
  v47 = 72;
  v48 = 120;
  v49 = 96;
  v50 = 0;
  v51 = 72;
  v52 = 40;
  v53 = 96;
  v54 = 0;
  v55 = 24;
  v56 = 40;
  v57 = 48;
  v58 = 40;
  v59 = 72;
  v60 = 80;
  v61 = 96;
  v62 = 0;
  v63 = 24;
  v64 = 40;
  v65 = 48;
  v66 = 280;
  v67 = 24;
  v68 = 320;
  v69 = 48;
  if ( *(_DWORD *)(a1 + 76) )
  {
    v12 = &v14 + 4 * *(_DWORD *)(a1 + 104);
    v13 = a1 + 84;
    *(_DWORD *)v13 = *v12;
    *(_DWORD *)(v13 + 4) = v12[1];
    result = v12[2];
    *(_DWORD *)(v13 + 8) = result;
    *(_DWORD *)(v13 + 12) = v12[3];
  }
  else
  {
    v9 = &v70 + 4 * *(_DWORD *)(a1 + 104);
    v10 = a1 + 84;
    *(_DWORD *)v10 = *v9;
    *(_DWORD *)(v10 + 4) = v9[1];
    result = v9[2];
    *(_DWORD *)(v10 + 8) = result;
    *(_DWORD *)(v10 + 12) = v9[3];
  }
  if ( *(_DWORD *)(a1 + 116) == 71 )
  {
    *(_DWORD *)(a1 + 96) = *(_DWORD *)(a1 + 88) + *(_DWORD *)(a1 + 120) / 2;
    result = a1;
    if ( *(_DWORD *)(a1 + 120) % 2 )
    {
      result = *(_DWORD *)(a1 + 84) + 1;
      *(_DWORD *)(a1 + 84) = result;
    }
  }
  return result;
}

//----- (00429940) --------------------------------------------------------
// NPC 13 : Forcefield
int __cdecl NPC13_Forcefield(int a1)
{
  int *v1; // eax@5
  int v2; // ecx@5
  int result; // eax@5
  int v4; // [sp+0h] [bp-40h]@1
  int v5; // [sp+4h] [bp-3Ch]@1
  int v6; // [sp+8h] [bp-38h]@1
  int v7; // [sp+Ch] [bp-34h]@1
  int v8; // [sp+10h] [bp-30h]@1
  int v9; // [sp+14h] [bp-2Ch]@1
  int v10; // [sp+18h] [bp-28h]@1
  int v11; // [sp+1Ch] [bp-24h]@1
  int v12; // [sp+20h] [bp-20h]@1
  int v13; // [sp+24h] [bp-1Ch]@1
  int v14; // [sp+28h] [bp-18h]@1
  int v15; // [sp+2Ch] [bp-14h]@1
  int v16; // [sp+30h] [bp-10h]@1
  int v17; // [sp+34h] [bp-Ch]@1
  int v18; // [sp+38h] [bp-8h]@1
  int v19; // [sp+3Ch] [bp-4h]@1

  v4 = 128;
  v5 = 0;
  v6 = 144;
  v7 = 16;
  v8 = 144;
  v9 = 0;
  v10 = 160;
  v11 = 16;
  v12 = 160;
  v13 = 0;
  v14 = 176;
  v15 = 16;
  v16 = 176;
  v17 = 0;
  v18 = 192;
  v19 = 16;
  if ( ++*(_DWORD *)(a1 + 100) > 0 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    ++*(_DWORD *)(a1 + 104);
  }
  if ( *(_DWORD *)(a1 + 104) > 3 )
    *(_DWORD *)(a1 + 104) = 0;
  v1 = &v4 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  *(_DWORD *)(v2 + 8) = v1[2];
  result = v1[3];
  *(_DWORD *)(v2 + 12) = result;
  return result;
}

//----- (00429A30) --------------------------------------------------------
// NPC 14 : Santa's Key
// Can be found in Grasstown
int __cdecl NPC14_Santas_Key(int a1)
{
  int v1; // ST10_4@5
  int v2; // ST0C_4@5
  int v3; // ST08_4@5
  int v4; // eax@5
  int *v5; // eax@12
  int v6; // ecx@12
  int result; // eax@12
  signed int i; // [sp+4h] [bp-34h]@3
  int v9; // [sp+8h] [bp-30h]@1
  int v10; // [sp+Ch] [bp-2Ch]@1
  int v11; // [sp+10h] [bp-28h]@1
  int v12; // [sp+14h] [bp-24h]@1
  int v13; // [sp+18h] [bp-20h]@1
  int v14; // [sp+1Ch] [bp-1Ch]@1
  int v15; // [sp+20h] [bp-18h]@1
  int v16; // [sp+24h] [bp-14h]@1
  int v17; // [sp+28h] [bp-10h]@1
  int v18; // [sp+2Ch] [bp-Ch]@1
  int v19; // [sp+30h] [bp-8h]@1
  int v20; // [sp+34h] [bp-4h]@1

  v9 = 192;
  v10 = 0;
  v11 = 208;
  v12 = 16;
  v13 = 208;
  v14 = 0;
  v15 = 224;
  v16 = 16;
  v17 = 224;
  v18 = 0;
  v19 = 240;
  v20 = 16;
  if ( !*(_DWORD *)(a1 + 116) )
  {
    *(_DWORD *)(a1 + 116) = 1;
    if ( *(_DWORD *)(a1 + 76) == 2 )
    {
      *(_DWORD *)(a1 + 20) = -512;
      for ( i = 0; i < 4; ++i )
      {
        v1 = RNG_Range(-1536, 0);
        v2 = RNG_Range(-341, 341);
        v3 = *(_DWORD *)(a1 + 12) + (RNG_Range(-12, 12) << 9);
        v4 = RNG_Range(-12, 12);
        NPC_Create(4, *(_DWORD *)(a1 + 8) + (v4 << 9), v3, v2, v1, 0, 0, 256);
      }
    }
  }
  if ( ++*(_DWORD *)(a1 + 100) > 1 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    ++*(_DWORD *)(a1 + 104);
  }
  if ( *(_DWORD *)(a1 + 104) > 2 )
    *(_DWORD *)(a1 + 104) = 0;
  *(_DWORD *)(a1 + 20) += 64;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  v5 = &v9 + 4 * *(_DWORD *)(a1 + 104);
  v6 = a1 + 84;
  *(_DWORD *)v6 = *v5;
  *(_DWORD *)(v6 + 4) = v5[1];
  *(_DWORD *)(v6 + 8) = v5[2];
  result = v5[3];
  *(_DWORD *)(v6 + 12) = result;
  return result;
}

//----- (00429BF0) --------------------------------------------------------
// NPC 15 : Treasure Chest, closed
int __cdecl NPC15_TreasureChestClosed(int a1)
{
  int v1; // ST10_4@8
  int v2; // ST0C_4@8
  int v3; // ST08_4@8
  int v4; // eax@8
  int *v5; // eax@18
  int v6; // ecx@18
  int result; // eax@18
  int v8; // [sp+0h] [bp-38h]@1
  signed int i; // [sp+4h] [bp-34h]@6
  int v10; // [sp+8h] [bp-30h]@1
  int v11; // [sp+Ch] [bp-2Ch]@1
  int v12; // [sp+10h] [bp-28h]@1
  int v13; // [sp+14h] [bp-24h]@1
  int v14; // [sp+18h] [bp-20h]@1
  int v15; // [sp+1Ch] [bp-1Ch]@1
  int v16; // [sp+20h] [bp-18h]@1
  int v17; // [sp+24h] [bp-14h]@1
  int v18; // [sp+28h] [bp-10h]@1
  int v19; // [sp+2Ch] [bp-Ch]@1
  int v20; // [sp+30h] [bp-8h]@1
  int v21; // [sp+34h] [bp-4h]@1

  v10 = 240;
  v11 = 0;
  v12 = 256;
  v13 = 16;
  v14 = 256;
  v15 = 0;
  v16 = 272;
  v17 = 16;
  v18 = 272;
  v19 = 0;
  v20 = 288;
  v21 = 16;
  v8 = *(_DWORD *)(a1 + 116);
  if ( v8 )
  {
    if ( v8 != 1 )
    {
      if ( v8 == 2 )
      {
        if ( ++*(_DWORD *)(a1 + 100) > 1 )
        {
          *(_DWORD *)(a1 + 100) = 0;
          ++*(_DWORD *)(a1 + 104);
        }
        if ( *(_DWORD *)(a1 + 104) > 2 )
        {
          *(_DWORD *)(a1 + 104) = 0;
          *(_DWORD *)(a1 + 116) = 1;
        }
      }
      goto LABEL_16;
    }
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 1;
    *(_WORD *)(a1 + 80) |= 0x2000u;
    if ( *(_DWORD *)(a1 + 76) == 2 )
    {
      *(_DWORD *)(a1 + 20) = -512;
      for ( i = 0; i < 4; ++i )
      {
        v1 = RNG_Range(-1536, 0);
        v2 = RNG_Range(-341, 341);
        v3 = *(_DWORD *)(a1 + 12) + (RNG_Range(-12, 12) << 9);
        v4 = RNG_Range(-12, 12);
        NPC_Create(4, *(_DWORD *)(a1 + 8) + (v4 << 9), v3, v2, v1, 0, 0, 256);
      }
    }
  }
  *(_DWORD *)(a1 + 104) = 0;
  if ( !RNG_Range(0, 30) )
    *(_DWORD *)(a1 + 116) = 2;
LABEL_16:
  *(_DWORD *)(a1 + 20) += 64;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  v5 = &v10 + 4 * *(_DWORD *)(a1 + 104);
  v6 = a1 + 84;
  *(_DWORD *)v6 = *v5;
  *(_DWORD *)(v6 + 4) = v5[1];
  *(_DWORD *)(v6 + 8) = v5[2];
  result = v5[3];
  *(_DWORD *)(v6 + 12) = result;
  return result;
}

//----- (00429E00) --------------------------------------------------------
int __cdecl NPC16(int a1)
{
  int v1; // ST10_4@7
  int v2; // ST0C_4@7
  int v3; // ST08_4@7
  int v4; // eax@7
  int *v5; // edx@16
  int result; // eax@16
  int v7; // [sp+0h] [bp-88h]@1
  signed int i; // [sp+4h] [bp-84h]@5
  int v9; // [sp+8h] [bp-80h]@1
  int v10; // [sp+Ch] [bp-7Ch]@1
  int v11; // [sp+10h] [bp-78h]@1
  int v12; // [sp+14h] [bp-74h]@1
  int v13; // [sp+18h] [bp-70h]@1
  int v14; // [sp+1Ch] [bp-6Ch]@1
  int v15; // [sp+20h] [bp-68h]@1
  int v16; // [sp+24h] [bp-64h]@1
  int v17; // [sp+28h] [bp-60h]@1
  int v18; // [sp+2Ch] [bp-5Ch]@1
  int v19; // [sp+30h] [bp-58h]@1
  int v20; // [sp+34h] [bp-54h]@1
  int v21; // [sp+38h] [bp-50h]@1
  int v22; // [sp+3Ch] [bp-4Ch]@1
  int v23; // [sp+40h] [bp-48h]@1
  int v24; // [sp+44h] [bp-44h]@1
  int v25; // [sp+48h] [bp-40h]@1
  int v26; // [sp+4Ch] [bp-3Ch]@1
  int v27; // [sp+50h] [bp-38h]@1
  int v28; // [sp+54h] [bp-34h]@1
  int v29; // [sp+58h] [bp-30h]@1
  int v30; // [sp+5Ch] [bp-2Ch]@1
  int v31; // [sp+60h] [bp-28h]@1
  int v32; // [sp+64h] [bp-24h]@1
  int v33; // [sp+68h] [bp-20h]@1
  int v34; // [sp+6Ch] [bp-1Ch]@1
  int v35; // [sp+70h] [bp-18h]@1
  int v36; // [sp+74h] [bp-14h]@1
  int v37; // [sp+78h] [bp-10h]@1
  int v38; // [sp+7Ch] [bp-Ch]@1
  int v39; // [sp+80h] [bp-8h]@1
  int v40; // [sp+84h] [bp-4h]@1

  v9 = 96;
  v10 = 16;
  v11 = 112;
  v12 = 32;
  v13 = 112;
  v14 = 16;
  v15 = 128;
  v16 = 32;
  v17 = 128;
  v18 = 16;
  v19 = 144;
  v20 = 32;
  v21 = 144;
  v22 = 16;
  v23 = 160;
  v24 = 32;
  v25 = 160;
  v26 = 16;
  v27 = 176;
  v28 = 32;
  v29 = 176;
  v30 = 16;
  v31 = 192;
  v32 = 32;
  v33 = 192;
  v34 = 16;
  v35 = 208;
  v36 = 32;
  v37 = 208;
  v38 = 16;
  v39 = 224;
  v40 = 32;
  v7 = *(_DWORD *)(a1 + 116);
  if ( v7 )
  {
    if ( v7 != 1 )
      goto LABEL_10;
  }
  else
  {
    *(_WORD *)(a1 + 80) |= 0x2000u;
    *(_DWORD *)(a1 + 116) = 1;
    if ( *(_DWORD *)(a1 + 76) == 2 )
    {
      *(_WORD *)(a1 + 80) &= 0xDFFFu;
      *(_DWORD *)(a1 + 20) = -512;
      for ( i = 0; i < 4; ++i )
      {
        v1 = RNG_Range(-1536, 0);
        v2 = RNG_Range(-341, 341);
        v3 = *(_DWORD *)(a1 + 12) + (RNG_Range(-12, 12) << 9);
        v4 = RNG_Range(-12, 12);
        NPC_Create(4, *(_DWORD *)(a1 + 8) + (v4 << 9), v3, v2, v1, 0, 0, 256);
      }
    }
  }
  if ( *(_DWORD *)(a1 + 4) & 8 )
    *(_WORD *)(a1 + 80) |= 0x2000u;
LABEL_10:
  if ( ++*(_DWORD *)(a1 + 100) > 2 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    ++*(_DWORD *)(a1 + 104);
  }
  if ( *(_DWORD *)(a1 + 104) > 7 )
    *(_DWORD *)(a1 + 104) = 0;
  *(_DWORD *)(a1 + 20) += 64;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  v5 = &v9 + 4 * *(_DWORD *)(a1 + 104);
  result = a1 + 84;
  *(_DWORD *)result = *v5;
  *(_DWORD *)(result + 4) = v5[1];
  *(_DWORD *)(result + 8) = v5[2];
  *(_DWORD *)(result + 12) = v5[3];
  return result;
}

//----- (0042A0B0) --------------------------------------------------------
int __cdecl NPC17(int a1)
{
  int v1; // ST10_4@5
  int v2; // ST0C_4@5
  int v3; // ST08_4@5
  int v4; // eax@5
  int v5; // eax@12
  int v6; // ecx@16
  int v7; // ecx@17
  int v8; // eax@21
  int result; // eax@25
  signed int i; // [sp+24h] [bp-4h]@3
  int v11; // [sp+24h] [bp-4h]@6

  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      if ( *(_DWORD *)(a1 + 76) == 2 )
      {
        *(_DWORD *)(a1 + 20) = -512;
        for ( i = 0; i < 4; ++i )
        {
          v1 = RNG_Range(-1536, 0);
          v2 = RNG_Range(-341, 341);
          v3 = *(_DWORD *)(a1 + 12) + (RNG_Range(-12, 12) << 9);
          v4 = RNG_Range(-12, 12);
          NPC_Create(4, *(_DWORD *)(a1 + 8) + (v4 << 9), v3, v2, v1, 0, 0, 256);
        }
      }
      goto LABEL_6;
    case 1:
LABEL_6:
      v11 = RNG_Range(0, 30);
      if ( v11 >= 10 )
      {
        if ( v11 >= 25 )
          *(_DWORD *)(a1 + 116) = 4;
        else
          *(_DWORD *)(a1 + 116) = 3;
      }
      else
      {
        *(_DWORD *)(a1 + 116) = 2;
      }
      *(_DWORD *)(a1 + 120) = RNG_Range(16, 64);
      *(_DWORD *)(a1 + 100) = 0;
      break;
    case 2:
      v5 = a1 + 84;
      *(_DWORD *)v5 = 288;
      *(_DWORD *)(v5 + 4) = 0;
      *(_DWORD *)(v5 + 8) = 304;
      *(_DWORD *)(v5 + 12) = 16;
      if ( !--*(_DWORD *)(a1 + 120) )
        *(_DWORD *)(a1 + 116) = 1;
      break;
    case 3:
      if ( ++*(_DWORD *)(a1 + 100) % 2 )
      {
        v6 = a1 + 84;
        *(_DWORD *)v6 = 288;
        *(_DWORD *)(v6 + 4) = 0;
        *(_DWORD *)(v6 + 8) = 304;
        *(_DWORD *)(v6 + 12) = 16;
      }
      else
      {
        v7 = a1 + 84;
        *(_DWORD *)v7 = 304;
        *(_DWORD *)(v7 + 4) = 0;
        *(_DWORD *)(v7 + 8) = 320;
        *(_DWORD *)(v7 + 12) = 16;
      }
      if ( !--*(_DWORD *)(a1 + 120) )
        *(_DWORD *)(a1 + 116) = 1;
      break;
    case 4:
      v8 = a1 + 84;
      *(_DWORD *)v8 = 304;
      *(_DWORD *)(v8 + 4) = 0;
      *(_DWORD *)(v8 + 8) = 320;
      *(_DWORD *)(v8 + 12) = 16;
      if ( !--*(_DWORD *)(a1 + 120) )
        *(_DWORD *)(a1 + 116) = 1;
      break;
    default:
      break;
  }
  *(_DWORD *)(a1 + 20) += 64;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  result = a1;
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  return result;
}

//----- (0042A360) --------------------------------------------------------
int __cdecl NPC18(int a1)
{
  int result; // eax@1
  int v2; // ST10_4@10
  int v3; // eax@10
  int v4; // [sp+0h] [bp-28h]@1
  signed int i; // [sp+4h] [bp-24h]@8

  result = a1;
  v4 = *(_DWORD *)(a1 + 116);
  if ( v4 )
  {
    if ( v4 == 1 )
    {
      for ( i = 0; i < 4; ++i )
      {
        v2 = RNG_Range(-1536, 0);
        v3 = RNG_Range(-341, 341);
        NPC_Create(4, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), v3, v2, 0, 0, 256);
      }
      *(_DWORD *)(a1 + 116) = 0;
      result = a1 + 84;
      *(_DWORD *)result = 224;
      *(_DWORD *)(result + 4) = 16;
      *(_DWORD *)(result + 8) = 240;
      *(_DWORD *)(result + 12) = 40;
    }
  }
  else if ( *(_DWORD *)(a1 + 76) )
  {
    result = a1 + 84;
    *(_DWORD *)result = 192;
    *(_DWORD *)(result + 4) = 112;
    *(_DWORD *)(result + 8) = 208;
    *(_DWORD *)(result + 12) = 136;
  }
  else
  {
    result = a1 + 84;
    *(_DWORD *)result = 224;
    *(_DWORD *)(result + 4) = 16;
    *(_DWORD *)(result + 8) = 240;
    *(_DWORD *)(result + 12) = 40;
  }
  return result;
}

//----- (0042A490) --------------------------------------------------------
int __cdecl NPC19(int a1)
{
  int v1; // ST10_4@4
  int v2; // ST0C_4@4
  int v3; // ST08_4@4
  int v4; // eax@4
  int *v5; // ecx@23
  int v6; // edx@23
  int result; // eax@23
  int *v8; // ecx@24
  int v9; // edx@24
  int v10; // [sp+4h] [bp-88h]@22
  int v11; // [sp+8h] [bp-84h]@22
  int v12; // [sp+Ch] [bp-80h]@22
  int v13; // [sp+10h] [bp-7Ch]@22
  int v14; // [sp+14h] [bp-78h]@22
  int v15; // [sp+18h] [bp-74h]@22
  int v16; // [sp+1Ch] [bp-70h]@22
  int v17; // [sp+20h] [bp-6Ch]@22
  int v18; // [sp+24h] [bp-68h]@22
  int v19; // [sp+28h] [bp-64h]@22
  int v20; // [sp+2Ch] [bp-60h]@22
  int v21; // [sp+30h] [bp-5Ch]@22
  int v22; // [sp+34h] [bp-58h]@22
  int v23; // [sp+38h] [bp-54h]@22
  int v24; // [sp+3Ch] [bp-50h]@22
  int v25; // [sp+40h] [bp-4Ch]@22
  int v26; // [sp+44h] [bp-48h]@22
  int v27; // [sp+48h] [bp-44h]@22
  int v28; // [sp+4Ch] [bp-40h]@22
  int v29; // [sp+50h] [bp-3Ch]@22
  int v30; // [sp+54h] [bp-38h]@22
  int v31; // [sp+58h] [bp-34h]@22
  int v32; // [sp+5Ch] [bp-30h]@22
  int v33; // [sp+60h] [bp-2Ch]@22
  int v34; // [sp+64h] [bp-28h]@22
  int v35; // [sp+68h] [bp-24h]@22
  int v36; // [sp+6Ch] [bp-20h]@22
  int v37; // [sp+70h] [bp-1Ch]@22
  int v38; // [sp+74h] [bp-18h]@22
  int v39; // [sp+78h] [bp-14h]@22
  int v40; // [sp+7Ch] [bp-10h]@22
  int v41; // [sp+80h] [bp-Ch]@22
  int i; // [sp+88h] [bp-4h]@2

  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      for ( i = 0; i < 16; ++i )
      {
        v1 = RNG_Range(-1536, 0);
        v2 = RNG_Range(-341, 341);
        v3 = *(_DWORD *)(a1 + 12) + (RNG_Range(-12, 12) << 9);
        v4 = RNG_Range(-12, 12);
        NPC_Create(4, *(_DWORD *)(a1 + 8) + (v4 << 9), v3, v2, v1, 0, 0, 256);
      }
      *(_DWORD *)(a1 + 12) += 5120;
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 104) = 3;
      *(_DWORD *)(a1 + 20) = -256;
      Play_Sound_Effect(12, 1);
      Play_Sound_Effect(26, 1);
      sub_40F310(30);
      goto LABEL_6;
    case 1:
LABEL_6:
      *(_DWORD *)(a1 + 20) += 16;
      if ( *(_DWORD *)(a1 + 20) > 0 && *(_DWORD *)(a1 + 4) & 8 )
      {
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 104) = 2;
        *(_DWORD *)(a1 + 120) = 0;
        Play_Sound_Effect(26, 1);
        sub_40F310(30);
      }
      break;
    case 2:
      if ( ++*(_DWORD *)(a1 + 120) > 16 )
      {
        *(_DWORD *)(a1 + 116) = 3;
        *(_DWORD *)(a1 + 104) = 0;
        *(_DWORD *)(a1 + 100) = 0;
      }
      break;
    case 3:
      if ( !RNG_Range(0, 100) )
      {
        *(_DWORD *)(a1 + 116) = 4;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 1;
      }
      break;
    case 4:
      if ( ++*(_DWORD *)(a1 + 120) > 16 )
      {
        *(_DWORD *)(a1 + 116) = 3;
        *(_DWORD *)(a1 + 104) = 0;
      }
      break;
    default:
      break;
  }
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  if ( *(_DWORD *)(a1 + 20) < -1535 )
    *(_DWORD *)(a1 + 20) = -1535;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  v26 = 0;
  v27 = 0;
  v28 = 40;
  v29 = 24;
  v30 = 160;
  v31 = 0;
  v32 = 200;
  v33 = 24;
  v34 = 80;
  v35 = 0;
  v36 = 120;
  v37 = 24;
  v38 = 120;
  v39 = 0;
  v40 = 160;
  v41 = 24;
  v10 = 0;
  v11 = 24;
  v12 = 40;
  v13 = 48;
  v14 = 160;
  v15 = 24;
  v16 = 200;
  v17 = 48;
  v18 = 80;
  v19 = 24;
  v20 = 120;
  v21 = 48;
  v22 = 120;
  v23 = 24;
  v24 = 160;
  v25 = 48;
  if ( *(_DWORD *)(a1 + 76) )
  {
    v8 = &v10 + 4 * *(_DWORD *)(a1 + 104);
    v9 = a1 + 84;
    *(_DWORD *)v9 = *v8;
    *(_DWORD *)(v9 + 4) = v8[1];
    result = v8[2];
    *(_DWORD *)(v9 + 8) = result;
    *(_DWORD *)(v9 + 12) = v8[3];
  }
  else
  {
    v5 = &v26 + 4 * *(_DWORD *)(a1 + 104);
    v6 = a1 + 84;
    *(_DWORD *)v6 = *v5;
    *(_DWORD *)(v6 + 4) = v5[1];
    result = v5[2];
    *(_DWORD *)(v6 + 8) = result;
    *(_DWORD *)(v6 + 12) = v5[3];
  }
  return result;
}

//----- (0042A830) --------------------------------------------------------
int __cdecl NPC20(int a1)
{
  int v1; // edx@6
  int result; // eax@6
  int *v3; // ecx@7
  int v4; // edx@7
  int v5; // [sp+0h] [bp-40h]@1
  int v6; // [sp+4h] [bp-3Ch]@1
  int v7; // [sp+8h] [bp-38h]@1
  int v8; // [sp+Ch] [bp-34h]@1
  int v9; // [sp+10h] [bp-30h]@1
  int v10; // [sp+14h] [bp-2Ch]@1
  int v11; // [sp+18h] [bp-28h]@1
  int v12; // [sp+1Ch] [bp-24h]@1
  int v13; // [sp+20h] [bp-20h]@1
  int v14; // [sp+24h] [bp-1Ch]@1
  int v15; // [sp+28h] [bp-18h]@1
  int v16; // [sp+2Ch] [bp-14h]@1
  int v17; // [sp+30h] [bp-10h]@1
  int v18; // [sp+34h] [bp-Ch]@1
  int v19; // [sp+38h] [bp-8h]@1
  int v20; // [sp+3Ch] [bp-4h]@1

  v17 = 288;
  v18 = 16;
  v19 = 320;
  v20 = 40;
  v5 = 288;
  v6 = 40;
  v7 = 320;
  v8 = 64;
  v9 = 288;
  v10 = 40;
  v11 = 320;
  v12 = 64;
  v13 = 288;
  v14 = 64;
  v15 = 320;
  v16 = 88;
  if ( ++*(_DWORD *)(a1 + 100) > 3 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    ++*(_DWORD *)(a1 + 104);
  }
  if ( *(_DWORD *)(a1 + 104) > 2 )
    *(_DWORD *)(a1 + 104) = 0;
  if ( *(_DWORD *)(a1 + 76) )
  {
    v3 = &v5 + 4 * *(_DWORD *)(a1 + 104);
    v4 = a1 + 84;
    *(_DWORD *)v4 = *v3;
    *(_DWORD *)(v4 + 4) = v3[1];
    result = v3[2];
    *(_DWORD *)(v4 + 8) = result;
    *(_DWORD *)(v4 + 12) = v3[3];
  }
  else
  {
    v1 = a1 + 84;
    *(_DWORD *)v1 = v17;
    *(_DWORD *)(v1 + 4) = v18;
    result = v19;
    *(_DWORD *)(v1 + 8) = v19;
    *(_DWORD *)(v1 + 12) = v20;
  }
  return result;
}

//----- (0042A940) --------------------------------------------------------
int __cdecl NPC21(int a1)
{
  int result; // eax@4

  if ( !*(_DWORD *)(a1 + 116) )
  {
    *(_DWORD *)(a1 + 116) = 1;
    if ( *(_DWORD *)(a1 + 76) == 2 )
      *(_DWORD *)(a1 + 12) += 0x2000;
  }
  result = a1 + 84;
  *(_DWORD *)result = 224;
  *(_DWORD *)(result + 4) = 40;
  *(_DWORD *)(result + 8) = 240;
  *(_DWORD *)(result + 12) = 48;
  return result;
}

//----- (0042A9C0) --------------------------------------------------------
int __cdecl NPC22(int a1)
{
  int *v1; // ecx@7
  int v2; // edx@7
  int result; // eax@7
  int v4; // [sp+0h] [bp-24h]@1
  int v5; // [sp+4h] [bp-20h]@1
  int v6; // [sp+8h] [bp-1Ch]@1
  int v7; // [sp+Ch] [bp-18h]@1
  int v8; // [sp+10h] [bp-14h]@1
  int v9; // [sp+14h] [bp-10h]@1
  int v10; // [sp+18h] [bp-Ch]@1
  int v11; // [sp+1Ch] [bp-8h]@1
  int v12; // [sp+20h] [bp-4h]@1

  v5 = 240;
  v6 = 16;
  v7 = 264;
  v8 = 48;
  v9 = 248;
  v10 = 152;
  v11 = 272;
  v12 = 184;
  v4 = *(_DWORD *)(a1 + 116);
  if ( v4 )
  {
    if ( v4 == 1 && ++*(_DWORD *)(a1 + 104) > 1 )
      *(_DWORD *)(a1 + 104) = 0;
  }
  else
  {
    *(_DWORD *)(a1 + 104) = 0;
  }
  v1 = &v5 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  result = v1[2];
  *(_DWORD *)(v2 + 8) = result;
  *(_DWORD *)(v2 + 12) = v1[3];
  return result;
}

//----- (0042AA70) --------------------------------------------------------
int __cdecl NPC23(int a1)
{
  int *v1; // eax@5
  int v2; // ecx@5
  int result; // eax@5
  int v4; // [sp+0h] [bp-80h]@1
  int v5; // [sp+4h] [bp-7Ch]@1
  int v6; // [sp+8h] [bp-78h]@1
  int v7; // [sp+Ch] [bp-74h]@1
  int v8; // [sp+10h] [bp-70h]@1
  int v9; // [sp+14h] [bp-6Ch]@1
  int v10; // [sp+18h] [bp-68h]@1
  int v11; // [sp+1Ch] [bp-64h]@1
  int v12; // [sp+20h] [bp-60h]@1
  int v13; // [sp+24h] [bp-5Ch]@1
  int v14; // [sp+28h] [bp-58h]@1
  int v15; // [sp+2Ch] [bp-54h]@1
  int v16; // [sp+30h] [bp-50h]@1
  int v17; // [sp+34h] [bp-4Ch]@1
  int v18; // [sp+38h] [bp-48h]@1
  int v19; // [sp+3Ch] [bp-44h]@1
  int v20; // [sp+40h] [bp-40h]@1
  int v21; // [sp+44h] [bp-3Ch]@1
  int v22; // [sp+48h] [bp-38h]@1
  int v23; // [sp+4Ch] [bp-34h]@1
  int v24; // [sp+50h] [bp-30h]@1
  int v25; // [sp+54h] [bp-2Ch]@1
  int v26; // [sp+58h] [bp-28h]@1
  int v27; // [sp+5Ch] [bp-24h]@1
  int v28; // [sp+60h] [bp-20h]@1
  int v29; // [sp+64h] [bp-1Ch]@1
  int v30; // [sp+68h] [bp-18h]@1
  int v31; // [sp+6Ch] [bp-14h]@1
  int v32; // [sp+70h] [bp-10h]@1
  int v33; // [sp+74h] [bp-Ch]@1
  int v34; // [sp+78h] [bp-8h]@1
  int v35; // [sp+7Ch] [bp-4h]@1

  v4 = 264;
  v5 = 16;
  v6 = 288;
  v7 = 20;
  v8 = 264;
  v9 = 20;
  v10 = 288;
  v11 = 24;
  v12 = 264;
  v13 = 24;
  v14 = 288;
  v15 = 28;
  v16 = 264;
  v17 = 28;
  v18 = 288;
  v19 = 32;
  v20 = 264;
  v21 = 32;
  v22 = 288;
  v23 = 36;
  v24 = 264;
  v25 = 36;
  v26 = 288;
  v27 = 40;
  v28 = 264;
  v29 = 40;
  v30 = 288;
  v31 = 44;
  v32 = 264;
  v33 = 44;
  v34 = 288;
  v35 = 48;
  if ( ++*(_DWORD *)(a1 + 100) > 1 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    ++*(_DWORD *)(a1 + 104);
  }
  if ( *(_DWORD *)(a1 + 104) > 7 )
    *(_DWORD *)(a1 + 104) = 0;
  v1 = &v4 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  *(_DWORD *)(v2 + 8) = v1[2];
  result = v1[3];
  *(_DWORD *)(v2 + 12) = result;
  return result;
}

//----- (0042ABD0) --------------------------------------------------------
int __cdecl NPC24(int a1)
{
  int *v1; // eax@69
  int v2; // ecx@69
  int result; // eax@69
  int *v4; // eax@70
  int v5; // ecx@70
  int v6; // [sp+4h] [bp-C0h]@1
  int v7; // [sp+8h] [bp-BCh]@1
  int v8; // [sp+Ch] [bp-B8h]@1
  int v9; // [sp+10h] [bp-B4h]@1
  int v10; // [sp+14h] [bp-B0h]@1
  int v11; // [sp+18h] [bp-ACh]@1
  int v12; // [sp+1Ch] [bp-A8h]@1
  int v13; // [sp+20h] [bp-A4h]@1
  int v14; // [sp+24h] [bp-A0h]@1
  int v15; // [sp+28h] [bp-9Ch]@1
  int v16; // [sp+2Ch] [bp-98h]@1
  int v17; // [sp+30h] [bp-94h]@1
  int v18; // [sp+34h] [bp-90h]@1
  int v19; // [sp+38h] [bp-8Ch]@1
  int v20; // [sp+3Ch] [bp-88h]@1
  int v21; // [sp+40h] [bp-84h]@1
  int v22; // [sp+44h] [bp-80h]@1
  int v23; // [sp+48h] [bp-7Ch]@1
  int v24; // [sp+4Ch] [bp-78h]@1
  int v25; // [sp+50h] [bp-74h]@1
  int v26; // [sp+54h] [bp-70h]@1
  int v27; // [sp+58h] [bp-6Ch]@1
  int v28; // [sp+5Ch] [bp-68h]@1
  int v29; // [sp+60h] [bp-64h]@1
  int v30; // [sp+64h] [bp-60h]@1
  int v31; // [sp+68h] [bp-5Ch]@1
  int v32; // [sp+6Ch] [bp-58h]@1
  int v33; // [sp+70h] [bp-54h]@1
  int v34; // [sp+74h] [bp-50h]@1
  int v35; // [sp+78h] [bp-4Ch]@1
  int v36; // [sp+7Ch] [bp-48h]@1
  int v37; // [sp+80h] [bp-44h]@1
  int v38; // [sp+84h] [bp-40h]@1
  int v39; // [sp+88h] [bp-3Ch]@1
  int v40; // [sp+8Ch] [bp-38h]@1
  int v41; // [sp+90h] [bp-34h]@1
  int v42; // [sp+94h] [bp-30h]@1
  int v43; // [sp+98h] [bp-2Ch]@1
  int v44; // [sp+9Ch] [bp-28h]@1
  int v45; // [sp+A0h] [bp-24h]@1
  int v46; // [sp+A4h] [bp-20h]@1
  int v47; // [sp+A8h] [bp-1Ch]@1
  int v48; // [sp+ACh] [bp-18h]@1
  int v49; // [sp+B0h] [bp-14h]@1
  int v50; // [sp+B4h] [bp-10h]@1
  int v51; // [sp+B8h] [bp-Ch]@1
  int v52; // [sp+BCh] [bp-8h]@1
  int v53; // [sp+C0h] [bp-4h]@1

  v30 = 0;
  v31 = 0;
  v32 = 24;
  v33 = 24;
  v34 = 24;
  v35 = 0;
  v36 = 48;
  v37 = 24;
  v38 = 48;
  v39 = 0;
  v40 = 72;
  v41 = 24;
  v42 = 72;
  v43 = 0;
  v44 = 96;
  v45 = 24;
  v46 = 96;
  v47 = 0;
  v48 = 120;
  v49 = 24;
  v50 = 120;
  v51 = 0;
  v52 = 144;
  v53 = 24;
  v6 = 0;
  v7 = 24;
  v8 = 24;
  v9 = 48;
  v10 = 24;
  v11 = 24;
  v12 = 48;
  v13 = 48;
  v14 = 48;
  v15 = 24;
  v16 = 72;
  v17 = 48;
  v18 = 72;
  v19 = 24;
  v20 = 96;
  v21 = 48;
  v22 = 96;
  v23 = 24;
  v24 = 120;
  v25 = 48;
  v26 = 120;
  v27 = 24;
  v28 = 144;
  v29 = 48;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 12) += 1536;
      *(_DWORD *)(a1 + 116) = 1;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( *(_DWORD *)(a1 + 120) < 8
        || *(_DWORD *)(a1 + 8) - 0x10000 >= Quote_X_Position
        || *(_DWORD *)(a1 + 8) + 0x10000 <= Quote_X_Position
        || *(_DWORD *)(a1 + 12) - 0x10000 >= Quote_Y_Position
        || *(_DWORD *)(a1 + 12) + 24576 <= Quote_Y_Position )
      {
        if ( *(_DWORD *)(a1 + 120) < 8 )
          ++*(_DWORD *)(a1 + 120);
        *(_DWORD *)(a1 + 104) = 0;
      }
      else
      {
        if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
          *(_DWORD *)(a1 + 76) = 2;
        else
          *(_DWORD *)(a1 + 76) = 0;
        *(_DWORD *)(a1 + 104) = 1;
      }
      if ( *(_BYTE *)(a1 + 156) )
      {
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 104) = 0;
        *(_DWORD *)(a1 + 120) = 0;
      }
      if ( *(_DWORD *)(a1 + 120) >= 8
        && *(_DWORD *)(a1 + 8) - 49152 < Quote_X_Position
        && *(_DWORD *)(a1 + 8) + 49152 > Quote_X_Position
        && *(_DWORD *)(a1 + 12) - 49152 < Quote_Y_Position
        && *(_DWORD *)(a1 + 12) + 24576 > Quote_Y_Position )
      {
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 104) = 0;
        *(_DWORD *)(a1 + 120) = 0;
      }
      break;
    case 2:
      if ( ++*(_DWORD *)(a1 + 120) > 8 )
      {
        *(_DWORD *)(a1 + 116) = 3;
        *(_DWORD *)(a1 + 104) = 2;
        *(_DWORD *)(a1 + 20) = -1535;
        Play_Sound_Effect(108, 1);
        if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
          *(_DWORD *)(a1 + 76) = 2;
        else
          *(_DWORD *)(a1 + 76) = 0;
        if ( *(_DWORD *)(a1 + 76) )
          *(_DWORD *)(a1 + 16) = 256;
        else
          *(_DWORD *)(a1 + 16) = -256;
      }
      break;
    case 3:
      if ( *(_DWORD *)(a1 + 20) > 512 )
      {
        *(_DWORD *)(a1 + 36) = *(_DWORD *)(a1 + 12);
        *(_DWORD *)(a1 + 116) = 4;
        *(_DWORD *)(a1 + 104) = 3;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 120) = 0;
      }
      break;
    case 4:
      if ( *(_DWORD *)(a1 + 8) >= Quote_X_Position )
        *(_DWORD *)(a1 + 76) = 0;
      else
        *(_DWORD *)(a1 + 76) = 2;
      ++*(_DWORD *)(a1 + 120);
      if ( *(_DWORD *)(a1 + 4) & 7 || *(_DWORD *)(a1 + 120) > 100 )
      {
        *(_DWORD *)(a1 + 164) = 12;
        *(_DWORD *)(a1 + 116) = 5;
        *(_DWORD *)(a1 + 104) = 2;
        *(_DWORD *)(a1 + 16) /= 2;
      }
      else
      {
        if ( *(_DWORD *)(a1 + 120) % 4 == 1 )
          Play_Sound_Effect(110, 1);
        if ( ++*(_DWORD *)(a1 + 100) > 0 )
        {
          *(_DWORD *)(a1 + 100) = 0;
          ++*(_DWORD *)(a1 + 104);
        }
        if ( *(_DWORD *)(a1 + 104) > 5 )
          *(_DWORD *)(a1 + 104) = 3;
      }
      break;
    case 5:
      if ( *(_DWORD *)(a1 + 4) & 8 )
      {
        *(_DWORD *)(a1 + 164) = 2;
        *(_DWORD *)(a1 + 16) = 0;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 0;
        *(_DWORD *)(a1 + 116) = 1;
        Play_Sound_Effect(26, 1);
        sub_40F310(30);
      }
      break;
    default:
      break;
  }
  if ( *(_DWORD *)(a1 + 116) == 4 )
  {
    if ( *(_DWORD *)(a1 + 8) >= Quote_X_Position )
      *(_DWORD *)(a1 + 16) -= 32;
    else
      *(_DWORD *)(a1 + 16) += 32;
    if ( *(_DWORD *)(a1 + 12) <= *(_DWORD *)(a1 + 36) )
      *(_DWORD *)(a1 + 20) += 16;
    else
      *(_DWORD *)(a1 + 20) -= 16;
    if ( *(_DWORD *)(a1 + 20) > 512 )
      *(_DWORD *)(a1 + 20) = 512;
    if ( *(_DWORD *)(a1 + 20) < -512 )
      *(_DWORD *)(a1 + 20) = -512;
    if ( *(_DWORD *)(a1 + 16) > 512 )
      *(_DWORD *)(a1 + 16) = 512;
    if ( *(_DWORD *)(a1 + 16) < -512 )
      *(_DWORD *)(a1 + 16) = -512;
  }
  else
  {
    *(_DWORD *)(a1 + 20) += 32;
    if ( *(_DWORD *)(a1 + 20) > 1535 )
      *(_DWORD *)(a1 + 20) = 1535;
  }
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v6 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    *(_DWORD *)(v5 + 8) = v4[2];
    result = v4[3];
    *(_DWORD *)(v5 + 12) = result;
  }
  else
  {
    v1 = &v30 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    *(_DWORD *)(v2 + 8) = v1[2];
    result = v1[3];
    *(_DWORD *)(v2 + 12) = result;
  }
  return result;
}

//----- (0042B280) --------------------------------------------------------
int __cdecl NPC25(int a1)
{
  int *v1; // ecx@35
  int v2; // edx@35
  int result; // eax@35
  int v4; // [sp+8h] [bp-20h]@1
  int v5; // [sp+Ch] [bp-1Ch]@1
  int v6; // [sp+10h] [bp-18h]@1
  int v7; // [sp+14h] [bp-14h]@1
  int v8; // [sp+18h] [bp-10h]@1
  int v9; // [sp+1Ch] [bp-Ch]@1
  int v10; // [sp+20h] [bp-8h]@1
  int v11; // [sp+24h] [bp-4h]@1

  v4 = 256;
  v5 = 64;
  v6 = 288;
  v7 = 80;
  v8 = 256;
  v9 = 80;
  v10 = 288;
  v11 = 96;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 100) = 0;
      *(_DWORD *)(a1 + 8) += 4096;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( ++*(_DWORD *)(a1 + 120) > 150 )
      {
        *(_DWORD *)(a1 + 120) = 0;
        ++*(_DWORD *)(a1 + 116);
      }
      break;
    case 2:
      if ( ++*(_DWORD *)(a1 + 120) > 64 )
      {
        *(_DWORD *)(a1 + 120) = 0;
        ++*(_DWORD *)(a1 + 116);
      }
      else
      {
        *(_DWORD *)(a1 + 12) -= 512;
      }
      break;
    case 3:
      if ( ++*(_DWORD *)(a1 + 120) > 150 )
      {
        *(_DWORD *)(a1 + 120) = 0;
        ++*(_DWORD *)(a1 + 116);
      }
      break;
    case 4:
      if ( ++*(_DWORD *)(a1 + 120) > 64 )
      {
        *(_DWORD *)(a1 + 120) = 0;
        ++*(_DWORD *)(a1 + 116);
      }
      else
      {
        *(_DWORD *)(a1 + 12) -= 512;
      }
      break;
    case 5:
      if ( ++*(_DWORD *)(a1 + 120) > 150 )
      {
        *(_DWORD *)(a1 + 120) = 0;
        ++*(_DWORD *)(a1 + 116);
      }
      break;
    case 6:
      if ( ++*(_DWORD *)(a1 + 120) > 64 )
      {
        *(_DWORD *)(a1 + 120) = 0;
        ++*(_DWORD *)(a1 + 116);
      }
      else
      {
        *(_DWORD *)(a1 + 12) += 512;
      }
      break;
    case 7:
      if ( ++*(_DWORD *)(a1 + 120) > 150 )
      {
        *(_DWORD *)(a1 + 120) = 0;
        ++*(_DWORD *)(a1 + 116);
      }
      break;
    case 8:
      if ( ++*(_DWORD *)(a1 + 120) > 64 )
      {
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 116) = 1;
      }
      else
      {
        *(_DWORD *)(a1 + 12) += 512;
      }
      break;
    default:
      break;
  }
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 2:
    case 4:
    case 6:
    case 8:
      if ( ++*(_DWORD *)(a1 + 100) > 1 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 1 )
        *(_DWORD *)(a1 + 104) = 0;
      break;
    default:
      break;
  }
  v1 = &v4 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  result = v1[2];
  *(_DWORD *)(v2 + 8) = result;
  *(_DWORD *)(v2 + 12) = v1[3];
  return result;
}

//----- (0042B5E0) --------------------------------------------------------
int __cdecl NPC26(int a1)
{
  int *v1; // edx@44
  int result; // eax@44
  int *v3; // edx@45
  int v4; // [sp+0h] [bp-8Ch]@1
  int v5; // [sp+4h] [bp-88h]@37
  int v6; // [sp+8h] [bp-84h]@37
  int v7; // [sp+Ch] [bp-80h]@37
  int v8; // [sp+10h] [bp-7Ch]@37
  int v9; // [sp+14h] [bp-78h]@37
  int v10; // [sp+18h] [bp-74h]@37
  int v11; // [sp+1Ch] [bp-70h]@37
  int v12; // [sp+20h] [bp-6Ch]@37
  int v13; // [sp+24h] [bp-68h]@37
  int v14; // [sp+28h] [bp-64h]@37
  int v15; // [sp+2Ch] [bp-60h]@37
  int v16; // [sp+30h] [bp-5Ch]@37
  int v17; // [sp+34h] [bp-58h]@37
  int v18; // [sp+38h] [bp-54h]@37
  int v19; // [sp+3Ch] [bp-50h]@37
  int v20; // [sp+40h] [bp-4Ch]@37
  int v21; // [sp+44h] [bp-48h]@37
  int v22; // [sp+48h] [bp-44h]@37
  int v23; // [sp+4Ch] [bp-40h]@37
  int v24; // [sp+50h] [bp-3Ch]@37
  int v25; // [sp+54h] [bp-38h]@37
  int v26; // [sp+58h] [bp-34h]@37
  int v27; // [sp+5Ch] [bp-30h]@37
  int v28; // [sp+60h] [bp-2Ch]@37
  int v29; // [sp+64h] [bp-28h]@37
  int v30; // [sp+68h] [bp-24h]@37
  int v31; // [sp+6Ch] [bp-20h]@37
  int v32; // [sp+70h] [bp-1Ch]@37
  int v33; // [sp+74h] [bp-18h]@37
  int v34; // [sp+78h] [bp-14h]@37
  int v35; // [sp+7Ch] [bp-10h]@37
  int v36; // [sp+80h] [bp-Ch]@37
  char v37; // [sp+8Bh] [bp-1h]@5

  v4 = *(_DWORD *)(a1 + 116);
  if ( v4 )
  {
    if ( v4 != 1 )
    {
      if ( v4 == 3 )
      {
        *(_DWORD *)(a1 + 20) += 64;
        if ( *(_DWORD *)(a1 + 20) > 1535 )
          *(_DWORD *)(a1 + 20) = 1535;
        if ( *(_DWORD *)(a1 + 4) & 8 )
        {
          *(_DWORD *)(a1 + 20) = 0;
          *(_DWORD *)(a1 + 16) *= 2;
          *(_DWORD *)(a1 + 108) = 0;
          *(_DWORD *)(a1 + 116) = 1;
          *(_WORD *)(a1 + 80) |= 8u;
        }
      }
      goto LABEL_37;
    }
  }
  else
  {
    v37 = RNG_Range(0, 255);
    *(_DWORD *)(a1 + 16) = COS_function(v37);
    *(_DWORD *)(a1 + 32) = *(_DWORD *)(a1 + 8) + 8 * COS_function(v37 + 64);
    v37 = RNG_Range(0, 255);
    *(_DWORD *)(a1 + 20) = SIN_function(v37);
    v37 += 64;
    *(_DWORD *)(a1 + 36) = *(_DWORD *)(a1 + 12) + 8 * SIN_function(v37);
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 108) = 120;
  }
  if ( Quote_X_Position >= *(_DWORD *)(a1 + 8) )
    *(_DWORD *)(a1 + 76) = 2;
  else
    *(_DWORD *)(a1 + 76) = 0;
  if ( *(_DWORD *)(a1 + 32) < *(_DWORD *)(a1 + 8) )
    *(_DWORD *)(a1 + 16) -= 16;
  if ( *(_DWORD *)(a1 + 32) > *(_DWORD *)(a1 + 8) )
    *(_DWORD *)(a1 + 16) += 16;
  if ( *(_DWORD *)(a1 + 36) < *(_DWORD *)(a1 + 12) )
    *(_DWORD *)(a1 + 20) -= 16;
  if ( *(_DWORD *)(a1 + 36) > *(_DWORD *)(a1 + 12) )
    *(_DWORD *)(a1 + 20) += 16;
  if ( *(_DWORD *)(a1 + 16) > 512 )
    *(_DWORD *)(a1 + 16) = 512;
  if ( *(_DWORD *)(a1 + 16) < -512 )
    *(_DWORD *)(a1 + 16) = -512;
  if ( *(_DWORD *)(a1 + 20) > 512 )
    *(_DWORD *)(a1 + 20) = 512;
  if ( *(_DWORD *)(a1 + 20) < -512 )
    *(_DWORD *)(a1 + 20) = -512;
  if ( *(_DWORD *)(a1 + 108) >= 120 )
  {
    if ( *(_DWORD *)(a1 + 8) - 4096 < Quote_X_Position
      && *(_DWORD *)(a1 + 8) + 4096 > Quote_X_Position
      && *(_DWORD *)(a1 + 12) < Quote_Y_Position
      && *(_DWORD *)(a1 + 12) + 49152 > Quote_Y_Position )
    {
      *(_DWORD *)(a1 + 16) /= 2;
      *(_DWORD *)(a1 + 20) = 0;
      *(_DWORD *)(a1 + 116) = 3;
      *(_WORD *)(a1 + 80) &= 0xFFF7u;
    }
  }
  else
  {
    ++*(_DWORD *)(a1 + 108);
  }
LABEL_37:
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  v21 = 32;
  v22 = 80;
  v23 = 48;
  v24 = 96;
  v25 = 48;
  v26 = 80;
  v27 = 64;
  v28 = 96;
  v29 = 64;
  v30 = 80;
  v31 = 80;
  v32 = 96;
  v33 = 80;
  v34 = 80;
  v35 = 96;
  v36 = 96;
  v5 = 32;
  v6 = 96;
  v7 = 48;
  v8 = 112;
  v9 = 48;
  v10 = 96;
  v11 = 64;
  v12 = 112;
  v13 = 64;
  v14 = 96;
  v15 = 80;
  v16 = 112;
  v17 = 80;
  v18 = 96;
  v19 = 96;
  v20 = 112;
  if ( *(_DWORD *)(a1 + 116) == 3 )
  {
    *(_DWORD *)(a1 + 104) = 3;
  }
  else
  {
    if ( ++*(_DWORD *)(a1 + 100) > 1 )
    {
      *(_DWORD *)(a1 + 100) = 0;
      ++*(_DWORD *)(a1 + 104);
    }
    if ( *(_DWORD *)(a1 + 104) > 2 )
      *(_DWORD *)(a1 + 104) = 0;
  }
  if ( *(_DWORD *)(a1 + 76) )
  {
    v3 = &v5 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v3;
    *(_DWORD *)(result + 4) = v3[1];
    *(_DWORD *)(result + 8) = v3[2];
    *(_DWORD *)(result + 12) = v3[3];
  }
  else
  {
    v1 = &v21 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v1;
    *(_DWORD *)(result + 4) = v1[1];
    *(_DWORD *)(result + 8) = v1[2];
    *(_DWORD *)(result + 12) = v1[3];
  }
  return result;
}

//----- (0042BA90) --------------------------------------------------------
int __cdecl NPC27(int a1)
{
  int *v1; // edx@1
  int result; // eax@1
  int v3; // [sp+0h] [bp-10h]@1
  int v4; // [sp+4h] [bp-Ch]@1
  int v5; // [sp+8h] [bp-8h]@1
  int v6; // [sp+Ch] [bp-4h]@1

  v3 = 96;
  v4 = 64;
  v5 = 128;
  v6 = 88;
  v1 = &v3 + 4 * *(_DWORD *)(a1 + 104);
  result = a1 + 84;
  *(_DWORD *)result = *v1;
  *(_DWORD *)(result + 4) = v1[1];
  *(_DWORD *)(result + 8) = v1[2];
  *(_DWORD *)(result + 12) = v1[3];
  return result;
}

//----- (0042BAE0) --------------------------------------------------------
int __cdecl NPC28(int a1)
{
  int *v1; // eax@71
  int v2; // ecx@71
  int result; // eax@71
  int *v4; // eax@72
  int v5; // ecx@72
  int v6; // [sp+4h] [bp-C0h]@1
  int v7; // [sp+8h] [bp-BCh]@1
  int v8; // [sp+Ch] [bp-B8h]@1
  int v9; // [sp+10h] [bp-B4h]@1
  int v10; // [sp+14h] [bp-B0h]@1
  int v11; // [sp+18h] [bp-ACh]@1
  int v12; // [sp+1Ch] [bp-A8h]@1
  int v13; // [sp+20h] [bp-A4h]@1
  int v14; // [sp+24h] [bp-A0h]@1
  int v15; // [sp+28h] [bp-9Ch]@1
  int v16; // [sp+2Ch] [bp-98h]@1
  int v17; // [sp+30h] [bp-94h]@1
  int v18; // [sp+34h] [bp-90h]@1
  int v19; // [sp+38h] [bp-8Ch]@1
  int v20; // [sp+3Ch] [bp-88h]@1
  int v21; // [sp+40h] [bp-84h]@1
  int v22; // [sp+44h] [bp-80h]@1
  int v23; // [sp+48h] [bp-7Ch]@1
  int v24; // [sp+4Ch] [bp-78h]@1
  int v25; // [sp+50h] [bp-74h]@1
  int v26; // [sp+54h] [bp-70h]@1
  int v27; // [sp+58h] [bp-6Ch]@1
  int v28; // [sp+5Ch] [bp-68h]@1
  int v29; // [sp+60h] [bp-64h]@1
  int v30; // [sp+64h] [bp-60h]@1
  int v31; // [sp+68h] [bp-5Ch]@1
  int v32; // [sp+6Ch] [bp-58h]@1
  int v33; // [sp+70h] [bp-54h]@1
  int v34; // [sp+74h] [bp-50h]@1
  int v35; // [sp+78h] [bp-4Ch]@1
  int v36; // [sp+7Ch] [bp-48h]@1
  int v37; // [sp+80h] [bp-44h]@1
  int v38; // [sp+84h] [bp-40h]@1
  int v39; // [sp+88h] [bp-3Ch]@1
  int v40; // [sp+8Ch] [bp-38h]@1
  int v41; // [sp+90h] [bp-34h]@1
  int v42; // [sp+94h] [bp-30h]@1
  int v43; // [sp+98h] [bp-2Ch]@1
  int v44; // [sp+9Ch] [bp-28h]@1
  int v45; // [sp+A0h] [bp-24h]@1
  int v46; // [sp+A4h] [bp-20h]@1
  int v47; // [sp+A8h] [bp-1Ch]@1
  int v48; // [sp+ACh] [bp-18h]@1
  int v49; // [sp+B0h] [bp-14h]@1
  int v50; // [sp+B4h] [bp-10h]@1
  int v51; // [sp+B8h] [bp-Ch]@1
  int v52; // [sp+BCh] [bp-8h]@1
  int v53; // [sp+C0h] [bp-4h]@1

  v30 = 0;
  v31 = 48;
  v32 = 16;
  v33 = 64;
  v34 = 16;
  v35 = 48;
  v36 = 32;
  v37 = 64;
  v38 = 32;
  v39 = 48;
  v40 = 48;
  v41 = 64;
  v42 = 48;
  v43 = 48;
  v44 = 64;
  v45 = 64;
  v46 = 64;
  v47 = 48;
  v48 = 80;
  v49 = 64;
  v50 = 80;
  v51 = 48;
  v52 = 96;
  v53 = 64;
  v6 = 0;
  v7 = 64;
  v8 = 16;
  v9 = 80;
  v10 = 16;
  v11 = 64;
  v12 = 32;
  v13 = 80;
  v14 = 32;
  v15 = 64;
  v16 = 48;
  v17 = 80;
  v18 = 48;
  v19 = 64;
  v20 = 64;
  v21 = 80;
  v22 = 64;
  v23 = 64;
  v24 = 80;
  v25 = 80;
  v26 = 80;
  v27 = 64;
  v28 = 96;
  v29 = 80;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 12) += 1536;
      *(_DWORD *)(a1 + 116) = 1;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( *(_DWORD *)(a1 + 120) < 8
        || *(_DWORD *)(a1 + 8) - 0x10000 >= Quote_X_Position
        || *(_DWORD *)(a1 + 8) + 0x10000 <= Quote_X_Position
        || *(_DWORD *)(a1 + 12) - 0x10000 >= Quote_Y_Position
        || *(_DWORD *)(a1 + 12) + 24576 <= Quote_Y_Position )
      {
        if ( *(_DWORD *)(a1 + 120) < 8 )
          ++*(_DWORD *)(a1 + 120);
        *(_DWORD *)(a1 + 104) = 0;
      }
      else
      {
        if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
          *(_DWORD *)(a1 + 76) = 2;
        else
          *(_DWORD *)(a1 + 76) = 0;
        *(_DWORD *)(a1 + 104) = 1;
      }
      if ( *(_BYTE *)(a1 + 156) )
      {
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 104) = 0;
        *(_DWORD *)(a1 + 120) = 0;
      }
      if ( *(_DWORD *)(a1 + 120) >= 8
        && *(_DWORD *)(a1 + 8) - 49152 < Quote_X_Position
        && *(_DWORD *)(a1 + 8) + 49152 > Quote_X_Position
        && *(_DWORD *)(a1 + 12) - 49152 < Quote_Y_Position
        && *(_DWORD *)(a1 + 12) + 24576 > Quote_Y_Position )
      {
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 104) = 0;
        *(_DWORD *)(a1 + 120) = 0;
      }
      break;
    case 2:
      if ( ++*(_DWORD *)(a1 + 120) > 8 )
      {
        *(_DWORD *)(a1 + 116) = 3;
        *(_DWORD *)(a1 + 104) = 2;
        *(_DWORD *)(a1 + 20) = -1228;
        Play_Sound_Effect(30, 1);
        if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
          *(_DWORD *)(a1 + 76) = 2;
        else
          *(_DWORD *)(a1 + 76) = 0;
        if ( *(_DWORD *)(a1 + 76) )
          *(_DWORD *)(a1 + 16) = 256;
        else
          *(_DWORD *)(a1 + 16) = -256;
      }
      break;
    case 3:
      if ( *(_DWORD *)(a1 + 20) > 256 )
      {
        *(_DWORD *)(a1 + 36) = *(_DWORD *)(a1 + 12);
        *(_DWORD *)(a1 + 116) = 4;
        *(_DWORD *)(a1 + 104) = 3;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 120) = 0;
      }
      break;
    case 4:
      if ( *(_DWORD *)(a1 + 8) >= Quote_X_Position )
        *(_DWORD *)(a1 + 76) = 0;
      else
        *(_DWORD *)(a1 + 76) = 2;
      ++*(_DWORD *)(a1 + 120);
      if ( *(_DWORD *)(a1 + 4) & 7 || *(_DWORD *)(a1 + 120) > 100 )
      {
        *(_DWORD *)(a1 + 164) = 3;
        *(_DWORD *)(a1 + 116) = 5;
        *(_DWORD *)(a1 + 104) = 2;
        *(_DWORD *)(a1 + 16) /= 2;
      }
      else
      {
        if ( *(_DWORD *)(a1 + 120) % 4 == 1 )
          Play_Sound_Effect(109, 1);
        if ( *(_DWORD *)(a1 + 4) & 8 )
          *(_DWORD *)(a1 + 20) = -512;
        if ( ++*(_DWORD *)(a1 + 100) > 0 )
        {
          *(_DWORD *)(a1 + 100) = 0;
          ++*(_DWORD *)(a1 + 104);
        }
        if ( *(_DWORD *)(a1 + 104) > 5 )
          *(_DWORD *)(a1 + 104) = 3;
      }
      break;
    case 5:
      if ( *(_DWORD *)(a1 + 4) & 8 )
      {
        *(_DWORD *)(a1 + 164) = 2;
        *(_DWORD *)(a1 + 16) = 0;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 0;
        *(_DWORD *)(a1 + 116) = 1;
        Play_Sound_Effect(23, 1);
      }
      break;
    default:
      break;
  }
  if ( *(_DWORD *)(a1 + 116) == 4 )
  {
    if ( *(_DWORD *)(a1 + 8) >= Quote_X_Position )
      *(_DWORD *)(a1 + 16) -= 32;
    else
      *(_DWORD *)(a1 + 16) += 32;
    if ( *(_DWORD *)(a1 + 12) <= *(_DWORD *)(a1 + 36) )
      *(_DWORD *)(a1 + 20) += 16;
    else
      *(_DWORD *)(a1 + 20) -= 16;
    if ( *(_DWORD *)(a1 + 20) > 512 )
      *(_DWORD *)(a1 + 20) = 512;
    if ( *(_DWORD *)(a1 + 20) < -512 )
      *(_DWORD *)(a1 + 20) = -512;
    if ( *(_DWORD *)(a1 + 16) > 512 )
      *(_DWORD *)(a1 + 16) = 512;
    if ( *(_DWORD *)(a1 + 16) < -512 )
      *(_DWORD *)(a1 + 16) = -512;
  }
  else
  {
    *(_DWORD *)(a1 + 20) += 64;
    if ( *(_DWORD *)(a1 + 20) > 1535 )
      *(_DWORD *)(a1 + 20) = 1535;
  }
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v6 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    *(_DWORD *)(v5 + 8) = v4[2];
    result = v4[3];
    *(_DWORD *)(v5 + 12) = result;
  }
  else
  {
    v1 = &v30 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    *(_DWORD *)(v2 + 8) = v1[2];
    result = v1[3];
    *(_DWORD *)(v2 + 12) = result;
  }
  return result;
}

//----- (0042C1A0) --------------------------------------------------------
int __cdecl NPC29(int a1)
{
  int *v1; // eax@12
  int v2; // ecx@12
  int result; // eax@12
  int *v4; // eax@13
  int v5; // ecx@13
  int v6; // [sp+0h] [bp-44h]@1
  int v7; // [sp+4h] [bp-40h]@1
  int v8; // [sp+8h] [bp-3Ch]@1
  int v9; // [sp+Ch] [bp-38h]@1
  int v10; // [sp+10h] [bp-34h]@1
  int v11; // [sp+14h] [bp-30h]@1
  int v12; // [sp+18h] [bp-2Ch]@1
  int v13; // [sp+1Ch] [bp-28h]@1
  int v14; // [sp+20h] [bp-24h]@1
  int v15; // [sp+24h] [bp-20h]@1
  int v16; // [sp+28h] [bp-1Ch]@1
  int v17; // [sp+2Ch] [bp-18h]@1
  int v18; // [sp+30h] [bp-14h]@1
  int v19; // [sp+34h] [bp-10h]@1
  int v20; // [sp+38h] [bp-Ch]@1
  int v21; // [sp+3Ch] [bp-8h]@1
  int v22; // [sp+40h] [bp-4h]@1

  v15 = 0;
  v16 = 192;
  v17 = 16;
  v18 = 216;
  v19 = 16;
  v20 = 192;
  v21 = 32;
  v22 = 216;
  v7 = 0;
  v8 = 216;
  v9 = 16;
  v10 = 240;
  v11 = 16;
  v12 = 216;
  v13 = 32;
  v14 = 240;
  v6 = *(_DWORD *)(a1 + 116);
  if ( v6 )
  {
    if ( v6 != 1 )
      goto LABEL_11;
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 104) = 0;
    *(_DWORD *)(a1 + 100) = 0;
  }
  *(_DWORD *)(a1 + 104) = *(_DWORD *)(a1 + 8) - 24576 < Quote_X_Position
                       && *(_DWORD *)(a1 + 8) + 24576 > Quote_X_Position
                       && *(_DWORD *)(a1 + 12) - 24576 < Quote_Y_Position
                       && *(_DWORD *)(a1 + 12) + 0x2000 > Quote_Y_Position;
LABEL_11:
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v7 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    *(_DWORD *)(v5 + 8) = v4[2];
    result = v4[3];
    *(_DWORD *)(v5 + 12) = result;
  }
  else
  {
    v1 = &v15 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    *(_DWORD *)(v2 + 8) = v1[2];
    result = v1[3];
    *(_DWORD *)(v2 + 12) = result;
  }
  return result;
}

//----- (0042C320) --------------------------------------------------------
int __cdecl NPC30(int a1)
{
  int *v1; // edx@17
  int result; // eax@17
  int v3; // [sp+0h] [bp-34h]@2
  int v4; // [sp+4h] [bp-30h]@1
  int v5; // [sp+8h] [bp-2Ch]@1
  int v6; // [sp+Ch] [bp-28h]@1
  int v7; // [sp+10h] [bp-24h]@1
  int v8; // [sp+14h] [bp-20h]@1
  int v9; // [sp+18h] [bp-1Ch]@1
  int v10; // [sp+1Ch] [bp-18h]@1
  int v11; // [sp+20h] [bp-14h]@1
  int v12; // [sp+24h] [bp-10h]@1
  int v13; // [sp+28h] [bp-Ch]@1
  int v14; // [sp+2Ch] [bp-8h]@1
  int v15; // [sp+30h] [bp-4h]@1

  v4 = 48;
  v5 = 0;
  v6 = 64;
  v7 = 16;
  v8 = 48;
  v9 = 16;
  v10 = 64;
  v11 = 32;
  v12 = 0;
  v13 = 32;
  v14 = 16;
  v15 = 48;
  if ( *(_DWORD *)(a1 + 76) )
  {
    if ( !*(_DWORD *)(a1 + 116) )
    {
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 12) += 0x2000;
      *(_DWORD *)(a1 + 104) = 2;
    }
    if ( ++*(_DWORD *)(a1 + 120) > 100 )
    {
      *(_DWORD *)(a1 + 120) = 0;
      Create_Animated_Effect(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12) - 1024, 5, 0);
    }
  }
  else
  {
    v3 = *(_DWORD *)(a1 + 116);
    if ( v3 )
    {
      if ( v3 != 1 )
      {
        if ( v3 == 2 && ++*(_DWORD *)(a1 + 120) > 8 )
        {
          *(_DWORD *)(a1 + 116) = 1;
          *(_DWORD *)(a1 + 104) = 0;
        }
        goto LABEL_17;
      }
    }
    else
    {
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 100) = 0;
    }
    if ( RNG_Range(0, 120) == 10 )
    {
      *(_DWORD *)(a1 + 116) = 2;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 104) = 1;
    }
  }
LABEL_17:
  v1 = &v4 + 4 * *(_DWORD *)(a1 + 104);
  result = a1 + 84;
  *(_DWORD *)result = *v1;
  *(_DWORD *)(result + 4) = v1[1];
  *(_DWORD *)(result + 8) = v1[2];
  *(_DWORD *)(result + 12) = v1[3];
  return result;
}

//----- (0042C4C0) --------------------------------------------------------
int __cdecl NPC31(int a1)
{
  int *v1; // edx@56
  int result; // eax@56
  int *v3; // edx@57
  int v4; // [sp+4h] [bp-A0h]@1
  int v5; // [sp+8h] [bp-9Ch]@1
  int v6; // [sp+Ch] [bp-98h]@1
  int v7; // [sp+10h] [bp-94h]@1
  int v8; // [sp+14h] [bp-90h]@1
  int v9; // [sp+18h] [bp-8Ch]@1
  int v10; // [sp+1Ch] [bp-88h]@1
  int v11; // [sp+20h] [bp-84h]@1
  int v12; // [sp+24h] [bp-80h]@1
  int v13; // [sp+28h] [bp-7Ch]@1
  int v14; // [sp+2Ch] [bp-78h]@1
  int v15; // [sp+30h] [bp-74h]@1
  int v16; // [sp+34h] [bp-70h]@1
  int v17; // [sp+38h] [bp-6Ch]@1
  int v18; // [sp+3Ch] [bp-68h]@1
  int v19; // [sp+40h] [bp-64h]@1
  int v20; // [sp+44h] [bp-60h]@1
  int v21; // [sp+48h] [bp-5Ch]@1
  int v22; // [sp+4Ch] [bp-58h]@1
  int v23; // [sp+50h] [bp-54h]@1
  int v24; // [sp+54h] [bp-50h]@1
  int v25; // [sp+58h] [bp-4Ch]@1
  int v26; // [sp+5Ch] [bp-48h]@1
  int v27; // [sp+60h] [bp-44h]@1
  int v28; // [sp+64h] [bp-40h]@1
  int v29; // [sp+68h] [bp-3Ch]@1
  int v30; // [sp+6Ch] [bp-38h]@1
  int v31; // [sp+70h] [bp-34h]@1
  int v32; // [sp+74h] [bp-30h]@1
  int v33; // [sp+78h] [bp-2Ch]@1
  int v34; // [sp+7Ch] [bp-28h]@1
  int v35; // [sp+80h] [bp-24h]@1
  int v36; // [sp+84h] [bp-20h]@1
  int v37; // [sp+88h] [bp-1Ch]@1
  int v38; // [sp+8Ch] [bp-18h]@1
  int v39; // [sp+90h] [bp-14h]@1
  int v40; // [sp+94h] [bp-10h]@1
  int v41; // [sp+98h] [bp-Ch]@1
  int v42; // [sp+9Ch] [bp-8h]@1
  int v43; // [sp+A0h] [bp-4h]@1

  v24 = 0;
  v25 = 80;
  v26 = 16;
  v27 = 96;
  v28 = 16;
  v29 = 80;
  v30 = 32;
  v31 = 96;
  v32 = 32;
  v33 = 80;
  v34 = 48;
  v35 = 96;
  v36 = 48;
  v37 = 80;
  v38 = 64;
  v39 = 96;
  v40 = 64;
  v41 = 80;
  v42 = 80;
  v43 = 96;
  v4 = 0;
  v5 = 96;
  v6 = 16;
  v7 = 112;
  v8 = 16;
  v9 = 96;
  v10 = 32;
  v11 = 112;
  v12 = 32;
  v13 = 96;
  v14 = 48;
  v15 = 112;
  v16 = 48;
  v17 = 96;
  v18 = 64;
  v19 = 112;
  v20 = 64;
  v21 = 96;
  v22 = 80;
  v23 = 112;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( RNG_Range(0, 120) == 10 )
      {
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 1;
      }
      if ( *(_DWORD *)(a1 + 8) - 4096 < Quote_X_Position
        && *(_DWORD *)(a1 + 8) + 4096 > Quote_X_Position
        && *(_DWORD *)(a1 + 12) - 4096 < Quote_Y_Position
        && *(_DWORD *)(a1 + 12) + 49152 > Quote_Y_Position )
      {
        *(_DWORD *)(a1 + 104) = 0;
        *(_DWORD *)(a1 + 116) = 3;
      }
      break;
    case 2:
      if ( ++*(_DWORD *)(a1 + 120) > 8 )
      {
        *(_DWORD *)(a1 + 116) = 1;
        *(_DWORD *)(a1 + 104) = 0;
      }
      break;
    case 3:
      *(_DWORD *)(a1 + 104) = 0;
      if ( *(_BYTE *)(a1 + 156)
        || *(_DWORD *)(a1 + 8) - 10240 > Quote_X_Position
        || *(_DWORD *)(a1 + 8) + 10240 < Quote_X_Position )
      {
        *(_DWORD *)(a1 + 104) = 1;
        *(_DWORD *)(a1 + 100) = 0;
        *(_DWORD *)(a1 + 116) = 4;
        *(_DWORD *)(a1 + 120) = 0;
      }
      break;
    case 4:
      *(_DWORD *)(a1 + 20) += 32;
      if ( *(_DWORD *)(a1 + 20) > 1535 )
        *(_DWORD *)(a1 + 20) = 1535;
      if ( (++*(_DWORD *)(a1 + 120) >= 20 || *(_DWORD *)(a1 + 4) & 8)
        && (*(_DWORD *)(a1 + 4) & 8 || *(_DWORD *)(a1 + 12) > Quote_Y_Position - 0x2000) )
      {
        *(_DWORD *)(a1 + 100) = 0;
        *(_DWORD *)(a1 + 104) = 2;
        *(_DWORD *)(a1 + 116) = 5;
        *(_DWORD *)(a1 + 36) = *(_DWORD *)(a1 + 12);
        if ( *(_DWORD *)(a1 + 4) & 8 )
          *(_DWORD *)(a1 + 20) = -512;
      }
      break;
    case 5:
      if ( ++*(_DWORD *)(a1 + 100) > 1 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 4 )
        *(_DWORD *)(a1 + 104) = 2;
      if ( Quote_X_Position >= *(_DWORD *)(a1 + 8) )
        *(_DWORD *)(a1 + 76) = 2;
      else
        *(_DWORD *)(a1 + 76) = 0;
      if ( Quote_X_Position < *(_DWORD *)(a1 + 8) )
        *(_DWORD *)(a1 + 16) -= 16;
      if ( Quote_X_Position > *(_DWORD *)(a1 + 8) )
        *(_DWORD *)(a1 + 16) += 16;
      if ( *(_DWORD *)(a1 + 36) < *(_DWORD *)(a1 + 12) )
        *(_DWORD *)(a1 + 20) -= 16;
      if ( *(_DWORD *)(a1 + 36) > *(_DWORD *)(a1 + 12) )
        *(_DWORD *)(a1 + 20) += 16;
      if ( *(_DWORD *)(a1 + 16) > 512 )
        *(_DWORD *)(a1 + 16) = 512;
      if ( *(_DWORD *)(a1 + 16) < -512 )
        *(_DWORD *)(a1 + 16) = -512;
      if ( *(_DWORD *)(a1 + 20) > 512 )
        *(_DWORD *)(a1 + 20) = 512;
      if ( *(_DWORD *)(a1 + 20) < -512 )
        *(_DWORD *)(a1 + 20) = -512;
      if ( *(_DWORD *)(a1 + 4) & 8 )
        *(_DWORD *)(a1 + 20) = -512;
      if ( *(_DWORD *)(a1 + 4) & 2 )
        *(_DWORD *)(a1 + 20) = 512;
      break;
    default:
      break;
  }
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 76) )
  {
    v3 = &v4 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v3;
    *(_DWORD *)(result + 4) = v3[1];
    *(_DWORD *)(result + 8) = v3[2];
    *(_DWORD *)(result + 12) = v3[3];
  }
  else
  {
    v1 = &v24 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v1;
    *(_DWORD *)(result + 4) = v1[1];
    *(_DWORD *)(result + 8) = v1[2];
    *(_DWORD *)(result + 12) = v1[3];
  }
  return result;
}

//----- (0042CA10) --------------------------------------------------------
int __cdecl NPC32(int a1)
{
  int *v1; // eax@5
  int v2; // ecx@5
  int result; // eax@5
  int v4; // [sp+0h] [bp-20h]@1
  int v5; // [sp+4h] [bp-1Ch]@1
  int v6; // [sp+8h] [bp-18h]@1
  int v7; // [sp+Ch] [bp-14h]@1
  int v8; // [sp+10h] [bp-10h]@1
  int v9; // [sp+14h] [bp-Ch]@1
  int v10; // [sp+18h] [bp-8h]@1
  int v11; // [sp+1Ch] [bp-4h]@1

  v4 = 32;
  v5 = 96;
  v6 = 48;
  v7 = 112;
  v8 = 48;
  v9 = 96;
  v10 = 64;
  v11 = 112;
  if ( ++*(_DWORD *)(a1 + 100) > 2 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    ++*(_DWORD *)(a1 + 104);
  }
  if ( *(_DWORD *)(a1 + 104) > 1 )
    *(_DWORD *)(a1 + 104) = 0;
  v1 = &v4 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  *(_DWORD *)(v2 + 8) = v1[2];
  result = v1[3];
  *(_DWORD *)(v2 + 12) = result;
  return result;
}

//----- (0042CAC0) --------------------------------------------------------
int __cdecl NPC33(int a1)
{
  int *v1; // eax@8
  int v2; // ecx@8
  int result; // eax@8
  int v4; // [sp+0h] [bp-20h]@5
  int v5; // [sp+4h] [bp-1Ch]@5
  int v6; // [sp+8h] [bp-18h]@5
  int v7; // [sp+Ch] [bp-14h]@5
  int v8; // [sp+10h] [bp-10h]@5
  int v9; // [sp+14h] [bp-Ch]@5
  int v10; // [sp+18h] [bp-8h]@5
  int v11; // [sp+1Ch] [bp-4h]@5

  if ( *(_DWORD *)(a1 + 4) & 5 )
  {
    Create_Animated_Effect(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 2, 0);
    *(_BYTE *)a1 = 0;
  }
  else if ( *(_DWORD *)(a1 + 4) & 8 )
  {
    *(_DWORD *)(a1 + 20) = -1024;
  }
  *(_DWORD *)(a1 + 20) += 42;
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  v4 = 240;
  v5 = 64;
  v6 = 256;
  v7 = 80;
  v8 = 240;
  v9 = 80;
  v10 = 256;
  v11 = 96;
  if ( ++*(_DWORD *)(a1 + 100) > 2 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    if ( ++*(_DWORD *)(a1 + 104) > 1 )
      *(_DWORD *)(a1 + 104) = 0;
  }
  v1 = &v4 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  *(_DWORD *)(v2 + 8) = v1[2];
  *(_DWORD *)(v2 + 12) = v1[3];
  result = a1;
  if ( ++*(_DWORD *)(a1 + 120) > 250 )
  {
    Create_Animated_Effect(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 2, 0);
    result = a1;
    *(_BYTE *)a1 = 0;
  }
  return result;
}

//----- (0042CC20) --------------------------------------------------------
signed int __cdecl NPC34(int a1)
{
  int v1; // ecx@2
  signed int result; // eax@2
  int v3; // ecx@3

  if ( *(_DWORD *)(a1 + 76) )
  {
    v3 = a1 + 84;
    *(_DWORD *)v3 = 192;
    *(_DWORD *)(v3 + 4) = 184;
    *(_DWORD *)(v3 + 8) = 224;
    result = 200;
    *(_DWORD *)(v3 + 12) = 200;
  }
  else
  {
    v1 = a1 + 84;
    *(_DWORD *)v1 = 192;
    *(_DWORD *)(v1 + 4) = 48;
    *(_DWORD *)(v1 + 8) = 224;
    result = 64;
    *(_DWORD *)(v1 + 12) = 64;
  }
  return result;
}

//----- (0042CCB0) --------------------------------------------------------
int __cdecl NPC35(int a1)
{
  int *v1; // eax@23
  int v2; // ecx@23
  int result; // eax@23
  int *v4; // eax@24
  int v5; // ecx@24
  int v6; // [sp+4h] [bp-80h]@22
  int v7; // [sp+8h] [bp-7Ch]@22
  int v8; // [sp+Ch] [bp-78h]@22
  int v9; // [sp+10h] [bp-74h]@22
  int v10; // [sp+14h] [bp-70h]@22
  int v11; // [sp+18h] [bp-6Ch]@22
  int v12; // [sp+1Ch] [bp-68h]@22
  int v13; // [sp+20h] [bp-64h]@22
  int v14; // [sp+24h] [bp-60h]@22
  int v15; // [sp+28h] [bp-5Ch]@22
  int v16; // [sp+2Ch] [bp-58h]@22
  int v17; // [sp+30h] [bp-54h]@22
  int v18; // [sp+34h] [bp-50h]@22
  int v19; // [sp+38h] [bp-4Ch]@22
  int v20; // [sp+3Ch] [bp-48h]@22
  int v21; // [sp+40h] [bp-44h]@22
  int v22; // [sp+44h] [bp-40h]@22
  int v23; // [sp+48h] [bp-3Ch]@22
  int v24; // [sp+4Ch] [bp-38h]@22
  int v25; // [sp+50h] [bp-34h]@22
  int v26; // [sp+54h] [bp-30h]@22
  int v27; // [sp+58h] [bp-2Ch]@22
  int v28; // [sp+5Ch] [bp-28h]@22
  int v29; // [sp+60h] [bp-24h]@22
  int v30; // [sp+64h] [bp-20h]@22
  int v31; // [sp+68h] [bp-1Ch]@22
  int v32; // [sp+6Ch] [bp-18h]@22
  int v33; // [sp+70h] [bp-14h]@22
  int v34; // [sp+74h] [bp-10h]@22
  int v35; // [sp+78h] [bp-Ch]@22
  int v36; // [sp+7Ch] [bp-8h]@22
  int v37; // [sp+80h] [bp-4h]@22

  if ( *(_DWORD *)(a1 + 116) < 3 && *(_DWORD *)(a1 + 64) < 90 )
  {
    Play_Sound_Effect(71, 1);
    sub_46F150(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), *(_DWORD *)(a1 + 148), 8);
    Spawn_Exp(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), *(_DWORD *)(a1 + 68));
    *(_DWORD *)(a1 + 116) = 3;
    *(_DWORD *)(a1 + 120) = 0;
    *(_DWORD *)(a1 + 104) = 2;
    *(_WORD *)(a1 + 80) &= 0xFFDFu;
    *(_DWORD *)(a1 + 164) = 0;
  }
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
    case 1:
      if ( *(_BYTE *)(a1 + 156) )
      {
        if ( *(_DWORD *)(a1 + 76) )
          NPC_Create(103, *(_DWORD *)(a1 + 8) + 4096, *(_DWORD *)(a1 + 12) + 4096, 0, 0, *(_DWORD *)(a1 + 76), 0, 256);
        else
          NPC_Create(103, *(_DWORD *)(a1 + 8) - 4096, *(_DWORD *)(a1 + 12) + 4096, 0, 0, *(_DWORD *)(a1 + 76), 0, 256);
        *(_DWORD *)(a1 + 104) = 1;
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 120) = 0;
      }
      break;
    case 2:
      if ( ++*(_DWORD *)(a1 + 120) > 20 )
      {
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 116) = 1;
        *(_DWORD *)(a1 + 104) = 0;
      }
      break;
    case 3:
      if ( ++*(_DWORD *)(a1 + 120) == 50 || *(_DWORD *)(a1 + 120) == 60 )
        *(_DWORD *)(a1 + 104) = 3;
      if ( *(_DWORD *)(a1 + 120) == 53 || *(_DWORD *)(a1 + 120) == 63 )
        *(_DWORD *)(a1 + 104) = 2;
      if ( *(_DWORD *)(a1 + 120) > 100 )
        *(_DWORD *)(a1 + 116) = 4;
      break;
    default:
      break;
  }
  v22 = 96;
  v23 = 64;
  v24 = 120;
  v25 = 96;
  v26 = 120;
  v27 = 64;
  v28 = 144;
  v29 = 96;
  v30 = 144;
  v31 = 64;
  v32 = 168;
  v33 = 96;
  v34 = 168;
  v35 = 64;
  v36 = 192;
  v37 = 96;
  v6 = 96;
  v7 = 96;
  v8 = 120;
  v9 = 128;
  v10 = 120;
  v11 = 96;
  v12 = 144;
  v13 = 128;
  v14 = 144;
  v15 = 96;
  v16 = 168;
  v17 = 128;
  v18 = 168;
  v19 = 96;
  v20 = 192;
  v21 = 128;
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v6 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    *(_DWORD *)(v5 + 8) = v4[2];
    result = v4[3];
    *(_DWORD *)(v5 + 12) = result;
  }
  else
  {
    v1 = &v22 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    *(_DWORD *)(v2 + 8) = v1[2];
    result = v1[3];
    *(_DWORD *)(v2 + 12) = result;
  }
  return result;
}

//----- (0042D010) --------------------------------------------------------
int __cdecl NPC36(int a1)
{
  int v1; // ST10_4@38
  int v2; // ST0C_4@38
  int v3; // ST08_4@38
  int v4; // eax@38
  int v5; // ST10_4@41
  int v6; // ST0C_4@41
  int v7; // ST08_4@41
  int v8; // eax@41
  int *v9; // ecx@52
  int v10; // edx@52
  int result; // eax@52
  int *v12; // ecx@53
  int v13; // edx@53
  int v14; // [sp+4h] [bp-D0h]@51
  int v15; // [sp+8h] [bp-CCh]@51
  int v16; // [sp+Ch] [bp-C8h]@51
  int v17; // [sp+10h] [bp-C4h]@51
  int v18; // [sp+14h] [bp-C0h]@51
  int v19; // [sp+18h] [bp-BCh]@51
  int v20; // [sp+1Ch] [bp-B8h]@51
  int v21; // [sp+20h] [bp-B4h]@51
  int v22; // [sp+24h] [bp-B0h]@51
  int v23; // [sp+28h] [bp-ACh]@51
  int v24; // [sp+2Ch] [bp-A8h]@51
  int v25; // [sp+30h] [bp-A4h]@51
  int v26; // [sp+34h] [bp-A0h]@51
  int v27; // [sp+38h] [bp-9Ch]@51
  int v28; // [sp+3Ch] [bp-98h]@51
  int v29; // [sp+40h] [bp-94h]@51
  int v30; // [sp+44h] [bp-90h]@51
  int v31; // [sp+48h] [bp-8Ch]@51
  int v32; // [sp+4Ch] [bp-88h]@51
  int v33; // [sp+50h] [bp-84h]@51
  int v34; // [sp+54h] [bp-80h]@51
  int v35; // [sp+58h] [bp-7Ch]@51
  int v36; // [sp+5Ch] [bp-78h]@51
  int v37; // [sp+60h] [bp-74h]@51
  int Y_Velocity; // [sp+64h] [bp-70h]@7
  int X_Velocity; // [sp+68h] [bp-6Ch]@7
  int v40; // [sp+6Ch] [bp-68h]@51
  int v41; // [sp+70h] [bp-64h]@51
  int v42; // [sp+74h] [bp-60h]@51
  int v43; // [sp+78h] [bp-5Ch]@51
  int v44; // [sp+7Ch] [bp-58h]@51
  int v45; // [sp+80h] [bp-54h]@51
  int v46; // [sp+84h] [bp-50h]@51
  int v47; // [sp+88h] [bp-4Ch]@51
  int v48; // [sp+8Ch] [bp-48h]@51
  int v49; // [sp+90h] [bp-44h]@51
  int v50; // [sp+94h] [bp-40h]@51
  int v51; // [sp+98h] [bp-3Ch]@51
  int v52; // [sp+9Ch] [bp-38h]@51
  int v53; // [sp+A0h] [bp-34h]@51
  int v54; // [sp+A4h] [bp-30h]@51
  int v55; // [sp+A8h] [bp-2Ch]@51
  int v56; // [sp+ACh] [bp-28h]@51
  int v57; // [sp+B0h] [bp-24h]@51
  int v58; // [sp+B4h] [bp-20h]@51
  int v59; // [sp+B8h] [bp-1Ch]@51
  int v60; // [sp+BCh] [bp-18h]@51
  int v61; // [sp+C0h] [bp-14h]@51
  int v62; // [sp+C4h] [bp-10h]@51
  int v63; // [sp+C8h] [bp-Ch]@51
  int i; // [sp+CCh] [bp-8h]@36
  unsigned __int8 v65; // [sp+D3h] [bp-1h]@7

  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( ++*(_DWORD *)(a1 + 120) > 12 )
      {
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 108) = 3;
        *(_DWORD *)(a1 + 104) = 1;
      }
      break;
    case 2:
      if ( ++*(_DWORD *)(a1 + 120) > 16 )
      {
        --*(_DWORD *)(a1 + 108);
        *(_DWORD *)(a1 + 120) = 0;
        v65 = Angle_Calculator(*(_DWORD *)(a1 + 8) - Quote_X_Position, *(_DWORD *)(a1 + 12) + 2048 - Quote_Y_Position);
        v65 += RNG_Range(-16, 16);
        Y_Velocity = SIN_function(v65);
        X_Velocity = COS_function(v65);
        NPC_Create(11, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12) + 2048, X_Velocity, Y_Velocity, 0, 0, 256);
        Play_Sound_Effect(39, 1);
        if ( !*(_DWORD *)(a1 + 108) )
        {
          *(_DWORD *)(a1 + 116) = 3;
          *(_DWORD *)(a1 + 120) = 0;
        }
      }
      break;
    case 3:
      if ( ++*(_DWORD *)(a1 + 120) > 3 )
      {
        *(_DWORD *)(a1 + 116) = 4;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 16) = (Quote_X_Position - *(_DWORD *)(a1 + 8)) / 100;
        *(_DWORD *)(a1 + 20) = -1536;
        *(_DWORD *)(a1 + 104) = 3;
      }
      break;
    case 4:
      if ( *(_DWORD *)(a1 + 20) > -512 )
      {
        if ( *(_DWORD *)(a1 + 64) <= 60 )
        {
          *(_DWORD *)(a1 + 116) = 6;
        }
        else
        {
          *(_DWORD *)(a1 + 116) = 5;
          *(_DWORD *)(a1 + 104) = 4;
          *(_DWORD *)(a1 + 100) = 0;
          *(_DWORD *)(a1 + 120) = 0;
          *(_DWORD *)(a1 + 36) = *(_DWORD *)(a1 + 12);
        }
      }
      break;
    case 5:
      if ( ++*(_DWORD *)(a1 + 100) > 1 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 5 )
      {
        *(_DWORD *)(a1 + 104) = 4;
        Play_Sound_Effect(47, 1);
      }
      if ( ++*(_DWORD *)(a1 + 120) > 100 )
      {
        *(_DWORD *)(a1 + 116) = 6;
        *(_DWORD *)(a1 + 104) = 3;
      }
      if ( *(_DWORD *)(a1 + 12) >= *(_DWORD *)(a1 + 36) )
        *(_DWORD *)(a1 + 20) -= 64;
      else
        *(_DWORD *)(a1 + 20) += 64;
      if ( *(_DWORD *)(a1 + 20) < -512 )
        *(_DWORD *)(a1 + 20) = -512;
      if ( *(_DWORD *)(a1 + 20) > 512 )
        *(_DWORD *)(a1 + 20) = 512;
      break;
    case 6:
      if ( *(_DWORD *)(a1 + 12) + 0x2000 >= Quote_Y_Position )
        *(_DWORD *)(a1 + 164) = 0;
      else
        *(_DWORD *)(a1 + 164) = 10;
      if ( *(_DWORD *)(a1 + 4) & 8 )
      {
        *(_DWORD *)(a1 + 116) = 7;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 2;
        Play_Sound_Effect(26, 1);
        Play_Sound_Effect(25, 1);
        sub_40F310(30);
        *(_DWORD *)(a1 + 164) = 0;
        for ( i = 0; i < 8; ++i )
        {
          v1 = RNG_Range(-1536, 0);
          v2 = RNG_Range(-341, 341);
          v3 = *(_DWORD *)(a1 + 12) + (RNG_Range(-12, 12) << 9);
          v4 = RNG_Range(-12, 12);
          NPC_Create(4, *(_DWORD *)(a1 + 8) + (v4 << 9), v3, v2, v1, 0, 0, 256);
        }
        for ( i = 0; i < 8; ++i )
        {
          v5 = RNG_Range(-1024, 0);
          v6 = RNG_Range(-1024, 1024);
          v7 = *(_DWORD *)(a1 + 12) + (RNG_Range(-12, 12) << 9);
          v8 = RNG_Range(-12, 12);
          NPC_Create(33, *(_DWORD *)(a1 + 8) + (v8 << 9), v7, v6, v5, 0, 0, 256);
        }
      }
      break;
    case 7:
      *(_DWORD *)(a1 + 16) = 0;
      if ( ++*(_DWORD *)(a1 + 120) > 3 )
      {
        *(_DWORD *)(a1 + 116) = 1;
        *(_DWORD *)(a1 + 120) = 0;
      }
      break;
    default:
      break;
  }
  if ( *(_DWORD *)(a1 + 116) != 5 )
  {
    *(_DWORD *)(a1 + 20) += 51;
    if ( *(_DWORD *)(a1 + 8) >= Quote_X_Position )
      *(_DWORD *)(a1 + 76) = 0;
    else
      *(_DWORD *)(a1 + 76) = 2;
  }
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  v40 = 0;
  v41 = 0;
  v42 = 40;
  v43 = 24;
  v44 = 40;
  v45 = 0;
  v46 = 80;
  v47 = 24;
  v48 = 80;
  v49 = 0;
  v50 = 120;
  v51 = 24;
  v52 = 120;
  v53 = 0;
  v54 = 160;
  v55 = 24;
  v56 = 160;
  v57 = 48;
  v58 = 200;
  v59 = 72;
  v60 = 200;
  v61 = 48;
  v62 = 240;
  v63 = 72;
  v14 = 0;
  v15 = 24;
  v16 = 40;
  v17 = 48;
  v18 = 40;
  v19 = 24;
  v20 = 80;
  v21 = 48;
  v22 = 80;
  v23 = 24;
  v24 = 120;
  v25 = 48;
  v26 = 120;
  v27 = 24;
  v28 = 160;
  v29 = 48;
  v30 = 160;
  v31 = 72;
  v32 = 200;
  v33 = 96;
  v34 = 200;
  v35 = 72;
  v36 = 240;
  v37 = 96;
  if ( *(_DWORD *)(a1 + 76) )
  {
    v12 = &v14 + 4 * *(_DWORD *)(a1 + 104);
    v13 = a1 + 84;
    *(_DWORD *)v13 = *v12;
    *(_DWORD *)(v13 + 4) = v12[1];
    result = v12[2];
    *(_DWORD *)(v13 + 8) = result;
    *(_DWORD *)(v13 + 12) = v12[3];
  }
  else
  {
    v9 = &v40 + 4 * *(_DWORD *)(a1 + 104);
    v10 = a1 + 84;
    *(_DWORD *)v10 = *v9;
    *(_DWORD *)(v10 + 4) = v9[1];
    result = v9[2];
    *(_DWORD *)(v10 + 8) = result;
    *(_DWORD *)(v10 + 12) = v9[3];
  }
  return result;
}

//----- (0042D760) --------------------------------------------------------
int __cdecl NPC37(int a1)
{
  int *v1; // eax@5
  int v2; // ecx@5
  int result; // eax@5
  int v4; // [sp+0h] [bp-20h]@1
  int v5; // [sp+4h] [bp-1Ch]@1
  int v6; // [sp+8h] [bp-18h]@1
  int v7; // [sp+Ch] [bp-14h]@1
  int v8; // [sp+10h] [bp-10h]@1
  int v9; // [sp+14h] [bp-Ch]@1
  int v10; // [sp+18h] [bp-8h]@1
  int v11; // [sp+1Ch] [bp-4h]@1

  v4 = 192;
  v5 = 64;
  v6 = 208;
  v7 = 80;
  v8 = 208;
  v9 = 64;
  v10 = 224;
  v11 = 80;
  if ( ++*(_DWORD *)(a1 + 100) > 1 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    ++*(_DWORD *)(a1 + 104);
  }
  if ( *(_DWORD *)(a1 + 104) > 1 )
    *(_DWORD *)(a1 + 104) = 0;
  v1 = &v4 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  *(_DWORD *)(v2 + 8) = v1[2];
  result = v1[3];
  *(_DWORD *)(v2 + 12) = result;
  return result;
}

//----- (0042D810) --------------------------------------------------------
int __cdecl NPC38(int a1)
{
  int result; // eax@1
  int *v2; // edx@9
  int v3; // [sp+0h] [bp-44h]@1
  int v4; // [sp+4h] [bp-40h]@1
  int v5; // [sp+8h] [bp-3Ch]@1
  int v6; // [sp+Ch] [bp-38h]@1
  int v7; // [sp+10h] [bp-34h]@1
  int v8; // [sp+14h] [bp-30h]@1
  int v9; // [sp+18h] [bp-2Ch]@1
  int v10; // [sp+1Ch] [bp-28h]@1
  int v11; // [sp+20h] [bp-24h]@1
  int v12; // [sp+24h] [bp-20h]@1
  int v13; // [sp+28h] [bp-1Ch]@1
  int v14; // [sp+2Ch] [bp-18h]@1
  int v15; // [sp+30h] [bp-14h]@1
  int v16; // [sp+34h] [bp-10h]@1
  int v17; // [sp+38h] [bp-Ch]@1
  int v18; // [sp+3Ch] [bp-8h]@1
  int v19; // [sp+40h] [bp-4h]@1

  v4 = 128;
  v5 = 64;
  v6 = 144;
  v7 = 80;
  v8 = 144;
  v9 = 64;
  v10 = 160;
  v11 = 80;
  v12 = 160;
  v13 = 64;
  v14 = 176;
  v15 = 80;
  v16 = 176;
  v17 = 64;
  v18 = 192;
  v19 = 80;
  result = a1;
  v3 = *(_DWORD *)(a1 + 116);
  if ( v3 )
  {
    if ( v3 == 10 )
    {
      *(_DWORD *)(a1 + 116) = 11;
      result = sub_46F150(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), *(_DWORD *)(a1 + 148), 8);
    }
    else if ( v3 != 11 )
    {
      return result;
    }
    *(_DWORD *)(a1 + 84) = 0;
    *(_DWORD *)(a1 + 92) = 0;
    return result;
  }
  if ( ++*(_DWORD *)(a1 + 100) > 3 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    ++*(_DWORD *)(a1 + 104);
  }
  if ( *(_DWORD *)(a1 + 104) > 3 )
    *(_DWORD *)(a1 + 104) = 0;
  v2 = &v4 + 4 * *(_DWORD *)(a1 + 104);
  result = a1 + 84;
  *(_DWORD *)result = *v2;
  *(_DWORD *)(result + 4) = v2[1];
  *(_DWORD *)(result + 8) = v2[2];
  *(_DWORD *)(result + 12) = v2[3];
  return result;
}

//----- (0042D960) --------------------------------------------------------
int __cdecl NPC39(int a1)
{
  int *v1; // edx@4
  int result; // eax@4
  int v3; // [sp+0h] [bp-20h]@1
  int v4; // [sp+4h] [bp-1Ch]@1
  int v5; // [sp+8h] [bp-18h]@1
  int v6; // [sp+Ch] [bp-14h]@1
  int v7; // [sp+10h] [bp-10h]@1
  int v8; // [sp+14h] [bp-Ch]@1
  int v9; // [sp+18h] [bp-8h]@1
  int v10; // [sp+1Ch] [bp-4h]@1

  v3 = 224;
  v4 = 64;
  v5 = 240;
  v6 = 80;
  v7 = 240;
  v8 = 64;
  v9 = 256;
  v10 = 80;
  if ( *(_DWORD *)(a1 + 76) )
    *(_DWORD *)(a1 + 104) = 1;
  else
    *(_DWORD *)(a1 + 104) = 0;
  v1 = &v3 + 4 * *(_DWORD *)(a1 + 104);
  result = a1 + 84;
  *(_DWORD *)result = *v1;
  *(_DWORD *)(result + 4) = v1[1];
  *(_DWORD *)(result + 8) = v1[2];
  *(_DWORD *)(result + 12) = v1[3];
  return result;
}

//----- (0042D9F0) --------------------------------------------------------
int __cdecl NPC40(int a1)
{
  int *v1; // eax@27
  int v2; // ecx@27
  int result; // eax@27
  int *v4; // eax@28
  int v5; // ecx@28
  int v6; // [sp+4h] [bp-E0h]@1
  int v7; // [sp+8h] [bp-DCh]@1
  int v8; // [sp+Ch] [bp-D8h]@1
  int v9; // [sp+10h] [bp-D4h]@1
  int v10; // [sp+14h] [bp-D0h]@1
  int v11; // [sp+18h] [bp-CCh]@1
  int v12; // [sp+1Ch] [bp-C8h]@1
  int v13; // [sp+20h] [bp-C4h]@1
  int v14; // [sp+24h] [bp-C0h]@1
  int v15; // [sp+28h] [bp-BCh]@1
  int v16; // [sp+2Ch] [bp-B8h]@1
  int v17; // [sp+30h] [bp-B4h]@1
  int v18; // [sp+34h] [bp-B0h]@1
  int v19; // [sp+38h] [bp-ACh]@1
  int v20; // [sp+3Ch] [bp-A8h]@1
  int v21; // [sp+40h] [bp-A4h]@1
  int v22; // [sp+44h] [bp-A0h]@1
  int v23; // [sp+48h] [bp-9Ch]@1
  int v24; // [sp+4Ch] [bp-98h]@1
  int v25; // [sp+50h] [bp-94h]@1
  int v26; // [sp+54h] [bp-90h]@1
  int v27; // [sp+58h] [bp-8Ch]@1
  int v28; // [sp+5Ch] [bp-88h]@1
  int v29; // [sp+60h] [bp-84h]@1
  int v30; // [sp+64h] [bp-80h]@1
  int v31; // [sp+68h] [bp-7Ch]@1
  int v32; // [sp+6Ch] [bp-78h]@1
  int v33; // [sp+70h] [bp-74h]@1
  int v34; // [sp+74h] [bp-70h]@1
  int v35; // [sp+78h] [bp-6Ch]@1
  int v36; // [sp+7Ch] [bp-68h]@1
  int v37; // [sp+80h] [bp-64h]@1
  int v38; // [sp+84h] [bp-60h]@1
  int v39; // [sp+88h] [bp-5Ch]@1
  int v40; // [sp+8Ch] [bp-58h]@1
  int v41; // [sp+90h] [bp-54h]@1
  int v42; // [sp+94h] [bp-50h]@1
  int v43; // [sp+98h] [bp-4Ch]@1
  int v44; // [sp+9Ch] [bp-48h]@1
  int v45; // [sp+A0h] [bp-44h]@1
  int v46; // [sp+A4h] [bp-40h]@1
  int v47; // [sp+A8h] [bp-3Ch]@1
  int v48; // [sp+ACh] [bp-38h]@1
  int v49; // [sp+B0h] [bp-34h]@1
  int v50; // [sp+B4h] [bp-30h]@1
  int v51; // [sp+B8h] [bp-2Ch]@1
  int v52; // [sp+BCh] [bp-28h]@1
  int v53; // [sp+C0h] [bp-24h]@1
  int v54; // [sp+C4h] [bp-20h]@1
  int v55; // [sp+C8h] [bp-1Ch]@1
  int v56; // [sp+CCh] [bp-18h]@1
  int v57; // [sp+D0h] [bp-14h]@1
  int v58; // [sp+D4h] [bp-10h]@1
  int v59; // [sp+D8h] [bp-Ch]@1
  int v60; // [sp+DCh] [bp-8h]@1
  int v61; // [sp+E0h] [bp-4h]@1

  v34 = 0;
  v35 = 32;
  v36 = 16;
  v37 = 48;
  v38 = 16;
  v39 = 32;
  v40 = 32;
  v41 = 48;
  v42 = 32;
  v43 = 32;
  v44 = 48;
  v45 = 48;
  v46 = 0;
  v47 = 32;
  v48 = 16;
  v49 = 48;
  v50 = 48;
  v51 = 32;
  v52 = 64;
  v53 = 48;
  v54 = 0;
  v55 = 32;
  v56 = 16;
  v57 = 48;
  v58 = 64;
  v59 = 32;
  v60 = 80;
  v61 = 48;
  v6 = 0;
  v7 = 48;
  v8 = 16;
  v9 = 64;
  v10 = 16;
  v11 = 48;
  v12 = 32;
  v13 = 64;
  v14 = 32;
  v15 = 48;
  v16 = 48;
  v17 = 64;
  v18 = 0;
  v19 = 48;
  v20 = 16;
  v21 = 64;
  v22 = 48;
  v23 = 48;
  v24 = 64;
  v25 = 64;
  v26 = 0;
  v27 = 48;
  v28 = 16;
  v29 = 64;
  v30 = 64;
  v31 = 48;
  v32 = 80;
  v33 = 64;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 100) = 0;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( RNG_Range(0, 120) == 10 )
      {
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 1;
      }
      if ( *(_DWORD *)(a1 + 8) - 0x4000 < Quote_X_Position
        && *(_DWORD *)(a1 + 8) + 0x4000 > Quote_X_Position
        && *(_DWORD *)(a1 + 12) - 0x4000 < Quote_Y_Position
        && *(_DWORD *)(a1 + 12) + 0x2000 > Quote_Y_Position )
      {
        if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
          *(_DWORD *)(a1 + 76) = 2;
        else
          *(_DWORD *)(a1 + 76) = 0;
      }
      break;
    case 2:
      if ( ++*(_DWORD *)(a1 + 120) > 8 )
      {
        *(_DWORD *)(a1 + 116) = 1;
        *(_DWORD *)(a1 + 104) = 0;
      }
      break;
    case 3:
      *(_DWORD *)(a1 + 116) = 4;
      *(_DWORD *)(a1 + 104) = 2;
      *(_DWORD *)(a1 + 100) = 0;
      goto LABEL_17;
    case 4:
LABEL_17:
      if ( ++*(_DWORD *)(a1 + 100) > 4 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 5 )
        *(_DWORD *)(a1 + 104) = 2;
      if ( *(_DWORD *)(a1 + 76) )
        *(_DWORD *)(a1 + 8) += 512;
      else
        *(_DWORD *)(a1 + 8) -= 512;
      break;
    case 5:
      *(_DWORD *)(a1 + 104) = 6;
      break;
    default:
      break;
  }
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v6 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    *(_DWORD *)(v5 + 8) = v4[2];
    result = v4[3];
    *(_DWORD *)(v5 + 12) = result;
  }
  else
  {
    v1 = &v34 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    *(_DWORD *)(v2 + 8) = v1[2];
    result = v1[3];
    *(_DWORD *)(v2 + 12) = result;
  }
  return result;
}

//----- (0042DE00) --------------------------------------------------------
signed int __cdecl NPC41(int a1)
{
  int v1; // ecx@3
  signed int result; // eax@3

  if ( !*(_DWORD *)(a1 + 116) )
  {
    ++*(_DWORD *)(a1 + 116);
    *(_DWORD *)(a1 + 12) -= 0x2000;
  }
  v1 = a1 + 84;
  *(_DWORD *)v1 = 0;
  *(_DWORD *)(v1 + 4) = 80;
  *(_DWORD *)(v1 + 8) = 48;
  result = 112;
  *(_DWORD *)(v1 + 12) = 112;
  return result;
}

//----- (0042DE70) --------------------------------------------------------
int __cdecl NPC42(int a1)
{
  int *v1; // eax@89
  int v2; // ecx@89
  int result; // eax@89
  int *v4; // eax@90
  int v5; // ecx@90
  int v6; // [sp+4h] [bp-1A8h]@1
  int v7; // [sp+8h] [bp-1A4h]@1
  int v8; // [sp+Ch] [bp-1A0h]@1
  int v9; // [sp+10h] [bp-19Ch]@1
  int v10; // [sp+14h] [bp-198h]@1
  int v11; // [sp+18h] [bp-194h]@1
  int v12; // [sp+1Ch] [bp-190h]@1
  int v13; // [sp+20h] [bp-18Ch]@1
  int v14; // [sp+24h] [bp-188h]@1
  int v15; // [sp+28h] [bp-184h]@1
  int v16; // [sp+2Ch] [bp-180h]@1
  int v17; // [sp+30h] [bp-17Ch]@1
  int v18; // [sp+34h] [bp-178h]@1
  int v19; // [sp+38h] [bp-174h]@1
  int v20; // [sp+3Ch] [bp-170h]@1
  int v21; // [sp+40h] [bp-16Ch]@1
  int v22; // [sp+44h] [bp-168h]@1
  int v23; // [sp+48h] [bp-164h]@1
  int v24; // [sp+4Ch] [bp-160h]@1
  int v25; // [sp+50h] [bp-15Ch]@1
  int v26; // [sp+54h] [bp-158h]@1
  int v27; // [sp+58h] [bp-154h]@1
  int v28; // [sp+5Ch] [bp-150h]@1
  int v29; // [sp+60h] [bp-14Ch]@1
  int v30; // [sp+64h] [bp-148h]@1
  int v31; // [sp+68h] [bp-144h]@1
  int v32; // [sp+6Ch] [bp-140h]@1
  int v33; // [sp+70h] [bp-13Ch]@1
  int v34; // [sp+74h] [bp-138h]@1
  int v35; // [sp+78h] [bp-134h]@1
  int v36; // [sp+7Ch] [bp-130h]@1
  int v37; // [sp+80h] [bp-12Ch]@1
  int v38; // [sp+84h] [bp-128h]@1
  int v39; // [sp+88h] [bp-124h]@1
  int v40; // [sp+8Ch] [bp-120h]@1
  int v41; // [sp+90h] [bp-11Ch]@1
  int v42; // [sp+94h] [bp-118h]@1
  int v43; // [sp+98h] [bp-114h]@1
  int v44; // [sp+9Ch] [bp-110h]@1
  int v45; // [sp+A0h] [bp-10Ch]@1
  int v46; // [sp+A4h] [bp-108h]@1
  int v47; // [sp+A8h] [bp-104h]@1
  int v48; // [sp+ACh] [bp-100h]@1
  int v49; // [sp+B0h] [bp-FCh]@1
  int v50; // [sp+B4h] [bp-F8h]@1
  int v51; // [sp+B8h] [bp-F4h]@1
  int v52; // [sp+BCh] [bp-F0h]@1
  int v53; // [sp+C0h] [bp-ECh]@1
  int v54; // [sp+C4h] [bp-E8h]@1
  int v55; // [sp+C8h] [bp-E4h]@1
  int v56; // [sp+CCh] [bp-E0h]@1
  int v57; // [sp+D0h] [bp-DCh]@1
  int i; // [sp+D8h] [bp-D4h]@39
  int v59; // [sp+DCh] [bp-D0h]@1
  int v60; // [sp+E0h] [bp-CCh]@1
  int v61; // [sp+E4h] [bp-C8h]@1
  int v62; // [sp+E8h] [bp-C4h]@1
  int v63; // [sp+ECh] [bp-C0h]@1
  int v64; // [sp+F0h] [bp-BCh]@1
  int v65; // [sp+F4h] [bp-B8h]@1
  int v66; // [sp+F8h] [bp-B4h]@1
  int v67; // [sp+FCh] [bp-B0h]@1
  int v68; // [sp+100h] [bp-ACh]@1
  int v69; // [sp+104h] [bp-A8h]@1
  int v70; // [sp+108h] [bp-A4h]@1
  int v71; // [sp+10Ch] [bp-A0h]@1
  int v72; // [sp+110h] [bp-9Ch]@1
  int v73; // [sp+114h] [bp-98h]@1
  int v74; // [sp+118h] [bp-94h]@1
  int v75; // [sp+11Ch] [bp-90h]@1
  int v76; // [sp+120h] [bp-8Ch]@1
  int v77; // [sp+124h] [bp-88h]@1
  int v78; // [sp+128h] [bp-84h]@1
  int v79; // [sp+12Ch] [bp-80h]@1
  int v80; // [sp+130h] [bp-7Ch]@1
  int v81; // [sp+134h] [bp-78h]@1
  int v82; // [sp+138h] [bp-74h]@1
  int v83; // [sp+13Ch] [bp-70h]@1
  int v84; // [sp+140h] [bp-6Ch]@1
  int v85; // [sp+144h] [bp-68h]@1
  int v86; // [sp+148h] [bp-64h]@1
  int v87; // [sp+14Ch] [bp-60h]@1
  int v88; // [sp+150h] [bp-5Ch]@1
  int v89; // [sp+154h] [bp-58h]@1
  int v90; // [sp+158h] [bp-54h]@1
  int v91; // [sp+15Ch] [bp-50h]@1
  int v92; // [sp+160h] [bp-4Ch]@1
  int v93; // [sp+164h] [bp-48h]@1
  int v94; // [sp+168h] [bp-44h]@1
  int v95; // [sp+16Ch] [bp-40h]@1
  int v96; // [sp+170h] [bp-3Ch]@1
  int v97; // [sp+174h] [bp-38h]@1
  int v98; // [sp+178h] [bp-34h]@1
  int v99; // [sp+17Ch] [bp-30h]@1
  int v100; // [sp+180h] [bp-2Ch]@1
  int v101; // [sp+184h] [bp-28h]@1
  int v102; // [sp+188h] [bp-24h]@1
  int v103; // [sp+18Ch] [bp-20h]@1
  int v104; // [sp+190h] [bp-1Ch]@1
  int v105; // [sp+194h] [bp-18h]@1
  int v106; // [sp+198h] [bp-14h]@1
  int v107; // [sp+19Ch] [bp-10h]@1
  int v108; // [sp+1A0h] [bp-Ch]@1
  int v109; // [sp+1A4h] [bp-8h]@1
  int v110; // [sp+1A8h] [bp-4h]@1

  v59 = 0;
  v60 = 0;
  v61 = 16;
  v62 = 16;
  v63 = 16;
  v64 = 0;
  v65 = 32;
  v66 = 16;
  v67 = 32;
  v68 = 0;
  v69 = 48;
  v70 = 16;
  v71 = 0;
  v72 = 0;
  v73 = 16;
  v74 = 16;
  v75 = 48;
  v76 = 0;
  v77 = 64;
  v78 = 16;
  v79 = 0;
  v80 = 0;
  v81 = 16;
  v82 = 16;
  v83 = 64;
  v84 = 0;
  v85 = 80;
  v86 = 16;
  v87 = 80;
  v88 = 32;
  v89 = 96;
  v90 = 48;
  v91 = 96;
  v92 = 32;
  v93 = 112;
  v94 = 48;
  v95 = 128;
  v96 = 32;
  v97 = 144;
  v98 = 48;
  v99 = 0;
  v100 = 0;
  v101 = 16;
  v102 = 16;
  v103 = 112;
  v104 = 32;
  v105 = 128;
  v106 = 48;
  v107 = 160;
  v108 = 32;
  v109 = 176;
  v110 = 48;
  v6 = 0;
  v7 = 16;
  v8 = 16;
  v9 = 32;
  v10 = 16;
  v11 = 16;
  v12 = 32;
  v13 = 32;
  v14 = 32;
  v15 = 16;
  v16 = 48;
  v17 = 32;
  v18 = 0;
  v19 = 16;
  v20 = 16;
  v21 = 32;
  v22 = 48;
  v23 = 16;
  v24 = 64;
  v25 = 32;
  v26 = 0;
  v27 = 16;
  v28 = 16;
  v29 = 32;
  v30 = 64;
  v31 = 16;
  v32 = 80;
  v33 = 32;
  v34 = 80;
  v35 = 48;
  v36 = 96;
  v37 = 64;
  v38 = 96;
  v39 = 48;
  v40 = 112;
  v41 = 64;
  v42 = 128;
  v43 = 48;
  v44 = 144;
  v45 = 64;
  v46 = 0;
  v47 = 16;
  v48 = 16;
  v49 = 32;
  v50 = 112;
  v51 = 48;
  v52 = 128;
  v53 = 64;
  v54 = 160;
  v55 = 48;
  v56 = 176;
  v57 = 64;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 100) = 0;
      *(_DWORD *)(a1 + 16) = 0;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( RNG_Range(0, 120) == 10 )
      {
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 1;
      }
      break;
    case 2:
      if ( ++*(_DWORD *)(a1 + 120) > 8 )
      {
        *(_DWORD *)(a1 + 116) = 1;
        *(_DWORD *)(a1 + 104) = 0;
      }
      break;
    case 3:
      *(_DWORD *)(a1 + 116) = 4;
      *(_DWORD *)(a1 + 104) = 2;
      *(_DWORD *)(a1 + 100) = 0;
      goto LABEL_10;
    case 4:
LABEL_10:
      if ( ++*(_DWORD *)(a1 + 100) > 4 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 5 )
        *(_DWORD *)(a1 + 104) = 2;
      if ( *(_DWORD *)(a1 + 76) )
        *(_DWORD *)(a1 + 16) = 512;
      else
        *(_DWORD *)(a1 + 16) = -512;
      break;
    case 5:
      *(_DWORD *)(a1 + 104) = 6;
      *(_DWORD *)(a1 + 16) = 0;
      break;
    case 6:
      Play_Sound_Effect(50, 1);
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 116) = 7;
      *(_DWORD *)(a1 + 104) = 7;
      goto LABEL_20;
    case 7:
LABEL_20:
      if ( ++*(_DWORD *)(a1 + 120) > 10 )
        *(_DWORD *)(a1 + 116) = 0;
      break;
    case 8:
      Play_Sound_Effect(50, 1);
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 116) = 9;
      *(_DWORD *)(a1 + 104) = 7;
      *(_DWORD *)(a1 + 20) = -512;
      if ( *(_DWORD *)(a1 + 76) )
        *(_DWORD *)(a1 + 16) = -1024;
      else
        *(_DWORD *)(a1 + 16) = 1024;
      goto LABEL_26;
    case 9:
LABEL_26:
      if ( ++*(_DWORD *)(a1 + 120) > 3 && *(_DWORD *)(a1 + 4) & 8 )
      {
        *(_DWORD *)(a1 + 116) = 10;
        if ( *(_DWORD *)(a1 + 76) )
          *(_DWORD *)(a1 + 76) = 0;
        else
          *(_DWORD *)(a1 + 76) = 2;
      }
      break;
    case 0xA:
      *(_DWORD *)(a1 + 16) = 0;
      *(_DWORD *)(a1 + 104) = 8;
      break;
    case 0xB:
      *(_DWORD *)(a1 + 116) = 12;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 104) = 9;
      *(_DWORD *)(a1 + 100) = 0;
      *(_DWORD *)(a1 + 16) = 0;
      goto LABEL_34;
    case 0xC:
LABEL_34:
      if ( ++*(_DWORD *)(a1 + 100) > 8 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 10 )
        *(_DWORD *)(a1 + 104) = 9;
      break;
    case 0xD:
      *(_DWORD *)(a1 + 104) = 11;
      *(_DWORD *)(a1 + 16) = 0;
      *(_DWORD *)(a1 + 20) = 0;
      *(_DWORD *)(a1 + 116) = 14;
      for ( i = 0; i < 512 && NPC_Event_Number[43 * i] != 501; ++i )
        ;
      if ( i == 512 )
      {
        *(_DWORD *)(a1 + 116) = 0;
      }
      else
      {
        *(_DWORD *)(a1 + 168) = (char *)&Is_NPC_Alive + 172 * i;
LABEL_46:
        if ( *(_DWORD *)(*(_DWORD *)(a1 + 168) + 76) )
          *(_DWORD *)(a1 + 76) = 0;
        else
          *(_DWORD *)(a1 + 76) = 2;
        if ( *(_DWORD *)(*(_DWORD *)(a1 + 168) + 76) )
          *(_DWORD *)(a1 + 8) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 8) + 3072;
        else
          *(_DWORD *)(a1 + 8) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 8) - 3072;
        *(_DWORD *)(a1 + 12) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 12) + 2048;
        if ( *(_DWORD *)(*(_DWORD *)(a1 + 168) + 104) == 2 || *(_DWORD *)(*(_DWORD *)(a1 + 168) + 104) == 4 )
          *(_DWORD *)(a1 + 12) -= 512;
      }
      break;
    case 0xE:
      goto LABEL_46;
    case 0xF:
      *(_DWORD *)(a1 + 116) = 16;
      NPC_Create(257, *(_DWORD *)(a1 + 8) + 0x10000, *(_DWORD *)(a1 + 12), 0, 0, 0, 0, 0);
      NPC_Create(257, *(_DWORD *)(a1 + 8) + 0x10000, *(_DWORD *)(a1 + 12), 0, 0, 2, 0, 128);
      *(_DWORD *)(a1 + 16) = 0;
      *(_DWORD *)(a1 + 104) = 0;
      goto LABEL_57;
    case 0x10:
LABEL_57:
      dword_4BBA30 = *(_DWORD *)(a1 + 8) - 12288;
      dword_4BBA28 = *(_DWORD *)(a1 + 12) - 4096;
      break;
    case 0x11:
      *(_DWORD *)(a1 + 16) = 0;
      *(_DWORD *)(a1 + 104) = 12;
      dword_4BBA30 = *(_DWORD *)(a1 + 8);
      dword_4BBA28 = *(_DWORD *)(a1 + 12) - 4096;
      break;
    case 0x14:
      *(_DWORD *)(a1 + 116) = 21;
      *(_DWORD *)(a1 + 104) = 2;
      *(_DWORD *)(a1 + 100) = 0;
      goto LABEL_60;
    case 0x15:
LABEL_60:
      if ( ++*(_DWORD *)(a1 + 100) > 2 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 5 )
        *(_DWORD *)(a1 + 104) = 2;
      if ( *(_DWORD *)(a1 + 76) )
        *(_DWORD *)(a1 + 16) = 1024;
      else
        *(_DWORD *)(a1 + 16) = -1024;
      if ( *(_DWORD *)(a1 + 8) < Quote_X_Position - 4096 )
      {
        *(_DWORD *)(a1 + 76) = 2;
        *(_DWORD *)(a1 + 116) = 0;
      }
      break;
    case 0x1E:
      *(_DWORD *)(a1 + 116) = 31;
      *(_DWORD *)(a1 + 104) = 2;
      *(_DWORD *)(a1 + 100) = 0;
      goto LABEL_71;
    case 0x1F:
LABEL_71:
      if ( ++*(_DWORD *)(a1 + 100) > 2 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 5 )
        *(_DWORD *)(a1 + 104) = 2;
      if ( *(_DWORD *)(a1 + 76) )
        *(_DWORD *)(a1 + 16) = 1024;
      else
        *(_DWORD *)(a1 + 16) = -1024;
      break;
    case 0x28:
      *(_DWORD *)(a1 + 116) = 41;
      *(_DWORD *)(a1 + 104) = 9;
      *(_DWORD *)(a1 + 20) = -1024;
      break;
    default:
      break;
  }
  if ( *(_DWORD *)(a1 + 116) != 14 )
  {
    *(_DWORD *)(a1 + 20) += 64;
    if ( *(_DWORD *)(a1 + 16) > 1024 )
      *(_DWORD *)(a1 + 16) = 1024;
    if ( *(_DWORD *)(a1 + 16) < -1024 )
      *(_DWORD *)(a1 + 16) = -1024;
    if ( *(_DWORD *)(a1 + 20) > 1535 )
      *(_DWORD *)(a1 + 20) = 1535;
    *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
    *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  }
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v6 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    *(_DWORD *)(v5 + 8) = v4[2];
    result = v4[3];
    *(_DWORD *)(v5 + 12) = result;
  }
  else
  {
    v1 = &v59 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    *(_DWORD *)(v2 + 8) = v1[2];
    result = v1[3];
    *(_DWORD *)(v2 + 12) = result;
  }
  return result;
}
// 4A6250: using guessed type int NPC_Event_Number[];
// 4BBA28: using guessed type int dword_4BBA28;
// 4BBA30: using guessed type int dword_4BBA30;

//----- (0042E9F0) --------------------------------------------------------
signed int __cdecl NPC43(int a1)
{
  int v1; // ecx@4
  signed int result; // eax@4
  int v3; // ecx@5

  if ( !*(_DWORD *)(a1 + 116) )
  {
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 12) -= 0x2000;
  }
  if ( *(_DWORD *)(a1 + 76) )
  {
    v3 = a1 + 84;
    *(_DWORD *)v3 = 168;
    *(_DWORD *)(v3 + 4) = 80;
    *(_DWORD *)(v3 + 8) = 208;
    result = 112;
    *(_DWORD *)(v3 + 12) = 112;
  }
  else
  {
    v1 = a1 + 84;
    *(_DWORD *)v1 = 128;
    *(_DWORD *)(v1 + 4) = 80;
    *(_DWORD *)(v1 + 8) = 168;
    result = 112;
    *(_DWORD *)(v1 + 12) = 112;
  }
  return result;
}

//----- (0042EAB0) --------------------------------------------------------
int __cdecl NPC44(int a1)
{
  int *v1; // eax@74
  int v2; // ecx@74
  int result; // eax@74
  int *v4; // eax@75
  int v5; // ecx@75
  signed int i; // [sp+4h] [bp-64h]@54
  int v7; // [sp+8h] [bp-60h]@1
  int v8; // [sp+Ch] [bp-5Ch]@1
  int v9; // [sp+10h] [bp-58h]@1
  int v10; // [sp+14h] [bp-54h]@1
  int v11; // [sp+18h] [bp-50h]@1
  int v12; // [sp+1Ch] [bp-4Ch]@1
  int v13; // [sp+20h] [bp-48h]@1
  int v14; // [sp+24h] [bp-44h]@1
  int v15; // [sp+28h] [bp-40h]@1
  int v16; // [sp+2Ch] [bp-3Ch]@1
  int v17; // [sp+30h] [bp-38h]@1
  int v18; // [sp+34h] [bp-34h]@1
  int v19; // [sp+38h] [bp-30h]@1
  int v20; // [sp+3Ch] [bp-2Ch]@1
  int v21; // [sp+40h] [bp-28h]@1
  int v22; // [sp+44h] [bp-24h]@1
  int v23; // [sp+48h] [bp-20h]@1
  int v24; // [sp+4Ch] [bp-1Ch]@1
  int v25; // [sp+50h] [bp-18h]@1
  int v26; // [sp+54h] [bp-14h]@1
  int v27; // [sp+58h] [bp-10h]@1
  int v28; // [sp+5Ch] [bp-Ch]@1
  int v29; // [sp+60h] [bp-8h]@1
  int v30; // [sp+64h] [bp-4h]@1

  v7 = 0;
  v8 = 0;
  v9 = 32;
  v10 = 32;
  v11 = 32;
  v12 = 0;
  v13 = 64;
  v14 = 32;
  v15 = 64;
  v16 = 0;
  v17 = 96;
  v18 = 32;
  v19 = 0;
  v20 = 0;
  v21 = 32;
  v22 = 32;
  v23 = 96;
  v24 = 0;
  v25 = 128;
  v26 = 32;
  v27 = 128;
  v28 = 0;
  v29 = 160;
  v30 = 32;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      goto LABEL_3;
    case 1:
LABEL_3:
      *(_DWORD *)(a1 + 104) = 0;
      if ( *(_DWORD *)(a1 + 76) )
        *(_DWORD *)(a1 + 116) = 2;
      else
        *(_DWORD *)(a1 + 116) = 8;
      goto LABEL_6;
    case 2:
LABEL_6:
      *(_DWORD *)(a1 + 20) += 32;
      if ( *(_DWORD *)(a1 + 20) > 0 && *(_DWORD *)(a1 + 4) & 8 )
      {
        *(_DWORD *)(a1 + 20) = -256;
        *(_DWORD *)(a1 + 16) += 256;
      }
      if ( *(_DWORD *)(a1 + 4) & 4 )
        *(_DWORD *)(a1 + 116) = 3;
      break;
    case 3:
      *(_DWORD *)(a1 + 16) += 32;
      if ( *(_DWORD *)(a1 + 16) > 0 && *(_DWORD *)(a1 + 4) & 4 )
      {
        *(_DWORD *)(a1 + 16) = -256;
        *(_DWORD *)(a1 + 20) -= 256;
      }
      if ( *(_DWORD *)(a1 + 4) & 2 )
        *(_DWORD *)(a1 + 116) = 4;
      break;
    case 4:
      *(_DWORD *)(a1 + 20) -= 32;
      if ( *(_DWORD *)(a1 + 20) < 0 && *(_DWORD *)(a1 + 4) & 2 )
      {
        *(_DWORD *)(a1 + 20) = 256;
        *(_DWORD *)(a1 + 16) -= 256;
      }
      if ( *(_DWORD *)(a1 + 4) & 1 )
        *(_DWORD *)(a1 + 116) = 5;
      break;
    case 5:
      *(_DWORD *)(a1 + 16) -= 32;
      if ( *(_DWORD *)(a1 + 16) < 0 && *(_DWORD *)(a1 + 4) & 1 )
      {
        *(_DWORD *)(a1 + 16) = 256;
        *(_DWORD *)(a1 + 20) += 256;
      }
      if ( *(_DWORD *)(a1 + 4) & 8 )
        *(_DWORD *)(a1 + 116) = 2;
      break;
    case 6:
      *(_DWORD *)(a1 + 20) += 32;
      if ( *(_DWORD *)(a1 + 20) > 0 && *(_DWORD *)(a1 + 4) & 8 )
      {
        *(_DWORD *)(a1 + 20) = -256;
        *(_DWORD *)(a1 + 16) -= 256;
      }
      if ( *(_DWORD *)(a1 + 4) & 1 )
        *(_DWORD *)(a1 + 116) = 7;
      break;
    case 7:
      *(_DWORD *)(a1 + 16) -= 32;
      if ( *(_DWORD *)(a1 + 16) < 0 && *(_DWORD *)(a1 + 4) & 1 )
      {
        *(_DWORD *)(a1 + 16) = 256;
        *(_DWORD *)(a1 + 20) -= 256;
      }
      if ( *(_DWORD *)(a1 + 4) & 2 )
        *(_DWORD *)(a1 + 116) = 8;
      break;
    case 8:
      *(_DWORD *)(a1 + 20) -= 32;
      if ( *(_DWORD *)(a1 + 20) < 0 && *(_DWORD *)(a1 + 4) & 2 )
      {
        *(_DWORD *)(a1 + 20) = 256;
        *(_DWORD *)(a1 + 16) += 256;
      }
      if ( *(_DWORD *)(a1 + 4) & 4 )
        *(_DWORD *)(a1 + 116) = 9;
      break;
    case 9:
      *(_DWORD *)(a1 + 16) += 32;
      if ( *(_DWORD *)(a1 + 16) > 0 && *(_DWORD *)(a1 + 4) & 4 )
      {
        *(_DWORD *)(a1 + 16) = -256;
        *(_DWORD *)(a1 + 20) += 256;
      }
      if ( *(_DWORD *)(a1 + 4) & 8 )
        *(_DWORD *)(a1 + 116) = 6;
      break;
    default:
      break;
  }
  if ( *(_DWORD *)(a1 + 64) <= 100 )
  {
    for ( i = 0; i < 10; ++i )
      NPC_Create(45, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 0, 0, 0, 0, 256);
    sub_46F150(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), *(_DWORD *)(a1 + 148), 8);
    Play_Sound_Effect(25, 1);
    *(_BYTE *)a1 = 0;
  }
  if ( *(_DWORD *)(a1 + 16) > 512 )
    *(_DWORD *)(a1 + 16) = 512;
  if ( *(_DWORD *)(a1 + 16) < -512 )
    *(_DWORD *)(a1 + 16) = -512;
  if ( *(_DWORD *)(a1 + 20) > 512 )
    *(_DWORD *)(a1 + 20) = 512;
  if ( *(_DWORD *)(a1 + 20) < -512 )
    *(_DWORD *)(a1 + 20) = -512;
  if ( *(_BYTE *)(a1 + 156) )
  {
    *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16) / 2;
    *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20) / 2;
  }
  else
  {
    *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
    *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  }
  if ( *(_DWORD *)(a1 + 116) >= 2 && *(_DWORD *)(a1 + 116) <= 9 && ++*(_DWORD *)(a1 + 104) > 2 )
    *(_DWORD *)(a1 + 104) = 1;
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v7 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    *(_DWORD *)(v5 + 8) = v4[2];
    result = v4[3];
    *(_DWORD *)(v5 + 12) = result;
  }
  else
  {
    v1 = &v19 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    *(_DWORD *)(v2 + 8) = v1[2];
    result = v1[3];
    *(_DWORD *)(v2 + 12) = result;
  }
  return result;
}

//----- (0042F060) --------------------------------------------------------
int __cdecl NPC45(int a1)
{
  int *v1; // ecx@37
  int v2; // edx@37
  int result; // eax@37
  signed int v4; // [sp+0h] [bp-34h]@1
  int v5; // [sp+4h] [bp-30h]@1
  int v6; // [sp+8h] [bp-2Ch]@1
  int v7; // [sp+Ch] [bp-28h]@1
  int v8; // [sp+10h] [bp-24h]@1
  int v9; // [sp+14h] [bp-20h]@1
  int v10; // [sp+18h] [bp-1Ch]@1
  int v11; // [sp+1Ch] [bp-18h]@1
  int v12; // [sp+20h] [bp-14h]@1
  int v13; // [sp+24h] [bp-10h]@1
  int v14; // [sp+28h] [bp-Ch]@1
  int v15; // [sp+2Ch] [bp-8h]@1
  int v16; // [sp+30h] [bp-4h]@1

  v5 = 0;
  v6 = 32;
  v7 = 16;
  v8 = 48;
  v9 = 16;
  v10 = 32;
  v11 = 32;
  v12 = 48;
  v13 = 32;
  v14 = 32;
  v15 = 48;
  v16 = 48;
  v4 = *(_DWORD *)(a1 + 116);
  if ( v4 )
  {
    if ( v4 <= 0 || v4 > 2 )
      goto LABEL_14;
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 2;
    if ( RNG_Range(0, 1) )
      *(_DWORD *)(a1 + 16) = RNG_Range(-512, -256);
    else
      *(_DWORD *)(a1 + 16) = RNG_Range(256, 512);
    if ( RNG_Range(0, 1) )
      *(_DWORD *)(a1 + 20) = RNG_Range(-512, -256);
    else
      *(_DWORD *)(a1 + 20) = RNG_Range(256, 512);
    *(_DWORD *)(a1 + 24) = *(_DWORD *)(a1 + 16);
    *(_DWORD *)(a1 + 28) = *(_DWORD *)(a1 + 20);
  }
  if ( ++*(_DWORD *)(a1 + 104) > 2 )
    *(_DWORD *)(a1 + 104) = 1;
LABEL_14:
  if ( *(_DWORD *)(a1 + 24) < 0 && *(_DWORD *)(a1 + 4) & 1 )
    *(_DWORD *)(a1 + 24) = -*(_DWORD *)(a1 + 24);
  if ( *(_DWORD *)(a1 + 24) > 0 && *(_DWORD *)(a1 + 4) & 4 )
    *(_DWORD *)(a1 + 24) = -*(_DWORD *)(a1 + 24);
  if ( *(_DWORD *)(a1 + 28) < 0 && *(_DWORD *)(a1 + 4) & 2 )
    *(_DWORD *)(a1 + 28) = -*(_DWORD *)(a1 + 28);
  if ( *(_DWORD *)(a1 + 28) > 0 && *(_DWORD *)(a1 + 4) & 8 )
    *(_DWORD *)(a1 + 28) = -*(_DWORD *)(a1 + 28);
  if ( *(_DWORD *)(a1 + 24) > 512 )
    *(_DWORD *)(a1 + 24) = 512;
  if ( *(_DWORD *)(a1 + 24) < -512 )
    *(_DWORD *)(a1 + 24) = -512;
  if ( *(_DWORD *)(a1 + 28) > 512 )
    *(_DWORD *)(a1 + 28) = 512;
  if ( *(_DWORD *)(a1 + 28) < -512 )
    *(_DWORD *)(a1 + 28) = -512;
  if ( *(_BYTE *)(a1 + 156) )
  {
    *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 24) / 2;
    *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 28) / 2;
  }
  else
  {
    *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 24);
    *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 28);
  }
  v1 = &v5 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  result = v1[2];
  *(_DWORD *)(v2 + 8) = result;
  *(_DWORD *)(v2 + 12) = v1[3];
  return result;
}

//----- (0042F320) --------------------------------------------------------
signed int __cdecl NPC46(int a1)
{
  int v1; // edx@9
  signed int result; // eax@9

  *(_WORD *)(a1 + 80) |= 0x100u;
  if ( *(_DWORD *)(a1 + 76) )
  {
    if ( *(_DWORD *)(a1 + 12) >= Quote_Y_Position )
      *(_DWORD *)(a1 + 12) -= 1535;
    else
      *(_DWORD *)(a1 + 12) += 1535;
  }
  else if ( *(_DWORD *)(a1 + 8) >= Quote_X_Position )
  {
    *(_DWORD *)(a1 + 8) -= 1535;
  }
  else
  {
    *(_DWORD *)(a1 + 8) += 1535;
  }
  v1 = a1 + 84;
  *(_DWORD *)v1 = 0;
  *(_DWORD *)(v1 + 4) = 0;
  result = 16;
  *(_DWORD *)(v1 + 8) = 16;
  *(_DWORD *)(v1 + 12) = 16;
  return result;
}

//----- (0042F3F0) --------------------------------------------------------
int __cdecl NPC47(int a1)
{
  int *v1; // ecx@29
  int v2; // edx@29
  int result; // eax@29
  int v4; // [sp+4h] [bp-50h]@29
  int v5; // [sp+8h] [bp-4Ch]@29
  int v6; // [sp+Ch] [bp-48h]@29
  int v7; // [sp+10h] [bp-44h]@29
  int v8; // [sp+14h] [bp-40h]@29
  int v9; // [sp+18h] [bp-3Ch]@29
  int v10; // [sp+1Ch] [bp-38h]@29
  int v11; // [sp+20h] [bp-34h]@29
  int v12; // [sp+24h] [bp-30h]@29
  int v13; // [sp+28h] [bp-2Ch]@29
  int v14; // [sp+2Ch] [bp-28h]@29
  int v15; // [sp+30h] [bp-24h]@29
  int v16; // [sp+34h] [bp-20h]@29
  int v17; // [sp+38h] [bp-1Ch]@29
  int v18; // [sp+3Ch] [bp-18h]@29
  int v19; // [sp+40h] [bp-14h]@29
  int v20; // [sp+44h] [bp-10h]@29
  int v21; // [sp+48h] [bp-Ch]@29
  int v22; // [sp+4Ch] [bp-8h]@29
  int v23; // [sp+50h] [bp-4h]@29

  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 36) = *(_DWORD *)(a1 + 12);
      *(_WORD *)(a1 + 80) &= 0xFFDFu;
      *(_WORD *)(a1 + 80) &= 0xFFFBu;
      *(_WORD *)(a1 + 80) &= 0xFFFEu;
      *(_WORD *)(a1 + 80) &= 0xFFF7u;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( Quote_X_Position > *(_DWORD *)(a1 + 8) - 4096
        && Quote_X_Position < *(_DWORD *)(a1 + 8) + 4096
        && Quote_Y_Position > *(_DWORD *)(a1 + 12)
        && Quote_Y_Position < *(_DWORD *)(a1 + 12) + 4096 )
      {
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 120) = 0;
        Play_Sound_Effect(102, 1);
      }
      if ( *(_DWORD *)(a1 + 8) < Quote_X_Position )
        *(_DWORD *)(a1 + 8) += 1024;
      if ( *(_DWORD *)(a1 + 8) > Quote_X_Position )
        *(_DWORD *)(a1 + 8) -= 1024;
      break;
    case 2:
      if ( ++*(_DWORD *)(a1 + 100) > 3 )
      {
        ++*(_DWORD *)(a1 + 104);
        *(_DWORD *)(a1 + 100) = 0;
      }
      if ( *(_DWORD *)(a1 + 104) == 3 )
        *(_DWORD *)(a1 + 164) = 10;
      if ( *(_DWORD *)(a1 + 104) == 4 )
      {
        *(_WORD *)(a1 + 80) |= 0x20u;
        *(_DWORD *)(a1 + 116) = 3;
        *(_DWORD *)(a1 + 120) = 0;
      }
      break;
    case 3:
      *(_WORD *)(a1 + 80) |= 1u;
      *(_DWORD *)(a1 + 164) = 0;
      ++*(_DWORD *)(a1 + 120);
      if ( *(_BYTE *)(a1 + 156) )
      {
        *(_DWORD *)(a1 + 116) = 4;
        *(_DWORD *)(a1 + 120) = 0;
      }
      break;
    case 4:
      *(_WORD *)(a1 + 80) |= 8u;
      *(_DWORD *)(a1 + 12) += 512;
      if ( ++*(_DWORD *)(a1 + 120) == 32 )
      {
        *(_WORD *)(a1 + 80) &= 0xFFFEu;
        *(_WORD *)(a1 + 80) &= 0xFFDFu;
        *(_DWORD *)(a1 + 116) = 5;
        *(_DWORD *)(a1 + 120) = 0;
      }
      break;
    case 5:
      if ( *(_DWORD *)(a1 + 120) >= 100 )
      {
        *(_DWORD *)(a1 + 12) = *(_DWORD *)(a1 + 36);
        *(_DWORD *)(a1 + 104) = 0;
        *(_DWORD *)(a1 + 116) = 0;
      }
      else
      {
        ++*(_DWORD *)(a1 + 120);
      }
      break;
    default:
      break;
  }
  v4 = 0;
  v5 = 48;
  v6 = 48;
  v7 = 80;
  v8 = 48;
  v9 = 48;
  v10 = 96;
  v11 = 80;
  v12 = 96;
  v13 = 48;
  v14 = 144;
  v15 = 80;
  v16 = 144;
  v17 = 48;
  v18 = 192;
  v19 = 80;
  v20 = 192;
  v21 = 48;
  v22 = 240;
  v23 = 80;
  v1 = &v4 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  result = v1[2];
  *(_DWORD *)(v2 + 8) = result;
  *(_DWORD *)(v2 + 12) = v1[3];
  return result;
}

//----- (0042F780) --------------------------------------------------------
char *__cdecl NPC48(void *a1)
{
  int *v1; // edx@20
  char *result; // eax@20
  int *v3; // edx@21
  int v4; // [sp+0h] [bp-40h]@14
  int v5; // [sp+4h] [bp-3Ch]@14
  int v6; // [sp+8h] [bp-38h]@14
  int v7; // [sp+Ch] [bp-34h]@14
  int v8; // [sp+10h] [bp-30h]@14
  int v9; // [sp+14h] [bp-2Ch]@14
  int v10; // [sp+18h] [bp-28h]@14
  int v11; // [sp+1Ch] [bp-24h]@14
  int v12; // [sp+20h] [bp-20h]@14
  int v13; // [sp+24h] [bp-1Ch]@14
  int v14; // [sp+28h] [bp-18h]@14
  int v15; // [sp+2Ch] [bp-14h]@14
  int v16; // [sp+30h] [bp-10h]@14
  int v17; // [sp+34h] [bp-Ch]@14
  int v18; // [sp+38h] [bp-8h]@14
  int v19; // [sp+3Ch] [bp-4h]@14

  if ( *((_DWORD *)a1 + 1) & 1 && *((_DWORD *)a1 + 4) < 0 )
  {
    *((_DWORD *)a1 + 4) = -*((_DWORD *)a1 + 4);
  }
  else if ( *((_DWORD *)a1 + 1) & 4 && *((_DWORD *)a1 + 4) > 0 )
  {
    *((_DWORD *)a1 + 4) = -*((_DWORD *)a1 + 4);
  }
  else if ( *((_DWORD *)a1 + 1) & 8 )
  {
    if ( ++*((_DWORD *)a1 + 27) <= 2 && *((_DWORD *)a1 + 19) != 2 )
    {
      *((_DWORD *)a1 + 5) = -256;
    }
    else
    {
      sub_46F760(a1);
      Create_Animated_Effect(*((_DWORD *)a1 + 2), *((_DWORD *)a1 + 3), 2, 0);
    }
  }
  if ( *((_DWORD *)a1 + 19) == 2 )
  {
    *((_WORD *)a1 + 40) &= 0xFFDFu;
    *((_WORD *)a1 + 40) |= 4u;
  }
  *((_DWORD *)a1 + 5) += 5;
  *((_DWORD *)a1 + 3) += *((_DWORD *)a1 + 5);
  *((_DWORD *)a1 + 2) += *((_DWORD *)a1 + 4);
  v12 = 288;
  v13 = 88;
  v14 = 304;
  v15 = 104;
  v16 = 304;
  v17 = 88;
  v18 = 320;
  v19 = 104;
  v4 = 288;
  v5 = 104;
  v6 = 304;
  v7 = 120;
  v8 = 304;
  v9 = 104;
  v10 = 320;
  v11 = 120;
  if ( ++*((_DWORD *)a1 + 25) > 2 )
  {
    *((_DWORD *)a1 + 25) = 0;
    if ( ++*((_DWORD *)a1 + 26) > 1 )
      *((_DWORD *)a1 + 26) = 0;
  }
  if ( ++*((_DWORD *)a1 + 30) > 750 )
  {
    Create_Animated_Effect(*((_DWORD *)a1 + 2), *((_DWORD *)a1 + 3), 2, 0);
    *(_BYTE *)a1 = 0;
  }
  if ( *((_DWORD *)a1 + 19) )
  {
    v3 = &v4 + 4 * *((_DWORD *)a1 + 26);
    result = (char *)a1 + 84;
    *(_DWORD *)result = *v3;
    *((_DWORD *)result + 1) = v3[1];
    *((_DWORD *)result + 2) = v3[2];
    *((_DWORD *)result + 3) = v3[3];
  }
  else
  {
    v1 = &v12 + 4 * *((_DWORD *)a1 + 26);
    result = (char *)a1 + 84;
    *(_DWORD *)result = *v1;
    *((_DWORD *)result + 1) = v1[1];
    *((_DWORD *)result + 2) = v1[2];
    *((_DWORD *)result + 3) = v1[3];
  }
  return result;
}

//----- (0042F9E0) --------------------------------------------------------
int __cdecl NPC49(int a1)
{
  int Y_Velocity; // ST24_4@39
  int *v2; // eax@47
  int v3; // ecx@47
  int result; // eax@47
  int *v5; // eax@48
  int v6; // ecx@48
  int v7; // [sp+8h] [bp-68h]@46
  int v8; // [sp+Ch] [bp-64h]@46
  int v9; // [sp+10h] [bp-60h]@46
  int v10; // [sp+14h] [bp-5Ch]@46
  int v11; // [sp+18h] [bp-58h]@46
  int v12; // [sp+1Ch] [bp-54h]@46
  int v13; // [sp+20h] [bp-50h]@46
  int v14; // [sp+24h] [bp-4Ch]@46
  int v15; // [sp+28h] [bp-48h]@46
  int v16; // [sp+2Ch] [bp-44h]@46
  int v17; // [sp+30h] [bp-40h]@46
  int v18; // [sp+34h] [bp-3Ch]@46
  int X_Velocity; // [sp+38h] [bp-38h]@39
  int v20; // [sp+3Ch] [bp-34h]@46
  int v21; // [sp+40h] [bp-30h]@46
  int v22; // [sp+44h] [bp-2Ch]@46
  int v23; // [sp+48h] [bp-28h]@46
  int v24; // [sp+4Ch] [bp-24h]@46
  int v25; // [sp+50h] [bp-20h]@46
  int v26; // [sp+54h] [bp-1Ch]@46
  int v27; // [sp+58h] [bp-18h]@46
  int v28; // [sp+5Ch] [bp-14h]@46
  int v29; // [sp+60h] [bp-10h]@46
  int v30; // [sp+64h] [bp-Ch]@46
  int v31; // [sp+68h] [bp-8h]@46
  unsigned __int8 v32; // [sp+6Fh] [bp-1h]@39

  if ( *(_DWORD *)(a1 + 116) >= 10 && *(_DWORD *)(*(_DWORD *)(a1 + 168) + 40) == 3 )
  {
    *(_DWORD *)(a1 + 116) = 3;
    *(_DWORD *)(a1 + 16) = 0;
    *(_DWORD *)(a1 + 20) = 0;
    *(_DWORD *)(a1 + 112) = 1;
  }
  if ( *(_DWORD *)(a1 + 4) & 1 )
  {
    *(_DWORD *)(a1 + 76) = 2;
    *(_DWORD *)(a1 + 16) = 256;
  }
  if ( *(_DWORD *)(a1 + 4) & 4 )
  {
    *(_DWORD *)(a1 + 76) = 0;
    *(_DWORD *)(a1 + 16) = -256;
  }
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      if ( *(_DWORD *)(a1 + 168) )
        *(_DWORD *)(a1 + 116) = 10;
      else
        *(_DWORD *)(a1 + 116) = 1;
      goto LABEL_12;
    case 1:
LABEL_12:
      if ( ++*(_DWORD *)(a1 + 120) > 3 )
      {
        *(_DWORD *)(a1 + 20) = -1024;
        *(_DWORD *)(a1 + 116) = 3;
        *(_DWORD *)(a1 + 104) = 2;
        if ( *(_DWORD *)(a1 + 112) )
        {
          if ( *(_DWORD *)(a1 + 76) )
            *(_DWORD *)(a1 + 16) = 512;
          else
            *(_DWORD *)(a1 + 16) = -512;
        }
        else if ( *(_DWORD *)(a1 + 76) )
        {
          *(_DWORD *)(a1 + 16) = 256;
        }
        else
        {
          *(_DWORD *)(a1 + 16) = -256;
        }
      }
      *(_DWORD *)(a1 + 104) = 1;
      break;
    case 3:
      if ( *(_DWORD *)(a1 + 4) & 8 )
      {
        *(_DWORD *)(a1 + 116) = 1;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 16) = 0;
      }
      if ( *(_DWORD *)(a1 + 4) & 8 || *(_DWORD *)(a1 + 20) > 0 )
        *(_DWORD *)(a1 + 104) = 1;
      else
        *(_DWORD *)(a1 + 104) = 2;
      break;
    case 0xA:
      if ( *(_DWORD *)(a1 + 108) >= 50 )
      {
        if ( *(_DWORD *)(a1 + 8) - 0x10000 < Quote_X_Position
          && *(_DWORD *)(a1 + 8) + 0x10000 > Quote_X_Position
          && *(_DWORD *)(a1 + 12) - 49152 < Quote_Y_Position
          && *(_DWORD *)(a1 + 12) + 49152 > Quote_Y_Position )
        {
          *(_DWORD *)(a1 + 116) = 11;
          *(_DWORD *)(a1 + 120) = 0;
          *(_DWORD *)(a1 + 104) = 2;
        }
      }
      else
      {
        ++*(_DWORD *)(a1 + 108);
      }
      break;
    case 0xB:
      if ( ++*(_DWORD *)(a1 + 120) == 30 || *(_DWORD *)(a1 + 120) == 35 )
      {
        v32 = Angle_Calculator(*(_DWORD *)(a1 + 8) - Quote_X_Position, *(_DWORD *)(a1 + 12) + 2048 - Quote_Y_Position);
        Y_Velocity = 2 * SIN_function(v32);
        X_Velocity = 2 * COS_function(v32);
        NPC_Create(50, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), X_Velocity, Y_Velocity, 0, 0, 256);
        Play_Sound_Effect(39, 1);
      }
      if ( *(_DWORD *)(a1 + 120) > 50 )
      {
        *(_DWORD *)(a1 + 108) = 0;
        *(_DWORD *)(a1 + 116) = 10;
        *(_DWORD *)(a1 + 104) = 1;
      }
      break;
    default:
      break;
  }
  if ( *(_DWORD *)(a1 + 116) >= 10 )
  {
    *(_DWORD *)(a1 + 8) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 8);
    *(_DWORD *)(a1 + 12) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 12) + 0x2000;
    *(_DWORD *)(a1 + 76) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 76);
    --*(_DWORD *)(*(_DWORD *)(a1 + 168) + 108);
  }
  *(_DWORD *)(a1 + 20) += 64;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  v20 = 0;
  v21 = 80;
  v22 = 32;
  v23 = 104;
  v24 = 32;
  v25 = 80;
  v26 = 64;
  v27 = 104;
  v28 = 64;
  v29 = 80;
  v30 = 96;
  v31 = 104;
  v7 = 0;
  v8 = 104;
  v9 = 32;
  v10 = 128;
  v11 = 32;
  v12 = 104;
  v13 = 64;
  v14 = 128;
  v15 = 64;
  v16 = 104;
  v17 = 96;
  v18 = 128;
  if ( *(_DWORD *)(a1 + 76) )
  {
    v5 = &v7 + 4 * *(_DWORD *)(a1 + 104);
    v6 = a1 + 84;
    *(_DWORD *)v6 = *v5;
    *(_DWORD *)(v6 + 4) = v5[1];
    *(_DWORD *)(v6 + 8) = v5[2];
    result = v5[3];
    *(_DWORD *)(v6 + 12) = result;
  }
  else
  {
    v2 = &v20 + 4 * *(_DWORD *)(a1 + 104);
    v3 = a1 + 84;
    *(_DWORD *)v3 = *v2;
    *(_DWORD *)(v3 + 4) = v2[1];
    *(_DWORD *)(v3 + 8) = v2[2];
    result = v2[3];
    *(_DWORD *)(v3 + 12) = result;
  }
  return result;
}

//----- (0042FEC0) --------------------------------------------------------
int __cdecl NPC50(int a1)
{
  int *v1; // edx@33
  int result; // eax@33
  int v3; // [sp+0h] [bp-44h]@1
  int v4; // [sp+4h] [bp-40h]@23
  int v5; // [sp+8h] [bp-3Ch]@23
  int v6; // [sp+Ch] [bp-38h]@23
  int v7; // [sp+10h] [bp-34h]@23
  int v8; // [sp+14h] [bp-30h]@23
  int v9; // [sp+18h] [bp-2Ch]@23
  int v10; // [sp+1Ch] [bp-28h]@23
  int v11; // [sp+20h] [bp-24h]@23
  int v12; // [sp+24h] [bp-20h]@23
  int v13; // [sp+28h] [bp-1Ch]@23
  int v14; // [sp+2Ch] [bp-18h]@23
  int v15; // [sp+30h] [bp-14h]@23
  int v16; // [sp+34h] [bp-10h]@23
  int v17; // [sp+38h] [bp-Ch]@23
  int v18; // [sp+3Ch] [bp-8h]@23
  int v19; // [sp+40h] [bp-4h]@23

  v3 = *(_DWORD *)(a1 + 116);
  if ( v3 )
  {
    if ( v3 != 1 )
    {
      if ( v3 == 2 )
      {
        *(_DWORD *)(a1 + 20) += 64;
        *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
        *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
        if ( *(_DWORD *)(a1 + 4) & 8 )
        {
          if ( ++*(_DWORD *)(a1 + 108) > 1 )
          {
            Create_Animated_Effect(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 2, 0);
            *(_BYTE *)a1 = 0;
          }
        }
      }
      goto LABEL_19;
    }
  }
  else if ( *(_DWORD *)(a1 + 76) == 2 )
  {
    *(_DWORD *)(a1 + 116) = 2;
  }
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 4) & 1 )
  {
    *(_DWORD *)(a1 + 116) = 2;
    *(_DWORD *)(a1 + 16) = 512;
    ++*(_DWORD *)(a1 + 108);
  }
  if ( *(_DWORD *)(a1 + 4) & 4 )
  {
    *(_DWORD *)(a1 + 116) = 2;
    *(_DWORD *)(a1 + 16) = -512;
    ++*(_DWORD *)(a1 + 108);
  }
  if ( *(_DWORD *)(a1 + 4) & 2 )
  {
    *(_DWORD *)(a1 + 116) = 2;
    *(_DWORD *)(a1 + 20) = 512;
    ++*(_DWORD *)(a1 + 108);
  }
  if ( *(_DWORD *)(a1 + 4) & 8 )
  {
    *(_DWORD *)(a1 + 116) = 2;
    *(_DWORD *)(a1 + 20) = -512;
    ++*(_DWORD *)(a1 + 108);
  }
LABEL_19:
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  if ( *(_DWORD *)(a1 + 20) < -1535 )
    *(_DWORD *)(a1 + 20) = -1535;
  v4 = 48;
  v5 = 32;
  v6 = 64;
  v7 = 48;
  v8 = 64;
  v9 = 32;
  v10 = 80;
  v11 = 48;
  v12 = 80;
  v13 = 32;
  v14 = 96;
  v15 = 48;
  v16 = 96;
  v17 = 32;
  v18 = 112;
  v19 = 48;
  if ( *(_DWORD *)(a1 + 76) )
  {
    if ( ++*(_DWORD *)(a1 + 100) > 1 )
    {
      *(_DWORD *)(a1 + 100) = 0;
      --*(_DWORD *)(a1 + 104);
    }
    if ( *(_DWORD *)(a1 + 104) < 0 )
      *(_DWORD *)(a1 + 104) = 3;
  }
  else
  {
    if ( ++*(_DWORD *)(a1 + 100) > 1 )
    {
      *(_DWORD *)(a1 + 100) = 0;
      ++*(_DWORD *)(a1 + 104);
    }
    if ( *(_DWORD *)(a1 + 104) > 3 )
      *(_DWORD *)(a1 + 104) = 0;
  }
  v1 = &v4 + 4 * *(_DWORD *)(a1 + 104);
  result = a1 + 84;
  *(_DWORD *)result = *v1;
  *(_DWORD *)(result + 4) = v1[1];
  *(_DWORD *)(result + 8) = v1[2];
  *(_DWORD *)(result + 12) = v1[3];
  return result;
}

//----- (004301B0) --------------------------------------------------------
int __cdecl NPC51(int a1)
{
  int *v1; // eax@76
  int v2; // ecx@76
  int result; // eax@76
  int *v4; // eax@77
  int v5; // ecx@77
  int v6; // [sp+0h] [bp-A4h]@1
  int v7; // [sp+4h] [bp-A0h]@65
  int v8; // [sp+8h] [bp-9Ch]@65
  int v9; // [sp+Ch] [bp-98h]@65
  int v10; // [sp+10h] [bp-94h]@65
  int v11; // [sp+14h] [bp-90h]@65
  int v12; // [sp+18h] [bp-8Ch]@65
  int v13; // [sp+1Ch] [bp-88h]@65
  int v14; // [sp+20h] [bp-84h]@65
  int v15; // [sp+24h] [bp-80h]@65
  int v16; // [sp+28h] [bp-7Ch]@65
  int v17; // [sp+2Ch] [bp-78h]@65
  int v18; // [sp+30h] [bp-74h]@65
  int v19; // [sp+34h] [bp-70h]@65
  int v20; // [sp+38h] [bp-6Ch]@65
  int v21; // [sp+3Ch] [bp-68h]@65
  int v22; // [sp+40h] [bp-64h]@65
  int v23; // [sp+44h] [bp-60h]@65
  int v24; // [sp+48h] [bp-5Ch]@65
  int v25; // [sp+4Ch] [bp-58h]@65
  int v26; // [sp+50h] [bp-54h]@65
  int v27; // [sp+54h] [bp-50h]@65
  int v28; // [sp+58h] [bp-4Ch]@65
  int v29; // [sp+5Ch] [bp-48h]@65
  int v30; // [sp+60h] [bp-44h]@65
  int v31; // [sp+64h] [bp-40h]@65
  int v32; // [sp+68h] [bp-3Ch]@65
  int v33; // [sp+6Ch] [bp-38h]@65
  int v34; // [sp+70h] [bp-34h]@65
  int v35; // [sp+74h] [bp-30h]@65
  int v36; // [sp+78h] [bp-2Ch]@65
  int v37; // [sp+7Ch] [bp-28h]@65
  int v38; // [sp+80h] [bp-24h]@65
  int v39; // [sp+84h] [bp-20h]@65
  int v40; // [sp+88h] [bp-1Ch]@65
  int v41; // [sp+8Ch] [bp-18h]@65
  int v42; // [sp+90h] [bp-14h]@65
  int v43; // [sp+94h] [bp-10h]@65
  int v44; // [sp+98h] [bp-Ch]@65
  int v45; // [sp+9Ch] [bp-8h]@65
  int v46; // [sp+A0h] [bp-4h]@65

  v6 = *(_DWORD *)(a1 + 116);
  if ( v6 )
  {
    if ( v6 != 1 )
    {
      if ( v6 == 2 )
      {
        if ( Quote_X_Position >= *(_DWORD *)(a1 + 8) )
          *(_DWORD *)(a1 + 76) = 2;
        else
          *(_DWORD *)(a1 + 76) = 0;
        if ( *(_DWORD *)(a1 + 12) <= Quote_Y_Position + 0x4000 )
        {
          if ( Quote_X_Position < *(_DWORD *)(a1 + 8) )
            *(_DWORD *)(a1 + 16) -= 16;
          if ( Quote_X_Position > *(_DWORD *)(a1 + 8) )
            *(_DWORD *)(a1 + 16) += 16;
        }
        else
        {
          if ( Quote_X_Position < *(_DWORD *)(a1 + 8) )
            *(_DWORD *)(a1 + 16) += 16;
          if ( Quote_X_Position > *(_DWORD *)(a1 + 8) )
            *(_DWORD *)(a1 + 16) -= 16;
        }
        if ( Quote_Y_Position < *(_DWORD *)(a1 + 12) )
          *(_DWORD *)(a1 + 20) -= 16;
        if ( Quote_Y_Position > *(_DWORD *)(a1 + 12) )
          *(_DWORD *)(a1 + 20) += 16;
        if ( *(_BYTE *)(a1 + 156) )
        {
          *(_DWORD *)(a1 + 20) += 32;
          *(_DWORD *)(a1 + 16) = 0;
        }
      }
      goto LABEL_45;
    }
  }
  else
  {
    if ( *(_DWORD *)(a1 + 8) - 163840 >= Quote_X_Position
      || *(_DWORD *)(a1 + 8) + 163840 <= Quote_X_Position
      || *(_DWORD *)(a1 + 12) - 163840 >= Quote_Y_Position
      || *(_DWORD *)(a1 + 12) + 163840 <= Quote_Y_Position )
    {
      goto LABEL_45;
    }
    *(_DWORD *)(a1 + 32) = *(_DWORD *)(a1 + 8);
    *(_DWORD *)(a1 + 36) = *(_DWORD *)(a1 + 12);
    *(_DWORD *)(a1 + 20) = 1024;
    *(_DWORD *)(a1 + 116) = 1;
    NPC_Create(49, 0, 0, 0, 0, 0, a1, 0);
  }
  if ( Quote_X_Position >= *(_DWORD *)(a1 + 8) )
    *(_DWORD *)(a1 + 76) = 2;
  else
    *(_DWORD *)(a1 + 76) = 0;
  if ( *(_DWORD *)(a1 + 36) < *(_DWORD *)(a1 + 12) )
    *(_DWORD *)(a1 + 20) -= 10;
  if ( *(_DWORD *)(a1 + 36) > *(_DWORD *)(a1 + 12) )
    *(_DWORD *)(a1 + 20) += 10;
  if ( *(_DWORD *)(a1 + 20) > 512 )
    *(_DWORD *)(a1 + 20) = 512;
  if ( *(_DWORD *)(a1 + 20) < -512 )
    *(_DWORD *)(a1 + 20) = -512;
  if ( *(_DWORD *)(a1 + 108) >= 10 )
    *(_DWORD *)(a1 + 116) = 2;
  else
    ++*(_DWORD *)(a1 + 108);
LABEL_45:
  if ( *(_DWORD *)(a1 + 16) < 0 && *(_DWORD *)(a1 + 4) & 1 )
    *(_DWORD *)(a1 + 16) = 256;
  if ( *(_DWORD *)(a1 + 16) > 0 && *(_DWORD *)(a1 + 4) & 4 )
    *(_DWORD *)(a1 + 16) = -256;
  if ( *(_DWORD *)(a1 + 20) < 0 && *(_DWORD *)(a1 + 4) & 2 )
    *(_DWORD *)(a1 + 20) = 256;
  if ( *(_DWORD *)(a1 + 20) > 0 && *(_DWORD *)(a1 + 4) & 8 )
    *(_DWORD *)(a1 + 20) = -256;
  if ( *(_DWORD *)(a1 + 16) > 1024 )
    *(_DWORD *)(a1 + 16) = 1024;
  if ( *(_DWORD *)(a1 + 16) < -1024 )
    *(_DWORD *)(a1 + 16) = -1024;
  if ( *(_DWORD *)(a1 + 20) > 512 )
    *(_DWORD *)(a1 + 20) = 512;
  if ( *(_DWORD *)(a1 + 20) < -512 )
    *(_DWORD *)(a1 + 20) = -512;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  v27 = 96;
  v28 = 80;
  v29 = 128;
  v30 = 112;
  v31 = 128;
  v32 = 80;
  v33 = 160;
  v34 = 112;
  v35 = 160;
  v36 = 80;
  v37 = 192;
  v38 = 112;
  v39 = 192;
  v40 = 80;
  v41 = 224;
  v42 = 112;
  v43 = 224;
  v44 = 80;
  v45 = 256;
  v46 = 112;
  v7 = 96;
  v8 = 112;
  v9 = 128;
  v10 = 144;
  v11 = 128;
  v12 = 112;
  v13 = 160;
  v14 = 144;
  v15 = 160;
  v16 = 112;
  v17 = 192;
  v18 = 144;
  v19 = 192;
  v20 = 112;
  v21 = 224;
  v22 = 144;
  v23 = 224;
  v24 = 112;
  v25 = 256;
  v26 = 144;
  if ( *(_BYTE *)(a1 + 156) )
  {
    *(_DWORD *)(a1 + 104) = 4;
  }
  else if ( *(_DWORD *)(a1 + 116) != 2 || *(_DWORD *)(a1 + 12) >= Quote_Y_Position - 0x4000 )
  {
    if ( *(_DWORD *)(a1 + 116) )
    {
      if ( ++*(_DWORD *)(a1 + 100) > 1 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 1 )
        *(_DWORD *)(a1 + 104) = 0;
    }
  }
  else
  {
    *(_DWORD *)(a1 + 104) = 0;
  }
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v7 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    *(_DWORD *)(v5 + 8) = v4[2];
    result = v4[3];
    *(_DWORD *)(v5 + 12) = result;
  }
  else
  {
    v1 = &v27 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    *(_DWORD *)(v2 + 8) = v1[2];
    result = v1[3];
    *(_DWORD *)(v2 + 12) = result;
  }
  return result;
}

//----- (00430780) --------------------------------------------------------
// NPC 52 : Sitting Blue Bot
int __cdecl NPC52_Sitting_Blue_Bot(int a1)
{
  int result; // eax@1

  result = a1 + 84;
  *(_DWORD *)result = 240;
  *(_DWORD *)(result + 4) = 96;
  *(_DWORD *)(result + 8) = 256;
  *(_DWORD *)(result + 12) = 112;
  return result;
}

//----- (004307D0) --------------------------------------------------------
int __cdecl NPC53(void *a1)
{
  int result; // eax@2
  int v2; // esi@17
  int v3; // esi@17
  int *v4; // eax@23
  char *v5; // ecx@23
  int *v6; // eax@24
  char *v7; // ecx@24
  int v8; // [sp+4h] [bp-48h]@3
  int v9; // [sp+8h] [bp-44h]@1
  int v10; // [sp+Ch] [bp-40h]@1
  int v11; // [sp+10h] [bp-3Ch]@1
  int v12; // [sp+14h] [bp-38h]@1
  int v13; // [sp+18h] [bp-34h]@1
  int v14; // [sp+1Ch] [bp-30h]@1
  int v15; // [sp+20h] [bp-2Ch]@1
  int v16; // [sp+24h] [bp-28h]@1
  int v17; // [sp+28h] [bp-24h]@1
  int v18; // [sp+2Ch] [bp-20h]@1
  int v19; // [sp+30h] [bp-1Ch]@1
  int v20; // [sp+34h] [bp-18h]@1
  int v21; // [sp+38h] [bp-14h]@1
  int v22; // [sp+3Ch] [bp-10h]@1
  int v23; // [sp+40h] [bp-Ch]@1
  int v24; // [sp+44h] [bp-8h]@1
  unsigned __int8 v25; // [sp+4Bh] [bp-1h]@17

  v17 = 0;
  v18 = 128;
  v19 = 24;
  v20 = 144;
  v21 = 24;
  v22 = 128;
  v23 = 48;
  v24 = 144;
  v9 = 48;
  v10 = 128;
  v11 = 72;
  v12 = 144;
  v13 = 72;
  v14 = 128;
  v15 = 96;
  v16 = 144;
  if ( *(_DWORD *)(*((_DWORD *)a1 + 42) + 40) == 3 )
  {
    sub_46F760(a1);
    return sub_46F150(*((_DWORD *)a1 + 2), *((_DWORD *)a1 + 3), *((_DWORD *)a1 + 37), 4);
  }
  v8 = *((_DWORD *)a1 + 29);
  if ( !v8 )
  {
    *((_DWORD *)a1 + 29) = 1;
    *((_DWORD *)a1 + 27) = 10;
LABEL_7:
    if ( !*((_DWORD *)a1 + 19) && *((_DWORD *)a1 + 1) & 0x20 )
    {
      *(_DWORD *)(*((_DWORD *)a1 + 42) + 12) -= 1024;
      *(_DWORD *)(*((_DWORD *)a1 + 42) + 20) -= 256;
    }
    if ( *((_DWORD *)a1 + 19) == 2 && *((_DWORD *)a1 + 1) & 0x10 )
    {
      *(_DWORD *)(*((_DWORD *)a1 + 42) + 12) -= 1024;
      *(_DWORD *)(*((_DWORD *)a1 + 42) + 20) -= 256;
    }
    if ( *((_DWORD *)a1 + 1) & 8 )
    {
      *(_DWORD *)(*((_DWORD *)a1 + 42) + 12) -= 1024;
      *(_DWORD *)(*((_DWORD *)a1 + 42) + 20) -= 256;
      if ( *(_DWORD *)(*((_DWORD *)a1 + 42) + 76) )
        *(_DWORD *)(*((_DWORD *)a1 + 42) + 16) += 128;
      else
        *(_DWORD *)(*((_DWORD *)a1 + 42) + 16) -= 128;
    }
    v25 = *(_BYTE *)(*((_DWORD *)a1 + 42) + 112) + *((_BYTE *)a1 + 16);
    v2 = *((_DWORD *)a1 + 42);
    *((_DWORD *)a1 + 2) = *(_DWORD *)(v2 + 8) + *((_DWORD *)a1 + 27) * COS_function(v25);
    v3 = *((_DWORD *)a1 + 42);
    *((_DWORD *)a1 + 3) = *(_DWORD *)(v3 + 12) + *((_DWORD *)a1 + 27) * SIN_function(v25);
    *((_DWORD *)a1 + 19) = *(_DWORD *)(*((_DWORD *)a1 + 42) + 76);
    goto LABEL_18;
  }
  if ( v8 == 1 )
    goto LABEL_7;
LABEL_18:
  *((_DWORD *)a1 + 19) = *(_DWORD *)(*((_DWORD *)a1 + 42) + 76);
  *((_DWORD *)a1 + 26) = (signed int)v25 < 20 || (signed int)v25 > 108;
  if ( *((_DWORD *)a1 + 19) )
  {
    v6 = &v9 + 4 * *((_DWORD *)a1 + 26);
    v7 = (char *)a1 + 84;
    *(_DWORD *)v7 = *v6;
    *((_DWORD *)v7 + 1) = v6[1];
    *((_DWORD *)v7 + 2) = v6[2];
    result = v6[3];
    *((_DWORD *)v7 + 3) = result;
  }
  else
  {
    v4 = &v17 + 4 * *((_DWORD *)a1 + 26);
    v5 = (char *)a1 + 84;
    *(_DWORD *)v5 = *v4;
    *((_DWORD *)v5 + 1) = v4[1];
    *((_DWORD *)v5 + 2) = v4[2];
    result = v4[3];
    *((_DWORD *)v5 + 3) = result;
  }
  return result;
}

//----- (00430B00) --------------------------------------------------------
char *__cdecl NPC54(void *a1)
{
  int *v1; // edx@37
  char *result; // eax@37
  int *v3; // edx@38
  int v4; // [sp+0h] [bp-68h]@1
  int v5; // [sp+4h] [bp-64h]@1
  int v6; // [sp+8h] [bp-60h]@1
  int v7; // [sp+Ch] [bp-5Ch]@1
  int v8; // [sp+10h] [bp-58h]@1
  int v9; // [sp+14h] [bp-54h]@1
  int v10; // [sp+18h] [bp-50h]@1
  int v11; // [sp+1Ch] [bp-4Ch]@1
  int v12; // [sp+20h] [bp-48h]@1
  int v13; // [sp+24h] [bp-44h]@1
  int v14; // [sp+28h] [bp-40h]@1
  int v15; // [sp+2Ch] [bp-3Ch]@1
  int v16; // [sp+30h] [bp-38h]@1
  int v17; // [sp+34h] [bp-34h]@1
  int v18; // [sp+38h] [bp-30h]@1
  int v19; // [sp+3Ch] [bp-2Ch]@1
  int v20; // [sp+40h] [bp-28h]@1
  int v21; // [sp+44h] [bp-24h]@1
  int v22; // [sp+48h] [bp-20h]@1
  int v23; // [sp+4Ch] [bp-1Ch]@1
  int v24; // [sp+50h] [bp-18h]@1
  int v25; // [sp+54h] [bp-14h]@1
  int v26; // [sp+58h] [bp-10h]@1
  int v27; // [sp+5Ch] [bp-Ch]@1
  int v28; // [sp+60h] [bp-8h]@1
  unsigned __int8 v29; // [sp+67h] [bp-1h]@6

  v17 = 0;
  v18 = 80;
  v19 = 32;
  v20 = 104;
  v21 = 32;
  v22 = 80;
  v23 = 64;
  v24 = 104;
  v25 = 64;
  v26 = 80;
  v27 = 96;
  v28 = 104;
  v5 = 0;
  v6 = 104;
  v7 = 32;
  v8 = 128;
  v9 = 32;
  v10 = 104;
  v11 = 64;
  v12 = 128;
  v13 = 64;
  v14 = 104;
  v15 = 96;
  v16 = 128;
  v4 = *((_DWORD *)a1 + 29);
  if ( v4 )
  {
    if ( v4 != 1 )
    {
      if ( v4 == 2 )
      {
        ++*((_DWORD *)a1 + 30);
        *((_BYTE *)a1 + 156) += *((_BYTE *)a1 + 120);
        if ( *((_DWORD *)a1 + 30) > 50 )
        {
          sub_46F760(a1);
          sub_46F150(*((_DWORD *)a1 + 2), *((_DWORD *)a1 + 3), *((_DWORD *)a1 + 37), 8);
          Play_Sound_Effect(25, 1);
        }
      }
      goto LABEL_28;
    }
  }
  else
  {
    NPC_Create(53, 0, 0, 0, 0, *((_DWORD *)a1 + 19), (int)a1, 256);
    NPC_Create(53, 0, 0, 128, 0, *((_DWORD *)a1 + 19), (int)a1, 0);
    *((_DWORD *)a1 + 29) = 1;
    *((_DWORD *)a1 + 26) = 1;
  }
  v29 = *((_BYTE *)a1 + 112);
  if ( *((_DWORD *)a1 + 19) )
    v29 += 6;
  else
    v29 -= 6;
  *((_DWORD *)a1 + 28) = v29;
  if ( *((_DWORD *)a1 + 1) & 8 )
  {
    *((_DWORD *)a1 + 4) = 3 * *((_DWORD *)a1 + 4) / 4;
    if ( ++*((_DWORD *)a1 + 30) > 60 )
    {
      *((_DWORD *)a1 + 29) = 2;
      *((_DWORD *)a1 + 30) = 0;
    }
  }
  else
  {
    *((_DWORD *)a1 + 30) = 0;
  }
  if ( *((_DWORD *)a1 + 19) || !(*((_DWORD *)a1 + 1) & 1) )
  {
    if ( *((_DWORD *)a1 + 19) == 2 && *((_DWORD *)a1 + 1) & 4 )
    {
      if ( ++*((_DWORD *)a1 + 27) > 8 )
      {
        *((_DWORD *)a1 + 19) = 0;
        *((_DWORD *)a1 + 4) = -*((_DWORD *)a1 + 4);
      }
    }
    else
    {
      *((_DWORD *)a1 + 27) = 0;
    }
  }
  else if ( ++*((_DWORD *)a1 + 27) > 8 )
  {
    *((_DWORD *)a1 + 19) = 2;
    *((_DWORD *)a1 + 4) = -*((_DWORD *)a1 + 4);
  }
LABEL_28:
  *((_DWORD *)a1 + 5) += 128;
  if ( *((_DWORD *)a1 + 4) > 767 )
    *((_DWORD *)a1 + 4) = 767;
  if ( *((_DWORD *)a1 + 4) < -767 )
    *((_DWORD *)a1 + 4) = -767;
  if ( *((_DWORD *)a1 + 5) > 767 )
    *((_DWORD *)a1 + 5) = 767;
  if ( *((_DWORD *)a1 + 5) < -767 )
    *((_DWORD *)a1 + 5) = -767;
  *((_DWORD *)a1 + 2) += *((_DWORD *)a1 + 4);
  *((_DWORD *)a1 + 3) += *((_DWORD *)a1 + 5);
  if ( *((_DWORD *)a1 + 19) )
  {
    v3 = &v5 + 4 * *((_DWORD *)a1 + 26);
    result = (char *)a1 + 84;
    *(_DWORD *)result = *v3;
    *((_DWORD *)result + 1) = v3[1];
    *((_DWORD *)result + 2) = v3[2];
    *((_DWORD *)result + 3) = v3[3];
  }
  else
  {
    v1 = &v17 + 4 * *((_DWORD *)a1 + 26);
    result = (char *)a1 + 84;
    *(_DWORD *)result = *v1;
    *((_DWORD *)result + 1) = v1[1];
    *((_DWORD *)result + 2) = v1[2];
    *((_DWORD *)result + 3) = v1[3];
  }
  return result;
}

//----- (00430EB0) --------------------------------------------------------
int __cdecl NPC55(int a1)
{
  int *v1; // eax@16
  int v2; // ecx@16
  int result; // eax@16
  int *v4; // eax@17
  int v5; // ecx@17
  int v6; // [sp+4h] [bp-C0h]@1
  int v7; // [sp+8h] [bp-BCh]@1
  int v8; // [sp+Ch] [bp-B8h]@1
  int v9; // [sp+10h] [bp-B4h]@1
  int v10; // [sp+14h] [bp-B0h]@1
  int v11; // [sp+18h] [bp-ACh]@1
  int v12; // [sp+1Ch] [bp-A8h]@1
  int v13; // [sp+20h] [bp-A4h]@1
  int v14; // [sp+24h] [bp-A0h]@1
  int v15; // [sp+28h] [bp-9Ch]@1
  int v16; // [sp+2Ch] [bp-98h]@1
  int v17; // [sp+30h] [bp-94h]@1
  int v18; // [sp+34h] [bp-90h]@1
  int v19; // [sp+38h] [bp-8Ch]@1
  int v20; // [sp+3Ch] [bp-88h]@1
  int v21; // [sp+40h] [bp-84h]@1
  int v22; // [sp+44h] [bp-80h]@1
  int v23; // [sp+48h] [bp-7Ch]@1
  int v24; // [sp+4Ch] [bp-78h]@1
  int v25; // [sp+50h] [bp-74h]@1
  int v26; // [sp+54h] [bp-70h]@1
  int v27; // [sp+58h] [bp-6Ch]@1
  int v28; // [sp+5Ch] [bp-68h]@1
  int v29; // [sp+60h] [bp-64h]@1
  int v30; // [sp+64h] [bp-60h]@1
  int v31; // [sp+68h] [bp-5Ch]@1
  int v32; // [sp+6Ch] [bp-58h]@1
  int v33; // [sp+70h] [bp-54h]@1
  int v34; // [sp+74h] [bp-50h]@1
  int v35; // [sp+78h] [bp-4Ch]@1
  int v36; // [sp+7Ch] [bp-48h]@1
  int v37; // [sp+80h] [bp-44h]@1
  int v38; // [sp+84h] [bp-40h]@1
  int v39; // [sp+88h] [bp-3Ch]@1
  int v40; // [sp+8Ch] [bp-38h]@1
  int v41; // [sp+90h] [bp-34h]@1
  int v42; // [sp+94h] [bp-30h]@1
  int v43; // [sp+98h] [bp-2Ch]@1
  int v44; // [sp+9Ch] [bp-28h]@1
  int v45; // [sp+A0h] [bp-24h]@1
  int v46; // [sp+A4h] [bp-20h]@1
  int v47; // [sp+A8h] [bp-1Ch]@1
  int v48; // [sp+ACh] [bp-18h]@1
  int v49; // [sp+B0h] [bp-14h]@1
  int v50; // [sp+B4h] [bp-10h]@1
  int v51; // [sp+B8h] [bp-Ch]@1
  int v52; // [sp+BCh] [bp-8h]@1
  int v53; // [sp+C0h] [bp-4h]@1

  v30 = 192;
  v31 = 192;
  v32 = 208;
  v33 = 216;
  v34 = 208;
  v35 = 192;
  v36 = 224;
  v37 = 216;
  v38 = 192;
  v39 = 192;
  v40 = 208;
  v41 = 216;
  v42 = 224;
  v43 = 192;
  v44 = 240;
  v45 = 216;
  v46 = 192;
  v47 = 192;
  v48 = 208;
  v49 = 216;
  v50 = 240;
  v51 = 192;
  v52 = 256;
  v53 = 216;
  v6 = 192;
  v7 = 216;
  v8 = 208;
  v9 = 240;
  v10 = 208;
  v11 = 216;
  v12 = 224;
  v13 = 240;
  v14 = 192;
  v15 = 216;
  v16 = 208;
  v17 = 240;
  v18 = 224;
  v19 = 216;
  v20 = 240;
  v21 = 240;
  v22 = 192;
  v23 = 216;
  v24 = 208;
  v25 = 240;
  v26 = 240;
  v27 = 216;
  v28 = 256;
  v29 = 240;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 100) = 0;
      break;
    case 3:
      *(_DWORD *)(a1 + 116) = 4;
      *(_DWORD *)(a1 + 104) = 1;
      *(_DWORD *)(a1 + 100) = 0;
      goto LABEL_4;
    case 4:
LABEL_4:
      if ( ++*(_DWORD *)(a1 + 100) > 4 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 4 )
        *(_DWORD *)(a1 + 104) = 1;
      if ( *(_DWORD *)(a1 + 76) )
        *(_DWORD *)(a1 + 8) += 512;
      else
        *(_DWORD *)(a1 + 8) -= 512;
      break;
    case 5:
      *(_DWORD *)(a1 + 104) = 5;
      break;
    default:
      break;
  }
  *(_DWORD *)(a1 + 20) += 32;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v6 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    *(_DWORD *)(v5 + 8) = v4[2];
    result = v4[3];
    *(_DWORD *)(v5 + 12) = result;
  }
  else
  {
    v1 = &v30 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    *(_DWORD *)(v2 + 8) = v1[2];
    result = v1[3];
    *(_DWORD *)(v2 + 12) = result;
  }
  return result;
}

//----- (004311D0) --------------------------------------------------------
int __cdecl NPC56(int a1)
{
  int *v1; // edx@42
  int result; // eax@42
  int *v3; // edx@43
  int v4; // [sp+4h] [bp-60h]@1
  int v5; // [sp+8h] [bp-5Ch]@1
  int v6; // [sp+Ch] [bp-58h]@1
  int v7; // [sp+10h] [bp-54h]@1
  int v8; // [sp+14h] [bp-50h]@1
  int v9; // [sp+18h] [bp-4Ch]@1
  int v10; // [sp+1Ch] [bp-48h]@1
  int v11; // [sp+20h] [bp-44h]@1
  int v12; // [sp+24h] [bp-40h]@1
  int v13; // [sp+28h] [bp-3Ch]@1
  int v14; // [sp+2Ch] [bp-38h]@1
  int v15; // [sp+30h] [bp-34h]@1
  int v16; // [sp+34h] [bp-30h]@1
  int v17; // [sp+38h] [bp-2Ch]@1
  int v18; // [sp+3Ch] [bp-28h]@1
  int v19; // [sp+40h] [bp-24h]@1
  int v20; // [sp+44h] [bp-20h]@1
  int v21; // [sp+48h] [bp-1Ch]@1
  int v22; // [sp+4Ch] [bp-18h]@1
  int v23; // [sp+50h] [bp-14h]@1
  int v24; // [sp+54h] [bp-10h]@1
  int v25; // [sp+58h] [bp-Ch]@1
  int v26; // [sp+5Ch] [bp-8h]@1
  int v27; // [sp+60h] [bp-4h]@1

  v16 = 0;
  v17 = 144;
  v18 = 16;
  v19 = 160;
  v20 = 16;
  v21 = 144;
  v22 = 32;
  v23 = 160;
  v24 = 32;
  v25 = 144;
  v26 = 48;
  v27 = 160;
  v4 = 0;
  v5 = 160;
  v6 = 16;
  v7 = 176;
  v8 = 16;
  v9 = 160;
  v10 = 32;
  v11 = 176;
  v12 = 32;
  v13 = 160;
  v14 = 48;
  v15 = 176;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      if ( *(_DWORD *)(a1 + 76) )
        *(_DWORD *)(a1 + 116) = 3;
      else
        *(_DWORD *)(a1 + 116) = 1;
      break;
    case 1:
      *(_DWORD *)(a1 + 16) -= 16;
      if ( *(_DWORD *)(a1 + 16) < -1024 )
        *(_DWORD *)(a1 + 16) = -1024;
      if ( *(_BYTE *)(a1 + 156) )
        *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16) / 2;
      else
        *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
      if ( ++*(_DWORD *)(a1 + 100) > 1 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 2 )
        *(_DWORD *)(a1 + 104) = 1;
      if ( *(_DWORD *)(a1 + 4) & 1 )
      {
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 0;
        *(_DWORD *)(a1 + 16) = 0;
        *(_DWORD *)(a1 + 76) = 2;
      }
      break;
    case 2:
      if ( *(_DWORD *)(a1 + 8) < Quote_X_Position
        && *(_DWORD *)(a1 + 8) > Quote_X_Position - 0x20000
        && *(_DWORD *)(a1 + 12) < Quote_Y_Position + 4096
        && *(_DWORD *)(a1 + 12) > Quote_Y_Position - 4096 )
      {
        *(_DWORD *)(a1 + 116) = 3;
        *(_DWORD *)(a1 + 100) = 0;
        *(_DWORD *)(a1 + 104) = 1;
      }
      break;
    case 3:
      *(_DWORD *)(a1 + 16) += 16;
      if ( *(_DWORD *)(a1 + 16) > 1024 )
        *(_DWORD *)(a1 + 16) = 1024;
      if ( *(_BYTE *)(a1 + 156) )
        *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16) / 2;
      else
        *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
      if ( ++*(_DWORD *)(a1 + 100) > 1 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 2 )
        *(_DWORD *)(a1 + 104) = 1;
      if ( *(_DWORD *)(a1 + 4) & 4 )
      {
        *(_DWORD *)(a1 + 116) = 4;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 0;
        *(_DWORD *)(a1 + 16) = 0;
        *(_DWORD *)(a1 + 76) = 0;
      }
      break;
    case 4:
      if ( *(_DWORD *)(a1 + 8) < Quote_X_Position + 0x20000
        && *(_DWORD *)(a1 + 8) > Quote_X_Position
        && *(_DWORD *)(a1 + 12) < Quote_Y_Position + 4096
        && *(_DWORD *)(a1 + 12) > Quote_Y_Position - 4096 )
      {
        *(_DWORD *)(a1 + 116) = 1;
        *(_DWORD *)(a1 + 100) = 0;
        *(_DWORD *)(a1 + 104) = 1;
      }
      break;
    default:
      break;
  }
  if ( *(_DWORD *)(a1 + 76) )
  {
    v3 = &v4 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v3;
    *(_DWORD *)(result + 4) = v3[1];
    *(_DWORD *)(result + 8) = v3[2];
    *(_DWORD *)(result + 12) = v3[3];
  }
  else
  {
    v1 = &v16 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v1;
    *(_DWORD *)(result + 4) = v1[1];
    *(_DWORD *)(result + 8) = v1[2];
    *(_DWORD *)(result + 12) = v1[3];
  }
  return result;
}

//----- (004315E0) --------------------------------------------------------
int __cdecl NPC57(int a1)
{
  int *v1; // edx@77
  int result; // eax@77
  int *v3; // edx@78
  int v4; // [sp+0h] [bp-ACh]@1
  int v5; // [sp+4h] [bp-A8h]@70
  int v6; // [sp+8h] [bp-A4h]@70
  int v7; // [sp+Ch] [bp-A0h]@70
  int v8; // [sp+10h] [bp-9Ch]@70
  int v9; // [sp+14h] [bp-98h]@70
  int v10; // [sp+18h] [bp-94h]@70
  int v11; // [sp+1Ch] [bp-90h]@70
  int v12; // [sp+20h] [bp-8Ch]@70
  int v13; // [sp+24h] [bp-88h]@70
  int v14; // [sp+28h] [bp-84h]@70
  int v15; // [sp+2Ch] [bp-80h]@70
  int v16; // [sp+30h] [bp-7Ch]@70
  int v17; // [sp+34h] [bp-78h]@70
  int v18; // [sp+38h] [bp-74h]@70
  int v19; // [sp+3Ch] [bp-70h]@70
  int v20; // [sp+40h] [bp-6Ch]@70
  int v21; // [sp+44h] [bp-68h]@70
  int v22; // [sp+48h] [bp-64h]@70
  int v23; // [sp+4Ch] [bp-60h]@70
  int v24; // [sp+50h] [bp-5Ch]@70
  int v25; // [sp+54h] [bp-58h]@70
  int v26; // [sp+58h] [bp-54h]@70
  int v27; // [sp+5Ch] [bp-50h]@70
  int v28; // [sp+60h] [bp-4Ch]@70
  int v29; // [sp+64h] [bp-48h]@70
  int v30; // [sp+68h] [bp-44h]@70
  int v31; // [sp+6Ch] [bp-40h]@70
  int v32; // [sp+70h] [bp-3Ch]@70
  int v33; // [sp+74h] [bp-38h]@70
  int v34; // [sp+78h] [bp-34h]@70
  int v35; // [sp+7Ch] [bp-30h]@70
  int v36; // [sp+80h] [bp-2Ch]@70
  int v37; // [sp+84h] [bp-28h]@70
  int v38; // [sp+88h] [bp-24h]@70
  int v39; // [sp+8Ch] [bp-20h]@70
  int v40; // [sp+90h] [bp-1Ch]@70
  int v41; // [sp+94h] [bp-18h]@70
  int v42; // [sp+98h] [bp-14h]@70
  int v43; // [sp+9Ch] [bp-10h]@70
  int v44; // [sp+A0h] [bp-Ch]@70
  char v45; // [sp+ABh] [bp-1h]@5

  v4 = *(_DWORD *)(a1 + 116);
  if ( v4 )
  {
    if ( v4 != 1 )
    {
      if ( v4 == 2 )
      {
        if ( Quote_X_Position >= *(_DWORD *)(a1 + 8) )
          *(_DWORD *)(a1 + 76) = 2;
        else
          *(_DWORD *)(a1 + 76) = 0;
        if ( *(_DWORD *)(a1 + 12) <= Quote_Y_Position + 24576 )
        {
          if ( Quote_X_Position < *(_DWORD *)(a1 + 8) )
            *(_DWORD *)(a1 + 16) -= 16;
          if ( Quote_X_Position > *(_DWORD *)(a1 + 8) )
            *(_DWORD *)(a1 + 16) += 16;
        }
        else
        {
          if ( Quote_X_Position < *(_DWORD *)(a1 + 8) )
            *(_DWORD *)(a1 + 16) += 16;
          if ( Quote_X_Position > *(_DWORD *)(a1 + 8) )
            *(_DWORD *)(a1 + 16) -= 16;
        }
        if ( Quote_Y_Position < *(_DWORD *)(a1 + 12) )
          *(_DWORD *)(a1 + 20) -= 16;
        if ( Quote_Y_Position > *(_DWORD *)(a1 + 12) )
          *(_DWORD *)(a1 + 20) += 16;
        if ( *(_BYTE *)(a1 + 156) )
        {
          *(_DWORD *)(a1 + 20) += 32;
          *(_DWORD *)(a1 + 16) = 0;
        }
        if ( *(_DWORD *)(a1 + 16) < 0 && *(_DWORD *)(a1 + 4) & 1 )
          *(_DWORD *)(a1 + 16) = 512;
        if ( *(_DWORD *)(a1 + 16) > 0 && *(_DWORD *)(a1 + 4) & 4 )
          *(_DWORD *)(a1 + 16) = -512;
        if ( *(_DWORD *)(a1 + 20) < 0 && *(_DWORD *)(a1 + 4) & 2 )
          *(_DWORD *)(a1 + 20) = 512;
        if ( *(_DWORD *)(a1 + 20) > 0 && *(_DWORD *)(a1 + 4) & 8 )
          *(_DWORD *)(a1 + 20) = -512;
        if ( *(_DWORD *)(a1 + 16) > 1535 )
          *(_DWORD *)(a1 + 16) = 1535;
        if ( *(_DWORD *)(a1 + 16) < -1535 )
          *(_DWORD *)(a1 + 16) = -1535;
        if ( *(_DWORD *)(a1 + 20) > 1535 )
          *(_DWORD *)(a1 + 20) = 1535;
        if ( *(_DWORD *)(a1 + 20) < -1535 )
          *(_DWORD *)(a1 + 20) = -1535;
      }
      goto LABEL_70;
    }
  }
  else
  {
    v45 = RNG_Range(0, 255);
    *(_DWORD *)(a1 + 16) = COS_function(v45);
    *(_DWORD *)(a1 + 32) = *(_DWORD *)(a1 + 8) + 8 * COS_function(v45 + 64);
    v45 = RNG_Range(0, 255);
    *(_DWORD *)(a1 + 20) = SIN_function(v45);
    v45 += 64;
    *(_DWORD *)(a1 + 36) = *(_DWORD *)(a1 + 12) + 8 * SIN_function(v45);
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 108) = 120;
    *(_DWORD *)(a1 + 104) = RNG_Range(0, 1);
    *(_DWORD *)(a1 + 100) = RNG_Range(0, 4);
  }
  if ( Quote_X_Position >= *(_DWORD *)(a1 + 8) )
    *(_DWORD *)(a1 + 76) = 2;
  else
    *(_DWORD *)(a1 + 76) = 0;
  if ( *(_DWORD *)(a1 + 32) < *(_DWORD *)(a1 + 8) )
    *(_DWORD *)(a1 + 16) -= 16;
  if ( *(_DWORD *)(a1 + 32) > *(_DWORD *)(a1 + 8) )
    *(_DWORD *)(a1 + 16) += 16;
  if ( *(_DWORD *)(a1 + 36) < *(_DWORD *)(a1 + 12) )
    *(_DWORD *)(a1 + 20) -= 16;
  if ( *(_DWORD *)(a1 + 36) > *(_DWORD *)(a1 + 12) )
    *(_DWORD *)(a1 + 20) += 16;
  if ( *(_DWORD *)(a1 + 16) > 512 )
    *(_DWORD *)(a1 + 16) = 512;
  if ( *(_DWORD *)(a1 + 16) < -512 )
    *(_DWORD *)(a1 + 16) = -512;
  if ( *(_DWORD *)(a1 + 20) > 512 )
    *(_DWORD *)(a1 + 20) = 512;
  if ( *(_DWORD *)(a1 + 20) < -512 )
    *(_DWORD *)(a1 + 20) = -512;
  if ( *(_BYTE *)(a1 + 156) )
  {
    *(_DWORD *)(a1 + 116) = 2;
    *(_DWORD *)(a1 + 120) = 0;
    if ( *(_DWORD *)(a1 + 76) == 2 )
      *(_DWORD *)(a1 + 16) = -512;
    else
      *(_DWORD *)(a1 + 16) = 512;
    *(_DWORD *)(a1 + 20) = 0;
  }
LABEL_70:
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  v25 = 96;
  v26 = 80;
  v27 = 128;
  v28 = 112;
  v29 = 128;
  v30 = 80;
  v31 = 160;
  v32 = 112;
  v33 = 160;
  v34 = 80;
  v35 = 192;
  v36 = 112;
  v37 = 192;
  v38 = 80;
  v39 = 224;
  v40 = 112;
  v41 = 224;
  v42 = 80;
  v43 = 256;
  v44 = 112;
  v5 = 96;
  v6 = 112;
  v7 = 128;
  v8 = 144;
  v9 = 128;
  v10 = 112;
  v11 = 160;
  v12 = 144;
  v13 = 160;
  v14 = 112;
  v15 = 192;
  v16 = 144;
  v17 = 192;
  v18 = 112;
  v19 = 224;
  v20 = 144;
  v21 = 224;
  v22 = 112;
  v23 = 256;
  v24 = 144;
  if ( *(_BYTE *)(a1 + 156) )
  {
    *(_DWORD *)(a1 + 104) = 4;
  }
  else
  {
    if ( ++*(_DWORD *)(a1 + 100) > 1 )
    {
      *(_DWORD *)(a1 + 100) = 0;
      ++*(_DWORD *)(a1 + 104);
    }
    if ( *(_DWORD *)(a1 + 104) > 1 )
      *(_DWORD *)(a1 + 104) = 0;
  }
  if ( *(_DWORD *)(a1 + 76) )
  {
    v3 = &v5 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v3;
    *(_DWORD *)(result + 4) = v3[1];
    *(_DWORD *)(result + 8) = v3[2];
    *(_DWORD *)(result + 12) = v3[3];
  }
  else
  {
    v1 = &v25 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v1;
    *(_DWORD *)(result + 4) = v1[1];
    *(_DWORD *)(result + 8) = v1[2];
    *(_DWORD *)(result + 12) = v1[3];
  }
  return result;
}

//----- (00431C20) --------------------------------------------------------
int __cdecl NPC58(int a1)
{
  int result; // eax@7
  unsigned __int8 v2; // ST2F_1@42
  char v3; // ST2F_1@42
  int Y_Velocity; // ST24_4@42
  int X_Velocity; // ST28_4@42
  int *v6; // edx@54
  int *v7; // edx@55
  int v8; // [sp+0h] [bp-70h]@1
  int v9; // [sp+10h] [bp-60h]@1
  int v10; // [sp+14h] [bp-5Ch]@1
  int v11; // [sp+18h] [bp-58h]@1
  int v12; // [sp+1Ch] [bp-54h]@1
  int v13; // [sp+20h] [bp-50h]@1
  int v14; // [sp+24h] [bp-4Ch]@1
  int v15; // [sp+28h] [bp-48h]@1
  int v16; // [sp+2Ch] [bp-44h]@1
  int v17; // [sp+30h] [bp-40h]@1
  int v18; // [sp+34h] [bp-3Ch]@1
  int v19; // [sp+38h] [bp-38h]@1
  int v20; // [sp+3Ch] [bp-34h]@1
  int v21; // [sp+40h] [bp-30h]@1
  int v22; // [sp+44h] [bp-2Ch]@1
  int v23; // [sp+48h] [bp-28h]@1
  int v24; // [sp+4Ch] [bp-24h]@1
  int v25; // [sp+50h] [bp-20h]@1
  int v26; // [sp+54h] [bp-1Ch]@1
  int v27; // [sp+58h] [bp-18h]@1
  int v28; // [sp+5Ch] [bp-14h]@1
  int v29; // [sp+60h] [bp-10h]@1
  int v30; // [sp+64h] [bp-Ch]@1
  int v31; // [sp+68h] [bp-8h]@1
  int v32; // [sp+6Ch] [bp-4h]@1

  v21 = 192;
  v22 = 0;
  v23 = 216;
  v24 = 24;
  v25 = 216;
  v26 = 0;
  v27 = 240;
  v28 = 24;
  v29 = 240;
  v30 = 0;
  v31 = 264;
  v32 = 24;
  v9 = 192;
  v10 = 24;
  v11 = 216;
  v12 = 48;
  v13 = 216;
  v14 = 24;
  v15 = 240;
  v16 = 48;
  v17 = 240;
  v18 = 24;
  v19 = 264;
  v20 = 48;
  v8 = *(_DWORD *)(a1 + 116);
  if ( v8 )
  {
    if ( v8 != 1 )
      goto LABEL_58;
    if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
    {
      *(_DWORD *)(a1 + 76) = 2;
      *(_DWORD *)(a1 + 16) += 16;
    }
    else
    {
      *(_DWORD *)(a1 + 76) = 0;
      *(_DWORD *)(a1 + 16) -= 16;
    }
    if ( *(_DWORD *)(a1 + 4) & 1 )
      *(_DWORD *)(a1 + 16) = 512;
    if ( *(_DWORD *)(a1 + 4) & 4 )
      *(_DWORD *)(a1 + 16) = -512;
    if ( *(_DWORD *)(a1 + 12) >= *(_DWORD *)(a1 + 36) )
      *(_DWORD *)(a1 + 20) -= 8;
    else
      *(_DWORD *)(a1 + 20) += 8;
    if ( *(_DWORD *)(a1 + 16) > 767 )
      *(_DWORD *)(a1 + 16) = 767;
    if ( *(_DWORD *)(a1 + 16) < -767 )
      *(_DWORD *)(a1 + 16) = -767;
    if ( *(_DWORD *)(a1 + 20) > 256 )
      *(_DWORD *)(a1 + 20) = 256;
    if ( *(_DWORD *)(a1 + 20) < -256 )
      *(_DWORD *)(a1 + 20) = -256;
    if ( *(_BYTE *)(a1 + 156) )
    {
      *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16) / 2;
      *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20) / 2;
    }
    else
    {
      *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
      *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
    }
    if ( Quote_X_Position <= *(_DWORD *)(a1 + 8) + 204800 && Quote_X_Position >= *(_DWORD *)(a1 + 8) - 204800 )
    {
LABEL_58:
      if ( *(_DWORD *)(a1 + 116) )
      {
        if ( *(_DWORD *)(a1 + 120) < 150 )
          ++*(_DWORD *)(a1 + 120);
        if ( *(_DWORD *)(a1 + 120) == 150 )
        {
          if ( !(++*(_DWORD *)(a1 + 112) % 8)
            && *(_DWORD *)(a1 + 8) < Quote_X_Position + 81920
            && *(_DWORD *)(a1 + 8) > Quote_X_Position - 81920 )
          {
            v2 = Angle_Calculator(*(_DWORD *)(a1 + 8) - Quote_X_Position, *(_DWORD *)(a1 + 12) - Quote_Y_Position);
            v3 = RNG_Range(-6, 6) + v2;
            Y_Velocity = 2 * SIN_function(v3);
            X_Velocity = 2 * COS_function(v3);
            NPC_Create(84, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), X_Velocity, Y_Velocity, 0, 0, 256);
            Play_Sound_Effect(39, 1);
          }
          if ( *(_DWORD *)(a1 + 112) > 8 )
          {
            *(_DWORD *)(a1 + 120) = 0;
            *(_DWORD *)(a1 + 112) = 0;
          }
        }
      }
      if ( ++*(_DWORD *)(a1 + 100) > 1 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 1 )
        *(_DWORD *)(a1 + 104) = 0;
      if ( *(_DWORD *)(a1 + 120) > 120 && *(_DWORD *)(a1 + 120) / 2 % 2 == 1 && *(_DWORD *)(a1 + 104) == 1 )
        *(_DWORD *)(a1 + 104) = 2;
      if ( *(_DWORD *)(a1 + 76) )
      {
        v7 = &v9 + 4 * *(_DWORD *)(a1 + 104);
        result = a1 + 84;
        *(_DWORD *)result = *v7;
        *(_DWORD *)(result + 4) = v7[1];
        *(_DWORD *)(result + 8) = v7[2];
        *(_DWORD *)(result + 12) = v7[3];
      }
      else
      {
        v6 = &v21 + 4 * *(_DWORD *)(a1 + 104);
        result = a1 + 84;
        *(_DWORD *)result = *v6;
        *(_DWORD *)(result + 4) = v6[1];
        *(_DWORD *)(result + 8) = v6[2];
        *(_DWORD *)(result + 12) = v6[3];
      }
    }
    else
    {
      *(_DWORD *)(a1 + 116) = 0;
      *(_DWORD *)(a1 + 16) = 0;
      *(_DWORD *)(a1 + 76) = *(_DWORD *)(a1 + 108);
      *(_DWORD *)(a1 + 8) = *(_DWORD *)(a1 + 32);
      *(_DWORD *)(a1 + 92) = 0;
      result = a1;
      *(_DWORD *)(a1 + 164) = 0;
    }
  }
  else if ( Quote_X_Position >= *(_DWORD *)(a1 + 8) + 0x2000 || Quote_X_Position <= *(_DWORD *)(a1 + 8) - 0x2000 )
  {
    *(_DWORD *)(a1 + 92) = 0;
    *(_DWORD *)(a1 + 164) = 0;
    *(_DWORD *)(a1 + 16) = 0;
    *(_DWORD *)(a1 + 20) = 0;
    result = a1;
    *(_WORD *)(a1 + 80) &= 0xFFDFu;
  }
  else
  {
    *(_WORD *)(a1 + 80) |= 0x20u;
    *(_DWORD *)(a1 + 20) = -256;
    *(_DWORD *)(a1 + 32) = *(_DWORD *)(a1 + 8);
    *(_DWORD *)(a1 + 36) = *(_DWORD *)(a1 + 12);
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 120) = 0;
    *(_DWORD *)(a1 + 108) = *(_DWORD *)(a1 + 76);
    *(_DWORD *)(a1 + 112) = 0;
    *(_DWORD *)(a1 + 164) = 6;
    if ( *(_DWORD *)(a1 + 76) )
    {
      result = Quote_X_Position - 0x20000;
      *(_DWORD *)(a1 + 8) = Quote_X_Position - 0x20000;
      *(_DWORD *)(a1 + 16) = 767;
    }
    else
    {
      result = Quote_X_Position + 0x20000;
      *(_DWORD *)(a1 + 8) = Quote_X_Position + 0x20000;
      *(_DWORD *)(a1 + 16) = -767;
    }
  }
  return result;
}

//----- (004321F0) --------------------------------------------------------
int __cdecl NPC59(int a1)
{
  int v1; // ecx@25
  int result; // eax@25
  int *v3; // eax@26
  int v4; // ecx@26
  int v5; // [sp+4h] [bp-40h]@1
  int v6; // [sp+8h] [bp-3Ch]@1
  int v7; // [sp+Ch] [bp-38h]@1
  int v8; // [sp+10h] [bp-34h]@1
  int v9; // [sp+14h] [bp-30h]@1
  int v10; // [sp+18h] [bp-2Ch]@1
  int v11; // [sp+1Ch] [bp-28h]@1
  int v12; // [sp+20h] [bp-24h]@1
  int v13; // [sp+24h] [bp-20h]@1
  int v14; // [sp+28h] [bp-1Ch]@1
  int v15; // [sp+2Ch] [bp-18h]@1
  int v16; // [sp+30h] [bp-14h]@1
  int v17; // [sp+34h] [bp-10h]@1
  int v18; // [sp+38h] [bp-Ch]@1
  int v19; // [sp+3Ch] [bp-8h]@1
  int v20; // [sp+40h] [bp-4h]@1

  v5 = 224;
  v6 = 16;
  v7 = 240;
  v8 = 40;
  v9 = 208;
  v10 = 80;
  v11 = 224;
  v12 = 104;
  v13 = 224;
  v14 = 80;
  v15 = 240;
  v16 = 104;
  v17 = 240;
  v18 = 80;
  v19 = 256;
  v20 = 104;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( *(_DWORD *)(a1 + 8) - 0x8000 < Quote_X_Position
        && *(_DWORD *)(a1 + 8) + 0x8000 > Quote_X_Position
        && *(_DWORD *)(a1 + 12) - 0x8000 < Quote_Y_Position
        && *(_DWORD *)(a1 + 12) + 0x8000 > Quote_Y_Position )
      {
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 100) = 0;
      }
      break;
    case 2:
      if ( ++*(_DWORD *)(a1 + 100) > 2 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) == 2 )
        *(_DWORD *)(a1 + 116) = 3;
      break;
    case 3:
      if ( *(_DWORD *)(a1 + 8) - 0x8000 >= Quote_X_Position
        || *(_DWORD *)(a1 + 8) + 0x8000 <= Quote_X_Position
        || *(_DWORD *)(a1 + 12) - 0x8000 >= Quote_Y_Position
        || *(_DWORD *)(a1 + 12) + 0x8000 <= Quote_Y_Position )
      {
        *(_DWORD *)(a1 + 116) = 4;
        *(_DWORD *)(a1 + 100) = 0;
      }
      break;
    case 4:
      if ( ++*(_DWORD *)(a1 + 100) > 2 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        --*(_DWORD *)(a1 + 104);
      }
      if ( !*(_DWORD *)(a1 + 104) )
        *(_DWORD *)(a1 + 116) = 1;
      break;
    default:
      break;
  }
  if ( *(_BYTE *)(a1 + 156) )
  {
    v1 = a1 + 84;
    *(_DWORD *)v1 = v17;
    *(_DWORD *)(v1 + 4) = v18;
    *(_DWORD *)(v1 + 8) = v19;
    result = v20;
    *(_DWORD *)(v1 + 12) = v20;
  }
  else
  {
    v3 = &v5 + 4 * *(_DWORD *)(a1 + 104);
    v4 = a1 + 84;
    *(_DWORD *)v4 = *v3;
    *(_DWORD *)(v4 + 4) = v3[1];
    *(_DWORD *)(v4 + 8) = v3[2];
    result = v3[3];
    *(_DWORD *)(v4 + 12) = result;
  }
  return result;
}

//----- (00432460) --------------------------------------------------------
int __cdecl NPC60(int a1)
{
  int v1; // edx@37
  int v2; // eax@42
  int v3; // eax@50
  int *v4; // eax@62
  int v5; // ecx@62
  int result; // eax@62
  int *v7; // eax@63
  int v8; // ecx@63
  int v9; // [sp+4h] [bp-100h]@1
  int v10; // [sp+8h] [bp-FCh]@1
  int v11; // [sp+Ch] [bp-F8h]@1
  int v12; // [sp+10h] [bp-F4h]@1
  int v13; // [sp+14h] [bp-F0h]@1
  int v14; // [sp+18h] [bp-ECh]@1
  int v15; // [sp+1Ch] [bp-E8h]@1
  int v16; // [sp+20h] [bp-E4h]@1
  int v17; // [sp+24h] [bp-E0h]@1
  int v18; // [sp+28h] [bp-DCh]@1
  int v19; // [sp+2Ch] [bp-D8h]@1
  int v20; // [sp+30h] [bp-D4h]@1
  int v21; // [sp+34h] [bp-D0h]@1
  int v22; // [sp+38h] [bp-CCh]@1
  int v23; // [sp+3Ch] [bp-C8h]@1
  int v24; // [sp+40h] [bp-C4h]@1
  int v25; // [sp+44h] [bp-C0h]@1
  int v26; // [sp+48h] [bp-BCh]@1
  int v27; // [sp+4Ch] [bp-B8h]@1
  int v28; // [sp+50h] [bp-B4h]@1
  int v29; // [sp+54h] [bp-B0h]@1
  int v30; // [sp+58h] [bp-ACh]@1
  int v31; // [sp+5Ch] [bp-A8h]@1
  int v32; // [sp+60h] [bp-A4h]@1
  int v33; // [sp+64h] [bp-A0h]@1
  int v34; // [sp+68h] [bp-9Ch]@1
  int v35; // [sp+6Ch] [bp-98h]@1
  int v36; // [sp+70h] [bp-94h]@1
  int v37; // [sp+74h] [bp-90h]@1
  int v38; // [sp+78h] [bp-8Ch]@1
  int v39; // [sp+7Ch] [bp-88h]@1
  int v40; // [sp+80h] [bp-84h]@1
  int v41; // [sp+84h] [bp-80h]@1
  int v42; // [sp+88h] [bp-7Ch]@1
  int v43; // [sp+8Ch] [bp-78h]@1
  int v44; // [sp+90h] [bp-74h]@1
  int v45; // [sp+94h] [bp-70h]@1
  int v46; // [sp+98h] [bp-6Ch]@1
  int v47; // [sp+9Ch] [bp-68h]@1
  int v48; // [sp+A0h] [bp-64h]@1
  int v49; // [sp+A4h] [bp-60h]@1
  int v50; // [sp+A8h] [bp-5Ch]@1
  int v51; // [sp+ACh] [bp-58h]@1
  int v52; // [sp+B0h] [bp-54h]@1
  int v53; // [sp+B4h] [bp-50h]@1
  int v54; // [sp+B8h] [bp-4Ch]@1
  int v55; // [sp+BCh] [bp-48h]@1
  int v56; // [sp+C0h] [bp-44h]@1
  int v57; // [sp+C4h] [bp-40h]@1
  int v58; // [sp+C8h] [bp-3Ch]@1
  int v59; // [sp+CCh] [bp-38h]@1
  int v60; // [sp+D0h] [bp-34h]@1
  int v61; // [sp+D4h] [bp-30h]@1
  int v62; // [sp+D8h] [bp-2Ch]@1
  int v63; // [sp+DCh] [bp-28h]@1
  int v64; // [sp+E0h] [bp-24h]@1
  int v65; // [sp+E4h] [bp-20h]@1
  int v66; // [sp+E8h] [bp-1Ch]@1
  int v67; // [sp+ECh] [bp-18h]@1
  int v68; // [sp+F0h] [bp-14h]@1
  int v69; // [sp+F4h] [bp-10h]@1
  int v70; // [sp+F8h] [bp-Ch]@1
  int v71; // [sp+FCh] [bp-8h]@1
  int v72; // [sp+100h] [bp-4h]@1

  v41 = 0;
  v42 = 64;
  v43 = 16;
  v44 = 80;
  v45 = 16;
  v46 = 64;
  v47 = 32;
  v48 = 80;
  v49 = 32;
  v50 = 64;
  v51 = 48;
  v52 = 80;
  v53 = 16;
  v54 = 64;
  v55 = 32;
  v56 = 80;
  v57 = 48;
  v58 = 64;
  v59 = 64;
  v60 = 80;
  v61 = 16;
  v62 = 64;
  v63 = 32;
  v64 = 80;
  v65 = 112;
  v66 = 64;
  v67 = 128;
  v68 = 80;
  v69 = 128;
  v70 = 64;
  v71 = 144;
  v72 = 80;
  v9 = 0;
  v10 = 80;
  v11 = 16;
  v12 = 96;
  v13 = 16;
  v14 = 80;
  v15 = 32;
  v16 = 96;
  v17 = 32;
  v18 = 80;
  v19 = 48;
  v20 = 96;
  v21 = 16;
  v22 = 80;
  v23 = 32;
  v24 = 96;
  v25 = 48;
  v26 = 80;
  v27 = 64;
  v28 = 96;
  v29 = 16;
  v30 = 80;
  v31 = 32;
  v32 = 96;
  v33 = 112;
  v34 = 80;
  v35 = 128;
  v36 = 96;
  v37 = 128;
  v38 = 80;
  v39 = 144;
  v40 = 96;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 100) = 0;
      *(_DWORD *)(a1 + 16) = 0;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( RNG_Range(0, 120) == 10 )
      {
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 1;
      }
      if ( *(_DWORD *)(a1 + 8) - 0x2000 < Quote_X_Position
        && *(_DWORD *)(a1 + 8) + 0x2000 > Quote_X_Position
        && *(_DWORD *)(a1 + 12) - 0x2000 < Quote_Y_Position
        && *(_DWORD *)(a1 + 12) + 0x2000 > Quote_Y_Position )
      {
        if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
          *(_DWORD *)(a1 + 76) = 2;
        else
          *(_DWORD *)(a1 + 76) = 0;
      }
      break;
    case 2:
      if ( ++*(_DWORD *)(a1 + 120) > 8 )
      {
        *(_DWORD *)(a1 + 116) = 1;
        *(_DWORD *)(a1 + 104) = 0;
      }
      break;
    case 3:
      *(_DWORD *)(a1 + 116) = 4;
      *(_DWORD *)(a1 + 104) = 1;
      *(_DWORD *)(a1 + 100) = 0;
      goto LABEL_17;
    case 4:
LABEL_17:
      if ( ++*(_DWORD *)(a1 + 100) > 2 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 4 )
        *(_DWORD *)(a1 + 104) = 1;
      if ( *(_DWORD *)(a1 + 4) & 1 )
      {
        *(_DWORD *)(a1 + 76) = 2;
        *(_DWORD *)(a1 + 16) = 512;
      }
      if ( *(_DWORD *)(a1 + 4) & 4 )
      {
        *(_DWORD *)(a1 + 76) = 0;
        *(_DWORD *)(a1 + 16) = -512;
      }
      if ( *(_DWORD *)(a1 + 76) )
        *(_DWORD *)(a1 + 16) = 1024;
      else
        *(_DWORD *)(a1 + 16) = -1024;
      break;
    case 6:
      *(_DWORD *)(a1 + 116) = 7;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 104) = 1;
      *(_DWORD *)(a1 + 100) = 0;
      *(_DWORD *)(a1 + 20) = -1024;
      goto LABEL_30;
    case 7:
LABEL_30:
      if ( ++*(_DWORD *)(a1 + 100) > 2 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 4 )
        *(_DWORD *)(a1 + 104) = 1;
      if ( *(_DWORD *)(a1 + 76) )
        *(_DWORD *)(a1 + 16) = 256;
      else
        *(_DWORD *)(a1 + 16) = -256;
      v1 = (*(_DWORD *)(a1 + 120))++;
      if ( v1 && *(_DWORD *)(a1 + 4) & 8 )
        *(_DWORD *)(a1 + 116) = 3;
      break;
    case 8:
      *(_DWORD *)(a1 + 104) = 1;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 116) = 9;
      *(_DWORD *)(a1 + 20) = -512;
      goto LABEL_42;
    case 9:
LABEL_42:
      v2 = (*(_DWORD *)(a1 + 120))++;
      if ( v2 && *(_DWORD *)(a1 + 4) & 8 )
        *(_DWORD *)(a1 + 116) = 0;
      break;
    case 0xA:
      *(_DWORD *)(a1 + 116) = 11;
      *(_DWORD *)(a1 + 104) = 6;
      *(_DWORD *)(a1 + 20) = -1024;
      Play_Sound_Effect(50, 1);
      if ( *(_DWORD *)(a1 + 76) )
        *(_DWORD *)(a1 + 16) = 256;
      else
        *(_DWORD *)(a1 + 16) = -256;
      break;
    case 0xB:
      v3 = (*(_DWORD *)(a1 + 120))++;
      if ( v3 && *(_DWORD *)(a1 + 4) & 8 )
      {
        *(_DWORD *)(a1 + 116) = 12;
        *(_DWORD *)(a1 + 104) = 7;
        *(_WORD *)(a1 + 80) |= 0x2000u;
      }
      break;
    case 0xC:
      *(_DWORD *)(a1 + 16) = 0;
      break;
    default:
      break;
  }
  *(_DWORD *)(a1 + 20) += 64;
  if ( *(_DWORD *)(a1 + 16) > 1024 )
    *(_DWORD *)(a1 + 16) = 1024;
  if ( *(_DWORD *)(a1 + 16) < -1024 )
    *(_DWORD *)(a1 + 16) = -1024;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 76) )
  {
    v7 = &v9 + 4 * *(_DWORD *)(a1 + 104);
    v8 = a1 + 84;
    *(_DWORD *)v8 = *v7;
    *(_DWORD *)(v8 + 4) = v7[1];
    *(_DWORD *)(v8 + 8) = v7[2];
    result = v7[3];
    *(_DWORD *)(v8 + 12) = result;
  }
  else
  {
    v4 = &v41 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    *(_DWORD *)(v5 + 8) = v4[2];
    result = v4[3];
    *(_DWORD *)(v5 + 12) = result;
  }
  return result;
}

//----- (00432B50) --------------------------------------------------------
int __cdecl NPC61(int a1)
{
  int v1; // ecx@14
  int v2; // ST10_4@50
  int v3; // ST0C_4@50
  int v4; // ST08_4@50
  int v5; // eax@50
  int *v6; // ecx@65
  int v7; // edx@65
  int result; // eax@65
  int *v9; // ecx@66
  int v10; // edx@66
  int v11; // [sp+4h] [bp-168h]@1
  int v12; // [sp+8h] [bp-164h]@1
  int v13; // [sp+Ch] [bp-160h]@1
  int v14; // [sp+10h] [bp-15Ch]@1
  int v15; // [sp+14h] [bp-158h]@1
  int v16; // [sp+18h] [bp-154h]@1
  int v17; // [sp+1Ch] [bp-150h]@1
  int v18; // [sp+20h] [bp-14Ch]@1
  int v19; // [sp+24h] [bp-148h]@1
  int v20; // [sp+28h] [bp-144h]@1
  int v21; // [sp+2Ch] [bp-140h]@1
  int v22; // [sp+30h] [bp-13Ch]@1
  int v23; // [sp+34h] [bp-138h]@1
  int v24; // [sp+38h] [bp-134h]@1
  int v25; // [sp+3Ch] [bp-130h]@1
  int v26; // [sp+40h] [bp-12Ch]@1
  int v27; // [sp+44h] [bp-128h]@1
  int v28; // [sp+48h] [bp-124h]@1
  int v29; // [sp+4Ch] [bp-120h]@1
  int v30; // [sp+50h] [bp-11Ch]@1
  int v31; // [sp+54h] [bp-118h]@1
  int v32; // [sp+58h] [bp-114h]@1
  int v33; // [sp+5Ch] [bp-110h]@1
  int v34; // [sp+60h] [bp-10Ch]@1
  int v35; // [sp+64h] [bp-108h]@1
  int v36; // [sp+68h] [bp-104h]@1
  int v37; // [sp+6Ch] [bp-100h]@1
  int v38; // [sp+70h] [bp-FCh]@1
  int v39; // [sp+74h] [bp-F8h]@1
  int v40; // [sp+78h] [bp-F4h]@1
  int v41; // [sp+7Ch] [bp-F0h]@1
  int v42; // [sp+80h] [bp-ECh]@1
  int v43; // [sp+84h] [bp-E8h]@1
  int v44; // [sp+88h] [bp-E4h]@1
  int v45; // [sp+8Ch] [bp-E0h]@1
  int v46; // [sp+90h] [bp-DCh]@1
  int v47; // [sp+94h] [bp-D8h]@1
  int v48; // [sp+98h] [bp-D4h]@1
  int v49; // [sp+9Ch] [bp-D0h]@1
  int v50; // [sp+A0h] [bp-CCh]@1
  int v51; // [sp+A4h] [bp-C8h]@1
  int v52; // [sp+A8h] [bp-C4h]@1
  int v53; // [sp+ACh] [bp-C0h]@1
  int v54; // [sp+B0h] [bp-BCh]@1
  int i; // [sp+B8h] [bp-B4h]@48
  int v56; // [sp+BCh] [bp-B0h]@1
  int v57; // [sp+C0h] [bp-ACh]@1
  int v58; // [sp+C4h] [bp-A8h]@1
  int v59; // [sp+C8h] [bp-A4h]@1
  int v60; // [sp+CCh] [bp-A0h]@1
  int v61; // [sp+D0h] [bp-9Ch]@1
  int v62; // [sp+D4h] [bp-98h]@1
  int v63; // [sp+D8h] [bp-94h]@1
  int v64; // [sp+DCh] [bp-90h]@1
  int v65; // [sp+E0h] [bp-8Ch]@1
  int v66; // [sp+E4h] [bp-88h]@1
  int v67; // [sp+E8h] [bp-84h]@1
  int v68; // [sp+ECh] [bp-80h]@1
  int v69; // [sp+F0h] [bp-7Ch]@1
  int v70; // [sp+F4h] [bp-78h]@1
  int v71; // [sp+F8h] [bp-74h]@1
  int v72; // [sp+FCh] [bp-70h]@1
  int v73; // [sp+100h] [bp-6Ch]@1
  int v74; // [sp+104h] [bp-68h]@1
  int v75; // [sp+108h] [bp-64h]@1
  int v76; // [sp+10Ch] [bp-60h]@1
  int v77; // [sp+110h] [bp-5Ch]@1
  int v78; // [sp+114h] [bp-58h]@1
  int v79; // [sp+118h] [bp-54h]@1
  int v80; // [sp+11Ch] [bp-50h]@1
  int v81; // [sp+120h] [bp-4Ch]@1
  int v82; // [sp+124h] [bp-48h]@1
  int v83; // [sp+128h] [bp-44h]@1
  int v84; // [sp+12Ch] [bp-40h]@1
  int v85; // [sp+130h] [bp-3Ch]@1
  int v86; // [sp+134h] [bp-38h]@1
  int v87; // [sp+138h] [bp-34h]@1
  int v88; // [sp+13Ch] [bp-30h]@1
  int v89; // [sp+140h] [bp-2Ch]@1
  int v90; // [sp+144h] [bp-28h]@1
  int v91; // [sp+148h] [bp-24h]@1
  int v92; // [sp+14Ch] [bp-20h]@1
  int v93; // [sp+150h] [bp-1Ch]@1
  int v94; // [sp+154h] [bp-18h]@1
  int v95; // [sp+158h] [bp-14h]@1
  int v96; // [sp+15Ch] [bp-10h]@1
  int v97; // [sp+160h] [bp-Ch]@1
  int v98; // [sp+164h] [bp-8h]@1
  int v99; // [sp+168h] [bp-4h]@1

  v56 = 224;
  v57 = 32;
  v58 = 240;
  v59 = 48;
  v60 = 240;
  v61 = 32;
  v62 = 256;
  v63 = 48;
  v64 = 256;
  v65 = 32;
  v66 = 272;
  v67 = 48;
  v68 = 272;
  v69 = 32;
  v70 = 288;
  v71 = 48;
  v72 = 288;
  v73 = 32;
  v74 = 304;
  v75 = 48;
  v76 = 224;
  v77 = 32;
  v78 = 240;
  v79 = 48;
  v80 = 304;
  v81 = 32;
  v82 = 320;
  v83 = 48;
  v84 = 224;
  v85 = 32;
  v86 = 240;
  v87 = 48;
  v88 = 272;
  v89 = 32;
  v90 = 288;
  v91 = 48;
  v92 = 0;
  v93 = 0;
  v94 = 0;
  v95 = 0;
  v96 = 112;
  v97 = 32;
  v98 = 128;
  v99 = 48;
  v11 = 224;
  v12 = 48;
  v13 = 240;
  v14 = 64;
  v15 = 240;
  v16 = 48;
  v17 = 256;
  v18 = 64;
  v19 = 256;
  v20 = 48;
  v21 = 272;
  v22 = 64;
  v23 = 272;
  v24 = 48;
  v25 = 288;
  v26 = 64;
  v27 = 288;
  v28 = 48;
  v29 = 304;
  v30 = 64;
  v31 = 224;
  v32 = 48;
  v33 = 240;
  v34 = 64;
  v35 = 304;
  v36 = 48;
  v37 = 320;
  v38 = 64;
  v39 = 224;
  v40 = 48;
  v41 = 240;
  v42 = 64;
  v43 = 272;
  v44 = 48;
  v45 = 288;
  v46 = 64;
  v47 = 0;
  v48 = 0;
  v49 = 0;
  v50 = 0;
  v51 = 112;
  v52 = 32;
  v53 = 128;
  v54 = 48;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 100) = 0;
      *(_DWORD *)(a1 + 16) = 0;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( RNG_Range(0, 120) == 10 )
      {
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 1;
      }
      break;
    case 2:
      if ( ++*(_DWORD *)(a1 + 120) > 8 )
      {
        *(_DWORD *)(a1 + 116) = 1;
        *(_DWORD *)(a1 + 104) = 0;
      }
      break;
    case 5:
      *(_DWORD *)(a1 + 104) = 3;
      *(_DWORD *)(a1 + 16) = 0;
      break;
    case 6:
      *(_DWORD *)(a1 + 116) = 7;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 100) = 0;
      *(_DWORD *)(a1 + 20) = -1024;
      goto LABEL_11;
    case 7:
LABEL_11:
      *(_DWORD *)(a1 + 104) = 2;
      if ( *(_DWORD *)(a1 + 76) )
        *(_DWORD *)(a1 + 16) = 512;
      else
        *(_DWORD *)(a1 + 16) = -512;
      v1 = (*(_DWORD *)(a1 + 120))++;
      if ( v1 && *(_DWORD *)(a1 + 4) & 8 )
        *(_DWORD *)(a1 + 116) = 5;
      break;
    case 8:
      *(_DWORD *)(a1 + 116) = 9;
      *(_DWORD *)(a1 + 104) = 4;
      *(_DWORD *)(a1 + 100) = 0;
      goto LABEL_19;
    case 9:
LABEL_19:
      if ( ++*(_DWORD *)(a1 + 100) > 4 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 7 )
        *(_DWORD *)(a1 + 104) = 4;
      if ( *(_DWORD *)(a1 + 76) )
        *(_DWORD *)(a1 + 16) = 512;
      else
        *(_DWORD *)(a1 + 16) = -512;
      break;
    case 0xA:
      *(_DWORD *)(a1 + 116) = 11;
      *(_DWORD *)(a1 + 104) = 4;
      *(_DWORD *)(a1 + 100) = 0;
      goto LABEL_28;
    case 0xB:
LABEL_28:
      if ( ++*(_DWORD *)(a1 + 100) > 2 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 7 )
        *(_DWORD *)(a1 + 104) = 4;
      if ( *(_DWORD *)(a1 + 76) )
        *(_DWORD *)(a1 + 16) = 1024;
      else
        *(_DWORD *)(a1 + 16) = -1024;
      break;
    case 0x14:
      NPC_Create(145, 0, 0, 0, 0, 2, a1, 256);
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 116) = 0;
      break;
    case 0x1E:
      *(_DWORD *)(a1 + 116) = 31;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 100) = 0;
      *(_DWORD *)(a1 + 20) = 0;
      goto LABEL_38;
    case 0x1F:
LABEL_38:
      *(_DWORD *)(a1 + 104) = 2;
      if ( *(_DWORD *)(a1 + 76) )
        *(_DWORD *)(a1 + 16) = 1536;
      else
        *(_DWORD *)(a1 + 16) = -1536;
      if ( *(_DWORD *)(a1 + 4) & 1 )
      {
        *(_DWORD *)(a1 + 76) = 2;
        *(_DWORD *)(a1 + 116) = 7;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 100) = 0;
        *(_DWORD *)(a1 + 20) = -1024;
        *(_DWORD *)(a1 + 16) = 512;
        Play_Sound_Effect(71, 1);
        sub_46F150(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 2048, 4);
      }
      break;
    case 0x28:
      *(_DWORD *)(a1 + 116) = 42;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 104) = 8;
      Play_Sound_Effect(29, 1);
      goto LABEL_45;
    case 0x2A:
LABEL_45:
      if ( ++*(_DWORD *)(a1 + 104) > 9 )
        *(_DWORD *)(a1 + 104) = 8;
      if ( ++*(_DWORD *)(a1 + 120) > 100 )
      {
        for ( i = 0; i < 4; ++i )
        {
          v2 = RNG_Range(-1536, 0);
          v3 = RNG_Range(-341, 341);
          v4 = *(_DWORD *)(a1 + 12) + (RNG_Range(-12, 12) << 9);
          v5 = RNG_Range(-12, 12);
          NPC_Create(4, *(_DWORD *)(a1 + 8) + (v5 << 9), v4, v3, v2, 0, 0, 256);
        }
        *(_DWORD *)(a1 + 116) = 50;
        *(_DWORD *)(a1 + 52) = 20;
        *(_DWORD *)(a1 + 104) = 10;
      }
      break;
    case 0x3C:
      *(_DWORD *)(a1 + 104) = 6;
      *(_DWORD *)(a1 + 116) = 61;
      *(_DWORD *)(a1 + 20) = -1535;
      *(_DWORD *)(a1 + 16) = 1024;
      *(_DWORD *)(a1 + 112) = 1;
      break;
    case 0x3D:
      *(_DWORD *)(a1 + 20) += 64;
      if ( *(_DWORD *)(a1 + 4) & 8 )
      {
        *(_DWORD *)(a1 + 116) = 0;
        *(_DWORD *)(a1 + 112) = 0;
        *(_DWORD *)(a1 + 16) = 0;
      }
      break;
    default:
      break;
  }
  if ( *(_DWORD *)(a1 + 116) < 30 || *(_DWORD *)(a1 + 116) >= 40 )
  {
    *(_DWORD *)(a1 + 20) += 64;
    if ( *(_DWORD *)(a1 + 16) > 1024 )
      *(_DWORD *)(a1 + 16) = 1024;
    if ( *(_DWORD *)(a1 + 16) < -1024 )
      *(_DWORD *)(a1 + 16) = -1024;
    if ( *(_DWORD *)(a1 + 20) > 1535 )
      *(_DWORD *)(a1 + 20) = 1535;
  }
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 76) )
  {
    v9 = &v11 + 4 * *(_DWORD *)(a1 + 104);
    v10 = a1 + 84;
    *(_DWORD *)v10 = *v9;
    *(_DWORD *)(v10 + 4) = v9[1];
    result = v9[2];
    *(_DWORD *)(v10 + 8) = result;
    *(_DWORD *)(v10 + 12) = v9[3];
  }
  else
  {
    v6 = &v56 + 4 * *(_DWORD *)(a1 + 104);
    v7 = a1 + 84;
    *(_DWORD *)v7 = *v6;
    *(_DWORD *)(v7 + 4) = v6[1];
    result = v6[2];
    *(_DWORD *)(v7 + 8) = result;
    *(_DWORD *)(v7 + 12) = v6[3];
  }
  return result;
}

//----- (004334C0) --------------------------------------------------------
int __cdecl NPC62(int a1)
{
  int *v1; // ecx@17
  int v2; // edx@17
  int result; // eax@17
  int v4; // [sp+4h] [bp-30h]@1
  int v5; // [sp+8h] [bp-2Ch]@1
  int v6; // [sp+Ch] [bp-28h]@1
  int v7; // [sp+10h] [bp-24h]@1
  int v8; // [sp+14h] [bp-20h]@1
  int v9; // [sp+18h] [bp-1Ch]@1
  int v10; // [sp+1Ch] [bp-18h]@1
  int v11; // [sp+20h] [bp-14h]@1
  int v12; // [sp+24h] [bp-10h]@1
  int v13; // [sp+28h] [bp-Ch]@1
  int v14; // [sp+2Ch] [bp-8h]@1
  int v15; // [sp+30h] [bp-4h]@1

  v4 = 272;
  v5 = 192;
  v6 = 288;
  v7 = 216;
  v8 = 288;
  v9 = 192;
  v10 = 304;
  v11 = 216;
  v12 = 304;
  v13 = 192;
  v14 = 320;
  v15 = 216;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 8) -= 2048;
      *(_DWORD *)(a1 + 12) += 0x2000;
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 100) = 0;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( ++*(_DWORD *)(a1 + 100) > 2 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 1 )
        *(_DWORD *)(a1 + 104) = 0;
      if ( RNG_Range(0, 80) == 1 )
      {
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 1;
      }
      if ( RNG_Range(0, 120) == 10 )
      {
        *(_DWORD *)(a1 + 116) = 3;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 2;
      }
      break;
    case 2:
      if ( ++*(_DWORD *)(a1 + 120) > 40 )
      {
        *(_DWORD *)(a1 + 116) = 3;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 2;
      }
      break;
    case 3:
      if ( ++*(_DWORD *)(a1 + 120) > 80 )
      {
        *(_DWORD *)(a1 + 116) = 1;
        *(_DWORD *)(a1 + 104) = 0;
      }
      break;
    default:
      break;
  }
  v1 = &v4 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  result = v1[2];
  *(_DWORD *)(v2 + 8) = result;
  *(_DWORD *)(v2 + 12) = v1[3];
  return result;
}

//----- (004336C0) --------------------------------------------------------
int __cdecl NPC63(int a1)
{
  int v1; // ecx@12
  int v2; // ecx@36
  int *v3; // ecx@48
  int v4; // edx@48
  int result; // eax@48
  int *v6; // ecx@49
  int v7; // edx@49
  int v8; // [sp+4h] [bp-C0h]@1
  int v9; // [sp+8h] [bp-BCh]@1
  int v10; // [sp+Ch] [bp-B8h]@1
  int v11; // [sp+10h] [bp-B4h]@1
  int v12; // [sp+14h] [bp-B0h]@1
  int v13; // [sp+18h] [bp-ACh]@1
  int v14; // [sp+1Ch] [bp-A8h]@1
  int v15; // [sp+20h] [bp-A4h]@1
  int v16; // [sp+24h] [bp-A0h]@1
  int v17; // [sp+28h] [bp-9Ch]@1
  int v18; // [sp+2Ch] [bp-98h]@1
  int v19; // [sp+30h] [bp-94h]@1
  int v20; // [sp+34h] [bp-90h]@1
  int v21; // [sp+38h] [bp-8Ch]@1
  int v22; // [sp+3Ch] [bp-88h]@1
  int v23; // [sp+40h] [bp-84h]@1
  int v24; // [sp+44h] [bp-80h]@1
  int v25; // [sp+48h] [bp-7Ch]@1
  int v26; // [sp+4Ch] [bp-78h]@1
  int v27; // [sp+50h] [bp-74h]@1
  int v28; // [sp+54h] [bp-70h]@1
  int v29; // [sp+58h] [bp-6Ch]@1
  int v30; // [sp+5Ch] [bp-68h]@1
  int v31; // [sp+60h] [bp-64h]@1
  int v32; // [sp+64h] [bp-60h]@1
  int v33; // [sp+68h] [bp-5Ch]@1
  int v34; // [sp+6Ch] [bp-58h]@1
  int v35; // [sp+70h] [bp-54h]@1
  int v36; // [sp+74h] [bp-50h]@1
  int v37; // [sp+78h] [bp-4Ch]@1
  int v38; // [sp+7Ch] [bp-48h]@1
  int v39; // [sp+80h] [bp-44h]@1
  int v40; // [sp+84h] [bp-40h]@1
  int v41; // [sp+88h] [bp-3Ch]@1
  int v42; // [sp+8Ch] [bp-38h]@1
  int v43; // [sp+90h] [bp-34h]@1
  int v44; // [sp+94h] [bp-30h]@1
  int v45; // [sp+98h] [bp-2Ch]@1
  int v46; // [sp+9Ch] [bp-28h]@1
  int v47; // [sp+A0h] [bp-24h]@1
  int v48; // [sp+A4h] [bp-20h]@1
  int v49; // [sp+A8h] [bp-1Ch]@1
  int v50; // [sp+ACh] [bp-18h]@1
  int v51; // [sp+B0h] [bp-14h]@1
  int v52; // [sp+B4h] [bp-10h]@1
  int v53; // [sp+B8h] [bp-Ch]@1
  int v54; // [sp+BCh] [bp-8h]@1
  int v55; // [sp+C0h] [bp-4h]@1

  v32 = 64;
  v33 = 64;
  v34 = 80;
  v35 = 80;
  v36 = 80;
  v37 = 64;
  v38 = 96;
  v39 = 80;
  v40 = 64;
  v41 = 64;
  v42 = 80;
  v43 = 80;
  v44 = 96;
  v45 = 64;
  v46 = 112;
  v47 = 80;
  v48 = 112;
  v49 = 64;
  v50 = 128;
  v51 = 80;
  v52 = 128;
  v53 = 64;
  v54 = 144;
  v55 = 80;
  v8 = 64;
  v9 = 80;
  v10 = 80;
  v11 = 96;
  v12 = 80;
  v13 = 80;
  v14 = 96;
  v15 = 96;
  v16 = 64;
  v17 = 80;
  v18 = 80;
  v19 = 96;
  v20 = 96;
  v21 = 80;
  v22 = 112;
  v23 = 96;
  v24 = 112;
  v25 = 80;
  v26 = 128;
  v27 = 96;
  v28 = 128;
  v29 = 80;
  v30 = 144;
  v31 = 96;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 100) = 0;
      *(_DWORD *)(a1 + 20) = -1024;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( *(_DWORD *)(a1 + 20) > 0 )
        *(_WORD *)(a1 + 80) &= 0xFFF7u;
      if ( ++*(_DWORD *)(a1 + 100) > 2 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 3 )
        *(_DWORD *)(a1 + 104) = 0;
      if ( *(_DWORD *)(a1 + 76) )
        *(_DWORD *)(a1 + 16) = 256;
      else
        *(_DWORD *)(a1 + 16) = -256;
      v1 = (*(_DWORD *)(a1 + 120))++;
      if ( v1 && *(_DWORD *)(a1 + 4) & 8 )
        *(_DWORD *)(a1 + 116) = 2;
      break;
    case 2:
      *(_DWORD *)(a1 + 116) = 3;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 100) = 0;
      goto LABEL_17;
    case 3:
LABEL_17:
      if ( ++*(_DWORD *)(a1 + 100) > 2 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 3 )
        *(_DWORD *)(a1 + 104) = 0;
      if ( ++*(_DWORD *)(a1 + 120) > 50 )
      {
        *(_DWORD *)(a1 + 120) = 40;
        *(_DWORD *)(a1 + 16) = -*(_DWORD *)(a1 + 16);
        if ( *(_DWORD *)(a1 + 76) )
          *(_DWORD *)(a1 + 76) = 0;
        else
          *(_DWORD *)(a1 + 76) = 2;
      }
      if ( *(_DWORD *)(a1 + 120) > 35 )
        *(_WORD *)(a1 + 80) |= 0x20u;
      if ( *(_DWORD *)(a1 + 76) )
        *(_DWORD *)(a1 + 16) += 64;
      else
        *(_DWORD *)(a1 + 16) -= 64;
      if ( *(_BYTE *)(a1 + 156) )
      {
        *(_DWORD *)(a1 + 116) = 4;
        *(_DWORD *)(a1 + 104) = 4;
        *(_DWORD *)(a1 + 20) = -1024;
        *(_WORD *)(a1 + 80) &= 0xFFDFu;
        *(_DWORD *)(a1 + 164) = 0;
      }
      break;
    case 4:
      if ( *(_DWORD *)(a1 + 76) )
        *(_DWORD *)(a1 + 16) = 256;
      else
        *(_DWORD *)(a1 + 16) = -256;
      v2 = (*(_DWORD *)(a1 + 120))++;
      if ( v2 && *(_DWORD *)(a1 + 4) & 8 )
      {
        *(_DWORD *)(a1 + 116) = 5;
        *(_WORD *)(a1 + 80) |= 0x2000u;
      }
      break;
    case 5:
      *(_DWORD *)(a1 + 16) = 0;
      *(_DWORD *)(a1 + 104) = 5;
      break;
    default:
      break;
  }
  *(_DWORD *)(a1 + 20) += 64;
  if ( *(_DWORD *)(a1 + 16) > 1024 )
    *(_DWORD *)(a1 + 16) = 1024;
  if ( *(_DWORD *)(a1 + 16) < -1024 )
    *(_DWORD *)(a1 + 16) = -1024;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 76) )
  {
    v6 = &v8 + 4 * *(_DWORD *)(a1 + 104);
    v7 = a1 + 84;
    *(_DWORD *)v7 = *v6;
    *(_DWORD *)(v7 + 4) = v6[1];
    result = v6[2];
    *(_DWORD *)(v7 + 8) = result;
    *(_DWORD *)(v7 + 12) = v6[3];
  }
  else
  {
    v3 = &v32 + 4 * *(_DWORD *)(a1 + 104);
    v4 = a1 + 84;
    *(_DWORD *)v4 = *v3;
    *(_DWORD *)(v4 + 4) = v3[1];
    result = v3[2];
    *(_DWORD *)(v4 + 8) = result;
    *(_DWORD *)(v4 + 12) = v3[3];
  }
  return result;
}

//----- (00433C00) --------------------------------------------------------
int __cdecl NPC64(int a1)
{
  int *v1; // edx@37
  int result; // eax@37
  int *v3; // edx@38
  int v4; // [sp+4h] [bp-60h]@1
  int v5; // [sp+8h] [bp-5Ch]@1
  int v6; // [sp+Ch] [bp-58h]@1
  int v7; // [sp+10h] [bp-54h]@1
  int v8; // [sp+14h] [bp-50h]@1
  int v9; // [sp+18h] [bp-4Ch]@1
  int v10; // [sp+1Ch] [bp-48h]@1
  int v11; // [sp+20h] [bp-44h]@1
  int v12; // [sp+24h] [bp-40h]@1
  int v13; // [sp+28h] [bp-3Ch]@1
  int v14; // [sp+2Ch] [bp-38h]@1
  int v15; // [sp+30h] [bp-34h]@1
  int v16; // [sp+34h] [bp-30h]@1
  int v17; // [sp+38h] [bp-2Ch]@1
  int v18; // [sp+3Ch] [bp-28h]@1
  int v19; // [sp+40h] [bp-24h]@1
  int v20; // [sp+44h] [bp-20h]@1
  int v21; // [sp+48h] [bp-1Ch]@1
  int v22; // [sp+4Ch] [bp-18h]@1
  int v23; // [sp+50h] [bp-14h]@1
  int v24; // [sp+54h] [bp-10h]@1
  int v25; // [sp+58h] [bp-Ch]@1
  int v26; // [sp+5Ch] [bp-8h]@1
  int v27; // [sp+60h] [bp-4h]@1

  v16 = 0;
  v17 = 0;
  v18 = 16;
  v19 = 16;
  v20 = 16;
  v21 = 0;
  v22 = 32;
  v23 = 16;
  v24 = 32;
  v25 = 0;
  v26 = 48;
  v27 = 16;
  v4 = 0;
  v5 = 16;
  v6 = 16;
  v7 = 32;
  v8 = 16;
  v9 = 16;
  v10 = 32;
  v11 = 32;
  v12 = 32;
  v13 = 16;
  v14 = 48;
  v15 = 32;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 12) += 1536;
      *(_DWORD *)(a1 + 116) = 1;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
        *(_DWORD *)(a1 + 76) = 2;
      else
        *(_DWORD *)(a1 + 76) = 0;
      if ( *(_DWORD *)(a1 + 32) < 100 )
        ++*(_DWORD *)(a1 + 32);
      if ( *(_DWORD *)(a1 + 120) < 8
        || *(_DWORD *)(a1 + 8) - 57344 >= Quote_X_Position
        || *(_DWORD *)(a1 + 8) + 57344 <= Quote_X_Position
        || *(_DWORD *)(a1 + 12) - 40960 >= Quote_Y_Position
        || *(_DWORD *)(a1 + 12) + 40960 <= Quote_Y_Position )
      {
        if ( *(_DWORD *)(a1 + 120) < 8 )
          ++*(_DWORD *)(a1 + 120);
        *(_DWORD *)(a1 + 104) = 0;
      }
      else
      {
        *(_DWORD *)(a1 + 104) = 1;
      }
      if ( *(_BYTE *)(a1 + 156) )
      {
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 104) = 0;
        *(_DWORD *)(a1 + 120) = 0;
      }
      if ( *(_DWORD *)(a1 + 120) >= 8
        && *(_DWORD *)(a1 + 32) >= 100
        && *(_DWORD *)(a1 + 8) - 0x8000 < Quote_X_Position
        && *(_DWORD *)(a1 + 8) + 0x8000 > Quote_X_Position
        && *(_DWORD *)(a1 + 12) - 40960 < Quote_Y_Position
        && *(_DWORD *)(a1 + 12) + 24576 > Quote_Y_Position )
      {
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 104) = 0;
        *(_DWORD *)(a1 + 120) = 0;
      }
      break;
    case 2:
      if ( ++*(_DWORD *)(a1 + 120) > 8 )
      {
        *(_DWORD *)(a1 + 116) = 3;
        *(_DWORD *)(a1 + 104) = 2;
        *(_DWORD *)(a1 + 20) = -1535;
        Play_Sound_Effect(30, 1);
        if ( *(_DWORD *)(a1 + 76) )
          *(_DWORD *)(a1 + 16) = 256;
        else
          *(_DWORD *)(a1 + 16) = -256;
      }
      break;
    case 3:
      if ( *(_DWORD *)(a1 + 4) & 8 )
      {
        *(_DWORD *)(a1 + 16) = 0;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 0;
        *(_DWORD *)(a1 + 116) = 1;
        Play_Sound_Effect(23, 1);
      }
      break;
    default:
      break;
  }
  *(_DWORD *)(a1 + 20) += 64;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 76) )
  {
    v3 = &v4 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v3;
    *(_DWORD *)(result + 4) = v3[1];
    *(_DWORD *)(result + 8) = v3[2];
    *(_DWORD *)(result + 12) = v3[3];
  }
  else
  {
    v1 = &v16 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v1;
    *(_DWORD *)(result + 4) = v1[1];
    *(_DWORD *)(result + 8) = v1[2];
    *(_DWORD *)(result + 12) = v1[3];
  }
  return result;
}

//----- (00433FC0) --------------------------------------------------------
int __cdecl NPC65(int a1)
{
  int *v1; // edx@24
  int result; // eax@24
  int *v3; // edx@25
  int v4; // [sp+0h] [bp-84h]@1
  int v5; // [sp+4h] [bp-80h]@19
  int v6; // [sp+8h] [bp-7Ch]@19
  int v7; // [sp+Ch] [bp-78h]@19
  int v8; // [sp+10h] [bp-74h]@19
  int v9; // [sp+14h] [bp-70h]@19
  int v10; // [sp+18h] [bp-6Ch]@19
  int v11; // [sp+1Ch] [bp-68h]@19
  int v12; // [sp+20h] [bp-64h]@19
  int v13; // [sp+24h] [bp-60h]@19
  int v14; // [sp+28h] [bp-5Ch]@19
  int v15; // [sp+2Ch] [bp-58h]@19
  int v16; // [sp+30h] [bp-54h]@19
  int v17; // [sp+34h] [bp-50h]@19
  int v18; // [sp+38h] [bp-4Ch]@19
  int v19; // [sp+3Ch] [bp-48h]@19
  int v20; // [sp+40h] [bp-44h]@19
  int v21; // [sp+44h] [bp-40h]@19
  int v22; // [sp+48h] [bp-3Ch]@19
  int v23; // [sp+4Ch] [bp-38h]@19
  int v24; // [sp+50h] [bp-34h]@19
  int v25; // [sp+54h] [bp-30h]@19
  int v26; // [sp+58h] [bp-2Ch]@19
  int v27; // [sp+5Ch] [bp-28h]@19
  int v28; // [sp+60h] [bp-24h]@19
  int v29; // [sp+64h] [bp-20h]@19
  int v30; // [sp+68h] [bp-1Ch]@19
  int v31; // [sp+6Ch] [bp-18h]@19
  int v32; // [sp+70h] [bp-14h]@19
  int v33; // [sp+74h] [bp-10h]@19
  int v34; // [sp+78h] [bp-Ch]@19
  int v35; // [sp+7Ch] [bp-8h]@19
  int v36; // [sp+80h] [bp-4h]@19

  v4 = *(_DWORD *)(a1 + 116);
  if ( v4 )
  {
    if ( v4 != 1 )
    {
      if ( v4 == 2 )
      {
        if ( Quote_X_Position >= *(_DWORD *)(a1 + 8) )
          *(_DWORD *)(a1 + 76) = 2;
        else
          *(_DWORD *)(a1 + 76) = 0;
        if ( *(_DWORD *)(a1 + 36) < *(_DWORD *)(a1 + 12) )
          *(_DWORD *)(a1 + 20) -= 16;
        if ( *(_DWORD *)(a1 + 36) > *(_DWORD *)(a1 + 12) )
          *(_DWORD *)(a1 + 20) += 16;
        if ( *(_DWORD *)(a1 + 20) > 768 )
          *(_DWORD *)(a1 + 20) = 768;
        if ( *(_DWORD *)(a1 + 20) < -768 )
          *(_DWORD *)(a1 + 20) = -768;
      }
      goto LABEL_19;
    }
  }
  else
  {
    *(_DWORD *)(a1 + 32) = *(_DWORD *)(a1 + 8);
    *(_DWORD *)(a1 + 36) = *(_DWORD *)(a1 + 12);
    *(_DWORD *)(a1 + 108) = 120;
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 120) = RNG_Range(0, 50);
  }
  if ( ++*(_DWORD *)(a1 + 120) >= 50 )
  {
    *(_DWORD *)(a1 + 120) = 0;
    *(_DWORD *)(a1 + 116) = 2;
    *(_DWORD *)(a1 + 20) = 768;
  }
LABEL_19:
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  v21 = 32;
  v22 = 32;
  v23 = 48;
  v24 = 48;
  v25 = 48;
  v26 = 32;
  v27 = 64;
  v28 = 48;
  v29 = 64;
  v30 = 32;
  v31 = 80;
  v32 = 48;
  v33 = 80;
  v34 = 32;
  v35 = 96;
  v36 = 48;
  v5 = 32;
  v6 = 48;
  v7 = 48;
  v8 = 64;
  v9 = 48;
  v10 = 48;
  v11 = 64;
  v12 = 64;
  v13 = 64;
  v14 = 48;
  v15 = 80;
  v16 = 64;
  v17 = 80;
  v18 = 48;
  v19 = 96;
  v20 = 64;
  if ( ++*(_DWORD *)(a1 + 100) > 1 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    ++*(_DWORD *)(a1 + 104);
  }
  if ( *(_DWORD *)(a1 + 104) > 2 )
    *(_DWORD *)(a1 + 104) = 0;
  if ( *(_DWORD *)(a1 + 76) )
  {
    v3 = &v5 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v3;
    *(_DWORD *)(result + 4) = v3[1];
    *(_DWORD *)(result + 8) = v3[2];
    *(_DWORD *)(result + 12) = v3[3];
  }
  else
  {
    v1 = &v21 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v1;
    *(_DWORD *)(result + 4) = v1[1];
    *(_DWORD *)(result + 8) = v1[2];
    *(_DWORD *)(result + 12) = v1[3];
  }
  return result;
}

//----- (004342B0) --------------------------------------------------------
int __cdecl NPC66(int a1)
{
  unsigned __int8 v1; // ST13_1@10
  int *v2; // ecx@31
  int v3; // edx@31
  int result; // eax@31
  int v5; // [sp+0h] [bp-4Ch]@1
  signed int i; // [sp+4h] [bp-48h]@5
  int v7; // [sp+Ch] [bp-40h]@1
  int v8; // [sp+10h] [bp-3Ch]@1
  int v9; // [sp+14h] [bp-38h]@1
  int v10; // [sp+18h] [bp-34h]@1
  int v11; // [sp+1Ch] [bp-30h]@1
  int v12; // [sp+20h] [bp-2Ch]@1
  int v13; // [sp+24h] [bp-28h]@1
  int v14; // [sp+28h] [bp-24h]@1
  int v15; // [sp+2Ch] [bp-20h]@1
  int v16; // [sp+30h] [bp-1Ch]@1
  int v17; // [sp+34h] [bp-18h]@1
  int v18; // [sp+38h] [bp-14h]@1
  int v19; // [sp+3Ch] [bp-10h]@1
  int v20; // [sp+40h] [bp-Ch]@1
  int v21; // [sp+44h] [bp-8h]@1
  int v22; // [sp+48h] [bp-4h]@1

  v7 = 32;
  v8 = 192;
  v9 = 56;
  v10 = 216;
  v11 = 56;
  v12 = 192;
  v13 = 80;
  v14 = 216;
  v15 = 32;
  v16 = 216;
  v17 = 56;
  v18 = 240;
  v19 = 56;
  v20 = 216;
  v21 = 80;
  v22 = 240;
  v5 = *(_DWORD *)(a1 + 116);
  if ( v5 )
  {
    if ( v5 != 1 )
    {
      if ( v5 == 2 )
      {
        *(_DWORD *)(a1 + 16) -= 32;
        *(_DWORD *)(a1 + 20) -= 32;
        if ( *(_DWORD *)(a1 + 16) < -1535 )
          *(_DWORD *)(a1 + 16) = -1535;
        if ( *(_DWORD *)(a1 + 20) < -1535 )
          *(_DWORD *)(a1 + 20) = -1535;
        if ( *(_DWORD *)(a1 + 12) < -4096 )
          *(_BYTE *)a1 = 0;
        if ( ++*(_DWORD *)(a1 + 100) > 3 )
        {
          *(_DWORD *)(a1 + 100) = 0;
          ++*(_DWORD *)(a1 + 104);
        }
        if ( *(_DWORD *)(a1 + 104) > 3 )
          *(_DWORD *)(a1 + 104) = 2;
      }
      goto LABEL_31;
    }
  }
  else
  {
    for ( i = 0; i < 512 && NPC_Event_Number[43 * i] != 1000; ++i )
      ;
    if ( i == 512 )
      goto LABEL_31;
    *(_DWORD *)(a1 + 32) = NPC_X_Position[43 * i];
    *(_DWORD *)(a1 + 36) = NPC_Y_Position[43 * i];
    *(_DWORD *)(a1 + 108) = i;
    v1 = Angle_Calculator(*(_DWORD *)(a1 + 8) - *(_DWORD *)(a1 + 32), *(_DWORD *)(a1 + 12) - *(_DWORD *)(a1 + 36));
    *(_DWORD *)(a1 + 16) = 2 * COS_function(v1);
    *(_DWORD *)(a1 + 20) = 2 * SIN_function(v1);
    *(_DWORD *)(a1 + 116) = 1;
  }
  if ( ++*(_DWORD *)(a1 + 100) > 1 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    ++*(_DWORD *)(a1 + 104);
  }
  if ( *(_DWORD *)(a1 + 104) > 1 )
    *(_DWORD *)(a1 + 104) = 0;
  if ( *(_DWORD *)(a1 + 8) - 1536 < *(_DWORD *)(a1 + 32)
    && *(_DWORD *)(a1 + 8) + 1536 > *(_DWORD *)(a1 + 32)
    && *(_DWORD *)(a1 + 12) - 1536 < *(_DWORD *)(a1 + 36)
    && *(_DWORD *)(a1 + 12) + 1536 > *(_DWORD *)(a1 + 36) )
  {
    *(_DWORD *)(a1 + 116) = 2;
    *(_DWORD *)(a1 + 104) = 2;
    *((_BYTE *)&Is_NPC_Alive + 172 * *(_DWORD *)(a1 + 108)) = 0;
    Play_Sound_Effect(21, 1);
  }
LABEL_31:
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  v2 = &v7 + 4 * *(_DWORD *)(a1 + 104);
  v3 = a1 + 84;
  *(_DWORD *)v3 = *v2;
  *(_DWORD *)(v3 + 4) = v2[1];
  result = v2[2];
  *(_DWORD *)(v3 + 8) = result;
  *(_DWORD *)(v3 + 12) = v2[3];
  return result;
}
// 4A6228: using guessed type int NPC_X_Position[];
// 4A622C: using guessed type int NPC_Y_Position[];
// 4A6250: using guessed type int NPC_Event_Number[];

//----- (004345E0) --------------------------------------------------------
int __cdecl NPC67(int a1)
{
  int *v1; // eax@52
  int v2; // ecx@52
  int result; // eax@52
  int *v4; // eax@53
  int v5; // ecx@53
  int v6; // [sp+4h] [bp-100h]@39
  int v7; // [sp+8h] [bp-FCh]@39
  int v8; // [sp+Ch] [bp-F8h]@39
  int v9; // [sp+10h] [bp-F4h]@39
  int v10; // [sp+14h] [bp-F0h]@39
  int v11; // [sp+18h] [bp-ECh]@39
  int v12; // [sp+1Ch] [bp-E8h]@39
  int v13; // [sp+20h] [bp-E4h]@39
  int v14; // [sp+24h] [bp-E0h]@39
  int v15; // [sp+28h] [bp-DCh]@39
  int v16; // [sp+2Ch] [bp-D8h]@39
  int v17; // [sp+30h] [bp-D4h]@39
  int v18; // [sp+34h] [bp-D0h]@39
  int v19; // [sp+38h] [bp-CCh]@39
  int v20; // [sp+3Ch] [bp-C8h]@39
  int v21; // [sp+40h] [bp-C4h]@39
  int v22; // [sp+44h] [bp-C0h]@39
  int v23; // [sp+48h] [bp-BCh]@39
  int v24; // [sp+4Ch] [bp-B8h]@39
  int v25; // [sp+50h] [bp-B4h]@39
  int v26; // [sp+54h] [bp-B0h]@39
  int v27; // [sp+58h] [bp-ACh]@39
  int v28; // [sp+5Ch] [bp-A8h]@39
  int v29; // [sp+60h] [bp-A4h]@39
  int v30; // [sp+64h] [bp-A0h]@39
  int v31; // [sp+68h] [bp-9Ch]@39
  int v32; // [sp+6Ch] [bp-98h]@39
  int v33; // [sp+70h] [bp-94h]@39
  int v34; // [sp+74h] [bp-90h]@39
  int v35; // [sp+78h] [bp-8Ch]@39
  int v36; // [sp+7Ch] [bp-88h]@39
  int v37; // [sp+80h] [bp-84h]@39
  int v38; // [sp+84h] [bp-80h]@39
  int v39; // [sp+88h] [bp-7Ch]@39
  int v40; // [sp+8Ch] [bp-78h]@39
  int v41; // [sp+90h] [bp-74h]@39
  int v42; // [sp+94h] [bp-70h]@39
  int v43; // [sp+98h] [bp-6Ch]@39
  int v44; // [sp+9Ch] [bp-68h]@39
  int v45; // [sp+A0h] [bp-64h]@39
  int v46; // [sp+A4h] [bp-60h]@39
  int v47; // [sp+A8h] [bp-5Ch]@39
  int v48; // [sp+ACh] [bp-58h]@39
  int v49; // [sp+B0h] [bp-54h]@39
  int v50; // [sp+B4h] [bp-50h]@39
  int v51; // [sp+B8h] [bp-4Ch]@39
  int v52; // [sp+BCh] [bp-48h]@39
  int v53; // [sp+C0h] [bp-44h]@39
  int v54; // [sp+C4h] [bp-40h]@39
  int v55; // [sp+C8h] [bp-3Ch]@39
  int v56; // [sp+CCh] [bp-38h]@39
  int v57; // [sp+D0h] [bp-34h]@39
  int v58; // [sp+D4h] [bp-30h]@39
  int v59; // [sp+D8h] [bp-2Ch]@39
  int v60; // [sp+DCh] [bp-28h]@39
  int v61; // [sp+E0h] [bp-24h]@39
  int v62; // [sp+E4h] [bp-20h]@39
  int v63; // [sp+E8h] [bp-1Ch]@39
  int v64; // [sp+ECh] [bp-18h]@39
  int v65; // [sp+F0h] [bp-14h]@39
  int v66; // [sp+F4h] [bp-10h]@39
  int v67; // [sp+F8h] [bp-Ch]@39
  int v68; // [sp+FCh] [bp-8h]@39
  int v69; // [sp+100h] [bp-4h]@39

  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 32) = *(_DWORD *)(a1 + 8);
      *(_DWORD *)(a1 + 36) = *(_DWORD *)(a1 + 12);
      *(_DWORD *)(a1 + 104) = 0;
      Play_Sound_Effect(29, 1);
      goto LABEL_3;
    case 1:
LABEL_3:
      *(_DWORD *)(a1 + 8) = *(_DWORD *)(a1 + 32) + (RNG_Range(-1, 1) << 9);
      if ( ++*(_DWORD *)(a1 + 120) == 32 )
        *(_DWORD *)(a1 + 116) = 10;
      break;
    case 0xA:
      *(_DWORD *)(a1 + 116) = 11;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 20) = 512;
      goto LABEL_7;
    case 0xB:
LABEL_7:
      if ( *(_DWORD *)(a1 + 36) < *(_DWORD *)(a1 + 12) )
        *(_DWORD *)(a1 + 20) -= 16;
      if ( *(_DWORD *)(a1 + 36) > *(_DWORD *)(a1 + 12) )
        *(_DWORD *)(a1 + 20) += 16;
      if ( *(_DWORD *)(a1 + 20) > 256 )
        *(_DWORD *)(a1 + 20) = 256;
      if ( *(_DWORD *)(a1 + 20) < -256 )
        *(_DWORD *)(a1 + 20) = -256;
      break;
    case 0xD:
      *(_DWORD *)(a1 + 104) = 1;
      *(_DWORD *)(a1 + 20) += 64;
      if ( *(_DWORD *)(a1 + 20) > 1535 )
        *(_DWORD *)(a1 + 20) = 1535;
      if ( *(_DWORD *)(a1 + 4) & 8 )
      {
        Play_Sound_Effect(23, 1);
        *(_DWORD *)(a1 + 20) = 0;
        *(_DWORD *)(a1 + 116) = 14;
        *(_WORD *)(a1 + 80) |= 8u;
        *(_DWORD *)(a1 + 104) = 2;
      }
      break;
    case 0xF:
      *(_DWORD *)(a1 + 116) = 16;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 104) = 4;
      goto LABEL_22;
    case 0x10:
LABEL_22:
      if ( ++*(_DWORD *)(a1 + 120) == 30 )
      {
        Play_Sound_Effect(21, 1);
        NPC_Create(66, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12) - 0x2000, 0, 0, 0, a1, 0);
      }
      if ( *(_DWORD *)(a1 + 120) == 50 )
        *(_DWORD *)(a1 + 116) = 14;
      break;
    case 0x14:
      *(_DWORD *)(a1 + 116) = 21;
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 20) = 0;
      *(_WORD *)(a1 + 80) |= 8u;
      goto LABEL_28;
    case 0x15:
LABEL_28:
      *(_DWORD *)(a1 + 20) -= 32;
      if ( *(_DWORD *)(a1 + 12) < -4096 )
        *(_BYTE *)a1 = 0;
      break;
    case 0x19:
      *(_DWORD *)(a1 + 116) = 26;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 104) = 5;
      *(_DWORD *)(a1 + 100) = 0;
      goto LABEL_32;
    case 0x1A:
LABEL_32:
      if ( ++*(_DWORD *)(a1 + 104) > 7 )
        *(_DWORD *)(a1 + 104) = 5;
      if ( ++*(_DWORD *)(a1 + 120) == 30 )
      {
        Play_Sound_Effect(101, 1);
        Explosion_(0, 0, 2);
        *(_DWORD *)(a1 + 116) = 27;
        *(_DWORD *)(a1 + 104) = 7;
      }
      break;
    case 0x1B:
      if ( ++*(_DWORD *)(a1 + 120) == 50 )
        *(_DWORD *)(a1 + 116) = 14;
      break;
    default:
      break;
  }
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  v38 = 80;
  v39 = 0;
  v40 = 96;
  v41 = 16;
  v42 = 96;
  v43 = 0;
  v44 = 112;
  v45 = 16;
  v46 = 112;
  v47 = 0;
  v48 = 128;
  v49 = 16;
  v50 = 128;
  v51 = 0;
  v52 = 144;
  v53 = 16;
  v54 = 144;
  v55 = 0;
  v56 = 160;
  v57 = 16;
  v58 = 160;
  v59 = 0;
  v60 = 176;
  v61 = 16;
  v62 = 176;
  v63 = 0;
  v64 = 192;
  v65 = 16;
  v66 = 144;
  v67 = 0;
  v68 = 160;
  v69 = 16;
  v6 = 80;
  v7 = 16;
  v8 = 96;
  v9 = 32;
  v10 = 96;
  v11 = 16;
  v12 = 112;
  v13 = 32;
  v14 = 112;
  v15 = 16;
  v16 = 128;
  v17 = 32;
  v18 = 128;
  v19 = 16;
  v20 = 144;
  v21 = 32;
  v22 = 144;
  v23 = 16;
  v24 = 160;
  v25 = 32;
  v26 = 160;
  v27 = 16;
  v28 = 176;
  v29 = 32;
  v30 = 176;
  v31 = 16;
  v32 = 192;
  v33 = 32;
  v34 = 144;
  v35 = 16;
  v36 = 160;
  v37 = 32;
  if ( *(_DWORD *)(a1 + 116) == 11 )
  {
    if ( *(_DWORD *)(a1 + 100) )
    {
      --*(_DWORD *)(a1 + 100);
      *(_DWORD *)(a1 + 104) = 1;
    }
    else
    {
      if ( RNG_Range(0, 100) == 1 )
        *(_DWORD *)(a1 + 100) = 30;
      *(_DWORD *)(a1 + 104) = 0;
    }
  }
  if ( *(_DWORD *)(a1 + 116) == 14 )
  {
    if ( *(_DWORD *)(a1 + 100) )
    {
      --*(_DWORD *)(a1 + 100);
      *(_DWORD *)(a1 + 104) = 3;
    }
    else
    {
      if ( RNG_Range(0, 100) == 1 )
        *(_DWORD *)(a1 + 100) = 30;
      *(_DWORD *)(a1 + 104) = 2;
    }
  }
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v6 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    *(_DWORD *)(v5 + 8) = v4[2];
    result = v4[3];
    *(_DWORD *)(v5 + 12) = result;
  }
  else
  {
    v1 = &v38 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    *(_DWORD *)(v2 + 8) = v1[2];
    result = v1[3];
    *(_DWORD *)(v2 + 12) = result;
  }
  if ( *(_DWORD *)(a1 + 116) == 1 && *(_DWORD *)(a1 + 100) < 32 )
  {
    result = ++*(_DWORD *)(a1 + 100) / 2 + *(_DWORD *)(a1 + 96) - 16;
    *(_DWORD *)(a1 + 96) = result;
  }
  return result;
}

//----- (00434D10) --------------------------------------------------------
int __cdecl NPC68(int a1)
{
  int *v1; // eax@63
  int v2; // ecx@63
  int result; // eax@63
  int *v4; // eax@64
  int v5; // ecx@64
  int v6; // [sp+4h] [bp-120h]@62
  int v7; // [sp+8h] [bp-11Ch]@62
  int v8; // [sp+Ch] [bp-118h]@62
  int v9; // [sp+10h] [bp-114h]@62
  int v10; // [sp+14h] [bp-110h]@62
  int v11; // [sp+18h] [bp-10Ch]@62
  int v12; // [sp+1Ch] [bp-108h]@62
  int v13; // [sp+20h] [bp-104h]@62
  int v14; // [sp+24h] [bp-100h]@62
  int v15; // [sp+28h] [bp-FCh]@62
  int v16; // [sp+2Ch] [bp-F8h]@62
  int v17; // [sp+30h] [bp-F4h]@62
  int v18; // [sp+34h] [bp-F0h]@62
  int v19; // [sp+38h] [bp-ECh]@62
  int v20; // [sp+3Ch] [bp-E8h]@62
  int v21; // [sp+40h] [bp-E4h]@62
  int v22; // [sp+44h] [bp-E0h]@62
  int v23; // [sp+48h] [bp-DCh]@62
  int v24; // [sp+4Ch] [bp-D8h]@62
  int v25; // [sp+50h] [bp-D4h]@62
  int v26; // [sp+54h] [bp-D0h]@62
  int v27; // [sp+58h] [bp-CCh]@62
  int v28; // [sp+5Ch] [bp-C8h]@62
  int v29; // [sp+60h] [bp-C4h]@62
  int v30; // [sp+64h] [bp-C0h]@62
  int v31; // [sp+68h] [bp-BCh]@62
  int v32; // [sp+6Ch] [bp-B8h]@62
  int v33; // [sp+70h] [bp-B4h]@62
  int v34; // [sp+74h] [bp-B0h]@62
  int v35; // [sp+78h] [bp-ACh]@62
  int v36; // [sp+7Ch] [bp-A8h]@62
  int v37; // [sp+80h] [bp-A4h]@62
  int v38; // [sp+84h] [bp-A0h]@62
  int v39; // [sp+88h] [bp-9Ch]@62
  int v40; // [sp+8Ch] [bp-98h]@62
  int v41; // [sp+90h] [bp-94h]@62
  int v42; // [sp+94h] [bp-90h]@62
  int v43; // [sp+98h] [bp-8Ch]@62
  int v44; // [sp+9Ch] [bp-88h]@62
  int v45; // [sp+A0h] [bp-84h]@62
  int v46; // [sp+A4h] [bp-80h]@62
  int v47; // [sp+A8h] [bp-7Ch]@62
  int v48; // [sp+ACh] [bp-78h]@62
  int v49; // [sp+B0h] [bp-74h]@62
  int v50; // [sp+B4h] [bp-70h]@62
  int v51; // [sp+B8h] [bp-6Ch]@62
  int v52; // [sp+BCh] [bp-68h]@62
  int v53; // [sp+C0h] [bp-64h]@62
  int v54; // [sp+C4h] [bp-60h]@62
  int v55; // [sp+C8h] [bp-5Ch]@62
  int v56; // [sp+CCh] [bp-58h]@62
  int v57; // [sp+D0h] [bp-54h]@62
  int v58; // [sp+D4h] [bp-50h]@62
  int v59; // [sp+D8h] [bp-4Ch]@62
  int v60; // [sp+DCh] [bp-48h]@62
  int v61; // [sp+E0h] [bp-44h]@62
  int v62; // [sp+E4h] [bp-40h]@62
  int v63; // [sp+E8h] [bp-3Ch]@62
  int v64; // [sp+ECh] [bp-38h]@62
  int v65; // [sp+F0h] [bp-34h]@62
  int v66; // [sp+F4h] [bp-30h]@62
  int v67; // [sp+F8h] [bp-2Ch]@62
  int v68; // [sp+FCh] [bp-28h]@62
  int v69; // [sp+100h] [bp-24h]@62
  int v70; // [sp+104h] [bp-20h]@62
  int v71; // [sp+108h] [bp-1Ch]@62
  int v72; // [sp+10Ch] [bp-18h]@62
  int v73; // [sp+110h] [bp-14h]@62
  int v74; // [sp+114h] [bp-10h]@62
  int v75; // [sp+118h] [bp-Ch]@62
  int v76; // [sp+11Ch] [bp-8h]@62
  int v77; // [sp+120h] [bp-4h]@62

  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 120) = 30;
      if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
        *(_DWORD *)(a1 + 76) = 2;
      else
        *(_DWORD *)(a1 + 76) = 0;
      goto LABEL_5;
    case 1:
LABEL_5:
      if ( !--*(_DWORD *)(a1 + 120) )
      {
        *(_DWORD *)(a1 + 116) = 2;
        ++*(_DWORD *)(a1 + 108);
      }
      break;
    case 2:
      *(_DWORD *)(a1 + 116) = 3;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 104) = 1;
      *(_DWORD *)(a1 + 100) = 0;
      goto LABEL_8;
    case 3:
LABEL_8:
      if ( ++*(_DWORD *)(a1 + 100) > 3 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        if ( ++*(_DWORD *)(a1 + 104) == 2 || *(_DWORD *)(a1 + 104) == 4 )
          Play_Sound_Effect(23, 1);
      }
      if ( *(_DWORD *)(a1 + 104) > 4 )
        *(_DWORD *)(a1 + 104) = 1;
      if ( *(_DWORD *)(a1 + 76) )
        *(_DWORD *)(a1 + 16) += 16;
      else
        *(_DWORD *)(a1 + 16) -= 16;
      if ( *(_DWORD *)(a1 + 120) < 8
        || *(_DWORD *)(a1 + 8) - 6144 >= Quote_X_Position
        || *(_DWORD *)(a1 + 8) + 6144 <= Quote_X_Position
        || *(_DWORD *)(a1 + 12) - 6144 >= Quote_Y_Position
        || *(_DWORD *)(a1 + 12) + 4096 <= Quote_Y_Position )
      {
        ++*(_DWORD *)(a1 + 120);
        if ( *(_DWORD *)(a1 + 4) & 5 || *(_DWORD *)(a1 + 120) > 75 )
        {
          *(_DWORD *)(a1 + 116) = 9;
          *(_DWORD *)(a1 + 104) = 0;
        }
        else if ( !(*(_DWORD *)(a1 + 108) % 3) && *(_DWORD *)(a1 + 120) > 25 )
        {
          *(_DWORD *)(a1 + 116) = 4;
          *(_DWORD *)(a1 + 104) = 7;
          *(_DWORD *)(a1 + 20) = -1024;
        }
      }
      else
      {
        *(_DWORD *)(a1 + 116) = 10;
        *(_DWORD *)(a1 + 104) = 5;
        *(_BYTE *)&Player_Flags |= 2u;
        Take_Damage(2);
      }
      break;
    case 4:
      if ( *(_DWORD *)(a1 + 4) & 8 )
      {
        *(_DWORD *)(a1 + 116) = 9;
        *(_DWORD *)(a1 + 104) = 8;
        sub_40F310(30);
        Play_Sound_Effect(26, 1);
      }
      if ( *(_DWORD *)(a1 + 120) >= 8
        && *(_DWORD *)(a1 + 8) - 6144 < Quote_X_Position
        && *(_DWORD *)(a1 + 8) + 6144 > Quote_X_Position
        && *(_DWORD *)(a1 + 12) - 6144 < Quote_Y_Position
        && *(_DWORD *)(a1 + 12) + 4096 > Quote_Y_Position )
      {
        *(_DWORD *)(a1 + 116) = 10;
        *(_DWORD *)(a1 + 104) = 5;
        *(_BYTE *)&Player_Flags |= 2u;
        Take_Damage(2);
      }
      break;
    case 9:
      *(_DWORD *)(a1 + 16) = 4 * *(_DWORD *)(a1 + 16) / 5;
      if ( !*(_DWORD *)(a1 + 16) )
        *(_DWORD *)(a1 + 116) = 0;
      break;
    case 0xA:
      Quote_X_Position = *(_DWORD *)(a1 + 8);
      Quote_Y_Position = *(_DWORD *)(a1 + 12);
      *(_DWORD *)(a1 + 16) = 4 * *(_DWORD *)(a1 + 16) / 5;
      if ( !*(_DWORD *)(a1 + 16) )
      {
        *(_DWORD *)(a1 + 116) = 11;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 5;
        *(_DWORD *)(a1 + 100) = 0;
      }
      break;
    case 0xB:
      Quote_X_Position = *(_DWORD *)(a1 + 8);
      Quote_Y_Position = *(_DWORD *)(a1 + 12);
      if ( ++*(_DWORD *)(a1 + 100) > 2 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 6 )
        *(_DWORD *)(a1 + 104) = 5;
      if ( ++*(_DWORD *)(a1 + 120) > 100 )
        *(_DWORD *)(a1 + 116) = 20;
      break;
    case 0x14:
      Play_Sound_Effect(25, 1);
      *(_BYTE *)&Player_Flags &= 0xFDu;
      if ( *(_DWORD *)(a1 + 76) )
      {
        Quote_X_Position -= 2048;
        Quote_Y_Position -= 4096;
        Quote_X_Velocity = -1535;
        Quote_Y_Velocity = -512;
        *(_DWORD *)&Quote_Direction_Faced = 0;
        *(_DWORD *)(a1 + 76) = 0;
      }
      else
      {
        Quote_X_Position += 2048;
        Quote_Y_Position -= 4096;
        Quote_X_Velocity = 1535;
        Quote_Y_Velocity = -512;
        *(_DWORD *)&Quote_Direction_Faced = 2;
        *(_DWORD *)(a1 + 76) = 2;
      }
      *(_DWORD *)(a1 + 116) = 21;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 104) = 7;
      goto LABEL_54;
    case 0x15:
LABEL_54:
      if ( ++*(_DWORD *)(a1 + 120) >= 50 )
        *(_DWORD *)(a1 + 116) = 0;
      break;
    default:
      break;
  }
  *(_DWORD *)(a1 + 20) += 32;
  if ( *(_DWORD *)(a1 + 16) < -1024 )
    *(_DWORD *)(a1 + 16) = -1024;
  if ( *(_DWORD *)(a1 + 16) > 1024 )
    *(_DWORD *)(a1 + 16) = 1024;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  v42 = 0;
  v43 = 0;
  v44 = 40;
  v45 = 24;
  v46 = 0;
  v47 = 48;
  v48 = 40;
  v49 = 72;
  v50 = 0;
  v51 = 0;
  v52 = 40;
  v53 = 24;
  v54 = 40;
  v55 = 48;
  v56 = 80;
  v57 = 72;
  v58 = 0;
  v59 = 0;
  v60 = 40;
  v61 = 24;
  v62 = 80;
  v63 = 48;
  v64 = 120;
  v65 = 72;
  v66 = 120;
  v67 = 48;
  v68 = 160;
  v69 = 72;
  v70 = 120;
  v71 = 0;
  v72 = 160;
  v73 = 24;
  v74 = 80;
  v75 = 0;
  v76 = 120;
  v77 = 24;
  v6 = 0;
  v7 = 24;
  v8 = 40;
  v9 = 48;
  v10 = 0;
  v11 = 72;
  v12 = 40;
  v13 = 96;
  v14 = 0;
  v15 = 24;
  v16 = 40;
  v17 = 48;
  v18 = 40;
  v19 = 72;
  v20 = 80;
  v21 = 96;
  v22 = 0;
  v23 = 24;
  v24 = 40;
  v25 = 48;
  v26 = 80;
  v27 = 72;
  v28 = 120;
  v29 = 96;
  v30 = 120;
  v31 = 72;
  v32 = 160;
  v33 = 96;
  v34 = 120;
  v35 = 24;
  v36 = 160;
  v37 = 48;
  v38 = 80;
  v39 = 24;
  v40 = 120;
  v41 = 48;
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v6 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    *(_DWORD *)(v5 + 8) = v4[2];
    result = v4[3];
    *(_DWORD *)(v5 + 12) = result;
  }
  else
  {
    v1 = &v42 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    *(_DWORD *)(v2 + 8) = v1[2];
    result = v1[3];
    *(_DWORD *)(v2 + 12) = result;
  }
  return result;
}
// 49E66C: using guessed type int Quote_X_Velocity;
// 49E670: using guessed type int Quote_Y_Velocity;

//----- (004355F0) --------------------------------------------------------
int __cdecl NPC69(int a1)
{
  int *v1; // edx@40
  int result; // eax@40
  int *v3; // edx@41
  signed int v4; // [sp+0h] [bp-C8h]@32
  int v5; // [sp+8h] [bp-C0h]@1
  int v6; // [sp+Ch] [bp-BCh]@1
  int v7; // [sp+10h] [bp-B8h]@1
  int v8; // [sp+14h] [bp-B4h]@1
  int v9; // [sp+18h] [bp-B0h]@1
  int v10; // [sp+1Ch] [bp-ACh]@1
  int v11; // [sp+20h] [bp-A8h]@1
  int v12; // [sp+24h] [bp-A4h]@1
  int v13; // [sp+28h] [bp-A0h]@1
  int v14; // [sp+2Ch] [bp-9Ch]@1
  int v15; // [sp+30h] [bp-98h]@1
  int v16; // [sp+34h] [bp-94h]@1
  int v17; // [sp+38h] [bp-90h]@1
  int v18; // [sp+3Ch] [bp-8Ch]@1
  int v19; // [sp+40h] [bp-88h]@1
  int v20; // [sp+44h] [bp-84h]@1
  int v21; // [sp+48h] [bp-80h]@1
  int v22; // [sp+4Ch] [bp-7Ch]@1
  int v23; // [sp+50h] [bp-78h]@1
  int v24; // [sp+54h] [bp-74h]@1
  int v25; // [sp+58h] [bp-70h]@1
  int v26; // [sp+5Ch] [bp-6Ch]@1
  int v27; // [sp+60h] [bp-68h]@1
  int v28; // [sp+64h] [bp-64h]@1
  int v29; // [sp+68h] [bp-60h]@1
  int v30; // [sp+6Ch] [bp-5Ch]@1
  int v31; // [sp+70h] [bp-58h]@1
  int v32; // [sp+74h] [bp-54h]@1
  int v33; // [sp+78h] [bp-50h]@1
  int v34; // [sp+7Ch] [bp-4Ch]@1
  int v35; // [sp+80h] [bp-48h]@1
  int v36; // [sp+84h] [bp-44h]@1
  int v37; // [sp+88h] [bp-40h]@1
  int v38; // [sp+8Ch] [bp-3Ch]@1
  int v39; // [sp+90h] [bp-38h]@1
  int v40; // [sp+94h] [bp-34h]@1
  int v41; // [sp+98h] [bp-30h]@1
  int v42; // [sp+9Ch] [bp-2Ch]@1
  int v43; // [sp+A0h] [bp-28h]@1
  int v44; // [sp+A4h] [bp-24h]@1
  int v45; // [sp+A8h] [bp-20h]@1
  int v46; // [sp+ACh] [bp-1Ch]@1
  int v47; // [sp+B0h] [bp-18h]@1
  int v48; // [sp+B4h] [bp-14h]@1
  int v49; // [sp+B8h] [bp-10h]@1
  int v50; // [sp+BCh] [bp-Ch]@1
  int v51; // [sp+C0h] [bp-8h]@1
  int v52; // [sp+C4h] [bp-4h]@1

  v29 = 48;
  v30 = 0;
  v31 = 64;
  v32 = 16;
  v33 = 64;
  v34 = 0;
  v35 = 80;
  v36 = 16;
  v37 = 80;
  v38 = 0;
  v39 = 96;
  v40 = 16;
  v41 = 96;
  v42 = 0;
  v43 = 112;
  v44 = 16;
  v45 = 48;
  v46 = 0;
  v47 = 64;
  v48 = 16;
  v49 = 112;
  v50 = 0;
  v51 = 128;
  v52 = 16;
  v5 = 48;
  v6 = 16;
  v7 = 64;
  v8 = 32;
  v9 = 64;
  v10 = 16;
  v11 = 80;
  v12 = 32;
  v13 = 80;
  v14 = 16;
  v15 = 96;
  v16 = 32;
  v17 = 96;
  v18 = 16;
  v19 = 112;
  v20 = 32;
  v21 = 48;
  v22 = 16;
  v23 = 64;
  v24 = 32;
  v25 = 112;
  v26 = 16;
  v27 = 128;
  v28 = 32;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 100) = 0;
      *(_DWORD *)(a1 + 16) = 0;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( RNG_Range(0, 100) == 1 )
      {
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 1;
      }
      else
      {
        if ( RNG_Range(0, 150) == 1 )
        {
          if ( *(_DWORD *)(a1 + 76) )
            *(_DWORD *)(a1 + 76) = 0;
          else
            *(_DWORD *)(a1 + 76) = 2;
        }
        if ( RNG_Range(0, 150) == 1 )
        {
          *(_DWORD *)(a1 + 116) = 3;
          *(_DWORD *)(a1 + 120) = 50;
          *(_DWORD *)(a1 + 104) = 0;
        }
      }
      break;
    case 2:
      if ( ++*(_DWORD *)(a1 + 120) > 8 )
      {
        *(_DWORD *)(a1 + 116) = 1;
        *(_DWORD *)(a1 + 104) = 0;
      }
      break;
    case 3:
      *(_DWORD *)(a1 + 116) = 4;
      *(_DWORD *)(a1 + 104) = 2;
      *(_DWORD *)(a1 + 100) = 0;
      goto LABEL_16;
    case 4:
LABEL_16:
      if ( !--*(_DWORD *)(a1 + 120) )
        *(_DWORD *)(a1 + 116) = 0;
      if ( ++*(_DWORD *)(a1 + 100) > 2 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 4 )
        *(_DWORD *)(a1 + 104) = 2;
      if ( *(_DWORD *)(a1 + 4) & 1 )
      {
        *(_DWORD *)(a1 + 76) = 2;
        *(_DWORD *)(a1 + 16) = 512;
      }
      if ( *(_DWORD *)(a1 + 4) & 4 )
      {
        *(_DWORD *)(a1 + 76) = 0;
        *(_DWORD *)(a1 + 16) = -512;
      }
      if ( *(_DWORD *)(a1 + 76) )
        *(_DWORD *)(a1 + 16) = 256;
      else
        *(_DWORD *)(a1 + 16) = -256;
      break;
    case 5:
      if ( *(_DWORD *)(a1 + 4) & 8 )
        *(_DWORD *)(a1 + 116) = 0;
      break;
    default:
      break;
  }
  v4 = *(_DWORD *)(a1 + 116);
  if ( v4 > 0 && (v4 <= 2 || v4 == 4) && *(_BYTE *)(a1 + 156) )
  {
    *(_DWORD *)(a1 + 20) = -512;
    *(_DWORD *)(a1 + 104) = 5;
    *(_DWORD *)(a1 + 116) = 5;
  }
  *(_DWORD *)(a1 + 20) += 64;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 76) )
  {
    v3 = &v5 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v3;
    *(_DWORD *)(result + 4) = v3[1];
    *(_DWORD *)(result + 8) = v3[2];
    *(_DWORD *)(result + 12) = v3[3];
  }
  else
  {
    v1 = &v29 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v1;
    *(_DWORD *)(result + 4) = v1[1];
    *(_DWORD *)(result + 8) = v1[2];
    *(_DWORD *)(result + 12) = v1[3];
  }
  return result;
}

//----- (00435AB0) --------------------------------------------------------
int __cdecl NPC70(int a1)
{
  int *v1; // eax@5
  int v2; // ecx@5
  int result; // eax@5
  int v4; // [sp+0h] [bp-40h]@1
  int v5; // [sp+4h] [bp-3Ch]@1
  int v6; // [sp+8h] [bp-38h]@1
  int v7; // [sp+Ch] [bp-34h]@1
  int v8; // [sp+10h] [bp-30h]@1
  int v9; // [sp+14h] [bp-2Ch]@1
  int v10; // [sp+18h] [bp-28h]@1
  int v11; // [sp+1Ch] [bp-24h]@1
  int v12; // [sp+20h] [bp-20h]@1
  int v13; // [sp+24h] [bp-1Ch]@1
  int v14; // [sp+28h] [bp-18h]@1
  int v15; // [sp+2Ch] [bp-14h]@1
  int v16; // [sp+30h] [bp-10h]@1
  int v17; // [sp+34h] [bp-Ch]@1
  int v18; // [sp+38h] [bp-8h]@1
  int v19; // [sp+3Ch] [bp-4h]@1

  v4 = 96;
  v5 = 48;
  v6 = 112;
  v7 = 64;
  v8 = 112;
  v9 = 48;
  v10 = 128;
  v11 = 64;
  v12 = 128;
  v13 = 48;
  v14 = 144;
  v15 = 64;
  v16 = 144;
  v17 = 48;
  v18 = 160;
  v19 = 64;
  if ( ++*(_DWORD *)(a1 + 100) > 3 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    ++*(_DWORD *)(a1 + 104);
  }
  if ( *(_DWORD *)(a1 + 104) > 3 )
    *(_DWORD *)(a1 + 104) = 0;
  v1 = &v4 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  *(_DWORD *)(v2 + 8) = v1[2];
  result = v1[3];
  *(_DWORD *)(v2 + 12) = result;
  return result;
}

//----- (00435BA0) --------------------------------------------------------
int __cdecl NPC71(int a1)
{
  int *v1; // edx@20
  int result; // eax@20
  int *v3; // edx@21
  int v4; // [sp+0h] [bp-64h]@1
  int v5; // [sp+4h] [bp-60h]@13
  int v6; // [sp+8h] [bp-5Ch]@13
  int v7; // [sp+Ch] [bp-58h]@13
  int v8; // [sp+10h] [bp-54h]@13
  int v9; // [sp+14h] [bp-50h]@13
  int v10; // [sp+18h] [bp-4Ch]@13
  int v11; // [sp+1Ch] [bp-48h]@13
  int v12; // [sp+20h] [bp-44h]@13
  int v13; // [sp+24h] [bp-40h]@13
  int v14; // [sp+28h] [bp-3Ch]@13
  int v15; // [sp+2Ch] [bp-38h]@13
  int v16; // [sp+30h] [bp-34h]@13
  int v17; // [sp+34h] [bp-30h]@13
  int v18; // [sp+38h] [bp-2Ch]@13
  int v19; // [sp+3Ch] [bp-28h]@13
  int v20; // [sp+40h] [bp-24h]@13
  int v21; // [sp+44h] [bp-20h]@13
  int v22; // [sp+48h] [bp-1Ch]@13
  int v23; // [sp+4Ch] [bp-18h]@13
  int v24; // [sp+50h] [bp-14h]@13
  int v25; // [sp+54h] [bp-10h]@13
  int v26; // [sp+58h] [bp-Ch]@13
  int v27; // [sp+5Ch] [bp-8h]@13
  int v28; // [sp+60h] [bp-4h]@13

  v4 = *(_DWORD *)(a1 + 116);
  if ( v4 )
  {
    if ( v4 != 1 )
      goto LABEL_13;
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 32) = *(_DWORD *)(a1 + 8);
    *(_DWORD *)(a1 + 36) = *(_DWORD *)(a1 + 12);
    *(_DWORD *)(a1 + 20) = 128;
  }
  if ( *(_DWORD *)(a1 + 36) < *(_DWORD *)(a1 + 12) )
    *(_DWORD *)(a1 + 20) -= 8;
  if ( *(_DWORD *)(a1 + 36) > *(_DWORD *)(a1 + 12) )
    *(_DWORD *)(a1 + 20) += 8;
  if ( *(_DWORD *)(a1 + 20) > 256 )
    *(_DWORD *)(a1 + 20) = 256;
  if ( *(_DWORD *)(a1 + 20) < -256 )
    *(_DWORD *)(a1 + 20) = -256;
LABEL_13:
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  v17 = 64;
  v18 = 32;
  v19 = 80;
  v20 = 48;
  v21 = 80;
  v22 = 32;
  v23 = 96;
  v24 = 48;
  v25 = 96;
  v26 = 32;
  v27 = 112;
  v28 = 48;
  v5 = 64;
  v6 = 48;
  v7 = 80;
  v8 = 64;
  v9 = 80;
  v10 = 48;
  v11 = 96;
  v12 = 64;
  v13 = 96;
  v14 = 48;
  v15 = 112;
  v16 = 64;
  if ( ++*(_DWORD *)(a1 + 100) > 4 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    ++*(_DWORD *)(a1 + 104);
  }
  if ( *(_DWORD *)(a1 + 104) > 1 )
    *(_DWORD *)(a1 + 104) = 0;
  if ( *(_BYTE *)(a1 + 156) )
    *(_DWORD *)(a1 + 104) = 2;
  if ( *(_DWORD *)(a1 + 76) )
  {
    v3 = &v5 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v3;
    *(_DWORD *)(result + 4) = v3[1];
    *(_DWORD *)(result + 8) = v3[2];
    *(_DWORD *)(result + 12) = v3[3];
  }
  else
  {
    v1 = &v17 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v1;
    *(_DWORD *)(result + 4) = v1[1];
    *(_DWORD *)(result + 8) = v1[2];
    *(_DWORD *)(result + 12) = v1[3];
  }
  return result;
}

//----- (00435DE0) --------------------------------------------------------
int __cdecl NPC72(int a1)
{
  int result; // eax@4
  int v2; // ST10_4@11
  int v3; // eax@11
  int v4; // ST10_4@12
  int v5; // eax@12
  int *v6; // ecx@13
  int v7; // edx@13
  int v8; // [sp+0h] [bp-20h]@13
  int v9; // [sp+4h] [bp-1Ch]@13
  int v10; // [sp+8h] [bp-18h]@13
  int v11; // [sp+Ch] [bp-14h]@13
  int v12; // [sp+10h] [bp-10h]@13
  int v13; // [sp+14h] [bp-Ch]@13
  int v14; // [sp+18h] [bp-8h]@13
  int v15; // [sp+1Ch] [bp-4h]@13

  if ( !*(_DWORD *)(a1 + 76) )
  {
    if ( ++*(_DWORD *)(a1 + 100) > 1 )
    {
      *(_DWORD *)(a1 + 100) = 0;
      ++*(_DWORD *)(a1 + 104);
    }
    result = a1;
    if ( *(_DWORD *)(a1 + 104) > 1 )
    {
      *(_DWORD *)(a1 + 104) = 0;
      return result;
    }
    if ( Quote_X_Position < *(_DWORD *)(a1 + 8) + 163840
      && Quote_X_Position > *(_DWORD *)(a1 + 8) - 163840
      && Quote_Y_Position < *(_DWORD *)(a1 + 12) + 122880
      && Quote_Y_Position > *(_DWORD *)(a1 + 12) - 122880 )
    {
      if ( ++*(_DWORD *)(a1 + 116) % 2 )
      {
        v2 = 3 * RNG_Range(-512, 128);
        v3 = RNG_Range(-512, 512);
        NPC_Create(73, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 2 * v3, v2, 0, 0, 256);
      }
      v4 = 3 * RNG_Range(-512, 128);
      v5 = RNG_Range(-512, 512);
      NPC_Create(73, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 2 * v5, v4, 0, 0, 256);
    }
  }
  v8 = 224;
  v9 = 48;
  v10 = 240;
  v11 = 64;
  v12 = 240;
  v13 = 48;
  v14 = 256;
  v15 = 64;
  v6 = &v8 + 4 * *(_DWORD *)(a1 + 104);
  v7 = a1 + 84;
  *(_DWORD *)v7 = *v6;
  *(_DWORD *)(v7 + 4) = v6[1];
  result = v6[2];
  *(_DWORD *)(v7 + 8) = result;
  *(_DWORD *)(v7 + 12) = v6[3];
  return result;
}

//----- (00435FC0) --------------------------------------------------------
int __cdecl NPC73(int a1)
{
  int *v1; // edx@3
  int v2; // eax@3
  int result; // eax@14
  int v4; // [sp+0h] [bp-50h]@1
  int v5; // [sp+4h] [bp-4Ch]@1
  int v6; // [sp+8h] [bp-48h]@1
  int v7; // [sp+Ch] [bp-44h]@1
  int v8; // [sp+10h] [bp-40h]@1
  int v9; // [sp+14h] [bp-3Ch]@1
  int v10; // [sp+18h] [bp-38h]@1
  int v11; // [sp+1Ch] [bp-34h]@1
  int v12; // [sp+20h] [bp-30h]@1
  int v13; // [sp+24h] [bp-2Ch]@1
  int v14; // [sp+28h] [bp-28h]@1
  int v15; // [sp+2Ch] [bp-24h]@1
  int v16; // [sp+30h] [bp-20h]@1
  int v17; // [sp+34h] [bp-1Ch]@1
  int v18; // [sp+38h] [bp-18h]@1
  int v19; // [sp+3Ch] [bp-14h]@1
  int v20; // [sp+40h] [bp-10h]@1
  int v21; // [sp+44h] [bp-Ch]@1
  int v22; // [sp+48h] [bp-8h]@1
  int v23; // [sp+4Ch] [bp-4h]@1

  v4 = 72;
  v5 = 16;
  v6 = 74;
  v7 = 18;
  v8 = 74;
  v9 = 16;
  v10 = 76;
  v11 = 18;
  v12 = 76;
  v13 = 16;
  v14 = 78;
  v15 = 18;
  v16 = 78;
  v17 = 16;
  v18 = 80;
  v19 = 18;
  v20 = 80;
  v21 = 16;
  v22 = 82;
  v23 = 18;
  *(_DWORD *)(a1 + 20) += 32;
  *(_DWORD *)(a1 + 104) = RNG_Range(0, 4);
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  v1 = &v4 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  *(_DWORD *)(v2 + 8) = v1[2];
  *(_DWORD *)(v2 + 12) = v1[3];
  if ( *(_DWORD *)(a1 + 76) == 2 )
  {
    *(_DWORD *)(a1 + 88) += 2;
    *(_DWORD *)(a1 + 96) += 2;
  }
  if ( ++*(_DWORD *)(a1 + 120) > 10 )
  {
    if ( *(_DWORD *)(a1 + 4) & 1 )
      *(_BYTE *)a1 = 0;
    if ( *(_DWORD *)(a1 + 4) & 4 )
      *(_BYTE *)a1 = 0;
    if ( *(_DWORD *)(a1 + 4) & 8 )
      *(_BYTE *)a1 = 0;
    if ( *(_DWORD *)(a1 + 4) & 0x100 )
      *(_BYTE *)a1 = 0;
  }
  result = a1;
  if ( *(_DWORD *)(a1 + 12) > *(signed __int16 *)&word_49E588 << 13 )
    *(_BYTE *)a1 = 0;
  return result;
}

//----- (00436180) --------------------------------------------------------
int __cdecl NPC74(int a1)
{
  int *v1; // ecx@24
  int v2; // edx@24
  int result; // eax@24
  int *v4; // ecx@25
  int v5; // edx@25
  int v6; // [sp+4h] [bp-C0h]@1
  int v7; // [sp+8h] [bp-BCh]@1
  int v8; // [sp+Ch] [bp-B8h]@1
  int v9; // [sp+10h] [bp-B4h]@1
  int v10; // [sp+14h] [bp-B0h]@1
  int v11; // [sp+18h] [bp-ACh]@1
  int v12; // [sp+1Ch] [bp-A8h]@1
  int v13; // [sp+20h] [bp-A4h]@1
  int v14; // [sp+24h] [bp-A0h]@1
  int v15; // [sp+28h] [bp-9Ch]@1
  int v16; // [sp+2Ch] [bp-98h]@1
  int v17; // [sp+30h] [bp-94h]@1
  int v18; // [sp+34h] [bp-90h]@1
  int v19; // [sp+38h] [bp-8Ch]@1
  int v20; // [sp+3Ch] [bp-88h]@1
  int v21; // [sp+40h] [bp-84h]@1
  int v22; // [sp+44h] [bp-80h]@1
  int v23; // [sp+48h] [bp-7Ch]@1
  int v24; // [sp+4Ch] [bp-78h]@1
  int v25; // [sp+50h] [bp-74h]@1
  int v26; // [sp+54h] [bp-70h]@1
  int v27; // [sp+58h] [bp-6Ch]@1
  int v28; // [sp+5Ch] [bp-68h]@1
  int v29; // [sp+60h] [bp-64h]@1
  int v30; // [sp+64h] [bp-60h]@1
  int v31; // [sp+68h] [bp-5Ch]@1
  int v32; // [sp+6Ch] [bp-58h]@1
  int v33; // [sp+70h] [bp-54h]@1
  int v34; // [sp+74h] [bp-50h]@1
  int v35; // [sp+78h] [bp-4Ch]@1
  int v36; // [sp+7Ch] [bp-48h]@1
  int v37; // [sp+80h] [bp-44h]@1
  int v38; // [sp+84h] [bp-40h]@1
  int v39; // [sp+88h] [bp-3Ch]@1
  int v40; // [sp+8Ch] [bp-38h]@1
  int v41; // [sp+90h] [bp-34h]@1
  int v42; // [sp+94h] [bp-30h]@1
  int v43; // [sp+98h] [bp-2Ch]@1
  int v44; // [sp+9Ch] [bp-28h]@1
  int v45; // [sp+A0h] [bp-24h]@1
  int v46; // [sp+A4h] [bp-20h]@1
  int v47; // [sp+A8h] [bp-1Ch]@1
  int v48; // [sp+ACh] [bp-18h]@1
  int v49; // [sp+B0h] [bp-14h]@1
  int v50; // [sp+B4h] [bp-10h]@1
  int v51; // [sp+B8h] [bp-Ch]@1
  int v52; // [sp+BCh] [bp-8h]@1
  int v53; // [sp+C0h] [bp-4h]@1

  v30 = 64;
  v31 = 0;
  v32 = 80;
  v33 = 16;
  v34 = 80;
  v35 = 0;
  v36 = 96;
  v37 = 16;
  v38 = 96;
  v39 = 0;
  v40 = 112;
  v41 = 16;
  v42 = 64;
  v43 = 0;
  v44 = 80;
  v45 = 16;
  v46 = 112;
  v47 = 0;
  v48 = 128;
  v49 = 16;
  v50 = 64;
  v51 = 0;
  v52 = 80;
  v53 = 16;
  v6 = 64;
  v7 = 16;
  v8 = 80;
  v9 = 32;
  v10 = 80;
  v11 = 16;
  v12 = 96;
  v13 = 32;
  v14 = 96;
  v15 = 16;
  v16 = 112;
  v17 = 32;
  v18 = 64;
  v19 = 16;
  v20 = 80;
  v21 = 32;
  v22 = 112;
  v23 = 16;
  v24 = 128;
  v25 = 32;
  v26 = 64;
  v27 = 16;
  v28 = 80;
  v29 = 32;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 100) = 0;
      *(_DWORD *)(a1 + 16) = 0;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( RNG_Range(0, 120) == 10 )
      {
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 1;
      }
      break;
    case 2:
      if ( ++*(_DWORD *)(a1 + 120) > 8 )
      {
        *(_DWORD *)(a1 + 116) = 1;
        *(_DWORD *)(a1 + 104) = 0;
      }
      break;
    case 8:
      *(_DWORD *)(a1 + 116) = 9;
      *(_DWORD *)(a1 + 104) = 2;
      *(_DWORD *)(a1 + 100) = 0;
      goto LABEL_10;
    case 9:
LABEL_10:
      if ( ++*(_DWORD *)(a1 + 100) > 4 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 5 )
        *(_DWORD *)(a1 + 104) = 2;
      if ( *(_DWORD *)(a1 + 76) )
        *(_DWORD *)(a1 + 16) = 512;
      else
        *(_DWORD *)(a1 + 16) = -512;
      break;
    default:
      break;
  }
  *(_DWORD *)(a1 + 20) += 64;
  if ( *(_DWORD *)(a1 + 16) > 1024 )
    *(_DWORD *)(a1 + 16) = 1024;
  if ( *(_DWORD *)(a1 + 16) < -1024 )
    *(_DWORD *)(a1 + 16) = -1024;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v6 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    result = v4[2];
    *(_DWORD *)(v5 + 8) = result;
    *(_DWORD *)(v5 + 12) = v4[3];
  }
  else
  {
    v1 = &v30 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    result = v1[2];
    *(_DWORD *)(v2 + 8) = result;
    *(_DWORD *)(v2 + 12) = v1[3];
  }
  return result;
}

//----- (00436540) --------------------------------------------------------
int __cdecl NPC75(int a1)
{
  int *v1; // edx@11
  int result; // eax@11
  int v3; // [sp+0h] [bp-24h]@1
  int v4; // [sp+4h] [bp-20h]@1
  int v5; // [sp+8h] [bp-1Ch]@1
  int v6; // [sp+Ch] [bp-18h]@1
  int v7; // [sp+10h] [bp-14h]@1
  int v8; // [sp+14h] [bp-10h]@1
  int v9; // [sp+18h] [bp-Ch]@1
  int v10; // [sp+1Ch] [bp-8h]@1
  int v11; // [sp+20h] [bp-4h]@1

  v4 = 272;
  v5 = 32;
  v6 = 296;
  v7 = 56;
  v8 = 296;
  v9 = 32;
  v10 = 320;
  v11 = 56;
  v3 = *(_DWORD *)(a1 + 116);
  if ( v3 )
  {
    if ( v3 != 1 )
      goto LABEL_11;
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 104) = 0;
    *(_DWORD *)(a1 + 100) = 0;
  }
  *(_DWORD *)(a1 + 104) = *(_DWORD *)(a1 + 8) - 24576 < Quote_X_Position
                       && *(_DWORD *)(a1 + 8) + 24576 > Quote_X_Position
                       && *(_DWORD *)(a1 + 12) - 24576 < Quote_Y_Position
                       && *(_DWORD *)(a1 + 12) + 0x2000 > Quote_Y_Position;
LABEL_11:
  v1 = &v4 + 4 * *(_DWORD *)(a1 + 104);
  result = a1 + 84;
  *(_DWORD *)result = *v1;
  *(_DWORD *)(result + 4) = v1[1];
  *(_DWORD *)(result + 8) = v1[2];
  *(_DWORD *)(result + 12) = v1[3];
  return result;
}

//----- (00436650) --------------------------------------------------------
int __cdecl NPC76(int a1)
{
  int result; // eax@1

  *(_DWORD *)(a1 + 84) = 16 * *(_DWORD *)(a1 + 48);
  *(_DWORD *)(a1 + 88) = 0;
  result = a1;
  *(_DWORD *)(a1 + 92) = *(_DWORD *)(a1 + 84) + 16;
  *(_DWORD *)(a1 + 96) = 16;
  return result;
}

//----- (00436690) --------------------------------------------------------
// NPC 77 : Sandaim the farmer
int __cdecl NPC77_Sandaim_the_Farmer(int a1)
{
  int *v1; // edx@12
  int result; // eax@12
  int v3; // [sp+0h] [bp-34h]@1
  int v4; // [sp+4h] [bp-30h]@1
  int v5; // [sp+8h] [bp-2Ch]@1
  int v6; // [sp+Ch] [bp-28h]@1
  int v7; // [sp+10h] [bp-24h]@1
  int v8; // [sp+14h] [bp-20h]@1
  int v9; // [sp+18h] [bp-1Ch]@1
  int v10; // [sp+1Ch] [bp-18h]@1
  int v11; // [sp+20h] [bp-14h]@1
  int v12; // [sp+24h] [bp-10h]@1
  int v13; // [sp+28h] [bp-Ch]@1
  int v14; // [sp+2Ch] [bp-8h]@1
  int v15; // [sp+30h] [bp-4h]@1

  v4 = 0;
  v5 = 16;
  v6 = 48;
  v7 = 48;
  v8 = 48;
  v9 = 16;
  v10 = 96;
  v11 = 48;
  v12 = 96;
  v13 = 16;
  v14 = 144;
  v15 = 48;
  v3 = *(_DWORD *)(a1 + 116);
  if ( v3 )
  {
    if ( v3 != 1 )
    {
      if ( v3 == 2 && ++*(_DWORD *)(a1 + 120) > 8 )
      {
        *(_DWORD *)(a1 + 116) = 1;
        *(_DWORD *)(a1 + 104) = 0;
      }
      goto LABEL_11;
    }
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 104) = 0;
    *(_DWORD *)(a1 + 100) = 0;
  }
  if ( RNG_Range(0, 120) == 10 )
  {
    *(_DWORD *)(a1 + 116) = 2;
    *(_DWORD *)(a1 + 120) = 0;
    *(_DWORD *)(a1 + 104) = 1;
  }
LABEL_11:
  if ( *(_DWORD *)(a1 + 76) )
  {
    result = a1 + 84;
    *(_DWORD *)result = v12;
    *(_DWORD *)(result + 4) = v13;
    *(_DWORD *)(result + 8) = v14;
    *(_DWORD *)(result + 12) = v15;
  }
  else
  {
    v1 = &v4 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v1;
    *(_DWORD *)(result + 4) = v1[1];
    *(_DWORD *)(result + 8) = v1[2];
    *(_DWORD *)(result + 12) = v1[3];
  }
  return result;
}

//----- (004367E0) --------------------------------------------------------
// NPC 78 : Pot
signed int __cdecl NPC78_Pot(int a1)
{
  int v1; // ecx@2
  signed int result; // eax@2
  int v3; // ecx@3

  if ( *(_DWORD *)(a1 + 76) )
  {
    v3 = a1 + 84;
    *(_DWORD *)v3 = 176;
    *(_DWORD *)(v3 + 4) = 48;
    *(_DWORD *)(v3 + 8) = 192;
    result = 64;
    *(_DWORD *)(v3 + 12) = 64;
  }
  else
  {
    v1 = a1 + 84;
    *(_DWORD *)v1 = 160;
    *(_DWORD *)(v1 + 4) = 48;
    *(_DWORD *)(v1 + 8) = 176;
    result = 64;
    *(_DWORD *)(v1 + 12) = 64;
  }
  return result;
}

//----- (00436870) --------------------------------------------------------
int __cdecl NPC79(int a1)
{
  int *v1; // eax@21
  int v2; // ecx@21
  int result; // eax@21
  int *v4; // eax@22
  int v5; // ecx@22
  int v6; // [sp+0h] [bp-64h]@1
  int v7; // [sp+4h] [bp-60h]@1
  int v8; // [sp+8h] [bp-5Ch]@1
  int v9; // [sp+Ch] [bp-58h]@1
  int v10; // [sp+10h] [bp-54h]@1
  int v11; // [sp+14h] [bp-50h]@1
  int v12; // [sp+18h] [bp-4Ch]@1
  int v13; // [sp+1Ch] [bp-48h]@1
  int v14; // [sp+20h] [bp-44h]@1
  int v15; // [sp+24h] [bp-40h]@1
  int v16; // [sp+28h] [bp-3Ch]@1
  int v17; // [sp+2Ch] [bp-38h]@1
  int v18; // [sp+30h] [bp-34h]@1
  int v19; // [sp+34h] [bp-30h]@1
  int v20; // [sp+38h] [bp-2Ch]@1
  int v21; // [sp+3Ch] [bp-28h]@1
  int v22; // [sp+40h] [bp-24h]@1
  int v23; // [sp+44h] [bp-20h]@1
  int v24; // [sp+48h] [bp-1Ch]@1
  int v25; // [sp+4Ch] [bp-18h]@1
  int v26; // [sp+50h] [bp-14h]@1
  int v27; // [sp+54h] [bp-10h]@1
  int v28; // [sp+58h] [bp-Ch]@1
  int v29; // [sp+5Ch] [bp-8h]@1
  int v30; // [sp+60h] [bp-4h]@1

  v19 = 0;
  v20 = 0;
  v21 = 16;
  v22 = 16;
  v23 = 16;
  v24 = 0;
  v25 = 32;
  v26 = 16;
  v27 = 32;
  v28 = 0;
  v29 = 48;
  v30 = 16;
  v7 = 0;
  v8 = 16;
  v9 = 16;
  v10 = 32;
  v11 = 16;
  v12 = 16;
  v13 = 32;
  v14 = 32;
  v15 = 32;
  v16 = 16;
  v17 = 48;
  v18 = 32;
  v6 = *(_DWORD *)(a1 + 116);
  if ( v6 )
  {
    if ( v6 == 2 )
    {
      *(_DWORD *)(a1 + 104) = 0;
      if ( RNG_Range(0, 120) == 10 )
      {
        *(_DWORD *)(a1 + 116) = 3;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 1;
      }
      if ( *(_DWORD *)(a1 + 8) - 0x4000 < Quote_X_Position
        && *(_DWORD *)(a1 + 8) + 0x4000 > Quote_X_Position
        && *(_DWORD *)(a1 + 12) - 0x4000 < Quote_Y_Position
        && *(_DWORD *)(a1 + 12) + 0x2000 > Quote_Y_Position )
      {
        if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
          *(_DWORD *)(a1 + 76) = 2;
        else
          *(_DWORD *)(a1 + 76) = 0;
      }
    }
    else if ( v6 == 3 && ++*(_DWORD *)(a1 + 120) > 8 )
    {
      *(_DWORD *)(a1 + 116) = 2;
      *(_DWORD *)(a1 + 104) = 0;
    }
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 104) = 2;
    *(_DWORD *)(a1 + 100) = 0;
  }
  *(_DWORD *)(a1 + 20) += 64;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v7 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    *(_DWORD *)(v5 + 8) = v4[2];
    result = v4[3];
    *(_DWORD *)(v5 + 12) = result;
  }
  else
  {
    v1 = &v19 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    *(_DWORD *)(v2 + 8) = v1[2];
    result = v1[3];
    *(_DWORD *)(v2 + 12) = result;
  }
  return result;
}

//----- (00436AE0) --------------------------------------------------------
int __cdecl NPC80(int a1)
{
  int *v1; // edx@50
  int result; // eax@50
  int *v3; // edx@51
  int v4; // [sp+4h] [bp-E0h]@1
  int v5; // [sp+8h] [bp-DCh]@1
  int v6; // [sp+Ch] [bp-D8h]@1
  int v7; // [sp+10h] [bp-D4h]@1
  int v8; // [sp+14h] [bp-D0h]@1
  int v9; // [sp+18h] [bp-CCh]@1
  int v10; // [sp+1Ch] [bp-C8h]@1
  int v11; // [sp+20h] [bp-C4h]@1
  int v12; // [sp+24h] [bp-C0h]@1
  int v13; // [sp+28h] [bp-BCh]@1
  int v14; // [sp+2Ch] [bp-B8h]@1
  int v15; // [sp+30h] [bp-B4h]@1
  int v16; // [sp+34h] [bp-B0h]@1
  int v17; // [sp+38h] [bp-ACh]@1
  int v18; // [sp+3Ch] [bp-A8h]@1
  int v19; // [sp+40h] [bp-A4h]@1
  int v20; // [sp+44h] [bp-A0h]@1
  int v21; // [sp+48h] [bp-9Ch]@1
  int v22; // [sp+4Ch] [bp-98h]@1
  int v23; // [sp+50h] [bp-94h]@1
  int v24; // [sp+54h] [bp-90h]@1
  int v25; // [sp+58h] [bp-8Ch]@1
  int v26; // [sp+5Ch] [bp-88h]@1
  int v27; // [sp+60h] [bp-84h]@1
  int v28; // [sp+64h] [bp-80h]@1
  int v29; // [sp+68h] [bp-7Ch]@1
  int v30; // [sp+6Ch] [bp-78h]@1
  int v31; // [sp+70h] [bp-74h]@1
  int v32; // [sp+74h] [bp-70h]@1
  int v33; // [sp+78h] [bp-6Ch]@1
  int v34; // [sp+7Ch] [bp-68h]@1
  int v35; // [sp+80h] [bp-64h]@1
  int v36; // [sp+84h] [bp-60h]@1
  int v37; // [sp+88h] [bp-5Ch]@1
  int v38; // [sp+8Ch] [bp-58h]@1
  int v39; // [sp+90h] [bp-54h]@1
  int v40; // [sp+94h] [bp-50h]@1
  int v41; // [sp+98h] [bp-4Ch]@1
  int v42; // [sp+9Ch] [bp-48h]@1
  int v43; // [sp+A0h] [bp-44h]@1
  int v44; // [sp+A4h] [bp-40h]@1
  int v45; // [sp+A8h] [bp-3Ch]@1
  int v46; // [sp+ACh] [bp-38h]@1
  int v47; // [sp+B0h] [bp-34h]@1
  int v48; // [sp+B4h] [bp-30h]@1
  int v49; // [sp+B8h] [bp-2Ch]@1
  int v50; // [sp+BCh] [bp-28h]@1
  int v51; // [sp+C0h] [bp-24h]@1
  int v52; // [sp+C4h] [bp-20h]@1
  int v53; // [sp+C8h] [bp-1Ch]@1
  int v54; // [sp+CCh] [bp-18h]@1
  int v55; // [sp+D0h] [bp-14h]@1
  int v56; // [sp+D4h] [bp-10h]@1
  int v57; // [sp+D8h] [bp-Ch]@1
  int v58; // [sp+DCh] [bp-8h]@1
  int v59; // [sp+E0h] [bp-4h]@1

  v32 = 0;
  v33 = 64;
  v34 = 24;
  v35 = 88;
  v36 = 24;
  v37 = 64;
  v38 = 48;
  v39 = 88;
  v40 = 0;
  v41 = 64;
  v42 = 24;
  v43 = 88;
  v44 = 48;
  v45 = 64;
  v46 = 72;
  v47 = 88;
  v48 = 72;
  v49 = 64;
  v50 = 96;
  v51 = 88;
  v52 = 96;
  v53 = 64;
  v54 = 120;
  v55 = 88;
  v56 = 120;
  v57 = 64;
  v58 = 144;
  v59 = 88;
  v4 = 0;
  v5 = 88;
  v6 = 24;
  v7 = 112;
  v8 = 24;
  v9 = 88;
  v10 = 48;
  v11 = 112;
  v12 = 0;
  v13 = 88;
  v14 = 24;
  v15 = 112;
  v16 = 48;
  v17 = 88;
  v18 = 72;
  v19 = 112;
  v20 = 72;
  v21 = 88;
  v22 = 96;
  v23 = 112;
  v24 = 96;
  v25 = 88;
  v26 = 120;
  v27 = 112;
  v28 = 120;
  v29 = 88;
  v30 = 144;
  v31 = 112;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_WORD *)(a1 + 80) &= 0xFFDFu;
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 164) = 0;
      *(_DWORD *)(a1 + 124) = 2048;
      goto LABEL_3;
    case 1:
LABEL_3:
      *(_DWORD *)(a1 + 104) = 0;
      if ( *(_DWORD *)(a1 + 8) - 0x10000 < Quote_X_Position
        && *(_DWORD *)(a1 + 8) + 0x10000 > Quote_X_Position
        && *(_DWORD *)(a1 + 12) - 24576 < Quote_Y_Position
        && *(_DWORD *)(a1 + 12) + 0x4000 > Quote_Y_Position )
      {
        *(_DWORD *)(a1 + 100) = 0;
        *(_DWORD *)(a1 + 116) = 2;
      }
      if ( *(_BYTE *)(a1 + 156) )
      {
        *(_DWORD *)(a1 + 104) = 1;
        *(_DWORD *)(a1 + 100) = 0;
        *(_DWORD *)(a1 + 116) = 2;
        *(_WORD *)(a1 + 80) &= 0xFFDFu;
      }
      if ( Quote_X_Position >= *(_DWORD *)(a1 + 8) )
        *(_DWORD *)(a1 + 76) = 2;
      else
        *(_DWORD *)(a1 + 76) = 0;
      break;
    case 2:
      if ( ++*(_DWORD *)(a1 + 100) > 6 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 3 )
        *(_DWORD *)(a1 + 104) = 0;
      if ( *(_DWORD *)(a1 + 8) - 0x2000 < Quote_X_Position && *(_DWORD *)(a1 + 8) + 0x2000 > Quote_X_Position )
      {
        *(_DWORD *)(a1 + 124) = 9216;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 116) = 3;
        *(_WORD *)(a1 + 80) |= 0x20u;
        Play_Sound_Effect(34, 1);
        if ( *(_DWORD *)(a1 + 76) )
          *(_DWORD *)(a1 + 16) = 1024;
        else
          *(_DWORD *)(a1 + 16) = -1024;
      }
      if ( Quote_X_Position >= *(_DWORD *)(a1 + 8) )
      {
        *(_DWORD *)(a1 + 76) = 2;
        *(_DWORD *)(a1 + 16) = 256;
      }
      else
      {
        *(_DWORD *)(a1 + 76) = 0;
        *(_DWORD *)(a1 + 16) = -256;
      }
      break;
    case 3:
      *(_DWORD *)(a1 + 16) = 0;
      if ( ++*(_DWORD *)(a1 + 120) > 40 )
      {
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 116) = 4;
        Play_Sound_Effect(106, 1);
      }
      *(_DWORD *)(a1 + 104) = 4;
      break;
    case 4:
      *(_DWORD *)(a1 + 164) = 10;
      if ( ++*(_DWORD *)(a1 + 120) > 2 )
      {
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 116) = 5;
      }
      *(_DWORD *)(a1 + 104) = 5;
      break;
    case 5:
      *(_DWORD *)(a1 + 104) = 6;
      if ( ++*(_DWORD *)(a1 + 120) > 60 )
        *(_DWORD *)(a1 + 116) = 0;
      break;
    default:
      break;
  }
  if ( *(_DWORD *)(a1 + 16) < 0 && *(_DWORD *)(a1 + 4) & 1 )
    *(_DWORD *)(a1 + 16) = 0;
  if ( *(_DWORD *)(a1 + 16) > 0 && *(_DWORD *)(a1 + 4) & 4 )
    *(_DWORD *)(a1 + 16) = 0;
  *(_DWORD *)(a1 + 20) += 32;
  if ( *(_DWORD *)(a1 + 16) > 1024 )
    *(_DWORD *)(a1 + 16) = 1024;
  if ( *(_DWORD *)(a1 + 16) < -1024 )
    *(_DWORD *)(a1 + 16) = -1024;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 16) = 1535;
  if ( *(_DWORD *)(a1 + 20) < -1535 )
    *(_DWORD *)(a1 + 16) = -1535;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 76) )
  {
    v3 = &v4 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v3;
    *(_DWORD *)(result + 4) = v3[1];
    *(_DWORD *)(result + 8) = v3[2];
    *(_DWORD *)(result + 12) = v3[3];
  }
  else
  {
    v1 = &v32 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v1;
    *(_DWORD *)(result + 4) = v1[1];
    *(_DWORD *)(result + 8) = v1[2];
    *(_DWORD *)(result + 12) = v1[3];
  }
  return result;
}

//----- (004370F0) --------------------------------------------------------
int __cdecl NPC81(int a1)
{
  int *v1; // eax@42
  int v2; // ecx@42
  int result; // eax@42
  int *v4; // eax@43
  int v5; // ecx@43
  signed int v6; // [sp+0h] [bp-C8h]@32
  int v7; // [sp+8h] [bp-C0h]@1
  int v8; // [sp+Ch] [bp-BCh]@1
  int v9; // [sp+10h] [bp-B8h]@1
  int v10; // [sp+14h] [bp-B4h]@1
  int v11; // [sp+18h] [bp-B0h]@1
  int v12; // [sp+1Ch] [bp-ACh]@1
  int v13; // [sp+20h] [bp-A8h]@1
  int v14; // [sp+24h] [bp-A4h]@1
  int v15; // [sp+28h] [bp-A0h]@1
  int v16; // [sp+2Ch] [bp-9Ch]@1
  int v17; // [sp+30h] [bp-98h]@1
  int v18; // [sp+34h] [bp-94h]@1
  int v19; // [sp+38h] [bp-90h]@1
  int v20; // [sp+3Ch] [bp-8Ch]@1
  int v21; // [sp+40h] [bp-88h]@1
  int v22; // [sp+44h] [bp-84h]@1
  int v23; // [sp+48h] [bp-80h]@1
  int v24; // [sp+4Ch] [bp-7Ch]@1
  int v25; // [sp+50h] [bp-78h]@1
  int v26; // [sp+54h] [bp-74h]@1
  int v27; // [sp+58h] [bp-70h]@1
  int v28; // [sp+5Ch] [bp-6Ch]@1
  int v29; // [sp+60h] [bp-68h]@1
  int v30; // [sp+64h] [bp-64h]@1
  int v31; // [sp+68h] [bp-60h]@1
  int v32; // [sp+6Ch] [bp-5Ch]@1
  int v33; // [sp+70h] [bp-58h]@1
  int v34; // [sp+74h] [bp-54h]@1
  int v35; // [sp+78h] [bp-50h]@1
  int v36; // [sp+7Ch] [bp-4Ch]@1
  int v37; // [sp+80h] [bp-48h]@1
  int v38; // [sp+84h] [bp-44h]@1
  int v39; // [sp+88h] [bp-40h]@1
  int v40; // [sp+8Ch] [bp-3Ch]@1
  int v41; // [sp+90h] [bp-38h]@1
  int v42; // [sp+94h] [bp-34h]@1
  int v43; // [sp+98h] [bp-30h]@1
  int v44; // [sp+9Ch] [bp-2Ch]@1
  int v45; // [sp+A0h] [bp-28h]@1
  int v46; // [sp+A4h] [bp-24h]@1
  int v47; // [sp+A8h] [bp-20h]@1
  int v48; // [sp+ACh] [bp-1Ch]@1
  int v49; // [sp+B0h] [bp-18h]@1
  int v50; // [sp+B4h] [bp-14h]@1
  int v51; // [sp+B8h] [bp-10h]@1
  int v52; // [sp+BCh] [bp-Ch]@1
  int v53; // [sp+C0h] [bp-8h]@1
  int v54; // [sp+C4h] [bp-4h]@1

  v31 = 144;
  v32 = 64;
  v33 = 168;
  v34 = 88;
  v35 = 168;
  v36 = 64;
  v37 = 192;
  v38 = 88;
  v39 = 192;
  v40 = 64;
  v41 = 216;
  v42 = 88;
  v43 = 216;
  v44 = 64;
  v45 = 240;
  v46 = 88;
  v47 = 144;
  v48 = 64;
  v49 = 168;
  v50 = 88;
  v51 = 240;
  v52 = 64;
  v53 = 264;
  v54 = 88;
  v7 = 144;
  v8 = 88;
  v9 = 168;
  v10 = 112;
  v11 = 168;
  v12 = 88;
  v13 = 192;
  v14 = 112;
  v15 = 192;
  v16 = 88;
  v17 = 216;
  v18 = 112;
  v19 = 216;
  v20 = 88;
  v21 = 240;
  v22 = 112;
  v23 = 144;
  v24 = 88;
  v25 = 168;
  v26 = 112;
  v27 = 240;
  v28 = 88;
  v29 = 264;
  v30 = 112;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 100) = 0;
      *(_DWORD *)(a1 + 16) = 0;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( RNG_Range(0, 100) == 1 )
      {
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 1;
      }
      else
      {
        if ( RNG_Range(0, 150) == 1 )
        {
          if ( *(_DWORD *)(a1 + 76) )
            *(_DWORD *)(a1 + 76) = 0;
          else
            *(_DWORD *)(a1 + 76) = 2;
        }
        if ( RNG_Range(0, 150) == 1 )
        {
          *(_DWORD *)(a1 + 116) = 3;
          *(_DWORD *)(a1 + 120) = 50;
          *(_DWORD *)(a1 + 104) = 0;
        }
      }
      break;
    case 2:
      if ( ++*(_DWORD *)(a1 + 120) > 8 )
      {
        *(_DWORD *)(a1 + 116) = 1;
        *(_DWORD *)(a1 + 104) = 0;
      }
      break;
    case 3:
      *(_DWORD *)(a1 + 116) = 4;
      *(_DWORD *)(a1 + 104) = 2;
      *(_DWORD *)(a1 + 100) = 0;
      goto LABEL_16;
    case 4:
LABEL_16:
      if ( !--*(_DWORD *)(a1 + 120) )
        *(_DWORD *)(a1 + 116) = 0;
      if ( ++*(_DWORD *)(a1 + 100) > 2 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 4 )
        *(_DWORD *)(a1 + 104) = 2;
      if ( *(_DWORD *)(a1 + 4) & 1 )
      {
        *(_DWORD *)(a1 + 76) = 2;
        *(_DWORD *)(a1 + 16) = 512;
      }
      if ( *(_DWORD *)(a1 + 4) & 4 )
      {
        *(_DWORD *)(a1 + 76) = 0;
        *(_DWORD *)(a1 + 16) = -512;
      }
      if ( *(_DWORD *)(a1 + 76) )
        *(_DWORD *)(a1 + 16) = 256;
      else
        *(_DWORD *)(a1 + 16) = -256;
      break;
    case 5:
      if ( *(_DWORD *)(a1 + 4) & 8 )
        *(_DWORD *)(a1 + 116) = 0;
      break;
    default:
      break;
  }
  v6 = *(_DWORD *)(a1 + 116);
  if ( v6 > 0 && (v6 <= 2 || v6 == 4) && *(_BYTE *)(a1 + 156) )
  {
    *(_DWORD *)(a1 + 20) = -512;
    *(_DWORD *)(a1 + 104) = 5;
    *(_DWORD *)(a1 + 116) = 5;
    if ( *(_DWORD *)(a1 + 8) >= Quote_X_Position )
      *(_DWORD *)(a1 + 16) = -256;
    else
      *(_DWORD *)(a1 + 16) = 256;
  }
  *(_DWORD *)(a1 + 20) += 64;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v7 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    *(_DWORD *)(v5 + 8) = v4[2];
    result = v4[3];
    *(_DWORD *)(v5 + 12) = result;
  }
  else
  {
    v1 = &v31 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    *(_DWORD *)(v2 + 8) = v1[2];
    result = v1[3];
    *(_DWORD *)(v2 + 12) = result;
  }
  return result;
}

//----- (004375E0) --------------------------------------------------------
int __cdecl NPC82(int a1)
{
  int v1; // eax@39
  int *v2; // edx@57
  int result; // eax@57
  int *v4; // edx@58
  int v5; // [sp+0h] [bp-128h]@36
  int v6; // [sp+8h] [bp-120h]@44
  int v7; // [sp+Ch] [bp-11Ch]@44
  int v8; // [sp+10h] [bp-118h]@44
  int v9; // [sp+14h] [bp-114h]@44
  int v10; // [sp+18h] [bp-110h]@44
  int v11; // [sp+1Ch] [bp-10Ch]@44
  int v12; // [sp+20h] [bp-108h]@44
  int v13; // [sp+24h] [bp-104h]@44
  int v14; // [sp+28h] [bp-100h]@44
  int v15; // [sp+2Ch] [bp-FCh]@44
  int v16; // [sp+30h] [bp-F8h]@44
  int v17; // [sp+34h] [bp-F4h]@44
  int v18; // [sp+38h] [bp-F0h]@44
  int v19; // [sp+3Ch] [bp-ECh]@44
  int v20; // [sp+40h] [bp-E8h]@44
  int v21; // [sp+44h] [bp-E4h]@44
  int v22; // [sp+48h] [bp-E0h]@44
  int v23; // [sp+4Ch] [bp-DCh]@44
  int v24; // [sp+50h] [bp-D8h]@44
  int v25; // [sp+54h] [bp-D4h]@44
  int v26; // [sp+58h] [bp-D0h]@44
  int v27; // [sp+5Ch] [bp-CCh]@44
  int v28; // [sp+60h] [bp-C8h]@44
  int v29; // [sp+64h] [bp-C4h]@44
  int v30; // [sp+68h] [bp-C0h]@44
  int v31; // [sp+6Ch] [bp-BCh]@44
  int v32; // [sp+70h] [bp-B8h]@44
  int v33; // [sp+74h] [bp-B4h]@44
  int v34; // [sp+78h] [bp-B0h]@44
  int v35; // [sp+7Ch] [bp-ACh]@44
  int v36; // [sp+80h] [bp-A8h]@44
  int v37; // [sp+84h] [bp-A4h]@44
  int v38; // [sp+88h] [bp-A0h]@44
  int v39; // [sp+8Ch] [bp-9Ch]@44
  int v40; // [sp+90h] [bp-98h]@44
  int v41; // [sp+94h] [bp-94h]@44
  int v42; // [sp+98h] [bp-90h]@44
  int v43; // [sp+9Ch] [bp-8Ch]@44
  int v44; // [sp+A0h] [bp-88h]@44
  int v45; // [sp+A4h] [bp-84h]@44
  int v46; // [sp+A8h] [bp-80h]@44
  int v47; // [sp+ACh] [bp-7Ch]@44
  int v48; // [sp+B0h] [bp-78h]@44
  int v49; // [sp+B4h] [bp-74h]@44
  int v50; // [sp+B8h] [bp-70h]@44
  int v51; // [sp+BCh] [bp-6Ch]@44
  int v52; // [sp+C0h] [bp-68h]@44
  int v53; // [sp+C4h] [bp-64h]@44
  int v54; // [sp+C8h] [bp-60h]@44
  int v55; // [sp+CCh] [bp-5Ch]@44
  int v56; // [sp+D0h] [bp-58h]@44
  int v57; // [sp+D4h] [bp-54h]@44
  int v58; // [sp+D8h] [bp-50h]@44
  int v59; // [sp+DCh] [bp-4Ch]@44
  int v60; // [sp+E0h] [bp-48h]@44
  int v61; // [sp+E4h] [bp-44h]@44
  int v62; // [sp+E8h] [bp-40h]@44
  int v63; // [sp+ECh] [bp-3Ch]@44
  int v64; // [sp+F0h] [bp-38h]@44
  int v65; // [sp+F4h] [bp-34h]@44
  int v66; // [sp+F8h] [bp-30h]@44
  int v67; // [sp+FCh] [bp-2Ch]@44
  int v68; // [sp+100h] [bp-28h]@44
  int v69; // [sp+104h] [bp-24h]@44
  int v70; // [sp+108h] [bp-20h]@44
  int v71; // [sp+10Ch] [bp-1Ch]@44
  int v72; // [sp+110h] [bp-18h]@44
  int v73; // [sp+114h] [bp-14h]@44
  int v74; // [sp+118h] [bp-10h]@44
  int v75; // [sp+11Ch] [bp-Ch]@44
  int v76; // [sp+120h] [bp-8h]@44
  int v77; // [sp+124h] [bp-4h]@44

  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 104) = 2;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( RNG_Range(0, 120) == 10 )
      {
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 3;
      }
      break;
    case 2:
      if ( ++*(_DWORD *)(a1 + 120) > 8 )
      {
        *(_DWORD *)(a1 + 116) = 1;
        *(_DWORD *)(a1 + 104) = 2;
      }
      break;
    case 0xF:
      *(_DWORD *)(a1 + 116) = 16;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 104) = 4;
      goto LABEL_10;
    case 0x10:
LABEL_10:
      if ( ++*(_DWORD *)(a1 + 120) == 30 )
      {
        Play_Sound_Effect(21, 1);
        NPC_Create(66, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12) - 0x2000, 0, 0, 0, a1, 0);
      }
      if ( *(_DWORD *)(a1 + 120) == 50 )
        *(_DWORD *)(a1 + 116) = 14;
      break;
    case 0x14:
      *(_DWORD *)(a1 + 116) = 21;
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 20) = 0;
      *(_WORD *)(a1 + 80) |= 8u;
      goto LABEL_16;
    case 0x15:
LABEL_16:
      *(_DWORD *)(a1 + 20) -= 32;
      if ( *(_DWORD *)(a1 + 12) < -4096 )
        *(_BYTE *)a1 = 0;
      break;
    case 0x19:
      *(_DWORD *)(a1 + 116) = 26;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 104) = 5;
      *(_DWORD *)(a1 + 100) = 0;
      goto LABEL_20;
    case 0x1A:
LABEL_20:
      if ( ++*(_DWORD *)(a1 + 104) > 7 )
        *(_DWORD *)(a1 + 104) = 5;
      if ( ++*(_DWORD *)(a1 + 120) == 30 )
      {
        Play_Sound_Effect(101, 1);
        Explosion_(0, 0, 2);
        *(_DWORD *)(a1 + 116) = 27;
        *(_DWORD *)(a1 + 104) = 7;
      }
      break;
    case 0x1B:
      if ( ++*(_DWORD *)(a1 + 120) == 50 )
      {
        *(_DWORD *)(a1 + 116) = 0;
        *(_DWORD *)(a1 + 104) = 0;
      }
      break;
    case 0x1E:
      *(_DWORD *)(a1 + 116) = 31;
      *(_DWORD *)(a1 + 104) = 3;
      *(_DWORD *)(a1 + 100) = 0;
      goto LABEL_29;
    case 0x1F:
LABEL_29:
      if ( ++*(_DWORD *)(a1 + 100) > 10 )
      {
        *(_DWORD *)(a1 + 116) = 32;
        *(_DWORD *)(a1 + 104) = 4;
        *(_DWORD *)(a1 + 100) = 0;
      }
      break;
    case 0x20:
      if ( ++*(_DWORD *)(a1 + 100) > 100 )
      {
        *(_DWORD *)(a1 + 116) = 1;
        *(_DWORD *)(a1 + 104) = 2;
      }
      break;
    case 0x28:
      *(_DWORD *)(a1 + 116) = 41;
      *(_DWORD *)(a1 + 120) = 0;
      goto LABEL_36;
    case 0x29:
LABEL_36:
      *(_DWORD *)(a1 + 104) = 4;
      v5 = ++*(_DWORD *)(a1 + 120);
      if ( v5 == 30 || v5 == 40 || v5 == 50 )
      {
        v1 = RNG_Range(-512, 0);
        NPC_Create(11, *(_DWORD *)(a1 + 8) + 4096, *(_DWORD *)(a1 + 12) - 4096, 1536, v1, 0, 0, 256);
        Play_Sound_Effect(33, 1);
      }
      if ( *(_DWORD *)(a1 + 120) > 50 )
        *(_DWORD *)(a1 + 116) = 0;
      break;
    case 0x32:
      *(_DWORD *)(a1 + 104) = 8;
      break;
    default:
      break;
  }
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  v42 = 80;
  v43 = 0;
  v44 = 96;
  v45 = 16;
  v46 = 96;
  v47 = 0;
  v48 = 112;
  v49 = 16;
  v50 = 112;
  v51 = 0;
  v52 = 128;
  v53 = 16;
  v54 = 128;
  v55 = 0;
  v56 = 144;
  v57 = 16;
  v58 = 144;
  v59 = 0;
  v60 = 160;
  v61 = 16;
  v62 = 160;
  v63 = 0;
  v64 = 176;
  v65 = 16;
  v66 = 176;
  v67 = 0;
  v68 = 192;
  v69 = 16;
  v70 = 144;
  v71 = 0;
  v72 = 160;
  v73 = 16;
  v74 = 208;
  v75 = 64;
  v76 = 224;
  v77 = 80;
  v6 = 80;
  v7 = 16;
  v8 = 96;
  v9 = 32;
  v10 = 96;
  v11 = 16;
  v12 = 112;
  v13 = 32;
  v14 = 112;
  v15 = 16;
  v16 = 128;
  v17 = 32;
  v18 = 128;
  v19 = 16;
  v20 = 144;
  v21 = 32;
  v22 = 144;
  v23 = 16;
  v24 = 160;
  v25 = 32;
  v26 = 160;
  v27 = 16;
  v28 = 176;
  v29 = 32;
  v30 = 176;
  v31 = 16;
  v32 = 192;
  v33 = 32;
  v34 = 144;
  v35 = 16;
  v36 = 160;
  v37 = 32;
  v38 = 208;
  v39 = 80;
  v40 = 224;
  v41 = 96;
  if ( *(_DWORD *)(a1 + 116) == 11 )
  {
    if ( *(_DWORD *)(a1 + 100) )
    {
      --*(_DWORD *)(a1 + 100);
      *(_DWORD *)(a1 + 104) = 1;
    }
    else
    {
      if ( RNG_Range(0, 100) == 1 )
        *(_DWORD *)(a1 + 100) = 30;
      *(_DWORD *)(a1 + 104) = 0;
    }
  }
  if ( *(_DWORD *)(a1 + 116) == 14 )
  {
    if ( *(_DWORD *)(a1 + 100) )
    {
      --*(_DWORD *)(a1 + 100);
      *(_DWORD *)(a1 + 104) = 3;
    }
    else
    {
      if ( RNG_Range(0, 100) == 1 )
        *(_DWORD *)(a1 + 100) = 30;
      *(_DWORD *)(a1 + 104) = 2;
    }
  }
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v6 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v4;
    *(_DWORD *)(result + 4) = v4[1];
    *(_DWORD *)(result + 8) = v4[2];
    *(_DWORD *)(result + 12) = v4[3];
  }
  else
  {
    v2 = &v42 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v2;
    *(_DWORD *)(result + 4) = v2[1];
    *(_DWORD *)(result + 8) = v2[2];
    *(_DWORD *)(result + 12) = v2[3];
  }
  return result;
}

//----- (00437D90) --------------------------------------------------------
int __cdecl NPC83(int a1)
{
  int *v1; // ecx@28
  int v2; // edx@28
  int result; // eax@28
  int *v4; // ecx@29
  int v5; // edx@29
  int v6; // [sp+4h] [bp-100h]@1
  int v7; // [sp+8h] [bp-FCh]@1
  int v8; // [sp+Ch] [bp-F8h]@1
  int v9; // [sp+10h] [bp-F4h]@1
  int v10; // [sp+14h] [bp-F0h]@1
  int v11; // [sp+18h] [bp-ECh]@1
  int v12; // [sp+1Ch] [bp-E8h]@1
  int v13; // [sp+20h] [bp-E4h]@1
  int v14; // [sp+24h] [bp-E0h]@1
  int v15; // [sp+28h] [bp-DCh]@1
  int v16; // [sp+2Ch] [bp-D8h]@1
  int v17; // [sp+30h] [bp-D4h]@1
  int v18; // [sp+34h] [bp-D0h]@1
  int v19; // [sp+38h] [bp-CCh]@1
  int v20; // [sp+3Ch] [bp-C8h]@1
  int v21; // [sp+40h] [bp-C4h]@1
  int v22; // [sp+44h] [bp-C0h]@1
  int v23; // [sp+48h] [bp-BCh]@1
  int v24; // [sp+4Ch] [bp-B8h]@1
  int v25; // [sp+50h] [bp-B4h]@1
  int v26; // [sp+54h] [bp-B0h]@1
  int v27; // [sp+58h] [bp-ACh]@1
  int v28; // [sp+5Ch] [bp-A8h]@1
  int v29; // [sp+60h] [bp-A4h]@1
  int v30; // [sp+64h] [bp-A0h]@1
  int v31; // [sp+68h] [bp-9Ch]@1
  int v32; // [sp+6Ch] [bp-98h]@1
  int v33; // [sp+70h] [bp-94h]@1
  int v34; // [sp+74h] [bp-90h]@1
  int v35; // [sp+78h] [bp-8Ch]@1
  int v36; // [sp+7Ch] [bp-88h]@1
  int v37; // [sp+80h] [bp-84h]@1
  int v38; // [sp+84h] [bp-80h]@1
  int v39; // [sp+88h] [bp-7Ch]@1
  int v40; // [sp+8Ch] [bp-78h]@1
  int v41; // [sp+90h] [bp-74h]@1
  int v42; // [sp+94h] [bp-70h]@1
  int v43; // [sp+98h] [bp-6Ch]@1
  int v44; // [sp+9Ch] [bp-68h]@1
  int v45; // [sp+A0h] [bp-64h]@1
  int v46; // [sp+A4h] [bp-60h]@1
  int v47; // [sp+A8h] [bp-5Ch]@1
  int v48; // [sp+ACh] [bp-58h]@1
  int v49; // [sp+B0h] [bp-54h]@1
  int v50; // [sp+B4h] [bp-50h]@1
  int v51; // [sp+B8h] [bp-4Ch]@1
  int v52; // [sp+BCh] [bp-48h]@1
  int v53; // [sp+C0h] [bp-44h]@1
  int v54; // [sp+C4h] [bp-40h]@1
  int v55; // [sp+C8h] [bp-3Ch]@1
  int v56; // [sp+CCh] [bp-38h]@1
  int v57; // [sp+D0h] [bp-34h]@1
  int v58; // [sp+D4h] [bp-30h]@1
  int v59; // [sp+D8h] [bp-2Ch]@1
  int v60; // [sp+DCh] [bp-28h]@1
  int v61; // [sp+E0h] [bp-24h]@1
  int v62; // [sp+E4h] [bp-20h]@1
  int v63; // [sp+E8h] [bp-1Ch]@1
  int v64; // [sp+ECh] [bp-18h]@1
  int v65; // [sp+F0h] [bp-14h]@1
  int v66; // [sp+F4h] [bp-10h]@1
  int v67; // [sp+F8h] [bp-Ch]@1
  int v68; // [sp+FCh] [bp-8h]@1
  int v69; // [sp+100h] [bp-4h]@1

  v38 = 0;
  v39 = 0;
  v40 = 40;
  v41 = 40;
  v42 = 40;
  v43 = 0;
  v44 = 80;
  v45 = 40;
  v46 = 80;
  v47 = 0;
  v48 = 120;
  v49 = 40;
  v50 = 0;
  v51 = 0;
  v52 = 40;
  v53 = 40;
  v54 = 120;
  v55 = 0;
  v56 = 160;
  v57 = 40;
  v58 = 0;
  v59 = 0;
  v60 = 40;
  v61 = 40;
  v62 = 160;
  v63 = 0;
  v64 = 200;
  v65 = 40;
  v66 = 200;
  v67 = 0;
  v68 = 240;
  v69 = 40;
  v6 = 0;
  v7 = 40;
  v8 = 40;
  v9 = 80;
  v10 = 40;
  v11 = 40;
  v12 = 80;
  v13 = 80;
  v14 = 80;
  v15 = 40;
  v16 = 120;
  v17 = 80;
  v18 = 0;
  v19 = 40;
  v20 = 40;
  v21 = 80;
  v22 = 120;
  v23 = 40;
  v24 = 160;
  v25 = 80;
  v26 = 0;
  v27 = 40;
  v28 = 40;
  v29 = 80;
  v30 = 160;
  v31 = 40;
  v32 = 200;
  v33 = 80;
  v34 = 200;
  v35 = 40;
  v36 = 240;
  v37 = 80;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 16) = 0;
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 100) = 0;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( ++*(_DWORD *)(a1 + 100) > 5 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 1 )
        *(_DWORD *)(a1 + 104) = 0;
      break;
    case 2:
      *(_DWORD *)(a1 + 116) = 3;
      *(_DWORD *)(a1 + 104) = 2;
      *(_DWORD *)(a1 + 100) = 0;
      goto LABEL_9;
    case 3:
LABEL_9:
      if ( ++*(_DWORD *)(a1 + 100) > 3 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 5 )
        *(_DWORD *)(a1 + 104) = 2;
      if ( *(_DWORD *)(a1 + 76) )
        *(_DWORD *)(a1 + 16) = 512;
      else
        *(_DWORD *)(a1 + 16) = -512;
      break;
    case 4:
      *(_DWORD *)(a1 + 16) = 0;
      *(_DWORD *)(a1 + 116) = 5;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 104) = 6;
      goto LABEL_18;
    case 5:
LABEL_18:
      if ( ++*(_DWORD *)(a1 + 120) > 10 )
      {
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 116) = 6;
        *(_DWORD *)(a1 + 104) = 7;
        Play_Sound_Effect(70, 1);
      }
      break;
    case 6:
      if ( ++*(_DWORD *)(a1 + 120) > 8 )
      {
        *(_DWORD *)(a1 + 116) = 0;
        *(_DWORD *)(a1 + 104) = 0;
      }
      break;
    case 7:
      *(_DWORD *)(a1 + 116) = 1;
      break;
    default:
      break;
  }
  *(_DWORD *)(a1 + 20) += 64;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v6 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    result = v4[2];
    *(_DWORD *)(v5 + 8) = result;
    *(_DWORD *)(v5 + 12) = v4[3];
  }
  else
  {
    v1 = &v38 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    result = v1[2];
    *(_DWORD *)(v2 + 8) = result;
    *(_DWORD *)(v2 + 12) = v1[3];
  }
  return result;
}

//----- (00438250) --------------------------------------------------------
int __cdecl NPC84(int a1)
{
  int *v1; // eax@7
  int v2; // ecx@7
  int result; // eax@7
  int v4; // [sp+0h] [bp-40h]@3
  int v5; // [sp+4h] [bp-3Ch]@3
  int v6; // [sp+8h] [bp-38h]@3
  int v7; // [sp+Ch] [bp-34h]@3
  int v8; // [sp+10h] [bp-30h]@3
  int v9; // [sp+14h] [bp-2Ch]@3
  int v10; // [sp+18h] [bp-28h]@3
  int v11; // [sp+1Ch] [bp-24h]@3
  int v12; // [sp+20h] [bp-20h]@3
  int v13; // [sp+24h] [bp-1Ch]@3
  int v14; // [sp+28h] [bp-18h]@3
  int v15; // [sp+2Ch] [bp-14h]@3
  int v16; // [sp+30h] [bp-10h]@3
  int v17; // [sp+34h] [bp-Ch]@3
  int v18; // [sp+38h] [bp-8h]@3
  int v19; // [sp+3Ch] [bp-4h]@3

  if ( *(_DWORD *)(a1 + 4) & 0xFF )
  {
    Create_Animated_Effect(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 2, 0);
    *(_BYTE *)a1 = 0;
  }
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  v4 = 48;
  v5 = 48;
  v6 = 64;
  v7 = 64;
  v8 = 64;
  v9 = 48;
  v10 = 80;
  v11 = 64;
  v12 = 48;
  v13 = 64;
  v14 = 64;
  v15 = 80;
  v16 = 64;
  v17 = 64;
  v18 = 80;
  v19 = 80;
  if ( ++*(_DWORD *)(a1 + 100) > 2 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    ++*(_DWORD *)(a1 + 104);
  }
  if ( *(_DWORD *)(a1 + 104) > 3 )
    *(_DWORD *)(a1 + 104) = 0;
  v1 = &v4 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  *(_DWORD *)(v2 + 8) = v1[2];
  *(_DWORD *)(v2 + 12) = v1[3];
  result = a1;
  if ( ++*(_DWORD *)(a1 + 108) > 300 )
  {
    Create_Animated_Effect(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 2, 0);
    result = a1;
    *(_BYTE *)a1 = 0;
  }
  return result;
}

//----- (004383D0) --------------------------------------------------------
int __cdecl NPC85(int a1)
{
  int *v1; // edx@13
  int result; // eax@13
  int *v3; // edx@14
  int v4; // [sp+0h] [bp-64h]@1
  int v5; // [sp+4h] [bp-60h]@1
  int v6; // [sp+8h] [bp-5Ch]@1
  int v7; // [sp+Ch] [bp-58h]@1
  int v8; // [sp+10h] [bp-54h]@1
  int v9; // [sp+14h] [bp-50h]@1
  int v10; // [sp+18h] [bp-4Ch]@1
  int v11; // [sp+1Ch] [bp-48h]@1
  int v12; // [sp+20h] [bp-44h]@1
  int v13; // [sp+24h] [bp-40h]@1
  int v14; // [sp+28h] [bp-3Ch]@1
  int v15; // [sp+2Ch] [bp-38h]@1
  int v16; // [sp+30h] [bp-34h]@1
  int v17; // [sp+34h] [bp-30h]@1
  int v18; // [sp+38h] [bp-2Ch]@1
  int v19; // [sp+3Ch] [bp-28h]@1
  int v20; // [sp+40h] [bp-24h]@1
  int v21; // [sp+44h] [bp-20h]@1
  int v22; // [sp+48h] [bp-1Ch]@1
  int v23; // [sp+4Ch] [bp-18h]@1
  int v24; // [sp+50h] [bp-14h]@1
  int v25; // [sp+54h] [bp-10h]@1
  int v26; // [sp+58h] [bp-Ch]@1
  int v27; // [sp+5Ch] [bp-8h]@1
  int v28; // [sp+60h] [bp-4h]@1

  v17 = 256;
  v18 = 96;
  v19 = 272;
  v20 = 120;
  v21 = 256;
  v22 = 96;
  v23 = 272;
  v24 = 120;
  v25 = 272;
  v26 = 96;
  v27 = 288;
  v28 = 120;
  v5 = 256;
  v6 = 96;
  v7 = 272;
  v8 = 120;
  v9 = 288;
  v10 = 96;
  v11 = 304;
  v12 = 120;
  v13 = 304;
  v14 = 96;
  v15 = 320;
  v16 = 120;
  v4 = *(_DWORD *)(a1 + 116);
  if ( v4 )
  {
    if ( v4 == 1 && ++*(_DWORD *)(a1 + 104) > 2 )
      *(_DWORD *)(a1 + 104) = 1;
  }
  else
  {
    *(_DWORD *)(a1 + 104) = 0;
    if ( *(_DWORD *)(a1 + 8) - 4096 < Quote_X_Position
      && *(_DWORD *)(a1 + 8) + 4096 > Quote_X_Position
      && *(_DWORD *)(a1 + 12) - 0x2000 < Quote_Y_Position
      && *(_DWORD *)(a1 + 12) + 4096 > Quote_Y_Position )
    {
      Play_Sound_Effect(43, 1);
      *(_DWORD *)(a1 + 116) = 1;
    }
  }
  if ( *(_DWORD *)(a1 + 76) )
  {
    v3 = &v5 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v3;
    *(_DWORD *)(result + 4) = v3[1];
    *(_DWORD *)(result + 8) = v3[2];
    *(_DWORD *)(result + 12) = v3[3];
  }
  else
  {
    v1 = &v17 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v1;
    *(_DWORD *)(result + 4) = v1[1];
    *(_DWORD *)(result + 8) = v1[2];
    *(_DWORD *)(result + 12) = v1[3];
  }
  return result;
}

//----- (00438590) --------------------------------------------------------
int __cdecl NPC86(int a1)
{
  int *v1; // ecx@24
  int v2; // edx@24
  int *v3; // ecx@25
  int v4; // edx@25
  int result; // eax@28
  int v6; // [sp+0h] [bp-54h]@21
  int v7; // [sp+14h] [bp-40h]@1
  int v8; // [sp+18h] [bp-3Ch]@1
  int v9; // [sp+1Ch] [bp-38h]@1
  int v10; // [sp+20h] [bp-34h]@1
  int v11; // [sp+24h] [bp-30h]@1
  int v12; // [sp+28h] [bp-2Ch]@1
  int v13; // [sp+2Ch] [bp-28h]@1
  int v14; // [sp+30h] [bp-24h]@1
  int v15; // [sp+34h] [bp-20h]@1
  int v16; // [sp+38h] [bp-1Ch]@1
  int v17; // [sp+3Ch] [bp-18h]@1
  int v18; // [sp+40h] [bp-14h]@1
  int v19; // [sp+44h] [bp-10h]@1
  int v20; // [sp+48h] [bp-Ch]@1
  int v21; // [sp+4Ch] [bp-8h]@1
  int v22; // [sp+50h] [bp-4h]@1

  v15 = 0;
  v16 = 80;
  v17 = 16;
  v18 = 96;
  v19 = 16;
  v20 = 80;
  v21 = 32;
  v22 = 96;
  v7 = 0;
  v8 = 112;
  v9 = 16;
  v10 = 128;
  v11 = 16;
  v12 = 112;
  v13 = 32;
  v14 = 128;
  if ( !*(_DWORD *)(a1 + 76) )
  {
    if ( ++*(_DWORD *)(a1 + 100) > 2 )
    {
      *(_DWORD *)(a1 + 100) = 0;
      ++*(_DWORD *)(a1 + 104);
    }
    if ( *(_DWORD *)(a1 + 104) > 1 )
      *(_DWORD *)(a1 + 104) = 0;
  }
  if ( BackgroundMode == 5 || BackgroundMode == 6 )
  {
    if ( !*(_DWORD *)(a1 + 116) )
    {
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 20) = RNG_Range(-32, 32);
      *(_DWORD *)(a1 + 16) = RNG_Range(127, 256);
    }
    *(_DWORD *)(a1 + 16) -= 8;
    if ( *(_DWORD *)(a1 + 8) < 40960 )
      *(_BYTE *)a1 = 0;
    if ( *(_DWORD *)(a1 + 8) < -1536 )
      *(_DWORD *)(a1 + 8) = -1536;
    if ( *(_DWORD *)(a1 + 4) & 1 )
      *(_DWORD *)(a1 + 16) = 256;
    if ( *(_DWORD *)(a1 + 4) & 2 )
      *(_DWORD *)(a1 + 20) = 64;
    if ( *(_DWORD *)(a1 + 4) & 8 )
      *(_DWORD *)(a1 + 20) = -64;
    *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
    *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  }
  v6 = *(_DWORD *)(a1 + 68);
  if ( v6 == 1 )
  {
    v1 = &v15 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    *(_DWORD *)(v2 + 8) = v1[2];
    *(_DWORD *)(v2 + 12) = v1[3];
  }
  else if ( v6 == 3 )
  {
    v3 = &v7 + 4 * *(_DWORD *)(a1 + 104);
    v4 = a1 + 84;
    *(_DWORD *)v4 = *v3;
    *(_DWORD *)(v4 + 4) = v3[1];
    *(_DWORD *)(v4 + 8) = v3[2];
    *(_DWORD *)(v4 + 12) = v3[3];
  }
  if ( !*(_DWORD *)(a1 + 76) )
    ++*(_DWORD *)(a1 + 108);
  result = a1;
  if ( *(_DWORD *)(a1 + 108) > 550 )
    *(_BYTE *)a1 = 0;
  if ( *(_DWORD *)(a1 + 108) > 500 )
  {
    result = *(_DWORD *)(a1 + 108) / 2 % 2;
    if ( result )
      *(_DWORD *)(a1 + 92) = 0;
  }
  if ( *(_DWORD *)(a1 + 108) > 547 )
  {
    result = a1 + 84;
    *(_DWORD *)result = 16;
    *(_DWORD *)(result + 4) = 0;
    *(_DWORD *)(result + 8) = 32;
    *(_DWORD *)(result + 12) = 16;
  }
  return result;
}
// 499C88: using guessed type int BackgroundMode;

//----- (00438850) --------------------------------------------------------
int __cdecl NPC87(int a1)
{
  int *v1; // ecx@24
  int v2; // edx@24
  int *v3; // ecx@25
  int v4; // edx@25
  int result; // eax@28
  int v6; // [sp+0h] [bp-54h]@21
  int v7; // [sp+4h] [bp-50h]@1
  int v8; // [sp+8h] [bp-4Ch]@1
  int v9; // [sp+Ch] [bp-48h]@1
  int v10; // [sp+10h] [bp-44h]@1
  int v11; // [sp+14h] [bp-40h]@1
  int v12; // [sp+18h] [bp-3Ch]@1
  int v13; // [sp+1Ch] [bp-38h]@1
  int v14; // [sp+20h] [bp-34h]@1
  int v15; // [sp+24h] [bp-30h]@1
  int v16; // [sp+28h] [bp-2Ch]@1
  int v17; // [sp+2Ch] [bp-28h]@1
  int v18; // [sp+30h] [bp-24h]@1
  int v19; // [sp+34h] [bp-20h]@1
  int v20; // [sp+38h] [bp-1Ch]@1
  int v21; // [sp+3Ch] [bp-18h]@1
  int v22; // [sp+40h] [bp-14h]@1
  int v23; // [sp+44h] [bp-10h]@1
  int v24; // [sp+48h] [bp-Ch]@1
  int v25; // [sp+4Ch] [bp-8h]@1
  int v26; // [sp+50h] [bp-4h]@1

  v7 = 32;
  v8 = 80;
  v9 = 48;
  v10 = 96;
  v11 = 48;
  v12 = 80;
  v13 = 64;
  v14 = 96;
  v19 = 64;
  v20 = 80;
  v21 = 80;
  v22 = 96;
  v23 = 80;
  v24 = 80;
  v25 = 96;
  v26 = 96;
  v15 = 16;
  v16 = 0;
  v17 = 32;
  v18 = 16;
  if ( !*(_DWORD *)(a1 + 76) )
  {
    if ( ++*(_DWORD *)(a1 + 100) > 2 )
    {
      *(_DWORD *)(a1 + 100) = 0;
      ++*(_DWORD *)(a1 + 104);
    }
    if ( *(_DWORD *)(a1 + 104) > 1 )
      *(_DWORD *)(a1 + 104) = 0;
  }
  if ( BackgroundMode == 5 || BackgroundMode == 6 )
  {
    if ( !*(_DWORD *)(a1 + 116) )
    {
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 20) = RNG_Range(-32, 32);
      *(_DWORD *)(a1 + 16) = RNG_Range(127, 256);
    }
    *(_DWORD *)(a1 + 16) -= 8;
    if ( *(_DWORD *)(a1 + 8) < 40960 )
      *(_BYTE *)a1 = 0;
    if ( *(_DWORD *)(a1 + 8) < -1536 )
      *(_DWORD *)(a1 + 8) = -1536;
    if ( *(_DWORD *)(a1 + 4) & 1 )
      *(_DWORD *)(a1 + 16) = 256;
    if ( *(_DWORD *)(a1 + 4) & 2 )
      *(_DWORD *)(a1 + 20) = 64;
    if ( *(_DWORD *)(a1 + 4) & 8 )
      *(_DWORD *)(a1 + 20) = -64;
    *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
    *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  }
  v6 = *(_DWORD *)(a1 + 68);
  if ( v6 == 2 )
  {
    v1 = &v7 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    *(_DWORD *)(v2 + 8) = v1[2];
    *(_DWORD *)(v2 + 12) = v1[3];
  }
  else if ( v6 == 6 )
  {
    v3 = &v19 + 4 * *(_DWORD *)(a1 + 104);
    v4 = a1 + 84;
    *(_DWORD *)v4 = *v3;
    *(_DWORD *)(v4 + 4) = v3[1];
    *(_DWORD *)(v4 + 8) = v3[2];
    *(_DWORD *)(v4 + 12) = v3[3];
  }
  if ( !*(_DWORD *)(a1 + 76) )
    ++*(_DWORD *)(a1 + 108);
  result = a1;
  if ( *(_DWORD *)(a1 + 108) > 550 )
    *(_BYTE *)a1 = 0;
  if ( *(_DWORD *)(a1 + 108) > 500 )
  {
    result = *(_DWORD *)(a1 + 108) / 2 % 2;
    if ( result )
      *(_DWORD *)(a1 + 92) = 0;
  }
  if ( *(_DWORD *)(a1 + 108) > 547 )
  {
    result = a1 + 84;
    *(_DWORD *)result = v15;
    *(_DWORD *)(result + 4) = v16;
    *(_DWORD *)(result + 8) = v17;
    *(_DWORD *)(result + 12) = v18;
  }
  return result;
}
// 499C88: using guessed type int BackgroundMode;

//----- (00438B10) --------------------------------------------------------
int __cdecl NPC88(int a1)
{
  int v1; // ST10_4@49
  int v2; // ST0C_4@49
  int v3; // ST08_4@49
  int v4; // eax@49
  int Y_Velocity; // ST24_4@62
  int *v6; // ecx@72
  int v7; // edx@72
  int result; // eax@72
  int *v9; // ecx@73
  int v10; // edx@73
  int v11; // [sp+8h] [bp-190h]@1
  int v12; // [sp+Ch] [bp-18Ch]@1
  int v13; // [sp+10h] [bp-188h]@1
  int v14; // [sp+14h] [bp-184h]@1
  int v15; // [sp+18h] [bp-180h]@1
  int v16; // [sp+1Ch] [bp-17Ch]@1
  int v17; // [sp+20h] [bp-178h]@1
  int v18; // [sp+24h] [bp-174h]@1
  int v19; // [sp+28h] [bp-170h]@1
  int v20; // [sp+2Ch] [bp-16Ch]@1
  int v21; // [sp+30h] [bp-168h]@1
  int v22; // [sp+34h] [bp-164h]@1
  int v23; // [sp+38h] [bp-160h]@1
  int v24; // [sp+3Ch] [bp-15Ch]@1
  int v25; // [sp+40h] [bp-158h]@1
  int v26; // [sp+44h] [bp-154h]@1
  int v27; // [sp+48h] [bp-150h]@1
  int v28; // [sp+4Ch] [bp-14Ch]@1
  int v29; // [sp+50h] [bp-148h]@1
  int v30; // [sp+54h] [bp-144h]@1
  int v31; // [sp+58h] [bp-140h]@1
  int v32; // [sp+5Ch] [bp-13Ch]@1
  int v33; // [sp+60h] [bp-138h]@1
  int v34; // [sp+64h] [bp-134h]@1
  int v35; // [sp+68h] [bp-130h]@1
  int v36; // [sp+6Ch] [bp-12Ch]@1
  int v37; // [sp+70h] [bp-128h]@1
  int v38; // [sp+74h] [bp-124h]@1
  int v39; // [sp+78h] [bp-120h]@1
  int v40; // [sp+7Ch] [bp-11Ch]@1
  int v41; // [sp+80h] [bp-118h]@1
  int v42; // [sp+84h] [bp-114h]@1
  int v43; // [sp+88h] [bp-110h]@1
  int v44; // [sp+8Ch] [bp-10Ch]@1
  int v45; // [sp+90h] [bp-108h]@1
  int v46; // [sp+94h] [bp-104h]@1
  int v47; // [sp+98h] [bp-100h]@1
  int v48; // [sp+9Ch] [bp-FCh]@1
  int v49; // [sp+A0h] [bp-F8h]@1
  int v50; // [sp+A4h] [bp-F4h]@1
  int v51; // [sp+A8h] [bp-F0h]@1
  int v52; // [sp+ACh] [bp-ECh]@1
  int v53; // [sp+B0h] [bp-E8h]@1
  int v54; // [sp+B4h] [bp-E4h]@1
  int v55; // [sp+B8h] [bp-E0h]@1
  int v56; // [sp+BCh] [bp-DCh]@1
  int v57; // [sp+C0h] [bp-D8h]@1
  int v58; // [sp+C4h] [bp-D4h]@1
  int X_Velocity; // [sp+C8h] [bp-D0h]@62
  int i; // [sp+CCh] [bp-CCh]@47
  int v61; // [sp+D0h] [bp-C8h]@1
  int v62; // [sp+D4h] [bp-C4h]@1
  int v63; // [sp+D8h] [bp-C0h]@1
  int v64; // [sp+DCh] [bp-BCh]@1
  int v65; // [sp+E0h] [bp-B8h]@1
  int v66; // [sp+E4h] [bp-B4h]@1
  int v67; // [sp+E8h] [bp-B0h]@1
  int v68; // [sp+ECh] [bp-ACh]@1
  int v69; // [sp+F0h] [bp-A8h]@1
  int v70; // [sp+F4h] [bp-A4h]@1
  int v71; // [sp+F8h] [bp-A0h]@1
  int v72; // [sp+FCh] [bp-9Ch]@1
  int v73; // [sp+100h] [bp-98h]@1
  int v74; // [sp+104h] [bp-94h]@1
  int v75; // [sp+108h] [bp-90h]@1
  int v76; // [sp+10Ch] [bp-8Ch]@1
  int v77; // [sp+110h] [bp-88h]@1
  int v78; // [sp+114h] [bp-84h]@1
  int v79; // [sp+118h] [bp-80h]@1
  int v80; // [sp+11Ch] [bp-7Ch]@1
  int v81; // [sp+120h] [bp-78h]@1
  int v82; // [sp+124h] [bp-74h]@1
  int v83; // [sp+128h] [bp-70h]@1
  int v84; // [sp+12Ch] [bp-6Ch]@1
  int v85; // [sp+130h] [bp-68h]@1
  int v86; // [sp+134h] [bp-64h]@1
  int v87; // [sp+138h] [bp-60h]@1
  int v88; // [sp+13Ch] [bp-5Ch]@1
  int v89; // [sp+140h] [bp-58h]@1
  int v90; // [sp+144h] [bp-54h]@1
  int v91; // [sp+148h] [bp-50h]@1
  int v92; // [sp+14Ch] [bp-4Ch]@1
  int v93; // [sp+150h] [bp-48h]@1
  int v94; // [sp+154h] [bp-44h]@1
  int v95; // [sp+158h] [bp-40h]@1
  int v96; // [sp+15Ch] [bp-3Ch]@1
  int v97; // [sp+160h] [bp-38h]@1
  int v98; // [sp+164h] [bp-34h]@1
  int v99; // [sp+168h] [bp-30h]@1
  int v100; // [sp+16Ch] [bp-2Ch]@1
  int v101; // [sp+170h] [bp-28h]@1
  int v102; // [sp+174h] [bp-24h]@1
  int v103; // [sp+178h] [bp-20h]@1
  int v104; // [sp+17Ch] [bp-1Ch]@1
  int v105; // [sp+180h] [bp-18h]@1
  int v106; // [sp+184h] [bp-14h]@1
  int v107; // [sp+188h] [bp-10h]@1
  int v108; // [sp+18Ch] [bp-Ch]@1
  char v109; // [sp+197h] [bp-1h]@60

  v61 = 0;
  v62 = 0;
  v63 = 40;
  v64 = 40;
  v65 = 40;
  v66 = 0;
  v67 = 80;
  v68 = 40;
  v69 = 80;
  v70 = 0;
  v71 = 120;
  v72 = 40;
  v73 = 0;
  v74 = 0;
  v75 = 40;
  v76 = 40;
  v77 = 120;
  v78 = 0;
  v79 = 160;
  v80 = 40;
  v81 = 0;
  v82 = 0;
  v83 = 40;
  v84 = 40;
  v85 = 160;
  v86 = 0;
  v87 = 200;
  v88 = 40;
  v89 = 200;
  v90 = 0;
  v91 = 240;
  v92 = 40;
  v93 = 0;
  v94 = 80;
  v95 = 40;
  v96 = 120;
  v97 = 40;
  v98 = 80;
  v99 = 80;
  v100 = 120;
  v101 = 240;
  v102 = 0;
  v103 = 280;
  v104 = 40;
  v105 = 280;
  v106 = 0;
  v107 = 320;
  v108 = 40;
  v11 = 0;
  v12 = 40;
  v13 = 40;
  v14 = 80;
  v15 = 40;
  v16 = 40;
  v17 = 80;
  v18 = 80;
  v19 = 80;
  v20 = 40;
  v21 = 120;
  v22 = 80;
  v23 = 0;
  v24 = 40;
  v25 = 40;
  v26 = 80;
  v27 = 120;
  v28 = 40;
  v29 = 160;
  v30 = 80;
  v31 = 0;
  v32 = 40;
  v33 = 40;
  v34 = 80;
  v35 = 160;
  v36 = 40;
  v37 = 200;
  v38 = 80;
  v39 = 200;
  v40 = 40;
  v41 = 240;
  v42 = 80;
  v43 = 120;
  v44 = 80;
  v45 = 160;
  v46 = 120;
  v47 = 160;
  v48 = 80;
  v49 = 200;
  v50 = 120;
  v51 = 240;
  v52 = 40;
  v53 = 280;
  v54 = 80;
  v55 = 280;
  v56 = 40;
  v57 = 320;
  v58 = 80;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 16) = 0;
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 100) = 0;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( ++*(_DWORD *)(a1 + 100) > 5 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 1 )
        *(_DWORD *)(a1 + 104) = 0;
      if ( ++*(_DWORD *)(a1 + 120) > 50 )
        *(_DWORD *)(a1 + 116) = 2;
      break;
    case 2:
      *(_DWORD *)(a1 + 116) = 3;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 104) = 2;
      *(_DWORD *)(a1 + 100) = 0;
      if ( ++*(_DWORD *)(a1 + 108) >= 3 && *(_DWORD *)(a1 + 64) <= 150 )
      {
        *(_DWORD *)(a1 + 112) = 1;
        if ( Quote_X_Position >= *(_DWORD *)(a1 + 8) )
          *(_DWORD *)(a1 + 76) = 0;
        else
          *(_DWORD *)(a1 + 76) = 2;
      }
      else
      {
        *(_DWORD *)(a1 + 112) = 0;
        if ( Quote_X_Position >= *(_DWORD *)(a1 + 8) )
          *(_DWORD *)(a1 + 76) = 2;
        else
          *(_DWORD *)(a1 + 76) = 0;
      }
      goto LABEL_19;
    case 3:
LABEL_19:
      ++*(_DWORD *)(a1 + 120);
      if ( ++*(_DWORD *)(a1 + 100) > 3 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 5 )
        *(_DWORD *)(a1 + 104) = 2;
      if ( *(_DWORD *)(a1 + 76) )
        *(_DWORD *)(a1 + 16) = 512;
      else
        *(_DWORD *)(a1 + 16) = -512;
      if ( *(_DWORD *)(a1 + 112) )
      {
        if ( *(_DWORD *)(a1 + 120) > 16 )
        {
          *(_DWORD *)(a1 + 116) = 9;
          *(_DWORD *)(a1 + 16) = 0;
          *(_DWORD *)(a1 + 104) = 10;
        }
      }
      else if ( *(_DWORD *)(a1 + 120) <= 50 )
      {
        if ( *(_DWORD *)(a1 + 76) )
        {
          if ( *(_DWORD *)(a1 + 8) + 12288 > Quote_X_Position )
            *(_DWORD *)(a1 + 116) = 4;
        }
        else if ( *(_DWORD *)(a1 + 8) - 12288 < Quote_X_Position )
        {
          *(_DWORD *)(a1 + 116) = 4;
        }
      }
      else
      {
        *(_DWORD *)(a1 + 104) = 8;
        *(_DWORD *)(a1 + 20) = -1024;
        *(_DWORD *)(a1 + 116) = 7;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 16) = 3 * *(_DWORD *)(a1 + 16) / 2;
        *(_DWORD *)(a1 + 164) = 2;
      }
      break;
    case 4:
      *(_DWORD *)(a1 + 16) = 0;
      *(_DWORD *)(a1 + 116) = 5;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 104) = 6;
      goto LABEL_40;
    case 5:
LABEL_40:
      if ( ++*(_DWORD *)(a1 + 120) > 12 )
      {
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 116) = 6;
        *(_DWORD *)(a1 + 104) = 7;
        Play_Sound_Effect(70, 1);
        *(_DWORD *)(a1 + 164) = 5;
        *(_DWORD *)(a1 + 124) = 12288;
        *(_DWORD *)(a1 + 128) = 1;
      }
      break;
    case 6:
      if ( ++*(_DWORD *)(a1 + 120) > 10 )
      {
        *(_DWORD *)(a1 + 116) = 0;
        *(_DWORD *)(a1 + 104) = 0;
        *(_DWORD *)(a1 + 164) = 0;
        *(_DWORD *)(a1 + 124) = 4096;
        *(_DWORD *)(a1 + 128) = 0x2000;
      }
      break;
    case 7:
      if ( *(_DWORD *)(a1 + 4) & 8 )
      {
        *(_DWORD *)(a1 + 116) = 8;
        *(_DWORD *)(a1 + 104) = 9;
        Play_Sound_Effect(26, 1);
        sub_40F310(30);
        *(_DWORD *)(a1 + 164) = 0;
        for ( i = 0; i < 4; ++i )
        {
          v1 = RNG_Range(-1536, 0);
          v2 = RNG_Range(-341, 341);
          v3 = *(_DWORD *)(a1 + 12) + (RNG_Range(-12, 12) << 9);
          v4 = RNG_Range(-12, 12);
          NPC_Create(4, *(_DWORD *)(a1 + 8) + (v4 << 9), v3, v2, v1, 0, 0, 256);
        }
      }
      break;
    case 8:
      *(_DWORD *)(a1 + 16) = 0;
      if ( ++*(_DWORD *)(a1 + 120) > 10 )
      {
        *(_DWORD *)(a1 + 116) = 0;
        *(_DWORD *)(a1 + 104) = 0;
        *(_DWORD *)(a1 + 164) = 0;
      }
      break;
    case 9:
      *(_DWORD *)(a1 + 116) = 10;
      *(_DWORD *)(a1 + 120) = 0;
      if ( Quote_X_Position >= *(_DWORD *)(a1 + 8) )
        *(_DWORD *)(a1 + 76) = 2;
      else
        *(_DWORD *)(a1 + 76) = 0;
      goto LABEL_57;
    case 0xA:
LABEL_57:
      if ( ++*(_DWORD *)(a1 + 120) > 100 && *(_DWORD *)(a1 + 120) % 6 == 1 )
      {
        if ( *(_DWORD *)(a1 + 76) )
          v109 = -8;
        else
          v109 = -120;
        v109 += RNG_Range(-16, 16);
        Y_Velocity = 3 * SIN_function(v109);
        X_Velocity = 3 * COS_function(v109);
        NPC_Create(11, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12) + 2048, X_Velocity, Y_Velocity, 0, 0, 256);
        Play_Sound_Effect(12, 1);
      }
      if ( *(_DWORD *)(a1 + 120) > 50 && *(_DWORD *)(a1 + 120) / 2 % 2 )
        *(_DWORD *)(a1 + 104) = 11;
      else
        *(_DWORD *)(a1 + 104) = 10;
      if ( *(_DWORD *)(a1 + 120) > 132 )
      {
        *(_DWORD *)(a1 + 116) = 0;
        *(_DWORD *)(a1 + 104) = 0;
        *(_DWORD *)(a1 + 108) = 0;
      }
      break;
    default:
      break;
  }
  *(_DWORD *)(a1 + 20) += 64;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 76) )
  {
    v9 = &v11 + 4 * *(_DWORD *)(a1 + 104);
    v10 = a1 + 84;
    *(_DWORD *)v10 = *v9;
    *(_DWORD *)(v10 + 4) = v9[1];
    result = v9[2];
    *(_DWORD *)(v10 + 8) = result;
    *(_DWORD *)(v10 + 12) = v9[3];
  }
  else
  {
    v6 = &v61 + 4 * *(_DWORD *)(a1 + 104);
    v7 = a1 + 84;
    *(_DWORD *)v7 = *v6;
    *(_DWORD *)(v7 + 4) = v6[1];
    result = v6[2];
    *(_DWORD *)(v7 + 8) = result;
    *(_DWORD *)(v7 + 12) = v6[3];
  }
  return result;
}

//----- (00439580) --------------------------------------------------------
int __cdecl NPC89(int a1)
{
  int v1; // ST10_4@7
  int v2; // ST0C_4@7
  int v3; // ST08_4@7
  int v4; // eax@7
  int v5; // ST10_4@12
  int v6; // ST0C_4@12
  int v7; // ST08_4@12
  int v8; // eax@12
  int v9; // eax@14
  int v10; // eax@15
  int v11; // ST10_4@26
  int v12; // ST0C_4@26
  int v13; // ST08_4@26
  int v14; // eax@26
  int *v15; // edx@28
  int v16; // eax@28
  int *v17; // edx@29
  int v18; // eax@29
  int *v19; // ecx@36
  int v20; // edx@36
  int *v21; // ecx@37
  int v22; // edx@37
  int result; // eax@40
  int v24; // [sp+4h] [bp-88h]@1
  int v25; // [sp+8h] [bp-84h]@1
  int v26; // [sp+Ch] [bp-80h]@1
  int v27; // [sp+10h] [bp-7Ch]@1
  int v28; // [sp+14h] [bp-78h]@1
  int v29; // [sp+18h] [bp-74h]@1
  int v30; // [sp+1Ch] [bp-70h]@1
  int v31; // [sp+20h] [bp-6Ch]@1
  int v32; // [sp+24h] [bp-68h]@1
  int v33; // [sp+28h] [bp-64h]@1
  int v34; // [sp+2Ch] [bp-60h]@1
  int v35; // [sp+30h] [bp-5Ch]@1
  int v36; // [sp+34h] [bp-58h]@1
  int v37; // [sp+38h] [bp-54h]@1
  int v38; // [sp+3Ch] [bp-50h]@1
  int v39; // [sp+40h] [bp-4Ch]@1
  int i; // [sp+48h] [bp-44h]@5
  int v41; // [sp+4Ch] [bp-40h]@1
  int v42; // [sp+50h] [bp-3Ch]@1
  int v43; // [sp+54h] [bp-38h]@1
  int v44; // [sp+58h] [bp-34h]@1
  int v45; // [sp+5Ch] [bp-30h]@1
  int v46; // [sp+60h] [bp-2Ch]@1
  int v47; // [sp+64h] [bp-28h]@1
  int v48; // [sp+68h] [bp-24h]@1
  int v49; // [sp+6Ch] [bp-20h]@1
  int v50; // [sp+70h] [bp-1Ch]@1
  int v51; // [sp+74h] [bp-18h]@1
  int v52; // [sp+78h] [bp-14h]@1
  int v53; // [sp+7Ch] [bp-10h]@1
  int v54; // [sp+80h] [bp-Ch]@1
  int v55; // [sp+84h] [bp-8h]@1
  int v56; // [sp+88h] [bp-4h]@1

  v41 = 80;
  v42 = 80;
  v43 = 120;
  v44 = 120;
  v45 = 240;
  v46 = 80;
  v47 = 264;
  v48 = 104;
  v49 = 264;
  v50 = 80;
  v51 = 288;
  v52 = 104;
  v53 = 288;
  v54 = 80;
  v55 = 312;
  v56 = 104;
  v24 = 200;
  v25 = 80;
  v26 = 240;
  v27 = 120;
  v28 = 240;
  v29 = 104;
  v30 = 264;
  v31 = 128;
  v32 = 264;
  v33 = 104;
  v34 = 288;
  v35 = 128;
  v36 = 288;
  v37 = 104;
  v38 = 312;
  v39 = 128;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      Play_Sound_Effect(72, 1);
      if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
        *(_DWORD *)(a1 + 76) = 2;
      else
        *(_DWORD *)(a1 + 76) = 0;
      for ( i = 0; i < 8; ++i )
      {
        v1 = RNG_Range(-1536, 0);
        v2 = RNG_Range(-341, 341);
        v3 = *(_DWORD *)(a1 + 12) + (RNG_Range(-12, 12) << 9);
        v4 = RNG_Range(-12, 12);
        NPC_Create(4, *(_DWORD *)(a1 + 8) + (v4 << 9), v3, v2, v1, 0, 0, 256);
      }
      *(_DWORD *)(a1 + 116) = 1;
      goto LABEL_9;
    case 1:
LABEL_9:
      if ( ++*(_DWORD *)(a1 + 120) > 100 )
      {
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 116) = 2;
      }
      if ( !(*(_DWORD *)(a1 + 120) % 5) )
      {
        v5 = RNG_Range(-1536, 0);
        v6 = RNG_Range(-341, 341);
        v7 = *(_DWORD *)(a1 + 12) + (RNG_Range(-12, 12) << 9);
        v8 = RNG_Range(-12, 12);
        NPC_Create(4, *(_DWORD *)(a1 + 8) + (v8 << 9), v7, v6, v5, 0, 0, 256);
      }
      if ( *(_DWORD *)(a1 + 76) )
      {
        v10 = a1 + 84;
        *(_DWORD *)v10 = v24;
        *(_DWORD *)(v10 + 4) = v25;
        *(_DWORD *)(v10 + 8) = v26;
        *(_DWORD *)(v10 + 12) = v27;
      }
      else
      {
        v9 = a1 + 84;
        *(_DWORD *)v9 = v41;
        *(_DWORD *)(v9 + 4) = v42;
        *(_DWORD *)(v9 + 8) = v43;
        *(_DWORD *)(v9 + 12) = v44;
      }
      if ( *(_DWORD *)(a1 + 120) / 2 % 2 )
        --*(_DWORD *)(a1 + 84);
      break;
    case 2:
      if ( ++*(_DWORD *)(a1 + 120) / 2 % 2 && *(_DWORD *)(a1 + 120) < 100 )
      {
        *(_DWORD *)(a1 + 104) = 0;
        *(_DWORD *)(a1 + 148) = 10240;
        *(_DWORD *)(a1 + 140) = 10240;
        *(_DWORD *)(a1 + 144) = 10240;
      }
      else
      {
        *(_DWORD *)(a1 + 104) = 1;
        *(_DWORD *)(a1 + 148) = 6144;
        *(_DWORD *)(a1 + 140) = 6144;
        *(_DWORD *)(a1 + 144) = 4096;
      }
      if ( *(_DWORD *)(a1 + 120) > 150 )
      {
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 116) = 3;
        *(_DWORD *)(a1 + 104) = 1;
      }
      if ( !(*(_DWORD *)(a1 + 120) % 9) )
      {
        v11 = RNG_Range(-1536, 0);
        v12 = RNG_Range(-341, 341);
        v13 = *(_DWORD *)(a1 + 12) + (RNG_Range(-12, 12) << 9);
        v14 = RNG_Range(-12, 12);
        NPC_Create(4, *(_DWORD *)(a1 + 8) + (v14 << 9), v13, v12, v11, 0, 0, 256);
      }
      if ( *(_DWORD *)(a1 + 76) )
      {
        v17 = &v24 + 4 * *(_DWORD *)(a1 + 104);
        v18 = a1 + 84;
        *(_DWORD *)v18 = *v17;
        *(_DWORD *)(v18 + 4) = v17[1];
        *(_DWORD *)(v18 + 8) = v17[2];
        *(_DWORD *)(v18 + 12) = v17[3];
      }
      else
      {
        v15 = &v41 + 4 * *(_DWORD *)(a1 + 104);
        v16 = a1 + 84;
        *(_DWORD *)v16 = *v15;
        *(_DWORD *)(v16 + 4) = v15[1];
        *(_DWORD *)(v16 + 8) = v15[2];
        *(_DWORD *)(v16 + 12) = v15[3];
      }
      break;
    case 3:
      if ( ++*(_DWORD *)(a1 + 100) > 50 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) == 3 )
        *(_DWORD *)(a1 + 116) = 4;
      if ( *(_DWORD *)(a1 + 76) )
      {
        v21 = &v24 + 4 * *(_DWORD *)(a1 + 104);
        v22 = a1 + 84;
        *(_DWORD *)v22 = *v21;
        *(_DWORD *)(v22 + 4) = v21[1];
        *(_DWORD *)(v22 + 8) = v21[2];
        *(_DWORD *)(v22 + 12) = v21[3];
      }
      else
      {
        v19 = &v41 + 4 * *(_DWORD *)(a1 + 104);
        v20 = a1 + 84;
        *(_DWORD *)v20 = *v19;
        *(_DWORD *)(v20 + 4) = v19[1];
        *(_DWORD *)(v20 + 8) = v19[2];
        *(_DWORD *)(v20 + 12) = v19[3];
      }
      break;
    default:
      break;
  }
  *(_DWORD *)(a1 + 20) += 64;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  result = *(_DWORD *)(a1 + 20) + *(_DWORD *)(a1 + 12);
  *(_DWORD *)(a1 + 12) = result;
  return result;
}

//----- (00439B00) --------------------------------------------------------
int __cdecl NPC90(int a1)
{
  int result; // eax@1

  result = a1 + 84;
  *(_DWORD *)result = 280;
  *(_DWORD *)(result + 4) = 80;
  *(_DWORD *)(result + 8) = 296;
  *(_DWORD *)(result + 12) = 104;
  return result;
}

//----- (00439B50) --------------------------------------------------------
signed int __cdecl NPC91(int a1)
{
  int v1; // ecx@3
  signed int result; // eax@3

  if ( !*(_DWORD *)(a1 + 116) )
  {
    ++*(_DWORD *)(a1 + 116);
    *(_DWORD *)(a1 + 12) += 0x2000;
  }
  v1 = a1 + 84;
  *(_DWORD *)v1 = 96;
  *(_DWORD *)(v1 + 4) = 88;
  *(_DWORD *)(v1 + 8) = 128;
  result = 112;
  *(_DWORD *)(v1 + 12) = 112;
  return result;
}

//----- (00439BC0) --------------------------------------------------------
int __cdecl NPC92(int a1)
{
  int *v1; // ecx@17
  int v2; // edx@17
  int result; // eax@17
  int v4; // [sp+4h] [bp-30h]@1
  int v5; // [sp+8h] [bp-2Ch]@1
  int v6; // [sp+Ch] [bp-28h]@1
  int v7; // [sp+10h] [bp-24h]@1
  int v8; // [sp+14h] [bp-20h]@1
  int v9; // [sp+18h] [bp-1Ch]@1
  int v10; // [sp+1Ch] [bp-18h]@1
  int v11; // [sp+20h] [bp-14h]@1
  int v12; // [sp+24h] [bp-10h]@1
  int v13; // [sp+28h] [bp-Ch]@1
  int v14; // [sp+2Ch] [bp-8h]@1
  int v15; // [sp+30h] [bp-4h]@1

  v4 = 272;
  v5 = 216;
  v6 = 288;
  v7 = 240;
  v8 = 288;
  v9 = 216;
  v10 = 304;
  v11 = 240;
  v12 = 304;
  v13 = 216;
  v14 = 320;
  v15 = 240;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 8) -= 2048;
      *(_DWORD *)(a1 + 12) += 0x2000;
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 100) = 0;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( ++*(_DWORD *)(a1 + 100) > 2 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 1 )
        *(_DWORD *)(a1 + 104) = 0;
      if ( RNG_Range(0, 80) == 1 )
      {
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 1;
      }
      if ( RNG_Range(0, 120) == 10 )
      {
        *(_DWORD *)(a1 + 116) = 3;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 2;
      }
      break;
    case 2:
      if ( ++*(_DWORD *)(a1 + 120) > 40 )
      {
        *(_DWORD *)(a1 + 116) = 3;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 2;
      }
      break;
    case 3:
      if ( ++*(_DWORD *)(a1 + 120) > 80 )
      {
        *(_DWORD *)(a1 + 116) = 1;
        *(_DWORD *)(a1 + 104) = 0;
      }
      break;
    default:
      break;
  }
  v1 = &v4 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  result = v1[2];
  *(_DWORD *)(v2 + 8) = result;
  *(_DWORD *)(v2 + 12) = v1[3];
  return result;
}

//----- (00439DC0) --------------------------------------------------------
int __cdecl NPC93(int a1)
{
  int *v1; // eax@28
  int v2; // ecx@28
  int result; // eax@28
  int *v4; // eax@29
  int v5; // ecx@29
  int v6; // [sp+4h] [bp-E0h]@1
  int v7; // [sp+8h] [bp-DCh]@1
  int v8; // [sp+Ch] [bp-D8h]@1
  int v9; // [sp+10h] [bp-D4h]@1
  int v10; // [sp+14h] [bp-D0h]@1
  int v11; // [sp+18h] [bp-CCh]@1
  int v12; // [sp+1Ch] [bp-C8h]@1
  int v13; // [sp+20h] [bp-C4h]@1
  int v14; // [sp+24h] [bp-C0h]@1
  int v15; // [sp+28h] [bp-BCh]@1
  int v16; // [sp+2Ch] [bp-B8h]@1
  int v17; // [sp+30h] [bp-B4h]@1
  int v18; // [sp+34h] [bp-B0h]@1
  int v19; // [sp+38h] [bp-ACh]@1
  int v20; // [sp+3Ch] [bp-A8h]@1
  int v21; // [sp+40h] [bp-A4h]@1
  int v22; // [sp+44h] [bp-A0h]@1
  int v23; // [sp+48h] [bp-9Ch]@1
  int v24; // [sp+4Ch] [bp-98h]@1
  int v25; // [sp+50h] [bp-94h]@1
  int v26; // [sp+54h] [bp-90h]@1
  int v27; // [sp+58h] [bp-8Ch]@1
  int v28; // [sp+5Ch] [bp-88h]@1
  int v29; // [sp+60h] [bp-84h]@1
  int v30; // [sp+64h] [bp-80h]@1
  int v31; // [sp+68h] [bp-7Ch]@1
  int v32; // [sp+6Ch] [bp-78h]@1
  int v33; // [sp+70h] [bp-74h]@1
  int v34; // [sp+74h] [bp-70h]@1
  int v35; // [sp+78h] [bp-6Ch]@1
  int v36; // [sp+7Ch] [bp-68h]@1
  int v37; // [sp+80h] [bp-64h]@1
  int v38; // [sp+84h] [bp-60h]@1
  int v39; // [sp+88h] [bp-5Ch]@1
  int v40; // [sp+8Ch] [bp-58h]@1
  int v41; // [sp+90h] [bp-54h]@1
  int v42; // [sp+94h] [bp-50h]@1
  int v43; // [sp+98h] [bp-4Ch]@1
  int v44; // [sp+9Ch] [bp-48h]@1
  int v45; // [sp+A0h] [bp-44h]@1
  int v46; // [sp+A4h] [bp-40h]@1
  int v47; // [sp+A8h] [bp-3Ch]@1
  int v48; // [sp+ACh] [bp-38h]@1
  int v49; // [sp+B0h] [bp-34h]@1
  int v50; // [sp+B4h] [bp-30h]@1
  int v51; // [sp+B8h] [bp-2Ch]@1
  int v52; // [sp+BCh] [bp-28h]@1
  int v53; // [sp+C0h] [bp-24h]@1
  int v54; // [sp+C4h] [bp-20h]@1
  int v55; // [sp+C8h] [bp-1Ch]@1
  int v56; // [sp+CCh] [bp-18h]@1
  int v57; // [sp+D0h] [bp-14h]@1
  int v58; // [sp+D4h] [bp-10h]@1
  int v59; // [sp+D8h] [bp-Ch]@1
  int v60; // [sp+DCh] [bp-8h]@1
  int v61; // [sp+E0h] [bp-4h]@1

  v34 = 128;
  v35 = 0;
  v36 = 144;
  v37 = 16;
  v38 = 144;
  v39 = 0;
  v40 = 160;
  v41 = 16;
  v42 = 160;
  v43 = 0;
  v44 = 176;
  v45 = 16;
  v46 = 128;
  v47 = 0;
  v48 = 144;
  v49 = 16;
  v50 = 176;
  v51 = 0;
  v52 = 192;
  v53 = 16;
  v54 = 128;
  v55 = 0;
  v56 = 144;
  v57 = 16;
  v58 = 32;
  v59 = 32;
  v60 = 48;
  v61 = 48;
  v6 = 128;
  v7 = 16;
  v8 = 144;
  v9 = 32;
  v10 = 144;
  v11 = 16;
  v12 = 160;
  v13 = 32;
  v14 = 160;
  v15 = 16;
  v16 = 176;
  v17 = 32;
  v18 = 128;
  v19 = 16;
  v20 = 144;
  v21 = 32;
  v22 = 176;
  v23 = 16;
  v24 = 192;
  v25 = 32;
  v26 = 128;
  v27 = 16;
  v28 = 144;
  v29 = 32;
  v30 = 32;
  v31 = 32;
  v32 = 48;
  v33 = 48;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 100) = 0;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( RNG_Range(0, 120) == 10 )
      {
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 1;
      }
      if ( *(_DWORD *)(a1 + 8) - 0x4000 < Quote_X_Position
        && *(_DWORD *)(a1 + 8) + 0x4000 > Quote_X_Position
        && *(_DWORD *)(a1 + 12) - 0x4000 < Quote_Y_Position
        && *(_DWORD *)(a1 + 12) + 0x2000 > Quote_Y_Position )
      {
        if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
          *(_DWORD *)(a1 + 76) = 2;
        else
          *(_DWORD *)(a1 + 76) = 0;
      }
      break;
    case 2:
      if ( ++*(_DWORD *)(a1 + 120) > 8 )
      {
        *(_DWORD *)(a1 + 116) = 1;
        *(_DWORD *)(a1 + 104) = 0;
      }
      break;
    case 3:
      *(_DWORD *)(a1 + 116) = 4;
      *(_DWORD *)(a1 + 104) = 2;
      *(_DWORD *)(a1 + 100) = 0;
      goto LABEL_17;
    case 4:
LABEL_17:
      if ( ++*(_DWORD *)(a1 + 100) > 4 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 5 )
        *(_DWORD *)(a1 + 104) = 2;
      if ( *(_DWORD *)(a1 + 76) )
        *(_DWORD *)(a1 + 8) += 512;
      else
        *(_DWORD *)(a1 + 8) -= 512;
      break;
    case 0xA:
      *(_DWORD *)(a1 + 104) = 6;
      if ( ++*(_DWORD *)(a1 + 120) > 200 )
      {
        *(_DWORD *)(a1 + 120) = 0;
        Create_Animated_Effect(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 5, 0);
      }
      break;
    default:
      break;
  }
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v6 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    *(_DWORD *)(v5 + 8) = v4[2];
    result = v4[3];
    *(_DWORD *)(v5 + 12) = result;
  }
  else
  {
    v1 = &v34 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    *(_DWORD *)(v2 + 8) = v1[2];
    result = v1[3];
    *(_DWORD *)(v2 + 12) = result;
  }
  return result;
}

//----- (0043A220) --------------------------------------------------------
// NPC 94 : Giant Jelly
int __cdecl NPC94_Giant_Jelly(int a1)
{
  int *v1; // edx@46
  int result; // eax@46
  int v3; // [sp+4h] [bp-50h]@1
  int v4; // [sp+8h] [bp-4Ch]@1
  int v5; // [sp+Ch] [bp-48h]@1
  int v6; // [sp+10h] [bp-44h]@1
  int v7; // [sp+14h] [bp-40h]@1
  int v8; // [sp+18h] [bp-3Ch]@1
  int v9; // [sp+1Ch] [bp-38h]@1
  int v10; // [sp+20h] [bp-34h]@1
  int v11; // [sp+24h] [bp-30h]@1
  int v12; // [sp+28h] [bp-2Ch]@1
  int v13; // [sp+2Ch] [bp-28h]@1
  int v14; // [sp+30h] [bp-24h]@1
  int v15; // [sp+34h] [bp-20h]@1
  int v16; // [sp+38h] [bp-1Ch]@1
  int v17; // [sp+3Ch] [bp-18h]@1
  int v18; // [sp+40h] [bp-14h]@1
  int v19; // [sp+44h] [bp-10h]@1
  int v20; // [sp+48h] [bp-Ch]@1
  int v21; // [sp+4Ch] [bp-8h]@1
  int v22; // [sp+50h] [bp-4h]@1

  v3 = 272;
  v4 = 0;
  v5 = 320;
  v6 = 24;
  v7 = 272;
  v8 = 24;
  v9 = 320;
  v10 = 48;
  v11 = 272;
  v12 = 48;
  v13 = 320;
  v14 = 72;
  v15 = 272;
  v16 = 72;
  v17 = 320;
  v18 = 96;
  v19 = 272;
  v20 = 96;
  v21 = 320;
  v22 = 120;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 104) = 4;
      if ( *(_BYTE *)(a1 + 156) )
      {
        *(_DWORD *)(a1 + 104) = 0;
        *(_DWORD *)(a1 + 116) = 10;
        *(_DWORD *)(a1 + 120) = 0;
      }
      break;
    case 0xA:
      *(_WORD *)(a1 + 80) |= 0x20u;
      *(_WORD *)(a1 + 80) &= 0xFFFBu;
      if ( ++*(_DWORD *)(a1 + 120) > 40 )
      {
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 100) = 0;
        *(_DWORD *)(a1 + 116) = 11;
      }
      break;
    case 0xB:
      if ( ++*(_DWORD *)(a1 + 100) > 5 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 2 )
      {
        *(_DWORD *)(a1 + 116) = 12;
        *(_DWORD *)(a1 + 104) = 3;
      }
      break;
    case 0xC:
      *(_DWORD *)(a1 + 20) = -341;
      if ( ++*(_DWORD *)(a1 + 120) > 20 )
      {
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 116) = 10;
        *(_DWORD *)(a1 + 104) = 0;
      }
      break;
    case 0x14:
      *(_DWORD *)(a1 + 16) /= 2;
      *(_DWORD *)(a1 + 20) += 32;
      if ( !*(_BYTE *)(a1 + 156) )
      {
        *(_DWORD *)(a1 + 120) = 30;
        *(_DWORD *)(a1 + 116) = 10;
        *(_DWORD *)(a1 + 104) = 0;
      }
      break;
    default:
      break;
  }
  if ( *(_BYTE *)(a1 + 156) )
  {
    if ( ++*(_DWORD *)(a1 + 112) > 12 )
    {
      *(_DWORD *)(a1 + 116) = 20;
      *(_DWORD *)(a1 + 104) = 4;
      *(_WORD *)(a1 + 80) &= 0xFFDFu;
      *(_WORD *)(a1 + 80) |= 4u;
    }
  }
  else
  {
    *(_DWORD *)(a1 + 112) = 0;
  }
  if ( *(_DWORD *)(a1 + 116) >= 10 )
  {
    if ( *(_DWORD *)(a1 + 4) & 1 )
    {
      *(_DWORD *)(a1 + 108) = 50;
      *(_DWORD *)(a1 + 76) = 2;
    }
    if ( *(_DWORD *)(a1 + 4) & 4 )
    {
      *(_DWORD *)(a1 + 108) = 50;
      *(_DWORD *)(a1 + 76) = 0;
    }
    if ( *(_DWORD *)(a1 + 108) )
    {
      --*(_DWORD *)(a1 + 108);
      if ( *(_DWORD *)(a1 + 76) )
        *(_DWORD *)(a1 + 16) += 128;
      else
        *(_DWORD *)(a1 + 16) -= 128;
    }
    else
    {
      *(_DWORD *)(a1 + 108) = 50;
      if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
        *(_DWORD *)(a1 + 76) = 2;
      else
        *(_DWORD *)(a1 + 76) = 0;
    }
    *(_DWORD *)(a1 + 20) += 16;
    if ( *(_DWORD *)(a1 + 4) & 8 )
      *(_DWORD *)(a1 + 20) = -1024;
  }
  if ( *(_DWORD *)(a1 + 16) > 256 )
    *(_DWORD *)(a1 + 16) = 256;
  if ( *(_DWORD *)(a1 + 16) < -256 )
    *(_DWORD *)(a1 + 16) = -256;
  if ( *(_DWORD *)(a1 + 20) > 768 )
    *(_DWORD *)(a1 + 20) = 768;
  if ( *(_DWORD *)(a1 + 20) < -768 )
    *(_DWORD *)(a1 + 20) = -768;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  v1 = &v3 + 4 * *(_DWORD *)(a1 + 104);
  result = a1 + 84;
  *(_DWORD *)result = *v1;
  *(_DWORD *)(result + 4) = v1[1];
  *(_DWORD *)(result + 8) = v1[2];
  *(_DWORD *)(result + 12) = v1[3];
  return result;
}

//----- (0043A680) --------------------------------------------------------
int __cdecl NPC95(int a1)
{
  int *v1; // edx@44
  int result; // eax@44
  int *v3; // edx@45
  int v4; // [sp+4h] [bp-80h]@1
  int v5; // [sp+8h] [bp-7Ch]@1
  int v6; // [sp+Ch] [bp-78h]@1
  int v7; // [sp+10h] [bp-74h]@1
  int v8; // [sp+14h] [bp-70h]@1
  int v9; // [sp+18h] [bp-6Ch]@1
  int v10; // [sp+1Ch] [bp-68h]@1
  int v11; // [sp+20h] [bp-64h]@1
  int v12; // [sp+24h] [bp-60h]@1
  int v13; // [sp+28h] [bp-5Ch]@1
  int v14; // [sp+2Ch] [bp-58h]@1
  int v15; // [sp+30h] [bp-54h]@1
  int v16; // [sp+34h] [bp-50h]@1
  int v17; // [sp+38h] [bp-4Ch]@1
  int v18; // [sp+3Ch] [bp-48h]@1
  int v19; // [sp+40h] [bp-44h]@1
  int v20; // [sp+44h] [bp-40h]@1
  int v21; // [sp+48h] [bp-3Ch]@1
  int v22; // [sp+4Ch] [bp-38h]@1
  int v23; // [sp+50h] [bp-34h]@1
  int v24; // [sp+54h] [bp-30h]@1
  int v25; // [sp+58h] [bp-2Ch]@1
  int v26; // [sp+5Ch] [bp-28h]@1
  int v27; // [sp+60h] [bp-24h]@1
  int v28; // [sp+64h] [bp-20h]@1
  int v29; // [sp+68h] [bp-1Ch]@1
  int v30; // [sp+6Ch] [bp-18h]@1
  int v31; // [sp+70h] [bp-14h]@1
  int v32; // [sp+74h] [bp-10h]@1
  int v33; // [sp+78h] [bp-Ch]@1
  int v34; // [sp+7Ch] [bp-8h]@1
  int v35; // [sp+80h] [bp-4h]@1

  v20 = 208;
  v21 = 64;
  v22 = 224;
  v23 = 80;
  v24 = 224;
  v25 = 64;
  v26 = 240;
  v27 = 80;
  v28 = 240;
  v29 = 64;
  v30 = 256;
  v31 = 80;
  v32 = 256;
  v33 = 64;
  v34 = 272;
  v35 = 80;
  v4 = 208;
  v5 = 80;
  v6 = 224;
  v7 = 96;
  v8 = 224;
  v9 = 80;
  v10 = 240;
  v11 = 96;
  v12 = 240;
  v13 = 80;
  v14 = 256;
  v15 = 96;
  v16 = 256;
  v17 = 80;
  v18 = 272;
  v19 = 96;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 120) = RNG_Range(0, 50);
      *(_DWORD *)(a1 + 36) = *(_DWORD *)(a1 + 12);
      *(_DWORD *)(a1 + 32) = *(_DWORD *)(a1 + 8);
      if ( *(_DWORD *)(a1 + 76) )
        *(_DWORD *)(a1 + 16) = -512;
      else
        *(_DWORD *)(a1 + 16) = 512;
      goto LABEL_5;
    case 1:
LABEL_5:
      if ( --*(_DWORD *)(a1 + 120) > 0 )
        break;
      *(_DWORD *)(a1 + 116) = 10;
      goto LABEL_7;
    case 0xA:
LABEL_7:
      if ( ++*(_DWORD *)(a1 + 120) > 10 )
      {
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 100) = 0;
        *(_DWORD *)(a1 + 116) = 11;
      }
      break;
    case 0xB:
      if ( ++*(_DWORD *)(a1 + 100) > 5 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) == 2 )
      {
        if ( *(_DWORD *)(a1 + 76) )
          *(_DWORD *)(a1 + 16) += 256;
        else
          *(_DWORD *)(a1 + 16) -= 256;
        *(_DWORD *)(a1 + 20) -= 512;
      }
      if ( *(_DWORD *)(a1 + 104) > 2 )
      {
        *(_DWORD *)(a1 + 116) = 12;
        *(_DWORD *)(a1 + 104) = 3;
      }
      break;
    case 0xC:
      ++*(_DWORD *)(a1 + 120);
      if ( *(_DWORD *)(a1 + 12) > *(_DWORD *)(a1 + 36) && *(_DWORD *)(a1 + 120) > 10 )
      {
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 116) = 10;
        *(_DWORD *)(a1 + 104) = 0;
      }
      break;
    default:
      break;
  }
  if ( *(_DWORD *)(a1 + 8) <= *(_DWORD *)(a1 + 32) )
    *(_DWORD *)(a1 + 76) = 2;
  else
    *(_DWORD *)(a1 + 76) = 0;
  if ( *(_DWORD *)(a1 + 4) & 1 )
  {
    *(_DWORD *)(a1 + 108) = 50;
    *(_DWORD *)(a1 + 76) = 2;
  }
  if ( *(_DWORD *)(a1 + 4) & 4 )
  {
    *(_DWORD *)(a1 + 108) = 50;
    *(_DWORD *)(a1 + 76) = 0;
  }
  *(_DWORD *)(a1 + 20) += 32;
  if ( *(_DWORD *)(a1 + 4) & 8 )
    *(_DWORD *)(a1 + 20) = -1024;
  if ( *(_DWORD *)(a1 + 16) > 256 )
    *(_DWORD *)(a1 + 16) = 256;
  if ( *(_DWORD *)(a1 + 16) < -256 )
    *(_DWORD *)(a1 + 16) = -256;
  if ( *(_DWORD *)(a1 + 20) > 512 )
    *(_DWORD *)(a1 + 20) = 512;
  if ( *(_DWORD *)(a1 + 20) < -512 )
    *(_DWORD *)(a1 + 20) = -512;
  if ( *(_BYTE *)(a1 + 156) )
  {
    *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16) / 2;
    *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20) / 2;
  }
  else
  {
    *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
    *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  }
  if ( *(_DWORD *)(a1 + 76) )
  {
    v3 = &v4 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v3;
    *(_DWORD *)(result + 4) = v3[1];
    *(_DWORD *)(result + 8) = v3[2];
    *(_DWORD *)(result + 12) = v3[3];
  }
  else
  {
    v1 = &v20 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v1;
    *(_DWORD *)(result + 4) = v1[1];
    *(_DWORD *)(result + 8) = v1[2];
    *(_DWORD *)(result + 12) = v1[3];
  }
  return result;
}

//----- (0043AAF0) --------------------------------------------------------
int __cdecl NPC96(int a1)
{
  int v1; // eax@18
  int *v2; // ecx@24
  int v3; // edx@24
  int result; // eax@24
  int v5; // [sp+0h] [bp-34h]@1
  int v6; // [sp+4h] [bp-30h]@1
  int v7; // [sp+8h] [bp-2Ch]@1
  int v8; // [sp+Ch] [bp-28h]@1
  int v9; // [sp+10h] [bp-24h]@1
  int v10; // [sp+14h] [bp-20h]@1
  int v11; // [sp+18h] [bp-1Ch]@1
  int v12; // [sp+1Ch] [bp-18h]@1
  int v13; // [sp+20h] [bp-14h]@1
  int v14; // [sp+24h] [bp-10h]@1
  int v15; // [sp+28h] [bp-Ch]@1
  int v16; // [sp+2Ch] [bp-8h]@1
  int v17; // [sp+30h] [bp-4h]@1

  v6 = 272;
  v7 = 120;
  v8 = 288;
  v9 = 136;
  v10 = 288;
  v11 = 120;
  v12 = 304;
  v13 = 136;
  v14 = 304;
  v15 = 120;
  v16 = 320;
  v17 = 136;
  v5 = *(_DWORD *)(a1 + 116);
  if ( !v5 )
  {
    if ( *(_DWORD *)(a1 + 76) == 2 )
      *(_DWORD *)(a1 + 116) = 2;
    else
      *(_DWORD *)(a1 + 104) = 1;
    goto LABEL_8;
  }
  if ( v5 == 1 )
  {
LABEL_8:
    *(_DWORD *)(a1 + 104) = 0;
    goto LABEL_24;
  }
  if ( v5 == 2 )
  {
    if ( ++*(_DWORD *)(a1 + 100) > 0 )
    {
      *(_DWORD *)(a1 + 100) = 0;
      ++*(_DWORD *)(a1 + 104);
    }
    if ( *(_DWORD *)(a1 + 104) > 2 )
      *(_DWORD *)(a1 + 104) = 0;
    if ( Quote_X_Position > *(_DWORD *)(a1 + 8) - 163840
      && Quote_X_Position < *(_DWORD *)(a1 + 8) + 163840
      && Quote_Y_Position > *(_DWORD *)(a1 + 12) - 122880
      && Quote_Y_Position < *(_DWORD *)(a1 + 12) + 122880
      && RNG_Range(0, 5) == 1 )
    {
      v1 = RNG_Range(-8, 8);
      NPC_Create(199, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12) + (v1 << 9), 0, 0, 0, 0, 256);
    }
    if ( Quote_Y_Position < *(_DWORD *)(a1 + 12) + 4096
      && Quote_Y_Position > *(_DWORD *)(a1 + 12) - 4096
      && Quote_X_Position < *(_DWORD *)(a1 + 8)
      && Quote_X_Position > *(_DWORD *)(a1 + 8) - 49152 )
    {
      Quote_X_Velocity -= 136;
      *(_BYTE *)&Player_Flags |= 0x20u;
    }
  }
LABEL_24:
  v2 = &v6 + 4 * *(_DWORD *)(a1 + 104);
  v3 = a1 + 84;
  *(_DWORD *)v3 = *v2;
  *(_DWORD *)(v3 + 4) = v2[1];
  result = v2[2];
  *(_DWORD *)(v3 + 8) = result;
  *(_DWORD *)(v3 + 12) = v2[3];
  return result;
}
// 49E66C: using guessed type int Quote_X_Velocity;

//----- (0043AD10) --------------------------------------------------------
int __cdecl NPC97(int a1)
{
  int v1; // ST08_4@18
  int v2; // eax@18
  int *v3; // edx@24
  int result; // eax@24
  int v5; // [sp+0h] [bp-34h]@1
  int v6; // [sp+4h] [bp-30h]@1
  int v7; // [sp+8h] [bp-2Ch]@1
  int v8; // [sp+Ch] [bp-28h]@1
  int v9; // [sp+10h] [bp-24h]@1
  int v10; // [sp+14h] [bp-20h]@1
  int v11; // [sp+18h] [bp-1Ch]@1
  int v12; // [sp+1Ch] [bp-18h]@1
  int v13; // [sp+20h] [bp-14h]@1
  int v14; // [sp+24h] [bp-10h]@1
  int v15; // [sp+28h] [bp-Ch]@1
  int v16; // [sp+2Ch] [bp-8h]@1
  int v17; // [sp+30h] [bp-4h]@1

  v6 = 272;
  v7 = 136;
  v8 = 288;
  v9 = 152;
  v10 = 288;
  v11 = 136;
  v12 = 304;
  v13 = 152;
  v14 = 304;
  v15 = 136;
  v16 = 320;
  v17 = 152;
  v5 = *(_DWORD *)(a1 + 116);
  if ( !v5 )
  {
    if ( *(_DWORD *)(a1 + 76) == 2 )
      *(_DWORD *)(a1 + 116) = 2;
    else
      *(_DWORD *)(a1 + 104) = 1;
    goto LABEL_8;
  }
  if ( v5 == 1 )
  {
LABEL_8:
    *(_DWORD *)(a1 + 104) = 0;
    goto LABEL_24;
  }
  if ( v5 == 2 )
  {
    if ( ++*(_DWORD *)(a1 + 100) > 0 )
    {
      *(_DWORD *)(a1 + 100) = 0;
      ++*(_DWORD *)(a1 + 104);
    }
    if ( *(_DWORD *)(a1 + 104) > 2 )
      *(_DWORD *)(a1 + 104) = 0;
    if ( Quote_X_Position > *(_DWORD *)(a1 + 8) - 163840
      && Quote_X_Position < *(_DWORD *)(a1 + 8) + 163840
      && Quote_Y_Position > *(_DWORD *)(a1 + 12) - 122880
      && Quote_Y_Position < *(_DWORD *)(a1 + 12) + 122880
      && RNG_Range(0, 5) == 1 )
    {
      v1 = *(_DWORD *)(a1 + 12);
      v2 = RNG_Range(-8, 8);
      NPC_Create(199, *(_DWORD *)(a1 + 8) + (v2 << 9), v1, 0, 0, 1, 0, 256);
    }
    if ( Quote_X_Position < *(_DWORD *)(a1 + 8) + 4096
      && Quote_X_Position > *(_DWORD *)(a1 + 8) - 4096
      && Quote_Y_Position < *(_DWORD *)(a1 + 12)
      && Quote_Y_Position > *(_DWORD *)(a1 + 12) - 49152 )
    {
      Quote_Y_Velocity -= 136;
    }
  }
LABEL_24:
  v3 = &v6 + 4 * *(_DWORD *)(a1 + 104);
  result = a1 + 84;
  *(_DWORD *)result = *v3;
  *(_DWORD *)(result + 4) = v3[1];
  *(_DWORD *)(result + 8) = v3[2];
  *(_DWORD *)(result + 12) = v3[3];
  return result;
}
// 49E670: using guessed type int Quote_Y_Velocity;

//----- (0043AF20) --------------------------------------------------------
int __cdecl NPC98(int a1)
{
  int v1; // eax@18
  int *v2; // ecx@24
  int v3; // edx@24
  int result; // eax@24
  int v5; // [sp+0h] [bp-34h]@1
  int v6; // [sp+4h] [bp-30h]@1
  int v7; // [sp+8h] [bp-2Ch]@1
  int v8; // [sp+Ch] [bp-28h]@1
  int v9; // [sp+10h] [bp-24h]@1
  int v10; // [sp+14h] [bp-20h]@1
  int v11; // [sp+18h] [bp-1Ch]@1
  int v12; // [sp+1Ch] [bp-18h]@1
  int v13; // [sp+20h] [bp-14h]@1
  int v14; // [sp+24h] [bp-10h]@1
  int v15; // [sp+28h] [bp-Ch]@1
  int v16; // [sp+2Ch] [bp-8h]@1
  int v17; // [sp+30h] [bp-4h]@1

  v6 = 272;
  v7 = 152;
  v8 = 288;
  v9 = 168;
  v10 = 288;
  v11 = 152;
  v12 = 304;
  v13 = 168;
  v14 = 304;
  v15 = 152;
  v16 = 320;
  v17 = 168;
  v5 = *(_DWORD *)(a1 + 116);
  if ( !v5 )
  {
    if ( *(_DWORD *)(a1 + 76) == 2 )
      *(_DWORD *)(a1 + 116) = 2;
    else
      *(_DWORD *)(a1 + 104) = 1;
    goto LABEL_8;
  }
  if ( v5 == 1 )
  {
LABEL_8:
    *(_DWORD *)(a1 + 104) = 0;
    goto LABEL_24;
  }
  if ( v5 == 2 )
  {
    if ( ++*(_DWORD *)(a1 + 100) > 0 )
    {
      *(_DWORD *)(a1 + 100) = 0;
      ++*(_DWORD *)(a1 + 104);
    }
    if ( *(_DWORD *)(a1 + 104) > 2 )
      *(_DWORD *)(a1 + 104) = 0;
    if ( Quote_X_Position > *(_DWORD *)(a1 + 8) - 163840
      && Quote_X_Position < *(_DWORD *)(a1 + 8) + 163840
      && Quote_Y_Position > *(_DWORD *)(a1 + 12) - 122880
      && Quote_Y_Position < *(_DWORD *)(a1 + 12) + 122880
      && RNG_Range(0, 5) == 1 )
    {
      v1 = RNG_Range(-8, 8);
      NPC_Create(199, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12) + (v1 << 9), 0, 0, 2, 0, 256);
    }
    if ( Quote_Y_Position < *(_DWORD *)(a1 + 12) + 4096
      && Quote_Y_Position > *(_DWORD *)(a1 + 12) - 4096
      && Quote_X_Position < *(_DWORD *)(a1 + 8) + 49152
      && Quote_X_Position > *(_DWORD *)(a1 + 8) )
    {
      Quote_X_Velocity += 136;
      *(_BYTE *)&Player_Flags |= 0x20u;
    }
  }
LABEL_24:
  v2 = &v6 + 4 * *(_DWORD *)(a1 + 104);
  v3 = a1 + 84;
  *(_DWORD *)v3 = *v2;
  *(_DWORD *)(v3 + 4) = v2[1];
  result = v2[2];
  *(_DWORD *)(v3 + 8) = result;
  *(_DWORD *)(v3 + 12) = v2[3];
  return result;
}
// 49E66C: using guessed type int Quote_X_Velocity;

//----- (0043B140) --------------------------------------------------------
int __cdecl NPC99(int a1)
{
  int v1; // ST08_4@18
  int v2; // eax@18
  int *v3; // edx@24
  int result; // eax@24
  int v5; // [sp+0h] [bp-34h]@1
  int v6; // [sp+4h] [bp-30h]@1
  int v7; // [sp+8h] [bp-2Ch]@1
  int v8; // [sp+Ch] [bp-28h]@1
  int v9; // [sp+10h] [bp-24h]@1
  int v10; // [sp+14h] [bp-20h]@1
  int v11; // [sp+18h] [bp-1Ch]@1
  int v12; // [sp+1Ch] [bp-18h]@1
  int v13; // [sp+20h] [bp-14h]@1
  int v14; // [sp+24h] [bp-10h]@1
  int v15; // [sp+28h] [bp-Ch]@1
  int v16; // [sp+2Ch] [bp-8h]@1
  int v17; // [sp+30h] [bp-4h]@1

  v6 = 272;
  v7 = 168;
  v8 = 288;
  v9 = 184;
  v10 = 288;
  v11 = 168;
  v12 = 304;
  v13 = 184;
  v14 = 304;
  v15 = 168;
  v16 = 320;
  v17 = 184;
  v5 = *(_DWORD *)(a1 + 116);
  if ( !v5 )
  {
    if ( *(_DWORD *)(a1 + 76) == 2 )
      *(_DWORD *)(a1 + 116) = 2;
    else
      *(_DWORD *)(a1 + 104) = 1;
    goto LABEL_8;
  }
  if ( v5 == 1 )
  {
LABEL_8:
    *(_DWORD *)(a1 + 104) = 0;
    goto LABEL_24;
  }
  if ( v5 == 2 )
  {
    if ( ++*(_DWORD *)(a1 + 100) > 0 )
    {
      *(_DWORD *)(a1 + 100) = 0;
      ++*(_DWORD *)(a1 + 104);
    }
    if ( *(_DWORD *)(a1 + 104) > 2 )
      *(_DWORD *)(a1 + 104) = 0;
    if ( Quote_X_Position > *(_DWORD *)(a1 + 8) - 163840
      && Quote_X_Position < *(_DWORD *)(a1 + 8) + 163840
      && Quote_Y_Position > *(_DWORD *)(a1 + 12) - 122880
      && Quote_Y_Position < *(_DWORD *)(a1 + 12) + 122880
      && RNG_Range(0, 5) == 1 )
    {
      v1 = *(_DWORD *)(a1 + 12);
      v2 = RNG_Range(-8, 8);
      NPC_Create(199, *(_DWORD *)(a1 + 8) + (v2 << 9), v1, 0, 0, 3, 0, 256);
    }
    if ( Quote_X_Position < *(_DWORD *)(a1 + 8) + 4096
      && Quote_X_Position > *(_DWORD *)(a1 + 8) - 4096
      && Quote_Y_Position < *(_DWORD *)(a1 + 12) + 49152
      && Quote_Y_Position > *(_DWORD *)(a1 + 12) )
    {
      Quote_Y_Velocity += 136;
    }
  }
LABEL_24:
  v3 = &v6 + 4 * *(_DWORD *)(a1 + 104);
  result = a1 + 84;
  *(_DWORD *)result = *v3;
  *(_DWORD *)(result + 4) = v3[1];
  *(_DWORD *)(result + 8) = v3[2];
  *(_DWORD *)(result + 12) = v3[3];
  return result;
}
// 49E670: using guessed type int Quote_Y_Velocity;

//----- (0043B350) --------------------------------------------------------
signed int __cdecl NPC100(int a1)
{
  int v1; // ecx@3
  signed int result; // eax@3

  if ( !*(_DWORD *)(a1 + 116) )
  {
    *(_DWORD *)(a1 + 12) += 0x2000;
    *(_DWORD *)(a1 + 116) = 1;
  }
  v1 = a1 + 84;
  *(_DWORD *)v1 = 272;
  *(_DWORD *)(v1 + 4) = 48;
  *(_DWORD *)(v1 + 8) = 288;
  result = 64;
  *(_DWORD *)(v1 + 12) = 64;
  return result;
}

//----- (0043B410) --------------------------------------------------------
int __cdecl NPC101(int a1)
{
  int *v1; // eax@5
  int v2; // ecx@5
  int result; // eax@5
  int v4; // [sp+0h] [bp-30h]@1
  int v5; // [sp+4h] [bp-2Ch]@1
  int v6; // [sp+8h] [bp-28h]@1
  int v7; // [sp+Ch] [bp-24h]@1
  int v8; // [sp+10h] [bp-20h]@1
  int v9; // [sp+14h] [bp-1Ch]@1
  int v10; // [sp+18h] [bp-18h]@1
  int v11; // [sp+1Ch] [bp-14h]@1
  int v12; // [sp+20h] [bp-10h]@1
  int v13; // [sp+24h] [bp-Ch]@1
  int v14; // [sp+28h] [bp-8h]@1
  int v15; // [sp+2Ch] [bp-4h]@1

  v4 = 240;
  v5 = 136;
  v6 = 256;
  v7 = 152;
  v8 = 240;
  v9 = 136;
  v10 = 256;
  v11 = 152;
  v12 = 256;
  v13 = 136;
  v14 = 272;
  v15 = 152;
  if ( ++*(_DWORD *)(a1 + 100) > 3 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    ++*(_DWORD *)(a1 + 104);
  }
  if ( *(_DWORD *)(a1 + 104) > 2 )
    *(_DWORD *)(a1 + 104) = 0;
  v1 = &v4 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  *(_DWORD *)(v2 + 8) = v1[2];
  result = v1[3];
  *(_DWORD *)(v2 + 12) = result;
  return result;
}

//----- (0043B4E0) --------------------------------------------------------
int __cdecl NPC102(int a1)
{
  int *v1; // edx@7
  int result; // eax@7
  int v3; // [sp+0h] [bp-40h]@1
  int v4; // [sp+4h] [bp-3Ch]@1
  int v5; // [sp+8h] [bp-38h]@1
  int v6; // [sp+Ch] [bp-34h]@1
  int v7; // [sp+10h] [bp-30h]@1
  int v8; // [sp+14h] [bp-2Ch]@1
  int v9; // [sp+18h] [bp-28h]@1
  int v10; // [sp+1Ch] [bp-24h]@1
  int v11; // [sp+20h] [bp-20h]@1
  int v12; // [sp+24h] [bp-1Ch]@1
  int v13; // [sp+28h] [bp-18h]@1
  int v14; // [sp+2Ch] [bp-14h]@1
  int v15; // [sp+30h] [bp-10h]@1
  int v16; // [sp+34h] [bp-Ch]@1
  int v17; // [sp+38h] [bp-8h]@1
  int v18; // [sp+3Ch] [bp-4h]@1

  v3 = 208;
  v4 = 120;
  v5 = 224;
  v6 = 136;
  v7 = 224;
  v8 = 120;
  v9 = 240;
  v10 = 136;
  v11 = 240;
  v12 = 120;
  v13 = 256;
  v14 = 136;
  v15 = 256;
  v16 = 120;
  v17 = 272;
  v18 = 136;
  if ( !*(_DWORD *)(a1 + 116) )
  {
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 12) += 4096;
  }
  if ( ++*(_DWORD *)(a1 + 100) > 0 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    ++*(_DWORD *)(a1 + 104);
  }
  if ( *(_DWORD *)(a1 + 104) > 3 )
    *(_DWORD *)(a1 + 104) = 0;
  v1 = &v3 + 4 * *(_DWORD *)(a1 + 104);
  result = a1 + 84;
  *(_DWORD *)result = *v1;
  *(_DWORD *)(result + 4) = v1[1];
  *(_DWORD *)(result + 8) = v1[2];
  *(_DWORD *)(result + 12) = v1[3];
  return result;
}

//----- (0043B5F0) --------------------------------------------------------
int __cdecl NPC103(int a1)
{
  int *v1; // eax@13
  int v2; // ecx@13
  int *v3; // eax@14
  int v4; // ecx@14
  int result; // eax@17
  int v6; // [sp+0h] [bp-64h]@1
  int v7; // [sp+4h] [bp-60h]@1
  int v8; // [sp+8h] [bp-5Ch]@1
  int v9; // [sp+Ch] [bp-58h]@1
  int v10; // [sp+10h] [bp-54h]@1
  int v11; // [sp+14h] [bp-50h]@1
  int v12; // [sp+18h] [bp-4Ch]@1
  int v13; // [sp+1Ch] [bp-48h]@1
  int v14; // [sp+20h] [bp-44h]@1
  int v15; // [sp+24h] [bp-40h]@1
  int v16; // [sp+28h] [bp-3Ch]@1
  int v17; // [sp+2Ch] [bp-38h]@1
  int v18; // [sp+30h] [bp-34h]@1
  int v19; // [sp+34h] [bp-30h]@1
  int v20; // [sp+38h] [bp-2Ch]@1
  int v21; // [sp+3Ch] [bp-28h]@1
  int v22; // [sp+40h] [bp-24h]@1
  int v23; // [sp+44h] [bp-20h]@1
  int v24; // [sp+48h] [bp-1Ch]@1
  int v25; // [sp+4Ch] [bp-18h]@1
  int v26; // [sp+50h] [bp-14h]@1
  int v27; // [sp+54h] [bp-10h]@1
  int v28; // [sp+58h] [bp-Ch]@1
  int v29; // [sp+5Ch] [bp-8h]@1
  int v30; // [sp+60h] [bp-4h]@1

  v19 = 192;
  v20 = 96;
  v21 = 208;
  v22 = 120;
  v23 = 208;
  v24 = 96;
  v25 = 224;
  v26 = 120;
  v27 = 224;
  v28 = 96;
  v29 = 240;
  v30 = 120;
  v7 = 192;
  v8 = 120;
  v9 = 208;
  v10 = 144;
  v11 = 208;
  v12 = 120;
  v13 = 224;
  v14 = 144;
  v15 = 224;
  v16 = 120;
  v17 = 240;
  v18 = 144;
  v6 = *(_DWORD *)(a1 + 116);
  if ( v6 )
  {
    if ( v6 != 1 )
      goto LABEL_12;
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 1;
  }
  if ( *(_DWORD *)(a1 + 76) )
    *(_DWORD *)(a1 + 16) += 32;
  else
    *(_DWORD *)(a1 + 16) -= 32;
  if ( ++*(_DWORD *)(a1 + 100) > 0 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    ++*(_DWORD *)(a1 + 104);
  }
  if ( *(_DWORD *)(a1 + 104) > 2 )
    *(_DWORD *)(a1 + 104) = 0;
LABEL_12:
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  if ( *(_DWORD *)(a1 + 76) )
  {
    v3 = &v7 + 4 * *(_DWORD *)(a1 + 104);
    v4 = a1 + 84;
    *(_DWORD *)v4 = *v3;
    *(_DWORD *)(v4 + 4) = v3[1];
    *(_DWORD *)(v4 + 8) = v3[2];
    *(_DWORD *)(v4 + 12) = v3[3];
  }
  else
  {
    v1 = &v19 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    *(_DWORD *)(v2 + 8) = v1[2];
    *(_DWORD *)(v2 + 12) = v1[3];
  }
  if ( ++*(_DWORD *)(a1 + 108) > 100 )
    *(_BYTE *)a1 = 0;
  result = a1;
  if ( *(_DWORD *)(a1 + 108) % 4 == 1 )
    result = Play_Sound_Effect(46, 1);
  return result;
}

//----- (0043B7F0) --------------------------------------------------------
int __cdecl NPC104(int a1)
{
  int *v1; // edx@56
  int result; // eax@56
  int *v3; // edx@57
  signed int v4; // [sp+4h] [bp-64h]@32
  int v5; // [sp+8h] [bp-60h]@1
  int v6; // [sp+Ch] [bp-5Ch]@1
  int v7; // [sp+10h] [bp-58h]@1
  int v8; // [sp+14h] [bp-54h]@1
  int v9; // [sp+18h] [bp-50h]@1
  int v10; // [sp+1Ch] [bp-4Ch]@1
  int v11; // [sp+20h] [bp-48h]@1
  int v12; // [sp+24h] [bp-44h]@1
  int v13; // [sp+28h] [bp-40h]@1
  int v14; // [sp+2Ch] [bp-3Ch]@1
  int v15; // [sp+30h] [bp-38h]@1
  int v16; // [sp+34h] [bp-34h]@1
  int v17; // [sp+38h] [bp-30h]@1
  int v18; // [sp+3Ch] [bp-2Ch]@1
  int v19; // [sp+40h] [bp-28h]@1
  int v20; // [sp+44h] [bp-24h]@1
  int v21; // [sp+48h] [bp-20h]@1
  int v22; // [sp+4Ch] [bp-1Ch]@1
  int v23; // [sp+50h] [bp-18h]@1
  int v24; // [sp+54h] [bp-14h]@1
  int v25; // [sp+58h] [bp-10h]@1
  int v26; // [sp+5Ch] [bp-Ch]@1
  int v27; // [sp+60h] [bp-8h]@1
  int v28; // [sp+64h] [bp-4h]@1

  v17 = 0;
  v18 = 112;
  v19 = 32;
  v20 = 144;
  v21 = 32;
  v22 = 112;
  v23 = 64;
  v24 = 144;
  v25 = 64;
  v26 = 112;
  v27 = 96;
  v28 = 144;
  v5 = 0;
  v6 = 144;
  v7 = 32;
  v8 = 176;
  v9 = 32;
  v10 = 144;
  v11 = 64;
  v12 = 176;
  v13 = 64;
  v14 = 144;
  v15 = 96;
  v16 = 176;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 16) = 0;
      *(_DWORD *)(a1 + 20) = 0;
      if ( *(_DWORD *)(a1 + 76) != 4 )
      {
        *(_WORD *)(a1 + 80) &= 0xFFF7u;
        goto LABEL_8;
      }
      if ( RNG_Range(0, 1) )
        *(_DWORD *)(a1 + 76) = 0;
      else
        *(_DWORD *)(a1 + 76) = 2;
      *(_WORD *)(a1 + 80) |= 8u;
      *(_DWORD *)(a1 + 104) = 2;
      *(_DWORD *)(a1 + 116) = 3;
      break;
    case 1:
LABEL_8:
      ++*(_DWORD *)(a1 + 120);
      if ( RNG_Range(0, 50) == 1 )
      {
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 0;
        *(_DWORD *)(a1 + 100) = 0;
      }
      break;
    case 2:
      ++*(_DWORD *)(a1 + 120);
      if ( ++*(_DWORD *)(a1 + 100) > 2 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 1 )
        *(_DWORD *)(a1 + 104) = 0;
      if ( *(_DWORD *)(a1 + 120) > 18 )
      {
        *(_DWORD *)(a1 + 116) = 1;
        *(_DWORD *)(a1 + 116) = 1;
      }
      break;
    case 3:
      if ( ++*(_DWORD *)(a1 + 120) > 40 )
        *(_WORD *)(a1 + 80) &= 0xFFF7u;
      if ( *(_DWORD *)(a1 + 4) & 8 )
      {
        *(_DWORD *)(a1 + 116) = 0;
        *(_DWORD *)(a1 + 104) = 0;
        *(_DWORD *)(a1 + 120) = 0;
      }
      break;
    case 0xA:
      *(_DWORD *)(a1 + 116) = 11;
      goto LABEL_24;
    case 0xB:
LABEL_24:
      if ( *(_DWORD *)(a1 + 4) & 1 && *(_DWORD *)(a1 + 16) < 0 )
      {
        *(_DWORD *)(a1 + 16) = -*(_DWORD *)(a1 + 16);
        *(_DWORD *)(a1 + 76) = 2;
      }
      if ( *(_DWORD *)(a1 + 4) & 4 && *(_DWORD *)(a1 + 16) > 0 )
      {
        *(_DWORD *)(a1 + 16) = -*(_DWORD *)(a1 + 16);
        *(_DWORD *)(a1 + 76) = 0;
      }
      if ( *(_DWORD *)(a1 + 4) & 8 )
      {
        *(_DWORD *)(a1 + 116) = 0;
        *(_DWORD *)(a1 + 104) = 0;
        *(_DWORD *)(a1 + 120) = 0;
      }
      break;
    default:
      break;
  }
  v4 = 0;
  if ( *(_DWORD *)(a1 + 116) < 10 && *(_DWORD *)(a1 + 116) != 3 && *(_DWORD *)(a1 + 120) > 10 )
  {
    if ( *(_BYTE *)(a1 + 156) )
      v4 = 1;
    if ( *(_DWORD *)(a1 + 8) >= Quote_X_Position - 81920
      && *(_DWORD *)(a1 + 8) <= Quote_X_Position + 81920
      && *(_DWORD *)(a1 + 12) >= Quote_Y_Position - 0x8000
      && *(_DWORD *)(a1 + 12) <= Quote_Y_Position + 0x8000
      && RNG_Range(0, 50) == 2 )
    {
      v4 = 1;
    }
  }
  if ( v4 )
  {
    if ( *(_DWORD *)(a1 + 8) >= Quote_X_Position )
      *(_DWORD *)(a1 + 76) = 0;
    else
      *(_DWORD *)(a1 + 76) = 2;
    *(_DWORD *)(a1 + 116) = 10;
    *(_DWORD *)(a1 + 104) = 2;
    *(_DWORD *)(a1 + 20) = -1535;
    if ( !(*(_BYTE *)&Player_Flags & 2) )
      Play_Sound_Effect(30, 1);
    if ( *(_DWORD *)(a1 + 76) )
      *(_DWORD *)(a1 + 16) = 512;
    else
      *(_DWORD *)(a1 + 16) = -512;
  }
  *(_DWORD *)(a1 + 20) += 128;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 76) )
  {
    v3 = &v5 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v3;
    *(_DWORD *)(result + 4) = v3[1];
    *(_DWORD *)(result + 8) = v3[2];
    *(_DWORD *)(result + 12) = v3[3];
  }
  else
  {
    v1 = &v17 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v1;
    *(_DWORD *)(result + 4) = v1[1];
    *(_DWORD *)(result + 8) = v1[2];
    *(_DWORD *)(result + 12) = v1[3];
  }
  return result;
}

//----- (0043BD00) --------------------------------------------------------
int __cdecl NPC105(int a1)
{
  int *v1; // edx@5
  int result; // eax@5
  int v3; // [sp+0h] [bp-20h]@1
  int v4; // [sp+4h] [bp-1Ch]@1
  int v5; // [sp+8h] [bp-18h]@1
  int v6; // [sp+Ch] [bp-14h]@1
  int v7; // [sp+10h] [bp-10h]@1
  int v8; // [sp+14h] [bp-Ch]@1
  int v9; // [sp+18h] [bp-8h]@1
  int v10; // [sp+1Ch] [bp-4h]@1

  v3 = 128;
  v4 = 32;
  v5 = 144;
  v6 = 48;
  v7 = 128;
  v8 = 32;
  v9 = 128;
  v10 = 32;
  if ( ++*(_DWORD *)(a1 + 120) > 30 )
    *(_BYTE *)a1 = 0;
  if ( *(_DWORD *)(a1 + 120) < 5 )
    *(_DWORD *)(a1 + 12) -= 512;
  v1 = &v3 + 4 * *(_DWORD *)(a1 + 104);
  result = a1 + 84;
  *(_DWORD *)result = *v1;
  *(_DWORD *)(result + 4) = v1[1];
  *(_DWORD *)(result + 8) = v1[2];
  *(_DWORD *)(result + 12) = v1[3];
  return result;
}

//----- (0043BDB0) --------------------------------------------------------
int __cdecl NPC106(int a1)
{
  int result; // eax@1

  result = a1;
  if ( !*(_DWORD *)(a1 + 116) )
  {
    NPC_Create(105, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12) - 4096, 0, 0, 0, 0, 384);
    result = a1;
    *(_DWORD *)(a1 + 116) = 1;
  }
  return result;
}

//----- (0043BE00) --------------------------------------------------------
int __cdecl NPC107(int a1)
{
  int v1; // ST10_4@7
  int v2; // eax@7
  int v3; // ST10_4@28
  int v4; // eax@28
  int v5; // ST10_4@40
  int v6; // eax@40
  int *v7; // ecx@51
  int v8; // edx@51
  int result; // eax@51
  int v10; // [sp+4h] [bp-A8h]@51
  int v11; // [sp+8h] [bp-A4h]@51
  int v12; // [sp+Ch] [bp-A0h]@51
  int v13; // [sp+10h] [bp-9Ch]@51
  int v14; // [sp+14h] [bp-98h]@51
  int v15; // [sp+18h] [bp-94h]@51
  int v16; // [sp+1Ch] [bp-90h]@51
  int v17; // [sp+20h] [bp-8Ch]@51
  int v18; // [sp+24h] [bp-88h]@51
  int v19; // [sp+28h] [bp-84h]@51
  int v20; // [sp+2Ch] [bp-80h]@51
  int v21; // [sp+30h] [bp-7Ch]@51
  int v22; // [sp+34h] [bp-78h]@51
  int v23; // [sp+38h] [bp-74h]@51
  int v24; // [sp+3Ch] [bp-70h]@51
  int v25; // [sp+40h] [bp-6Ch]@51
  int v26; // [sp+44h] [bp-68h]@51
  int v27; // [sp+48h] [bp-64h]@51
  int v28; // [sp+4Ch] [bp-60h]@51
  int v29; // [sp+50h] [bp-5Ch]@51
  int v30; // [sp+54h] [bp-58h]@51
  int v31; // [sp+58h] [bp-54h]@51
  int v32; // [sp+5Ch] [bp-50h]@51
  int v33; // [sp+60h] [bp-4Ch]@51
  int v34; // [sp+64h] [bp-48h]@51
  int v35; // [sp+68h] [bp-44h]@51
  int v36; // [sp+6Ch] [bp-40h]@51
  int v37; // [sp+70h] [bp-3Ch]@51
  int v38; // [sp+74h] [bp-38h]@51
  int v39; // [sp+78h] [bp-34h]@51
  int v40; // [sp+7Ch] [bp-30h]@51
  int v41; // [sp+80h] [bp-2Ch]@51
  int v42; // [sp+84h] [bp-28h]@51
  int v43; // [sp+88h] [bp-24h]@51
  int v44; // [sp+8Ch] [bp-20h]@51
  int v45; // [sp+90h] [bp-1Ch]@51
  int v46; // [sp+94h] [bp-18h]@51
  int v47; // [sp+98h] [bp-14h]@51
  int v48; // [sp+9Ch] [bp-10h]@51
  int v49; // [sp+A0h] [bp-Ch]@51
  int i; // [sp+A8h] [bp-4h]@5

  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      if ( *(_DWORD *)(a1 + 76) == 2 )
        *(_DWORD *)(a1 + 104) = 5;
      break;
    case 0xA:
      *(_DWORD *)(a1 + 116) = 11;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 100) = 0;
      for ( i = 0; i < 4; ++i )
      {
        v1 = RNG_Range(-1536, 0);
        v2 = RNG_Range(-341, 341);
        NPC_Create(4, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), v2, v1, 0, 0, 256);
      }
      goto LABEL_8;
    case 0xB:
LABEL_8:
      if ( ++*(_DWORD *)(a1 + 100) > 1 )
      {
        Play_Sound_Effect(43, 1);
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 1 )
        *(_DWORD *)(a1 + 104) = 0;
      if ( ++*(_DWORD *)(a1 + 120) > 100 )
        *(_DWORD *)(a1 + 116) = 12;
      break;
    case 0xC:
      *(_DWORD *)(a1 + 116) = 13;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 104) = 1;
      goto LABEL_16;
    case 0xD:
LABEL_16:
      if ( ++*(_DWORD *)(a1 + 120) > 50 )
        *(_DWORD *)(a1 + 116) = 14;
      break;
    case 0xE:
      *(_DWORD *)(a1 + 116) = 15;
      *(_DWORD *)(a1 + 120) = 0;
      goto LABEL_20;
    case 0xF:
LABEL_20:
      if ( *(_DWORD *)(a1 + 120) / 2 % 2 )
      {
        *(_DWORD *)(a1 + 8) += 512;
        Play_Sound_Effect(11, 1);
      }
      else
      {
        *(_DWORD *)(a1 + 8) -= 512;
      }
      if ( ++*(_DWORD *)(a1 + 120) > 50 )
        *(_DWORD *)(a1 + 116) = 16;
      break;
    case 0x10:
      *(_DWORD *)(a1 + 116) = 17;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 104) = 2;
      Play_Sound_Effect(12, 1);
      for ( i = 0; i < 8; ++i )
      {
        v3 = RNG_Range(-1536, 0);
        v4 = RNG_Range(-341, 341);
        NPC_Create(4, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), v4, v3, 0, 0, 256);
      }
      goto LABEL_29;
    case 0x11:
LABEL_29:
      if ( ++*(_DWORD *)(a1 + 120) > 150 )
        *(_DWORD *)(a1 + 116) = 18;
      break;
    case 0x12:
      *(_DWORD *)(a1 + 116) = 19;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 104) = 3;
      *(_DWORD *)(a1 + 100) = 0;
      goto LABEL_33;
    case 0x13:
LABEL_33:
      if ( ++*(_DWORD *)(a1 + 100) > 3 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 4 )
      {
        Play_Sound_Effect(11, 1);
        *(_DWORD *)(a1 + 104) = 3;
      }
      if ( ++*(_DWORD *)(a1 + 120) > 100 )
      {
        *(_DWORD *)(a1 + 116) = 20;
        Play_Sound_Effect(12, 1);
        for ( i = 0; i < 4; ++i )
        {
          v5 = RNG_Range(-1536, 0);
          v6 = RNG_Range(-341, 341);
          NPC_Create(4, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), v6, v5, 0, 0, 256);
        }
      }
      break;
    case 0x14:
      *(_DWORD *)(a1 + 104) = 4;
      break;
    case 0x15:
      *(_DWORD *)(a1 + 116) = 22;
      *(_DWORD *)(a1 + 104) = 5;
      Play_Sound_Effect(51, 1);
      break;
    case 0x64:
      *(_DWORD *)(a1 + 116) = 101;
      *(_DWORD *)(a1 + 104) = 6;
      *(_DWORD *)(a1 + 100) = 0;
      goto LABEL_45;
    case 0x65:
LABEL_45:
      if ( ++*(_DWORD *)(a1 + 100) > 4 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 9 )
        *(_DWORD *)(a1 + 104) = 6;
      break;
    case 0x6E:
      sub_46F150(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 0x2000, 16);
      *(_BYTE *)a1 = 0;
      break;
    default:
      break;
  }
  v10 = 144;
  v11 = 0;
  v12 = 160;
  v13 = 24;
  v14 = 160;
  v15 = 0;
  v16 = 176;
  v17 = 24;
  v18 = 176;
  v19 = 0;
  v20 = 192;
  v21 = 24;
  v22 = 192;
  v23 = 0;
  v24 = 208;
  v25 = 24;
  v26 = 208;
  v27 = 0;
  v28 = 224;
  v29 = 24;
  v30 = 224;
  v31 = 0;
  v32 = 240;
  v33 = 24;
  v34 = 176;
  v35 = 0;
  v36 = 192;
  v37 = 24;
  v38 = 192;
  v39 = 0;
  v40 = 208;
  v41 = 24;
  v42 = 208;
  v43 = 0;
  v44 = 224;
  v45 = 24;
  v46 = 192;
  v47 = 0;
  v48 = 208;
  v49 = 24;
  v7 = &v10 + 4 * *(_DWORD *)(a1 + 104);
  v8 = a1 + 84;
  *(_DWORD *)v8 = *v7;
  *(_DWORD *)(v8 + 4) = v7[1];
  result = v7[2];
  *(_DWORD *)(v8 + 8) = result;
  *(_DWORD *)(v8 + 12) = v7[3];
  return result;
}

//----- (0043C4B0) --------------------------------------------------------
int __cdecl NPC108(int a1)
{
  int *v1; // eax@7
  int v2; // ecx@7
  int result; // eax@7
  int v4; // [sp+0h] [bp-30h]@3
  int v5; // [sp+4h] [bp-2Ch]@3
  int v6; // [sp+8h] [bp-28h]@3
  int v7; // [sp+Ch] [bp-24h]@3
  int v8; // [sp+10h] [bp-20h]@3
  int v9; // [sp+14h] [bp-1Ch]@3
  int v10; // [sp+18h] [bp-18h]@3
  int v11; // [sp+1Ch] [bp-14h]@3
  int v12; // [sp+20h] [bp-10h]@3
  int v13; // [sp+24h] [bp-Ch]@3
  int v14; // [sp+28h] [bp-8h]@3
  int v15; // [sp+2Ch] [bp-4h]@3

  if ( *(_DWORD *)(a1 + 4) & 0xFF )
  {
    Create_Animated_Effect(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 2, 0);
    *(_BYTE *)a1 = 0;
  }
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  v4 = 96;
  v5 = 48;
  v6 = 112;
  v7 = 64;
  v8 = 112;
  v9 = 48;
  v10 = 128;
  v11 = 64;
  v12 = 128;
  v13 = 48;
  v14 = 144;
  v15 = 64;
  if ( ++*(_DWORD *)(a1 + 100) > 1 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    ++*(_DWORD *)(a1 + 104);
  }
  if ( *(_DWORD *)(a1 + 104) > 2 )
    *(_DWORD *)(a1 + 104) = 0;
  v1 = &v4 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  *(_DWORD *)(v2 + 8) = v1[2];
  *(_DWORD *)(v2 + 12) = v1[3];
  result = a1;
  if ( ++*(_DWORD *)(a1 + 108) > 300 )
  {
    Create_Animated_Effect(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 2, 0);
    result = a1;
    *(_BYTE *)a1 = 0;
  }
  return result;
}

//----- (0043C610) --------------------------------------------------------
int __cdecl NPC109(int a1)
{
  int v1; // ST10_4@20
  int v2; // eax@20
  int *v3; // edx@24
  int result; // eax@24
  int *v5; // edx@25
  int v6; // [sp+4h] [bp-44h]@1
  int v7; // [sp+8h] [bp-40h]@1
  int v8; // [sp+Ch] [bp-3Ch]@1
  int v9; // [sp+10h] [bp-38h]@1
  int v10; // [sp+14h] [bp-34h]@1
  int v11; // [sp+18h] [bp-30h]@1
  int v12; // [sp+1Ch] [bp-2Ch]@1
  int v13; // [sp+20h] [bp-28h]@1
  int i; // [sp+24h] [bp-24h]@18
  int v15; // [sp+28h] [bp-20h]@1
  int v16; // [sp+2Ch] [bp-1Ch]@1
  int v17; // [sp+30h] [bp-18h]@1
  int v18; // [sp+34h] [bp-14h]@1
  int v19; // [sp+38h] [bp-10h]@1
  int v20; // [sp+3Ch] [bp-Ch]@1
  int v21; // [sp+40h] [bp-8h]@1
  int v22; // [sp+44h] [bp-4h]@1

  v15 = 240;
  v16 = 0;
  v17 = 256;
  v18 = 24;
  v19 = 256;
  v20 = 0;
  v21 = 272;
  v22 = 24;
  v6 = 240;
  v7 = 24;
  v8 = 256;
  v9 = 48;
  v10 = 256;
  v11 = 24;
  v12 = 272;
  v13 = 48;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      if ( --*(_DWORD *)(a1 + 120) )
        *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 100) = 0;
      goto LABEL_5;
    case 1:
LABEL_5:
      if ( RNG_Range(0, 120) == 10 )
      {
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 1;
      }
      if ( *(_DWORD *)(a1 + 8) - 0x4000 < Quote_X_Position
        && *(_DWORD *)(a1 + 8) + 0x4000 > Quote_X_Position
        && *(_DWORD *)(a1 + 12) - 0x4000 < Quote_Y_Position
        && *(_DWORD *)(a1 + 12) + 0x2000 > Quote_Y_Position )
      {
        if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
          *(_DWORD *)(a1 + 76) = 2;
        else
          *(_DWORD *)(a1 + 76) = 0;
      }
      break;
    case 2:
      if ( ++*(_DWORD *)(a1 + 120) > 8 )
      {
        *(_DWORD *)(a1 + 116) = 1;
        *(_DWORD *)(a1 + 104) = 0;
      }
      break;
    case 0xA:
      *(_DWORD *)(a1 + 116) = 0;
      Play_Sound_Effect(12, 1);
      for ( i = 0; i < 8; ++i )
      {
        v1 = RNG_Range(-1536, 0);
        v2 = RNG_Range(-341, 341);
        NPC_Create(4, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), v2, v1, 0, 0, 256);
      }
      break;
    default:
      break;
  }
  *(_DWORD *)(a1 + 20) += 64;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 76) )
  {
    v5 = &v6 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v5;
    *(_DWORD *)(result + 4) = v5[1];
    *(_DWORD *)(result + 8) = v5[2];
    *(_DWORD *)(result + 12) = v5[3];
  }
  else
  {
    v3 = &v15 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v3;
    *(_DWORD *)(result + 4) = v3[1];
    *(_DWORD *)(result + 8) = v3[2];
    *(_DWORD *)(result + 12) = v3[3];
  }
  return result;
}

//----- (0043C8E0) --------------------------------------------------------
int __cdecl NPC110(int a1)
{
  int *v1; // ecx@54
  int v2; // edx@54
  int result; // eax@54
  int *v4; // ecx@55
  int v5; // edx@55
  signed int v6; // [sp+4h] [bp-64h]@32
  int v7; // [sp+8h] [bp-60h]@1
  int v8; // [sp+Ch] [bp-5Ch]@1
  int v9; // [sp+10h] [bp-58h]@1
  int v10; // [sp+14h] [bp-54h]@1
  int v11; // [sp+18h] [bp-50h]@1
  int v12; // [sp+1Ch] [bp-4Ch]@1
  int v13; // [sp+20h] [bp-48h]@1
  int v14; // [sp+24h] [bp-44h]@1
  int v15; // [sp+28h] [bp-40h]@1
  int v16; // [sp+2Ch] [bp-3Ch]@1
  int v17; // [sp+30h] [bp-38h]@1
  int v18; // [sp+34h] [bp-34h]@1
  int v19; // [sp+38h] [bp-30h]@1
  int v20; // [sp+3Ch] [bp-2Ch]@1
  int v21; // [sp+40h] [bp-28h]@1
  int v22; // [sp+44h] [bp-24h]@1
  int v23; // [sp+48h] [bp-20h]@1
  int v24; // [sp+4Ch] [bp-1Ch]@1
  int v25; // [sp+50h] [bp-18h]@1
  int v26; // [sp+54h] [bp-14h]@1
  int v27; // [sp+58h] [bp-10h]@1
  int v28; // [sp+5Ch] [bp-Ch]@1
  int v29; // [sp+60h] [bp-8h]@1
  int v30; // [sp+64h] [bp-4h]@1

  v19 = 96;
  v20 = 128;
  v21 = 112;
  v22 = 144;
  v23 = 112;
  v24 = 128;
  v25 = 128;
  v26 = 144;
  v27 = 128;
  v28 = 128;
  v29 = 144;
  v30 = 144;
  v7 = 96;
  v8 = 144;
  v9 = 112;
  v10 = 160;
  v11 = 112;
  v12 = 144;
  v13 = 128;
  v14 = 160;
  v15 = 128;
  v16 = 144;
  v17 = 144;
  v18 = 160;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 16) = 0;
      *(_DWORD *)(a1 + 20) = 0;
      if ( *(_DWORD *)(a1 + 76) != 4 )
      {
        *(_WORD *)(a1 + 80) &= 0xFFF7u;
        goto LABEL_8;
      }
      if ( RNG_Range(0, 1) )
        *(_DWORD *)(a1 + 76) = 0;
      else
        *(_DWORD *)(a1 + 76) = 2;
      *(_WORD *)(a1 + 80) |= 8u;
      *(_DWORD *)(a1 + 104) = 2;
      *(_DWORD *)(a1 + 116) = 3;
      break;
    case 1:
LABEL_8:
      ++*(_DWORD *)(a1 + 120);
      if ( RNG_Range(0, 50) == 1 )
      {
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 0;
        *(_DWORD *)(a1 + 100) = 0;
      }
      break;
    case 2:
      ++*(_DWORD *)(a1 + 120);
      if ( ++*(_DWORD *)(a1 + 100) > 2 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 1 )
        *(_DWORD *)(a1 + 104) = 0;
      if ( *(_DWORD *)(a1 + 120) > 18 )
      {
        *(_DWORD *)(a1 + 116) = 1;
        *(_DWORD *)(a1 + 116) = 1;
      }
      break;
    case 3:
      if ( ++*(_DWORD *)(a1 + 120) > 40 )
        *(_WORD *)(a1 + 80) &= 0xFFF7u;
      if ( *(_DWORD *)(a1 + 4) & 8 )
      {
        *(_DWORD *)(a1 + 116) = 0;
        *(_DWORD *)(a1 + 104) = 0;
        *(_DWORD *)(a1 + 120) = 0;
      }
      break;
    case 0xA:
      *(_DWORD *)(a1 + 116) = 11;
      goto LABEL_24;
    case 0xB:
LABEL_24:
      if ( *(_DWORD *)(a1 + 4) & 1 && *(_DWORD *)(a1 + 16) < 0 )
      {
        *(_DWORD *)(a1 + 16) = -*(_DWORD *)(a1 + 16);
        *(_DWORD *)(a1 + 76) = 2;
      }
      if ( *(_DWORD *)(a1 + 4) & 4 && *(_DWORD *)(a1 + 16) > 0 )
      {
        *(_DWORD *)(a1 + 16) = -*(_DWORD *)(a1 + 16);
        *(_DWORD *)(a1 + 76) = 0;
      }
      if ( *(_DWORD *)(a1 + 4) & 8 )
      {
        *(_DWORD *)(a1 + 116) = 0;
        *(_DWORD *)(a1 + 104) = 0;
        *(_DWORD *)(a1 + 120) = 0;
      }
      break;
    default:
      break;
  }
  v6 = 0;
  if ( *(_DWORD *)(a1 + 116) < 10 && *(_DWORD *)(a1 + 116) != 3 && *(_DWORD *)(a1 + 120) > 10 )
  {
    if ( *(_BYTE *)(a1 + 156) )
      v6 = 1;
    if ( *(_DWORD *)(a1 + 8) >= Quote_X_Position - 81920
      && *(_DWORD *)(a1 + 8) <= Quote_X_Position + 81920
      && *(_DWORD *)(a1 + 12) >= Quote_Y_Position - 0x8000
      && *(_DWORD *)(a1 + 12) <= Quote_Y_Position + 0x8000
      && RNG_Range(0, 50) == 2 )
    {
      v6 = 1;
    }
  }
  if ( v6 )
  {
    if ( *(_DWORD *)(a1 + 8) >= Quote_X_Position )
      *(_DWORD *)(a1 + 76) = 0;
    else
      *(_DWORD *)(a1 + 76) = 2;
    *(_DWORD *)(a1 + 116) = 10;
    *(_DWORD *)(a1 + 104) = 2;
    *(_DWORD *)(a1 + 20) = -767;
    Play_Sound_Effect(6, 1);
    if ( *(_DWORD *)(a1 + 76) )
      *(_DWORD *)(a1 + 16) = 256;
    else
      *(_DWORD *)(a1 + 16) = -256;
  }
  *(_DWORD *)(a1 + 20) += 128;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v7 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    result = v4[2];
    *(_DWORD *)(v5 + 8) = result;
    *(_DWORD *)(v5 + 12) = v4[3];
  }
  else
  {
    v1 = &v19 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    result = v1[2];
    *(_DWORD *)(v2 + 8) = result;
    *(_DWORD *)(v2 + 12) = v1[3];
  }
  return result;
}

//----- (0043CDE0) --------------------------------------------------------
int __cdecl NPC111(int a1)
{
  int *v1; // eax@17
  int v2; // ecx@17
  int result; // eax@17
  int *v4; // eax@18
  int v5; // ecx@18
  int v6; // [sp+4h] [bp-40h]@1
  int v7; // [sp+8h] [bp-3Ch]@1
  int v8; // [sp+Ch] [bp-38h]@1
  int v9; // [sp+10h] [bp-34h]@1
  int v10; // [sp+14h] [bp-30h]@1
  int v11; // [sp+18h] [bp-2Ch]@1
  int v12; // [sp+1Ch] [bp-28h]@1
  int v13; // [sp+20h] [bp-24h]@1
  int v14; // [sp+24h] [bp-20h]@1
  int v15; // [sp+28h] [bp-1Ch]@1
  int v16; // [sp+2Ch] [bp-18h]@1
  int v17; // [sp+30h] [bp-14h]@1
  int v18; // [sp+34h] [bp-10h]@1
  int v19; // [sp+38h] [bp-Ch]@1
  int v20; // [sp+3Ch] [bp-8h]@1
  int v21; // [sp+40h] [bp-4h]@1

  v14 = 0;
  v15 = 0;
  v16 = 16;
  v17 = 16;
  v18 = 16;
  v19 = 0;
  v20 = 32;
  v21 = 16;
  v6 = 0;
  v7 = 16;
  v8 = 16;
  v9 = 32;
  v10 = 16;
  v11 = 16;
  v12 = 32;
  v13 = 32;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 12) -= 0x2000;
      break;
    case 1:
      if ( ++*(_DWORD *)(a1 + 120) > 20 )
      {
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 104) = 1;
        *(_DWORD *)(a1 + 20) = -767;
      }
      break;
    case 2:
      if ( *(_DWORD *)(a1 + 20) > 0 )
        *(_DWORD *)(a1 + 136) = 0x2000;
      if ( *(_DWORD *)(a1 + 4) & 8 )
      {
        *(_DWORD *)(a1 + 116) = 3;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 0;
      }
      break;
    case 3:
      if ( ++*(_DWORD *)(a1 + 120) > 40 )
      {
        *(_DWORD *)(a1 + 116) = 4;
        *(_DWORD *)(a1 + 120) = 64;
        Play_Sound_Effect(29, 1);
      }
      break;
    case 4:
      --*(_DWORD *)(a1 + 120);
      *(_DWORD *)(a1 + 104) = 0;
      if ( !*(_DWORD *)(a1 + 120) )
        *(_BYTE *)a1 = 0;
      break;
    default:
      break;
  }
  *(_DWORD *)(a1 + 20) += 64;
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v6 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    *(_DWORD *)(v5 + 8) = v4[2];
    result = v4[3];
    *(_DWORD *)(v5 + 12) = result;
  }
  else
  {
    v1 = &v14 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    *(_DWORD *)(v2 + 8) = v1[2];
    result = v1[3];
    *(_DWORD *)(v2 + 12) = result;
  }
  if ( EquippedItems & 0x40 )
  {
    *(_DWORD *)(a1 + 88) += 32;
    result = *(_DWORD *)(a1 + 96) + 32;
    *(_DWORD *)(a1 + 96) = result;
  }
  if ( *(_DWORD *)(a1 + 116) == 4 )
  {
    *(_DWORD *)(a1 + 96) = *(_DWORD *)(a1 + 88) + *(_DWORD *)(a1 + 120) / 4;
    result = *(_DWORD *)(a1 + 120) / 2 % 2;
    if ( result )
    {
      result = a1;
      ++*(_DWORD *)(a1 + 84);
    }
  }
  return result;
}
// 49E650: using guessed type int EquippedItems;

//----- (0043D0A0) --------------------------------------------------------
int __cdecl NPC112(int a1)
{
  int *v1; // ecx@12
  int v2; // edx@12
  int *v3; // ecx@13
  int v4; // edx@13
  int result; // eax@16
  int v6; // [sp+4h] [bp-40h]@1
  int v7; // [sp+8h] [bp-3Ch]@1
  int v8; // [sp+Ch] [bp-38h]@1
  int v9; // [sp+10h] [bp-34h]@1
  int v10; // [sp+14h] [bp-30h]@1
  int v11; // [sp+18h] [bp-2Ch]@1
  int v12; // [sp+1Ch] [bp-28h]@1
  int v13; // [sp+20h] [bp-24h]@1
  int v14; // [sp+24h] [bp-20h]@1
  int v15; // [sp+28h] [bp-1Ch]@1
  int v16; // [sp+2Ch] [bp-18h]@1
  int v17; // [sp+30h] [bp-14h]@1
  int v18; // [sp+34h] [bp-10h]@1
  int v19; // [sp+38h] [bp-Ch]@1
  int v20; // [sp+3Ch] [bp-8h]@1
  int v21; // [sp+40h] [bp-4h]@1

  v14 = 0;
  v15 = 0;
  v16 = 16;
  v17 = 16;
  v18 = 16;
  v19 = 0;
  v20 = 32;
  v21 = 16;
  v6 = 0;
  v7 = 16;
  v8 = 16;
  v9 = 32;
  v10 = 16;
  v11 = 16;
  v12 = 32;
  v13 = 32;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 100) = 0;
      *(_DWORD *)(a1 + 8) += 0x2000;
      *(_DWORD *)(a1 + 12) += 4096;
      Play_Sound_Effect(29, 1);
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( ++*(_DWORD *)(a1 + 120) == 64 )
      {
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 120) = 0;
      }
      break;
    case 2:
      if ( ++*(_DWORD *)(a1 + 120) > 20 )
      {
        *(_DWORD *)(a1 + 116) = 3;
        *(_DWORD *)(a1 + 104) = 1;
        *(_DWORD *)(a1 + 136) = 4096;
      }
      break;
    case 3:
      if ( *(_DWORD *)(a1 + 4) & 8 )
      {
        *(_DWORD *)(a1 + 116) = 4;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 0;
      }
      break;
    default:
      break;
  }
  *(_DWORD *)(a1 + 20) += 64;
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 76) )
  {
    v3 = &v6 + 4 * *(_DWORD *)(a1 + 104);
    v4 = a1 + 84;
    *(_DWORD *)v4 = *v3;
    *(_DWORD *)(v4 + 4) = v3[1];
    *(_DWORD *)(v4 + 8) = v3[2];
    *(_DWORD *)(v4 + 12) = v3[3];
  }
  else
  {
    v1 = &v14 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    *(_DWORD *)(v2 + 8) = v1[2];
    *(_DWORD *)(v2 + 12) = v1[3];
  }
  if ( EquippedItems & 0x40 )
  {
    *(_DWORD *)(a1 + 88) += 32;
    *(_DWORD *)(a1 + 96) += 32;
  }
  result = a1;
  if ( *(_DWORD *)(a1 + 116) == 1 )
  {
    *(_DWORD *)(a1 + 96) = *(_DWORD *)(a1 + 88) + *(_DWORD *)(a1 + 120) / 4;
    result = *(_DWORD *)(a1 + 120) / 2 % 2;
    if ( result )
    {
      result = a1;
      ++*(_DWORD *)(a1 + 84);
    }
  }
  return result;
}
// 49E650: using guessed type int EquippedItems;

//----- (0043D320) --------------------------------------------------------
int __cdecl NPC113(int a1)
{
  int *v1; // eax@29
  int v2; // ecx@29
  int result; // eax@29
  int *v4; // eax@30
  int v5; // ecx@30
  int v6; // [sp+4h] [bp-E0h]@1
  int v7; // [sp+8h] [bp-DCh]@1
  int v8; // [sp+Ch] [bp-D8h]@1
  int v9; // [sp+10h] [bp-D4h]@1
  int v10; // [sp+14h] [bp-D0h]@1
  int v11; // [sp+18h] [bp-CCh]@1
  int v12; // [sp+1Ch] [bp-C8h]@1
  int v13; // [sp+20h] [bp-C4h]@1
  int v14; // [sp+24h] [bp-C0h]@1
  int v15; // [sp+28h] [bp-BCh]@1
  int v16; // [sp+2Ch] [bp-B8h]@1
  int v17; // [sp+30h] [bp-B4h]@1
  int v18; // [sp+34h] [bp-B0h]@1
  int v19; // [sp+38h] [bp-ACh]@1
  int v20; // [sp+3Ch] [bp-A8h]@1
  int v21; // [sp+40h] [bp-A4h]@1
  int v22; // [sp+44h] [bp-A0h]@1
  int v23; // [sp+48h] [bp-9Ch]@1
  int v24; // [sp+4Ch] [bp-98h]@1
  int v25; // [sp+50h] [bp-94h]@1
  int v26; // [sp+54h] [bp-90h]@1
  int v27; // [sp+58h] [bp-8Ch]@1
  int v28; // [sp+5Ch] [bp-88h]@1
  int v29; // [sp+60h] [bp-84h]@1
  int v30; // [sp+64h] [bp-80h]@1
  int v31; // [sp+68h] [bp-7Ch]@1
  int v32; // [sp+6Ch] [bp-78h]@1
  int v33; // [sp+70h] [bp-74h]@1
  int v34; // [sp+74h] [bp-70h]@1
  int v35; // [sp+78h] [bp-6Ch]@1
  int v36; // [sp+7Ch] [bp-68h]@1
  int v37; // [sp+80h] [bp-64h]@1
  int v38; // [sp+84h] [bp-60h]@1
  int v39; // [sp+88h] [bp-5Ch]@1
  int v40; // [sp+8Ch] [bp-58h]@1
  int v41; // [sp+90h] [bp-54h]@1
  int v42; // [sp+94h] [bp-50h]@1
  int v43; // [sp+98h] [bp-4Ch]@1
  int v44; // [sp+9Ch] [bp-48h]@1
  int v45; // [sp+A0h] [bp-44h]@1
  int v46; // [sp+A4h] [bp-40h]@1
  int v47; // [sp+A8h] [bp-3Ch]@1
  int v48; // [sp+ACh] [bp-38h]@1
  int v49; // [sp+B0h] [bp-34h]@1
  int v50; // [sp+B4h] [bp-30h]@1
  int v51; // [sp+B8h] [bp-2Ch]@1
  int v52; // [sp+BCh] [bp-28h]@1
  int v53; // [sp+C0h] [bp-24h]@1
  int v54; // [sp+C4h] [bp-20h]@1
  int v55; // [sp+C8h] [bp-1Ch]@1
  int v56; // [sp+CCh] [bp-18h]@1
  int v57; // [sp+D0h] [bp-14h]@1
  int v58; // [sp+D4h] [bp-10h]@1
  int v59; // [sp+D8h] [bp-Ch]@1
  int v60; // [sp+DCh] [bp-8h]@1
  int v61; // [sp+E0h] [bp-4h]@1

  v34 = 224;
  v35 = 0;
  v36 = 240;
  v37 = 16;
  v38 = 240;
  v39 = 0;
  v40 = 256;
  v41 = 16;
  v42 = 256;
  v43 = 0;
  v44 = 272;
  v45 = 16;
  v46 = 224;
  v47 = 0;
  v48 = 240;
  v49 = 16;
  v50 = 272;
  v51 = 0;
  v52 = 288;
  v53 = 16;
  v54 = 224;
  v55 = 0;
  v56 = 240;
  v57 = 16;
  v58 = 288;
  v59 = 0;
  v60 = 304;
  v61 = 16;
  v6 = 224;
  v7 = 16;
  v8 = 240;
  v9 = 32;
  v10 = 240;
  v11 = 16;
  v12 = 256;
  v13 = 32;
  v14 = 256;
  v15 = 16;
  v16 = 272;
  v17 = 32;
  v18 = 224;
  v19 = 16;
  v20 = 240;
  v21 = 32;
  v22 = 272;
  v23 = 16;
  v24 = 288;
  v25 = 32;
  v26 = 224;
  v27 = 16;
  v28 = 240;
  v29 = 32;
  v30 = 288;
  v31 = 16;
  v32 = 304;
  v33 = 32;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 100) = 0;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( RNG_Range(0, 120) == 10 )
      {
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 1;
      }
      break;
    case 2:
      if ( ++*(_DWORD *)(a1 + 120) > 8 )
      {
        *(_DWORD *)(a1 + 116) = 1;
        *(_DWORD *)(a1 + 104) = 0;
      }
      break;
    case 3:
      *(_DWORD *)(a1 + 116) = 4;
      *(_DWORD *)(a1 + 104) = 2;
      *(_DWORD *)(a1 + 100) = 0;
      goto LABEL_10;
    case 4:
LABEL_10:
      if ( ++*(_DWORD *)(a1 + 100) > 4 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 5 )
        *(_DWORD *)(a1 + 104) = 2;
      if ( *(_DWORD *)(a1 + 76) )
        *(_DWORD *)(a1 + 8) += 512;
      else
        *(_DWORD *)(a1 + 8) -= 512;
      break;
    case 5:
      *(_DWORD *)(a1 + 104) = 6;
      break;
    case 0x1E:
      *(_DWORD *)(a1 + 116) = 31;
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 100) = 0;
      *(_DWORD *)(a1 + 136) = 0x2000;
      *(_DWORD *)(a1 + 8) -= 0x2000;
      *(_DWORD *)(a1 + 12) += 4096;
      Play_Sound_Effect(29, 1);
      goto LABEL_20;
    case 0x1F:
LABEL_20:
      if ( ++*(_DWORD *)(a1 + 120) == 64 )
      {
        *(_DWORD *)(a1 + 116) = 32;
        *(_DWORD *)(a1 + 120) = 0;
      }
      break;
    case 0x20:
      if ( ++*(_DWORD *)(a1 + 120) > 20 )
      {
        *(_DWORD *)(a1 + 116) = 33;
        *(_DWORD *)(a1 + 104) = 1;
        *(_DWORD *)(a1 + 136) = 4096;
      }
      break;
    case 0x21:
      if ( *(_DWORD *)(a1 + 4) & 8 )
      {
        *(_DWORD *)(a1 + 116) = 34;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 0;
      }
      break;
    default:
      break;
  }
  *(_DWORD *)(a1 + 20) += 64;
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v6 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    *(_DWORD *)(v5 + 8) = v4[2];
    result = v4[3];
    *(_DWORD *)(v5 + 12) = result;
  }
  else
  {
    v1 = &v34 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    *(_DWORD *)(v2 + 8) = v1[2];
    result = v1[3];
    *(_DWORD *)(v2 + 12) = result;
  }
  if ( *(_DWORD *)(a1 + 116) == 31 )
  {
    *(_DWORD *)(a1 + 96) = *(_DWORD *)(a1 + 88) + *(_DWORD *)(a1 + 120) / 4;
    result = *(_DWORD *)(a1 + 120) / 2 % 2;
    if ( result )
    {
      result = a1;
      ++*(_DWORD *)(a1 + 84);
    }
  }
  return result;
}

//----- (0043D860) --------------------------------------------------------
int __cdecl NPC114(int a1)
{
  int v1; // ST10_4@20
  int v2; // eax@20
  int *v3; // edx@25
  int result; // eax@25
  int v5; // [sp+0h] [bp-38h]@1
  signed int i; // [sp+4h] [bp-34h]@18
  int v7; // [sp+8h] [bp-30h]@1
  int v8; // [sp+Ch] [bp-2Ch]@1
  int v9; // [sp+10h] [bp-28h]@1
  int v10; // [sp+14h] [bp-24h]@1
  int v11; // [sp+18h] [bp-20h]@1
  int v12; // [sp+1Ch] [bp-1Ch]@1
  int v13; // [sp+20h] [bp-18h]@1
  int v14; // [sp+24h] [bp-14h]@1
  int v15; // [sp+28h] [bp-10h]@1
  int v16; // [sp+2Ch] [bp-Ch]@1
  int v17; // [sp+30h] [bp-8h]@1
  int v18; // [sp+34h] [bp-4h]@1

  v7 = 144;
  v8 = 112;
  v9 = 160;
  v10 = 136;
  v11 = 160;
  v12 = 112;
  v13 = 176;
  v14 = 136;
  v15 = 176;
  v16 = 112;
  v17 = 192;
  v18 = 136;
  v5 = *(_DWORD *)(a1 + 116);
  if ( v5 )
  {
    if ( v5 != 1 )
    {
      if ( v5 == 10 )
      {
        if ( ++*(_DWORD *)(a1 + 100) > 2 )
        {
          *(_DWORD *)(a1 + 100) = 0;
          ++*(_DWORD *)(a1 + 104);
        }
        if ( *(_DWORD *)(a1 + 104) > 2 )
          *(_DWORD *)(a1 + 104) = 2;
        if ( Quote_Y_Position <= *(_DWORD *)(a1 + 12) )
        {
          *(_WORD *)(a1 + 80) |= 0x40u;
          *(_DWORD *)(a1 + 164) = 0;
        }
        else
        {
          *(_WORD *)(a1 + 80) &= 0xFFBFu;
          *(_DWORD *)(a1 + 164) = 127;
        }
        if ( *(_DWORD *)(a1 + 4) & 8 )
        {
          if ( *(_DWORD *)(a1 + 104) > 1 )
          {
            for ( i = 0; i < 4; ++i )
            {
              v1 = RNG_Range(-1536, 0);
              v2 = RNG_Range(-341, 341);
              NPC_Create(4, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), v2, v1, 0, 0, 256);
            }
            Play_Sound_Effect(26, 1);
            sub_40F310(10);
          }
          *(_DWORD *)(a1 + 116) = 1;
          *(_DWORD *)(a1 + 104) = 0;
          *(_DWORD *)(a1 + 164) = 0;
          *(_WORD *)(a1 + 80) |= 0x40u;
        }
      }
      goto LABEL_23;
    }
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 12) -= 2048;
  }
  if ( !(*(_DWORD *)(a1 + 4) & 8) )
  {
    *(_DWORD *)(a1 + 116) = 10;
    *(_DWORD *)(a1 + 100) = 0;
    *(_DWORD *)(a1 + 104) = 1;
  }
LABEL_23:
  *(_DWORD *)(a1 + 20) += 32;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  v3 = &v7 + 4 * *(_DWORD *)(a1 + 104);
  result = a1 + 84;
  *(_DWORD *)result = *v3;
  *(_DWORD *)(result + 4) = v3[1];
  *(_DWORD *)(result + 8) = v3[2];
  *(_DWORD *)(result + 12) = v3[3];
  return result;
}

//----- (0043DAE0) --------------------------------------------------------
int __cdecl NPC115(int a1)
{
  int v1; // ST10_4@39
  int v2; // ST0C_4@39
  int v3; // ST08_4@39
  int v4; // eax@39
  int *v5; // ecx@50
  int v6; // edx@50
  int result; // eax@50
  int *v8; // ecx@51
  int v9; // edx@51
  int v10; // [sp+4h] [bp-C8h]@1
  int v11; // [sp+8h] [bp-C4h]@1
  int v12; // [sp+Ch] [bp-C0h]@1
  int v13; // [sp+10h] [bp-BCh]@1
  int v14; // [sp+14h] [bp-B8h]@1
  int v15; // [sp+18h] [bp-B4h]@1
  int v16; // [sp+1Ch] [bp-B0h]@1
  int v17; // [sp+20h] [bp-ACh]@1
  int v18; // [sp+24h] [bp-A8h]@1
  int v19; // [sp+28h] [bp-A4h]@1
  int v20; // [sp+2Ch] [bp-A0h]@1
  int v21; // [sp+30h] [bp-9Ch]@1
  int v22; // [sp+34h] [bp-98h]@1
  int v23; // [sp+38h] [bp-94h]@1
  int v24; // [sp+3Ch] [bp-90h]@1
  int v25; // [sp+40h] [bp-8Ch]@1
  int v26; // [sp+44h] [bp-88h]@1
  int v27; // [sp+48h] [bp-84h]@1
  int v28; // [sp+4Ch] [bp-80h]@1
  int v29; // [sp+50h] [bp-7Ch]@1
  int v30; // [sp+54h] [bp-78h]@1
  int v31; // [sp+58h] [bp-74h]@1
  int v32; // [sp+5Ch] [bp-70h]@1
  int v33; // [sp+60h] [bp-6Ch]@1
  int i; // [sp+68h] [bp-64h]@37
  int v35; // [sp+6Ch] [bp-60h]@1
  int v36; // [sp+70h] [bp-5Ch]@1
  int v37; // [sp+74h] [bp-58h]@1
  int v38; // [sp+78h] [bp-54h]@1
  int v39; // [sp+7Ch] [bp-50h]@1
  int v40; // [sp+80h] [bp-4Ch]@1
  int v41; // [sp+84h] [bp-48h]@1
  int v42; // [sp+88h] [bp-44h]@1
  int v43; // [sp+8Ch] [bp-40h]@1
  int v44; // [sp+90h] [bp-3Ch]@1
  int v45; // [sp+94h] [bp-38h]@1
  int v46; // [sp+98h] [bp-34h]@1
  int v47; // [sp+9Ch] [bp-30h]@1
  int v48; // [sp+A0h] [bp-2Ch]@1
  int v49; // [sp+A4h] [bp-28h]@1
  int v50; // [sp+A8h] [bp-24h]@1
  int v51; // [sp+ACh] [bp-20h]@1
  int v52; // [sp+B0h] [bp-1Ch]@1
  int v53; // [sp+B4h] [bp-18h]@1
  int v54; // [sp+B8h] [bp-14h]@1
  int v55; // [sp+BCh] [bp-10h]@1
  int v56; // [sp+C0h] [bp-Ch]@1
  int v57; // [sp+C4h] [bp-8h]@1
  int v58; // [sp+C8h] [bp-4h]@1

  v35 = 0;
  v36 = 120;
  v37 = 24;
  v38 = 144;
  v39 = 24;
  v40 = 120;
  v41 = 48;
  v42 = 144;
  v43 = 48;
  v44 = 120;
  v45 = 72;
  v46 = 144;
  v47 = 72;
  v48 = 120;
  v49 = 96;
  v50 = 144;
  v51 = 96;
  v52 = 120;
  v53 = 120;
  v54 = 144;
  v55 = 120;
  v56 = 120;
  v57 = 144;
  v58 = 144;
  v10 = 0;
  v11 = 144;
  v12 = 24;
  v13 = 168;
  v14 = 24;
  v15 = 144;
  v16 = 48;
  v17 = 168;
  v18 = 48;
  v19 = 144;
  v20 = 72;
  v21 = 168;
  v22 = 72;
  v23 = 144;
  v24 = 96;
  v25 = 168;
  v26 = 96;
  v27 = 144;
  v28 = 120;
  v29 = 168;
  v30 = 120;
  v31 = 144;
  v32 = 144;
  v33 = 168;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 16) = 0;
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 108) = 0;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( Quote_X_Position < *(_DWORD *)(a1 + 8) + 49152
        && Quote_X_Position > *(_DWORD *)(a1 + 8) - 49152
        && Quote_Y_Position < *(_DWORD *)(a1 + 12) + 0x4000
        && Quote_Y_Position > *(_DWORD *)(a1 + 12) - 49152 )
      {
        *(_DWORD *)(a1 + 116) = 10;
      }
      if ( *(_BYTE *)(a1 + 156) )
        *(_DWORD *)(a1 + 116) = 10;
      break;
    case 0xA:
      if ( Quote_X_Position >= *(_DWORD *)(a1 + 8) )
        *(_DWORD *)(a1 + 76) = 2;
      else
        *(_DWORD *)(a1 + 76) = 0;
      *(_DWORD *)(a1 + 104) = 1;
      if ( ++*(_DWORD *)(a1 + 120) > 20 )
      {
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 116) = 20;
      }
      break;
    case 0x14:
      *(_DWORD *)(a1 + 164) = 0;
      *(_DWORD *)(a1 + 16) = 0;
      if ( ++*(_DWORD *)(a1 + 100) > 2 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 2 )
      {
        if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
          *(_DWORD *)(a1 + 76) = 2;
        else
          *(_DWORD *)(a1 + 76) = 0;
        if ( *(_DWORD *)(a1 + 76) )
          *(_DWORD *)(a1 + 16) = 512;
        else
          *(_DWORD *)(a1 + 16) = -512;
        if ( ++*(_DWORD *)(a1 + 108) <= 2 )
        {
          *(_DWORD *)(a1 + 116) = 21;
          *(_DWORD *)(a1 + 20) = -1024;
          Play_Sound_Effect(30, 1);
        }
        else
        {
          *(_DWORD *)(a1 + 108) = 0;
          *(_DWORD *)(a1 + 104) = 4;
          *(_DWORD *)(a1 + 116) = 21;
          *(_DWORD *)(a1 + 20) = -1024;
          *(_DWORD *)(a1 + 16) *= 2;
          *(_DWORD *)(a1 + 164) = 5;
          Play_Sound_Effect(102, 1);
        }
      }
      break;
    case 0x15:
      if ( *(_DWORD *)(a1 + 4) & 8 )
      {
        Play_Sound_Effect(23, 1);
        *(_DWORD *)(a1 + 116) = 20;
        *(_DWORD *)(a1 + 104) = 1;
        *(_DWORD *)(a1 + 100) = 0;
        *(_DWORD *)(a1 + 164) = 0;
        if ( Quote_X_Position > *(_DWORD *)(a1 + 8) + 73728
          || Quote_X_Position < *(_DWORD *)(a1 + 8) - 73728
          || Quote_Y_Position > *(_DWORD *)(a1 + 12) + 24576
          || Quote_Y_Position < *(_DWORD *)(a1 + 12) - 73728 )
        {
          *(_DWORD *)(a1 + 116) = 0;
        }
      }
      break;
    case 0x1E:
      for ( i = 0; i < 8; ++i )
      {
        v1 = RNG_Range(-1536, 0);
        v2 = RNG_Range(-341, 341);
        v3 = *(_DWORD *)(a1 + 12) + (RNG_Range(-12, 12) << 9);
        v4 = RNG_Range(-12, 12);
        NPC_Create(4, *(_DWORD *)(a1 + 8) + (v4 << 9), v3, v2, v1, 0, 0, 256);
      }
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 116) = 0;
      break;
    case 0x32:
      *(_DWORD *)(a1 + 116) = 51;
      *(_DWORD *)(a1 + 104) = 4;
      *(_DWORD *)(a1 + 164) = 0;
      *(_DWORD *)(a1 + 20) = -512;
      *(_WORD *)(a1 + 80) &= 0xFFDEu;
      Play_Sound_Effect(51, 1);
      goto LABEL_42;
    case 0x33:
LABEL_42:
      if ( *(_DWORD *)(a1 + 4) & 8 )
      {
        Play_Sound_Effect(23, 1);
        *(_DWORD *)(a1 + 116) = 52;
        *(_DWORD *)(a1 + 104) = 5;
        *(_DWORD *)(a1 + 16) = 0;
      }
      break;
    default:
      break;
  }
  if ( *(_DWORD *)(a1 + 116) <= 50 )
    *(_DWORD *)(a1 + 20) += 64;
  else
    *(_DWORD *)(a1 + 20) += 32;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 76) )
  {
    v8 = &v10 + 4 * *(_DWORD *)(a1 + 104);
    v9 = a1 + 84;
    *(_DWORD *)v9 = *v8;
    *(_DWORD *)(v9 + 4) = v8[1];
    result = v8[2];
    *(_DWORD *)(v9 + 8) = result;
    *(_DWORD *)(v9 + 12) = v8[3];
  }
  else
  {
    v5 = &v35 + 4 * *(_DWORD *)(a1 + 104);
    v6 = a1 + 84;
    *(_DWORD *)v6 = *v5;
    *(_DWORD *)(v6 + 4) = v5[1];
    result = v5[2];
    *(_DWORD *)(v6 + 8) = result;
    *(_DWORD *)(v6 + 12) = v5[3];
  }
  return result;
}

//----- (0043E190) --------------------------------------------------------
int __cdecl NPC116(int a1)
{
  int result; // eax@1

  result = a1 + 84;
  *(_DWORD *)result = 272;
  *(_DWORD *)(result + 4) = 184;
  *(_DWORD *)(result + 8) = 320;
  *(_DWORD *)(result + 12) = 200;
  return result;
}

//----- (0043E1E0) --------------------------------------------------------
int __cdecl NPC117(int a1)
{
  int v1; // ecx@39
  int *v2; // eax@55
  int v3; // ecx@55
  int result; // eax@55
  int *v5; // eax@56
  int v6; // ecx@56
  int v7; // [sp+4h] [bp-140h]@1
  int v8; // [sp+8h] [bp-13Ch]@1
  int v9; // [sp+Ch] [bp-138h]@1
  int v10; // [sp+10h] [bp-134h]@1
  int v11; // [sp+14h] [bp-130h]@1
  int v12; // [sp+18h] [bp-12Ch]@1
  int v13; // [sp+1Ch] [bp-128h]@1
  int v14; // [sp+20h] [bp-124h]@1
  int v15; // [sp+24h] [bp-120h]@1
  int v16; // [sp+28h] [bp-11Ch]@1
  int v17; // [sp+2Ch] [bp-118h]@1
  int v18; // [sp+30h] [bp-114h]@1
  int v19; // [sp+34h] [bp-110h]@1
  int v20; // [sp+38h] [bp-10Ch]@1
  int v21; // [sp+3Ch] [bp-108h]@1
  int v22; // [sp+40h] [bp-104h]@1
  int v23; // [sp+44h] [bp-100h]@1
  int v24; // [sp+48h] [bp-FCh]@1
  int v25; // [sp+4Ch] [bp-F8h]@1
  int v26; // [sp+50h] [bp-F4h]@1
  int v27; // [sp+54h] [bp-F0h]@1
  int v28; // [sp+58h] [bp-ECh]@1
  int v29; // [sp+5Ch] [bp-E8h]@1
  int v30; // [sp+60h] [bp-E4h]@1
  int v31; // [sp+64h] [bp-E0h]@1
  int v32; // [sp+68h] [bp-DCh]@1
  int v33; // [sp+6Ch] [bp-D8h]@1
  int v34; // [sp+70h] [bp-D4h]@1
  int v35; // [sp+74h] [bp-D0h]@1
  int v36; // [sp+78h] [bp-CCh]@1
  int v37; // [sp+7Ch] [bp-C8h]@1
  int v38; // [sp+80h] [bp-C4h]@1
  int v39; // [sp+84h] [bp-C0h]@1
  int v40; // [sp+88h] [bp-BCh]@1
  int v41; // [sp+8Ch] [bp-B8h]@1
  int v42; // [sp+90h] [bp-B4h]@1
  int v43; // [sp+94h] [bp-B0h]@1
  int v44; // [sp+98h] [bp-ACh]@1
  int v45; // [sp+9Ch] [bp-A8h]@1
  int v46; // [sp+A0h] [bp-A4h]@1
  int v47; // [sp+A4h] [bp-A0h]@1
  int v48; // [sp+A8h] [bp-9Ch]@1
  int v49; // [sp+ACh] [bp-98h]@1
  int v50; // [sp+B0h] [bp-94h]@1
  int v51; // [sp+B4h] [bp-90h]@1
  int v52; // [sp+B8h] [bp-8Ch]@1
  int v53; // [sp+BCh] [bp-88h]@1
  int v54; // [sp+C0h] [bp-84h]@1
  int v55; // [sp+C4h] [bp-80h]@1
  int v56; // [sp+C8h] [bp-7Ch]@1
  int v57; // [sp+CCh] [bp-78h]@1
  int v58; // [sp+D0h] [bp-74h]@1
  int v59; // [sp+D4h] [bp-70h]@1
  int v60; // [sp+D8h] [bp-6Ch]@1
  int v61; // [sp+DCh] [bp-68h]@1
  int v62; // [sp+E0h] [bp-64h]@1
  int v63; // [sp+E4h] [bp-60h]@1
  int v64; // [sp+E8h] [bp-5Ch]@1
  int v65; // [sp+ECh] [bp-58h]@1
  int v66; // [sp+F0h] [bp-54h]@1
  int v67; // [sp+F4h] [bp-50h]@1
  int v68; // [sp+F8h] [bp-4Ch]@1
  int v69; // [sp+FCh] [bp-48h]@1
  int v70; // [sp+100h] [bp-44h]@1
  int v71; // [sp+104h] [bp-40h]@1
  int v72; // [sp+108h] [bp-3Ch]@1
  int v73; // [sp+10Ch] [bp-38h]@1
  int v74; // [sp+110h] [bp-34h]@1
  int v75; // [sp+114h] [bp-30h]@1
  int v76; // [sp+118h] [bp-2Ch]@1
  int v77; // [sp+11Ch] [bp-28h]@1
  int v78; // [sp+120h] [bp-24h]@1
  int v79; // [sp+124h] [bp-20h]@1
  int v80; // [sp+128h] [bp-1Ch]@1
  int v81; // [sp+12Ch] [bp-18h]@1
  int v82; // [sp+130h] [bp-14h]@1
  int v83; // [sp+134h] [bp-10h]@1
  int v84; // [sp+138h] [bp-Ch]@1
  int v85; // [sp+13Ch] [bp-8h]@1
  int v86; // [sp+140h] [bp-4h]@1

  v47 = 0;
  v48 = 96;
  v49 = 16;
  v50 = 112;
  v51 = 16;
  v52 = 96;
  v53 = 32;
  v54 = 112;
  v55 = 0;
  v56 = 96;
  v57 = 16;
  v58 = 112;
  v59 = 32;
  v60 = 96;
  v61 = 48;
  v62 = 112;
  v63 = 0;
  v64 = 96;
  v65 = 16;
  v66 = 112;
  v67 = 176;
  v68 = 96;
  v69 = 192;
  v70 = 112;
  v71 = 112;
  v72 = 96;
  v73 = 128;
  v74 = 112;
  v75 = 160;
  v76 = 96;
  v77 = 176;
  v78 = 112;
  v79 = 144;
  v80 = 96;
  v81 = 160;
  v82 = 112;
  v83 = 48;
  v84 = 96;
  v85 = 64;
  v86 = 112;
  v7 = 0;
  v8 = 112;
  v9 = 16;
  v10 = 128;
  v11 = 16;
  v12 = 112;
  v13 = 32;
  v14 = 128;
  v15 = 0;
  v16 = 112;
  v17 = 16;
  v18 = 128;
  v19 = 32;
  v20 = 112;
  v21 = 48;
  v22 = 128;
  v23 = 0;
  v24 = 112;
  v25 = 16;
  v26 = 128;
  v27 = 176;
  v28 = 112;
  v29 = 192;
  v30 = 128;
  v31 = 112;
  v32 = 112;
  v33 = 128;
  v34 = 128;
  v35 = 160;
  v36 = 112;
  v37 = 176;
  v38 = 128;
  v39 = 144;
  v40 = 112;
  v41 = 160;
  v42 = 128;
  v43 = 48;
  v44 = 112;
  v45 = 64;
  v46 = 128;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      if ( *(_DWORD *)(a1 + 76) == 4 )
      {
        if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
          *(_DWORD *)(a1 + 76) = 2;
        else
          *(_DWORD *)(a1 + 76) = 0;
      }
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 100) = 0;
      goto LABEL_7;
    case 1:
LABEL_7:
      *(_DWORD *)(a1 + 16) = 0;
      *(_DWORD *)(a1 + 20) += 64;
      break;
    case 3:
      *(_DWORD *)(a1 + 116) = 4;
      *(_DWORD *)(a1 + 104) = 1;
      *(_DWORD *)(a1 + 100) = 0;
      goto LABEL_9;
    case 4:
LABEL_9:
      if ( ++*(_DWORD *)(a1 + 100) > 4 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 4 )
        *(_DWORD *)(a1 + 104) = 1;
      *(_DWORD *)(a1 + 20) += 64;
      if ( *(_DWORD *)(a1 + 76) )
        *(_DWORD *)(a1 + 16) = 512;
      else
        *(_DWORD *)(a1 + 16) = -512;
      break;
    case 5:
      *(_DWORD *)(a1 + 116) = 6;
      *(_DWORD *)(a1 + 104) = 5;
      sub_46F150(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), *(_DWORD *)(a1 + 148), 8);
      break;
    case 6:
      *(_DWORD *)(a1 + 104) = 5;
      break;
    case 0xA:
      *(_DWORD *)(a1 + 116) = 11;
      *(_DWORD *)(a1 + 104) = 1;
      *(_DWORD *)(a1 + 100) = 0;
      if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
        *(_DWORD *)(a1 + 76) = 2;
      else
        *(_DWORD *)(a1 + 76) = 0;
      goto LABEL_22;
    case 0xB:
LABEL_22:
      if ( ++*(_DWORD *)(a1 + 100) > 4 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 4 )
        *(_DWORD *)(a1 + 104) = 1;
      if ( *(_DWORD *)(a1 + 76) )
        *(_DWORD *)(a1 + 8) += 512;
      else
        *(_DWORD *)(a1 + 8) -= 512;
      if ( Quote_X_Position < *(_DWORD *)(a1 + 8) + 10240 && Quote_X_Position > *(_DWORD *)(a1 + 8) - 10240 )
        *(_DWORD *)(a1 + 116) = 0;
      break;
    case 0x14:
      *(_DWORD *)(a1 + 16) = 0;
      *(_DWORD *)(a1 + 104) = 6;
      break;
    case 0x15:
      *(_DWORD *)(a1 + 16) = 0;
      *(_DWORD *)(a1 + 104) = 9;
      break;
    case 0x1E:
      *(_DWORD *)(a1 + 116) = 31;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 20) = -1024;
      goto LABEL_36;
    case 0x1F:
LABEL_36:
      *(_DWORD *)(a1 + 104) = 7;
      if ( *(_DWORD *)(a1 + 76) )
        *(_DWORD *)(a1 + 16) = -512;
      else
        *(_DWORD *)(a1 + 16) = 512;
      *(_DWORD *)(a1 + 20) += 64;
      v1 = (*(_DWORD *)(a1 + 120))++;
      if ( v1 && *(_DWORD *)(a1 + 4) & 8 )
        *(_DWORD *)(a1 + 116) = 32;
      break;
    case 0x20:
      *(_DWORD *)(a1 + 20) += 64;
      *(_DWORD *)(a1 + 104) = 8;
      *(_DWORD *)(a1 + 16) = 0;
      break;
    case 0x46:
      *(_DWORD *)(a1 + 116) = 71;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 104) = 1;
      *(_DWORD *)(a1 + 100) = 0;
      goto LABEL_45;
    case 0x47:
LABEL_45:
      if ( *(_DWORD *)(a1 + 76) )
        *(_DWORD *)(a1 + 8) -= 256;
      else
        *(_DWORD *)(a1 + 8) += 256;
      if ( ++*(_DWORD *)(a1 + 100) > 8 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 4 )
        *(_DWORD *)(a1 + 104) = 1;
      break;
    default:
      break;
  }
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 76) )
  {
    v5 = &v7 + 4 * *(_DWORD *)(a1 + 104);
    v6 = a1 + 84;
    *(_DWORD *)v6 = *v5;
    *(_DWORD *)(v6 + 4) = v5[1];
    *(_DWORD *)(v6 + 8) = v5[2];
    result = v5[3];
    *(_DWORD *)(v6 + 12) = result;
  }
  else
  {
    v2 = &v47 + 4 * *(_DWORD *)(a1 + 104);
    v3 = a1 + 84;
    *(_DWORD *)v3 = *v2;
    *(_DWORD *)(v3 + 4) = v2[1];
    *(_DWORD *)(v3 + 8) = v2[2];
    result = v2[3];
    *(_DWORD *)(v3 + 12) = result;
  }
  return result;
}

//----- (0043E9B0) --------------------------------------------------------
int __cdecl NPC118(int a1)
{
  int *v1; // ecx@66
  int v2; // edx@66
  int result; // eax@66
  int *v4; // ecx@67
  int v5; // edx@67
  signed int v6; // [sp+4h] [bp-124h]@1
  int v7; // [sp+8h] [bp-120h]@1
  int v8; // [sp+Ch] [bp-11Ch]@1
  int v9; // [sp+10h] [bp-118h]@1
  int v10; // [sp+14h] [bp-114h]@1
  int v11; // [sp+18h] [bp-110h]@1
  int v12; // [sp+1Ch] [bp-10Ch]@1
  int v13; // [sp+20h] [bp-108h]@1
  int v14; // [sp+24h] [bp-104h]@1
  int v15; // [sp+28h] [bp-100h]@1
  int v16; // [sp+2Ch] [bp-FCh]@1
  int v17; // [sp+30h] [bp-F8h]@1
  int v18; // [sp+34h] [bp-F4h]@1
  int v19; // [sp+38h] [bp-F0h]@1
  int v20; // [sp+3Ch] [bp-ECh]@1
  int v21; // [sp+40h] [bp-E8h]@1
  int v22; // [sp+44h] [bp-E4h]@1
  int v23; // [sp+48h] [bp-E0h]@1
  int v24; // [sp+4Ch] [bp-DCh]@1
  int v25; // [sp+50h] [bp-D8h]@1
  int v26; // [sp+54h] [bp-D4h]@1
  int v27; // [sp+58h] [bp-D0h]@1
  int v28; // [sp+5Ch] [bp-CCh]@1
  int v29; // [sp+60h] [bp-C8h]@1
  int v30; // [sp+64h] [bp-C4h]@1
  int v31; // [sp+68h] [bp-C0h]@1
  int v32; // [sp+6Ch] [bp-BCh]@1
  int v33; // [sp+70h] [bp-B8h]@1
  int v34; // [sp+74h] [bp-B4h]@1
  int v35; // [sp+78h] [bp-B0h]@1
  int v36; // [sp+7Ch] [bp-ACh]@1
  int v37; // [sp+80h] [bp-A8h]@1
  int v38; // [sp+84h] [bp-A4h]@1
  int v39; // [sp+88h] [bp-A0h]@1
  int v40; // [sp+8Ch] [bp-9Ch]@1
  int v41; // [sp+90h] [bp-98h]@1
  int v42; // [sp+94h] [bp-94h]@1
  int v43; // [sp+98h] [bp-90h]@1
  int v44; // [sp+9Ch] [bp-8Ch]@1
  int v45; // [sp+A0h] [bp-88h]@1
  int v46; // [sp+A4h] [bp-84h]@1
  int v47; // [sp+A8h] [bp-80h]@1
  int v48; // [sp+ACh] [bp-7Ch]@1
  int v49; // [sp+B0h] [bp-78h]@1
  int v50; // [sp+B4h] [bp-74h]@1
  int v51; // [sp+B8h] [bp-70h]@1
  int v52; // [sp+BCh] [bp-6Ch]@1
  int v53; // [sp+C0h] [bp-68h]@1
  int v54; // [sp+C4h] [bp-64h]@1
  int v55; // [sp+C8h] [bp-60h]@1
  int v56; // [sp+CCh] [bp-5Ch]@1
  int v57; // [sp+D0h] [bp-58h]@1
  int v58; // [sp+D4h] [bp-54h]@1
  int v59; // [sp+D8h] [bp-50h]@1
  int v60; // [sp+DCh] [bp-4Ch]@1
  int v61; // [sp+E0h] [bp-48h]@1
  int v62; // [sp+E4h] [bp-44h]@1
  int v63; // [sp+E8h] [bp-40h]@1
  int v64; // [sp+ECh] [bp-3Ch]@1
  int v65; // [sp+F0h] [bp-38h]@1
  int v66; // [sp+F4h] [bp-34h]@1
  int v67; // [sp+F8h] [bp-30h]@1
  int v68; // [sp+FCh] [bp-2Ch]@1
  int v69; // [sp+100h] [bp-28h]@1
  int v70; // [sp+104h] [bp-24h]@1
  int v71; // [sp+108h] [bp-20h]@1
  int v72; // [sp+10Ch] [bp-1Ch]@1
  int v73; // [sp+110h] [bp-18h]@1
  int v74; // [sp+114h] [bp-14h]@1
  int v75; // [sp+118h] [bp-10h]@1
  int v76; // [sp+11Ch] [bp-Ch]@1
  int v77; // [sp+120h] [bp-8h]@1
  int v78; // [sp+124h] [bp-4h]@1

  v43 = 0;
  v44 = 32;
  v45 = 32;
  v46 = 56;
  v47 = 32;
  v48 = 32;
  v49 = 64;
  v50 = 56;
  v51 = 64;
  v52 = 32;
  v53 = 96;
  v54 = 56;
  v55 = 96;
  v56 = 32;
  v57 = 128;
  v58 = 56;
  v59 = 0;
  v60 = 32;
  v61 = 32;
  v62 = 56;
  v63 = 128;
  v64 = 32;
  v65 = 160;
  v66 = 56;
  v67 = 0;
  v68 = 32;
  v69 = 32;
  v70 = 56;
  v71 = 0;
  v72 = 32;
  v73 = 32;
  v74 = 56;
  v75 = 160;
  v76 = 32;
  v77 = 192;
  v78 = 56;
  v7 = 0;
  v8 = 56;
  v9 = 32;
  v10 = 80;
  v11 = 32;
  v12 = 56;
  v13 = 64;
  v14 = 80;
  v15 = 64;
  v16 = 56;
  v17 = 96;
  v18 = 80;
  v19 = 96;
  v20 = 56;
  v21 = 128;
  v22 = 80;
  v23 = 0;
  v24 = 56;
  v25 = 32;
  v26 = 80;
  v27 = 128;
  v28 = 56;
  v29 = 160;
  v30 = 80;
  v31 = 0;
  v32 = 56;
  v33 = 32;
  v34 = 80;
  v35 = 0;
  v36 = 56;
  v37 = 32;
  v38 = 80;
  v39 = 160;
  v40 = 56;
  v41 = 192;
  v42 = 80;
  v6 = 0;
  if ( !*(_DWORD *)(a1 + 76) && *(_DWORD *)(a1 + 8) < Quote_X_Position )
    v6 = 1;
  if ( *(_DWORD *)(a1 + 76) == 2 && *(_DWORD *)(a1 + 8) > Quote_X_Position )
    v6 = 1;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 100) = 0;
      break;
    case 0xA:
      *(_DWORD *)(a1 + 116) = 11;
      *(_DWORD *)(a1 + 120) = RNG_Range(50, 100);
      *(_DWORD *)(a1 + 104) = 0;
      if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
        *(_DWORD *)(a1 + 76) = 2;
      else
        *(_DWORD *)(a1 + 76) = 0;
      *(_WORD *)(a1 + 80) |= 0x20u;
      *(_WORD *)(a1 + 80) &= 0xFFFBu;
      goto LABEL_13;
    case 0xB:
LABEL_13:
      if ( *(_DWORD *)(a1 + 120) )
        --*(_DWORD *)(a1 + 120);
      else
        *(_DWORD *)(a1 + 116) = 13;
      break;
    case 0xD:
      *(_DWORD *)(a1 + 116) = 14;
      *(_DWORD *)(a1 + 104) = 3;
      *(_DWORD *)(a1 + 120) = RNG_Range(50, 100);
      if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
        *(_DWORD *)(a1 + 76) = 2;
      else
        *(_DWORD *)(a1 + 76) = 0;
      goto LABEL_20;
    case 0xE:
LABEL_20:
      if ( ++*(_DWORD *)(a1 + 100) > 2 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 6 )
        *(_DWORD *)(a1 + 104) = 3;
      if ( *(_DWORD *)(a1 + 76) )
        *(_DWORD *)(a1 + 16) += 64;
      else
        *(_DWORD *)(a1 + 16) -= 64;
      if ( *(_DWORD *)(a1 + 120) )
      {
        --*(_DWORD *)(a1 + 120);
      }
      else
      {
        *(_WORD *)(a1 + 80) |= 0x20u;
        *(_DWORD *)(a1 + 116) = 20;
        *(_DWORD *)(a1 + 120) = 0;
        Play_Sound_Effect(103, 1);
      }
      break;
    case 0x14:
      if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
        *(_DWORD *)(a1 + 76) = 2;
      else
        *(_DWORD *)(a1 + 76) = 0;
      *(_DWORD *)(a1 + 16) = 8 * *(_DWORD *)(a1 + 16) / 9;
      if ( ++*(_DWORD *)(a1 + 104) > 1 )
        *(_DWORD *)(a1 + 104) = 0;
      if ( ++*(_DWORD *)(a1 + 120) > 50 )
      {
        *(_DWORD *)(a1 + 116) = 21;
        *(_DWORD *)(a1 + 120) = 0;
      }
      break;
    case 0x15:
      if ( ++*(_DWORD *)(a1 + 120) % 4 == 1 )
      {
        if ( *(_DWORD *)(a1 + 76) )
        {
          if ( v6 )
          {
            *(_DWORD *)(a1 + 104) = 2;
            NPC_Create(123, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12) - 4096, 0, 0, 1, 0, 256);
          }
          else
          {
            *(_DWORD *)(a1 + 104) = 0;
            NPC_Create(123, *(_DWORD *)(a1 + 8) + 4096, *(_DWORD *)(a1 + 12) + 2048, 0, 0, 2, 0, 256);
            *(_DWORD *)(a1 + 8) -= 512;
          }
        }
        else if ( v6 )
        {
          *(_DWORD *)(a1 + 104) = 2;
          NPC_Create(123, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12) - 4096, 0, 0, 1, 0, 256);
        }
        else
        {
          *(_DWORD *)(a1 + 104) = 0;
          NPC_Create(123, *(_DWORD *)(a1 + 8) - 4096, *(_DWORD *)(a1 + 12) + 2048, 0, 0, 0, 0, 256);
          *(_DWORD *)(a1 + 8) += 512;
        }
      }
      if ( *(_DWORD *)(a1 + 120) > 30 )
        *(_DWORD *)(a1 + 116) = 10;
      break;
    case 0x1E:
      if ( ++*(_DWORD *)(a1 + 104) > 8 )
        *(_DWORD *)(a1 + 104) = 7;
      if ( ++*(_DWORD *)(a1 + 120) > 30 )
      {
        *(_DWORD *)(a1 + 116) = 10;
        *(_DWORD *)(a1 + 104) = 0;
      }
      break;
    default:
      break;
  }
  if ( *(_DWORD *)(a1 + 116) > 10 && *(_DWORD *)(a1 + 116) < 30 && Count_Weapon_Shot_Occurences(6) )
  {
    *(_DWORD *)(a1 + 120) = 0;
    *(_DWORD *)(a1 + 116) = 30;
    *(_DWORD *)(a1 + 104) = 7;
    *(_WORD *)(a1 + 80) &= 0xFFDFu;
    *(_WORD *)(a1 + 80) |= 4u;
    *(_DWORD *)(a1 + 16) = 0;
  }
  *(_DWORD *)(a1 + 20) += 32;
  if ( *(_DWORD *)(a1 + 16) > 511 )
    *(_DWORD *)(a1 + 16) = 511;
  if ( *(_DWORD *)(a1 + 16) < -511 )
    *(_DWORD *)(a1 + 16) = -511;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v7 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    result = v4[2];
    *(_DWORD *)(v5 + 8) = result;
    *(_DWORD *)(v5 + 12) = v4[3];
  }
  else
  {
    v1 = &v43 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    result = v1[2];
    *(_DWORD *)(v2 + 8) = result;
    *(_DWORD *)(v2 + 12) = v1[3];
  }
  return result;
}

//----- (0043F230) --------------------------------------------------------
int __cdecl NPC119(int a1)
{
  int result; // eax@1

  result = a1 + 84;
  *(_DWORD *)result = 248;
  *(_DWORD *)(result + 4) = 184;
  *(_DWORD *)(result + 8) = 272;
  *(_DWORD *)(result + 12) = 200;
  return result;
}

//----- (0043F280) --------------------------------------------------------
signed int __cdecl NPC120(int a1)
{
  int v1; // ecx@2
  signed int result; // eax@2
  int v3; // ecx@3

  if ( *(_DWORD *)(a1 + 76) )
  {
    v3 = a1 + 84;
    *(_DWORD *)v3 = 64;
    *(_DWORD *)(v3 + 4) = 16;
    *(_DWORD *)(v3 + 8) = 80;
    result = 32;
    *(_DWORD *)(v3 + 12) = 32;
  }
  else
  {
    v1 = a1 + 84;
    *(_DWORD *)v1 = 64;
    *(_DWORD *)(v1 + 4) = 0;
    *(_DWORD *)(v1 + 8) = 80;
    result = 16;
    *(_DWORD *)(v1 + 12) = 16;
  }
  return result;
}

//----- (0043F310) --------------------------------------------------------
int __cdecl NPC121(int a1)
{
  int *v1; // edx@12
  int result; // eax@12
  int v3; // eax@13
  int v4; // [sp+0h] [bp-34h]@2
  int v5; // [sp+4h] [bp-30h]@1
  int v6; // [sp+8h] [bp-2Ch]@1
  int v7; // [sp+Ch] [bp-28h]@1
  int v8; // [sp+10h] [bp-24h]@1
  int v9; // [sp+14h] [bp-20h]@1
  int v10; // [sp+18h] [bp-1Ch]@1
  int v11; // [sp+1Ch] [bp-18h]@1
  int v12; // [sp+20h] [bp-14h]@1
  int v13; // [sp+24h] [bp-10h]@1
  int v14; // [sp+28h] [bp-Ch]@1
  int v15; // [sp+2Ch] [bp-8h]@1
  int v16; // [sp+30h] [bp-4h]@1

  v5 = 0;
  v6 = 0;
  v7 = 16;
  v8 = 16;
  v9 = 16;
  v10 = 0;
  v11 = 32;
  v12 = 16;
  v13 = 112;
  v14 = 0;
  v15 = 128;
  v16 = 16;
  if ( !*(_DWORD *)(a1 + 76) )
  {
    v4 = *(_DWORD *)(a1 + 116);
    if ( v4 )
    {
      if ( v4 != 1 )
      {
        if ( v4 == 2 && ++*(_DWORD *)(a1 + 120) > 8 )
        {
          *(_DWORD *)(a1 + 116) = 1;
          *(_DWORD *)(a1 + 104) = 0;
        }
LABEL_12:
        v1 = &v5 + 4 * *(_DWORD *)(a1 + 104);
        result = a1 + 84;
        *(_DWORD *)result = *v1;
        *(_DWORD *)(result + 4) = v1[1];
        *(_DWORD *)(result + 8) = v1[2];
        *(_DWORD *)(result + 12) = v1[3];
        return result;
      }
    }
    else
    {
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 100) = 0;
    }
    if ( RNG_Range(0, 120) == 10 )
    {
      *(_DWORD *)(a1 + 116) = 2;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 104) = 1;
    }
    goto LABEL_12;
  }
  v3 = a1 + 84;
  *(_DWORD *)v3 = v13;
  *(_DWORD *)(v3 + 4) = v14;
  *(_DWORD *)(v3 + 8) = v15;
  *(_DWORD *)(v3 + 12) = v16;
  ++*(_DWORD *)(a1 + 120);
  result = a1;
  if ( *(_DWORD *)(a1 + 120) > 100 )
  {
    *(_DWORD *)(a1 + 120) = 0;
    result = Create_Animated_Effect(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 5, 0);
  }
  return result;
}

//----- (0043F4A0) --------------------------------------------------------
int __cdecl NPC122(int a1)
{
  int *v1; // edx@58
  int result; // eax@58
  int *v3; // edx@59
  int v4; // [sp+4h] [bp-140h]@1
  int v5; // [sp+8h] [bp-13Ch]@1
  int v6; // [sp+Ch] [bp-138h]@1
  int v7; // [sp+10h] [bp-134h]@1
  int v8; // [sp+14h] [bp-130h]@1
  int v9; // [sp+18h] [bp-12Ch]@1
  int v10; // [sp+1Ch] [bp-128h]@1
  int v11; // [sp+20h] [bp-124h]@1
  int v12; // [sp+24h] [bp-120h]@1
  int v13; // [sp+28h] [bp-11Ch]@1
  int v14; // [sp+2Ch] [bp-118h]@1
  int v15; // [sp+30h] [bp-114h]@1
  int v16; // [sp+34h] [bp-110h]@1
  int v17; // [sp+38h] [bp-10Ch]@1
  int v18; // [sp+3Ch] [bp-108h]@1
  int v19; // [sp+40h] [bp-104h]@1
  int v20; // [sp+44h] [bp-100h]@1
  int v21; // [sp+48h] [bp-FCh]@1
  int v22; // [sp+4Ch] [bp-F8h]@1
  int v23; // [sp+50h] [bp-F4h]@1
  int v24; // [sp+54h] [bp-F0h]@1
  int v25; // [sp+58h] [bp-ECh]@1
  int v26; // [sp+5Ch] [bp-E8h]@1
  int v27; // [sp+60h] [bp-E4h]@1
  int v28; // [sp+64h] [bp-E0h]@1
  int v29; // [sp+68h] [bp-DCh]@1
  int v30; // [sp+6Ch] [bp-D8h]@1
  int v31; // [sp+70h] [bp-D4h]@1
  int v32; // [sp+74h] [bp-D0h]@1
  int v33; // [sp+78h] [bp-CCh]@1
  int v34; // [sp+7Ch] [bp-C8h]@1
  int v35; // [sp+80h] [bp-C4h]@1
  int v36; // [sp+84h] [bp-C0h]@1
  int v37; // [sp+88h] [bp-BCh]@1
  int v38; // [sp+8Ch] [bp-B8h]@1
  int v39; // [sp+90h] [bp-B4h]@1
  int v40; // [sp+94h] [bp-B0h]@1
  int v41; // [sp+98h] [bp-ACh]@1
  int v42; // [sp+9Ch] [bp-A8h]@1
  int v43; // [sp+A0h] [bp-A4h]@1
  int v44; // [sp+A4h] [bp-A0h]@1
  int v45; // [sp+A8h] [bp-9Ch]@1
  int v46; // [sp+ACh] [bp-98h]@1
  int v47; // [sp+B0h] [bp-94h]@1
  int v48; // [sp+B4h] [bp-90h]@1
  int v49; // [sp+B8h] [bp-8Ch]@1
  int v50; // [sp+BCh] [bp-88h]@1
  int v51; // [sp+C0h] [bp-84h]@1
  int v52; // [sp+C4h] [bp-80h]@1
  int v53; // [sp+C8h] [bp-7Ch]@1
  int v54; // [sp+CCh] [bp-78h]@1
  int v55; // [sp+D0h] [bp-74h]@1
  int v56; // [sp+D4h] [bp-70h]@1
  int v57; // [sp+D8h] [bp-6Ch]@1
  int v58; // [sp+DCh] [bp-68h]@1
  int v59; // [sp+E0h] [bp-64h]@1
  int v60; // [sp+E4h] [bp-60h]@1
  int v61; // [sp+E8h] [bp-5Ch]@1
  int v62; // [sp+ECh] [bp-58h]@1
  int v63; // [sp+F0h] [bp-54h]@1
  int v64; // [sp+F4h] [bp-50h]@1
  int v65; // [sp+F8h] [bp-4Ch]@1
  int v66; // [sp+FCh] [bp-48h]@1
  int v67; // [sp+100h] [bp-44h]@1
  int v68; // [sp+104h] [bp-40h]@1
  int v69; // [sp+108h] [bp-3Ch]@1
  int v70; // [sp+10Ch] [bp-38h]@1
  int v71; // [sp+110h] [bp-34h]@1
  int v72; // [sp+114h] [bp-30h]@1
  int v73; // [sp+118h] [bp-2Ch]@1
  int v74; // [sp+11Ch] [bp-28h]@1
  int v75; // [sp+120h] [bp-24h]@1
  int v76; // [sp+124h] [bp-20h]@1
  int v77; // [sp+128h] [bp-1Ch]@1
  int v78; // [sp+12Ch] [bp-18h]@1
  int v79; // [sp+130h] [bp-14h]@1
  int v80; // [sp+134h] [bp-10h]@1
  int v81; // [sp+138h] [bp-Ch]@1
  int v82; // [sp+13Ch] [bp-8h]@1
  int v83; // [sp+140h] [bp-4h]@1

  v44 = 0;
  v45 = 0;
  v46 = 16;
  v47 = 16;
  v48 = 16;
  v49 = 0;
  v50 = 32;
  v51 = 16;
  v52 = 32;
  v53 = 0;
  v54 = 48;
  v55 = 16;
  v56 = 0;
  v57 = 0;
  v58 = 16;
  v59 = 16;
  v60 = 48;
  v61 = 0;
  v62 = 64;
  v63 = 16;
  v64 = 0;
  v65 = 0;
  v66 = 16;
  v67 = 16;
  v68 = 80;
  v69 = 0;
  v70 = 96;
  v71 = 16;
  v72 = 96;
  v73 = 0;
  v74 = 112;
  v75 = 16;
  v76 = 112;
  v77 = 0;
  v78 = 128;
  v79 = 16;
  v80 = 128;
  v81 = 0;
  v82 = 144;
  v83 = 16;
  v4 = 0;
  v5 = 16;
  v6 = 16;
  v7 = 32;
  v8 = 16;
  v9 = 16;
  v10 = 32;
  v11 = 32;
  v12 = 32;
  v13 = 16;
  v14 = 48;
  v15 = 32;
  v16 = 0;
  v17 = 16;
  v18 = 16;
  v19 = 32;
  v20 = 48;
  v21 = 16;
  v22 = 64;
  v23 = 32;
  v24 = 0;
  v25 = 16;
  v26 = 16;
  v27 = 32;
  v28 = 80;
  v29 = 16;
  v30 = 96;
  v31 = 32;
  v32 = 96;
  v33 = 16;
  v34 = 112;
  v35 = 32;
  v36 = 112;
  v37 = 16;
  v38 = 128;
  v39 = 32;
  v40 = 128;
  v41 = 16;
  v42 = 144;
  v43 = 32;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 100) = 0;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( RNG_Range(0, 120) == 10 )
      {
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 1;
      }
      if ( *(_DWORD *)(a1 + 8) - 0x4000 < Quote_X_Position
        && *(_DWORD *)(a1 + 8) + 0x4000 > Quote_X_Position
        && *(_DWORD *)(a1 + 12) - 0x4000 < Quote_Y_Position
        && *(_DWORD *)(a1 + 12) + 0x2000 > Quote_Y_Position )
      {
        if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
          *(_DWORD *)(a1 + 76) = 2;
        else
          *(_DWORD *)(a1 + 76) = 0;
      }
      break;
    case 2:
      if ( ++*(_DWORD *)(a1 + 120) > 8 )
      {
        *(_DWORD *)(a1 + 116) = 1;
        *(_DWORD *)(a1 + 104) = 0;
      }
      break;
    case 0xA:
      *(_DWORD *)(a1 + 64) = 1000;
      *(_DWORD *)(a1 + 116) = 11;
      *(_DWORD *)(a1 + 120) = RNG_Range(0, 50);
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 164) = 0;
      goto LABEL_17;
    case 0xB:
LABEL_17:
      if ( *(_DWORD *)(a1 + 120) )
        --*(_DWORD *)(a1 + 120);
      else
        *(_DWORD *)(a1 + 116) = 13;
      break;
    case 0xD:
      *(_DWORD *)(a1 + 116) = 14;
      *(_DWORD *)(a1 + 120) = RNG_Range(0, 50);
      if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
        *(_DWORD *)(a1 + 76) = 2;
      else
        *(_DWORD *)(a1 + 76) = 0;
      goto LABEL_24;
    case 0xE:
LABEL_24:
      if ( ++*(_DWORD *)(a1 + 100) > 2 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 5 )
        *(_DWORD *)(a1 + 104) = 2;
      if ( *(_DWORD *)(a1 + 76) )
        *(_DWORD *)(a1 + 16) += 64;
      else
        *(_DWORD *)(a1 + 16) -= 64;
      if ( *(_DWORD *)(a1 + 120) )
      {
        --*(_DWORD *)(a1 + 120);
      }
      else
      {
        *(_WORD *)(a1 + 80) |= 0x20u;
        *(_DWORD *)(a1 + 116) = 15;
        *(_DWORD *)(a1 + 104) = 2;
        *(_DWORD *)(a1 + 20) = -512;
        *(_DWORD *)(a1 + 164) = 2;
      }
      break;
    case 0xF:
      if ( *(_DWORD *)(a1 + 4) & 8 )
      {
        *(_WORD *)(a1 + 80) |= 0x20u;
        *(_DWORD *)(a1 + 16) = 0;
        *(_DWORD *)(a1 + 116) = 10;
        *(_DWORD *)(a1 + 164) = 0;
      }
      break;
    case 0x14:
      if ( *(_DWORD *)(a1 + 4) & 8 )
      {
        *(_DWORD *)(a1 + 16) = 0;
        *(_DWORD *)(a1 + 116) = 21;
        *(_DWORD *)(a1 + 164) = 0;
        if ( *(_DWORD *)(a1 + 104) == 6 )
          *(_DWORD *)(a1 + 104) = 8;
        else
          *(_DWORD *)(a1 + 104) = 9;
        *(_DWORD *)(a1 + 120) = RNG_Range(300, 400);
      }
      break;
    case 0x15:
      if ( *(_DWORD *)(a1 + 120) )
      {
        --*(_DWORD *)(a1 + 120);
      }
      else
      {
        *(_WORD *)(a1 + 80) |= 0x20u;
        *(_DWORD *)(a1 + 64) = 1000;
        *(_DWORD *)(a1 + 116) = 11;
        *(_DWORD *)(a1 + 120) = RNG_Range(0, 50);
        *(_DWORD *)(a1 + 104) = 0;
      }
      break;
    default:
      break;
  }
  if ( *(_DWORD *)(a1 + 116) > 10 && *(_DWORD *)(a1 + 116) < 20 && *(_DWORD *)(a1 + 64) != 1000 )
  {
    *(_DWORD *)(a1 + 116) = 20;
    *(_DWORD *)(a1 + 20) = -512;
    *(_DWORD *)(a1 + 104) = RNG_Range(6, 7);
    *(_WORD *)(a1 + 80) &= 0xFFDFu;
  }
  *(_DWORD *)(a1 + 20) += 32;
  if ( *(_DWORD *)(a1 + 16) > 511 )
    *(_DWORD *)(a1 + 16) = 511;
  if ( *(_DWORD *)(a1 + 16) < -511 )
    *(_DWORD *)(a1 + 16) = -511;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  if ( *(_DWORD *)(a1 + 76) )
  {
    v3 = &v4 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v3;
    *(_DWORD *)(result + 4) = v3[1];
    *(_DWORD *)(result + 8) = v3[2];
    *(_DWORD *)(result + 12) = v3[3];
  }
  else
  {
    v1 = &v44 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v1;
    *(_DWORD *)(result + 4) = v1[1];
    *(_DWORD *)(result + 8) = v1[2];
    *(_DWORD *)(result + 12) = v1[3];
  }
  return result;
}

//----- (0043FC70) --------------------------------------------------------
int __cdecl NPC123(int a1)
{
  int *v1; // ecx@25
  int v2; // edx@25
  int result; // eax@25
  int v4; // [sp+8h] [bp-4Ch]@1
  int v5; // [sp+Ch] [bp-48h]@1
  int v6; // [sp+10h] [bp-44h]@1
  int v7; // [sp+14h] [bp-40h]@1
  int v8; // [sp+18h] [bp-3Ch]@1
  int v9; // [sp+1Ch] [bp-38h]@1
  int v10; // [sp+20h] [bp-34h]@1
  int v11; // [sp+24h] [bp-30h]@1
  int v12; // [sp+28h] [bp-2Ch]@1
  int v13; // [sp+2Ch] [bp-28h]@1
  int v14; // [sp+30h] [bp-24h]@1
  int v15; // [sp+34h] [bp-20h]@1
  int v16; // [sp+38h] [bp-1Ch]@1
  int v17; // [sp+3Ch] [bp-18h]@1
  int v18; // [sp+40h] [bp-14h]@1
  int v19; // [sp+44h] [bp-10h]@1
  int v20; // [sp+48h] [bp-Ch]@1
  int v21; // [sp+50h] [bp-4h]@1

  v5 = 192;
  v6 = 0;
  v7 = 208;
  v8 = 16;
  v9 = 208;
  v10 = 0;
  v11 = 224;
  v12 = 16;
  v13 = 224;
  v14 = 0;
  v15 = 240;
  v16 = 16;
  v17 = 240;
  v18 = 0;
  v19 = 256;
  v20 = 16;
  v21 = 0;
  v4 = *(_DWORD *)(a1 + 116);
  if ( v4 )
  {
    if ( v4 == 1 )
    {
      switch ( *(_DWORD *)(a1 + 76) )
      {
        case 0:
          if ( *(_DWORD *)(a1 + 4) & 1 )
            v21 = 1;
          break;
        case 1:
          if ( *(_DWORD *)(a1 + 4) & 2 )
            v21 = 1;
          break;
        case 2:
          if ( *(_DWORD *)(a1 + 4) & 4 )
            v21 = 1;
          break;
        case 3:
          if ( *(_DWORD *)(a1 + 4) & 8 )
            v21 = 1;
          break;
        default:
          break;
      }
      *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
      *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
    }
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 1;
    Create_Animated_Effect(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 3, 0);
    Play_Sound_Effect(32, 1);
    switch ( *(_DWORD *)(a1 + 76) )
    {
      case 0:
        *(_DWORD *)(a1 + 16) = -4096;
        *(_DWORD *)(a1 + 20) = RNG_Range(-128, 128);
        break;
      case 1:
        *(_DWORD *)(a1 + 20) = -4096;
        *(_DWORD *)(a1 + 16) = RNG_Range(-128, 128);
        break;
      case 2:
        *(_DWORD *)(a1 + 16) = 4096;
        *(_DWORD *)(a1 + 20) = RNG_Range(-128, 128);
        break;
      case 3:
        *(_DWORD *)(a1 + 20) = 4096;
        *(_DWORD *)(a1 + 16) = RNG_Range(-128, 128);
        break;
      default:
        break;
    }
  }
  if ( v21 )
  {
    Create_Animated_Effect(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 2, 2);
    Play_Sound_Effect(28, 1);
    *(_BYTE *)a1 = 0;
  }
  v1 = &v5 + 4 * *(_DWORD *)(a1 + 76);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  result = v1[2];
  *(_DWORD *)(v2 + 8) = result;
  *(_DWORD *)(v2 + 12) = v1[3];
  return result;
}

//----- (0043FEF0) --------------------------------------------------------
int __cdecl NPC124(int a1)
{
  int *v1; // ecx@13
  int v2; // edx@13
  int result; // eax@13
  int v4; // [sp+8h] [bp-20h]@1
  int v5; // [sp+Ch] [bp-1Ch]@1
  int v6; // [sp+10h] [bp-18h]@1
  int v7; // [sp+14h] [bp-14h]@1
  int v8; // [sp+18h] [bp-10h]@1
  int v9; // [sp+1Ch] [bp-Ch]@1
  int v10; // [sp+20h] [bp-8h]@1
  int v11; // [sp+24h] [bp-4h]@1

  v4 = 160;
  v5 = 0;
  v6 = 192;
  v7 = 32;
  v8 = 192;
  v9 = 0;
  v10 = 224;
  v11 = 32;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 8) += 4096;
      *(_DWORD *)(a1 + 12) += 4096;
      goto LABEL_3;
    case 1:
LABEL_3:
      *(_WORD *)(a1 + 80) &= 0xFFF7u;
      *(_DWORD *)(a1 + 104) = 0;
      break;
    case 0xA:
      *(_DWORD *)(a1 + 116) = 11;
      *(_DWORD *)(a1 + 104) = 1;
      *(_DWORD *)(a1 + 120) = 0;
      *(_WORD *)(a1 + 80) |= 8u;
      goto LABEL_5;
    case 0xB:
LABEL_5:
      switch ( *(_DWORD *)(a1 + 76) )
      {
        case 0:
          *(_DWORD *)(a1 + 8) -= 128;
          break;
        case 1:
          *(_DWORD *)(a1 + 12) -= 128;
          break;
        case 2:
          *(_DWORD *)(a1 + 8) += 128;
          break;
        case 3:
          *(_DWORD *)(a1 + 12) += 128;
          break;
        default:
          break;
      }
      if ( !(++*(_DWORD *)(a1 + 120) % 8) )
        Play_Sound_Effect(26, 1);
      sub_40F310(20);
      break;
    default:
      break;
  }
  v1 = &v4 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  result = v1[2];
  *(_DWORD *)(v2 + 8) = result;
  *(_DWORD *)(v2 + 12) = v1[3];
  return result;
}

//----- (004400D0) --------------------------------------------------------
int __cdecl NPC125(int a1)
{
  int result; // eax@7

  if ( *(_DWORD *)(a1 + 64) < 990 )
  {
    sub_46F150(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), *(_DWORD *)(a1 + 148), 8);
    Play_Sound_Effect(70, 1);
    if ( *(_DWORD *)(a1 + 76) )
      NPC_Create(86, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 0, 0, 2, 0, 0);
    else
      NPC_Create(87, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 0, 0, 2, 0, 0);
    *(_BYTE *)a1 = 0;
  }
  if ( *(_DWORD *)(a1 + 76) )
  {
    result = a1 + 84;
    *(_DWORD *)result = 16;
    *(_DWORD *)(result + 4) = 96;
    *(_DWORD *)(result + 8) = 32;
    *(_DWORD *)(result + 12) = 112;
  }
  else
  {
    result = a1 + 84;
    *(_DWORD *)result = 0;
    *(_DWORD *)(result + 4) = 96;
    *(_DWORD *)(result + 8) = 16;
    *(_DWORD *)(result + 12) = 112;
  }
  return result;
}

//----- (004401F0) --------------------------------------------------------
int __cdecl NPC126(int a1)
{
  int *v1; // edx@51
  int result; // eax@51
  int *v3; // edx@52
  int v4; // [sp+4h] [bp-C0h]@1
  int v5; // [sp+8h] [bp-BCh]@1
  int v6; // [sp+Ch] [bp-B8h]@1
  int v7; // [sp+10h] [bp-B4h]@1
  int v8; // [sp+14h] [bp-B0h]@1
  int v9; // [sp+18h] [bp-ACh]@1
  int v10; // [sp+1Ch] [bp-A8h]@1
  int v11; // [sp+20h] [bp-A4h]@1
  int v12; // [sp+24h] [bp-A0h]@1
  int v13; // [sp+28h] [bp-9Ch]@1
  int v14; // [sp+2Ch] [bp-98h]@1
  int v15; // [sp+30h] [bp-94h]@1
  int v16; // [sp+34h] [bp-90h]@1
  int v17; // [sp+38h] [bp-8Ch]@1
  int v18; // [sp+3Ch] [bp-88h]@1
  int v19; // [sp+40h] [bp-84h]@1
  int v20; // [sp+44h] [bp-80h]@1
  int v21; // [sp+48h] [bp-7Ch]@1
  int v22; // [sp+4Ch] [bp-78h]@1
  int v23; // [sp+50h] [bp-74h]@1
  int v24; // [sp+54h] [bp-70h]@1
  int v25; // [sp+58h] [bp-6Ch]@1
  int v26; // [sp+5Ch] [bp-68h]@1
  int v27; // [sp+60h] [bp-64h]@1
  int v28; // [sp+64h] [bp-60h]@1
  int v29; // [sp+68h] [bp-5Ch]@1
  int v30; // [sp+6Ch] [bp-58h]@1
  int v31; // [sp+70h] [bp-54h]@1
  int v32; // [sp+74h] [bp-50h]@1
  int v33; // [sp+78h] [bp-4Ch]@1
  int v34; // [sp+7Ch] [bp-48h]@1
  int v35; // [sp+80h] [bp-44h]@1
  int v36; // [sp+84h] [bp-40h]@1
  int v37; // [sp+88h] [bp-3Ch]@1
  int v38; // [sp+8Ch] [bp-38h]@1
  int v39; // [sp+90h] [bp-34h]@1
  int v40; // [sp+94h] [bp-30h]@1
  int v41; // [sp+98h] [bp-2Ch]@1
  int v42; // [sp+9Ch] [bp-28h]@1
  int v43; // [sp+A0h] [bp-24h]@1
  int v44; // [sp+A4h] [bp-20h]@1
  int v45; // [sp+A8h] [bp-1Ch]@1
  int v46; // [sp+ACh] [bp-18h]@1
  int v47; // [sp+B0h] [bp-14h]@1
  int v48; // [sp+B4h] [bp-10h]@1
  int v49; // [sp+B8h] [bp-Ch]@1
  int v50; // [sp+BCh] [bp-8h]@1
  int v51; // [sp+C0h] [bp-4h]@1

  v28 = 48;
  v29 = 144;
  v30 = 64;
  v31 = 160;
  v32 = 64;
  v33 = 144;
  v34 = 80;
  v35 = 160;
  v36 = 48;
  v37 = 144;
  v38 = 64;
  v39 = 160;
  v40 = 80;
  v41 = 144;
  v42 = 96;
  v43 = 160;
  v44 = 96;
  v45 = 144;
  v46 = 112;
  v47 = 160;
  v48 = 112;
  v49 = 144;
  v50 = 128;
  v51 = 160;
  v4 = 48;
  v5 = 160;
  v6 = 64;
  v7 = 176;
  v8 = 64;
  v9 = 160;
  v10 = 80;
  v11 = 176;
  v12 = 48;
  v13 = 160;
  v14 = 64;
  v15 = 176;
  v16 = 80;
  v17 = 160;
  v18 = 96;
  v19 = 176;
  v20 = 96;
  v21 = 160;
  v22 = 112;
  v23 = 176;
  v24 = 112;
  v25 = 160;
  v26 = 128;
  v27 = 176;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 100) = 0;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( RNG_Range(0, 120) == 10 )
      {
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 1;
      }
      if ( *(_DWORD *)(a1 + 8) - 49152 < Quote_X_Position
        && *(_DWORD *)(a1 + 8) + 49152 > Quote_X_Position
        && *(_DWORD *)(a1 + 12) - 0x4000 < Quote_Y_Position
        && *(_DWORD *)(a1 + 12) + 0x2000 > Quote_Y_Position )
      {
        if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
          *(_DWORD *)(a1 + 76) = 2;
        else
          *(_DWORD *)(a1 + 76) = 0;
      }
      if ( *(_DWORD *)(a1 + 8) - 0x4000 < Quote_X_Position
        && *(_DWORD *)(a1 + 8) + 0x4000 > Quote_X_Position
        && *(_DWORD *)(a1 + 12) - 0x4000 < Quote_Y_Position
        && *(_DWORD *)(a1 + 12) + 0x2000 > Quote_Y_Position )
      {
        if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
          *(_DWORD *)(a1 + 76) = 0;
        else
          *(_DWORD *)(a1 + 76) = 2;
        *(_DWORD *)(a1 + 116) = 10;
      }
      break;
    case 2:
      if ( ++*(_DWORD *)(a1 + 120) > 8 )
      {
        *(_DWORD *)(a1 + 116) = 1;
        *(_DWORD *)(a1 + 104) = 0;
      }
      break;
    case 0xA:
      *(_DWORD *)(a1 + 116) = 11;
      *(_DWORD *)(a1 + 104) = 4;
      *(_DWORD *)(a1 + 100) = 0;
      goto LABEL_25;
    case 0xB:
LABEL_25:
      if ( *(_DWORD *)(a1 + 4) & 8 )
      {
        if ( ++*(_DWORD *)(a1 + 100) > 2 )
        {
          *(_DWORD *)(a1 + 100) = 0;
          ++*(_DWORD *)(a1 + 104);
        }
        if ( *(_DWORD *)(a1 + 104) > 5 )
          *(_DWORD *)(a1 + 104) = 4;
      }
      else
      {
        *(_DWORD *)(a1 + 104) = 5;
        *(_DWORD *)(a1 + 100) = 0;
      }
      if ( *(_DWORD *)(a1 + 16) < 0 && *(_DWORD *)(a1 + 4) & 1 )
      {
        *(_DWORD *)(a1 + 16) /= -2;
        *(_DWORD *)(a1 + 76) = 2;
      }
      if ( *(_DWORD *)(a1 + 16) > 0 && *(_DWORD *)(a1 + 4) & 4 )
      {
        *(_DWORD *)(a1 + 16) /= -2;
        *(_DWORD *)(a1 + 76) = 0;
      }
      if ( *(_DWORD *)(a1 + 76) )
        *(_DWORD *)(a1 + 16) += 64;
      else
        *(_DWORD *)(a1 + 16) -= 64;
      if ( *(_DWORD *)(a1 + 16) > 1535 )
        *(_DWORD *)(a1 + 16) = 1024;
      if ( *(_DWORD *)(a1 + 16) < -1535 )
        *(_DWORD *)(a1 + 16) = -1024;
      break;
    default:
      break;
  }
  if ( Key_For_Down & Key_Pressed )
    *(_WORD *)(a1 + 80) |= 0x2000u;
  else
    *(_WORD *)(a1 + 80) &= 0xDFFFu;
  *(_DWORD *)(a1 + 20) += 64;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 76) )
  {
    v3 = &v4 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v3;
    *(_DWORD *)(result + 4) = v3[1];
    *(_DWORD *)(result + 8) = v3[2];
    *(_DWORD *)(result + 12) = v3[3];
  }
  else
  {
    v1 = &v28 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v1;
    *(_DWORD *)(result + 4) = v1[1];
    *(_DWORD *)(result + 8) = v1[2];
    *(_DWORD *)(result + 12) = v1[3];
  }
  return result;
}
// 49363C: using guessed type int Key_For_Down;
// 49E214: using guessed type int Key_Pressed;

//----- (00440760) --------------------------------------------------------
int __cdecl NPC127(int a1)
{
  int *v1; // ecx@5
  int v2; // edx@5
  int result; // eax@5
  int *v4; // ecx@6
  int v5; // edx@6
  int v6; // [sp+0h] [bp-60h]@1
  int v7; // [sp+4h] [bp-5Ch]@1
  int v8; // [sp+8h] [bp-58h]@1
  int v9; // [sp+Ch] [bp-54h]@1
  int v10; // [sp+10h] [bp-50h]@1
  int v11; // [sp+14h] [bp-4Ch]@1
  int v12; // [sp+18h] [bp-48h]@1
  int v13; // [sp+1Ch] [bp-44h]@1
  int v14; // [sp+20h] [bp-40h]@1
  int v15; // [sp+24h] [bp-3Ch]@1
  int v16; // [sp+28h] [bp-38h]@1
  int v17; // [sp+2Ch] [bp-34h]@1
  int v18; // [sp+30h] [bp-30h]@1
  int v19; // [sp+34h] [bp-2Ch]@1
  int v20; // [sp+38h] [bp-28h]@1
  int v21; // [sp+3Ch] [bp-24h]@1
  int v22; // [sp+40h] [bp-20h]@1
  int v23; // [sp+44h] [bp-1Ch]@1
  int v24; // [sp+48h] [bp-18h]@1
  int v25; // [sp+4Ch] [bp-14h]@1
  int v26; // [sp+50h] [bp-10h]@1
  int v27; // [sp+54h] [bp-Ch]@1
  int v28; // [sp+58h] [bp-8h]@1
  int v29; // [sp+5Ch] [bp-4h]@1

  v6 = 112;
  v7 = 48;
  v8 = 128;
  v9 = 64;
  v10 = 112;
  v11 = 64;
  v12 = 128;
  v13 = 80;
  v14 = 112;
  v15 = 80;
  v16 = 128;
  v17 = 96;
  v18 = 64;
  v19 = 80;
  v20 = 80;
  v21 = 96;
  v22 = 80;
  v23 = 80;
  v24 = 96;
  v25 = 96;
  v26 = 96;
  v27 = 80;
  v28 = 112;
  v29 = 96;
  if ( ++*(_DWORD *)(a1 + 100) > 0 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    if ( ++*(_DWORD *)(a1 + 104) > 2 )
      *(_BYTE *)a1 = 0;
  }
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v6 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    result = v4[2];
    *(_DWORD *)(v5 + 8) = result;
    *(_DWORD *)(v5 + 12) = v4[3];
  }
  else
  {
    v1 = &v18 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    result = v1[2];
    *(_DWORD *)(v2 + 8) = result;
    *(_DWORD *)(v2 + 12) = v1[3];
  }
  return result;
}

//----- (004408B0) --------------------------------------------------------
int __cdecl NPC128(int a1)
{
  int result; // eax@8
  int *v2; // eax@9
  int v3; // ecx@9
  int *v4; // eax@10
  int v5; // ecx@10
  int *v6; // eax@11
  int v7; // ecx@11
  int *v8; // eax@12
  int v9; // ecx@12
  int v10; // [sp+4h] [bp-140h]@1
  int v11; // [sp+8h] [bp-13Ch]@1
  int v12; // [sp+Ch] [bp-138h]@1
  int v13; // [sp+10h] [bp-134h]@1
  int v14; // [sp+14h] [bp-130h]@1
  int v15; // [sp+18h] [bp-12Ch]@1
  int v16; // [sp+1Ch] [bp-128h]@1
  int v17; // [sp+20h] [bp-124h]@1
  int v18; // [sp+24h] [bp-120h]@1
  int v19; // [sp+28h] [bp-11Ch]@1
  int v20; // [sp+2Ch] [bp-118h]@1
  int v21; // [sp+30h] [bp-114h]@1
  int v22; // [sp+34h] [bp-110h]@1
  int v23; // [sp+38h] [bp-10Ch]@1
  int v24; // [sp+3Ch] [bp-108h]@1
  int v25; // [sp+40h] [bp-104h]@1
  int v26; // [sp+44h] [bp-100h]@1
  int v27; // [sp+48h] [bp-FCh]@1
  int v28; // [sp+4Ch] [bp-F8h]@1
  int v29; // [sp+50h] [bp-F4h]@1
  int v30; // [sp+54h] [bp-F0h]@1
  int v31; // [sp+58h] [bp-ECh]@1
  int v32; // [sp+5Ch] [bp-E8h]@1
  int v33; // [sp+60h] [bp-E4h]@1
  int v34; // [sp+64h] [bp-E0h]@1
  int v35; // [sp+68h] [bp-DCh]@1
  int v36; // [sp+6Ch] [bp-D8h]@1
  int v37; // [sp+70h] [bp-D4h]@1
  int v38; // [sp+74h] [bp-D0h]@1
  int v39; // [sp+78h] [bp-CCh]@1
  int v40; // [sp+7Ch] [bp-C8h]@1
  int v41; // [sp+80h] [bp-C4h]@1
  int v42; // [sp+84h] [bp-C0h]@1
  int v43; // [sp+88h] [bp-BCh]@1
  int v44; // [sp+8Ch] [bp-B8h]@1
  int v45; // [sp+90h] [bp-B4h]@1
  int v46; // [sp+94h] [bp-B0h]@1
  int v47; // [sp+98h] [bp-ACh]@1
  int v48; // [sp+9Ch] [bp-A8h]@1
  int v49; // [sp+A0h] [bp-A4h]@1
  int v50; // [sp+A4h] [bp-A0h]@1
  int v51; // [sp+A8h] [bp-9Ch]@1
  int v52; // [sp+ACh] [bp-98h]@1
  int v53; // [sp+B0h] [bp-94h]@1
  int v54; // [sp+B4h] [bp-90h]@1
  int v55; // [sp+B8h] [bp-8Ch]@1
  int v56; // [sp+BCh] [bp-88h]@1
  int v57; // [sp+C0h] [bp-84h]@1
  int v58; // [sp+C4h] [bp-80h]@1
  int v59; // [sp+C8h] [bp-7Ch]@1
  int v60; // [sp+CCh] [bp-78h]@1
  int v61; // [sp+D0h] [bp-74h]@1
  int v62; // [sp+D4h] [bp-70h]@1
  int v63; // [sp+D8h] [bp-6Ch]@1
  int v64; // [sp+DCh] [bp-68h]@1
  int v65; // [sp+E0h] [bp-64h]@1
  int v66; // [sp+E4h] [bp-60h]@1
  int v67; // [sp+E8h] [bp-5Ch]@1
  int v68; // [sp+ECh] [bp-58h]@1
  int v69; // [sp+F0h] [bp-54h]@1
  int v70; // [sp+F4h] [bp-50h]@1
  int v71; // [sp+F8h] [bp-4Ch]@1
  int v72; // [sp+FCh] [bp-48h]@1
  int v73; // [sp+100h] [bp-44h]@1
  int v74; // [sp+104h] [bp-40h]@1
  int v75; // [sp+108h] [bp-3Ch]@1
  int v76; // [sp+10Ch] [bp-38h]@1
  int v77; // [sp+110h] [bp-34h]@1
  int v78; // [sp+114h] [bp-30h]@1
  int v79; // [sp+118h] [bp-2Ch]@1
  int v80; // [sp+11Ch] [bp-28h]@1
  int v81; // [sp+120h] [bp-24h]@1
  int v82; // [sp+124h] [bp-20h]@1
  int v83; // [sp+128h] [bp-1Ch]@1
  int v84; // [sp+12Ch] [bp-18h]@1
  int v85; // [sp+130h] [bp-14h]@1
  int v86; // [sp+134h] [bp-10h]@1
  int v87; // [sp+138h] [bp-Ch]@1
  int v88; // [sp+13Ch] [bp-8h]@1
  int v89; // [sp+140h] [bp-4h]@1

  v50 = 0;
  v51 = 0;
  v52 = 0;
  v53 = 0;
  v54 = 176;
  v55 = 16;
  v56 = 184;
  v57 = 32;
  v58 = 184;
  v59 = 16;
  v60 = 192;
  v61 = 32;
  v62 = 192;
  v63 = 16;
  v64 = 200;
  v65 = 32;
  v66 = 200;
  v67 = 16;
  v68 = 208;
  v69 = 32;
  v30 = 0;
  v31 = 0;
  v32 = 0;
  v33 = 0;
  v34 = 232;
  v35 = 16;
  v36 = 240;
  v37 = 32;
  v38 = 224;
  v39 = 16;
  v40 = 232;
  v41 = 32;
  v42 = 216;
  v43 = 16;
  v44 = 224;
  v45 = 32;
  v46 = 208;
  v47 = 16;
  v48 = 216;
  v49 = 32;
  v70 = 0;
  v71 = 0;
  v72 = 0;
  v73 = 0;
  v74 = 176;
  v75 = 32;
  v76 = 192;
  v77 = 40;
  v78 = 176;
  v79 = 40;
  v80 = 192;
  v81 = 48;
  v82 = 192;
  v83 = 32;
  v84 = 208;
  v85 = 40;
  v86 = 192;
  v87 = 40;
  v88 = 208;
  v89 = 48;
  v10 = 0;
  v11 = 0;
  v12 = 0;
  v13 = 0;
  v14 = 208;
  v15 = 32;
  v16 = 224;
  v17 = 40;
  v18 = 208;
  v19 = 40;
  v20 = 224;
  v21 = 48;
  v22 = 224;
  v23 = 32;
  v24 = 232;
  v25 = 40;
  v26 = 224;
  v27 = 40;
  v28 = 232;
  v29 = 48;
  if ( !*(_DWORD *)(a1 + 116) )
  {
    *(_DWORD *)(a1 + 116) = 1;
    if ( *(_DWORD *)(a1 + 76) && *(_DWORD *)(a1 + 76) != 2 )
    {
      *(_DWORD *)(a1 + 140) = 4096;
      *(_DWORD *)(a1 + 144) = 2048;
    }
    else
    {
      *(_DWORD *)(a1 + 140) = 2048;
      *(_DWORD *)(a1 + 144) = 4096;
    }
  }
  if ( ++*(_DWORD *)(a1 + 104) > 4 )
    *(_BYTE *)a1 = 0;
  result = *(_DWORD *)(a1 + 76);
  switch ( result )
  {
    case 0:
      v2 = &v50 + 4 * *(_DWORD *)(a1 + 104);
      v3 = a1 + 84;
      *(_DWORD *)v3 = *v2;
      *(_DWORD *)(v3 + 4) = v2[1];
      *(_DWORD *)(v3 + 8) = v2[2];
      result = v2[3];
      *(_DWORD *)(v3 + 12) = result;
      break;
    case 1:
      v4 = &v70 + 4 * *(_DWORD *)(a1 + 104);
      v5 = a1 + 84;
      *(_DWORD *)v5 = *v4;
      *(_DWORD *)(v5 + 4) = v4[1];
      *(_DWORD *)(v5 + 8) = v4[2];
      result = v4[3];
      *(_DWORD *)(v5 + 12) = result;
      break;
    case 2:
      v6 = &v30 + 4 * *(_DWORD *)(a1 + 104);
      v7 = a1 + 84;
      *(_DWORD *)v7 = *v6;
      *(_DWORD *)(v7 + 4) = v6[1];
      *(_DWORD *)(v7 + 8) = v6[2];
      result = v6[3];
      *(_DWORD *)(v7 + 12) = result;
      break;
    case 3:
      v8 = &v10 + 4 * *(_DWORD *)(a1 + 104);
      v9 = a1 + 84;
      *(_DWORD *)v9 = *v8;
      *(_DWORD *)(v9 + 4) = v8[1];
      *(_DWORD *)(v9 + 8) = v8[2];
      result = v8[3];
      *(_DWORD *)(v9 + 12) = result;
      break;
    default:
      return result;
  }
  return result;
}

//----- (00440CF0) --------------------------------------------------------
int __cdecl NPC129(int a1)
{
  int *v1; // edx@4
  int result; // eax@4
  int v3; // [sp+0h] [bp-120h]@1
  int v4; // [sp+4h] [bp-11Ch]@1
  int v5; // [sp+8h] [bp-118h]@1
  int v6; // [sp+Ch] [bp-114h]@1
  int v7; // [sp+10h] [bp-110h]@1
  int v8; // [sp+14h] [bp-10Ch]@1
  int v9; // [sp+18h] [bp-108h]@1
  int v10; // [sp+1Ch] [bp-104h]@1
  int v11; // [sp+20h] [bp-100h]@1
  int v12; // [sp+24h] [bp-FCh]@1
  int v13; // [sp+28h] [bp-F8h]@1
  int v14; // [sp+2Ch] [bp-F4h]@1
  int v15; // [sp+30h] [bp-F0h]@1
  int v16; // [sp+34h] [bp-ECh]@1
  int v17; // [sp+38h] [bp-E8h]@1
  int v18; // [sp+3Ch] [bp-E4h]@1
  int v19; // [sp+40h] [bp-E0h]@1
  int v20; // [sp+44h] [bp-DCh]@1
  int v21; // [sp+48h] [bp-D8h]@1
  int v22; // [sp+4Ch] [bp-D4h]@1
  int v23; // [sp+50h] [bp-D0h]@1
  int v24; // [sp+54h] [bp-CCh]@1
  int v25; // [sp+58h] [bp-C8h]@1
  int v26; // [sp+5Ch] [bp-C4h]@1
  int v27; // [sp+60h] [bp-C0h]@1
  int v28; // [sp+64h] [bp-BCh]@1
  int v29; // [sp+68h] [bp-B8h]@1
  int v30; // [sp+6Ch] [bp-B4h]@1
  int v31; // [sp+70h] [bp-B0h]@1
  int v32; // [sp+74h] [bp-ACh]@1
  int v33; // [sp+78h] [bp-A8h]@1
  int v34; // [sp+7Ch] [bp-A4h]@1
  int v35; // [sp+80h] [bp-A0h]@1
  int v36; // [sp+84h] [bp-9Ch]@1
  int v37; // [sp+88h] [bp-98h]@1
  int v38; // [sp+8Ch] [bp-94h]@1
  int v39; // [sp+90h] [bp-90h]@1
  int v40; // [sp+94h] [bp-8Ch]@1
  int v41; // [sp+98h] [bp-88h]@1
  int v42; // [sp+9Ch] [bp-84h]@1
  int v43; // [sp+A0h] [bp-80h]@1
  int v44; // [sp+A4h] [bp-7Ch]@1
  int v45; // [sp+A8h] [bp-78h]@1
  int v46; // [sp+ACh] [bp-74h]@1
  int v47; // [sp+B0h] [bp-70h]@1
  int v48; // [sp+B4h] [bp-6Ch]@1
  int v49; // [sp+B8h] [bp-68h]@1
  int v50; // [sp+BCh] [bp-64h]@1
  int v51; // [sp+C0h] [bp-60h]@1
  int v52; // [sp+C4h] [bp-5Ch]@1
  int v53; // [sp+C8h] [bp-58h]@1
  int v54; // [sp+CCh] [bp-54h]@1
  int v55; // [sp+D0h] [bp-50h]@1
  int v56; // [sp+D4h] [bp-4Ch]@1
  int v57; // [sp+D8h] [bp-48h]@1
  int v58; // [sp+DCh] [bp-44h]@1
  int v59; // [sp+E0h] [bp-40h]@1
  int v60; // [sp+E4h] [bp-3Ch]@1
  int v61; // [sp+E8h] [bp-38h]@1
  int v62; // [sp+ECh] [bp-34h]@1
  int v63; // [sp+F0h] [bp-30h]@1
  int v64; // [sp+F4h] [bp-2Ch]@1
  int v65; // [sp+F8h] [bp-28h]@1
  int v66; // [sp+FCh] [bp-24h]@1
  int v67; // [sp+100h] [bp-20h]@1
  int v68; // [sp+104h] [bp-1Ch]@1
  int v69; // [sp+108h] [bp-18h]@1
  int v70; // [sp+10Ch] [bp-14h]@1
  int v71; // [sp+110h] [bp-10h]@1
  int v72; // [sp+114h] [bp-Ch]@1
  int v73; // [sp+118h] [bp-8h]@1
  int v74; // [sp+11Ch] [bp-4h]@1

  v3 = 128;
  v4 = 48;
  v5 = 144;
  v6 = 64;
  v7 = 144;
  v8 = 48;
  v9 = 160;
  v10 = 64;
  v11 = 160;
  v12 = 48;
  v13 = 176;
  v14 = 64;
  v15 = 128;
  v16 = 64;
  v17 = 144;
  v18 = 80;
  v19 = 144;
  v20 = 64;
  v21 = 160;
  v22 = 80;
  v23 = 160;
  v24 = 64;
  v25 = 176;
  v26 = 80;
  v27 = 128;
  v28 = 80;
  v29 = 144;
  v30 = 96;
  v31 = 144;
  v32 = 80;
  v33 = 160;
  v34 = 96;
  v35 = 160;
  v36 = 80;
  v37 = 176;
  v38 = 96;
  v39 = 176;
  v40 = 48;
  v41 = 192;
  v42 = 64;
  v43 = 192;
  v44 = 48;
  v45 = 208;
  v46 = 64;
  v47 = 208;
  v48 = 48;
  v49 = 224;
  v50 = 64;
  v51 = 176;
  v52 = 64;
  v53 = 192;
  v54 = 80;
  v55 = 192;
  v56 = 64;
  v57 = 208;
  v58 = 80;
  v59 = 208;
  v60 = 64;
  v61 = 224;
  v62 = 80;
  v63 = 176;
  v64 = 80;
  v65 = 192;
  v66 = 96;
  v67 = 192;
  v68 = 80;
  v69 = 208;
  v70 = 96;
  v71 = 208;
  v72 = 80;
  v73 = 224;
  v74 = 96;
  if ( ++*(_DWORD *)(a1 + 100) > 1 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    if ( ++*(_DWORD *)(a1 + 104) > 2 )
      *(_BYTE *)a1 = 0;
  }
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  v1 = &v3 + 4 * (*(_DWORD *)(a1 + 104) + 3 * *(_DWORD *)(a1 + 76));
  result = a1 + 84;
  *(_DWORD *)result = *v1;
  *(_DWORD *)(result + 4) = v1[1];
  *(_DWORD *)(result + 8) = v1[2];
  *(_DWORD *)(result + 12) = v1[3];
  return result;
}

//----- (00441000) --------------------------------------------------------
int __cdecl NPC130(int a1)
{
  int *v1; // eax@29
  int v2; // ecx@29
  int result; // eax@29
  int *v4; // eax@30
  int v5; // ecx@30
  int v6; // [sp+0h] [bp-84h]@1
  int v7; // [sp+4h] [bp-80h]@1
  int v8; // [sp+8h] [bp-7Ch]@1
  int v9; // [sp+Ch] [bp-78h]@1
  int v10; // [sp+10h] [bp-74h]@1
  int v11; // [sp+14h] [bp-70h]@1
  int v12; // [sp+18h] [bp-6Ch]@1
  int v13; // [sp+1Ch] [bp-68h]@1
  int v14; // [sp+20h] [bp-64h]@1
  int v15; // [sp+24h] [bp-60h]@1
  int v16; // [sp+28h] [bp-5Ch]@1
  int v17; // [sp+2Ch] [bp-58h]@1
  int v18; // [sp+30h] [bp-54h]@1
  int v19; // [sp+34h] [bp-50h]@1
  int v20; // [sp+38h] [bp-4Ch]@1
  int v21; // [sp+3Ch] [bp-48h]@1
  int v22; // [sp+40h] [bp-44h]@1
  int v23; // [sp+44h] [bp-40h]@1
  int v24; // [sp+48h] [bp-3Ch]@1
  int v25; // [sp+4Ch] [bp-38h]@1
  int v26; // [sp+50h] [bp-34h]@1
  int v27; // [sp+54h] [bp-30h]@1
  int v28; // [sp+58h] [bp-2Ch]@1
  int v29; // [sp+5Ch] [bp-28h]@1
  int v30; // [sp+60h] [bp-24h]@1
  int v31; // [sp+64h] [bp-20h]@1
  int v32; // [sp+68h] [bp-1Ch]@1
  int v33; // [sp+6Ch] [bp-18h]@1
  int v34; // [sp+70h] [bp-14h]@1
  int v35; // [sp+74h] [bp-10h]@1
  int v36; // [sp+78h] [bp-Ch]@1
  int v37; // [sp+7Ch] [bp-8h]@1
  int v38; // [sp+80h] [bp-4h]@1

  v23 = 48;
  v24 = 144;
  v25 = 64;
  v26 = 160;
  v27 = 64;
  v28 = 144;
  v29 = 80;
  v30 = 160;
  v31 = 48;
  v32 = 144;
  v33 = 64;
  v34 = 160;
  v35 = 80;
  v36 = 144;
  v37 = 96;
  v38 = 160;
  v7 = 48;
  v8 = 160;
  v9 = 64;
  v10 = 176;
  v11 = 64;
  v12 = 160;
  v13 = 80;
  v14 = 176;
  v15 = 48;
  v16 = 160;
  v17 = 64;
  v18 = 176;
  v19 = 80;
  v20 = 160;
  v21 = 96;
  v22 = 176;
  v6 = *(_DWORD *)(a1 + 116);
  if ( v6 )
  {
    if ( v6 != 1 )
    {
      if ( v6 == 2 && ++*(_DWORD *)(a1 + 120) > 8 )
      {
        *(_DWORD *)(a1 + 116) = 1;
        *(_DWORD *)(a1 + 104) = 0;
      }
      goto LABEL_26;
    }
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 104) = 0;
    *(_DWORD *)(a1 + 100) = 0;
    *(_WORD *)(a1 + 80) |= 0x2000u;
  }
  if ( RNG_Range(0, 120) == 10 )
  {
    *(_DWORD *)(a1 + 116) = 2;
    *(_DWORD *)(a1 + 120) = 0;
    *(_DWORD *)(a1 + 104) = 1;
  }
  if ( *(_DWORD *)(a1 + 8) - 0x8000 < Quote_X_Position
    && *(_DWORD *)(a1 + 8) + 0x8000 > Quote_X_Position
    && *(_DWORD *)(a1 + 12) - 0x4000 < Quote_Y_Position
    && *(_DWORD *)(a1 + 12) + 0x2000 > Quote_Y_Position )
  {
    if ( ++*(_DWORD *)(a1 + 100) > 3 )
    {
      *(_DWORD *)(a1 + 100) = 0;
      ++*(_DWORD *)(a1 + 104);
    }
    if ( *(_DWORD *)(a1 + 104) > 3 )
      *(_DWORD *)(a1 + 104) = 2;
  }
  if ( *(_DWORD *)(a1 + 8) - 49152 < Quote_X_Position
    && *(_DWORD *)(a1 + 8) + 49152 > Quote_X_Position
    && *(_DWORD *)(a1 + 12) - 0x4000 < Quote_Y_Position
    && *(_DWORD *)(a1 + 12) + 0x2000 > Quote_Y_Position )
  {
    if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
      *(_DWORD *)(a1 + 76) = 2;
    else
      *(_DWORD *)(a1 + 76) = 0;
  }
LABEL_26:
  *(_DWORD *)(a1 + 20) += 64;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v7 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    *(_DWORD *)(v5 + 8) = v4[2];
    result = v4[3];
    *(_DWORD *)(v5 + 12) = result;
  }
  else
  {
    v1 = &v23 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    *(_DWORD *)(v2 + 8) = v1[2];
    result = v1[3];
    *(_DWORD *)(v2 + 12) = result;
  }
  return result;
}

//----- (00441360) --------------------------------------------------------
int __cdecl NPC131(int a1)
{
  int *v1; // eax@4
  int v2; // ecx@4
  int result; // eax@4
  int *v4; // eax@5
  int v5; // ecx@5
  int v6; // [sp+0h] [bp-20h]@1
  int v7; // [sp+4h] [bp-1Ch]@1
  int v8; // [sp+8h] [bp-18h]@1
  int v9; // [sp+Ch] [bp-14h]@1
  int v10; // [sp+10h] [bp-10h]@1
  int v11; // [sp+14h] [bp-Ch]@1
  int v12; // [sp+18h] [bp-8h]@1
  int v13; // [sp+1Ch] [bp-4h]@1

  v10 = 144;
  v11 = 144;
  v12 = 160;
  v13 = 160;
  v6 = 144;
  v7 = 160;
  v8 = 160;
  v9 = 176;
  if ( ++*(_DWORD *)(a1 + 120) > 100 )
  {
    *(_DWORD *)(a1 + 120) = 0;
    Create_Animated_Effect(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 5, 0);
  }
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v6 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    *(_DWORD *)(v5 + 8) = v4[2];
    result = v4[3];
    *(_DWORD *)(v5 + 12) = result;
  }
  else
  {
    v1 = &v10 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    *(_DWORD *)(v2 + 8) = v1[2];
    result = v1[3];
    *(_DWORD *)(v2 + 12) = result;
  }
  return result;
}

//----- (00441440) --------------------------------------------------------
int __cdecl NPC132(int a1)
{
  int *v1; // edx@49
  int result; // eax@49
  int *v3; // edx@50
  int v4; // [sp+4h] [bp-A0h]@1
  int v5; // [sp+8h] [bp-9Ch]@1
  int v6; // [sp+Ch] [bp-98h]@1
  int v7; // [sp+10h] [bp-94h]@1
  int v8; // [sp+14h] [bp-90h]@1
  int v9; // [sp+18h] [bp-8Ch]@1
  int v10; // [sp+1Ch] [bp-88h]@1
  int v11; // [sp+20h] [bp-84h]@1
  int v12; // [sp+24h] [bp-80h]@1
  int v13; // [sp+28h] [bp-7Ch]@1
  int v14; // [sp+2Ch] [bp-78h]@1
  int v15; // [sp+30h] [bp-74h]@1
  int v16; // [sp+34h] [bp-70h]@1
  int v17; // [sp+38h] [bp-6Ch]@1
  int v18; // [sp+3Ch] [bp-68h]@1
  int v19; // [sp+40h] [bp-64h]@1
  int v20; // [sp+44h] [bp-60h]@1
  int v21; // [sp+48h] [bp-5Ch]@1
  int v22; // [sp+4Ch] [bp-58h]@1
  int v23; // [sp+50h] [bp-54h]@1
  int v24; // [sp+54h] [bp-50h]@1
  int v25; // [sp+58h] [bp-4Ch]@1
  int v26; // [sp+5Ch] [bp-48h]@1
  int v27; // [sp+60h] [bp-44h]@1
  int v28; // [sp+64h] [bp-40h]@1
  int v29; // [sp+68h] [bp-3Ch]@1
  int v30; // [sp+6Ch] [bp-38h]@1
  int v31; // [sp+70h] [bp-34h]@1
  int v32; // [sp+74h] [bp-30h]@1
  int v33; // [sp+78h] [bp-2Ch]@1
  int v34; // [sp+7Ch] [bp-28h]@1
  int v35; // [sp+80h] [bp-24h]@1
  int v36; // [sp+84h] [bp-20h]@1
  int v37; // [sp+88h] [bp-1Ch]@1
  int v38; // [sp+8Ch] [bp-18h]@1
  int v39; // [sp+90h] [bp-14h]@1
  int v40; // [sp+94h] [bp-10h]@1
  int v41; // [sp+98h] [bp-Ch]@1
  int v42; // [sp+9Ch] [bp-8h]@1
  int v43; // [sp+A0h] [bp-4h]@1

  v24 = 48;
  v25 = 144;
  v26 = 64;
  v27 = 160;
  v28 = 64;
  v29 = 144;
  v30 = 80;
  v31 = 160;
  v32 = 96;
  v33 = 144;
  v34 = 112;
  v35 = 160;
  v36 = 96;
  v37 = 144;
  v38 = 112;
  v39 = 160;
  v40 = 128;
  v41 = 144;
  v42 = 144;
  v43 = 160;
  v4 = 48;
  v5 = 160;
  v6 = 64;
  v7 = 176;
  v8 = 64;
  v9 = 160;
  v10 = 80;
  v11 = 176;
  v12 = 96;
  v13 = 160;
  v14 = 112;
  v15 = 176;
  v16 = 96;
  v17 = 160;
  v18 = 112;
  v19 = 176;
  v20 = 128;
  v21 = 160;
  v22 = 144;
  v23 = 176;
  if ( *(_DWORD *)(a1 + 116) < 100 )
  {
    if ( Quote_X_Position >= *(_DWORD *)(a1 + 8) )
      *(_DWORD *)(a1 + 76) = 2;
    else
      *(_DWORD *)(a1 + 76) = 0;
  }
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 100) = 0;
      goto LABEL_7;
    case 1:
LABEL_7:
      if ( RNG_Range(0, 120) == 10 )
      {
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 1;
      }
      if ( *(_DWORD *)(a1 + 8) - 0x8000 >= Quote_X_Position
        || *(_DWORD *)(a1 + 8) + 0x8000 <= Quote_X_Position
        || *(_DWORD *)(a1 + 12) - 0x2000 >= Quote_Y_Position
        || *(_DWORD *)(a1 + 12) + 0x2000 <= Quote_Y_Position )
      {
        if ( *(_DWORD *)(a1 + 104) == 4 )
          *(_DWORD *)(a1 + 104) = 2;
      }
      else
      {
        if ( ++*(_DWORD *)(a1 + 100) > 4 )
        {
          *(_DWORD *)(a1 + 100) = 0;
          ++*(_DWORD *)(a1 + 104);
        }
        if ( *(_DWORD *)(a1 + 104) > 4 )
          *(_DWORD *)(a1 + 104) = 2;
        if ( *(_DWORD *)(a1 + 104) == 4 && !*(_DWORD *)(a1 + 100) )
          Play_Sound_Effect(105, 1);
      }
      break;
    case 2:
      if ( ++*(_DWORD *)(a1 + 120) > 8 )
      {
        *(_DWORD *)(a1 + 116) = 1;
        *(_DWORD *)(a1 + 104) = 0;
      }
      break;
    case 0xA:
      *(_DWORD *)(a1 + 116) = 11;
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 100) = 0;
      goto LABEL_28;
    case 0xB:
LABEL_28:
      if ( RNG_Range(0, 120) == 10 )
      {
        *(_DWORD *)(a1 + 116) = 12;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 1;
      }
      break;
    case 0xC:
      if ( ++*(_DWORD *)(a1 + 120) > 8 )
      {
        *(_DWORD *)(a1 + 116) = 11;
        *(_DWORD *)(a1 + 104) = 0;
      }
      break;
    case 0x64:
      *(_DWORD *)(a1 + 116) = 101;
      *(_DWORD *)(a1 + 108) = 0;
      goto LABEL_35;
    case 0x65:
LABEL_35:
      if ( ++*(_DWORD *)(a1 + 100) > 4 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 4 )
      {
        if ( *(_DWORD *)(a1 + 108) >= 3 )
        {
          *(_DWORD *)(a1 + 104) = 0;
          *(_DWORD *)(a1 + 108) = 0;
        }
        else
        {
          *(_DWORD *)(a1 + 104) = 2;
          ++*(_DWORD *)(a1 + 108);
        }
      }
      if ( *(_DWORD *)(a1 + 104) == 4 && !*(_DWORD *)(a1 + 100) )
        Play_Sound_Effect(105, 1);
      break;
    case 0x78:
      *(_DWORD *)(a1 + 104) = 0;
      break;
    default:
      break;
  }
  *(_DWORD *)(a1 + 20) += 64;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 76) )
  {
    v3 = &v4 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v3;
    *(_DWORD *)(result + 4) = v3[1];
    *(_DWORD *)(result + 8) = v3[2];
    *(_DWORD *)(result + 12) = v3[3];
  }
  else
  {
    v1 = &v24 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v1;
    *(_DWORD *)(result + 4) = v1[1];
    *(_DWORD *)(result + 8) = v1[2];
    *(_DWORD *)(result + 12) = v1[3];
  }
  return result;
}

//----- (004419B0) --------------------------------------------------------
int __cdecl NPC133(int a1)
{
  int *v1; // edx@12
  int result; // eax@12
  int *v3; // edx@13
  int v4; // [sp+0h] [bp-44h]@1
  int v5; // [sp+4h] [bp-40h]@1
  int v6; // [sp+8h] [bp-3Ch]@1
  int v7; // [sp+Ch] [bp-38h]@1
  int v8; // [sp+10h] [bp-34h]@1
  int v9; // [sp+14h] [bp-30h]@1
  int v10; // [sp+18h] [bp-2Ch]@1
  int v11; // [sp+1Ch] [bp-28h]@1
  int v12; // [sp+20h] [bp-24h]@1
  int v13; // [sp+24h] [bp-20h]@1
  int v14; // [sp+28h] [bp-1Ch]@1
  int v15; // [sp+2Ch] [bp-18h]@1
  int v16; // [sp+30h] [bp-14h]@1
  int v17; // [sp+34h] [bp-10h]@1
  int v18; // [sp+38h] [bp-Ch]@1
  int v19; // [sp+3Ch] [bp-8h]@1
  int v20; // [sp+40h] [bp-4h]@1

  v13 = 176;
  v14 = 32;
  v15 = 192;
  v16 = 48;
  v17 = 192;
  v18 = 32;
  v19 = 208;
  v20 = 48;
  v5 = 176;
  v6 = 48;
  v7 = 192;
  v8 = 64;
  v9 = 192;
  v10 = 48;
  v11 = 208;
  v12 = 64;
  v4 = *(_DWORD *)(a1 + 116);
  if ( v4 )
  {
    if ( v4 != 1 )
    {
      if ( v4 == 2 && ++*(_DWORD *)(a1 + 120) > 8 )
      {
        *(_DWORD *)(a1 + 116) = 1;
        *(_DWORD *)(a1 + 104) = 0;
      }
      goto LABEL_11;
    }
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 104) = 0;
    *(_DWORD *)(a1 + 100) = 0;
  }
  if ( RNG_Range(0, 120) == 10 )
  {
    *(_DWORD *)(a1 + 116) = 2;
    *(_DWORD *)(a1 + 120) = 0;
    *(_DWORD *)(a1 + 104) = 1;
  }
LABEL_11:
  if ( *(_DWORD *)(a1 + 76) )
  {
    v3 = &v5 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v3;
    *(_DWORD *)(result + 4) = v3[1];
    *(_DWORD *)(result + 8) = v3[2];
    *(_DWORD *)(result + 12) = v3[3];
  }
  else
  {
    v1 = &v13 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v1;
    *(_DWORD *)(result + 4) = v1[1];
    *(_DWORD *)(result + 8) = v1[2];
    *(_DWORD *)(result + 12) = v1[3];
  }
  return result;
}

//----- (00441B20) --------------------------------------------------------
int __cdecl NPC134(int a1)
{
  int *v1; // edx@30
  int result; // eax@30
  int *v3; // edx@31
  int v4; // [sp+4h] [bp-60h]@1
  int v5; // [sp+8h] [bp-5Ch]@1
  int v6; // [sp+Ch] [bp-58h]@1
  int v7; // [sp+10h] [bp-54h]@1
  int v8; // [sp+14h] [bp-50h]@1
  int v9; // [sp+18h] [bp-4Ch]@1
  int v10; // [sp+1Ch] [bp-48h]@1
  int v11; // [sp+20h] [bp-44h]@1
  int v12; // [sp+24h] [bp-40h]@1
  int v13; // [sp+28h] [bp-3Ch]@1
  int v14; // [sp+2Ch] [bp-38h]@1
  int v15; // [sp+30h] [bp-34h]@1
  int v16; // [sp+34h] [bp-30h]@1
  int v17; // [sp+38h] [bp-2Ch]@1
  int v18; // [sp+3Ch] [bp-28h]@1
  int v19; // [sp+40h] [bp-24h]@1
  int v20; // [sp+44h] [bp-20h]@1
  int v21; // [sp+48h] [bp-1Ch]@1
  int v22; // [sp+4Ch] [bp-18h]@1
  int v23; // [sp+50h] [bp-14h]@1
  int v24; // [sp+54h] [bp-10h]@1
  int v25; // [sp+58h] [bp-Ch]@1
  int v26; // [sp+5Ch] [bp-8h]@1
  int v27; // [sp+60h] [bp-4h]@1

  v16 = 224;
  v17 = 0;
  v18 = 256;
  v19 = 16;
  v20 = 256;
  v21 = 0;
  v22 = 288;
  v23 = 16;
  v24 = 288;
  v25 = 0;
  v26 = 320;
  v27 = 16;
  v4 = 224;
  v5 = 16;
  v6 = 256;
  v7 = 32;
  v8 = 256;
  v9 = 16;
  v10 = 288;
  v11 = 32;
  v12 = 288;
  v13 = 16;
  v14 = 320;
  v15 = 32;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 104) = 2;
      *(_WORD *)(a1 + 80) &= 0xFFDFu;
      *(_WORD *)(a1 + 80) |= 4u;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( Quote_X_Position > *(_DWORD *)(a1 + 8) - 163840
        && Quote_X_Position < *(_DWORD *)(a1 + 8) + 163840
        && Quote_Y_Position > *(_DWORD *)(a1 + 12) - 81920
        && Quote_Y_Position < *(_DWORD *)(a1 + 12) + 0x8000 )
      {
        *(_DWORD *)(a1 + 116) = 10;
        *(_WORD *)(a1 + 80) |= 0x20u;
        *(_WORD *)(a1 + 80) &= 0xFFFBu;
      }
      break;
    case 0xA:
      if ( ++*(_DWORD *)(a1 + 100) > 4 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 1 )
        *(_DWORD *)(a1 + 104) = 0;
      if ( !*(_DWORD *)(a1 + 76) && *(_DWORD *)(a1 + 4) & 1 )
        *(_DWORD *)(a1 + 76) = 2;
      if ( *(_DWORD *)(a1 + 76) == 2 && *(_DWORD *)(a1 + 4) & 4 )
        *(_DWORD *)(a1 + 76) = 0;
      if ( *(_DWORD *)(a1 + 76) )
        *(_DWORD *)(a1 + 8) += 256;
      else
        *(_DWORD *)(a1 + 8) -= 256;
      if ( Count_Weapon_Shot_Occurences(6) )
      {
        *(_DWORD *)(a1 + 116) = 20;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 2;
        *(_WORD *)(a1 + 80) &= 0xFFDFu;
        *(_WORD *)(a1 + 80) |= 4u;
      }
      break;
    case 0x14:
      if ( ++*(_DWORD *)(a1 + 120) > 100 )
      {
        *(_DWORD *)(a1 + 116) = 10;
        *(_DWORD *)(a1 + 104) = 0;
        *(_DWORD *)(a1 + 100) = 0;
        *(_WORD *)(a1 + 80) |= 0x20u;
        *(_WORD *)(a1 + 80) &= 0xFFFBu;
      }
      break;
    default:
      break;
  }
  *(_DWORD *)(a1 + 20) += 64;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 76) )
  {
    v3 = &v4 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v3;
    *(_DWORD *)(result + 4) = v3[1];
    *(_DWORD *)(result + 8) = v3[2];
    *(_DWORD *)(result + 12) = v3[3];
  }
  else
  {
    v1 = &v16 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v1;
    *(_DWORD *)(result + 4) = v1[1];
    *(_DWORD *)(result + 8) = v1[2];
    *(_DWORD *)(result + 12) = v1[3];
  }
  return result;
}

//----- (00441EC0) --------------------------------------------------------
int __cdecl NPC135(int a1)
{
  int Y_Velocity; // ST24_4@30
  int *v2; // eax@44
  int v3; // ecx@44
  int result; // eax@44
  int *v5; // eax@45
  int v6; // ecx@45
  int v7; // [sp+8h] [bp-48h]@1
  int v8; // [sp+Ch] [bp-44h]@1
  int v9; // [sp+10h] [bp-40h]@1
  int v10; // [sp+14h] [bp-3Ch]@1
  int v11; // [sp+18h] [bp-38h]@1
  int v12; // [sp+1Ch] [bp-34h]@1
  int v13; // [sp+20h] [bp-30h]@1
  int v14; // [sp+24h] [bp-2Ch]@1
  int X_Velocity; // [sp+28h] [bp-28h]@30
  int v16; // [sp+2Ch] [bp-24h]@1
  int v17; // [sp+30h] [bp-20h]@1
  int v18; // [sp+34h] [bp-1Ch]@1
  int v19; // [sp+38h] [bp-18h]@1
  int v20; // [sp+3Ch] [bp-14h]@1
  int v21; // [sp+40h] [bp-10h]@1
  int v22; // [sp+44h] [bp-Ch]@1
  int v23; // [sp+48h] [bp-8h]@1
  unsigned __int8 v24; // [sp+4Fh] [bp-1h]@30

  v16 = 256;
  v17 = 32;
  v18 = 288;
  v19 = 64;
  v20 = 288;
  v21 = 32;
  v22 = 320;
  v23 = 64;
  v7 = 256;
  v8 = 64;
  v9 = 288;
  v10 = 96;
  v11 = 288;
  v12 = 64;
  v13 = 320;
  v14 = 96;
  if ( Quote_X_Position < *(_DWORD *)(a1 + 8) - 180224
    || Quote_X_Position > *(_DWORD *)(a1 + 8) + 180224
    || Quote_Y_Position < *(_DWORD *)(a1 + 12) - 81920
    || Quote_Y_Position > *(_DWORD *)(a1 + 12) + 0x8000 )
  {
    *(_DWORD *)(a1 + 116) = 0;
  }
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 16) = 0;
      goto LABEL_8;
    case 1:
LABEL_8:
      if ( Quote_X_Position > *(_DWORD *)(a1 + 8) - 163840
        && Quote_X_Position < *(_DWORD *)(a1 + 8) + 163840
        && Quote_Y_Position > *(_DWORD *)(a1 + 12) - 81920
        && Quote_Y_Position < *(_DWORD *)(a1 + 12) + 0x8000 )
      {
        *(_DWORD *)(a1 + 116) = 10;
      }
      if ( *(_DWORD *)(a1 + 4) & 8 )
        *(_DWORD *)(a1 + 104) = 0;
      break;
    case 0xA:
      *(_DWORD *)(a1 + 16) = 0;
      *(_DWORD *)(a1 + 116) = 11;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 104) = 0;
      goto LABEL_17;
    case 0xB:
LABEL_17:
      if ( ++*(_DWORD *)(a1 + 120) >= 5 && *(_DWORD *)(a1 + 4) & 8 )
      {
        *(_DWORD *)(a1 + 116) = 20;
        *(_DWORD *)(a1 + 104) = 1;
        *(_DWORD *)(a1 + 108) = 0;
        *(_DWORD *)(a1 + 20) = -512 * RNG_Range(1, 3);
        if ( *(_BYTE *)(a1 + 156) )
        {
          if ( *(_DWORD *)(a1 + 8) >= Quote_X_Position )
            *(_DWORD *)(a1 + 16) += 256;
          else
            *(_DWORD *)(a1 + 16) -= 256;
        }
        else if ( *(_DWORD *)(a1 + 8) >= Quote_X_Position )
        {
          *(_DWORD *)(a1 + 16) -= 256;
        }
        else
        {
          *(_DWORD *)(a1 + 16) += 256;
        }
      }
      break;
    case 0x14:
      if ( *(_DWORD *)(a1 + 20) > 0 && !*(_DWORD *)(a1 + 108) )
      {
        ++*(_DWORD *)(a1 + 108);
        v24 = Angle_Calculator(*(_DWORD *)(a1 + 8) - Quote_X_Position, *(_DWORD *)(a1 + 12) + 2048 - Quote_Y_Position);
        Y_Velocity = 2 * SIN_function(v24);
        X_Velocity = 2 * COS_function(v24);
        NPC_Create(50, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), X_Velocity, Y_Velocity, 0, 0, 384);
        Play_Sound_Effect(39, 1);
      }
      if ( *(_DWORD *)(a1 + 4) & 8 )
      {
        *(_DWORD *)(a1 + 116) = 10;
        *(_DWORD *)(a1 + 104) = 0;
      }
      break;
    default:
      break;
  }
  if ( *(_DWORD *)(a1 + 116) >= 10 )
  {
    if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
      *(_DWORD *)(a1 + 76) = 2;
    else
      *(_DWORD *)(a1 + 76) = 0;
  }
  *(_DWORD *)(a1 + 20) += 51;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  if ( *(_DWORD *)(a1 + 16) > 1535 )
    *(_DWORD *)(a1 + 16) = 1535;
  if ( *(_DWORD *)(a1 + 16) < -1535 )
    *(_DWORD *)(a1 + 16) = -1535;
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  if ( *(_DWORD *)(a1 + 76) )
  {
    v5 = &v7 + 4 * *(_DWORD *)(a1 + 104);
    v6 = a1 + 84;
    *(_DWORD *)v6 = *v5;
    *(_DWORD *)(v6 + 4) = v5[1];
    *(_DWORD *)(v6 + 8) = v5[2];
    result = v5[3];
    *(_DWORD *)(v6 + 12) = result;
  }
  else
  {
    v2 = &v16 + 4 * *(_DWORD *)(a1 + 104);
    v3 = a1 + 84;
    *(_DWORD *)v3 = *v2;
    *(_DWORD *)(v3 + 4) = v2[1];
    *(_DWORD *)(v3 + 8) = v2[2];
    result = v2[3];
    *(_DWORD *)(v3 + 12) = result;
  }
  return result;
}

//----- (00442340) --------------------------------------------------------
int __cdecl NPC136(int a1)
{
  int *v1; // edx@15
  int result; // eax@15
  int *v3; // ecx@16
  int v4; // edx@16
  int v5; // [sp+0h] [bp-44h]@1
  int v6; // [sp+4h] [bp-40h]@1
  int v7; // [sp+8h] [bp-3Ch]@1
  int v8; // [sp+Ch] [bp-38h]@1
  int v9; // [sp+10h] [bp-34h]@1
  int v10; // [sp+14h] [bp-30h]@1
  int v11; // [sp+18h] [bp-2Ch]@1
  int v12; // [sp+1Ch] [bp-28h]@1
  int v13; // [sp+20h] [bp-24h]@1
  int v14; // [sp+24h] [bp-20h]@1
  int v15; // [sp+28h] [bp-1Ch]@1
  int v16; // [sp+2Ch] [bp-18h]@1
  int v17; // [sp+30h] [bp-14h]@1
  int v18; // [sp+34h] [bp-10h]@1
  int v19; // [sp+38h] [bp-Ch]@1
  int v20; // [sp+3Ch] [bp-8h]@1
  int v21; // [sp+40h] [bp-4h]@1

  v14 = 48;
  v15 = 144;
  v16 = 64;
  v17 = 160;
  v18 = 64;
  v19 = 144;
  v20 = 80;
  v21 = 160;
  v6 = 48;
  v7 = 160;
  v8 = 64;
  v9 = 176;
  v10 = 64;
  v11 = 160;
  v12 = 80;
  v13 = 176;
  v5 = *(_DWORD *)(a1 + 116);
  if ( v5 )
  {
    if ( v5 != 1 )
    {
      if ( v5 == 2 && ++*(_DWORD *)(a1 + 120) > 8 )
      {
        *(_DWORD *)(a1 + 116) = 1;
        *(_DWORD *)(a1 + 104) = 0;
      }
      goto LABEL_11;
    }
  }
  else
  {
    *(_WORD *)(a1 + 80) &= 0xDFFFu;
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 104) = 0;
    *(_DWORD *)(a1 + 100) = 0;
  }
  if ( RNG_Range(0, 120) == 10 )
  {
    *(_DWORD *)(a1 + 116) = 2;
    *(_DWORD *)(a1 + 120) = 0;
    *(_DWORD *)(a1 + 104) = 1;
  }
LABEL_11:
  if ( *(_DWORD *)&Quote_Direction_Faced )
    *(_DWORD *)(a1 + 76) = 2;
  else
    *(_DWORD *)(a1 + 76) = 0;
  *(_DWORD *)(a1 + 12) = Quote_Y_Position - 5120;
  if ( *(_DWORD *)(a1 + 76) )
  {
    *(_DWORD *)(a1 + 8) = Quote_X_Position - 2048;
    v3 = &v6 + 4 * *(_DWORD *)(a1 + 104);
    v4 = a1 + 84;
    *(_DWORD *)v4 = *v3;
    *(_DWORD *)(v4 + 4) = v3[1];
    result = v3[2];
    *(_DWORD *)(v4 + 8) = result;
    *(_DWORD *)(v4 + 12) = v3[3];
  }
  else
  {
    *(_DWORD *)(a1 + 8) = Quote_X_Position + 2048;
    v1 = &v14 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v1;
    *(_DWORD *)(result + 4) = v1[1];
    *(_DWORD *)(result + 8) = v1[2];
    *(_DWORD *)(result + 12) = v1[3];
  }
  if ( Quote_Animation_Frame % 2 )
  {
    result = a1;
    ++*(_DWORD *)(a1 + 88);
  }
  return result;
}
// 49E678: using guessed type int Quote_Animation_Frame;

//----- (00442540) --------------------------------------------------------
int __cdecl NPC137(int a1)
{
  int result; // eax@1

  result = a1 + 84;
  *(_DWORD *)result = 96;
  *(_DWORD *)(result + 4) = 136;
  *(_DWORD *)(result + 8) = 128;
  *(_DWORD *)(result + 12) = 188;
  return result;
}

//----- (00442590) --------------------------------------------------------
int __cdecl NPC138(int a1)
{
  int result; // eax@1
  int v2; // ecx@6
  int v3; // ecx@7
  int v4; // ecx@13
  int v5; // eax@14
  int v6; // [sp+0h] [bp-24h]@1

  result = a1;
  v6 = *(_DWORD *)(a1 + 116);
  if ( v6 )
  {
    if ( v6 == 10 )
    {
      *(_DWORD *)(a1 + 116) = 11;
      *(_DWORD *)(a1 + 104) = 1;
      *(_DWORD *)(a1 + 120) = 0;
      *(_WORD *)(a1 + 80) |= 8u;
    }
    else if ( v6 != 11 )
    {
      return result;
    }
    if ( !(++*(_DWORD *)(a1 + 120) % 8) )
      Play_Sound_Effect(26, 1);
    if ( *(_DWORD *)(a1 + 76) )
    {
      *(_DWORD *)(a1 + 8) = *(_DWORD *)(a1 + 32) + (*(_DWORD *)(a1 + 120) / 8 << 9);
      v5 = a1 + 84;
      *(_DWORD *)v5 = 112;
      *(_DWORD *)(v5 + 4) = 112;
      *(_DWORD *)(v5 + 8) = 128;
      *(_DWORD *)(v5 + 12) = 136;
      result = a1;
      *(_DWORD *)(a1 + 92) -= *(_DWORD *)(a1 + 120) / 8;
    }
    else
    {
      v4 = a1 + 84;
      *(_DWORD *)v4 = 96;
      *(_DWORD *)(v4 + 4) = 112;
      *(_DWORD *)(v4 + 8) = 112;
      *(_DWORD *)(v4 + 12) = 136;
      result = *(_DWORD *)(a1 + 84) + *(_DWORD *)(a1 + 120) / 8;
      *(_DWORD *)(a1 + 84) = result;
    }
    if ( *(_DWORD *)(a1 + 120) == 104 )
      *(_BYTE *)a1 = 0;
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 1;
    if ( *(_DWORD *)(a1 + 76) )
    {
      v3 = a1 + 84;
      *(_DWORD *)v3 = 112;
      *(_DWORD *)(v3 + 4) = 112;
      *(_DWORD *)(v3 + 8) = 128;
      *(_DWORD *)(v3 + 12) = 136;
      *(_DWORD *)(a1 + 8) -= 4096;
    }
    else
    {
      v2 = a1 + 84;
      *(_DWORD *)v2 = 96;
      *(_DWORD *)(v2 + 4) = 112;
      *(_DWORD *)(v2 + 8) = 112;
      *(_DWORD *)(v2 + 12) = 136;
      *(_DWORD *)(a1 + 8) += 4096;
    }
    result = *(_DWORD *)(a1 + 8);
    *(_DWORD *)(a1 + 32) = result;
  }
  return result;
}

//----- (00442790) --------------------------------------------------------
int __cdecl NPC139(int a1)
{
  int *v1; // eax@32
  int v2; // ecx@32
  int result; // eax@32
  int *v4; // eax@33
  int v5; // ecx@33
  int v6; // [sp+4h] [bp-60h]@1
  int v7; // [sp+8h] [bp-5Ch]@1
  int v8; // [sp+Ch] [bp-58h]@1
  int v9; // [sp+10h] [bp-54h]@1
  int v10; // [sp+14h] [bp-50h]@1
  int v11; // [sp+18h] [bp-4Ch]@1
  int v12; // [sp+1Ch] [bp-48h]@1
  int v13; // [sp+20h] [bp-44h]@1
  int v14; // [sp+24h] [bp-40h]@1
  int v15; // [sp+28h] [bp-3Ch]@1
  int v16; // [sp+2Ch] [bp-38h]@1
  int v17; // [sp+30h] [bp-34h]@1
  int v18; // [sp+34h] [bp-30h]@1
  int v19; // [sp+38h] [bp-2Ch]@1
  int v20; // [sp+3Ch] [bp-28h]@1
  int v21; // [sp+40h] [bp-24h]@1
  int v22; // [sp+44h] [bp-20h]@1
  int v23; // [sp+48h] [bp-1Ch]@1
  int v24; // [sp+4Ch] [bp-18h]@1
  int v25; // [sp+50h] [bp-14h]@1
  int v26; // [sp+54h] [bp-10h]@1
  int v27; // [sp+58h] [bp-Ch]@1
  int v28; // [sp+5Ch] [bp-8h]@1
  int v29; // [sp+60h] [bp-4h]@1

  v18 = 0;
  v19 = 128;
  v20 = 24;
  v21 = 160;
  v22 = 24;
  v23 = 128;
  v24 = 48;
  v25 = 160;
  v26 = 48;
  v27 = 128;
  v28 = 72;
  v29 = 160;
  v6 = 0;
  v7 = 160;
  v8 = 24;
  v9 = 192;
  v10 = 24;
  v11 = 160;
  v12 = 48;
  v13 = 192;
  v14 = 48;
  v15 = 160;
  v16 = 72;
  v17 = 192;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 16) = 0;
      *(_DWORD *)(a1 + 20) = 0;
      *(_DWORD *)(a1 + 12) -= 4096;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( *(_DWORD *)(a1 + 4) & 8 )
        *(_DWORD *)(a1 + 104) = 0;
      else
        *(_DWORD *)(a1 + 104) = 2;
      *(_DWORD *)(a1 + 20) += 64;
      break;
    case 0xA:
      *(_DWORD *)(a1 + 116) = 11;
      *(_DWORD *)(a1 + 104) = 1;
      *(_DWORD *)(a1 + 100) = 0;
      *(_DWORD *)(a1 + 108) = 0;
      goto LABEL_8;
    case 0xB:
LABEL_8:
      if ( ++*(_DWORD *)(a1 + 100) > 6 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 1 )
      {
        *(_DWORD *)(a1 + 104) = 0;
        ++*(_DWORD *)(a1 + 108);
      }
      if ( *(_DWORD *)(a1 + 108) > 8 )
      {
        *(_DWORD *)(a1 + 104) = 0;
        *(_DWORD *)(a1 + 116) = 1;
      }
      break;
    case 0x14:
      *(_DWORD *)(a1 + 116) = 21;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 104) = 2;
      *(_DWORD *)(a1 + 36) = *(_DWORD *)(a1 + 12) - 0x4000;
      goto LABEL_16;
    case 0x15:
LABEL_16:
      if ( *(_DWORD *)(a1 + 12) >= *(_DWORD *)(a1 + 36) )
        *(_DWORD *)(a1 + 20) -= 32;
      else
        *(_DWORD *)(a1 + 20) += 32;
      if ( *(_DWORD *)(a1 + 20) > 512 )
        *(_DWORD *)(a1 + 20) = 512;
      if ( *(_DWORD *)(a1 + 20) < -512 )
        *(_DWORD *)(a1 + 20) = -512;
      break;
    case 0x1E:
      *(_DWORD *)(a1 + 116) = 31;
      *(_DWORD *)(a1 + 16) = 0;
      *(_DWORD *)(a1 + 20) = 0;
      *(_DWORD *)(a1 + 120) = 2 * (*(_DWORD *)(a1 + 96) - *(_DWORD *)(a1 + 88));
      Play_Sound_Effect(29, 1);
      goto LABEL_25;
    case 0x1F:
LABEL_25:
      --*(_DWORD *)(a1 + 120);
      *(_DWORD *)(a1 + 104) = 0;
      if ( !*(_DWORD *)(a1 + 120) )
        *(_BYTE *)a1 = 0;
      break;
    case 0x28:
      *(_DWORD *)(a1 + 116) = 41;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 16) = 0;
      *(_DWORD *)(a1 + 20) = 0;
      Play_Sound_Effect(29, 1);
      goto LABEL_29;
    case 0x29:
LABEL_29:
      *(_DWORD *)(a1 + 104) = 2;
      if ( ++*(_DWORD *)(a1 + 120) >= 64 )
        *(_DWORD *)(a1 + 116) = 20;
      break;
    default:
      break;
  }
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v6 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    *(_DWORD *)(v5 + 8) = v4[2];
    result = v4[3];
    *(_DWORD *)(v5 + 12) = result;
  }
  else
  {
    v1 = &v18 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    *(_DWORD *)(v2 + 8) = v1[2];
    result = v1[3];
    *(_DWORD *)(v2 + 12) = result;
  }
  if ( *(_DWORD *)(a1 + 116) == 31 || *(_DWORD *)(a1 + 116) == 41 )
  {
    *(_DWORD *)(a1 + 96) = *(_DWORD *)(a1 + 88) + *(_DWORD *)(a1 + 120) / 2;
    result = *(_DWORD *)(a1 + 120) / 2 % 2;
    if ( result )
    {
      result = a1;
      ++*(_DWORD *)(a1 + 84);
    }
  }
  return result;
}

//----- (00442BF0) --------------------------------------------------------
int __cdecl NPC140(int a1)
{
  int v1; // ST10_4@67
  int v2; // ST0C_4@67
  int v3; // ST08_4@67
  int v4; // eax@67
  int v5; // ST10_4@97
  int v6; // ST0C_4@97
  int v7; // ST08_4@97
  int v8; // eax@97
  int v9; // ST10_4@102
  int v10; // ST0C_4@102
  int v11; // ST08_4@102
  int v12; // eax@102
  int *v13; // edx@108
  int result; // eax@108
  int *v15; // edx@109
  int v16; // [sp+4h] [bp-1C8h]@1
  int v17; // [sp+8h] [bp-1C4h]@1
  int v18; // [sp+Ch] [bp-1C0h]@1
  int v19; // [sp+10h] [bp-1BCh]@1
  int v20; // [sp+14h] [bp-1B8h]@1
  int v21; // [sp+18h] [bp-1B4h]@1
  int v22; // [sp+1Ch] [bp-1B0h]@1
  int v23; // [sp+20h] [bp-1ACh]@1
  int v24; // [sp+24h] [bp-1A8h]@1
  int v25; // [sp+28h] [bp-1A4h]@1
  int v26; // [sp+2Ch] [bp-1A0h]@1
  int v27; // [sp+30h] [bp-19Ch]@1
  int v28; // [sp+34h] [bp-198h]@1
  int v29; // [sp+38h] [bp-194h]@1
  int v30; // [sp+3Ch] [bp-190h]@1
  int v31; // [sp+40h] [bp-18Ch]@1
  int v32; // [sp+44h] [bp-188h]@1
  int v33; // [sp+48h] [bp-184h]@1
  int v34; // [sp+4Ch] [bp-180h]@1
  int v35; // [sp+50h] [bp-17Ch]@1
  int v36; // [sp+54h] [bp-178h]@1
  int v37; // [sp+58h] [bp-174h]@1
  int v38; // [sp+5Ch] [bp-170h]@1
  int v39; // [sp+60h] [bp-16Ch]@1
  int v40; // [sp+64h] [bp-168h]@1
  int v41; // [sp+68h] [bp-164h]@1
  int v42; // [sp+6Ch] [bp-160h]@1
  int v43; // [sp+70h] [bp-15Ch]@1
  int v44; // [sp+74h] [bp-158h]@1
  int v45; // [sp+78h] [bp-154h]@1
  int v46; // [sp+7Ch] [bp-150h]@1
  int v47; // [sp+80h] [bp-14Ch]@1
  int v48; // [sp+84h] [bp-148h]@1
  int v49; // [sp+88h] [bp-144h]@1
  int v50; // [sp+8Ch] [bp-140h]@1
  int v51; // [sp+90h] [bp-13Ch]@1
  int v52; // [sp+94h] [bp-138h]@1
  int v53; // [sp+98h] [bp-134h]@1
  int v54; // [sp+9Ch] [bp-130h]@1
  int v55; // [sp+A0h] [bp-12Ch]@1
  int v56; // [sp+A4h] [bp-128h]@1
  int v57; // [sp+A8h] [bp-124h]@1
  int v58; // [sp+ACh] [bp-120h]@1
  int v59; // [sp+B0h] [bp-11Ch]@1
  int v60; // [sp+B4h] [bp-118h]@1
  int v61; // [sp+B8h] [bp-114h]@1
  int v62; // [sp+BCh] [bp-110h]@1
  int v63; // [sp+C0h] [bp-10Ch]@1
  int v64; // [sp+C4h] [bp-108h]@1
  int v65; // [sp+C8h] [bp-104h]@1
  int v66; // [sp+CCh] [bp-100h]@1
  int v67; // [sp+D0h] [bp-FCh]@1
  int v68; // [sp+D4h] [bp-F8h]@1
  int v69; // [sp+D8h] [bp-F4h]@1
  int v70; // [sp+DCh] [bp-F0h]@1
  int v71; // [sp+E0h] [bp-ECh]@1
  int i; // [sp+E8h] [bp-E4h]@65
  int v73; // [sp+ECh] [bp-E0h]@1
  int v74; // [sp+F0h] [bp-DCh]@1
  int v75; // [sp+F4h] [bp-D8h]@1
  int v76; // [sp+F8h] [bp-D4h]@1
  int v77; // [sp+FCh] [bp-D0h]@1
  int v78; // [sp+100h] [bp-CCh]@1
  int v79; // [sp+104h] [bp-C8h]@1
  int v80; // [sp+108h] [bp-C4h]@1
  int v81; // [sp+10Ch] [bp-C0h]@1
  int v82; // [sp+110h] [bp-BCh]@1
  int v83; // [sp+114h] [bp-B8h]@1
  int v84; // [sp+118h] [bp-B4h]@1
  int v85; // [sp+11Ch] [bp-B0h]@1
  int v86; // [sp+120h] [bp-ACh]@1
  int v87; // [sp+124h] [bp-A8h]@1
  int v88; // [sp+128h] [bp-A4h]@1
  int v89; // [sp+12Ch] [bp-A0h]@1
  int v90; // [sp+130h] [bp-9Ch]@1
  int v91; // [sp+134h] [bp-98h]@1
  int v92; // [sp+138h] [bp-94h]@1
  int v93; // [sp+13Ch] [bp-90h]@1
  int v94; // [sp+140h] [bp-8Ch]@1
  int v95; // [sp+144h] [bp-88h]@1
  int v96; // [sp+148h] [bp-84h]@1
  int v97; // [sp+14Ch] [bp-80h]@1
  int v98; // [sp+150h] [bp-7Ch]@1
  int v99; // [sp+154h] [bp-78h]@1
  int v100; // [sp+158h] [bp-74h]@1
  int v101; // [sp+15Ch] [bp-70h]@1
  int v102; // [sp+160h] [bp-6Ch]@1
  int v103; // [sp+164h] [bp-68h]@1
  int v104; // [sp+168h] [bp-64h]@1
  int v105; // [sp+16Ch] [bp-60h]@1
  int v106; // [sp+170h] [bp-5Ch]@1
  int v107; // [sp+174h] [bp-58h]@1
  int v108; // [sp+178h] [bp-54h]@1
  int v109; // [sp+17Ch] [bp-50h]@1
  int v110; // [sp+180h] [bp-4Ch]@1
  int v111; // [sp+184h] [bp-48h]@1
  int v112; // [sp+188h] [bp-44h]@1
  int v113; // [sp+18Ch] [bp-40h]@1
  int v114; // [sp+190h] [bp-3Ch]@1
  int v115; // [sp+194h] [bp-38h]@1
  int v116; // [sp+198h] [bp-34h]@1
  int v117; // [sp+19Ch] [bp-30h]@1
  int v118; // [sp+1A0h] [bp-2Ch]@1
  int v119; // [sp+1A4h] [bp-28h]@1
  int v120; // [sp+1A8h] [bp-24h]@1
  int v121; // [sp+1ACh] [bp-20h]@1
  int v122; // [sp+1B0h] [bp-1Ch]@1
  int v123; // [sp+1B4h] [bp-18h]@1
  int v124; // [sp+1B8h] [bp-14h]@1
  int v125; // [sp+1BCh] [bp-10h]@1
  int v126; // [sp+1C0h] [bp-Ch]@1
  int v127; // [sp+1C4h] [bp-8h]@1
  int v128; // [sp+1C8h] [bp-4h]@1

  v73 = 0;
  v74 = 0;
  v75 = 32;
  v76 = 32;
  v77 = 32;
  v78 = 0;
  v79 = 64;
  v80 = 32;
  v81 = 64;
  v82 = 0;
  v83 = 96;
  v84 = 32;
  v85 = 96;
  v86 = 0;
  v87 = 128;
  v88 = 32;
  v89 = 128;
  v90 = 0;
  v91 = 160;
  v92 = 32;
  v93 = 160;
  v94 = 0;
  v95 = 192;
  v96 = 32;
  v97 = 192;
  v98 = 0;
  v99 = 224;
  v100 = 32;
  v101 = 224;
  v102 = 0;
  v103 = 256;
  v104 = 32;
  v105 = 0;
  v106 = 64;
  v107 = 32;
  v108 = 96;
  v109 = 32;
  v110 = 64;
  v111 = 64;
  v112 = 96;
  v113 = 64;
  v114 = 64;
  v115 = 96;
  v116 = 96;
  v117 = 96;
  v118 = 64;
  v119 = 128;
  v120 = 96;
  v121 = 128;
  v122 = 64;
  v123 = 160;
  v124 = 96;
  v125 = 0;
  v126 = 0;
  v127 = 0;
  v128 = 0;
  v16 = 0;
  v17 = 32;
  v18 = 32;
  v19 = 64;
  v20 = 32;
  v21 = 32;
  v22 = 64;
  v23 = 64;
  v24 = 64;
  v25 = 32;
  v26 = 96;
  v27 = 64;
  v28 = 96;
  v29 = 32;
  v30 = 128;
  v31 = 64;
  v32 = 128;
  v33 = 32;
  v34 = 160;
  v35 = 64;
  v36 = 160;
  v37 = 32;
  v38 = 192;
  v39 = 64;
  v40 = 192;
  v41 = 32;
  v42 = 224;
  v43 = 64;
  v44 = 224;
  v45 = 32;
  v46 = 256;
  v47 = 64;
  v48 = 0;
  v49 = 96;
  v50 = 32;
  v51 = 128;
  v52 = 32;
  v53 = 96;
  v54 = 64;
  v55 = 128;
  v56 = 64;
  v57 = 96;
  v58 = 96;
  v59 = 128;
  v60 = 96;
  v61 = 96;
  v62 = 128;
  v63 = 128;
  v64 = 128;
  v65 = 96;
  v66 = 160;
  v67 = 128;
  v68 = 0;
  v69 = 0;
  v70 = 0;
  v71 = 0;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 104) = 9;
      *(_DWORD *)(a1 + 120) = 0;
      *(_WORD *)(a1 + 80) &= 0xDFFFu;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( ++*(_DWORD *)(a1 + 120) > 50 )
      {
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 8;
      }
      break;
    case 2:
      if ( ++*(_DWORD *)(a1 + 104) > 10 )
        *(_DWORD *)(a1 + 104) = 9;
      if ( ++*(_DWORD *)(a1 + 120) > 50 )
      {
        *(_DWORD *)(a1 + 116) = 3;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 0;
      }
      break;
    case 3:
      if ( ++*(_DWORD *)(a1 + 120) > 50 )
      {
        *(_DWORD *)(a1 + 116) = 10;
        *(_WORD *)(a1 + 80) |= 0x20u;
      }
      break;
    case 0xA:
      *(_WORD *)(a1 + 80) = *(_WORD *)(a1 + 80);
      *(_DWORD *)(a1 + 116) = 11;
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 100) = 0;
      *(_DWORD *)(a1 + 120) = RNG_Range(20, 130);
      *(_DWORD *)(a1 + 16) = 0;
      goto LABEL_15;
    case 0xB:
LABEL_15:
      if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
        *(_DWORD *)(a1 + 76) = 2;
      else
        *(_DWORD *)(a1 + 76) = 0;
      if ( ++*(_DWORD *)(a1 + 100) > 4 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 1 )
        *(_DWORD *)(a1 + 104) = 0;
      if ( Count_Weapon_Shot_Occurences(6) || Count_Weapon_Shot_Occurences(3) > 3 )
        *(_DWORD *)(a1 + 116) = 20;
      if ( *(_DWORD *)(a1 + 120) )
      {
        --*(_DWORD *)(a1 + 120);
      }
      else if ( RNG_Range(0, 99) % 2 )
      {
        *(_DWORD *)(a1 + 116) = 20;
      }
      else
      {
        *(_DWORD *)(a1 + 116) = 50;
      }
      break;
    case 0x14:
      *(_DWORD *)(a1 + 116) = 21;
      *(_DWORD *)(a1 + 104) = 2;
      *(_DWORD *)(a1 + 120) = 0;
      goto LABEL_32;
    case 0x15:
LABEL_32:
      if ( ++*(_DWORD *)(a1 + 120) > 10 )
      {
        *(_DWORD *)(a1 + 116) = 22;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 3;
        *(_DWORD *)(a1 + 20) = -1535;
        if ( *(_DWORD *)(a1 + 76) )
          *(_DWORD *)(a1 + 16) = 512;
        else
          *(_DWORD *)(a1 + 16) = -512;
      }
      break;
    case 0x16:
      if ( ++*(_DWORD *)(a1 + 120) > 10 )
      {
        *(_DWORD *)(a1 + 116) = 23;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 6;
        NPC_Create(141, 0, 0, 0, 0, 0, a1, 0);
      }
      break;
    case 0x17:
      if ( ++*(_DWORD *)(a1 + 120) > 30 )
      {
        *(_DWORD *)(a1 + 116) = 24;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 7;
      }
      if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
        *(_DWORD *)(a1 + 76) = 2;
      else
        *(_DWORD *)(a1 + 76) = 0;
      break;
    case 0x18:
      if ( ++*(_DWORD *)(a1 + 120) > 3 )
      {
        *(_DWORD *)(a1 + 116) = 25;
        *(_DWORD *)(a1 + 104) = 3;
      }
      break;
    case 0x19:
      if ( *(_DWORD *)(a1 + 4) & 8 )
      {
        *(_DWORD *)(a1 + 116) = 26;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 2;
        Play_Sound_Effect(26, 1);
        sub_40F310(20);
      }
      break;
    case 0x1A:
      *(_DWORD *)(a1 + 16) = 8 * *(_DWORD *)(a1 + 16) / 9;
      if ( ++*(_DWORD *)(a1 + 120) > 20 )
      {
        *(_DWORD *)(a1 + 116) = 10;
        *(_DWORD *)(a1 + 104) = 0;
      }
      break;
    case 0x32:
      *(_DWORD *)(a1 + 116) = 51;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 104) = 4;
      NPC_Create(141, 0, 0, 0, 0, 0, a1, 0);
      goto LABEL_56;
    case 0x33:
LABEL_56:
      if ( ++*(_DWORD *)(a1 + 120) > 30 )
      {
        *(_DWORD *)(a1 + 116) = 52;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 5;
      }
      if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
        *(_DWORD *)(a1 + 76) = 2;
      else
        *(_DWORD *)(a1 + 76) = 0;
      break;
    case 0x34:
      if ( ++*(_DWORD *)(a1 + 120) > 3 )
      {
        *(_DWORD *)(a1 + 116) = 10;
        *(_DWORD *)(a1 + 104) = 0;
      }
      break;
    case 0x64:
      *(_DWORD *)(a1 + 104) = 3;
      *(_DWORD *)(a1 + 116) = 101;
      *(_WORD *)(a1 + 80) &= 0xFFDFu;
      *(_DWORD *)(a1 + 164) = 0;
      for ( i = 0; i < 8; ++i )
      {
        v1 = RNG_Range(-1536, 0);
        v2 = RNG_Range(-341, 341);
        v3 = *(_DWORD *)(a1 + 12) + (RNG_Range(-12, 12) << 9);
        v4 = RNG_Range(-12, 12);
        NPC_Create(4, *(_DWORD *)(a1 + 8) + (v4 << 9), v3, v2, v1, 0, 0, 256);
      }
      break;
    case 0x65:
      if ( *(_DWORD *)(a1 + 4) & 8 )
      {
        *(_DWORD *)(a1 + 116) = 102;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 2;
        Play_Sound_Effect(26, 1);
        sub_40F310(20);
      }
      break;
    case 0x66:
      *(_DWORD *)(a1 + 16) = 8 * *(_DWORD *)(a1 + 16) / 9;
      if ( ++*(_DWORD *)(a1 + 120) > 50 )
      {
        *(_DWORD *)(a1 + 116) = 103;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 10;
      }
      break;
    case 0x67:
      if ( ++*(_DWORD *)(a1 + 120) > 50 )
      {
        *(_DWORD *)(a1 + 104) = 9;
        *(_DWORD *)(a1 + 116) = 104;
        *(_DWORD *)(a1 + 120) = 0;
      }
      break;
    case 0x68:
      if ( ++*(_DWORD *)(a1 + 104) > 10 )
        *(_DWORD *)(a1 + 104) = 9;
      if ( ++*(_DWORD *)(a1 + 120) > 100 )
      {
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 9;
        *(_DWORD *)(a1 + 116) = 105;
      }
      break;
    case 0x69:
      if ( ++*(_DWORD *)(a1 + 120) > 50 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        *(_DWORD *)(a1 + 116) = 106;
        *(_DWORD *)(a1 + 104) = 11;
      }
      break;
    case 0x6A:
      if ( ++*(_DWORD *)(a1 + 100) > 50 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 12 )
        *(_DWORD *)(a1 + 104) = 12;
      break;
    case 0x8C:
      *(_DWORD *)(a1 + 116) = 141;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 104) = 12;
      Play_Sound_Effect(29, 1);
      goto LABEL_92;
    case 0x8D:
LABEL_92:
      if ( ++*(_DWORD *)(a1 + 104) > 13 )
        *(_DWORD *)(a1 + 104) = 12;
      if ( ++*(_DWORD *)(a1 + 120) > 100 )
      {
        for ( i = 0; i < 4; ++i )
        {
          v5 = RNG_Range(-1536, 0);
          v6 = RNG_Range(-341, 341);
          v7 = *(_DWORD *)(a1 + 12) + (RNG_Range(-12, 12) << 9);
          v8 = RNG_Range(-12, 12);
          NPC_Create(4, *(_DWORD *)(a1 + 8) + (v8 << 9), v7, v6, v5, 0, 0, 256);
        }
        *(_BYTE *)a1 = 0;
      }
      break;
    default:
      break;
  }
  if ( *(_DWORD *)(a1 + 116) > 100 && *(_DWORD *)(a1 + 116) < 105 && !(*(_DWORD *)(a1 + 120) % 9) )
  {
    v9 = RNG_Range(-1536, 0);
    v10 = RNG_Range(-341, 341);
    v11 = *(_DWORD *)(a1 + 12) + (RNG_Range(-12, 12) << 9);
    v12 = RNG_Range(-12, 12);
    NPC_Create(4, *(_DWORD *)(a1 + 8) + (v12 << 9), v11, v10, v9, 0, 0, 256);
  }
  *(_DWORD *)(a1 + 20) += 32;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  if ( *(_DWORD *)(a1 + 20) < -1535 )
    *(_DWORD *)(a1 + 20) = -1535;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 76) )
  {
    v15 = &v16 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v15;
    *(_DWORD *)(result + 4) = v15[1];
    *(_DWORD *)(result + 8) = v15[2];
    *(_DWORD *)(result + 12) = v15[3];
  }
  else
  {
    v13 = &v73 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v13;
    *(_DWORD *)(result + 4) = v13[1];
    *(_DWORD *)(result + 8) = v13[2];
    *(_DWORD *)(result + 12) = v13[3];
  }
  return result;
}

//----- (00443AC0) --------------------------------------------------------
int __cdecl NPC141(int a1)
{
  int v1; // ST10_4@16
  int v2; // eax@16
  int v3; // ST10_4@22
  int v4; // eax@22
  int *v5; // ecx@26
  int v6; // edx@26
  int result; // eax@26
  signed int i; // [sp+4h] [bp-28h]@14
  signed int j; // [sp+4h] [bp-28h]@20
  int v10; // [sp+8h] [bp-24h]@1
  int v11; // [sp+Ch] [bp-20h]@1
  int v12; // [sp+10h] [bp-1Ch]@1
  int v13; // [sp+14h] [bp-18h]@1
  int v14; // [sp+18h] [bp-14h]@1
  int v15; // [sp+1Ch] [bp-10h]@1
  int v16; // [sp+20h] [bp-Ch]@1
  int v17; // [sp+24h] [bp-8h]@1
  unsigned __int8 v18; // [sp+2Bh] [bp-1h]@11

  v10 = 288;
  v11 = 32;
  v12 = 304;
  v13 = 48;
  v14 = 304;
  v15 = 32;
  v16 = 320;
  v17 = 48;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 120) = 0;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( *(_DWORD *)(*(_DWORD *)(a1 + 168) + 76) )
        *(_DWORD *)(a1 + 8) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 8) - 5120;
      else
        *(_DWORD *)(a1 + 8) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 8) + 5120;
      *(_DWORD *)(a1 + 12) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 12) - 4096;
      if ( *(_DWORD *)(*(_DWORD *)(a1 + 168) + 116) == 24 || *(_DWORD *)(*(_DWORD *)(a1 + 168) + 116) == 52 )
      {
        *(_DWORD *)(a1 + 116) = 10;
        if ( *(_DWORD *)(*(_DWORD *)(a1 + 168) + 76) )
          *(_DWORD *)(a1 + 8) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 8) + 0x2000;
        else
          *(_DWORD *)(a1 + 8) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 8) - 0x2000;
        *(_DWORD *)(a1 + 12) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 12);
        v18 = Angle_Calculator(*(_DWORD *)(a1 + 8) - Quote_X_Position, *(_DWORD *)(a1 + 12) - Quote_Y_Position);
        *(_DWORD *)(a1 + 20) = 4 * SIN_function(v18);
        *(_DWORD *)(a1 + 16) = 4 * COS_function(v18);
        Play_Sound_Effect(39, 1);
      }
      break;
    case 0xA:
      if ( *(_DWORD *)(a1 + 4) & 0xF )
      {
        *(_DWORD *)(a1 + 116) = 20;
        *(_DWORD *)(a1 + 120) = 0;
        Create_Animated_Effect(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 2, 0);
        Play_Sound_Effect(12, 1);
        for ( i = 0; i < 4; ++i )
        {
          v1 = RNG_Range(-512, 512);
          v2 = RNG_Range(-512, 512);
          NPC_Create(4, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), v2, v1, 0, 0, 256);
        }
      }
      else
      {
        *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
        *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
      }
      break;
    case 0x14:
      *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
      *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
      if ( ++*(_DWORD *)(a1 + 120) > 4 )
      {
        for ( j = 0; j < 4; ++j )
        {
          v3 = RNG_Range(-512, 512);
          v4 = RNG_Range(-512, 512);
          NPC_Create(4, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), v4, v3, 0, 0, 256);
        }
        *(_DWORD *)(a1 + 40) = 142;
        *(_DWORD *)(a1 + 104) = 0;
        *(_DWORD *)(a1 + 116) = 20;
        *(_DWORD *)(a1 + 16) = 0;
        *(_WORD *)(a1 + 80) &= 0xFFFBu;
        *(_WORD *)(a1 + 80) |= 0x20u;
        *(_DWORD *)(a1 + 164) = 1;
      }
      break;
    default:
      break;
  }
  if ( ++*(_DWORD *)(a1 + 104) > 1 )
    *(_DWORD *)(a1 + 104) = 0;
  v5 = &v10 + 4 * *(_DWORD *)(a1 + 104);
  v6 = a1 + 84;
  *(_DWORD *)v6 = *v5;
  *(_DWORD *)(v6 + 4) = v5[1];
  result = v5[2];
  *(_DWORD *)(v6 + 8) = result;
  *(_DWORD *)(v6 + 12) = v5[3];
  return result;
}

//----- (00443EC0) --------------------------------------------------------
int __cdecl NPC142(int a1)
{
  int *v1; // edx@25
  int result; // eax@25
  int v3; // [sp+4h] [bp-50h]@1
  int v4; // [sp+8h] [bp-4Ch]@1
  int v5; // [sp+Ch] [bp-48h]@1
  int v6; // [sp+10h] [bp-44h]@1
  int v7; // [sp+14h] [bp-40h]@1
  int v8; // [sp+18h] [bp-3Ch]@1
  int v9; // [sp+1Ch] [bp-38h]@1
  int v10; // [sp+20h] [bp-34h]@1
  int v11; // [sp+24h] [bp-30h]@1
  int v12; // [sp+28h] [bp-2Ch]@1
  int v13; // [sp+2Ch] [bp-28h]@1
  int v14; // [sp+30h] [bp-24h]@1
  int v15; // [sp+34h] [bp-20h]@1
  int v16; // [sp+38h] [bp-1Ch]@1
  int v17; // [sp+3Ch] [bp-18h]@1
  int v18; // [sp+40h] [bp-14h]@1
  int v19; // [sp+44h] [bp-10h]@1
  int v20; // [sp+48h] [bp-Ch]@1
  int v21; // [sp+4Ch] [bp-8h]@1
  int v22; // [sp+50h] [bp-4h]@1

  v3 = 0;
  v4 = 128;
  v5 = 16;
  v6 = 144;
  v7 = 16;
  v8 = 128;
  v9 = 32;
  v10 = 144;
  v11 = 32;
  v12 = 128;
  v13 = 48;
  v14 = 144;
  v15 = 48;
  v16 = 128;
  v17 = 64;
  v18 = 144;
  v19 = 64;
  v20 = 128;
  v21 = 80;
  v22 = 144;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0xA:
      *(_DWORD *)(a1 + 116) = 11;
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 120) = 0;
      goto LABEL_3;
    case 0xB:
LABEL_3:
      if ( ++*(_DWORD *)(a1 + 120) > 30 )
      {
        *(_DWORD *)(a1 + 116) = 12;
        *(_DWORD *)(a1 + 104) = 1;
        *(_DWORD *)(a1 + 100) = 0;
      }
      break;
    case 0xC:
      if ( ++*(_DWORD *)(a1 + 100) > 8 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) == 3 )
      {
        *(_DWORD *)(a1 + 116) = 20;
        *(_DWORD *)(a1 + 20) = -512;
        if ( Quote_X_Position >= *(_DWORD *)(a1 + 8) )
          *(_DWORD *)(a1 + 16) = 512;
        else
          *(_DWORD *)(a1 + 16) = -512;
      }
      break;
    case 0x14:
      if ( *(_DWORD *)(a1 + 20) <= -128 )
        *(_DWORD *)(a1 + 104) = 3;
      else
        *(_DWORD *)(a1 + 104) = 4;
      if ( *(_DWORD *)(a1 + 4) & 8 )
      {
        *(_DWORD *)(a1 + 104) = 2;
        *(_DWORD *)(a1 + 116) = 21;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 16) = 0;
        Play_Sound_Effect(23, 1);
      }
      break;
    case 0x15:
      if ( ++*(_DWORD *)(a1 + 120) > 10 )
      {
        *(_DWORD *)(a1 + 116) = 10;
        *(_DWORD *)(a1 + 104) = 0;
      }
      break;
    default:
      break;
  }
  *(_DWORD *)(a1 + 20) += 64;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  if ( *(_DWORD *)(a1 + 20) < -1535 )
    *(_DWORD *)(a1 + 20) = -1535;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  v1 = &v3 + 4 * *(_DWORD *)(a1 + 104);
  result = a1 + 84;
  *(_DWORD *)result = *v1;
  *(_DWORD *)(result + 4) = v1[1];
  *(_DWORD *)(result + 8) = v1[2];
  *(_DWORD *)(result + 12) = v1[3];
  return result;
}

//----- (00444190) --------------------------------------------------------
int __cdecl NPC143(int a1)
{
  int *v1; // eax@2
  int v2; // ecx@2
  int result; // eax@2
  int *v4; // eax@3
  int v5; // ecx@3
  int v6; // [sp+0h] [bp-20h]@1
  int v7; // [sp+4h] [bp-1Ch]@1
  int v8; // [sp+8h] [bp-18h]@1
  int v9; // [sp+Ch] [bp-14h]@1
  int v10; // [sp+10h] [bp-10h]@1
  int v11; // [sp+14h] [bp-Ch]@1
  int v12; // [sp+18h] [bp-8h]@1
  int v13; // [sp+1Ch] [bp-4h]@1

  v10 = 208;
  v11 = 32;
  v12 = 224;
  v13 = 48;
  v6 = 208;
  v7 = 48;
  v8 = 224;
  v9 = 64;
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v6 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    *(_DWORD *)(v5 + 8) = v4[2];
    result = v4[3];
    *(_DWORD *)(v5 + 12) = result;
  }
  else
  {
    v1 = &v10 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    *(_DWORD *)(v2 + 8) = v1[2];
    result = v1[3];
    *(_DWORD *)(v2 + 12) = result;
  }
  return result;
}

//----- (00444230) --------------------------------------------------------
int __cdecl NPC144(int a1)
{
  int *v1; // edx@24
  int v2; // eax@24
  int *v3; // edx@25
  int v4; // eax@25
  int result; // eax@26
  int v6; // [sp+4h] [bp-A0h]@1
  int v7; // [sp+8h] [bp-9Ch]@1
  int v8; // [sp+Ch] [bp-98h]@1
  int v9; // [sp+10h] [bp-94h]@1
  int v10; // [sp+14h] [bp-90h]@1
  int v11; // [sp+18h] [bp-8Ch]@1
  int v12; // [sp+1Ch] [bp-88h]@1
  int v13; // [sp+20h] [bp-84h]@1
  int v14; // [sp+24h] [bp-80h]@1
  int v15; // [sp+28h] [bp-7Ch]@1
  int v16; // [sp+2Ch] [bp-78h]@1
  int v17; // [sp+30h] [bp-74h]@1
  int v18; // [sp+34h] [bp-70h]@1
  int v19; // [sp+38h] [bp-6Ch]@1
  int v20; // [sp+3Ch] [bp-68h]@1
  int v21; // [sp+40h] [bp-64h]@1
  int v22; // [sp+44h] [bp-60h]@1
  int v23; // [sp+48h] [bp-5Ch]@1
  int v24; // [sp+4Ch] [bp-58h]@1
  int v25; // [sp+50h] [bp-54h]@1
  int v26; // [sp+54h] [bp-50h]@1
  int v27; // [sp+58h] [bp-4Ch]@1
  int v28; // [sp+5Ch] [bp-48h]@1
  int v29; // [sp+60h] [bp-44h]@1
  int v30; // [sp+64h] [bp-40h]@1
  int v31; // [sp+68h] [bp-3Ch]@1
  int v32; // [sp+6Ch] [bp-38h]@1
  int v33; // [sp+70h] [bp-34h]@1
  int v34; // [sp+74h] [bp-30h]@1
  int v35; // [sp+78h] [bp-2Ch]@1
  int v36; // [sp+7Ch] [bp-28h]@1
  int v37; // [sp+80h] [bp-24h]@1
  int v38; // [sp+84h] [bp-20h]@1
  int v39; // [sp+88h] [bp-1Ch]@1
  int v40; // [sp+8Ch] [bp-18h]@1
  int v41; // [sp+90h] [bp-14h]@1
  int v42; // [sp+94h] [bp-10h]@1
  int v43; // [sp+98h] [bp-Ch]@1
  int v44; // [sp+9Ch] [bp-8h]@1
  int v45; // [sp+A0h] [bp-4h]@1

  v26 = 0;
  v27 = 64;
  v28 = 16;
  v29 = 80;
  v30 = 16;
  v31 = 64;
  v32 = 32;
  v33 = 80;
  v34 = 32;
  v35 = 64;
  v36 = 48;
  v37 = 80;
  v38 = 16;
  v39 = 64;
  v40 = 32;
  v41 = 80;
  v42 = 128;
  v43 = 64;
  v44 = 144;
  v45 = 80;
  v6 = 0;
  v7 = 80;
  v8 = 16;
  v9 = 96;
  v10 = 16;
  v11 = 80;
  v12 = 32;
  v13 = 96;
  v14 = 32;
  v15 = 80;
  v16 = 48;
  v17 = 96;
  v18 = 16;
  v19 = 80;
  v20 = 32;
  v21 = 96;
  v22 = 128;
  v23 = 80;
  v24 = 144;
  v25 = 96;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 100) = 0;
      *(_DWORD *)(a1 + 32) = *(_DWORD *)(a1 + 8);
      Play_Sound_Effect(29, 1);
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( ++*(_DWORD *)(a1 + 120) == 64 )
      {
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 120) = 0;
      }
      break;
    case 2:
      if ( ++*(_DWORD *)(a1 + 100) > 2 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 3 )
        *(_DWORD *)(a1 + 104) = 2;
      if ( *(_DWORD *)(a1 + 4) & 8 )
      {
        *(_DWORD *)(a1 + 116) = 4;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 4;
        Play_Sound_Effect(23, 1);
      }
      break;
    case 0xA:
      *(_DWORD *)(a1 + 116) = 11;
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 100) = 0;
      goto LABEL_14;
    case 0xB:
LABEL_14:
      if ( RNG_Range(0, 120) == 10 )
      {
        *(_DWORD *)(a1 + 116) = 12;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 1;
      }
      break;
    case 0xC:
      if ( ++*(_DWORD *)(a1 + 120) > 8 )
      {
        *(_DWORD *)(a1 + 116) = 11;
        *(_DWORD *)(a1 + 104) = 0;
      }
      break;
    default:
      break;
  }
  if ( *(_DWORD *)(a1 + 116) > 1 )
  {
    *(_DWORD *)(a1 + 20) += 32;
    if ( *(_DWORD *)(a1 + 20) > 1535 )
      *(_DWORD *)(a1 + 20) = 1535;
    *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  }
  if ( *(_DWORD *)(a1 + 76) )
  {
    v3 = &v6 + 4 * *(_DWORD *)(a1 + 104);
    v4 = a1 + 84;
    *(_DWORD *)v4 = *v3;
    *(_DWORD *)(v4 + 4) = v3[1];
    *(_DWORD *)(v4 + 8) = v3[2];
    *(_DWORD *)(v4 + 12) = v3[3];
  }
  else
  {
    v1 = &v26 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    *(_DWORD *)(v2 + 8) = v1[2];
    *(_DWORD *)(v2 + 12) = v1[3];
  }
  result = a1;
  if ( *(_DWORD *)(a1 + 116) == 1 )
  {
    *(_DWORD *)(a1 + 96) = *(_DWORD *)(a1 + 88) + *(_DWORD *)(a1 + 120) / 4;
    if ( *(_DWORD *)(a1 + 120) / 2 % 2 )
    {
      result = a1;
      *(_DWORD *)(a1 + 8) = *(_DWORD *)(a1 + 32);
    }
    else
    {
      result = a1;
      *(_DWORD *)(a1 + 8) = *(_DWORD *)(a1 + 32) + 512;
    }
  }
  return result;
}

//----- (00444620) --------------------------------------------------------
int __cdecl NPC145(int a1)
{
  int *v1; // ecx@15
  int v2; // edx@15
  int result; // eax@15
  int *v4; // ecx@16
  int v5; // edx@16
  int v6; // [sp+4h] [bp-20h]@1
  int v7; // [sp+8h] [bp-1Ch]@1
  int v8; // [sp+Ch] [bp-18h]@1
  int v9; // [sp+10h] [bp-14h]@1
  int v10; // [sp+14h] [bp-10h]@1
  int v11; // [sp+18h] [bp-Ch]@1
  int v12; // [sp+1Ch] [bp-8h]@1
  int v13; // [sp+20h] [bp-4h]@1

  v10 = 96;
  v11 = 32;
  v12 = 112;
  v13 = 48;
  v6 = 112;
  v7 = 32;
  v8 = 128;
  v9 = 48;
  if ( !*(_DWORD *)(a1 + 116) )
  {
    if ( *(_DWORD *)(*(_DWORD *)(a1 + 168) + 112) )
    {
      if ( *(_DWORD *)(*(_DWORD *)(a1 + 168) + 76) )
        *(_DWORD *)(a1 + 76) = 0;
      else
        *(_DWORD *)(a1 + 76) = 2;
    }
    else if ( *(_DWORD *)(*(_DWORD *)(a1 + 168) + 76) )
    {
      *(_DWORD *)(a1 + 76) = 2;
    }
    else
    {
      *(_DWORD *)(a1 + 76) = 0;
    }
    if ( *(_DWORD *)(a1 + 76) )
      *(_DWORD *)(a1 + 8) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 8) + 5120;
    else
      *(_DWORD *)(a1 + 8) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 8) - 5120;
    *(_DWORD *)(a1 + 12) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 12);
  }
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v6 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    result = v4[2];
    *(_DWORD *)(v5 + 8) = result;
    *(_DWORD *)(v5 + 12) = v4[3];
  }
  else
  {
    v1 = &v10 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    result = v1[2];
    *(_DWORD *)(v2 + 8) = result;
    *(_DWORD *)(v2 + 12) = v1[3];
  }
  return result;
}

//----- (00444780) --------------------------------------------------------
int __cdecl NPC146(int a1)
{
  int *v1; // eax@16
  int v2; // ecx@16
  int result; // eax@16
  int v4; // [sp+0h] [bp-54h]@1
  int v5; // [sp+4h] [bp-50h]@1
  int v6; // [sp+8h] [bp-4Ch]@1
  int v7; // [sp+Ch] [bp-48h]@1
  int v8; // [sp+10h] [bp-44h]@1
  int v9; // [sp+14h] [bp-40h]@1
  int v10; // [sp+18h] [bp-3Ch]@1
  int v11; // [sp+1Ch] [bp-38h]@1
  int v12; // [sp+20h] [bp-34h]@1
  int v13; // [sp+24h] [bp-30h]@1
  int v14; // [sp+28h] [bp-2Ch]@1
  int v15; // [sp+2Ch] [bp-28h]@1
  int v16; // [sp+30h] [bp-24h]@1
  int v17; // [sp+34h] [bp-20h]@1
  int v18; // [sp+38h] [bp-1Ch]@1
  int v19; // [sp+3Ch] [bp-18h]@1
  int v20; // [sp+40h] [bp-14h]@1
  int v21; // [sp+44h] [bp-10h]@1
  int v22; // [sp+48h] [bp-Ch]@1
  int v23; // [sp+4Ch] [bp-8h]@1
  int v24; // [sp+50h] [bp-4h]@1

  v5 = 0;
  v6 = 0;
  v7 = 0;
  v8 = 0;
  v9 = 256;
  v10 = 0;
  v11 = 272;
  v12 = 240;
  v13 = 272;
  v14 = 0;
  v15 = 288;
  v16 = 240;
  v17 = 288;
  v18 = 0;
  v19 = 304;
  v20 = 240;
  v21 = 304;
  v22 = 0;
  v23 = 320;
  v24 = 240;
  v4 = *(_DWORD *)(a1 + 116);
  if ( v4 )
  {
    if ( v4 != 1 )
    {
      if ( v4 == 2 )
      {
        if ( ++*(_DWORD *)(a1 + 100) > 2 )
        {
          *(_DWORD *)(a1 + 100) = 0;
          ++*(_DWORD *)(a1 + 104);
        }
        if ( *(_DWORD *)(a1 + 104) == 2 )
          *(_DWORD *)(a1 + 164) = 10;
        if ( *(_DWORD *)(a1 + 104) > 4 )
        {
          sub_46F150(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 4096, 8);
          *(_BYTE *)a1 = 0;
        }
      }
      goto LABEL_16;
    }
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 1;
    if ( *(_DWORD *)(a1 + 76) == 2 )
      Explosion_(0, 0, 2);
  }
  if ( ++*(_DWORD *)(a1 + 120) > 10 )
  {
    *(_DWORD *)(a1 + 116) = 2;
    Play_Sound_Effect(101, 1);
  }
LABEL_16:
  v1 = &v5 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  *(_DWORD *)(v2 + 8) = v1[2];
  result = v1[3];
  *(_DWORD *)(v2 + 12) = result;
  return result;
}

//----- (00444930) --------------------------------------------------------
// Checks for starblock tile & if bullet can break it
int __cdecl NPC147(int a1)
{
  int Y_Velocity; // ST24_4@43
  int *v2; // ecx@67
  int v3; // edx@67
  int result; // eax@67
  int *v5; // ecx@68
  int v6; // edx@68
  int v7; // [sp+8h] [bp-D0h]@1
  int v8; // [sp+Ch] [bp-CCh]@1
  int v9; // [sp+10h] [bp-C8h]@1
  int v10; // [sp+14h] [bp-C4h]@1
  int v11; // [sp+18h] [bp-C0h]@1
  int v12; // [sp+1Ch] [bp-BCh]@1
  int v13; // [sp+20h] [bp-B8h]@1
  int v14; // [sp+24h] [bp-B4h]@1
  int v15; // [sp+28h] [bp-B0h]@1
  int v16; // [sp+2Ch] [bp-ACh]@1
  int v17; // [sp+30h] [bp-A8h]@1
  int v18; // [sp+34h] [bp-A4h]@1
  int v19; // [sp+38h] [bp-A0h]@1
  int v20; // [sp+3Ch] [bp-9Ch]@1
  int v21; // [sp+40h] [bp-98h]@1
  int v22; // [sp+44h] [bp-94h]@1
  int v23; // [sp+48h] [bp-90h]@1
  int v24; // [sp+4Ch] [bp-8Ch]@1
  int v25; // [sp+50h] [bp-88h]@1
  int v26; // [sp+54h] [bp-84h]@1
  int v27; // [sp+58h] [bp-80h]@1
  int v28; // [sp+5Ch] [bp-7Ch]@1
  int v29; // [sp+60h] [bp-78h]@1
  int v30; // [sp+64h] [bp-74h]@1
  int X_Velocity; // [sp+6Ch] [bp-6Ch]@43
  int v32; // [sp+70h] [bp-68h]@1
  int v33; // [sp+74h] [bp-64h]@1
  int v34; // [sp+78h] [bp-60h]@1
  int v35; // [sp+7Ch] [bp-5Ch]@1
  int v36; // [sp+80h] [bp-58h]@1
  int v37; // [sp+84h] [bp-54h]@1
  int v38; // [sp+88h] [bp-50h]@1
  int v39; // [sp+8Ch] [bp-4Ch]@1
  int v40; // [sp+90h] [bp-48h]@1
  int v41; // [sp+94h] [bp-44h]@1
  int v42; // [sp+98h] [bp-40h]@1
  int v43; // [sp+9Ch] [bp-3Ch]@1
  int v44; // [sp+A0h] [bp-38h]@1
  int v45; // [sp+A4h] [bp-34h]@1
  int v46; // [sp+A8h] [bp-30h]@1
  int v47; // [sp+ACh] [bp-2Ch]@1
  int v48; // [sp+B0h] [bp-28h]@1
  int v49; // [sp+B4h] [bp-24h]@1
  int v50; // [sp+B8h] [bp-20h]@1
  int v51; // [sp+BCh] [bp-1Ch]@1
  int v52; // [sp+C0h] [bp-18h]@1
  int v53; // [sp+C4h] [bp-14h]@1
  int v54; // [sp+C8h] [bp-10h]@1
  int v55; // [sp+CCh] [bp-Ch]@1
  unsigned __int8 v56; // [sp+D7h] [bp-1h]@43

  v32 = 0;
  v33 = 96;
  v34 = 16;
  v35 = 112;
  v36 = 16;
  v37 = 96;
  v38 = 32;
  v39 = 112;
  v40 = 32;
  v41 = 96;
  v42 = 48;
  v43 = 112;
  v44 = 48;
  v45 = 96;
  v46 = 64;
  v47 = 112;
  v48 = 64;
  v49 = 96;
  v50 = 80;
  v51 = 112;
  v52 = 80;
  v53 = 96;
  v54 = 96;
  v55 = 112;
  v7 = 0;
  v8 = 112;
  v9 = 16;
  v10 = 128;
  v11 = 16;
  v12 = 112;
  v13 = 32;
  v14 = 128;
  v15 = 32;
  v16 = 112;
  v17 = 48;
  v18 = 128;
  v19 = 48;
  v20 = 112;
  v21 = 64;
  v22 = 128;
  v23 = 64;
  v24 = 112;
  v25 = 80;
  v26 = 128;
  v27 = 80;
  v28 = 112;
  v29 = 96;
  v30 = 128;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 12) += 1536;
      *(_DWORD *)(a1 + 116) = 1;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( *(_DWORD *)(a1 + 120) < 8
        || *(_DWORD *)(a1 + 8) - 49152 >= Quote_X_Position
        || *(_DWORD *)(a1 + 8) + 49152 <= Quote_X_Position
        || *(_DWORD *)(a1 + 12) - 49152 >= Quote_Y_Position
        || *(_DWORD *)(a1 + 12) + 0x4000 <= Quote_Y_Position )
      {
        if ( *(_DWORD *)(a1 + 120) < 8 )
          ++*(_DWORD *)(a1 + 120);
        *(_DWORD *)(a1 + 104) = 0;
      }
      else
      {
        if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
          *(_DWORD *)(a1 + 76) = 2;
        else
          *(_DWORD *)(a1 + 76) = 0;
        *(_DWORD *)(a1 + 104) = 1;
      }
      if ( *(_BYTE *)(a1 + 156) )
      {
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 104) = 0;
        *(_DWORD *)(a1 + 120) = 0;
      }
      if ( *(_DWORD *)(a1 + 120) >= 8
        && *(_DWORD *)(a1 + 8) - 24576 < Quote_X_Position
        && *(_DWORD *)(a1 + 8) + 24576 > Quote_X_Position
        && *(_DWORD *)(a1 + 12) - 49152 < Quote_Y_Position
        && *(_DWORD *)(a1 + 12) + 0x4000 > Quote_Y_Position )
      {
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 104) = 0;
        *(_DWORD *)(a1 + 120) = 0;
      }
      break;
    case 2:
      if ( ++*(_DWORD *)(a1 + 120) > 8 )
      {
        *(_DWORD *)(a1 + 116) = 3;
        *(_DWORD *)(a1 + 104) = 2;
        *(_DWORD *)(a1 + 20) = -1535;
        Play_Sound_Effect(30, 1);
        if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
          *(_DWORD *)(a1 + 76) = 2;
        else
          *(_DWORD *)(a1 + 76) = 0;
      }
      break;
    case 3:
      if ( *(_DWORD *)(a1 + 20) > 256 )
      {
        *(_DWORD *)(a1 + 36) = *(_DWORD *)(a1 + 12);
        *(_DWORD *)(a1 + 116) = 4;
        *(_DWORD *)(a1 + 104) = 3;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 120) = 0;
      }
      break;
    case 4:
      if ( *(_DWORD *)(a1 + 8) >= Quote_X_Position )
        *(_DWORD *)(a1 + 76) = 0;
      else
        *(_DWORD *)(a1 + 76) = 2;
      ++*(_DWORD *)(a1 + 120);
      if ( *(_DWORD *)(a1 + 4) & 7 || *(_DWORD *)(a1 + 120) > 60 )
      {
        *(_DWORD *)(a1 + 164) = 3;
        *(_DWORD *)(a1 + 116) = 5;
        *(_DWORD *)(a1 + 104) = 2;
      }
      else
      {
        if ( *(_DWORD *)(a1 + 120) % 4 == 1 )
          Play_Sound_Effect(109, 1);
        if ( *(_DWORD *)(a1 + 4) & 8 )
          *(_DWORD *)(a1 + 20) = -512;
        if ( *(_DWORD *)(a1 + 120) % 30 == 6 )
        {
          v56 = Angle_Calculator(*(_DWORD *)(a1 + 8) - Quote_X_Position, *(_DWORD *)(a1 + 12) - Quote_Y_Position);
          v56 += RNG_Range(-6, 6);
          Y_Velocity = 3 * SIN_function(v56);
          X_Velocity = 3 * COS_function(v56);
          NPC_Create(148, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), X_Velocity, Y_Velocity, 0, 0, 256);
          Play_Sound_Effect(39, 1);
        }
        if ( ++*(_DWORD *)(a1 + 100) > 0 )
        {
          *(_DWORD *)(a1 + 100) = 0;
          ++*(_DWORD *)(a1 + 104);
        }
        if ( *(_DWORD *)(a1 + 104) > 5 )
          *(_DWORD *)(a1 + 104) = 3;
      }
      break;
    case 5:
      if ( *(_DWORD *)(a1 + 4) & 8 )
      {
        *(_DWORD *)(a1 + 164) = 2;
        *(_DWORD *)(a1 + 16) = 0;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 0;
        *(_DWORD *)(a1 + 116) = 1;
        Play_Sound_Effect(23, 1);
      }
      break;
    default:
      break;
  }
  if ( *(_DWORD *)(a1 + 116) == 4 )
  {
    if ( *(_DWORD *)(a1 + 12) <= *(_DWORD *)(a1 + 36) )
      *(_DWORD *)(a1 + 20) += 16;
    else
      *(_DWORD *)(a1 + 20) -= 16;
    if ( *(_DWORD *)(a1 + 20) > 512 )
      *(_DWORD *)(a1 + 20) = 512;
    if ( *(_DWORD *)(a1 + 20) < -512 )
      *(_DWORD *)(a1 + 20) = -512;
    if ( *(_DWORD *)(a1 + 16) > 512 )
      *(_DWORD *)(a1 + 16) = 512;
    if ( *(_DWORD *)(a1 + 16) < -512 )
      *(_DWORD *)(a1 + 16) = -512;
  }
  else
  {
    *(_DWORD *)(a1 + 20) += 32;
    if ( *(_DWORD *)(a1 + 20) > 1535 )
      *(_DWORD *)(a1 + 20) = 1535;
  }
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 76) )
  {
    v5 = &v7 + 4 * *(_DWORD *)(a1 + 104);
    v6 = a1 + 84;
    *(_DWORD *)v6 = *v5;
    *(_DWORD *)(v6 + 4) = v5[1];
    result = v5[2];
    *(_DWORD *)(v6 + 8) = result;
    *(_DWORD *)(v6 + 12) = v5[3];
  }
  else
  {
    v2 = &v32 + 4 * *(_DWORD *)(a1 + 104);
    v3 = a1 + 84;
    *(_DWORD *)v3 = *v2;
    *(_DWORD *)(v3 + 4) = v2[1];
    result = v2[2];
    *(_DWORD *)(v3 + 8) = result;
    *(_DWORD *)(v3 + 12) = v2[3];
  }
  return result;
}

//----- (00445050) --------------------------------------------------------
int __cdecl NPC148(int a1)
{
  int *v1; // ecx@5
  int v2; // edx@5
  int result; // eax@5
  int v4; // [sp+0h] [bp-20h]@3
  int v5; // [sp+4h] [bp-1Ch]@3
  int v6; // [sp+8h] [bp-18h]@3
  int v7; // [sp+Ch] [bp-14h]@3
  int v8; // [sp+10h] [bp-10h]@3
  int v9; // [sp+14h] [bp-Ch]@3
  int v10; // [sp+18h] [bp-8h]@3
  int v11; // [sp+1Ch] [bp-4h]@3

  if ( *(_DWORD *)(a1 + 4) & 0xFF )
  {
    Create_Animated_Effect(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 2, 0);
    *(_BYTE *)a1 = 0;
  }
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  v4 = 96;
  v5 = 96;
  v6 = 104;
  v7 = 104;
  v8 = 104;
  v9 = 96;
  v10 = 112;
  v11 = 104;
  if ( ++*(_DWORD *)(a1 + 104) > 1 )
    *(_DWORD *)(a1 + 104) = 0;
  v1 = &v4 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  *(_DWORD *)(v2 + 8) = v1[2];
  *(_DWORD *)(v2 + 12) = v1[3];
  result = *(_DWORD *)(a1 + 108) + 1;
  *(_DWORD *)(a1 + 108) = result;
  if ( *(_DWORD *)(a1 + 108) > 300 )
  {
    result = Create_Animated_Effect(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 2, 0);
    *(_BYTE *)a1 = 0;
  }
  return result;
}

//----- (00445170) --------------------------------------------------------
signed int __cdecl NPC149(int a1)
{
  int v1; // ST10_4@17
  int v2; // ST0C_4@17
  int v3; // eax@17
  int v4; // ST10_4@34
  int v5; // ST0C_4@34
  int v6; // eax@34
  int v7; // ecx@44
  signed int result; // eax@44
  signed int i; // [sp+4h] [bp-14h]@15
  signed int j; // [sp+4h] [bp-14h]@32

  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 8) += 4096;
      *(_DWORD *)(a1 + 12) += 4096;
      if ( *(_DWORD *)(a1 + 76) )
        *(_DWORD *)(a1 + 116) = 20;
      else
        *(_DWORD *)(a1 + 116) = 10;
      *(_DWORD *)(a1 + 16) = 0;
      *(_DWORD *)(a1 + 20) = 0;
      *(_WORD *)(a1 + 80) |= 0x40u;
      break;
    case 0xA:
      *(_WORD *)(a1 + 80) &= 0xFF7Fu;
      *(_DWORD *)(a1 + 164) = 0;
      if ( Quote_X_Position < *(_DWORD *)(a1 + 8) + 12800
        && Quote_X_Position > *(_DWORD *)(a1 + 8) - 204800
        && Quote_Y_Position < *(_DWORD *)(a1 + 12) + 12800
        && Quote_Y_Position > *(_DWORD *)(a1 + 12) - 12800 )
      {
        *(_DWORD *)(a1 + 116) = 11;
        *(_DWORD *)(a1 + 120) = 0;
      }
      break;
    case 0xB:
      if ( ++*(_DWORD *)(a1 + 120) % 10 == 6 )
        Play_Sound_Effect(107, 1);
      if ( *(_DWORD *)(a1 + 4) & 1 )
      {
        *(_DWORD *)(a1 + 16) = 0;
        *(_DWORD *)(a1 + 76) = 2;
        *(_DWORD *)(a1 + 116) = 20;
        sub_40F310(10);
        Play_Sound_Effect(26, 1);
        for ( i = 0; i < 4; ++i )
        {
          v1 = RNG_Range(-1536, 0);
          v2 = RNG_Range(-341, 341);
          v3 = RNG_Range(-12, 12);
          NPC_Create(4, *(_DWORD *)(a1 + 8) - 0x2000, *(_DWORD *)(a1 + 12) + (v3 << 9), v2, v1, 0, 0, 256);
        }
      }
      else
      {
        if ( Tile_On_Which_Quote_Is & 1 )
        {
          *(_WORD *)(a1 + 80) |= 0x80u;
          *(_DWORD *)(a1 + 164) = 100;
        }
        else
        {
          *(_WORD *)(a1 + 80) &= 0xFF7Fu;
          *(_DWORD *)(a1 + 164) = 0;
        }
        *(_DWORD *)(a1 + 16) -= 32;
      }
      break;
    case 0x14:
      *(_WORD *)(a1 + 80) &= 0xFF7Fu;
      *(_DWORD *)(a1 + 164) = 0;
      if ( Quote_X_Position > *(_DWORD *)(a1 + 8) - 12800
        && Quote_X_Position < *(_DWORD *)(a1 + 8) + 204800
        && Quote_Y_Position < *(_DWORD *)(a1 + 12) + 12800
        && Quote_Y_Position > *(_DWORD *)(a1 + 12) - 12800 )
      {
        *(_DWORD *)(a1 + 116) = 21;
        *(_DWORD *)(a1 + 120) = 0;
      }
      break;
    case 0x15:
      if ( ++*(_DWORD *)(a1 + 120) % 10 == 6 )
        Play_Sound_Effect(107, 1);
      if ( *(_DWORD *)(a1 + 4) & 4 )
      {
        *(_DWORD *)(a1 + 16) = 0;
        *(_DWORD *)(a1 + 76) = 0;
        *(_DWORD *)(a1 + 116) = 10;
        sub_40F310(10);
        Play_Sound_Effect(26, 1);
        for ( j = 0; j < 4; ++j )
        {
          v4 = RNG_Range(-1536, 0);
          v5 = RNG_Range(-341, 341);
          v6 = RNG_Range(-12, 12);
          NPC_Create(4, *(_DWORD *)(a1 + 8) + 0x2000, *(_DWORD *)(a1 + 12) + (v6 << 9), v5, v4, 0, 0, 256);
        }
      }
      else
      {
        if ( Tile_On_Which_Quote_Is & 4 )
        {
          *(_WORD *)(a1 + 80) |= 0x80u;
          *(_DWORD *)(a1 + 164) = 100;
        }
        else
        {
          *(_WORD *)(a1 + 80) &= 0xFF7Fu;
          *(_DWORD *)(a1 + 164) = 0;
        }
        *(_DWORD *)(a1 + 16) += 32;
      }
      break;
    default:
      break;
  }
  if ( *(_DWORD *)(a1 + 16) > 512 )
    *(_DWORD *)(a1 + 16) = 512;
  if ( *(_DWORD *)(a1 + 16) < -512 )
    *(_DWORD *)(a1 + 16) = -512;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  v7 = a1 + 84;
  *(_DWORD *)v7 = 16;
  *(_DWORD *)(v7 + 4) = 0;
  *(_DWORD *)(v7 + 8) = 48;
  result = 32;
  *(_DWORD *)(v7 + 12) = 32;
  return result;
}
// 49E63C: using guessed type int Tile_On_Which_Quote_Is;

//----- (00445660) --------------------------------------------------------
// Solid tile -> Two stage filter for blocks that bullets are s'posta collide with
int __cdecl NPC150(int a1)
{
  int v1; // ST10_4@8
  int v2; // eax@8
  int *v3; // eax@47
  int v4; // ecx@47
  int result; // eax@47
  int *v6; // eax@48
  int v7; // ecx@48
  int v8; // [sp+4h] [bp-128h]@1
  int v9; // [sp+8h] [bp-124h]@1
  int v10; // [sp+Ch] [bp-120h]@1
  int v11; // [sp+10h] [bp-11Ch]@1
  int v12; // [sp+14h] [bp-118h]@1
  int v13; // [sp+18h] [bp-114h]@1
  int v14; // [sp+1Ch] [bp-110h]@1
  int v15; // [sp+20h] [bp-10Ch]@1
  int v16; // [sp+24h] [bp-108h]@1
  int v17; // [sp+28h] [bp-104h]@1
  int v18; // [sp+2Ch] [bp-100h]@1
  int v19; // [sp+30h] [bp-FCh]@1
  int v20; // [sp+34h] [bp-F8h]@1
  int v21; // [sp+38h] [bp-F4h]@1
  int v22; // [sp+3Ch] [bp-F0h]@1
  int v23; // [sp+40h] [bp-ECh]@1
  int v24; // [sp+44h] [bp-E8h]@1
  int v25; // [sp+48h] [bp-E4h]@1
  int v26; // [sp+4Ch] [bp-E0h]@1
  int v27; // [sp+50h] [bp-DCh]@1
  int v28; // [sp+54h] [bp-D8h]@1
  int v29; // [sp+58h] [bp-D4h]@1
  int v30; // [sp+5Ch] [bp-D0h]@1
  int v31; // [sp+60h] [bp-CCh]@1
  int v32; // [sp+64h] [bp-C8h]@1
  int v33; // [sp+68h] [bp-C4h]@1
  int v34; // [sp+6Ch] [bp-C0h]@1
  int v35; // [sp+70h] [bp-BCh]@1
  int v36; // [sp+74h] [bp-B8h]@1
  int v37; // [sp+78h] [bp-B4h]@1
  int v38; // [sp+7Ch] [bp-B0h]@1
  int v39; // [sp+80h] [bp-ACh]@1
  int v40; // [sp+84h] [bp-A8h]@1
  int v41; // [sp+88h] [bp-A4h]@1
  int v42; // [sp+8Ch] [bp-A0h]@1
  int v43; // [sp+90h] [bp-9Ch]@1
  int i; // [sp+98h] [bp-94h]@6
  int v45; // [sp+9Ch] [bp-90h]@1
  int v46; // [sp+A0h] [bp-8Ch]@1
  int v47; // [sp+A4h] [bp-88h]@1
  int v48; // [sp+A8h] [bp-84h]@1
  int v49; // [sp+ACh] [bp-80h]@1
  int v50; // [sp+B0h] [bp-7Ch]@1
  int v51; // [sp+B4h] [bp-78h]@1
  int v52; // [sp+B8h] [bp-74h]@1
  int v53; // [sp+BCh] [bp-70h]@1
  int v54; // [sp+C0h] [bp-6Ch]@1
  int v55; // [sp+C4h] [bp-68h]@1
  int v56; // [sp+C8h] [bp-64h]@1
  int v57; // [sp+CCh] [bp-60h]@1
  int v58; // [sp+D0h] [bp-5Ch]@1
  int v59; // [sp+D4h] [bp-58h]@1
  int v60; // [sp+D8h] [bp-54h]@1
  int v61; // [sp+DCh] [bp-50h]@1
  int v62; // [sp+E0h] [bp-4Ch]@1
  int v63; // [sp+E4h] [bp-48h]@1
  int v64; // [sp+E8h] [bp-44h]@1
  int v65; // [sp+ECh] [bp-40h]@1
  int v66; // [sp+F0h] [bp-3Ch]@1
  int v67; // [sp+F4h] [bp-38h]@1
  int v68; // [sp+F8h] [bp-34h]@1
  int v69; // [sp+FCh] [bp-30h]@1
  int v70; // [sp+100h] [bp-2Ch]@1
  int v71; // [sp+104h] [bp-28h]@1
  int v72; // [sp+108h] [bp-24h]@1
  int v73; // [sp+10Ch] [bp-20h]@1
  int v74; // [sp+110h] [bp-1Ch]@1
  int v75; // [sp+114h] [bp-18h]@1
  int v76; // [sp+118h] [bp-14h]@1
  int v77; // [sp+11Ch] [bp-10h]@1
  int v78; // [sp+120h] [bp-Ch]@1
  int v79; // [sp+124h] [bp-8h]@1
  int v80; // [sp+128h] [bp-4h]@1

  v45 = 0;
  v46 = 0;
  v47 = 16;
  v48 = 16;
  v49 = 48;
  v50 = 0;
  v51 = 64;
  v52 = 16;
  v53 = 144;
  v54 = 0;
  v55 = 160;
  v56 = 16;
  v57 = 16;
  v58 = 0;
  v59 = 32;
  v60 = 16;
  v61 = 0;
  v62 = 0;
  v63 = 16;
  v64 = 16;
  v65 = 32;
  v66 = 0;
  v67 = 48;
  v68 = 16;
  v69 = 0;
  v70 = 0;
  v71 = 16;
  v72 = 16;
  v73 = 160;
  v74 = 0;
  v75 = 176;
  v76 = 16;
  v77 = 112;
  v78 = 0;
  v79 = 128;
  v80 = 16;
  v8 = 0;
  v9 = 16;
  v10 = 16;
  v11 = 32;
  v12 = 48;
  v13 = 16;
  v14 = 64;
  v15 = 32;
  v16 = 144;
  v17 = 16;
  v18 = 160;
  v19 = 32;
  v20 = 16;
  v21 = 16;
  v22 = 32;
  v23 = 32;
  v24 = 0;
  v25 = 16;
  v26 = 16;
  v27 = 32;
  v28 = 32;
  v29 = 16;
  v30 = 48;
  v31 = 32;
  v32 = 0;
  v33 = 16;
  v34 = 16;
  v35 = 32;
  v36 = 160;
  v37 = 16;
  v38 = 176;
  v39 = 32;
  v40 = 112;
  v41 = 16;
  v42 = 128;
  v43 = 32;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 104) = 0;
      if ( *(_DWORD *)(a1 + 76) > 10 )
      {
        *(_DWORD *)(a1 + 8) = Quote_X_Position;
        *(_DWORD *)(a1 + 12) = Quote_Y_Position;
        *(_DWORD *)(a1 + 76) -= 10;
      }
      break;
    case 2:
      *(_DWORD *)(a1 + 104) = 1;
      break;
    case 0xA:
      *(_DWORD *)(a1 + 116) = 11;
      for ( i = 0; i < 4; ++i )
      {
        v1 = RNG_Range(-1536, 0);
        v2 = RNG_Range(-341, 341);
        NPC_Create(4, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), v2, v1, 0, 0, 256);
      }
      Play_Sound_Effect(71, 1);
      goto LABEL_10;
    case 0xB:
LABEL_10:
      *(_DWORD *)(a1 + 104) = 2;
      break;
    case 0x14:
      *(_DWORD *)(a1 + 116) = 21;
      *(_DWORD *)(a1 + 120) = 64;
      Play_Sound_Effect(29, 1);
      goto LABEL_12;
    case 0x15:
LABEL_12:
      if ( !--*(_DWORD *)(a1 + 120) )
        *(_BYTE *)a1 = 0;
      break;
    case 0x32:
      *(_DWORD *)(a1 + 116) = 51;
      *(_DWORD *)(a1 + 104) = 3;
      *(_DWORD *)(a1 + 100) = 0;
      goto LABEL_16;
    case 0x33:
LABEL_16:
      if ( ++*(_DWORD *)(a1 + 100) > 4 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 6 )
        *(_DWORD *)(a1 + 104) = 3;
      if ( *(_DWORD *)(a1 + 76) )
        *(_DWORD *)(a1 + 8) += 512;
      else
        *(_DWORD *)(a1 + 8) -= 512;
      break;
    case 0x3C:
      *(_DWORD *)(a1 + 116) = 61;
      *(_DWORD *)(a1 + 104) = 7;
      *(_DWORD *)(a1 + 32) = *(_DWORD *)(a1 + 8);
      *(_DWORD *)(a1 + 36) = *(_DWORD *)(a1 + 12);
      goto LABEL_25;
    case 0x3D:
LABEL_25:
      *(_DWORD *)(a1 + 36) += 256;
      *(_DWORD *)(a1 + 8) = *(_DWORD *)(a1 + 32) + (RNG_Range(-1, 1) << 9);
      *(_DWORD *)(a1 + 12) = *(_DWORD *)(a1 + 36) + (RNG_Range(-1, 1) << 9);
      break;
    case 0x46:
      *(_DWORD *)(a1 + 116) = 71;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 104) = 3;
      *(_DWORD *)(a1 + 100) = 0;
      goto LABEL_27;
    case 0x47:
LABEL_27:
      if ( *(_DWORD *)(a1 + 76) )
        *(_DWORD *)(a1 + 8) -= 256;
      else
        *(_DWORD *)(a1 + 8) += 256;
      if ( ++*(_DWORD *)(a1 + 100) > 8 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 6 )
        *(_DWORD *)(a1 + 104) = 3;
      break;
    case 0x50:
      *(_DWORD *)(a1 + 104) = 8;
      break;
    case 0x63:
    case 0x64:
      *(_DWORD *)(a1 + 116) = 101;
      *(_DWORD *)(a1 + 104) = 3;
      *(_DWORD *)(a1 + 100) = 0;
      goto LABEL_37;
    case 0x65:
LABEL_37:
      *(_DWORD *)(a1 + 20) += 64;
      if ( *(_DWORD *)(a1 + 20) > 1535 )
        *(_DWORD *)(a1 + 20) = 1535;
      if ( *(_DWORD *)(a1 + 4) & 8 )
      {
        *(_DWORD *)(a1 + 20) = 0;
        *(_DWORD *)(a1 + 116) = 102;
      }
      *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
      break;
    case 0x66:
      if ( ++*(_DWORD *)(a1 + 100) > 8 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 6 )
        *(_DWORD *)(a1 + 104) = 3;
      break;
    default:
      break;
  }
  if ( *(_DWORD *)(a1 + 76) )
  {
    v6 = &v8 + 4 * *(_DWORD *)(a1 + 104);
    v7 = a1 + 84;
    *(_DWORD *)v7 = *v6;
    *(_DWORD *)(v7 + 4) = v6[1];
    *(_DWORD *)(v7 + 8) = v6[2];
    result = v6[3];
    *(_DWORD *)(v7 + 12) = result;
  }
  else
  {
    v3 = &v45 + 4 * *(_DWORD *)(a1 + 104);
    v4 = a1 + 84;
    *(_DWORD *)v4 = *v3;
    *(_DWORD *)(v4 + 4) = v3[1];
    *(_DWORD *)(v4 + 8) = v3[2];
    result = v3[3];
    *(_DWORD *)(v4 + 12) = result;
  }
  if ( *(_DWORD *)(a1 + 116) == 21 )
  {
    *(_DWORD *)(a1 + 96) = *(_DWORD *)(a1 + 88) + *(_DWORD *)(a1 + 120) / 4;
    result = *(_DWORD *)(a1 + 120) / 2 % 2;
    if ( result )
    {
      result = a1;
      ++*(_DWORD *)(a1 + 84);
    }
  }
  if ( EquippedItems & 0x40 )
  {
    *(_DWORD *)(a1 + 88) += 32;
    result = *(_DWORD *)(a1 + 96) + 32;
    *(_DWORD *)(a1 + 96) = result;
  }
  return result;
}
// 49E650: using guessed type int EquippedItems;

//----- (00445E30) --------------------------------------------------------
int __cdecl NPC151(int a1)
{
  int *v1; // edx@12
  int result; // eax@12
  int *v3; // edx@13
  int v4; // [sp+0h] [bp-44h]@1
  int v5; // [sp+4h] [bp-40h]@1
  int v6; // [sp+8h] [bp-3Ch]@1
  int v7; // [sp+Ch] [bp-38h]@1
  int v8; // [sp+10h] [bp-34h]@1
  int v9; // [sp+14h] [bp-30h]@1
  int v10; // [sp+18h] [bp-2Ch]@1
  int v11; // [sp+1Ch] [bp-28h]@1
  int v12; // [sp+20h] [bp-24h]@1
  int v13; // [sp+24h] [bp-20h]@1
  int v14; // [sp+28h] [bp-1Ch]@1
  int v15; // [sp+2Ch] [bp-18h]@1
  int v16; // [sp+30h] [bp-14h]@1
  int v17; // [sp+34h] [bp-10h]@1
  int v18; // [sp+38h] [bp-Ch]@1
  int v19; // [sp+3Ch] [bp-8h]@1
  int v20; // [sp+40h] [bp-4h]@1

  v13 = 192;
  v14 = 0;
  v15 = 208;
  v16 = 16;
  v17 = 208;
  v18 = 0;
  v19 = 224;
  v20 = 16;
  v5 = 192;
  v6 = 16;
  v7 = 208;
  v8 = 32;
  v9 = 208;
  v10 = 16;
  v11 = 224;
  v12 = 32;
  v4 = *(_DWORD *)(a1 + 116);
  if ( v4 )
  {
    if ( v4 != 1 )
    {
      if ( v4 == 2 && ++*(_DWORD *)(a1 + 120) > 16 )
      {
        *(_DWORD *)(a1 + 116) = 1;
        *(_DWORD *)(a1 + 104) = 0;
      }
      goto LABEL_11;
    }
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 104) = 0;
    *(_DWORD *)(a1 + 100) = 0;
  }
  if ( !RNG_Range(0, 100) )
  {
    *(_DWORD *)(a1 + 116) = 2;
    *(_DWORD *)(a1 + 120) = 0;
    *(_DWORD *)(a1 + 104) = 1;
  }
LABEL_11:
  if ( *(_DWORD *)(a1 + 76) )
  {
    v3 = &v5 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v3;
    *(_DWORD *)(result + 4) = v3[1];
    *(_DWORD *)(result + 8) = v3[2];
    *(_DWORD *)(result + 12) = v3[3];
  }
  else
  {
    v1 = &v13 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v1;
    *(_DWORD *)(result + 4) = v1[1];
    *(_DWORD *)(result + 8) = v1[2];
    *(_DWORD *)(result + 12) = v1[3];
  }
  return result;
}

//----- (00445FA0) --------------------------------------------------------
// Backgrounds?
int __cdecl NPC152(int a1)
{
  int v1; // ecx@5
  int result; // eax@5

  if ( !*(_DWORD *)(a1 + 116) )
  {
    if ( *(_DWORD *)(a1 + 76) == 2 )
      *(_DWORD *)(a1 + 12) += 0x2000;
    *(_DWORD *)(a1 + 116) = 1;
  }
  v1 = a1 + 84;
  *(_DWORD *)v1 = 0;
  *(_DWORD *)(v1 + 4) = 0;
  *(_DWORD *)(v1 + 8) = 0;
  result = 0;
  *(_DWORD *)(v1 + 12) = 0;
  return result;
}

//----- (00446020) --------------------------------------------------------
int __cdecl NPC153(int a1)
{
  int result; // eax@1
  char *v2; // eax@64
  int v3; // ecx@64
  char *v4; // edx@65
  int v5; // eax@65

  result = Quote_X_Position + 163840;
  if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position + 163840 )
  {
    result = a1;
    if ( *(_DWORD *)(a1 + 8) >= Quote_X_Position - 163840 && *(_DWORD *)(a1 + 12) <= Quote_Y_Position + 122880 )
    {
      result = Quote_Y_Position - 122880;
      if ( *(_DWORD *)(a1 + 12) >= Quote_Y_Position - 122880 )
      {
        switch ( *(_DWORD *)(a1 + 116) )
        {
          case 0:
            *(_DWORD *)(a1 + 116) = 1;
            *(_DWORD *)(a1 + 16) = 0;
            *(_DWORD *)(a1 + 104) = 0;
            *(_DWORD *)(a1 + 12) += 1536;
            goto LABEL_8;
          case 1:
LABEL_8:
            if ( RNG_Range(0, 100) == 1 )
            {
              *(_DWORD *)(a1 + 116) = 2;
              *(_DWORD *)(a1 + 104) = 1;
              *(_DWORD *)(a1 + 120) = 0;
            }
            if ( RNG_Range(0, 100) == 1 )
            {
              if ( *(_DWORD *)(a1 + 76) )
                *(_DWORD *)(a1 + 76) = 0;
              else
                *(_DWORD *)(a1 + 76) = 2;
            }
            if ( RNG_Range(0, 100) == 1 )
              *(_DWORD *)(a1 + 116) = 10;
            break;
          case 2:
            if ( ++*(_DWORD *)(a1 + 120) > 20 )
            {
              *(_DWORD *)(a1 + 116) = 1;
              *(_DWORD *)(a1 + 104) = 0;
            }
            break;
          case 0xA:
            *(_DWORD *)(a1 + 116) = 11;
            *(_DWORD *)(a1 + 120) = RNG_Range(25, 100);
            *(_DWORD *)(a1 + 104) = 2;
            *(_DWORD *)(a1 + 100) = 0;
            goto LABEL_21;
          case 0xB:
LABEL_21:
            if ( ++*(_DWORD *)(a1 + 100) > 3 )
            {
              *(_DWORD *)(a1 + 100) = 0;
              ++*(_DWORD *)(a1 + 104);
            }
            if ( *(_DWORD *)(a1 + 104) > 5 )
              *(_DWORD *)(a1 + 104) = 2;
            if ( *(_DWORD *)(a1 + 76) )
              *(_DWORD *)(a1 + 16) = 512;
            else
              *(_DWORD *)(a1 + 16) = -512;
            if ( *(_DWORD *)(a1 + 120) )
            {
              --*(_DWORD *)(a1 + 120);
            }
            else
            {
              *(_DWORD *)(a1 + 116) = 1;
              *(_DWORD *)(a1 + 104) = 0;
              *(_DWORD *)(a1 + 16) = 0;
            }
            if ( *(_DWORD *)(a1 + 76) || !(*(_DWORD *)(a1 + 4) & 1) )
            {
              if ( *(_DWORD *)(a1 + 76) == 2 )
              {
                if ( *(_DWORD *)(a1 + 4) & 4 )
                {
                  *(_DWORD *)(a1 + 104) = 2;
                  *(_DWORD *)(a1 + 20) = -1535;
                  *(_DWORD *)(a1 + 116) = 20;
                  if ( !(*(_BYTE *)&Player_Flags & 2) )
                    Play_Sound_Effect(30, 1);
                }
              }
            }
            else
            {
              *(_DWORD *)(a1 + 104) = 2;
              *(_DWORD *)(a1 + 20) = -1535;
              *(_DWORD *)(a1 + 116) = 20;
              if ( !(*(_BYTE *)&Player_Flags & 2) )
                Play_Sound_Effect(30, 1);
            }
            break;
          case 0x14:
            if ( *(_DWORD *)(a1 + 76) || !(*(_DWORD *)(a1 + 4) & 1) )
            {
              if ( *(_DWORD *)(a1 + 76) == 2 && *(_DWORD *)(a1 + 4) & 4 )
                ++*(_DWORD *)(a1 + 108);
              else
                *(_DWORD *)(a1 + 108) = 0;
            }
            else
            {
              ++*(_DWORD *)(a1 + 108);
            }
            if ( *(_DWORD *)(a1 + 108) > 10 )
            {
              if ( *(_DWORD *)(a1 + 76) )
                *(_DWORD *)(a1 + 76) = 0;
              else
                *(_DWORD *)(a1 + 76) = 2;
            }
            if ( *(_DWORD *)(a1 + 76) )
              *(_DWORD *)(a1 + 16) = 256;
            else
              *(_DWORD *)(a1 + 16) = -256;
            if ( *(_DWORD *)(a1 + 4) & 8 )
            {
              *(_DWORD *)(a1 + 116) = 21;
              *(_DWORD *)(a1 + 104) = 20;
              *(_DWORD *)(a1 + 120) = 0;
              *(_DWORD *)(a1 + 16) = 0;
              if ( !(*(_BYTE *)&Player_Flags & 2) )
                Play_Sound_Effect(23, 1);
            }
            break;
          case 0x15:
            if ( ++*(_DWORD *)(a1 + 120) > 10 )
            {
              *(_DWORD *)(a1 + 116) = 1;
              *(_DWORD *)(a1 + 104) = 0;
            }
            break;
          default:
            break;
        }
        *(_DWORD *)(a1 + 20) += 64;
        if ( *(_DWORD *)(a1 + 20) > 1535 )
          *(_DWORD *)(a1 + 20) = 1535;
        *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
        *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
        if ( *(_DWORD *)(a1 + 76) )
        {
          v4 = (char *)&unk_4983F0 + 16 * *(_DWORD *)(a1 + 104);
          v5 = a1 + 84;
          *(_DWORD *)v5 = *(_DWORD *)v4;
          *(_DWORD *)(v5 + 4) = *((_DWORD *)v4 + 1);
          *(_DWORD *)(v5 + 8) = *((_DWORD *)v4 + 2);
          *(_DWORD *)(v5 + 12) = *((_DWORD *)v4 + 3);
        }
        else
        {
          v2 = (char *)&unk_4982A0 + 16 * *(_DWORD *)(a1 + 104);
          v3 = a1 + 84;
          *(_DWORD *)v3 = *(_DWORD *)v2;
          *(_DWORD *)(v3 + 4) = *((_DWORD *)v2 + 1);
          *(_DWORD *)(v3 + 8) = *((_DWORD *)v2 + 2);
          *(_DWORD *)(v3 + 12) = *((_DWORD *)v2 + 3);
        }
        result = a1;
        if ( *(_DWORD *)(a1 + 64) <= 985 )
        {
          *(_DWORD *)(a1 + 40) = 154;
          *(_DWORD *)(a1 + 116) = 0;
        }
      }
    }
  }
  return result;
}

//----- (00446500) --------------------------------------------------------
int __cdecl NPC154(int NPC_Vars_Pointer)
{
  char *v1; // edx@21
  int result; // eax@21
  char *v3; // ecx@22
  int v4; // edx@22
  int v5; // [sp+0h] [bp-4h]@1

  v5 = *(_DWORD *)(NPC_Vars_Pointer + 116);
  if ( v5 )
  {
    if ( v5 == 1 )
    {
      if ( *(_DWORD *)(NPC_Vars_Pointer + 4) & 8 )
      {
        *(_DWORD *)(NPC_Vars_Pointer + 104) = 10;
        *(_DWORD *)(NPC_Vars_Pointer + 100) = 0;
        *(_DWORD *)(NPC_Vars_Pointer + 116) = 2;
        *(_DWORD *)(NPC_Vars_Pointer + 120) = 0;
      }
    }
    else if ( v5 == 2 )
    {
      *(_DWORD *)(NPC_Vars_Pointer + 16) = 8 * *(_DWORD *)(NPC_Vars_Pointer + 16) / 9;
      if ( ++*(_DWORD *)(NPC_Vars_Pointer + 100) > 3 )
      {
        *(_DWORD *)(NPC_Vars_Pointer + 100) = 0;
        ++*(_DWORD *)(NPC_Vars_Pointer + 104);
      }
      if ( *(_DWORD *)(NPC_Vars_Pointer + 104) > 11 )
        *(_DWORD *)(NPC_Vars_Pointer + 104) = 10;
      if ( ++*(_DWORD *)(NPC_Vars_Pointer + 120) > 50 )
        *(_BYTE *)NPC_Vars_Pointer |= 8u;
    }
  }
  else
  {
    *(_WORD *)(NPC_Vars_Pointer + 80) &= 0xFFDFu;
    *(_WORD *)(NPC_Vars_Pointer + 80) &= 0xFFF7u;
    *(_DWORD *)(NPC_Vars_Pointer + 164) = 0;
    *(_DWORD *)(NPC_Vars_Pointer + 116) = 1;
    *(_DWORD *)(NPC_Vars_Pointer + 104) = 9;
    *(_DWORD *)(NPC_Vars_Pointer + 20) = -512;
    if ( *(_DWORD *)(NPC_Vars_Pointer + 76) )
      *(_DWORD *)(NPC_Vars_Pointer + 16) = -256;
    else
      *(_DWORD *)(NPC_Vars_Pointer + 16) = 256;
    Play_Sound_Effect(53, 1);
  }
  *(_DWORD *)(NPC_Vars_Pointer + 20) += 32;
  if ( *(_DWORD *)(NPC_Vars_Pointer + 20) > 1535 )
    *(_DWORD *)(NPC_Vars_Pointer + 20) = 1535;
  *(_DWORD *)(NPC_Vars_Pointer + 8) += *(_DWORD *)(NPC_Vars_Pointer + 16);
  *(_DWORD *)(NPC_Vars_Pointer + 12) += *(_DWORD *)(NPC_Vars_Pointer + 20);
  if ( *(_DWORD *)(NPC_Vars_Pointer + 76) )
  {
    v3 = (char *)&unk_4983F0 + 16 * *(_DWORD *)(NPC_Vars_Pointer + 104);
    v4 = NPC_Vars_Pointer + 84;
    *(_DWORD *)v4 = *(_DWORD *)v3;
    *(_DWORD *)(v4 + 4) = *((_DWORD *)v3 + 1);
    result = *((_DWORD *)v3 + 2);
    *(_DWORD *)(v4 + 8) = result;
    *(_DWORD *)(v4 + 12) = *((_DWORD *)v3 + 3);
  }
  else
  {
    v1 = (char *)&unk_4982A0 + 16 * *(_DWORD *)(NPC_Vars_Pointer + 104);
    result = NPC_Vars_Pointer + 84;
    *(_DWORD *)result = *(_DWORD *)v1;
    *(_DWORD *)(result + 4) = *((_DWORD *)v1 + 1);
    *(_DWORD *)(result + 8) = *((_DWORD *)v1 + 2);
    *(_DWORD *)(result + 12) = *((_DWORD *)v1 + 3);
  }
  return result;
}

//----- (00446710) --------------------------------------------------------
// Remove Ammo From Weapon
int __cdecl NPC155(int a1)
{
  int result; // eax@1
  char v2; // ST2F_1@10
  unsigned __int8 v3; // ST2F_1@10
  unsigned __int8 v4; // ST2F_1@20
  char v5; // ST2F_1@20
  int Y_Velocity; // ST24_4@20
  int X_Velocity; // ST28_4@20
  char *v8; // edx@43
  char *v9; // ecx@44
  int v10; // edx@44
  int v11; // [sp+0h] [bp-10h]@6

  result = Quote_X_Position + 163840;
  if ( *(_DWORD *)(a1 + 8) > Quote_X_Position + 163840 )
    return result;
  result = a1;
  if ( *(_DWORD *)(a1 + 8) < Quote_X_Position - 163840 )
    return result;
  if ( *(_DWORD *)(a1 + 12) > Quote_Y_Position + 122880 )
    return result;
  result = Quote_Y_Position - 122880;
  if ( *(_DWORD *)(a1 + 12) < Quote_Y_Position - 122880 )
    return result;
  v11 = *(_DWORD *)(a1 + 116);
  if ( !v11 )
  {
    v2 = RNG_Range(0, 255);
    *(_DWORD *)(a1 + 16) = COS_function(v2);
    *(_DWORD *)(a1 + 32) = *(_DWORD *)(a1 + 8) + 8 * COS_function(v2 + 64);
    v3 = RNG_Range(0, 255);
    *(_DWORD *)(a1 + 20) = SIN_function(v3);
    *(_DWORD *)(a1 + 36) = *(_DWORD *)(a1 + 12) + 8 * SIN_function(v3 + 64);
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 108) = 120;
    *(_DWORD *)(a1 + 120) = RNG_Range(70, 150);
    *(_DWORD *)(a1 + 104) = 14;
    goto LABEL_11;
  }
  if ( v11 == 1 )
  {
LABEL_11:
    if ( ++*(_DWORD *)(a1 + 104) > 15 )
      *(_DWORD *)(a1 + 104) = 14;
    if ( *(_DWORD *)(a1 + 120) )
    {
      --*(_DWORD *)(a1 + 120);
    }
    else
    {
      *(_DWORD *)(a1 + 116) = 2;
      *(_DWORD *)(a1 + 104) = 18;
    }
    goto LABEL_23;
  }
  if ( v11 == 2 )
  {
    if ( ++*(_DWORD *)(a1 + 104) > 19 )
      *(_DWORD *)(a1 + 104) = 18;
    if ( ++*(_DWORD *)(a1 + 120) > 30 )
    {
      v4 = Angle_Calculator(*(_DWORD *)(a1 + 8) - Quote_X_Position, *(_DWORD *)(a1 + 12) - Quote_Y_Position);
      v5 = RNG_Range(-6, 6) + v4;
      Y_Velocity = 3 * SIN_function(v5);
      X_Velocity = 3 * COS_function(v5);
      NPC_Create(156, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), X_Velocity, Y_Velocity, 0, 0, 256);
      if ( !(*(_BYTE *)&Player_Flags & 2) )
        Play_Sound_Effect(39, 1);
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 120) = RNG_Range(70, 150);
      *(_DWORD *)(a1 + 104) = 14;
      *(_DWORD *)(a1 + 100) = 0;
    }
  }
LABEL_23:
  if ( Quote_X_Position >= *(_DWORD *)(a1 + 8) )
    *(_DWORD *)(a1 + 76) = 2;
  else
    *(_DWORD *)(a1 + 76) = 0;
  if ( *(_DWORD *)(a1 + 32) < *(_DWORD *)(a1 + 8) )
    *(_DWORD *)(a1 + 16) -= 16;
  if ( *(_DWORD *)(a1 + 32) > *(_DWORD *)(a1 + 8) )
    *(_DWORD *)(a1 + 16) += 16;
  if ( *(_DWORD *)(a1 + 36) < *(_DWORD *)(a1 + 12) )
    *(_DWORD *)(a1 + 20) -= 16;
  if ( *(_DWORD *)(a1 + 36) > *(_DWORD *)(a1 + 12) )
    *(_DWORD *)(a1 + 20) += 16;
  if ( *(_DWORD *)(a1 + 16) > 512 )
    *(_DWORD *)(a1 + 16) = 512;
  if ( *(_DWORD *)(a1 + 16) < -512 )
    *(_DWORD *)(a1 + 16) = -512;
  if ( *(_DWORD *)(a1 + 20) > 512 )
    *(_DWORD *)(a1 + 20) = 512;
  if ( *(_DWORD *)(a1 + 20) < -512 )
    *(_DWORD *)(a1 + 20) = -512;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 76) )
  {
    v9 = (char *)&unk_4983F0 + 16 * *(_DWORD *)(a1 + 104);
    v10 = a1 + 84;
    *(_DWORD *)v10 = *(_DWORD *)v9;
    *(_DWORD *)(v10 + 4) = *((_DWORD *)v9 + 1);
    result = *((_DWORD *)v9 + 2);
    *(_DWORD *)(v10 + 8) = result;
    *(_DWORD *)(v10 + 12) = *((_DWORD *)v9 + 3);
  }
  else
  {
    v8 = (char *)&unk_4982A0 + 16 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *(_DWORD *)v8;
    *(_DWORD *)(result + 4) = *((_DWORD *)v8 + 1);
    *(_DWORD *)(result + 8) = *((_DWORD *)v8 + 2);
    *(_DWORD *)(result + 12) = *((_DWORD *)v8 + 3);
  }
  if ( *(_DWORD *)(a1 + 64) <= 985 )
  {
    result = a1;
    *(_DWORD *)(a1 + 40) = 154;
    *(_DWORD *)(a1 + 116) = 0;
  }
  return result;
}

//----- (00446B60) --------------------------------------------------------
int __cdecl NPC156(int a1)
{
  int *v1; // ecx@5
  int v2; // edx@5
  int result; // eax@5
  int v4; // [sp+0h] [bp-30h]@3
  int v5; // [sp+4h] [bp-2Ch]@3
  int v6; // [sp+8h] [bp-28h]@3
  int v7; // [sp+Ch] [bp-24h]@3
  int v8; // [sp+10h] [bp-20h]@3
  int v9; // [sp+14h] [bp-1Ch]@3
  int v10; // [sp+18h] [bp-18h]@3
  int v11; // [sp+1Ch] [bp-14h]@3
  int v12; // [sp+20h] [bp-10h]@3
  int v13; // [sp+24h] [bp-Ch]@3
  int v14; // [sp+28h] [bp-8h]@3
  int v15; // [sp+2Ch] [bp-4h]@3

  if ( *(_DWORD *)(a1 + 4) & 0xFF )
  {
    Create_Animated_Effect(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 2, 0);
    *(_BYTE *)a1 = 0;
  }
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  v4 = 96;
  v5 = 112;
  v6 = 112;
  v7 = 128;
  v8 = 112;
  v9 = 112;
  v10 = 128;
  v11 = 128;
  v12 = 128;
  v13 = 112;
  v14 = 144;
  v15 = 128;
  if ( ++*(_DWORD *)(a1 + 104) > 2 )
    *(_DWORD *)(a1 + 104) = 0;
  v1 = &v4 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  *(_DWORD *)(v2 + 8) = v1[2];
  *(_DWORD *)(v2 + 12) = v1[3];
  result = *(_DWORD *)(a1 + 108) + 1;
  *(_DWORD *)(a1 + 108) = result;
  if ( *(_DWORD *)(a1 + 108) > 300 )
  {
    result = Create_Animated_Effect(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 2, 0);
    *(_BYTE *)a1 = 0;
  }
  return result;
}

//----- (00446CA0) --------------------------------------------------------
signed int __cdecl NPC157(int a1)
{
  int v1; // ST10_4@17
  int v2; // ST0C_4@17
  int v3; // ST08_4@17
  int v4; // eax@17
  int v5; // ST10_4@34
  int v6; // ST0C_4@34
  int v7; // ST08_4@34
  int v8; // eax@34
  int v9; // ecx@44
  signed int result; // eax@44
  signed int i; // [sp+4h] [bp-14h]@15
  signed int j; // [sp+4h] [bp-14h]@32

  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 8) += 4096;
      *(_DWORD *)(a1 + 12) += 4096;
      if ( *(_DWORD *)(a1 + 76) )
        *(_DWORD *)(a1 + 116) = 20;
      else
        *(_DWORD *)(a1 + 116) = 10;
      *(_DWORD *)(a1 + 16) = 0;
      *(_DWORD *)(a1 + 20) = 0;
      *(_WORD *)(a1 + 80) |= 0x40u;
      break;
    case 0xA:
      *(_WORD *)(a1 + 80) &= 0xFF7Fu;
      *(_DWORD *)(a1 + 164) = 0;
      if ( Quote_Y_Position < *(_DWORD *)(a1 + 12) + 12800
        && Quote_Y_Position > *(_DWORD *)(a1 + 12) - 204800
        && Quote_X_Position < *(_DWORD *)(a1 + 8) + 12800
        && Quote_X_Position > *(_DWORD *)(a1 + 8) - 12800 )
      {
        *(_DWORD *)(a1 + 116) = 11;
        *(_DWORD *)(a1 + 120) = 0;
      }
      break;
    case 0xB:
      if ( ++*(_DWORD *)(a1 + 120) % 10 == 6 )
        Play_Sound_Effect(107, 1);
      if ( *(_DWORD *)(a1 + 4) & 2 )
      {
        *(_DWORD *)(a1 + 20) = 0;
        *(_DWORD *)(a1 + 76) = 2;
        *(_DWORD *)(a1 + 116) = 20;
        sub_40F310(10);
        Play_Sound_Effect(26, 1);
        for ( i = 0; i < 4; ++i )
        {
          v1 = RNG_Range(-1536, 0);
          v2 = RNG_Range(-341, 341);
          v3 = *(_DWORD *)(a1 + 12) - 0x2000;
          v4 = RNG_Range(-12, 12);
          NPC_Create(4, *(_DWORD *)(a1 + 8) + (v4 << 9), v3, v2, v1, 0, 0, 256);
        }
      }
      else
      {
        if ( Tile_On_Which_Quote_Is & 2 )
        {
          *(_WORD *)(a1 + 80) |= 0x80u;
          *(_DWORD *)(a1 + 164) = 100;
        }
        else
        {
          *(_WORD *)(a1 + 80) &= 0xFF7Fu;
          *(_DWORD *)(a1 + 164) = 0;
        }
        *(_DWORD *)(a1 + 20) -= 32;
      }
      break;
    case 0x14:
      *(_WORD *)(a1 + 80) &= 0xFF7Fu;
      *(_DWORD *)(a1 + 164) = 0;
      if ( Quote_Y_Position > *(_DWORD *)(a1 + 12) - 12800
        && Quote_Y_Position < *(_DWORD *)(a1 + 12) + 204800
        && Quote_X_Position < *(_DWORD *)(a1 + 8) + 12800
        && Quote_X_Position > *(_DWORD *)(a1 + 8) - 12800 )
      {
        *(_DWORD *)(a1 + 116) = 21;
        *(_DWORD *)(a1 + 120) = 0;
      }
      break;
    case 0x15:
      if ( ++*(_DWORD *)(a1 + 120) % 10 == 6 )
        Play_Sound_Effect(107, 1);
      if ( *(_DWORD *)(a1 + 4) & 8 )
      {
        *(_DWORD *)(a1 + 20) = 0;
        *(_DWORD *)(a1 + 76) = 0;
        *(_DWORD *)(a1 + 116) = 10;
        sub_40F310(10);
        Play_Sound_Effect(26, 1);
        for ( j = 0; j < 4; ++j )
        {
          v5 = RNG_Range(-1536, 0);
          v6 = RNG_Range(-341, 341);
          v7 = *(_DWORD *)(a1 + 12) + 0x2000;
          v8 = RNG_Range(-12, 12);
          NPC_Create(4, *(_DWORD *)(a1 + 8) + (v8 << 9), v7, v6, v5, 0, 0, 256);
        }
      }
      else
      {
        if ( Tile_On_Which_Quote_Is & 8 )
        {
          *(_WORD *)(a1 + 80) |= 0x80u;
          *(_DWORD *)(a1 + 164) = 100;
        }
        else
        {
          *(_WORD *)(a1 + 80) &= 0xFF7Fu;
          *(_DWORD *)(a1 + 164) = 0;
        }
        *(_DWORD *)(a1 + 20) += 32;
      }
      break;
    default:
      break;
  }
  if ( *(_DWORD *)(a1 + 20) > 512 )
    *(_DWORD *)(a1 + 20) = 512;
  if ( *(_DWORD *)(a1 + 20) < -512 )
    *(_DWORD *)(a1 + 20) = -512;
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  v9 = a1 + 84;
  *(_DWORD *)v9 = 16;
  *(_DWORD *)(v9 + 4) = 0;
  *(_DWORD *)(v9 + 8) = 48;
  result = 32;
  *(_DWORD *)(v9 + 12) = 32;
  return result;
}
// 49E63C: using guessed type int Tile_On_Which_Quote_Is;

//----- (00447180) --------------------------------------------------------
int __cdecl NPC158(int a1)
{
  int *v1; // eax@25
  int v2; // ecx@25
  int result; // eax@25
  int v4; // [sp+4h] [bp-88h]@1
  int v5; // [sp+8h] [bp-84h]@9
  int v6; // [sp+Ch] [bp-80h]@1
  int v7; // [sp+10h] [bp-7Ch]@1
  int v8; // [sp+14h] [bp-78h]@1
  int v9; // [sp+18h] [bp-74h]@1
  int v10; // [sp+1Ch] [bp-70h]@1
  int v11; // [sp+20h] [bp-6Ch]@1
  int v12; // [sp+24h] [bp-68h]@1
  int v13; // [sp+28h] [bp-64h]@1
  int v14; // [sp+2Ch] [bp-60h]@1
  int v15; // [sp+30h] [bp-5Ch]@1
  int v16; // [sp+34h] [bp-58h]@1
  int v17; // [sp+38h] [bp-54h]@1
  int v18; // [sp+3Ch] [bp-50h]@1
  int v19; // [sp+40h] [bp-4Ch]@1
  int v20; // [sp+44h] [bp-48h]@1
  int v21; // [sp+48h] [bp-44h]@1
  int v22; // [sp+4Ch] [bp-40h]@1
  int v23; // [sp+50h] [bp-3Ch]@1
  int v24; // [sp+54h] [bp-38h]@1
  int v25; // [sp+58h] [bp-34h]@1
  int v26; // [sp+5Ch] [bp-30h]@1
  int v27; // [sp+60h] [bp-2Ch]@1
  int v28; // [sp+64h] [bp-28h]@1
  int v29; // [sp+68h] [bp-24h]@1
  int v30; // [sp+6Ch] [bp-20h]@1
  int v31; // [sp+70h] [bp-1Ch]@1
  int v32; // [sp+74h] [bp-18h]@1
  int v33; // [sp+78h] [bp-14h]@1
  int v34; // [sp+7Ch] [bp-10h]@1
  int v35; // [sp+80h] [bp-Ch]@1
  int v36; // [sp+84h] [bp-8h]@1
  int v37; // [sp+88h] [bp-4h]@1

  v6 = 0;
  v7 = 224;
  v8 = 16;
  v9 = 240;
  v10 = 16;
  v11 = 224;
  v12 = 32;
  v13 = 240;
  v14 = 32;
  v15 = 224;
  v16 = 48;
  v17 = 240;
  v18 = 48;
  v19 = 224;
  v20 = 64;
  v21 = 240;
  v22 = 64;
  v23 = 224;
  v24 = 80;
  v25 = 240;
  v26 = 80;
  v27 = 224;
  v28 = 96;
  v29 = 240;
  v30 = 96;
  v31 = 224;
  v32 = 112;
  v33 = 240;
  v34 = 112;
  v35 = 224;
  v36 = 128;
  v37 = 240;
  v4 = *(_DWORD *)(a1 + 116);
  if ( v4 )
  {
    if ( v4 != 1 )
      goto LABEL_21;
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 1;
    switch ( *(_DWORD *)(a1 + 76) )
    {
      case 0:
        *(_DWORD *)(a1 + 108) = 160;
        break;
      case 1:
        *(_DWORD *)(a1 + 108) = 224;
        break;
      case 2:
        *(_DWORD *)(a1 + 108) = 32;
        break;
      case 3:
        *(_DWORD *)(a1 + 108) = 96;
        break;
      default:
        break;
    }
  }
  *(_DWORD *)(a1 + 16) = 2 * COS_function(*(_BYTE *)(a1 + 108));
  *(_DWORD *)(a1 + 20) = 2 * SIN_function(*(_BYTE *)(a1 + 108));
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  v5 = Angle_Calculator(*(_DWORD *)(a1 + 8) - Quote_X_Position, *(_DWORD *)(a1 + 12) - Quote_Y_Position);
  if ( v5 >= *(_DWORD *)(a1 + 108) )
  {
    if ( v5 - *(_DWORD *)(a1 + 108) >= 128 )
      --*(_DWORD *)(a1 + 108);
    else
      ++*(_DWORD *)(a1 + 108);
  }
  else if ( *(_DWORD *)(a1 + 108) - v5 >= 128 )
  {
    ++*(_DWORD *)(a1 + 108);
  }
  else
  {
    --*(_DWORD *)(a1 + 108);
  }
  if ( *(_DWORD *)(a1 + 108) > 255 )
    *(_DWORD *)(a1 + 108) -= 256;
  if ( *(_DWORD *)(a1 + 108) < 0 )
    *(_DWORD *)(a1 + 108) += 256;
LABEL_21:
  if ( ++*(_DWORD *)(a1 + 100) > 2 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    Create_Animated_Effect(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 7, 4);
  }
  *(_DWORD *)(a1 + 104) = (*(_DWORD *)(a1 + 108) + 16) / 32;
  if ( *(_DWORD *)(a1 + 104) > 7 )
    *(_DWORD *)(a1 + 104) = 7;
  v1 = &v6 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  *(_DWORD *)(v2 + 8) = v1[2];
  result = v1[3];
  *(_DWORD *)(v2 + 12) = result;
  return result;
}

//----- (004474C0) --------------------------------------------------------
int __cdecl NPC159(int a1)
{
  int v1; // ST10_4@7
  int v2; // ST0C_4@7
  int v3; // ST08_4@7
  int v4; // eax@7
  int v5; // edx@16
  int result; // eax@16
  int v7; // ST10_4@17
  int v8; // ST0C_4@17
  int v9; // ST08_4@17
  int v10; // eax@17
  int v11; // [sp+0h] [bp-18h]@1
  signed int i; // [sp+4h] [bp-14h]@5

  v11 = *(_DWORD *)(a1 + 116);
  if ( v11 )
  {
    if ( v11 != 1 )
    {
      if ( v11 == 2 )
      {
        ++*(_DWORD *)(a1 + 120);
        *(_DWORD *)(a1 + 20) += 64;
        if ( *(_DWORD *)(a1 + 12) > 327680 )
          *(_BYTE *)a1 = 0;
      }
      goto LABEL_16;
    }
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 1;
    for ( i = 0; i < 8; ++i )
    {
      v1 = RNG_Range(-341, 341);
      v2 = RNG_Range(-341, 341);
      v3 = *(_DWORD *)(a1 + 12) + (RNG_Range(-16, 16) << 9);
      v4 = RNG_Range(-16, 16);
      NPC_Create(4, *(_DWORD *)(a1 + 8) + (v4 << 9), v3, v2, v1, 0, 0, 256);
    }
  }
  if ( ++*(_DWORD *)(a1 + 120) > 50 )
  {
    *(_DWORD *)(a1 + 116) = 2;
    *(_DWORD *)(a1 + 16) = -256;
  }
  if ( *(_DWORD *)(a1 + 120) / 2 % 2 )
    *(_DWORD *)(a1 + 8) += 512;
  else
    *(_DWORD *)(a1 + 8) -= 512;
LABEL_16:
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  v5 = a1 + 84;
  *(_DWORD *)v5 = 144;
  *(_DWORD *)(v5 + 4) = 128;
  *(_DWORD *)(v5 + 8) = 192;
  *(_DWORD *)(v5 + 12) = 200;
  result = *(_DWORD *)(a1 + 120) % 8;
  if ( result == 1 )
  {
    v7 = RNG_Range(-341, 341);
    v8 = RNG_Range(-341, 341);
    v9 = *(_DWORD *)(a1 + 12) + (RNG_Range(-16, 16) << 9);
    v10 = RNG_Range(-16, 16);
    result = NPC_Create(4, *(_DWORD *)(a1 + 8) + (v10 << 9), v9, v8, v7, 0, 0, 256);
  }
  return result;
}

//----- (00447700) --------------------------------------------------------
int __cdecl NPC160(int a1)
{
  int v1; // ST10_4@13
  int v2; // ST0C_4@13
  int v3; // ST08_4@13
  int v4; // eax@13
  int v5; // ST10_4@24
  int v6; // ST0C_4@24
  int v7; // ST08_4@24
  int v8; // eax@24
  int *v9; // edx@40
  int result; // eax@40
  int *v11; // edx@41
  int v12; // [sp+8h] [bp-88h]@39
  int v13; // [sp+Ch] [bp-84h]@39
  int v14; // [sp+10h] [bp-80h]@39
  int v15; // [sp+14h] [bp-7Ch]@39
  int v16; // [sp+18h] [bp-78h]@39
  int v17; // [sp+1Ch] [bp-74h]@39
  int v18; // [sp+20h] [bp-70h]@39
  int v19; // [sp+24h] [bp-6Ch]@39
  int v20; // [sp+28h] [bp-68h]@39
  int v21; // [sp+2Ch] [bp-64h]@39
  int v22; // [sp+30h] [bp-60h]@39
  int v23; // [sp+34h] [bp-5Ch]@39
  int v24; // [sp+38h] [bp-58h]@39
  int v25; // [sp+3Ch] [bp-54h]@39
  int v26; // [sp+40h] [bp-50h]@39
  int v27; // [sp+44h] [bp-4Ch]@39
  int v28; // [sp+48h] [bp-48h]@39
  int v29; // [sp+4Ch] [bp-44h]@39
  int v30; // [sp+50h] [bp-40h]@39
  int v31; // [sp+54h] [bp-3Ch]@39
  int v32; // [sp+58h] [bp-38h]@39
  int v33; // [sp+5Ch] [bp-34h]@39
  int v34; // [sp+60h] [bp-30h]@39
  int v35; // [sp+64h] [bp-2Ch]@39
  int v36; // [sp+68h] [bp-28h]@39
  int v37; // [sp+6Ch] [bp-24h]@39
  int v38; // [sp+70h] [bp-20h]@39
  int v39; // [sp+74h] [bp-1Ch]@39
  int v40; // [sp+78h] [bp-18h]@39
  int v41; // [sp+7Ch] [bp-14h]@39
  int v42; // [sp+80h] [bp-10h]@39
  int v43; // [sp+84h] [bp-Ch]@39
  int i; // [sp+8Ch] [bp-4h]@11

  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_WORD *)(a1 + 80) &= 0xFFFEu;
      *(_DWORD *)(a1 + 116) = 1;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( *(_DWORD *)(a1 + 8) >= Quote_X_Position )
        *(_DWORD *)(a1 + 76) = 0;
      else
        *(_DWORD *)(a1 + 76) = 2;
      *(_DWORD *)(a1 + 20) = 2560;
      if ( *(_DWORD *)(a1 + 12) >= 0x10000 )
      {
        *(_WORD *)(a1 + 80) &= 0xFFF7u;
        *(_DWORD *)(a1 + 116) = 2;
      }
      else
      {
        ++*(_DWORD *)(a1 + 108);
      }
      break;
    case 2:
      *(_DWORD *)(a1 + 20) = 2560;
      if ( *(_DWORD *)(a1 + 4) & 8 )
      {
        sub_4702D0(161, 1);
        for ( i = 0; i < 4; ++i )
        {
          v1 = RNG_Range(-1536, 0);
          v2 = RNG_Range(-341, 341);
          v3 = *(_DWORD *)(a1 + 12) + (RNG_Range(-12, 12) << 9);
          v4 = RNG_Range(-12, 12);
          NPC_Create(4, *(_DWORD *)(a1 + 8) + (v4 << 9), v3, v2, v1, 0, 0, 256);
        }
        *(_DWORD *)(a1 + 116) = 3;
        *(_DWORD *)(a1 + 120) = 0;
        sub_40F310(30);
        Play_Sound_Effect(26, 1);
        Play_Sound_Effect(72, 1);
      }
      if ( *(_DWORD *)(a1 + 12) < Quote_Y_Position && Tile_On_Which_Quote_Is & 8 )
        *(_DWORD *)(a1 + 164) = 20;
      else
        *(_DWORD *)(a1 + 164) = 0;
      break;
    case 3:
      *(_DWORD *)(a1 + 164) = 20;
      *(_DWORD *)(a1 + 164) = 0;
      if ( ++*(_DWORD *)(a1 + 120) > 24 )
      {
        *(_DWORD *)(a1 + 116) = 4;
        *(_DWORD *)(a1 + 108) = 0;
        *(_DWORD *)(a1 + 112) = 0;
      }
      break;
    case 4:
      dword_4BBA30 = *(_DWORD *)(a1 + 8);
      dword_4BBA28 = *(_DWORD *)(a1 + 12);
      if ( *(_BYTE *)(a1 + 156) % 2 == 1 )
      {
        v5 = RNG_Range(-1536, 1536);
        v6 = RNG_Range(-1536, 1536);
        v7 = *(_DWORD *)(a1 + 12) + (RNG_Range(-12, 12) << 9);
        v8 = RNG_Range(-12, 12);
        NPC_Create(161, *(_DWORD *)(a1 + 8) + (v8 << 9), v7, v6, v5, 0, 0, 256);
        if ( ++*(_DWORD *)(a1 + 108) > 30 )
        {
          *(_DWORD *)(a1 + 108) = 0;
          *(_DWORD *)(a1 + 116) = 5;
          *(_DWORD *)(a1 + 20) = -3072;
          *(_WORD *)(a1 + 80) |= 8u;
        }
      }
      break;
    case 5:
      dword_4BBA30 = *(_DWORD *)(a1 + 8);
      dword_4BBA28 = *(_DWORD *)(a1 + 12);
      if ( ++*(_DWORD *)(a1 + 108) > 60 )
      {
        *(_DWORD *)(a1 + 108) = 0;
        *(_DWORD *)(a1 + 116) = 6;
      }
      break;
    case 6:
      dword_4BBA30 = Quote_X_Position;
      dword_4BBA28 = 3276800;
      if ( ++*(_DWORD *)(a1 + 108) > 110 )
      {
        *(_DWORD *)(a1 + 108) = 10;
        *(_DWORD *)(a1 + 8) = Quote_X_Position;
        *(_DWORD *)(a1 + 12) = 0;
        *(_DWORD *)(a1 + 20) = 1535;
        *(_DWORD *)(a1 + 116) = 1;
      }
      break;
    default:
      break;
  }
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
    case 1:
      *(_DWORD *)(a1 + 104) = 3;
      break;
    case 2:
      *(_DWORD *)(a1 + 104) = 3;
      break;
    case 3:
      *(_DWORD *)(a1 + 104) = 2;
      break;
    case 4:
      *(_DWORD *)(a1 + 104) = 0;
      break;
    case 5:
      *(_DWORD *)(a1 + 104) = 3;
      break;
    case 6:
      *(_DWORD *)(a1 + 104) = 3;
      break;
    default:
      break;
  }
  v28 = 0;
  v29 = 0;
  v30 = 40;
  v31 = 24;
  v32 = 40;
  v33 = 0;
  v34 = 80;
  v35 = 24;
  v36 = 80;
  v37 = 0;
  v38 = 120;
  v39 = 24;
  v40 = 120;
  v41 = 0;
  v42 = 160;
  v43 = 24;
  v12 = 0;
  v13 = 24;
  v14 = 40;
  v15 = 48;
  v16 = 40;
  v17 = 24;
  v18 = 80;
  v19 = 48;
  v20 = 80;
  v21 = 24;
  v22 = 120;
  v23 = 48;
  v24 = 120;
  v25 = 24;
  v26 = 160;
  v27 = 48;
  if ( *(_DWORD *)(a1 + 76) )
  {
    v11 = &v12 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v11;
    *(_DWORD *)(result + 4) = v11[1];
    *(_DWORD *)(result + 8) = v11[2];
    *(_DWORD *)(result + 12) = v11[3];
  }
  else
  {
    v9 = &v28 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v9;
    *(_DWORD *)(result + 4) = v9[1];
    *(_DWORD *)(result + 8) = v9[2];
    *(_DWORD *)(result + 12) = v9[3];
  }
  return result;
}
// 49E63C: using guessed type int Tile_On_Which_Quote_Is;
// 4BBA28: using guessed type int dword_4BBA28;
// 4BBA30: using guessed type int dword_4BBA30;

//----- (00447CB0) --------------------------------------------------------
int __cdecl NPC161(int a1)
{
  int *v1; // edx@21
  int result; // eax@21
  int v3; // [sp+0h] [bp-30h]@21
  int v4; // [sp+4h] [bp-2Ch]@21
  int v5; // [sp+8h] [bp-28h]@21
  int v6; // [sp+Ch] [bp-24h]@21
  int v7; // [sp+10h] [bp-20h]@21
  int v8; // [sp+14h] [bp-1Ch]@21
  int v9; // [sp+18h] [bp-18h]@21
  int v10; // [sp+1Ch] [bp-14h]@21
  int v11; // [sp+20h] [bp-10h]@21
  int v12; // [sp+24h] [bp-Ch]@21
  int v13; // [sp+28h] [bp-8h]@21
  int v14; // [sp+2Ch] [bp-4h]@21

  *(_DWORD *)(a1 + 68) = 0;
  if ( *(_DWORD *)(a1 + 8) >= dword_4BBA30 )
    *(_DWORD *)(a1 + 16) -= 64;
  else
    *(_DWORD *)(a1 + 16) += 64;
  if ( *(_DWORD *)(a1 + 12) >= dword_4BBA28 )
    *(_DWORD *)(a1 + 20) -= 64;
  else
    *(_DWORD *)(a1 + 20) += 64;
  if ( *(_DWORD *)(a1 + 16) < -4605 )
    *(_DWORD *)(a1 + 16) = -4605;
  if ( *(_DWORD *)(a1 + 16) > 4605 )
    *(_DWORD *)(a1 + 16) = 4605;
  if ( *(_DWORD *)(a1 + 20) < -4605 )
    *(_DWORD *)(a1 + 20) = -4605;
  if ( *(_DWORD *)(a1 + 20) > 4605 )
    *(_DWORD *)(a1 + 20) = 4605;
  if ( *(_DWORD *)(a1 + 64) < 100 )
  {
    *(_WORD *)(a1 + 80) &= 0xFFDFu;
    *(_WORD *)(a1 + 80) &= 0xFFFBu;
    *(_DWORD *)(a1 + 164) = 0;
    *(_DWORD *)(a1 + 104) = 2;
  }
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 104) < 2 )
    *(_DWORD *)(a1 + 104) = RNG_Range(0, 10) != 2;
  v3 = 0;
  v4 = 48;
  v5 = 16;
  v6 = 64;
  v7 = 16;
  v8 = 48;
  v9 = 32;
  v10 = 64;
  v11 = 32;
  v12 = 48;
  v13 = 48;
  v14 = 64;
  v1 = &v3 + 4 * *(_DWORD *)(a1 + 104);
  result = a1 + 84;
  *(_DWORD *)result = *v1;
  *(_DWORD *)(result + 4) = v1[1];
  *(_DWORD *)(result + 8) = v1[2];
  *(_DWORD *)(result + 12) = v1[3];
  return result;
}
// 4BBA28: using guessed type int dword_4BBA28;
// 4BBA30: using guessed type int dword_4BBA30;

//----- (00447E90) --------------------------------------------------------
int __cdecl NPC162(int a1)
{
  int v1; // ST10_4@4
  int v2; // ST0C_4@4
  int v3; // ST08_4@4
  int v4; // eax@4
  int v5; // edx@9
  int v6; // edx@10
  int v7; // ST08_4@13
  int v8; // eax@13
  int v9; // edx@19
  int v10; // edx@20
  int v11; // ecx@22
  int v12; // ST0C_4@24
  int v13; // ST08_4@24
  int v14; // eax@24
  int result; // eax@30
  signed int i; // [sp+34h] [bp-4h]@2

  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      sub_4702D0(161, 1);
      Play_Sound_Effect(72, 1);
      for ( i = 0; i < 10; ++i )
      {
        v1 = RNG_Range(-1536, 1536);
        v2 = RNG_Range(-1536, 1536);
        v3 = *(_DWORD *)(a1 + 12) + (RNG_Range(-12, 12) << 9);
        v4 = RNG_Range(-12, 12);
        NPC_Create(4, *(_DWORD *)(a1 + 8) + (v4 << 9), v3, v2, v1, 0, 0, 256);
      }
      if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
        *(_DWORD *)(a1 + 76) = 2;
      else
        *(_DWORD *)(a1 + 76) = 0;
      if ( *(_DWORD *)(a1 + 76) )
      {
        v6 = a1 + 84;
        *(_DWORD *)v6 = 40;
        *(_DWORD *)(v6 + 4) = 24;
        *(_DWORD *)(v6 + 8) = 80;
        *(_DWORD *)(v6 + 12) = 48;
      }
      else
      {
        v5 = a1 + 84;
        *(_DWORD *)v5 = 40;
        *(_DWORD *)(v5 + 4) = 0;
        *(_DWORD *)(v5 + 8) = 80;
        *(_DWORD *)(v5 + 12) = 24;
      }
      *(_DWORD *)(a1 + 108) = 0;
      *(_DWORD *)(a1 + 116) = 1;
      goto LABEL_12;
    case 1:
LABEL_12:
      if ( !(++*(_DWORD *)(a1 + 108) % 4) )
      {
        v7 = *(_DWORD *)(a1 + 12) + (RNG_Range(-12, 12) << 9);
        v8 = RNG_Range(-12, 12);
        NPC_Create(161, *(_DWORD *)(a1 + 8) + (v8 << 9), v7, 0, 0, 0, 0, 256);
      }
      if ( *(_DWORD *)(a1 + 108) > 160 )
      {
        *(_DWORD *)(a1 + 108) = 0;
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 36) = *(_DWORD *)(a1 + 12);
      }
      break;
    case 2:
      sub_40F310(2);
      if ( ++*(_DWORD *)(a1 + 108) > 240 )
      {
        v11 = a1 + 84;
        *(_DWORD *)v11 = 0;
        *(_DWORD *)(v11 + 4) = 0;
        *(_DWORD *)(v11 + 8) = 0;
        *(_DWORD *)(v11 + 12) = 0;
        *(_DWORD *)(a1 + 108) = 0;
        *(_DWORD *)(a1 + 116) = 3;
      }
      else
      {
        if ( *(_DWORD *)(a1 + 76) )
        {
          v10 = a1 + 84;
          *(_DWORD *)v10 = 40;
          *(_DWORD *)(v10 + 4) = 24;
          *(_DWORD *)(v10 + 8) = 80;
          *(_DWORD *)(v10 + 12) = 48;
        }
        else
        {
          v9 = a1 + 84;
          *(_DWORD *)v9 = 40;
          *(_DWORD *)(v9 + 4) = 0;
          *(_DWORD *)(v9 + 8) = 80;
          *(_DWORD *)(v9 + 12) = 24;
        }
        *(_DWORD *)(a1 + 88) += *(_DWORD *)(a1 + 108) / 8;
        *(_DWORD *)(a1 + 12) = *(_DWORD *)(a1 + 36) + (*(_DWORD *)(a1 + 108) / 8 << 9);
        *(_DWORD *)(a1 + 84) -= *(_DWORD *)(a1 + 108) / 2 % 2;
      }
      if ( *(_DWORD *)(a1 + 108) % 3 == 2 )
      {
        v12 = RNG_Range(-512, 512);
        v13 = *(_DWORD *)(a1 + 12) - 6144;
        v14 = RNG_Range(-12, 12);
        NPC_Create(161, *(_DWORD *)(a1 + 8) + (v14 << 9), v13, v12, 256, 0, 0, 256);
      }
      if ( *(_DWORD *)(a1 + 108) % 4 == 2 )
        Play_Sound_Effect(21, 1);
      break;
    case 3:
      if ( ++*(_DWORD *)(a1 + 108) >= 60 )
      {
        sub_4702D0(161, 1);
        *(_BYTE *)a1 = 0;
      }
      break;
    default:
      break;
  }
  result = a1;
  dword_4BBA30 = *(_DWORD *)(a1 + 8);
  dword_4BBA28 = -512000;
  return result;
}
// 4BBA28: using guessed type int dword_4BBA28;
// 4BBA30: using guessed type int dword_4BBA30;

//----- (004482A0) --------------------------------------------------------
int __cdecl NPC163(int a1)
{
  int *v1; // edx@12
  int result; // eax@12
  int *v3; // edx@13
  int v4; // [sp+0h] [bp-44h]@1
  int v5; // [sp+4h] [bp-40h]@1
  int v6; // [sp+8h] [bp-3Ch]@1
  int v7; // [sp+Ch] [bp-38h]@1
  int v8; // [sp+10h] [bp-34h]@1
  int v9; // [sp+14h] [bp-30h]@1
  int v10; // [sp+18h] [bp-2Ch]@1
  int v11; // [sp+1Ch] [bp-28h]@1
  int v12; // [sp+20h] [bp-24h]@1
  int v13; // [sp+24h] [bp-20h]@1
  int v14; // [sp+28h] [bp-1Ch]@1
  int v15; // [sp+2Ch] [bp-18h]@1
  int v16; // [sp+30h] [bp-14h]@1
  int v17; // [sp+34h] [bp-10h]@1
  int v18; // [sp+38h] [bp-Ch]@1
  int v19; // [sp+3Ch] [bp-8h]@1
  int v20; // [sp+40h] [bp-4h]@1

  v13 = 192;
  v14 = 0;
  v15 = 208;
  v16 = 16;
  v17 = 208;
  v18 = 0;
  v19 = 224;
  v20 = 16;
  v5 = 192;
  v6 = 16;
  v7 = 208;
  v8 = 32;
  v9 = 208;
  v10 = 16;
  v11 = 224;
  v12 = 32;
  v4 = *(_DWORD *)(a1 + 116);
  if ( v4 )
  {
    if ( v4 != 1 )
    {
      if ( v4 == 2 && ++*(_DWORD *)(a1 + 120) > 8 )
      {
        *(_DWORD *)(a1 + 116) = 1;
        *(_DWORD *)(a1 + 104) = 0;
      }
      goto LABEL_11;
    }
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 104) = 0;
    *(_DWORD *)(a1 + 100) = 0;
  }
  if ( RNG_Range(0, 120) == 10 )
  {
    *(_DWORD *)(a1 + 116) = 2;
    *(_DWORD *)(a1 + 120) = 0;
    *(_DWORD *)(a1 + 104) = 1;
  }
LABEL_11:
  if ( *(_DWORD *)(a1 + 76) )
  {
    v3 = &v5 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v3;
    *(_DWORD *)(result + 4) = v3[1];
    *(_DWORD *)(result + 8) = v3[2];
    *(_DWORD *)(result + 12) = v3[3];
  }
  else
  {
    v1 = &v13 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v1;
    *(_DWORD *)(result + 4) = v1[1];
    *(_DWORD *)(result + 8) = v1[2];
    *(_DWORD *)(result + 12) = v1[3];
  }
  return result;
}

//----- (00448410) --------------------------------------------------------
int __cdecl NPC164(int a1)
{
  int *v1; // edx@12
  int result; // eax@12
  int *v3; // edx@13
  int v4; // [sp+0h] [bp-44h]@1
  int v5; // [sp+4h] [bp-40h]@1
  int v6; // [sp+8h] [bp-3Ch]@1
  int v7; // [sp+Ch] [bp-38h]@1
  int v8; // [sp+10h] [bp-34h]@1
  int v9; // [sp+14h] [bp-30h]@1
  int v10; // [sp+18h] [bp-2Ch]@1
  int v11; // [sp+1Ch] [bp-28h]@1
  int v12; // [sp+20h] [bp-24h]@1
  int v13; // [sp+24h] [bp-20h]@1
  int v14; // [sp+28h] [bp-1Ch]@1
  int v15; // [sp+2Ch] [bp-18h]@1
  int v16; // [sp+30h] [bp-14h]@1
  int v17; // [sp+34h] [bp-10h]@1
  int v18; // [sp+38h] [bp-Ch]@1
  int v19; // [sp+3Ch] [bp-8h]@1
  int v20; // [sp+40h] [bp-4h]@1

  v13 = 224;
  v14 = 0;
  v15 = 240;
  v16 = 16;
  v17 = 240;
  v18 = 0;
  v19 = 256;
  v20 = 16;
  v5 = 224;
  v6 = 16;
  v7 = 240;
  v8 = 32;
  v9 = 240;
  v10 = 16;
  v11 = 256;
  v12 = 32;
  v4 = *(_DWORD *)(a1 + 116);
  if ( v4 )
  {
    if ( v4 != 1 )
    {
      if ( v4 == 2 && ++*(_DWORD *)(a1 + 120) > 8 )
      {
        *(_DWORD *)(a1 + 116) = 1;
        *(_DWORD *)(a1 + 104) = 0;
      }
      goto LABEL_11;
    }
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 104) = 0;
    *(_DWORD *)(a1 + 100) = 0;
  }
  if ( RNG_Range(0, 120) == 10 )
  {
    *(_DWORD *)(a1 + 116) = 2;
    *(_DWORD *)(a1 + 120) = 0;
    *(_DWORD *)(a1 + 104) = 1;
  }
LABEL_11:
  if ( *(_DWORD *)(a1 + 76) )
  {
    v3 = &v5 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v3;
    *(_DWORD *)(result + 4) = v3[1];
    *(_DWORD *)(result + 8) = v3[2];
    *(_DWORD *)(result + 12) = v3[3];
  }
  else
  {
    v1 = &v13 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v1;
    *(_DWORD *)(result + 4) = v1[1];
    *(_DWORD *)(result + 8) = v1[2];
    *(_DWORD *)(result + 12) = v1[3];
  }
  return result;
}

//----- (00448580) --------------------------------------------------------
int __cdecl NPC165(int a1)
{
  int result; // eax@13
  int *v2; // edx@14
  int v3; // [sp+0h] [bp-34h]@1
  int v4; // [sp+4h] [bp-30h]@1
  int v5; // [sp+8h] [bp-2Ch]@1
  int v6; // [sp+Ch] [bp-28h]@1
  int v7; // [sp+10h] [bp-24h]@1
  int v8; // [sp+14h] [bp-20h]@1
  int v9; // [sp+18h] [bp-1Ch]@1
  int v10; // [sp+1Ch] [bp-18h]@1
  int v11; // [sp+20h] [bp-14h]@1
  int v12; // [sp+24h] [bp-10h]@1
  int v13; // [sp+28h] [bp-Ch]@1
  int v14; // [sp+2Ch] [bp-8h]@1
  int v15; // [sp+30h] [bp-4h]@1

  v4 = 192;
  v5 = 96;
  v6 = 208;
  v7 = 112;
  v8 = 208;
  v9 = 96;
  v10 = 224;
  v11 = 112;
  v12 = 144;
  v13 = 96;
  v14 = 160;
  v15 = 112;
  v3 = *(_DWORD *)(a1 + 116);
  if ( v3 )
  {
    if ( v3 != 1 )
      goto LABEL_12;
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 12) += 5120;
  }
  *(_DWORD *)(a1 + 104) = *(_DWORD *)(a1 + 76) == 2
                       && Quote_X_Position > *(_DWORD *)(a1 + 8) - 0x4000
                       && Quote_X_Position < *(_DWORD *)(a1 + 8) + 0x4000
                       && Quote_Y_Position > *(_DWORD *)(a1 + 12) - 0x2000
                       && Quote_Y_Position < *(_DWORD *)(a1 + 12) + 0x2000;
LABEL_12:
  if ( *(_DWORD *)(a1 + 76) )
  {
    v2 = &v4 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v2;
    *(_DWORD *)(result + 4) = v2[1];
    *(_DWORD *)(result + 8) = v2[2];
    *(_DWORD *)(result + 12) = v2[3];
  }
  else
  {
    result = a1 + 84;
    *(_DWORD *)result = v12;
    *(_DWORD *)(result + 4) = v13;
    *(_DWORD *)(result + 8) = v14;
    *(_DWORD *)(result + 12) = v15;
  }
  return result;
}

//----- (004486E0) --------------------------------------------------------
int __cdecl NPC166(int a1)
{
  int *v1; // ecx@11
  int v2; // edx@11
  int result; // eax@11
  int v4; // [sp+0h] [bp-24h]@1
  int v5; // [sp+4h] [bp-20h]@1
  int v6; // [sp+8h] [bp-1Ch]@1
  int v7; // [sp+Ch] [bp-18h]@1
  int v8; // [sp+10h] [bp-14h]@1
  int v9; // [sp+14h] [bp-10h]@1
  int v10; // [sp+18h] [bp-Ch]@1
  int v11; // [sp+1Ch] [bp-8h]@1
  int v12; // [sp+20h] [bp-4h]@1

  v5 = 144;
  v6 = 104;
  v7 = 184;
  v8 = 128;
  v9 = 184;
  v10 = 104;
  v11 = 224;
  v12 = 128;
  v4 = *(_DWORD *)(a1 + 116);
  if ( v4 )
  {
    if ( v4 != 1 )
    {
      if ( v4 == 2 && ++*(_DWORD *)(a1 + 120) > 8 )
      {
        *(_DWORD *)(a1 + 116) = 1;
        *(_DWORD *)(a1 + 104) = 0;
      }
      goto LABEL_11;
    }
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 104) = 0;
    *(_DWORD *)(a1 + 100) = 0;
  }
  if ( RNG_Range(0, 120) == 10 )
  {
    *(_DWORD *)(a1 + 116) = 2;
    *(_DWORD *)(a1 + 120) = 0;
    *(_DWORD *)(a1 + 104) = 1;
  }
LABEL_11:
  v1 = &v5 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  result = v1[2];
  *(_DWORD *)(v2 + 8) = result;
  *(_DWORD *)(v2 + 12) = v1[3];
  return result;
}

//----- (004487F0) --------------------------------------------------------
int __cdecl NPC167(int a1)
{
  int v1; // ST10_4@12
  int v2; // ST0C_4@12
  int v3; // ST08_4@12
  int v4; // eax@12
  int *v5; // edx@14
  int result; // eax@14
  signed int i; // [sp+4h] [bp-34h]@10
  int v8; // [sp+8h] [bp-30h]@1
  int v9; // [sp+Ch] [bp-2Ch]@1
  int v10; // [sp+10h] [bp-28h]@1
  int v11; // [sp+14h] [bp-24h]@1
  int v12; // [sp+18h] [bp-20h]@1
  int v13; // [sp+1Ch] [bp-1Ch]@1
  int v14; // [sp+20h] [bp-18h]@1
  int v15; // [sp+24h] [bp-14h]@1
  int v16; // [sp+28h] [bp-10h]@1
  int v17; // [sp+2Ch] [bp-Ch]@1
  int v18; // [sp+30h] [bp-8h]@1
  int v19; // [sp+34h] [bp-4h]@1

  v8 = 304;
  v9 = 0;
  v10 = 320;
  v11 = 16;
  v12 = 304;
  v13 = 16;
  v14 = 320;
  v15 = 32;
  v16 = 0;
  v17 = 0;
  v18 = 0;
  v19 = 0;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 104) = 1;
      break;
    case 0xA:
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 20) += 64;
      if ( *(_DWORD *)(a1 + 20) > 1535 )
        *(_DWORD *)(a1 + 20) = 1535;
      *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
      break;
    case 0x14:
      *(_DWORD *)(a1 + 116) = 21;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 104) = 0;
      Play_Sound_Effect(29, 1);
      goto LABEL_7;
    case 0x15:
LABEL_7:
      if ( ++*(_DWORD *)(a1 + 104) > 2 )
        *(_DWORD *)(a1 + 104) = 1;
      if ( ++*(_DWORD *)(a1 + 120) > 100 )
      {
        for ( i = 0; i < 4; ++i )
        {
          v1 = RNG_Range(-1536, 0);
          v2 = RNG_Range(-341, 341);
          v3 = *(_DWORD *)(a1 + 12) + (RNG_Range(-12, 12) << 9);
          v4 = RNG_Range(-12, 12);
          NPC_Create(4, *(_DWORD *)(a1 + 8) + (v4 << 9), v3, v2, v1, 0, 0, 256);
        }
        *(_BYTE *)a1 = 0;
      }
      break;
    default:
      break;
  }
  v5 = &v8 + 4 * *(_DWORD *)(a1 + 104);
  result = a1 + 84;
  *(_DWORD *)result = *v5;
  *(_DWORD *)(result + 4) = v5[1];
  *(_DWORD *)(result + 8) = v5[2];
  *(_DWORD *)(result + 12) = v5[3];
  return result;
}

//----- (00448A10) --------------------------------------------------------
signed int __cdecl NPC168(int a1)
{
  int v1; // ecx@13
  signed int result; // eax@13

  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      break;
    case 0xA:
      *(_DWORD *)(a1 + 116) = 11;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 32) = *(_DWORD *)(a1 + 8);
      goto LABEL_4;
    case 0xB:
LABEL_4:
      ++*(_DWORD *)(a1 + 120);
      *(_DWORD *)(a1 + 8) = *(_DWORD *)(a1 + 32);
      if ( *(_DWORD *)(a1 + 120) / 3 % 2 )
        *(_DWORD *)(a1 + 8) += 512;
      break;
    case 0x14:
      *(_DWORD *)(a1 + 116) = 21;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 20) = -1024;
      *(_DWORD *)(a1 + 16) = 256;
      Play_Sound_Effect(25, 1);
      goto LABEL_8;
    case 0x15:
LABEL_8:
      *(_DWORD *)(a1 + 20) += 16;
      *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
      *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
      if ( *(_DWORD *)(a1 + 120) && *(_DWORD *)(a1 + 4) & 8 )
      {
        Play_Sound_Effect(35, 1);
        sub_40F310(40);
        *(_DWORD *)(a1 + 116) = 0;
      }
      if ( !*(_DWORD *)(a1 + 120) )
        ++*(_DWORD *)(a1 + 120);
      break;
    default:
      break;
  }
  v1 = a1 + 84;
  *(_DWORD *)v1 = 264;
  *(_DWORD *)(v1 + 4) = 56;
  *(_DWORD *)(v1 + 8) = 320;
  result = 96;
  *(_DWORD *)(v1 + 12) = 96;
  return result;
}

//----- (00448BE0) --------------------------------------------------------
int __cdecl NPC169(int a1)
{
  int *v1; // eax@74
  int v2; // ecx@74
  int result; // eax@74
  int *v4; // eax@75
  int v5; // ecx@75
  int v6; // [sp+4h] [bp-120h]@73
  int v7; // [sp+8h] [bp-11Ch]@73
  int v8; // [sp+Ch] [bp-118h]@73
  int v9; // [sp+10h] [bp-114h]@73
  int v10; // [sp+14h] [bp-110h]@73
  int v11; // [sp+18h] [bp-10Ch]@73
  int v12; // [sp+1Ch] [bp-108h]@73
  int v13; // [sp+20h] [bp-104h]@73
  int v14; // [sp+24h] [bp-100h]@73
  int v15; // [sp+28h] [bp-FCh]@73
  int v16; // [sp+2Ch] [bp-F8h]@73
  int v17; // [sp+30h] [bp-F4h]@73
  int v18; // [sp+34h] [bp-F0h]@73
  int v19; // [sp+38h] [bp-ECh]@73
  int v20; // [sp+3Ch] [bp-E8h]@73
  int v21; // [sp+40h] [bp-E4h]@73
  int v22; // [sp+44h] [bp-E0h]@73
  int v23; // [sp+48h] [bp-DCh]@73
  int v24; // [sp+4Ch] [bp-D8h]@73
  int v25; // [sp+50h] [bp-D4h]@73
  int v26; // [sp+54h] [bp-D0h]@73
  int v27; // [sp+58h] [bp-CCh]@73
  int v28; // [sp+5Ch] [bp-C8h]@73
  int v29; // [sp+60h] [bp-C4h]@73
  int v30; // [sp+64h] [bp-C0h]@73
  int v31; // [sp+68h] [bp-BCh]@73
  int v32; // [sp+6Ch] [bp-B8h]@73
  int v33; // [sp+70h] [bp-B4h]@73
  int v34; // [sp+74h] [bp-B0h]@73
  int v35; // [sp+78h] [bp-ACh]@73
  int v36; // [sp+7Ch] [bp-A8h]@73
  int v37; // [sp+80h] [bp-A4h]@73
  int v38; // [sp+84h] [bp-A0h]@73
  int v39; // [sp+88h] [bp-9Ch]@73
  int v40; // [sp+8Ch] [bp-98h]@73
  int v41; // [sp+90h] [bp-94h]@73
  int v42; // [sp+94h] [bp-90h]@73
  int v43; // [sp+98h] [bp-8Ch]@73
  int v44; // [sp+9Ch] [bp-88h]@73
  int v45; // [sp+A0h] [bp-84h]@73
  int v46; // [sp+A4h] [bp-80h]@73
  int v47; // [sp+A8h] [bp-7Ch]@73
  int v48; // [sp+ACh] [bp-78h]@73
  int v49; // [sp+B0h] [bp-74h]@73
  int v50; // [sp+B4h] [bp-70h]@73
  int v51; // [sp+B8h] [bp-6Ch]@73
  int v52; // [sp+BCh] [bp-68h]@73
  int v53; // [sp+C0h] [bp-64h]@73
  int v54; // [sp+C4h] [bp-60h]@73
  int v55; // [sp+C8h] [bp-5Ch]@73
  int v56; // [sp+CCh] [bp-58h]@73
  int v57; // [sp+D0h] [bp-54h]@73
  int v58; // [sp+D4h] [bp-50h]@73
  int v59; // [sp+D8h] [bp-4Ch]@73
  int v60; // [sp+DCh] [bp-48h]@73
  int v61; // [sp+E0h] [bp-44h]@73
  int v62; // [sp+E4h] [bp-40h]@73
  int v63; // [sp+E8h] [bp-3Ch]@73
  int v64; // [sp+ECh] [bp-38h]@73
  int v65; // [sp+F0h] [bp-34h]@73
  int v66; // [sp+F4h] [bp-30h]@73
  int v67; // [sp+F8h] [bp-2Ch]@73
  int v68; // [sp+FCh] [bp-28h]@73
  int v69; // [sp+100h] [bp-24h]@73
  int v70; // [sp+104h] [bp-20h]@73
  int v71; // [sp+108h] [bp-1Ch]@73
  int v72; // [sp+10Ch] [bp-18h]@73
  int v73; // [sp+110h] [bp-14h]@73
  int v74; // [sp+114h] [bp-10h]@73
  int v75; // [sp+118h] [bp-Ch]@73
  int v76; // [sp+11Ch] [bp-8h]@73
  int v77; // [sp+120h] [bp-4h]@73

  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 120) = 30;
      if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
        *(_DWORD *)(a1 + 76) = 2;
      else
        *(_DWORD *)(a1 + 76) = 0;
      goto LABEL_5;
    case 1:
LABEL_5:
      if ( !--*(_DWORD *)(a1 + 120) )
      {
        *(_DWORD *)(a1 + 116) = 2;
        ++*(_DWORD *)(a1 + 108);
      }
      break;
    case 2:
      *(_DWORD *)(a1 + 116) = 3;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 104) = 1;
      *(_DWORD *)(a1 + 100) = 0;
      goto LABEL_8;
    case 3:
LABEL_8:
      if ( ++*(_DWORD *)(a1 + 100) > 3 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        if ( ++*(_DWORD *)(a1 + 104) == 2 || *(_DWORD *)(a1 + 104) == 4 )
          Play_Sound_Effect(23, 1);
      }
      if ( *(_DWORD *)(a1 + 104) > 4 )
        *(_DWORD *)(a1 + 104) = 1;
      if ( *(_DWORD *)(a1 + 76) )
        *(_DWORD *)(a1 + 16) += 32;
      else
        *(_DWORD *)(a1 + 16) -= 32;
      if ( *(_DWORD *)(a1 + 120) < 8
        || *(_DWORD *)(a1 + 8) - 6144 >= Quote_X_Position
        || *(_DWORD *)(a1 + 8) + 6144 <= Quote_X_Position
        || *(_DWORD *)(a1 + 12) - 6144 >= Quote_Y_Position
        || *(_DWORD *)(a1 + 12) + 4096 <= Quote_Y_Position )
      {
        if ( ++*(_DWORD *)(a1 + 120) <= 75 )
        {
          if ( *(_DWORD *)(a1 + 4) & 5 )
          {
            if ( *(_DWORD *)(a1 + 112) >= 5 )
            {
              *(_DWORD *)(a1 + 116) = 4;
              *(_DWORD *)(a1 + 120) = 0;
              *(_DWORD *)(a1 + 104) = 7;
              *(_DWORD *)(a1 + 20) = -1535;
            }
            else
            {
              ++*(_DWORD *)(a1 + 112);
            }
          }
          else
          {
            *(_DWORD *)(a1 + 112) = 0;
          }
          if ( !(*(_DWORD *)(a1 + 108) % 2) && *(_DWORD *)(a1 + 120) > 25 )
          {
            *(_DWORD *)(a1 + 116) = 4;
            *(_DWORD *)(a1 + 120) = 0;
            *(_DWORD *)(a1 + 104) = 7;
            *(_DWORD *)(a1 + 20) = -1535;
          }
        }
        else
        {
          *(_DWORD *)(a1 + 116) = 9;
          *(_DWORD *)(a1 + 104) = 0;
        }
      }
      else
      {
        *(_DWORD *)(a1 + 116) = 10;
        *(_DWORD *)(a1 + 104) = 5;
        *(_BYTE *)&Player_Flags |= 2u;
        Take_Damage(5);
      }
      break;
    case 4:
      if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
        *(_DWORD *)(a1 + 76) = 2;
      else
        *(_DWORD *)(a1 + 76) = 0;
      if ( ++*(_DWORD *)(a1 + 120) < 30 && *(_DWORD *)(a1 + 120) % 6 == 1 )
      {
        Play_Sound_Effect(39, 1);
        NPC_Create(170, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 0, 0, *(_DWORD *)(a1 + 76), 0, 256);
      }
      if ( *(_DWORD *)(a1 + 4) & 8 )
      {
        *(_DWORD *)(a1 + 116) = 9;
        *(_DWORD *)(a1 + 104) = 8;
        sub_40F310(30);
        Play_Sound_Effect(26, 1);
      }
      if ( *(_DWORD *)(a1 + 120) >= 8
        && *(_DWORD *)(a1 + 8) - 6144 < Quote_X_Position
        && *(_DWORD *)(a1 + 8) + 6144 > Quote_X_Position
        && *(_DWORD *)(a1 + 12) - 6144 < Quote_Y_Position
        && *(_DWORD *)(a1 + 12) + 4096 > Quote_Y_Position )
      {
        *(_DWORD *)(a1 + 116) = 10;
        *(_DWORD *)(a1 + 104) = 5;
        *(_BYTE *)&Player_Flags |= 2u;
        Take_Damage(10);
      }
      break;
    case 9:
      *(_DWORD *)(a1 + 16) = 4 * *(_DWORD *)(a1 + 16) / 5;
      if ( !*(_DWORD *)(a1 + 16) )
        *(_DWORD *)(a1 + 116) = 0;
      break;
    case 0xA:
      Quote_X_Position = *(_DWORD *)(a1 + 8);
      Quote_Y_Position = *(_DWORD *)(a1 + 12);
      *(_DWORD *)(a1 + 16) = 4 * *(_DWORD *)(a1 + 16) / 5;
      if ( !*(_DWORD *)(a1 + 16) )
      {
        *(_DWORD *)(a1 + 116) = 11;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 5;
        *(_DWORD *)(a1 + 100) = 0;
      }
      break;
    case 0xB:
      Quote_X_Position = *(_DWORD *)(a1 + 8);
      Quote_Y_Position = *(_DWORD *)(a1 + 12);
      if ( ++*(_DWORD *)(a1 + 100) > 2 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 6 )
        *(_DWORD *)(a1 + 104) = 5;
      if ( ++*(_DWORD *)(a1 + 120) > 100 )
        *(_DWORD *)(a1 + 116) = 20;
      break;
    case 0x14:
      Play_Sound_Effect(25, 1);
      *(_BYTE *)&Player_Flags &= 0xFDu;
      if ( *(_DWORD *)(a1 + 76) )
      {
        Quote_X_Position -= 2048;
        Quote_Y_Position -= 4096;
        Quote_X_Velocity = -1535;
        Quote_Y_Velocity = -512;
        *(_DWORD *)&Quote_Direction_Faced = 0;
        *(_DWORD *)(a1 + 76) = 0;
      }
      else
      {
        Quote_X_Position += 2048;
        Quote_Y_Position -= 4096;
        Quote_X_Velocity = 1535;
        Quote_Y_Velocity = -512;
        *(_DWORD *)&Quote_Direction_Faced = 2;
        *(_DWORD *)(a1 + 76) = 2;
      }
      *(_DWORD *)(a1 + 116) = 21;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 104) = 7;
      goto LABEL_65;
    case 0x15:
LABEL_65:
      if ( ++*(_DWORD *)(a1 + 120) >= 50 )
        *(_DWORD *)(a1 + 116) = 0;
      break;
    default:
      break;
  }
  *(_DWORD *)(a1 + 20) += 32;
  if ( *(_DWORD *)(a1 + 16) < -768 )
    *(_DWORD *)(a1 + 16) = -768;
  if ( *(_DWORD *)(a1 + 16) > 768 )
    *(_DWORD *)(a1 + 16) = 768;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  v42 = 0;
  v43 = 0;
  v44 = 40;
  v45 = 24;
  v46 = 0;
  v47 = 48;
  v48 = 40;
  v49 = 72;
  v50 = 0;
  v51 = 0;
  v52 = 40;
  v53 = 24;
  v54 = 40;
  v55 = 48;
  v56 = 80;
  v57 = 72;
  v58 = 0;
  v59 = 0;
  v60 = 40;
  v61 = 24;
  v62 = 80;
  v63 = 48;
  v64 = 120;
  v65 = 72;
  v66 = 120;
  v67 = 48;
  v68 = 160;
  v69 = 72;
  v70 = 120;
  v71 = 0;
  v72 = 160;
  v73 = 24;
  v74 = 80;
  v75 = 0;
  v76 = 120;
  v77 = 24;
  v6 = 0;
  v7 = 24;
  v8 = 40;
  v9 = 48;
  v10 = 0;
  v11 = 72;
  v12 = 40;
  v13 = 96;
  v14 = 0;
  v15 = 24;
  v16 = 40;
  v17 = 48;
  v18 = 40;
  v19 = 72;
  v20 = 80;
  v21 = 96;
  v22 = 0;
  v23 = 24;
  v24 = 40;
  v25 = 48;
  v26 = 80;
  v27 = 72;
  v28 = 120;
  v29 = 96;
  v30 = 120;
  v31 = 72;
  v32 = 160;
  v33 = 96;
  v34 = 120;
  v35 = 24;
  v36 = 160;
  v37 = 48;
  v38 = 80;
  v39 = 24;
  v40 = 120;
  v41 = 48;
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v6 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    *(_DWORD *)(v5 + 8) = v4[2];
    result = v4[3];
    *(_DWORD *)(v5 + 12) = result;
  }
  else
  {
    v1 = &v42 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    *(_DWORD *)(v2 + 8) = v1[2];
    result = v1[3];
    *(_DWORD *)(v2 + 12) = result;
  }
  return result;
}
// 49E66C: using guessed type int Quote_X_Velocity;
// 49E670: using guessed type int Quote_Y_Velocity;

//----- (004495A0) --------------------------------------------------------
int __cdecl NPC170(void *Frame_1_A_4)
{
  int result; // eax@8
  int *v2; // eax@35
  char *v3; // ecx@35
  int *v4; // eax@36
  char *v5; // ecx@36
  int v6; // [sp+0h] [bp-48h]@9
  int v7; // [sp+4h] [bp-44h]@1
  int v8; // [sp+8h] [bp-40h]@1
  int v9; // [sp+Ch] [bp-3Ch]@1
  int v10; // [sp+10h] [bp-38h]@1
  int v11; // [sp+14h] [bp-34h]@1
  int v12; // [sp+18h] [bp-30h]@1
  int v13; // [sp+1Ch] [bp-2Ch]@1
  int v14; // [sp+20h] [bp-28h]@1
  int v15; // [sp+24h] [bp-24h]@1
  int v16; // [sp+28h] [bp-20h]@1
  int v17; // [sp+2Ch] [bp-1Ch]@1
  int v18; // [sp+30h] [bp-18h]@1
  int v19; // [sp+34h] [bp-14h]@1
  int v20; // [sp+38h] [bp-10h]@1
  int v21; // [sp+3Ch] [bp-Ch]@1
  int v22; // [sp+40h] [bp-8h]@1
  int v23; // [sp+44h] [bp-4h]@1

  v16 = 112;
  v17 = 96;
  v18 = 128;
  v19 = 104;
  v20 = 128;
  v21 = 96;
  v22 = 144;
  v23 = 104;
  v7 = 112;
  v8 = 104;
  v9 = 128;
  v10 = 112;
  v11 = 128;
  v12 = 104;
  v13 = 144;
  v14 = 112;
  v15 = 0;
  if ( !*((_DWORD *)Frame_1_A_4 + 19) && *((_DWORD *)Frame_1_A_4 + 1) & 1 )
    v15 = 1;
  if ( *((_DWORD *)Frame_1_A_4 + 19) == 2 && *((_DWORD *)Frame_1_A_4 + 1) & 4 )
    v15 = 1;
  if ( v15 )
  {
    Play_Sound_Effect(44, 1);
    sub_46F150(*((_DWORD *)Frame_1_A_4 + 2), *((_DWORD *)Frame_1_A_4 + 3), 0, 3);
    return sub_46F760(Frame_1_A_4);
  }
  v6 = *((_DWORD *)Frame_1_A_4 + 29);
  if ( !v6 )
  {
    *((_DWORD *)Frame_1_A_4 + 29) = 1;
    if ( *((_DWORD *)Frame_1_A_4 + 19) )
      *((_DWORD *)Frame_1_A_4 + 4) = RNG_Range(-2, -1) << 9;
    else
      *((_DWORD *)Frame_1_A_4 + 4) = RNG_Range(1, 2) << 9;
    *((_DWORD *)Frame_1_A_4 + 5) = RNG_Range(-2, 0) << 9;
    goto LABEL_16;
  }
  if ( v6 == 1 )
  {
LABEL_16:
    ++*((_DWORD *)Frame_1_A_4 + 27);
    if ( *((_DWORD *)Frame_1_A_4 + 19) )
    {
      *((_DWORD *)Frame_1_A_4 + 4) += 32;
      if ( *((_DWORD *)Frame_1_A_4 + 27) % 3 == 1 )
        Create_Animated_Effect(*((_DWORD *)Frame_1_A_4 + 2) - 4096, *((_DWORD *)Frame_1_A_4 + 3), 7, 0);
    }
    else
    {
      *((_DWORD *)Frame_1_A_4 + 4) -= 32;
      if ( *((_DWORD *)Frame_1_A_4 + 27) % 3 == 1 )
        Create_Animated_Effect(*((_DWORD *)Frame_1_A_4 + 2) + 4096, *((_DWORD *)Frame_1_A_4 + 3), 7, 2);
    }
    if ( *((_DWORD *)Frame_1_A_4 + 27) >= 50 )
    {
      *((_DWORD *)Frame_1_A_4 + 5) = 0;
    }
    else if ( *((_DWORD *)Frame_1_A_4 + 3) >= Quote_Y_Position )
    {
      *((_DWORD *)Frame_1_A_4 + 5) -= 32;
    }
    else
    {
      *((_DWORD *)Frame_1_A_4 + 5) += 32;
    }
    if ( ++*((_DWORD *)Frame_1_A_4 + 26) > 1 )
      *((_DWORD *)Frame_1_A_4 + 26) = 0;
  }
  if ( *((_DWORD *)Frame_1_A_4 + 4) < -1024 )
    *((_DWORD *)Frame_1_A_4 + 4) = -1536;
  if ( *((_DWORD *)Frame_1_A_4 + 4) > 1024 )
    *((_DWORD *)Frame_1_A_4 + 4) = 1536;
  *((_DWORD *)Frame_1_A_4 + 2) += *((_DWORD *)Frame_1_A_4 + 4);
  *((_DWORD *)Frame_1_A_4 + 3) += *((_DWORD *)Frame_1_A_4 + 5);
  if ( *((_DWORD *)Frame_1_A_4 + 19) )
  {
    v4 = &v7 + 4 * *((_DWORD *)Frame_1_A_4 + 26);
    v5 = (char *)Frame_1_A_4 + 84;
    *(_DWORD *)v5 = *v4;
    *((_DWORD *)v5 + 1) = v4[1];
    *((_DWORD *)v5 + 2) = v4[2];
    result = v4[3];
    *((_DWORD *)v5 + 3) = result;
  }
  else
  {
    v2 = &v16 + 4 * *((_DWORD *)Frame_1_A_4 + 26);
    v3 = (char *)Frame_1_A_4 + 84;
    *(_DWORD *)v3 = *v2;
    *((_DWORD *)v3 + 1) = v2[1];
    *((_DWORD *)v3 + 2) = v2[2];
    result = v2[3];
    *((_DWORD *)v3 + 3) = result;
  }
  return result;
}

//----- (004498C0) --------------------------------------------------------
int __cdecl NPC171(int a1)
{
  int *v1; // ecx@38
  int v2; // edx@38
  int result; // eax@38
  int *v4; // ecx@39
  int v5; // edx@39
  int v6; // [sp+0h] [bp-44h]@4
  int v7; // [sp+4h] [bp-40h]@1
  int v8; // [sp+8h] [bp-3Ch]@1
  int v9; // [sp+Ch] [bp-38h]@1
  int v10; // [sp+10h] [bp-34h]@1
  int v11; // [sp+14h] [bp-30h]@1
  int v12; // [sp+18h] [bp-2Ch]@1
  int v13; // [sp+1Ch] [bp-28h]@1
  int v14; // [sp+20h] [bp-24h]@1
  int v15; // [sp+24h] [bp-20h]@1
  int v16; // [sp+28h] [bp-1Ch]@1
  int v17; // [sp+2Ch] [bp-18h]@1
  int v18; // [sp+30h] [bp-14h]@1
  int v19; // [sp+34h] [bp-10h]@1
  int v20; // [sp+38h] [bp-Ch]@1
  int v21; // [sp+3Ch] [bp-8h]@1
  int v22; // [sp+40h] [bp-4h]@1

  v15 = 120;
  v16 = 48;
  v17 = 152;
  v18 = 80;
  v19 = 152;
  v20 = 48;
  v21 = 184;
  v22 = 80;
  v7 = 184;
  v8 = 48;
  v9 = 216;
  v10 = 80;
  v11 = 216;
  v12 = 48;
  v13 = 248;
  v14 = 80;
  if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
    *(_DWORD *)(a1 + 76) = 2;
  else
    *(_DWORD *)(a1 + 76) = 0;
  v6 = *(_DWORD *)(a1 + 116);
  if ( v6 )
  {
    if ( v6 != 1 )
    {
      if ( v6 != 10 )
        goto LABEL_37;
      goto LABEL_12;
    }
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 120) = RNG_Range(0, 50);
    *(_DWORD *)(a1 + 36) = *(_DWORD *)(a1 + 12);
  }
  if ( *(_DWORD *)(a1 + 120) )
  {
    --*(_DWORD *)(a1 + 120);
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 10;
    *(_DWORD *)(a1 + 20) = 512;
  }
LABEL_12:
  if ( ++*(_DWORD *)(a1 + 100) > 0 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    ++*(_DWORD *)(a1 + 104);
  }
  if ( *(_DWORD *)(a1 + 104) > 1 )
    *(_DWORD *)(a1 + 104) = 0;
  if ( *(_DWORD *)(a1 + 12) >= *(_DWORD *)(a1 + 36) )
    *(_DWORD *)(a1 + 20) -= 16;
  else
    *(_DWORD *)(a1 + 20) += 16;
  if ( *(_DWORD *)(a1 + 20) > 512 )
    *(_DWORD *)(a1 + 20) = 512;
  if ( *(_DWORD *)(a1 + 20) < -512 )
    *(_DWORD *)(a1 + 20) = -512;
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 76) )
  {
    if ( Quote_Y_Position < *(_DWORD *)(a1 + 12) + 40960
      && Quote_Y_Position > *(_DWORD *)(a1 + 12) - 40960
      && Quote_X_Position < *(_DWORD *)(a1 + 8) + 81920
      && Quote_X_Position > *(_DWORD *)(a1 + 8) )
    {
      ++*(_DWORD *)(a1 + 108);
    }
  }
  else if ( Quote_Y_Position < *(_DWORD *)(a1 + 12) + 40960
         && Quote_Y_Position > *(_DWORD *)(a1 + 12) - 40960
         && Quote_X_Position < *(_DWORD *)(a1 + 8)
         && Quote_X_Position > *(_DWORD *)(a1 + 8) - 81920 )
  {
    ++*(_DWORD *)(a1 + 108);
  }
  if ( *(_DWORD *)(a1 + 108) > 20 )
  {
    NPC_Create(172, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 0, 0, *(_DWORD *)(a1 + 76), 0, 256);
    *(_DWORD *)(a1 + 108) = -100;
    dword_4BBA2C = RNG_Range(80, 100);
    dword_4BBA20 = *(_DWORD *)(a1 + 8);
    dword_4BBA24 = *(_DWORD *)(a1 + 12);
  }
LABEL_37:
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v7 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    result = v4[2];
    *(_DWORD *)(v5 + 8) = result;
    *(_DWORD *)(v5 + 12) = v4[3];
  }
  else
  {
    v1 = &v15 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    result = v1[2];
    *(_DWORD *)(v2 + 8) = result;
    *(_DWORD *)(v2 + 12) = v1[3];
  }
  return result;
}
// 4BBA20: using guessed type int dword_4BBA20;
// 4BBA24: using guessed type int dword_4BBA24;
// 4BBA2C: using guessed type int dword_4BBA2C;

//----- (00449C10) --------------------------------------------------------
int __cdecl NPC172(void *a1)
{
  int result; // eax@14
  int *v2; // ecx@15
  char *v3; // edx@15
  int v4; // [sp+0h] [bp-34h]@1
  int v5; // [sp+4h] [bp-30h]@1
  int v6; // [sp+8h] [bp-2Ch]@1
  int v7; // [sp+Ch] [bp-28h]@1
  int v8; // [sp+10h] [bp-24h]@1
  int v9; // [sp+14h] [bp-20h]@1
  int v10; // [sp+18h] [bp-1Ch]@1
  int v11; // [sp+1Ch] [bp-18h]@1
  int v12; // [sp+20h] [bp-14h]@1
  int v13; // [sp+24h] [bp-10h]@1
  int v14; // [sp+28h] [bp-Ch]@1
  int v15; // [sp+2Ch] [bp-8h]@1
  int v16; // [sp+30h] [bp-4h]@1

  v5 = 248;
  v6 = 48;
  v7 = 264;
  v8 = 80;
  v9 = 264;
  v10 = 48;
  v11 = 280;
  v12 = 80;
  v13 = 280;
  v14 = 48;
  v15 = 296;
  v16 = 80;
  v4 = *((_DWORD *)a1 + 29);
  if ( v4 )
  {
    if ( v4 != 1 )
      goto LABEL_15;
  }
  else
  {
    *((_DWORD *)a1 + 29) = 1;
  }
  if ( ++*((_DWORD *)a1 + 25) > 1 )
  {
    *((_DWORD *)a1 + 25) = 0;
    ++*((_DWORD *)a1 + 26);
  }
  if ( *((_DWORD *)a1 + 26) > 2 )
    *((_DWORD *)a1 + 26) = 0;
  if ( *((_DWORD *)a1 + 19) )
    *((_DWORD *)a1 + 2) += 512;
  else
    *((_DWORD *)a1 + 2) -= 512;
  if ( *((_DWORD *)a1 + 1) & 1 || *((_DWORD *)a1 + 1) & 4 )
  {
    Create_Animated_Effect(*((_DWORD *)a1 + 2), *((_DWORD *)a1 + 3), 2, 0);
    return sub_46F760(a1);
  }
LABEL_15:
  v2 = &v5 + 4 * *((_DWORD *)a1 + 26);
  v3 = (char *)a1 + 84;
  *(_DWORD *)v3 = *v2;
  *((_DWORD *)v3 + 1) = v2[1];
  result = v2[2];
  *((_DWORD *)v3 + 2) = result;
  *((_DWORD *)v3 + 3) = v2[3];
  return result;
}

//----- (00449D70) --------------------------------------------------------
int __cdecl NPC173(int a1)
{
  int result; // eax@1
  int Y_Velocity; // ST24_4@31
  int *v3; // ecx@48
  int v4; // edx@48
  int *v5; // ecx@49
  int v6; // edx@49
  int v7; // [sp+8h] [bp-90h]@1
  int v8; // [sp+Ch] [bp-8Ch]@1
  int v9; // [sp+10h] [bp-88h]@1
  int v10; // [sp+14h] [bp-84h]@1
  int v11; // [sp+18h] [bp-80h]@1
  int v12; // [sp+1Ch] [bp-7Ch]@1
  int v13; // [sp+20h] [bp-78h]@1
  int v14; // [sp+24h] [bp-74h]@1
  int v15; // [sp+28h] [bp-70h]@1
  int v16; // [sp+2Ch] [bp-6Ch]@1
  int v17; // [sp+30h] [bp-68h]@1
  int v18; // [sp+34h] [bp-64h]@1
  int v19; // [sp+38h] [bp-60h]@1
  int v20; // [sp+3Ch] [bp-5Ch]@1
  int v21; // [sp+40h] [bp-58h]@1
  int v22; // [sp+44h] [bp-54h]@1
  int X_Velocity; // [sp+4Ch] [bp-4Ch]@31
  int v24; // [sp+50h] [bp-48h]@1
  int v25; // [sp+54h] [bp-44h]@1
  int v26; // [sp+58h] [bp-40h]@1
  int v27; // [sp+5Ch] [bp-3Ch]@1
  int v28; // [sp+60h] [bp-38h]@1
  int v29; // [sp+64h] [bp-34h]@1
  int v30; // [sp+68h] [bp-30h]@1
  int v31; // [sp+6Ch] [bp-2Ch]@1
  int v32; // [sp+70h] [bp-28h]@1
  int v33; // [sp+74h] [bp-24h]@1
  int v34; // [sp+78h] [bp-20h]@1
  int v35; // [sp+7Ch] [bp-1Ch]@1
  int v36; // [sp+80h] [bp-18h]@1
  int v37; // [sp+84h] [bp-14h]@1
  int v38; // [sp+88h] [bp-10h]@1
  int v39; // [sp+8Ch] [bp-Ch]@1
  unsigned __int8 v40; // [sp+97h] [bp-1h]@31

  v24 = 0;
  v25 = 128;
  v26 = 24;
  v27 = 152;
  v28 = 24;
  v29 = 128;
  v30 = 48;
  v31 = 152;
  v32 = 48;
  v33 = 128;
  v34 = 72;
  v35 = 152;
  v36 = 72;
  v37 = 128;
  v38 = 96;
  v39 = 152;
  v7 = 0;
  v8 = 152;
  v9 = 24;
  v10 = 176;
  v11 = 24;
  v12 = 152;
  v13 = 48;
  v14 = 176;
  v15 = 48;
  v16 = 152;
  v17 = 72;
  v18 = 176;
  v19 = 72;
  v20 = 152;
  v21 = 96;
  v22 = 176;
  result = Quote_X_Position + 163840;
  if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position + 163840 )
  {
    result = a1;
    if ( *(_DWORD *)(a1 + 8) >= Quote_X_Position - 163840 && *(_DWORD *)(a1 + 12) <= Quote_Y_Position + 122880 )
    {
      result = Quote_Y_Position - 122880;
      if ( *(_DWORD *)(a1 + 12) >= Quote_Y_Position - 122880 )
      {
        switch ( *(_DWORD *)(a1 + 116) )
        {
          case 0:
            *(_DWORD *)(a1 + 32) = *(_DWORD *)(a1 + 8);
            *(_DWORD *)(a1 + 116) = 1;
            goto LABEL_8;
          case 1:
LABEL_8:
            *(_DWORD *)(a1 + 104) = 0;
            *(_DWORD *)(a1 + 16) = 0;
            if ( *(_DWORD *)(a1 + 120) >= 5 )
            {
              if ( *(_DWORD *)(a1 + 8) - 98304 < Quote_X_Position
                && *(_DWORD *)(a1 + 8) + 98304 > Quote_X_Position
                && *(_DWORD *)(a1 + 12) - 81920 < Quote_Y_Position
                && *(_DWORD *)(a1 + 12) + 81920 > Quote_Y_Position )
              {
                *(_DWORD *)(a1 + 116) = 10;
                *(_DWORD *)(a1 + 120) = 0;
                *(_DWORD *)(a1 + 104) = 1;
              }
            }
            else
            {
              ++*(_DWORD *)(a1 + 120);
            }
            break;
          case 0xA:
            if ( ++*(_DWORD *)(a1 + 120) > 3 )
            {
              if ( ++*(_DWORD *)(a1 + 108) == 3 )
              {
                Play_Sound_Effect(30, 1);
                *(_DWORD *)(a1 + 108) = 0;
                *(_DWORD *)(a1 + 116) = 25;
                *(_DWORD *)(a1 + 120) = 0;
                *(_DWORD *)(a1 + 104) = 2;
                *(_DWORD *)(a1 + 20) = -1536;
                if ( *(_DWORD *)(a1 + 8) >= *(_DWORD *)(a1 + 32) )
                  *(_DWORD *)(a1 + 16) = -128;
                else
                  *(_DWORD *)(a1 + 16) = 128;
              }
              else
              {
                Play_Sound_Effect(30, 1);
                *(_DWORD *)(a1 + 116) = 20;
                *(_DWORD *)(a1 + 104) = 2;
                *(_DWORD *)(a1 + 20) = -512;
                if ( *(_DWORD *)(a1 + 8) >= *(_DWORD *)(a1 + 32) )
                  *(_DWORD *)(a1 + 16) = -512;
                else
                  *(_DWORD *)(a1 + 16) = 512;
              }
            }
            break;
          case 0x14:
            ++*(_DWORD *)(a1 + 120);
            if ( *(_DWORD *)(a1 + 4) & 8 )
            {
              Play_Sound_Effect(23, 1);
              *(_DWORD *)(a1 + 104) = 1;
              *(_DWORD *)(a1 + 116) = 30;
              *(_DWORD *)(a1 + 120) = 0;
            }
            break;
          case 0x19:
            if ( ++*(_DWORD *)(a1 + 120) == 30 || *(_DWORD *)(a1 + 120) == 40 )
            {
              v40 = Angle_Calculator(*(_DWORD *)(a1 + 8) - Quote_X_Position, *(_DWORD *)(a1 + 12) - Quote_Y_Position);
              v40 += RNG_Range(-6, 6);
              Y_Velocity = 3 * SIN_function(v40);
              X_Velocity = 3 * COS_function(v40);
              NPC_Create(174, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), X_Velocity, Y_Velocity, 0, 0, 256);
              Play_Sound_Effect(39, 1);
              *(_DWORD *)(a1 + 104) = 3;
              dword_4BBA2C = RNG_Range(80, 100);
              dword_4BBA20 = *(_DWORD *)(a1 + 8);
              dword_4BBA24 = *(_DWORD *)(a1 + 12);
            }
            if ( *(_DWORD *)(a1 + 120) == 35 || *(_DWORD *)(a1 + 120) == 45 )
              *(_DWORD *)(a1 + 104) = 2;
            if ( *(_DWORD *)(a1 + 4) & 8 )
            {
              Play_Sound_Effect(23, 1);
              *(_DWORD *)(a1 + 104) = 1;
              *(_DWORD *)(a1 + 116) = 30;
              *(_DWORD *)(a1 + 120) = 0;
            }
            break;
          case 0x1E:
            *(_DWORD *)(a1 + 16) = 7 * *(_DWORD *)(a1 + 16) / 8;
            if ( ++*(_DWORD *)(a1 + 120) > 3 )
            {
              *(_DWORD *)(a1 + 104) = 0;
              *(_DWORD *)(a1 + 116) = 1;
              *(_DWORD *)(a1 + 120) = 0;
            }
            break;
          default:
            break;
        }
        *(_DWORD *)(a1 + 20) += 51;
        if ( Quote_X_Position >= *(_DWORD *)(a1 + 8) )
          *(_DWORD *)(a1 + 76) = 2;
        else
          *(_DWORD *)(a1 + 76) = 0;
        if ( *(_DWORD *)(a1 + 20) > 1535 )
          *(_DWORD *)(a1 + 20) = 1535;
        if ( *(_DWORD *)(a1 + 20) < -1535 )
          *(_DWORD *)(a1 + 20) = 1535;
        *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
        *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
        if ( *(_DWORD *)(a1 + 76) )
        {
          v5 = &v7 + 4 * *(_DWORD *)(a1 + 104);
          v6 = a1 + 84;
          *(_DWORD *)v6 = *v5;
          *(_DWORD *)(v6 + 4) = v5[1];
          result = v5[2];
          *(_DWORD *)(v6 + 8) = result;
          *(_DWORD *)(v6 + 12) = v5[3];
        }
        else
        {
          v3 = &v24 + 4 * *(_DWORD *)(a1 + 104);
          v4 = a1 + 84;
          *(_DWORD *)v4 = *v3;
          *(_DWORD *)(v4 + 4) = v3[1];
          result = v3[2];
          *(_DWORD *)(v4 + 8) = result;
          *(_DWORD *)(v4 + 12) = v3[3];
        }
        if ( *(_DWORD *)(a1 + 64) <= 985 )
        {
          result = sub_46F150(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 0, 2);
          *(_DWORD *)(a1 + 40) = 154;
          *(_DWORD *)(a1 + 116) = 0;
        }
      }
    }
  }
  return result;
}
// 4BBA20: using guessed type int dword_4BBA20;
// 4BBA24: using guessed type int dword_4BBA24;
// 4BBA2C: using guessed type int dword_4BBA2C;

//----- (0044A3C0) --------------------------------------------------------
int __cdecl NPC174(int a1)
{
  int *v1; // ecx@27
  int v2; // edx@27
  int result; // eax@27
  int v4; // [sp+0h] [bp-38h]@1
  int v5; // [sp+4h] [bp-34h]@25
  int v6; // [sp+8h] [bp-30h]@25
  int v7; // [sp+Ch] [bp-2Ch]@25
  int v8; // [sp+10h] [bp-28h]@25
  int v9; // [sp+14h] [bp-24h]@25
  int v10; // [sp+18h] [bp-20h]@25
  int v11; // [sp+1Ch] [bp-1Ch]@25
  int v12; // [sp+20h] [bp-18h]@25
  int v13; // [sp+24h] [bp-14h]@25
  int v14; // [sp+28h] [bp-10h]@25
  int v15; // [sp+2Ch] [bp-Ch]@25
  int v16; // [sp+30h] [bp-8h]@25
  int v17; // [sp+34h] [bp-4h]@7

  v4 = *(_DWORD *)(a1 + 116);
  if ( v4 )
  {
    if ( v4 != 1 )
    {
      if ( v4 == 2 )
      {
        *(_DWORD *)(a1 + 20) += 64;
        *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
        *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
        if ( *(_DWORD *)(a1 + 4) & 8 )
        {
          if ( ++*(_DWORD *)(a1 + 108) > 1 )
          {
            Create_Animated_Effect(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 2, 0);
            *(_BYTE *)a1 = 0;
          }
        }
      }
      goto LABEL_21;
    }
  }
  else if ( *(_DWORD *)(a1 + 76) == 2 )
  {
    *(_DWORD *)(a1 + 116) = 2;
  }
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  v17 = 0;
  if ( *(_DWORD *)(a1 + 4) & 1 )
  {
    v17 = 1;
    *(_DWORD *)(a1 + 16) = 512;
  }
  if ( *(_DWORD *)(a1 + 4) & 4 )
  {
    v17 = 1;
    *(_DWORD *)(a1 + 16) = -512;
  }
  if ( *(_DWORD *)(a1 + 4) & 2 )
  {
    v17 = 1;
    *(_DWORD *)(a1 + 20) = 512;
  }
  if ( *(_DWORD *)(a1 + 4) & 8 )
  {
    v17 = 1;
    *(_DWORD *)(a1 + 20) = -512;
  }
  if ( v17 )
  {
    *(_DWORD *)(a1 + 116) = 2;
    ++*(_DWORD *)(a1 + 108);
    Play_Sound_Effect(31, 1);
  }
LABEL_21:
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  if ( *(_DWORD *)(a1 + 20) < -1535 )
    *(_DWORD *)(a1 + 20) = -1535;
  v5 = 120;
  v6 = 80;
  v7 = 136;
  v8 = 96;
  v9 = 136;
  v10 = 80;
  v11 = 152;
  v12 = 96;
  v13 = 152;
  v14 = 80;
  v15 = 168;
  v16 = 96;
  if ( ++*(_DWORD *)(a1 + 104) > 2 )
    *(_DWORD *)(a1 + 104) = 0;
  v1 = &v5 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  result = v1[2];
  *(_DWORD *)(v2 + 8) = result;
  *(_DWORD *)(v2 + 12) = v1[3];
  return result;
}

//----- (0044A610) --------------------------------------------------------
int __cdecl NPC175(void *a1)
{
  int *v1; // ecx@14
  char *v2; // edx@14
  int result; // eax@14
  int *v4; // ecx@15
  char *v5; // edx@15
  int v6; // [sp+4h] [bp-40h]@1
  int v7; // [sp+8h] [bp-3Ch]@1
  int v8; // [sp+Ch] [bp-38h]@1
  int v9; // [sp+10h] [bp-34h]@1
  int v10; // [sp+14h] [bp-30h]@1
  int v11; // [sp+18h] [bp-2Ch]@1
  int v12; // [sp+1Ch] [bp-28h]@1
  int v13; // [sp+20h] [bp-24h]@1
  int v14; // [sp+24h] [bp-20h]@1
  int v15; // [sp+28h] [bp-1Ch]@1
  int v16; // [sp+2Ch] [bp-18h]@1
  int v17; // [sp+30h] [bp-14h]@1
  int v18; // [sp+34h] [bp-10h]@1
  int v19; // [sp+38h] [bp-Ch]@1
  int v20; // [sp+3Ch] [bp-8h]@1
  int v21; // [sp+40h] [bp-4h]@1

  v14 = 168;
  v15 = 80;
  v16 = 192;
  v17 = 104;
  v18 = 192;
  v19 = 80;
  v20 = 216;
  v21 = 104;
  v6 = 216;
  v7 = 80;
  v8 = 240;
  v9 = 104;
  v10 = 240;
  v11 = 80;
  v12 = 264;
  v13 = 104;
  if ( *((_DWORD *)a1 + 29) < 3 && *((_DWORD *)a1 + 16) < 90 )
  {
    sub_471B80(a1, 0);
    *((_DWORD *)a1 + 29) = 10;
    *((_DWORD *)a1 + 26) = 1;
    *((_WORD *)a1 + 40) &= 0xFFDFu;
    *((_DWORD *)a1 + 41) = 0;
  }
  if ( !*((_DWORD *)a1 + 29) )
  {
    *((_DWORD *)a1 + 26) = 0;
    *((_DWORD *)a1 + 29) = 1;
  }
  if ( *((_DWORD *)a1 + 19) )
    *((_DWORD *)a1 + 5) -= 32;
  else
    *((_DWORD *)a1 + 5) += 32;
  if ( *((_DWORD *)a1 + 5) < -1535 )
    *((_DWORD *)a1 + 5) = -1535;
  if ( *((_DWORD *)a1 + 5) > 1535 )
    *((_DWORD *)a1 + 5) = 1535;
  *((_DWORD *)a1 + 3) += *((_DWORD *)a1 + 5);
  if ( *((_DWORD *)a1 + 19) )
  {
    v4 = &v6 + 4 * *((_DWORD *)a1 + 26);
    v5 = (char *)a1 + 84;
    *(_DWORD *)v5 = *v4;
    *((_DWORD *)v5 + 1) = v4[1];
    result = v4[2];
    *((_DWORD *)v5 + 2) = result;
    *((_DWORD *)v5 + 3) = v4[3];
  }
  else
  {
    v1 = &v14 + 4 * *((_DWORD *)a1 + 26);
    v2 = (char *)a1 + 84;
    *(_DWORD *)v2 = *v1;
    *((_DWORD *)v2 + 1) = v1[1];
    result = v1[2];
    *((_DWORD *)v2 + 2) = result;
    *((_DWORD *)v2 + 3) = v1[3];
  }
  return result;
}

//----- (0044A7D0) --------------------------------------------------------
int __cdecl NPC176(void *a1)
{
  int *v1; // ecx@37
  char *v2; // edx@37
  int result; // eax@37
  int *v4; // ecx@38
  char *v5; // edx@38
  int v6; // [sp+0h] [bp-64h]@4
  int v7; // [sp+4h] [bp-60h]@1
  int v8; // [sp+8h] [bp-5Ch]@1
  int v9; // [sp+Ch] [bp-58h]@1
  int v10; // [sp+10h] [bp-54h]@1
  int v11; // [sp+14h] [bp-50h]@1
  int v12; // [sp+18h] [bp-4Ch]@1
  int v13; // [sp+1Ch] [bp-48h]@1
  int v14; // [sp+20h] [bp-44h]@1
  int v15; // [sp+24h] [bp-40h]@1
  int v16; // [sp+28h] [bp-3Ch]@1
  int v17; // [sp+2Ch] [bp-38h]@1
  int v18; // [sp+30h] [bp-34h]@1
  int v19; // [sp+34h] [bp-30h]@1
  int v20; // [sp+38h] [bp-2Ch]@1
  int v21; // [sp+3Ch] [bp-28h]@1
  int v22; // [sp+40h] [bp-24h]@1
  int v23; // [sp+44h] [bp-20h]@1
  int v24; // [sp+48h] [bp-1Ch]@1
  int v25; // [sp+4Ch] [bp-18h]@1
  int v26; // [sp+50h] [bp-14h]@1
  int v27; // [sp+54h] [bp-10h]@1
  int v28; // [sp+58h] [bp-Ch]@1
  int v29; // [sp+5Ch] [bp-8h]@1
  int v30; // [sp+60h] [bp-4h]@1

  v19 = 96;
  v20 = 128;
  v21 = 128;
  v22 = 144;
  v23 = 128;
  v24 = 128;
  v25 = 160;
  v26 = 144;
  v27 = 160;
  v28 = 128;
  v29 = 192;
  v30 = 144;
  v7 = 96;
  v8 = 144;
  v9 = 128;
  v10 = 160;
  v11 = 128;
  v12 = 144;
  v13 = 160;
  v14 = 160;
  v15 = 160;
  v16 = 144;
  v17 = 192;
  v18 = 160;
  if ( *((_DWORD *)a1 + 29) < 3 && *((_DWORD *)a1 + 16) < 940 )
  {
    sub_471B80(a1, 0);
    *((_DWORD *)a1 + 29) = 10;
    *((_DWORD *)a1 + 26) = 2;
    *((_WORD *)a1 + 40) &= 0xFFDFu;
    *((_DWORD *)a1 + 41) = 0;
  }
  v6 = *((_DWORD *)a1 + 29);
  if ( v6 )
  {
    if ( v6 != 1 )
    {
      if ( v6 == 2 )
      {
        if ( ++*((_DWORD *)a1 + 25) > 3 )
        {
          *((_DWORD *)a1 + 25) = 0;
          ++*((_DWORD *)a1 + 26);
        }
        if ( *((_DWORD *)a1 + 26) > 1 )
          *((_DWORD *)a1 + 26) = 0;
        if ( ++*((_DWORD *)a1 + 30) > 10 )
        {
          if ( ++*((_DWORD *)a1 + 28) <= 2 )
          {
            *((_DWORD *)a1 + 27) = -10;
          }
          else
          {
            *((_DWORD *)a1 + 28) = 0;
            *((_DWORD *)a1 + 27) = -90;
          }
          if ( *((_DWORD *)a1 + 19) )
            NPC_Create(177, *((_DWORD *)a1 + 2), *((_DWORD *)a1 + 3) + 4096, 0, 0, 2, 0, 256);
          else
            NPC_Create(177, *((_DWORD *)a1 + 2), *((_DWORD *)a1 + 3) - 4096, 0, 0, 0, 0, 256);
          Play_Sound_Effect(39, 1);
          *((_DWORD *)a1 + 29) = 0;
          *((_DWORD *)a1 + 26) = 0;
          dword_4BBA2C = RNG_Range(80, 100);
          dword_4BBA20 = *((_DWORD *)a1 + 2);
          dword_4BBA24 = *((_DWORD *)a1 + 3);
        }
      }
      goto LABEL_36;
    }
  }
  else
  {
    *((_DWORD *)a1 + 29) = 1;
    *((_DWORD *)a1 + 26) = 0;
    *((_DWORD *)a1 + 25) = 0;
  }
  if ( *((_DWORD *)a1 + 19) )
  {
    if ( *((_DWORD *)a1 + 2) < Quote_X_Position + 81920
      && *((_DWORD *)a1 + 2) > Quote_X_Position - 81920
      && *((_DWORD *)a1 + 3) < Quote_Y_Position + 0x2000
      && *((_DWORD *)a1 + 3) > Quote_Y_Position - 81920 )
    {
      ++*((_DWORD *)a1 + 27);
    }
  }
  else if ( *((_DWORD *)a1 + 2) < Quote_X_Position + 81920
         && *((_DWORD *)a1 + 2) > Quote_X_Position - 81920
         && *((_DWORD *)a1 + 3) < Quote_Y_Position + 81920
         && *((_DWORD *)a1 + 3) > Quote_Y_Position - 0x2000 )
  {
    ++*((_DWORD *)a1 + 27);
  }
  if ( *((_DWORD *)a1 + 27) > 10 )
  {
    *((_DWORD *)a1 + 29) = 2;
    *((_DWORD *)a1 + 30) = 0;
  }
LABEL_36:
  if ( *((_DWORD *)a1 + 19) )
  {
    v4 = &v7 + 4 * *((_DWORD *)a1 + 26);
    v5 = (char *)a1 + 84;
    *(_DWORD *)v5 = *v4;
    *((_DWORD *)v5 + 1) = v4[1];
    result = v4[2];
    *((_DWORD *)v5 + 2) = result;
    *((_DWORD *)v5 + 3) = v4[3];
  }
  else
  {
    v1 = &v19 + 4 * *((_DWORD *)a1 + 26);
    v2 = (char *)a1 + 84;
    *(_DWORD *)v2 = *v1;
    *((_DWORD *)v2 + 1) = v1[1];
    result = v1[2];
    *((_DWORD *)v2 + 2) = result;
    *((_DWORD *)v2 + 3) = v1[3];
  }
  return result;
}
// 4BBA20: using guessed type int dword_4BBA20;
// 4BBA24: using guessed type int dword_4BBA24;
// 4BBA2C: using guessed type int dword_4BBA2C;

//----- (0044ABB0) --------------------------------------------------------
int __cdecl NPC177(int a1)
{
  int result; // eax@2
  int *v2; // ecx@40
  int v3; // edx@40
  int v4; // [sp+0h] [bp-24h]@3
  int v5; // [sp+4h] [bp-20h]@1
  int v6; // [sp+8h] [bp-1Ch]@1
  int v7; // [sp+Ch] [bp-18h]@1
  int v8; // [sp+10h] [bp-14h]@1
  int v9; // [sp+14h] [bp-10h]@1
  int v10; // [sp+18h] [bp-Ch]@1
  int v11; // [sp+1Ch] [bp-8h]@1
  int v12; // [sp+20h] [bp-4h]@1

  v5 = 192;
  v6 = 128;
  v7 = 208;
  v8 = 144;
  v9 = 208;
  v10 = 128;
  v11 = 224;
  v12 = 144;
  if ( *(_DWORD *)(a1 + 4) & 0xFF )
  {
    Create_Animated_Effect(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 3, 0);
    result = a1;
    *(_BYTE *)a1 = 0;
    return result;
  }
  v4 = *(_DWORD *)(a1 + 116);
  if ( !v4 )
  {
    *(_DWORD *)(a1 + 116) = 1;
    if ( *(_DWORD *)(a1 + 76) )
      *(_DWORD *)(a1 + 20) = 1536;
    else
      *(_DWORD *)(a1 + 20) = -1536;
LABEL_10:
    if ( *(_DWORD *)(a1 + 12) < Quote_Y_Position + 0x2000 && *(_DWORD *)(a1 + 12) > Quote_Y_Position - 0x2000 )
    {
      *(_DWORD *)(a1 + 116) = 10;
      *(_DWORD *)(a1 + 32) = *(_DWORD *)(a1 + 8);
      *(_DWORD *)(a1 + 36) = *(_DWORD *)(a1 + 12);
      if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
        *(_DWORD *)(a1 + 76) = 2;
      else
        *(_DWORD *)(a1 + 76) = 0;
      *(_DWORD *)(a1 + 16) = (RNG_Range(0, 1) << 10) - 512;
      *(_DWORD *)(a1 + 20) = (RNG_Range(0, 1) << 10) - 512;
    }
    goto LABEL_28;
  }
  if ( v4 == 1 )
    goto LABEL_10;
  if ( v4 == 10 )
  {
    if ( *(_DWORD *)(a1 + 8) >= *(_DWORD *)(a1 + 32) )
      *(_DWORD *)(a1 + 16) -= 32;
    else
      *(_DWORD *)(a1 + 16) += 32;
    if ( *(_DWORD *)(a1 + 12) >= *(_DWORD *)(a1 + 36) )
      *(_DWORD *)(a1 + 20) -= 32;
    else
      *(_DWORD *)(a1 + 20) += 32;
    if ( ++*(_DWORD *)(a1 + 120) > 300 )
    {
      result = Create_Animated_Effect(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 3, 0);
      *(_BYTE *)a1 = 0;
      return result;
    }
    if ( *(_DWORD *)(a1 + 76) )
      *(_DWORD *)(a1 + 32) += 512;
    else
      *(_DWORD *)(a1 + 32) -= 512;
  }
LABEL_28:
  if ( *(_DWORD *)(a1 + 16) > 1024 )
    *(_DWORD *)(a1 + 16) = 1024;
  if ( *(_DWORD *)(a1 + 16) < -1024 )
    *(_DWORD *)(a1 + 16) = -1024;
  if ( *(_DWORD *)(a1 + 20) > 1024 )
    *(_DWORD *)(a1 + 20) = 1024;
  if ( *(_DWORD *)(a1 + 20) < -1024 )
    *(_DWORD *)(a1 + 20) = -1024;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( ++*(_DWORD *)(a1 + 100) > 6 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    ++*(_DWORD *)(a1 + 104);
  }
  if ( *(_DWORD *)(a1 + 104) > 1 )
    *(_DWORD *)(a1 + 104) = 0;
  v2 = &v5 + 4 * *(_DWORD *)(a1 + 104);
  v3 = a1 + 84;
  *(_DWORD *)v3 = *v2;
  *(_DWORD *)(v3 + 4) = v2[1];
  result = v2[2];
  *(_DWORD *)(v3 + 8) = result;
  *(_DWORD *)(v3 + 12) = v2[3];
  return result;
}

//----- (0044AEE0) --------------------------------------------------------
void *__cdecl NPC178(void *a1)
{
  int *v1; // edx@10
  char *v2; // eax@10
  void *result; // eax@10
  int v4; // [sp+0h] [bp-30h]@6
  int v5; // [sp+4h] [bp-2Ch]@6
  int v6; // [sp+8h] [bp-28h]@6
  int v7; // [sp+Ch] [bp-24h]@6
  int v8; // [sp+10h] [bp-20h]@6
  int v9; // [sp+14h] [bp-1Ch]@6
  int v10; // [sp+18h] [bp-18h]@6
  int v11; // [sp+1Ch] [bp-14h]@6
  int v12; // [sp+20h] [bp-10h]@6
  int v13; // [sp+24h] [bp-Ch]@6
  int v14; // [sp+28h] [bp-8h]@6
  int v15; // [sp+2Ch] [bp-4h]@6

  if ( *((_DWORD *)a1 + 1) & 0xFF )
  {
    Create_Animated_Effect(*((_DWORD *)a1 + 2), *((_DWORD *)a1 + 3), 2, 0);
    *(_BYTE *)a1 = 0;
  }
  if ( *((_DWORD *)a1 + 1) & 0x100 )
  {
    *((_DWORD *)a1 + 3) += *((_DWORD *)a1 + 5) / 2;
    *((_DWORD *)a1 + 2) += *((_DWORD *)a1 + 4) / 2;
  }
  else
  {
    *((_DWORD *)a1 + 3) += *((_DWORD *)a1 + 5);
    *((_DWORD *)a1 + 2) += *((_DWORD *)a1 + 4);
  }
  v4 = 0;
  v5 = 224;
  v6 = 16;
  v7 = 240;
  v8 = 16;
  v9 = 224;
  v10 = 32;
  v11 = 240;
  v12 = 32;
  v13 = 224;
  v14 = 48;
  v15 = 240;
  if ( ++*((_DWORD *)a1 + 25) > 1 )
  {
    *((_DWORD *)a1 + 25) = 0;
    ++*((_DWORD *)a1 + 26);
  }
  if ( *((_DWORD *)a1 + 26) > 2 )
    *((_DWORD *)a1 + 26) = 0;
  v1 = &v4 + 4 * *((_DWORD *)a1 + 26);
  v2 = (char *)a1 + 84;
  *(_DWORD *)v2 = *v1;
  *((_DWORD *)v2 + 1) = v1[1];
  *((_DWORD *)v2 + 2) = v1[2];
  *((_DWORD *)v2 + 3) = v1[3];
  ++*((_DWORD *)a1 + 27);
  result = a1;
  if ( *((_DWORD *)a1 + 27) > 150 )
  {
    sub_46F760(a1);
    result = (void *)Create_Animated_Effect(*((_DWORD *)a1 + 2), *((_DWORD *)a1 + 3), 2, 0);
  }
  return result;
}

//----- (0044B080) --------------------------------------------------------
void *__cdecl NPC179(void *a1)
{
  int *v1; // eax@9
  char *v2; // ecx@9
  void *result; // eax@9
  int v4; // [sp+0h] [bp-30h]@5
  int v5; // [sp+4h] [bp-2Ch]@5
  int v6; // [sp+8h] [bp-28h]@5
  int v7; // [sp+Ch] [bp-24h]@5
  int v8; // [sp+10h] [bp-20h]@5
  int v9; // [sp+14h] [bp-1Ch]@5
  int v10; // [sp+18h] [bp-18h]@5
  int v11; // [sp+1Ch] [bp-14h]@5
  int v12; // [sp+20h] [bp-10h]@5
  int v13; // [sp+24h] [bp-Ch]@5
  int v14; // [sp+28h] [bp-8h]@5
  int v15; // [sp+2Ch] [bp-4h]@5

  if ( *((_DWORD *)a1 + 1) & 0xFF )
  {
    *(_BYTE *)a1 = 0;
    Create_Animated_Effect(*((_DWORD *)a1 + 2), *((_DWORD *)a1 + 3), 2, 0);
  }
  *((_DWORD *)a1 + 4) -= 32;
  *((_DWORD *)a1 + 5) = 0;
  if ( *((_DWORD *)a1 + 4) < -1024 )
    *((_DWORD *)a1 + 4) = -1024;
  *((_DWORD *)a1 + 3) += *((_DWORD *)a1 + 5);
  *((_DWORD *)a1 + 2) += *((_DWORD *)a1 + 4);
  v4 = 48;
  v5 = 224;
  v6 = 72;
  v7 = 240;
  v8 = 72;
  v9 = 224;
  v10 = 96;
  v11 = 240;
  v12 = 96;
  v13 = 224;
  v14 = 120;
  v15 = 240;
  if ( ++*((_DWORD *)a1 + 25) > 1 )
  {
    *((_DWORD *)a1 + 25) = 0;
    ++*((_DWORD *)a1 + 26);
  }
  if ( *((_DWORD *)a1 + 26) > 2 )
    *((_DWORD *)a1 + 26) = 0;
  v1 = &v4 + 4 * *((_DWORD *)a1 + 26);
  v2 = (char *)a1 + 84;
  *(_DWORD *)v2 = *v1;
  *((_DWORD *)v2 + 1) = v1[1];
  *((_DWORD *)v2 + 2) = v1[2];
  *((_DWORD *)v2 + 3) = v1[3];
  result = a1;
  if ( ++*((_DWORD *)a1 + 27) > 300 )
  {
    sub_46F760(a1);
    result = (void *)Create_Animated_Effect(*((_DWORD *)a1 + 2), *((_DWORD *)a1 + 3), 2, 0);
  }
  return result;
}

//----- (0044B210) --------------------------------------------------------
int __cdecl NPC180(int a1)
{
  int *v1; // edx@106
  int result; // eax@106
  int *v3; // edx@107
  signed int v4; // [sp+4h] [bp-170h]@15
  int v5; // [sp+8h] [bp-16Ch]@62
  int v6; // [sp+Ch] [bp-168h]@1
  int v7; // [sp+10h] [bp-164h]@1
  int v8; // [sp+14h] [bp-160h]@1
  int v9; // [sp+18h] [bp-15Ch]@1
  int v10; // [sp+1Ch] [bp-158h]@1
  int v11; // [sp+20h] [bp-154h]@1
  int v12; // [sp+24h] [bp-150h]@1
  int v13; // [sp+28h] [bp-14Ch]@1
  int v14; // [sp+2Ch] [bp-148h]@1
  int v15; // [sp+30h] [bp-144h]@1
  int v16; // [sp+34h] [bp-140h]@1
  int v17; // [sp+38h] [bp-13Ch]@1
  int v18; // [sp+3Ch] [bp-138h]@1
  int v19; // [sp+40h] [bp-134h]@1
  int v20; // [sp+44h] [bp-130h]@1
  int v21; // [sp+48h] [bp-12Ch]@1
  int v22; // [sp+4Ch] [bp-128h]@1
  int v23; // [sp+50h] [bp-124h]@1
  int v24; // [sp+54h] [bp-120h]@1
  int v25; // [sp+58h] [bp-11Ch]@1
  int v26; // [sp+5Ch] [bp-118h]@1
  int v27; // [sp+60h] [bp-114h]@1
  int v28; // [sp+64h] [bp-110h]@1
  int v29; // [sp+68h] [bp-10Ch]@1
  int v30; // [sp+6Ch] [bp-108h]@1
  int v31; // [sp+70h] [bp-104h]@1
  int v32; // [sp+74h] [bp-100h]@1
  int v33; // [sp+78h] [bp-FCh]@1
  int v34; // [sp+7Ch] [bp-F8h]@1
  int v35; // [sp+80h] [bp-F4h]@1
  int v36; // [sp+84h] [bp-F0h]@1
  int v37; // [sp+88h] [bp-ECh]@1
  int v38; // [sp+8Ch] [bp-E8h]@1
  int v39; // [sp+90h] [bp-E4h]@1
  int v40; // [sp+94h] [bp-E0h]@1
  int v41; // [sp+98h] [bp-DCh]@1
  int v42; // [sp+9Ch] [bp-D8h]@1
  int v43; // [sp+A0h] [bp-D4h]@1
  int v44; // [sp+A4h] [bp-D0h]@1
  int v45; // [sp+A8h] [bp-CCh]@1
  int v46; // [sp+ACh] [bp-C8h]@1
  int v47; // [sp+B0h] [bp-C4h]@1
  int v48; // [sp+B4h] [bp-C0h]@1
  int v49; // [sp+B8h] [bp-BCh]@1
  int v50; // [sp+C0h] [bp-B4h]@62
  int v51; // [sp+C4h] [bp-B0h]@1
  int v52; // [sp+C8h] [bp-ACh]@1
  int v53; // [sp+CCh] [bp-A8h]@1
  int v54; // [sp+D0h] [bp-A4h]@1
  int v55; // [sp+D4h] [bp-A0h]@1
  int v56; // [sp+D8h] [bp-9Ch]@1
  int v57; // [sp+DCh] [bp-98h]@1
  int v58; // [sp+E0h] [bp-94h]@1
  int v59; // [sp+E4h] [bp-90h]@1
  int v60; // [sp+E8h] [bp-8Ch]@1
  int v61; // [sp+ECh] [bp-88h]@1
  int v62; // [sp+F0h] [bp-84h]@1
  int v63; // [sp+F4h] [bp-80h]@1
  int v64; // [sp+F8h] [bp-7Ch]@1
  int v65; // [sp+FCh] [bp-78h]@1
  int v66; // [sp+100h] [bp-74h]@1
  int v67; // [sp+104h] [bp-70h]@1
  int v68; // [sp+108h] [bp-6Ch]@1
  int v69; // [sp+10Ch] [bp-68h]@1
  int v70; // [sp+110h] [bp-64h]@1
  int v71; // [sp+114h] [bp-60h]@1
  int v72; // [sp+118h] [bp-5Ch]@1
  int v73; // [sp+11Ch] [bp-58h]@1
  int v74; // [sp+120h] [bp-54h]@1
  int v75; // [sp+124h] [bp-50h]@1
  int v76; // [sp+128h] [bp-4Ch]@1
  int v77; // [sp+12Ch] [bp-48h]@1
  int v78; // [sp+130h] [bp-44h]@1
  int v79; // [sp+134h] [bp-40h]@1
  int v80; // [sp+138h] [bp-3Ch]@1
  int v81; // [sp+13Ch] [bp-38h]@1
  int v82; // [sp+140h] [bp-34h]@1
  int v83; // [sp+144h] [bp-30h]@1
  int v84; // [sp+148h] [bp-2Ch]@1
  int v85; // [sp+14Ch] [bp-28h]@1
  int v86; // [sp+150h] [bp-24h]@1
  int v87; // [sp+154h] [bp-20h]@1
  int v88; // [sp+158h] [bp-1Ch]@1
  int v89; // [sp+15Ch] [bp-18h]@1
  int v90; // [sp+160h] [bp-14h]@1
  int v91; // [sp+164h] [bp-10h]@1
  int v92; // [sp+168h] [bp-Ch]@1
  int v93; // [sp+16Ch] [bp-8h]@1
  int v94; // [sp+170h] [bp-4h]@1

  v51 = 0;
  v52 = 96;
  v53 = 16;
  v54 = 112;
  v55 = 16;
  v56 = 96;
  v57 = 32;
  v58 = 112;
  v59 = 0;
  v60 = 96;
  v61 = 16;
  v62 = 112;
  v63 = 32;
  v64 = 96;
  v65 = 48;
  v66 = 112;
  v67 = 0;
  v68 = 96;
  v69 = 16;
  v70 = 112;
  v71 = 48;
  v72 = 96;
  v73 = 64;
  v74 = 112;
  v75 = 64;
  v76 = 96;
  v77 = 80;
  v78 = 112;
  v79 = 48;
  v80 = 96;
  v81 = 64;
  v82 = 112;
  v83 = 80;
  v84 = 96;
  v85 = 96;
  v86 = 112;
  v87 = 48;
  v88 = 96;
  v89 = 64;
  v90 = 112;
  v91 = 144;
  v92 = 96;
  v93 = 160;
  v94 = 112;
  v6 = 0;
  v7 = 112;
  v8 = 16;
  v9 = 128;
  v10 = 16;
  v11 = 112;
  v12 = 32;
  v13 = 128;
  v14 = 0;
  v15 = 112;
  v16 = 16;
  v17 = 128;
  v18 = 32;
  v19 = 112;
  v20 = 48;
  v21 = 128;
  v22 = 0;
  v23 = 112;
  v24 = 16;
  v25 = 128;
  v26 = 48;
  v27 = 112;
  v28 = 64;
  v29 = 128;
  v30 = 64;
  v31 = 112;
  v32 = 80;
  v33 = 128;
  v34 = 48;
  v35 = 112;
  v36 = 64;
  v37 = 128;
  v38 = 80;
  v39 = 112;
  v40 = 96;
  v41 = 128;
  v42 = 48;
  v43 = 112;
  v44 = 64;
  v45 = 128;
  v46 = 144;
  v47 = 112;
  v48 = 160;
  v49 = 128;
  if ( *(_DWORD *)(a1 + 12) >= Quote_Y_Position - 81920 )
  {
    if ( dword_4BBA2C )
    {
      *(_DWORD *)(a1 + 32) = dword_4BBA20;
      *(_DWORD *)(a1 + 36) = dword_4BBA24;
    }
    else
    {
      *(_DWORD *)(a1 + 32) = Quote_X_Position;
      *(_DWORD *)(a1 + 36) = Quote_Y_Position;
    }
  }
  else if ( *(_DWORD *)(a1 + 12) >= 0x20000 )
  {
    *(_DWORD *)(a1 + 32) = 0;
    *(_DWORD *)(a1 + 36) = *(_DWORD *)(a1 + 12);
  }
  else
  {
    *(_DWORD *)(a1 + 32) = 2621440;
    *(_DWORD *)(a1 + 36) = *(_DWORD *)(a1 + 12);
  }
  if ( *(_DWORD *)(a1 + 16) < 0 && *(_DWORD *)(a1 + 4) & 1 )
    *(_DWORD *)(a1 + 16) = 0;
  if ( *(_DWORD *)(a1 + 16) > 0 && *(_DWORD *)(a1 + 4) & 4 )
    *(_DWORD *)(a1 + 16) = 0;
  v4 = *(_DWORD *)(a1 + 116);
  if ( v4 > 200 )
  {
    switch ( v4 )
    {
      case 210:
        *(_DWORD *)(a1 + 16) -= 32;
        *(_DWORD *)(a1 + 76) = 0;
        if ( *(_DWORD *)(a1 + 4) & 8 )
          *(_DWORD *)(a1 + 116) = 100;
        break;
      case 300:
        *(_DWORD *)(a1 + 16) += 32;
        *(_DWORD *)(a1 + 76) = 2;
        if ( *(_DWORD *)(a1 + 4) & 4 )
          ++*(_DWORD *)(a1 + 108);
        else
          *(_DWORD *)(a1 + 108) = 0;
        break;
      case 310:
        *(_DWORD *)(a1 + 16) += 32;
        *(_DWORD *)(a1 + 76) = 2;
        if ( *(_DWORD *)(a1 + 4) & 8 )
          *(_DWORD *)(a1 + 116) = 100;
        break;
    }
  }
  else if ( v4 == 200 )
  {
    *(_DWORD *)(a1 + 16) -= 32;
    *(_DWORD *)(a1 + 76) = 0;
    if ( *(_DWORD *)(a1 + 4) & 1 )
      ++*(_DWORD *)(a1 + 108);
    else
      *(_DWORD *)(a1 + 108) = 0;
  }
  else
  {
    switch ( v4 )
    {
      case 20:
        *(_DWORD *)(a1 + 8) = Quote_X_Position;
        *(_DWORD *)(a1 + 12) = Quote_Y_Position;
        *(_DWORD *)(a1 + 116) = 100;
        *(_DWORD *)(a1 + 104) = 0;
        NPC_Create(183, 0, 0, 0, 0, 0, a1, 256);
        if ( Check_Flag(563) )
          NPC_Create(182, 0, 0, 0, 0, 0, a1, 256);
        else
          NPC_Create(181, 0, 0, 0, 0, 0, a1, 256);
        break;
      case 40:
        *(_DWORD *)(a1 + 116) = 41;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 10;
        goto LABEL_27;
      case 41:
LABEL_27:
        if ( ++*(_DWORD *)(a1 + 120) == 750 )
        {
          *(_WORD *)(a1 + 80) &= 0xDFFFu;
          *(_DWORD *)(a1 + 104) = 0;
        }
        if ( *(_DWORD *)(a1 + 120) > 1000 )
        {
          *(_DWORD *)(a1 + 116) = 100;
          *(_DWORD *)(a1 + 104) = 0;
          NPC_Create(183, 0, 0, 0, 0, 0, a1, 256);
          if ( Check_Flag(563) )
            NPC_Create(182, 0, 0, 0, 0, 0, a1, 256);
          else
            NPC_Create(181, 0, 0, 0, 0, 0, a1, 256);
        }
        break;
      case 100:
        *(_DWORD *)(a1 + 104) = 0;
        *(_DWORD *)(a1 + 16) = 7 * *(_DWORD *)(a1 + 16) / 8;
        *(_DWORD *)(a1 + 108) = 0;
        if ( *(_DWORD *)(a1 + 8) <= *(_DWORD *)(a1 + 32) + 0x2000 )
        {
          if ( *(_DWORD *)(a1 + 8) < *(_DWORD *)(a1 + 32) - 0x2000 )
          {
            *(_DWORD *)(a1 + 116) = 300;
            *(_DWORD *)(a1 + 104) = 1;
            *(_DWORD *)(a1 + 76) = 2;
            *(_DWORD *)(a1 + 120) = RNG_Range(20, 60);
          }
        }
        else
        {
          *(_DWORD *)(a1 + 116) = 200;
          *(_DWORD *)(a1 + 104) = 1;
          *(_DWORD *)(a1 + 76) = 0;
          *(_DWORD *)(a1 + 120) = RNG_Range(20, 60);
        }
        break;
      default:
        break;
    }
  }
  if ( dword_4BBA2C )
    --dword_4BBA2C;
  if ( dword_4BBA2C == 70 )
    *(_DWORD *)(a1 + 112) = 10;
  if ( dword_4BBA2C == 60 && *(_DWORD *)(a1 + 4) & 8 && RNG_Range(0, 2) )
  {
    *(_DWORD *)(a1 + 108) = 0;
    *(_DWORD *)(a1 + 20) = -1536;
    *(_DWORD *)(a1 + 104) = 1;
    Play_Sound_Effect(15, 1);
    if ( *(_DWORD *)(a1 + 8) <= *(_DWORD *)(a1 + 32) )
      *(_DWORD *)(a1 + 116) = 310;
    else
      *(_DWORD *)(a1 + 116) = 210;
  }
  v50 = *(_DWORD *)(a1 + 8) - *(_DWORD *)(a1 + 32);
  v5 = *(_DWORD *)(a1 + 12) - *(_DWORD *)(a1 + 36);
  if ( v50 < 0 )
    v50 = -v50;
  if ( *(_DWORD *)(a1 + 116) == 100 )
  {
    if ( v50 + 1024 >= v5 )
      *(_DWORD *)(a1 + 104) = 0;
    else
      *(_DWORD *)(a1 + 104) = 5;
  }
  if ( *(_DWORD *)(a1 + 116) == 210 || *(_DWORD *)(a1 + 116) == 310 )
  {
    if ( v50 + 1024 >= v5 )
      *(_DWORD *)(a1 + 104) = 1;
    else
      *(_DWORD *)(a1 + 104) = 6;
  }
  if ( *(_DWORD *)(a1 + 116) == 200 || *(_DWORD *)(a1 + 116) == 300 )
  {
    ++*(_DWORD *)(a1 + 100);
    if ( v50 + 1024 >= v5 )
      *(_DWORD *)(a1 + 104) = *(_DWORD *)(a1 + 100) / 4 % 4 + 1;
    else
      *(_DWORD *)(a1 + 104) = *(_DWORD *)(a1 + 100) / 4 % 4 + 6;
    if ( *(_DWORD *)(a1 + 120) )
    {
      --*(_DWORD *)(a1 + 120);
      if ( *(_DWORD *)(a1 + 4) && *(_DWORD *)(a1 + 108) > 10 )
      {
        *(_DWORD *)(a1 + 108) = 0;
        *(_DWORD *)(a1 + 20) = -1536;
        *(_DWORD *)(a1 + 116) += 10;
        *(_DWORD *)(a1 + 104) = 1;
        Play_Sound_Effect(15, 1);
      }
    }
    else
    {
      *(_DWORD *)(a1 + 116) = 100;
      *(_DWORD *)(a1 + 104) = 0;
    }
  }
  if ( *(_DWORD *)(a1 + 116) >= 100 && *(_DWORD *)(a1 + 116) < 500 )
  {
    if ( *(_DWORD *)(a1 + 8) >= Quote_X_Position - 40960 && *(_DWORD *)(a1 + 8) <= Quote_X_Position + 40960 )
    {
      *(_DWORD *)(a1 + 20) += 51;
    }
    else if ( *(_DWORD *)(a1 + 4) )
    {
      *(_DWORD *)(a1 + 20) += 16;
    }
    else
    {
      *(_DWORD *)(a1 + 20) += 51;
    }
  }
  if ( *(_DWORD *)(a1 + 16) > 768 )
    *(_DWORD *)(a1 + 16) = 768;
  if ( *(_DWORD *)(a1 + 16) < -768 )
    *(_DWORD *)(a1 + 16) = -768;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 116) >= 100 && !(*(_DWORD *)(a1 + 4) & 8) && *(_DWORD *)(a1 + 104) != 1000 )
  {
    if ( v50 + 1024 >= v5 )
      *(_DWORD *)(a1 + 104) = 1;
    else
      *(_DWORD *)(a1 + 104) = 6;
  }
  if ( *(_DWORD *)(a1 + 76) )
  {
    v3 = &v6 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v3;
    *(_DWORD *)(result + 4) = v3[1];
    *(_DWORD *)(result + 8) = v3[2];
    *(_DWORD *)(result + 12) = v3[3];
  }
  else
  {
    v1 = &v51 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v1;
    *(_DWORD *)(result + 4) = v1[1];
    *(_DWORD *)(result + 8) = v1[2];
    *(_DWORD *)(result + 12) = v1[3];
  }
  return result;
}
// 4BBA20: using guessed type int dword_4BBA20;
// 4BBA24: using guessed type int dword_4BBA24;
// 4BBA2C: using guessed type int dword_4BBA2C;

//----- (0044BE10) --------------------------------------------------------
int __cdecl NPC181(int a1)
{
  int result; // eax@1
  int *v2; // eax@34
  int v3; // ecx@34
  int *v4; // eax@35
  int v5; // ecx@35
  int v6; // [sp+0h] [bp-44h]@16
  int v7; // [sp+4h] [bp-40h]@1
  int v8; // [sp+8h] [bp-3Ch]@1
  int v9; // [sp+Ch] [bp-38h]@1
  int v10; // [sp+10h] [bp-34h]@1
  int v11; // [sp+14h] [bp-30h]@1
  int v12; // [sp+18h] [bp-2Ch]@1
  int v13; // [sp+1Ch] [bp-28h]@1
  int v14; // [sp+20h] [bp-24h]@1
  int v15; // [sp+24h] [bp-20h]@1
  int v16; // [sp+28h] [bp-1Ch]@1
  int v17; // [sp+2Ch] [bp-18h]@1
  int v18; // [sp+30h] [bp-14h]@1
  int v19; // [sp+34h] [bp-10h]@1
  int v20; // [sp+38h] [bp-Ch]@1
  int v21; // [sp+3Ch] [bp-8h]@1
  int v22; // [sp+40h] [bp-4h]@1

  v15 = 216;
  v16 = 152;
  v17 = 232;
  v18 = 168;
  v19 = 232;
  v20 = 152;
  v21 = 248;
  v22 = 168;
  v7 = 216;
  v8 = 168;
  v9 = 232;
  v10 = 184;
  v11 = 232;
  v12 = 168;
  v13 = 248;
  v14 = 184;
  result = a1;
  if ( *(_DWORD *)(a1 + 168) )
  {
    if ( *(_DWORD *)(*(_DWORD *)(a1 + 168) + 104) >= 5 )
    {
      if ( *(_DWORD *)(*(_DWORD *)(a1 + 168) + 76) )
      {
        *(_DWORD *)(a1 + 76) = 2;
        *(_DWORD *)(a1 + 8) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 8);
      }
      else
      {
        *(_DWORD *)(a1 + 76) = 0;
        *(_DWORD *)(a1 + 8) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 8);
      }
      *(_DWORD *)(a1 + 12) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 12) - 5120;
      *(_DWORD *)(a1 + 104) = 1;
    }
    else
    {
      if ( *(_DWORD *)(*(_DWORD *)(a1 + 168) + 76) )
      {
        *(_DWORD *)(a1 + 76) = 2;
        *(_DWORD *)(a1 + 8) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 8) + 4096;
      }
      else
      {
        *(_DWORD *)(a1 + 76) = 0;
        *(_DWORD *)(a1 + 8) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 8) - 4096;
      }
      *(_DWORD *)(a1 + 12) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 12);
      *(_DWORD *)(a1 + 104) = 0;
    }
    if ( *(_DWORD *)(*(_DWORD *)(a1 + 168) + 104) == 1
      || *(_DWORD *)(*(_DWORD *)(a1 + 168) + 104) == 3
      || *(_DWORD *)(*(_DWORD *)(a1 + 168) + 104) == 6
      || *(_DWORD *)(*(_DWORD *)(a1 + 168) + 104) == 8 )
    {
      *(_DWORD *)(a1 + 12) -= 512;
    }
    v6 = *(_DWORD *)(a1 + 116);
    if ( v6 )
    {
      if ( v6 == 10 )
      {
        if ( ++*(_DWORD *)(a1 + 120) % 6 == 1 )
        {
          if ( *(_DWORD *)(a1 + 104) )
          {
            if ( *(_DWORD *)(a1 + 76) )
            {
              Create_Bullet(12, *(_DWORD *)(a1 + 8) + 1024, *(_DWORD *)(a1 + 12) - 2048, 1);
              Create_Animated_Effect(*(_DWORD *)(a1 + 8) + 1024, *(_DWORD *)(a1 + 12) - 2048, 3, 0);
            }
            else
            {
              Create_Bullet(12, *(_DWORD *)(a1 + 8) - 1024, *(_DWORD *)(a1 + 12) - 2048, 1);
              Create_Animated_Effect(*(_DWORD *)(a1 + 8) - 1024, *(_DWORD *)(a1 + 12) - 2048, 3, 0);
            }
          }
          else if ( *(_DWORD *)(a1 + 76) )
          {
            Create_Bullet(12, *(_DWORD *)(a1 + 8) + 2048, *(_DWORD *)(a1 + 12) + 1536, 2);
            Create_Animated_Effect(*(_DWORD *)(a1 + 8) + 2048, *(_DWORD *)(a1 + 12) + 1536, 3, 0);
          }
          else
          {
            Create_Bullet(12, *(_DWORD *)(a1 + 8) - 2048, *(_DWORD *)(a1 + 12) + 1536, 0);
            Create_Animated_Effect(*(_DWORD *)(a1 + 8) - 2048, *(_DWORD *)(a1 + 12) + 1536, 3, 0);
          }
        }
        if ( *(_DWORD *)(a1 + 120) == 60 )
          *(_DWORD *)(a1 + 116) = 0;
      }
    }
    else if ( *(_DWORD *)(*(_DWORD *)(a1 + 168) + 112) == 10 )
    {
      *(_DWORD *)(*(_DWORD *)(a1 + 168) + 112) = 0;
      *(_DWORD *)(a1 + 116) = 10;
      *(_DWORD *)(a1 + 120) = 0;
    }
    if ( *(_DWORD *)(a1 + 76) )
    {
      v4 = &v7 + 4 * *(_DWORD *)(a1 + 104);
      v5 = a1 + 84;
      *(_DWORD *)v5 = *v4;
      *(_DWORD *)(v5 + 4) = v4[1];
      *(_DWORD *)(v5 + 8) = v4[2];
      result = v4[3];
      *(_DWORD *)(v5 + 12) = result;
    }
    else
    {
      v2 = &v15 + 4 * *(_DWORD *)(a1 + 104);
      v3 = a1 + 84;
      *(_DWORD *)v3 = *v2;
      *(_DWORD *)(v3 + 4) = v2[1];
      *(_DWORD *)(v3 + 8) = v2[2];
      result = v2[3];
      *(_DWORD *)(v3 + 12) = result;
    }
  }
  return result;
}

//----- (0044C220) --------------------------------------------------------
int __cdecl NPC182(int a1)
{
  int result; // eax@1
  int *v2; // eax@34
  int v3; // ecx@34
  int *v4; // eax@35
  int v5; // ecx@35
  int v6; // [sp+0h] [bp-44h]@16
  int v7; // [sp+4h] [bp-40h]@1
  int v8; // [sp+8h] [bp-3Ch]@1
  int v9; // [sp+Ch] [bp-38h]@1
  int v10; // [sp+10h] [bp-34h]@1
  int v11; // [sp+14h] [bp-30h]@1
  int v12; // [sp+18h] [bp-2Ch]@1
  int v13; // [sp+1Ch] [bp-28h]@1
  int v14; // [sp+20h] [bp-24h]@1
  int v15; // [sp+24h] [bp-20h]@1
  int v16; // [sp+28h] [bp-1Ch]@1
  int v17; // [sp+2Ch] [bp-18h]@1
  int v18; // [sp+30h] [bp-14h]@1
  int v19; // [sp+34h] [bp-10h]@1
  int v20; // [sp+38h] [bp-Ch]@1
  int v21; // [sp+3Ch] [bp-8h]@1
  int v22; // [sp+40h] [bp-4h]@1

  v15 = 184;
  v16 = 152;
  v17 = 200;
  v18 = 168;
  v19 = 200;
  v20 = 152;
  v21 = 216;
  v22 = 168;
  v7 = 184;
  v8 = 168;
  v9 = 200;
  v10 = 184;
  v11 = 200;
  v12 = 168;
  v13 = 216;
  v14 = 184;
  result = a1;
  if ( *(_DWORD *)(a1 + 168) )
  {
    if ( *(_DWORD *)(*(_DWORD *)(a1 + 168) + 104) >= 5 )
    {
      if ( *(_DWORD *)(*(_DWORD *)(a1 + 168) + 76) )
      {
        *(_DWORD *)(a1 + 76) = 2;
        *(_DWORD *)(a1 + 8) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 8);
      }
      else
      {
        *(_DWORD *)(a1 + 76) = 0;
        *(_DWORD *)(a1 + 8) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 8);
      }
      *(_DWORD *)(a1 + 12) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 12) - 5120;
      *(_DWORD *)(a1 + 104) = 1;
    }
    else
    {
      if ( *(_DWORD *)(*(_DWORD *)(a1 + 168) + 76) )
      {
        *(_DWORD *)(a1 + 76) = 2;
        *(_DWORD *)(a1 + 8) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 8) + 4096;
      }
      else
      {
        *(_DWORD *)(a1 + 76) = 0;
        *(_DWORD *)(a1 + 8) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 8) - 4096;
      }
      *(_DWORD *)(a1 + 12) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 12);
      *(_DWORD *)(a1 + 104) = 0;
    }
    if ( *(_DWORD *)(*(_DWORD *)(a1 + 168) + 104) == 1
      || *(_DWORD *)(*(_DWORD *)(a1 + 168) + 104) == 3
      || *(_DWORD *)(*(_DWORD *)(a1 + 168) + 104) == 6
      || *(_DWORD *)(*(_DWORD *)(a1 + 168) + 104) == 8 )
    {
      *(_DWORD *)(a1 + 12) -= 512;
    }
    v6 = *(_DWORD *)(a1 + 116);
    if ( v6 )
    {
      if ( v6 == 10 )
      {
        if ( ++*(_DWORD *)(a1 + 120) % 12 == 1 )
        {
          if ( *(_DWORD *)(a1 + 104) )
          {
            if ( *(_DWORD *)(a1 + 76) )
            {
              Create_Bullet(6, *(_DWORD *)(a1 + 8) + 1024, *(_DWORD *)(a1 + 12) - 2048, 1);
              Create_Animated_Effect(*(_DWORD *)(a1 + 8) + 1024, *(_DWORD *)(a1 + 12) - 2048, 3, 0);
            }
            else
            {
              Create_Bullet(6, *(_DWORD *)(a1 + 8) - 1024, *(_DWORD *)(a1 + 12) - 2048, 1);
              Create_Animated_Effect(*(_DWORD *)(a1 + 8) - 1024, *(_DWORD *)(a1 + 12) - 2048, 3, 0);
            }
          }
          else if ( *(_DWORD *)(a1 + 76) )
          {
            Create_Bullet(6, *(_DWORD *)(a1 + 8) + 2048, *(_DWORD *)(a1 + 12) + 1536, 2);
            Create_Animated_Effect(*(_DWORD *)(a1 + 8) + 2048, *(_DWORD *)(a1 + 12) + 1536, 3, 0);
          }
          else
          {
            Create_Bullet(6, *(_DWORD *)(a1 + 8) - 2048, *(_DWORD *)(a1 + 12) + 1536, 0);
            Create_Animated_Effect(*(_DWORD *)(a1 + 8) - 2048, *(_DWORD *)(a1 + 12) + 1536, 3, 0);
          }
        }
        if ( *(_DWORD *)(a1 + 120) == 60 )
          *(_DWORD *)(a1 + 116) = 0;
      }
    }
    else if ( *(_DWORD *)(*(_DWORD *)(a1 + 168) + 112) == 10 )
    {
      *(_DWORD *)(*(_DWORD *)(a1 + 168) + 112) = 0;
      *(_DWORD *)(a1 + 116) = 10;
      *(_DWORD *)(a1 + 120) = 0;
    }
    if ( *(_DWORD *)(a1 + 76) )
    {
      v4 = &v7 + 4 * *(_DWORD *)(a1 + 104);
      v5 = a1 + 84;
      *(_DWORD *)v5 = *v4;
      *(_DWORD *)(v5 + 4) = v4[1];
      *(_DWORD *)(v5 + 8) = v4[2];
      result = v4[3];
      *(_DWORD *)(v5 + 12) = result;
    }
    else
    {
      v2 = &v15 + 4 * *(_DWORD *)(a1 + 104);
      v3 = a1 + 84;
      *(_DWORD *)v3 = *v2;
      *(_DWORD *)(v3 + 4) = v2[1];
      *(_DWORD *)(v3 + 8) = v2[2];
      result = v2[3];
      *(_DWORD *)(v3 + 12) = result;
    }
  }
  return result;
}

//----- (0044C630) --------------------------------------------------------
int __cdecl NPC183(int a1)
{
  int result; // eax@1
  __int64 v2; // rax@4
  __int64 v3; // rax@4
  int *v4; // eax@9
  int v5; // ecx@9
  int v6; // [sp+4h] [bp-20h]@1
  int v7; // [sp+8h] [bp-1Ch]@1
  int v8; // [sp+Ch] [bp-18h]@1
  int v9; // [sp+10h] [bp-14h]@1
  int v10; // [sp+14h] [bp-10h]@1
  int v11; // [sp+18h] [bp-Ch]@1
  int v12; // [sp+1Ch] [bp-8h]@1
  int v13; // [sp+20h] [bp-4h]@1

  v6 = 56;
  v7 = 96;
  v8 = 80;
  v9 = 120;
  v10 = 80;
  v11 = 96;
  v12 = 104;
  v13 = 120;
  result = a1;
  if ( *(_DWORD *)(a1 + 168) )
  {
    if ( !*(_DWORD *)(a1 + 116) )
    {
      *(_DWORD *)(a1 + 8) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 8);
      *(_DWORD *)(a1 + 12) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 12);
      *(_DWORD *)(a1 + 116) = 1;
    }
    v2 = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 8) - *(_DWORD *)(a1 + 8);
    *(_DWORD *)(a1 + 8) += ((signed int)v2 - HIDWORD(v2)) >> 1;
    v3 = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 12) - *(_DWORD *)(a1 + 12);
    *(_DWORD *)(a1 + 12) += ((signed int)v3 - HIDWORD(v3)) >> 1;
    if ( ++*(_DWORD *)(a1 + 100) > 1 )
    {
      *(_DWORD *)(a1 + 100) = 0;
      ++*(_DWORD *)(a1 + 104);
    }
    if ( *(_DWORD *)(a1 + 104) > 1 )
      *(_DWORD *)(a1 + 104) = 0;
    result = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 4) & 0x100;
    if ( result )
    {
      v4 = &v6 + 4 * *(_DWORD *)(a1 + 104);
      v5 = a1 + 84;
      *(_DWORD *)v5 = *v4;
      *(_DWORD *)(v5 + 4) = v4[1];
      *(_DWORD *)(v5 + 8) = v4[2];
      result = v4[3];
      *(_DWORD *)(v5 + 12) = result;
    }
    else
    {
      *(_DWORD *)(a1 + 92) = 0;
    }
  }
  return result;
}

//----- (0044C7A0) --------------------------------------------------------
int __cdecl NPC184(int a1)
{
  int v1; // ST10_4@14
  int v2; // ST0C_4@14
  int v3; // ST08_4@14
  int v4; // eax@14
  int *v5; // eax@20
  int v6; // ecx@20
  int result; // eax@20
  signed int i; // [sp+8h] [bp-44h]@12
  int v9; // [sp+Ch] [bp-40h]@1
  int v10; // [sp+10h] [bp-3Ch]@1
  int v11; // [sp+14h] [bp-38h]@1
  int v12; // [sp+18h] [bp-34h]@1
  int v13; // [sp+1Ch] [bp-30h]@1
  int v14; // [sp+20h] [bp-2Ch]@1
  int v15; // [sp+24h] [bp-28h]@1
  int v16; // [sp+28h] [bp-24h]@1
  int v17; // [sp+2Ch] [bp-20h]@1
  int v18; // [sp+30h] [bp-1Ch]@1
  int v19; // [sp+34h] [bp-18h]@1
  int v20; // [sp+38h] [bp-14h]@1
  int v21; // [sp+3Ch] [bp-10h]@1
  int v22; // [sp+40h] [bp-Ch]@1
  int v23; // [sp+44h] [bp-8h]@1
  int v24; // [sp+48h] [bp-4h]@1

  v9 = 0;
  v10 = 64;
  v11 = 32;
  v12 = 96;
  v13 = 32;
  v14 = 64;
  v15 = 64;
  v16 = 96;
  v17 = 64;
  v18 = 64;
  v19 = 96;
  v20 = 96;
  v21 = 32;
  v22 = 64;
  v23 = 64;
  v24 = 96;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 8) += 4096;
      *(_DWORD *)(a1 + 12) += 4096;
      break;
    case 0xA:
      *(_DWORD *)(a1 + 116) = 11;
      *(_DWORD *)(a1 + 104) = 1;
      *(_DWORD *)(a1 + 120) = 0;
      *(_WORD *)(a1 + 80) |= 8u;
      goto LABEL_4;
    case 0xB:
LABEL_4:
      switch ( *(_DWORD *)(a1 + 76) )
      {
        case 0:
          *(_DWORD *)(a1 + 8) -= 128;
          break;
        case 1:
          *(_DWORD *)(a1 + 12) -= 128;
          break;
        case 2:
          *(_DWORD *)(a1 + 8) += 128;
          break;
        case 3:
          *(_DWORD *)(a1 + 12) += 128;
          break;
        default:
          break;
      }
      if ( !(++*(_DWORD *)(a1 + 120) % 8) )
        Play_Sound_Effect(26, 1);
      sub_40F310(20);
      break;
    case 0x14:
      for ( i = 0; i < 4; ++i )
      {
        v1 = RNG_Range(-1536, 0);
        v2 = RNG_Range(-341, 341);
        v3 = *(_DWORD *)(a1 + 12) + 0x2000;
        v4 = RNG_Range(-12, 12);
        NPC_Create(4, *(_DWORD *)(a1 + 8) + (v4 << 9), v3, v2, v1, 0, 0, 256);
      }
      *(_DWORD *)(a1 + 116) = 1;
      break;
    default:
      break;
  }
  if ( ++*(_DWORD *)(a1 + 100) > 10 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    ++*(_DWORD *)(a1 + 104);
  }
  if ( *(_DWORD *)(a1 + 104) > 3 )
    *(_DWORD *)(a1 + 104) = 0;
  v5 = &v9 + 4 * *(_DWORD *)(a1 + 104);
  v6 = a1 + 84;
  *(_DWORD *)v6 = *v5;
  *(_DWORD *)(v6 + 4) = v5[1];
  *(_DWORD *)(v6 + 8) = v5[2];
  result = v5[3];
  *(_DWORD *)(v6 + 12) = result;
  return result;
}

//----- (0044CA60) --------------------------------------------------------
int __cdecl NPC185(int a1)
{
  int result; // eax@11

  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 12) += 4096;
      break;
    case 0xA:
      *(_DWORD *)(a1 + 116) = 11;
      *(_DWORD *)(a1 + 104) = 1;
      *(_DWORD *)(a1 + 120) = 0;
      *(_WORD *)(a1 + 80) |= 8u;
      goto LABEL_4;
    case 0xB:
LABEL_4:
      switch ( *(_DWORD *)(a1 + 76) )
      {
        case 0:
          *(_DWORD *)(a1 + 8) -= 128;
          break;
        case 1:
          *(_DWORD *)(a1 + 12) -= 128;
          break;
        case 2:
          *(_DWORD *)(a1 + 8) += 128;
          break;
        case 3:
          *(_DWORD *)(a1 + 12) += 128;
          break;
        default:
          break;
      }
      ++*(_DWORD *)(a1 + 120);
      break;
    case 0x14:
      *(_DWORD *)(a1 + 12) -= 12288;
      *(_DWORD *)(a1 + 116) = 1;
      break;
    default:
      break;
  }
  result = a1 + 84;
  *(_DWORD *)result = 96;
  *(_DWORD *)(result + 4) = 64;
  *(_DWORD *)(result + 8) = 112;
  *(_DWORD *)(result + 12) = 96;
  return result;
}

//----- (0044CBE0) --------------------------------------------------------
int __cdecl NPC186(int a1)
{
  int *v1; // eax@17
  int v2; // ecx@17
  int result; // eax@17
  int v4; // [sp+4h] [bp-44h]@1
  int v5; // [sp+8h] [bp-40h]@1
  int v6; // [sp+Ch] [bp-3Ch]@1
  int v7; // [sp+10h] [bp-38h]@1
  int v8; // [sp+14h] [bp-34h]@1
  int v9; // [sp+18h] [bp-30h]@1
  int v10; // [sp+1Ch] [bp-2Ch]@1
  int v11; // [sp+20h] [bp-28h]@1
  int v12; // [sp+24h] [bp-24h]@1
  int v13; // [sp+28h] [bp-20h]@1
  int v14; // [sp+2Ch] [bp-1Ch]@1
  int v15; // [sp+30h] [bp-18h]@1
  int v16; // [sp+34h] [bp-14h]@1
  int v17; // [sp+38h] [bp-10h]@1
  int v18; // [sp+3Ch] [bp-Ch]@1
  int v19; // [sp+40h] [bp-8h]@1
  int v20; // [sp+44h] [bp-4h]@1

  v5 = 48;
  v6 = 48;
  v7 = 64;
  v8 = 64;
  v9 = 64;
  v10 = 48;
  v11 = 80;
  v12 = 64;
  v13 = 80;
  v14 = 48;
  v15 = 96;
  v16 = 64;
  v17 = 64;
  v18 = 48;
  v19 = 80;
  v20 = 64;
  v4 = *(_DWORD *)(a1 + 116);
  if ( !v4 )
  {
    *(_DWORD *)(a1 + 116) = 1;
    goto LABEL_13;
  }
  if ( v4 == 10 )
  {
    *(_DWORD *)(a1 + 116) = 11;
    *(_DWORD *)(a1 + 104) = 1;
    *(_DWORD *)(a1 + 120) = 0;
    *(_WORD *)(a1 + 80) |= 8u;
  }
  else if ( v4 != 11 )
  {
    goto LABEL_13;
  }
  switch ( *(_DWORD *)(a1 + 76) )
  {
    case 0:
      *(_DWORD *)(a1 + 8) -= 128;
      break;
    case 1:
      *(_DWORD *)(a1 + 12) -= 128;
      break;
    case 2:
      *(_DWORD *)(a1 + 8) += 128;
      break;
    case 3:
      *(_DWORD *)(a1 + 12) += 128;
      break;
    default:
      break;
  }
  ++*(_DWORD *)(a1 + 120);
LABEL_13:
  if ( ++*(_DWORD *)(a1 + 100) > 10 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    ++*(_DWORD *)(a1 + 104);
  }
  if ( *(_DWORD *)(a1 + 104) > 3 )
    *(_DWORD *)(a1 + 104) = 0;
  v1 = &v5 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  *(_DWORD *)(v2 + 8) = v1[2];
  result = v1[3];
  *(_DWORD *)(v2 + 12) = result;
  return result;
}

//----- (0044CDB0) --------------------------------------------------------
int __cdecl NPC187(int a1)
{
  int *v1; // edx@26
  int result; // eax@26
  int *v3; // edx@27
  int v4; // [sp+0h] [bp-48h]@1
  int v5; // [sp+4h] [bp-44h]@21
  int v6; // [sp+8h] [bp-40h]@21
  int v7; // [sp+Ch] [bp-3Ch]@21
  int v8; // [sp+10h] [bp-38h]@21
  int v9; // [sp+14h] [bp-34h]@21
  int v10; // [sp+18h] [bp-30h]@21
  int v11; // [sp+1Ch] [bp-2Ch]@21
  int v12; // [sp+20h] [bp-28h]@21
  int v13; // [sp+24h] [bp-24h]@21
  int v14; // [sp+28h] [bp-20h]@21
  int v15; // [sp+2Ch] [bp-1Ch]@21
  int v16; // [sp+30h] [bp-18h]@21
  int v17; // [sp+34h] [bp-14h]@21
  int v18; // [sp+38h] [bp-10h]@21
  int v19; // [sp+3Ch] [bp-Ch]@21
  int v20; // [sp+40h] [bp-8h]@21
  int i; // [sp+44h] [bp-4h]@5

  v4 = *(_DWORD *)(a1 + 116);
  if ( v4 )
  {
    if ( v4 != 1 )
    {
      if ( v4 == 2 )
      {
        *(_DWORD *)(a1 + 108) += 4;
        if ( Quote_X_Position >= *(_DWORD *)(a1 + 8) )
          *(_DWORD *)(a1 + 76) = 2;
        else
          *(_DWORD *)(a1 + 76) = 0;
        if ( *(_DWORD *)(a1 + 36) < *(_DWORD *)(a1 + 12) )
          *(_DWORD *)(a1 + 20) -= 16;
        if ( *(_DWORD *)(a1 + 36) > *(_DWORD *)(a1 + 12) )
          *(_DWORD *)(a1 + 20) += 16;
        if ( *(_DWORD *)(a1 + 20) > 853 )
          *(_DWORD *)(a1 + 20) = 853;
        if ( *(_DWORD *)(a1 + 20) < -853 )
          *(_DWORD *)(a1 + 20) = -853;
      }
      goto LABEL_21;
    }
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 32) = *(_DWORD *)(a1 + 8);
    *(_DWORD *)(a1 + 36) = *(_DWORD *)(a1 + 12);
    *(_DWORD *)(a1 + 108) = 120;
    *(_DWORD *)(a1 + 120) = RNG_Range(0, 50);
    for ( i = 0; i < 5; ++i )
      NPC_Create(188, 0, 0, 0, 0, 51 * i, a1, 256);
  }
  if ( ++*(_DWORD *)(a1 + 120) >= 50 )
  {
    *(_DWORD *)(a1 + 120) = 0;
    *(_DWORD *)(a1 + 116) = 2;
    *(_DWORD *)(a1 + 20) = 768;
  }
LABEL_21:
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  v13 = 224;
  v14 = 104;
  v15 = 256;
  v16 = 136;
  v17 = 256;
  v18 = 104;
  v19 = 288;
  v20 = 136;
  v5 = 224;
  v6 = 136;
  v7 = 256;
  v8 = 168;
  v9 = 256;
  v10 = 136;
  v11 = 288;
  v12 = 168;
  if ( ++*(_DWORD *)(a1 + 100) > 2 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    ++*(_DWORD *)(a1 + 104);
  }
  if ( *(_DWORD *)(a1 + 104) > 1 )
    *(_DWORD *)(a1 + 104) = 0;
  if ( *(_DWORD *)(a1 + 76) )
  {
    v3 = &v5 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v3;
    *(_DWORD *)(result + 4) = v3[1];
    *(_DWORD *)(result + 8) = v3[2];
    *(_DWORD *)(result + 12) = v3[3];
  }
  else
  {
    v1 = &v13 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v1;
    *(_DWORD *)(result + 4) = v1[1];
    *(_DWORD *)(result + 8) = v1[2];
    *(_DWORD *)(result + 12) = v1[3];
  }
  return result;
}

//----- (0044D070) --------------------------------------------------------
int __cdecl NPC188(int a1)
{
  int v1; // esi@8
  int v2; // esi@8
  int *v3; // edx@34
  int result; // eax@34
  int *v5; // edx@35
  int v6; // [sp+4h] [bp-48h]@1
  int v7; // [sp+8h] [bp-44h]@33
  int v8; // [sp+Ch] [bp-40h]@33
  int v9; // [sp+10h] [bp-3Ch]@33
  int v10; // [sp+14h] [bp-38h]@33
  int v11; // [sp+18h] [bp-34h]@33
  int v12; // [sp+1Ch] [bp-30h]@33
  int v13; // [sp+20h] [bp-2Ch]@33
  int v14; // [sp+24h] [bp-28h]@33
  int v15; // [sp+28h] [bp-24h]@33
  int v16; // [sp+2Ch] [bp-20h]@33
  int v17; // [sp+30h] [bp-1Ch]@33
  int v18; // [sp+34h] [bp-18h]@33
  int v19; // [sp+38h] [bp-14h]@33
  int v20; // [sp+3Ch] [bp-10h]@33
  int v21; // [sp+40h] [bp-Ch]@33
  int v22; // [sp+44h] [bp-8h]@33
  char v23; // [sp+4Bh] [bp-1h]@8

  v6 = *(_DWORD *)(a1 + 116);
  if ( !v6 )
  {
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 108) = *(_DWORD *)(a1 + 76);
    goto LABEL_6;
  }
  if ( v6 == 1 )
  {
LABEL_6:
    if ( *(_DWORD *)(*(_DWORD *)(a1 + 168) + 40) == 187 && **(_BYTE **)(a1 + 168) & 0x80 )
    {
      v23 = *(_BYTE *)(a1 + 108) + *(_BYTE *)(*(_DWORD *)(a1 + 168) + 108);
      v1 = *(_DWORD *)(a1 + 168);
      *(_DWORD *)(a1 + 8) = *(_DWORD *)(v1 + 8) + 20 * SIN_function(v23);
      v2 = *(_DWORD *)(a1 + 168);
      *(_DWORD *)(a1 + 12) = *(_DWORD *)(v2 + 12) + 32 * COS_function(v23);
    }
    else
    {
      *(_DWORD *)(a1 + 16) = RNG_Range(-512, 512);
      *(_DWORD *)(a1 + 20) = RNG_Range(-512, 512);
      *(_DWORD *)(a1 + 116) = 10;
    }
    goto LABEL_26;
  }
  if ( v6 == 10 )
  {
    if ( Quote_X_Position >= *(_DWORD *)(a1 + 8) )
      *(_DWORD *)(a1 + 16) += 32;
    else
      *(_DWORD *)(a1 + 16) -= 32;
    if ( Quote_Y_Position >= *(_DWORD *)(a1 + 12) )
      *(_DWORD *)(a1 + 20) += 32;
    else
      *(_DWORD *)(a1 + 20) -= 32;
    if ( *(_DWORD *)(a1 + 16) > 2048 )
      *(_DWORD *)(a1 + 16) = 2048;
    if ( *(_DWORD *)(a1 + 16) < -2048 )
      *(_DWORD *)(a1 + 16) = -2048;
    if ( *(_DWORD *)(a1 + 20) > 512 )
      *(_DWORD *)(a1 + 20) = 512;
    if ( *(_DWORD *)(a1 + 20) < -512 )
      *(_DWORD *)(a1 + 20) = -512;
    *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
    *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  }
LABEL_26:
  if ( Quote_X_Position >= *(_DWORD *)(a1 + 8) )
    *(_DWORD *)(a1 + 76) = 2;
  else
    *(_DWORD *)(a1 + 76) = 0;
  if ( ++*(_DWORD *)(a1 + 100) > 2 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    ++*(_DWORD *)(a1 + 104);
  }
  if ( *(_DWORD *)(a1 + 104) > 1 )
    *(_DWORD *)(a1 + 104) = 0;
  v15 = 288;
  v16 = 104;
  v17 = 304;
  v18 = 120;
  v19 = 304;
  v20 = 104;
  v21 = 320;
  v22 = 120;
  v7 = 288;
  v8 = 120;
  v9 = 304;
  v10 = 136;
  v11 = 304;
  v12 = 120;
  v13 = 320;
  v14 = 136;
  if ( *(_DWORD *)(a1 + 76) )
  {
    v5 = &v7 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v5;
    *(_DWORD *)(result + 4) = v5[1];
    *(_DWORD *)(result + 8) = v5[2];
    *(_DWORD *)(result + 12) = v5[3];
  }
  else
  {
    v3 = &v15 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v3;
    *(_DWORD *)(result + 4) = v3[1];
    *(_DWORD *)(result + 8) = v3[2];
    *(_DWORD *)(result + 12) = v3[3];
  }
  return result;
}

//----- (0044D3A0) --------------------------------------------------------
int __cdecl NPC189(int a1)
{
  int *v1; // ecx@31
  int v2; // edx@31
  int result; // eax@31
  int v4; // [sp+0h] [bp-34h]@1
  int v5; // [sp+4h] [bp-30h]@31
  int v6; // [sp+8h] [bp-2Ch]@31
  int v7; // [sp+Ch] [bp-28h]@31
  int v8; // [sp+10h] [bp-24h]@31
  int v9; // [sp+14h] [bp-20h]@31
  int v10; // [sp+18h] [bp-1Ch]@31
  int v11; // [sp+1Ch] [bp-18h]@31
  int v12; // [sp+20h] [bp-14h]@31
  int v13; // [sp+24h] [bp-10h]@31
  int v14; // [sp+28h] [bp-Ch]@31
  int v15; // [sp+2Ch] [bp-8h]@31
  int v16; // [sp+30h] [bp-4h]@31

  v4 = *(_DWORD *)(a1 + 116);
  if ( v4 )
  {
    if ( v4 != 1 )
    {
      if ( v4 == 10 )
      {
        if ( Quote_X_Position >= *(_DWORD *)(a1 + 8) )
          *(_DWORD *)(a1 + 16) += 8;
        else
          *(_DWORD *)(a1 + 16) -= 8;
        if ( Quote_Y_Position >= *(_DWORD *)(a1 + 12) )
          *(_DWORD *)(a1 + 20) += 8;
        else
          *(_DWORD *)(a1 + 20) -= 8;
        if ( *(_DWORD *)(a1 + 16) > 1024 )
          *(_DWORD *)(a1 + 16) = 1024;
        if ( *(_DWORD *)(a1 + 16) < -1024 )
          *(_DWORD *)(a1 + 16) = -1024;
        if ( *(_DWORD *)(a1 + 20) > 1024 )
          *(_DWORD *)(a1 + 20) = 1024;
        if ( *(_DWORD *)(a1 + 20) < -1024 )
          *(_DWORD *)(a1 + 20) = -1024;
        *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
        *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
      }
      goto LABEL_24;
    }
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 16) = -64;
  }
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( ++*(_DWORD *)(a1 + 120) > 256 )
    *(_DWORD *)(a1 + 116) = 10;
LABEL_24:
  if ( Quote_X_Position >= *(_DWORD *)(a1 + 8) )
    *(_DWORD *)(a1 + 76) = 2;
  else
    *(_DWORD *)(a1 + 76) = 0;
  if ( ++*(_DWORD *)(a1 + 100) > 2 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    ++*(_DWORD *)(a1 + 104);
  }
  if ( *(_DWORD *)(a1 + 104) > 2 )
    *(_DWORD *)(a1 + 104) = 0;
  v5 = 224;
  v6 = 184;
  v7 = 232;
  v8 = 200;
  v9 = 232;
  v10 = 184;
  v11 = 240;
  v12 = 200;
  v13 = 240;
  v14 = 184;
  v15 = 248;
  v16 = 200;
  v1 = &v5 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  result = v1[2];
  *(_DWORD *)(v2 + 8) = result;
  *(_DWORD *)(v2 + 12) = v1[3];
  return result;
}

//----- (0044D5E0) --------------------------------------------------------
int __cdecl NPC190(int a1)
{
  int v1; // ST10_4@8
  int v2; // ST0C_4@8
  int v3; // eax@8
  int *v4; // edx@14
  int result; // eax@14
  int v6; // [sp+0h] [bp-28h]@1
  signed int i; // [sp+4h] [bp-24h]@6
  int v8; // [sp+8h] [bp-20h]@1
  int v9; // [sp+Ch] [bp-1Ch]@1
  int v10; // [sp+10h] [bp-18h]@1
  int v11; // [sp+14h] [bp-14h]@1
  int v12; // [sp+18h] [bp-10h]@1
  int v13; // [sp+1Ch] [bp-Ch]@1
  int v14; // [sp+20h] [bp-8h]@1
  int v15; // [sp+24h] [bp-4h]@1

  v8 = 192;
  v9 = 32;
  v10 = 208;
  v11 = 48;
  v12 = 208;
  v13 = 32;
  v14 = 224;
  v15 = 48;
  v6 = *(_DWORD *)(a1 + 116);
  if ( v6 )
  {
    if ( v6 == 10 )
    {
      Play_Sound_Effect(72, 1);
      for ( i = 0; i < 8; ++i )
      {
        v1 = RNG_Range(-3, 3) << 9;
        v2 = RNG_Range(-8, -2) << 9;
        v3 = RNG_Range(-8, 8);
        NPC_Create(4, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12) + (v3 << 9), v2, v1, 0, 0, 256);
      }
      *(_BYTE *)a1 = 0;
    }
    else if ( v6 == 20 )
    {
      if ( ++*(_DWORD *)(a1 + 100) > 10 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 1 )
        *(_DWORD *)(a1 + 104) = 0;
    }
  }
  else
  {
    *(_DWORD *)(a1 + 104) = 0;
  }
  v4 = &v8 + 4 * *(_DWORD *)(a1 + 104);
  result = a1 + 84;
  *(_DWORD *)result = *v4;
  *(_DWORD *)(result + 4) = v4[1];
  *(_DWORD *)(result + 8) = v4[2];
  *(_DWORD *)(result + 12) = v4[3];
  return result;
}

//----- (0044D740) --------------------------------------------------------
int __cdecl NPC191(int a1)
{
  int result; // eax@41

  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 10;
      *(_DWORD *)(a1 + 36) = *(_DWORD *)(a1 + 12);
      *(_DWORD *)(a1 + 20) = 512;
      goto LABEL_3;
    case 0xA:
LABEL_3:
      if ( *(_DWORD *)(a1 + 12) >= *(_DWORD *)(a1 + 36) )
        *(_DWORD *)(a1 + 20) -= 4;
      else
        *(_DWORD *)(a1 + 20) += 4;
      if ( *(_DWORD *)(a1 + 20) < -256 )
        *(_DWORD *)(a1 + 20) = -256;
      if ( *(_DWORD *)(a1 + 20) > 256 )
        *(_DWORD *)(a1 + 20) = 256;
      *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
      break;
    case 0x14:
      *(_DWORD *)(a1 + 116) = 21;
      *(_DWORD *)(a1 + 120) = 0;
      goto LABEL_12;
    case 0x15:
LABEL_12:
      if ( *(_DWORD *)(a1 + 12) >= *(_DWORD *)(a1 + 36) )
        *(_DWORD *)(a1 + 20) -= 4;
      else
        *(_DWORD *)(a1 + 20) += 4;
      if ( *(_DWORD *)(a1 + 20) < -512 )
        *(_DWORD *)(a1 + 20) = -512;
      if ( *(_DWORD *)(a1 + 20) > 512 )
        *(_DWORD *)(a1 + 20) = 512;
      *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
      if ( ++*(_DWORD *)(a1 + 120) > 1000 )
        *(_DWORD *)(a1 + 116) = 22;
      break;
    case 0x16:
      if ( *(_DWORD *)(a1 + 12) >= 0 )
        *(_DWORD *)(a1 + 20) -= 4;
      else
        *(_DWORD *)(a1 + 20) += 4;
      if ( *(_DWORD *)(a1 + 20) < -512 )
        *(_DWORD *)(a1 + 20) = -512;
      if ( *(_DWORD *)(a1 + 20) > 512 )
        *(_DWORD *)(a1 + 20) = 512;
      *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
      if ( *(_DWORD *)(a1 + 12) < 0x8000 || dword_4BBA28 )
      {
        *(_DWORD *)(a1 + 116) = 21;
        *(_DWORD *)(a1 + 120) = 0;
      }
      break;
    case 0x1E:
      if ( *(_DWORD *)(a1 + 12) >= 0 )
        *(_DWORD *)(a1 + 20) -= 4;
      else
        *(_DWORD *)(a1 + 20) += 4;
      if ( *(_DWORD *)(a1 + 20) < -512 )
        *(_DWORD *)(a1 + 20) = -512;
      if ( *(_DWORD *)(a1 + 20) > 256 )
        *(_DWORD *)(a1 + 20) = 256;
      *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
      break;
    default:
      break;
  }
  result = *(_DWORD *)(a1 + 12);
  GlobalWaterDepth = *(_DWORD *)(a1 + 12);
  *(_DWORD *)(a1 + 92) = 0;
  *(_DWORD *)(a1 + 96) = 0;
  return result;
}
// 499C90: using guessed type int GlobalWaterDepth;
// 4BBA28: using guessed type int dword_4BBA28;

//----- (0044DA00) --------------------------------------------------------
int __cdecl NPC192(int a1)
{
  int *v1; // eax@23
  int v2; // ecx@23
  int result; // eax@23
  int *v4; // eax@24
  int v5; // ecx@24
  int v6; // [sp+4h] [bp-40h]@22
  int v7; // [sp+8h] [bp-3Ch]@22
  int v8; // [sp+Ch] [bp-38h]@22
  int v9; // [sp+10h] [bp-34h]@22
  int v10; // [sp+14h] [bp-30h]@22
  int v11; // [sp+18h] [bp-2Ch]@22
  int v12; // [sp+1Ch] [bp-28h]@22
  int v13; // [sp+20h] [bp-24h]@22
  int v14; // [sp+24h] [bp-20h]@22
  int v15; // [sp+28h] [bp-1Ch]@22
  int v16; // [sp+2Ch] [bp-18h]@22
  int v17; // [sp+30h] [bp-14h]@22
  int v18; // [sp+34h] [bp-10h]@22
  int v19; // [sp+38h] [bp-Ch]@22
  int v20; // [sp+3Ch] [bp-8h]@22
  int v21; // [sp+40h] [bp-4h]@22

  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 148) = 0x2000;
      *(_DWORD *)(a1 + 140) = 0x2000;
      *(_DWORD *)(a1 + 144) = 4096;
      *(_DWORD *)(a1 + 152) = 4096;
      break;
    case 0xA:
      *(_DWORD *)(a1 + 116) = 11;
      *(_DWORD *)(a1 + 104) = 1;
      *(_DWORD *)(a1 + 144) = 0x2000;
      *(_DWORD *)(a1 + 152) = 0x2000;
      *(_DWORD *)(a1 + 12) -= 2560;
      break;
    case 0x14:
      *(_DWORD *)(a1 + 116) = 21;
      *(_DWORD *)(a1 + 120) = 1;
      *(_DWORD *)(a1 + 32) = *(_DWORD *)(a1 + 8);
      *(_DWORD *)(a1 + 36) = *(_DWORD *)(a1 + 12);
      goto LABEL_5;
    case 0x15:
LABEL_5:
      *(_DWORD *)(a1 + 8) = *(_DWORD *)(a1 + 32) + (RNG_Range(-1, 1) << 9);
      *(_DWORD *)(a1 + 12) = *(_DWORD *)(a1 + 36) + (RNG_Range(-1, 1) << 9);
      if ( ++*(_DWORD *)(a1 + 120) > 30 )
        *(_DWORD *)(a1 + 116) = 30;
      break;
    case 0x1E:
      *(_DWORD *)(a1 + 116) = 31;
      *(_DWORD *)(a1 + 120) = 1;
      *(_DWORD *)(a1 + 16) = -2048;
      *(_DWORD *)(a1 + 8) = *(_DWORD *)(a1 + 32);
      *(_DWORD *)(a1 + 12) = *(_DWORD *)(a1 + 36);
      Play_Sound_Effect(44, 1);
      goto LABEL_9;
    case 0x1F:
LABEL_9:
      *(_DWORD *)(a1 + 16) += 32;
      *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
      ++*(_DWORD *)(a1 + 120);
      *(_DWORD *)(a1 + 12) = *(_DWORD *)(a1 + 36) + (RNG_Range(-1, 1) << 9);
      if ( *(_DWORD *)(a1 + 120) > 10 )
        *(_DWORD *)(a1 + 76) = 2;
      if ( *(_DWORD *)(a1 + 120) > 200 )
        *(_DWORD *)(a1 + 116) = 40;
      break;
    case 0x28:
      *(_DWORD *)(a1 + 116) = 41;
      *(_DWORD *)(a1 + 120) = 2;
      *(_DWORD *)(a1 + 76) = 0;
      *(_DWORD *)(a1 + 12) -= 24576;
      *(_DWORD *)(a1 + 16) = -4096;
      goto LABEL_15;
    case 0x29:
LABEL_15:
      *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
      *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
      *(_DWORD *)(a1 + 120) += 2;
      if ( *(_DWORD *)(a1 + 120) > 1200 )
        *(_BYTE *)a1 = 0;
      break;
    default:
      break;
  }
  if ( !(*(_DWORD *)(a1 + 120) % 4) && *(_DWORD *)(a1 + 116) >= 20 )
  {
    Play_Sound_Effect(34, 1);
    if ( *(_DWORD *)(a1 + 76) )
      Create_Animated_Effect(*(_DWORD *)(a1 + 8) - 5120, *(_DWORD *)(a1 + 12) + 5120, 7, 0);
    else
      Create_Animated_Effect(*(_DWORD *)(a1 + 8) + 5120, *(_DWORD *)(a1 + 12) + 5120, 7, 2);
  }
  v14 = 224;
  v15 = 64;
  v16 = 256;
  v17 = 80;
  v18 = 256;
  v19 = 64;
  v20 = 288;
  v21 = 96;
  v6 = 224;
  v7 = 80;
  v8 = 256;
  v9 = 96;
  v10 = 288;
  v11 = 64;
  v12 = 320;
  v13 = 96;
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v6 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    *(_DWORD *)(v5 + 8) = v4[2];
    result = v4[3];
    *(_DWORD *)(v5 + 12) = result;
  }
  else
  {
    v1 = &v14 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    *(_DWORD *)(v2 + 8) = v1[2];
    result = v1[3];
    *(_DWORD *)(v2 + 12) = result;
  }
  return result;
}

//----- (0044DE20) --------------------------------------------------------
int __cdecl NPC193(int a1)
{
  int result; // eax@3

  if ( !*(_DWORD *)(a1 + 116) )
  {
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 12) = *(_DWORD *)(a1 + 12);
    *(_DWORD *)(a1 + 8) += 12288;
  }
  result = a1 + 84;
  *(_DWORD *)result = 256;
  *(_DWORD *)(result + 4) = 96;
  *(_DWORD *)(result + 8) = 320;
  *(_DWORD *)(result + 12) = 112;
  return result;
}

//----- (0044DEA0) --------------------------------------------------------
signed int __cdecl NPC194(int a1)
{
  int v1; // edx@3
  signed int result; // eax@3

  if ( !*(_DWORD *)(a1 + 116) )
  {
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 12) += 2048;
  }
  v1 = a1 + 84;
  *(_DWORD *)v1 = 192;
  *(_DWORD *)(v1 + 4) = 120;
  result = 224;
  *(_DWORD *)(v1 + 8) = 224;
  *(_DWORD *)(v1 + 12) = 128;
  return result;
}

//----- (0044DF10) --------------------------------------------------------
int __cdecl NPC195(int a1)
{
  int result; // eax@1

  result = a1 + 84;
  *(_DWORD *)result = 112;
  *(_DWORD *)(result + 4) = 64;
  *(_DWORD *)(result + 8) = 128;
  *(_DWORD *)(result + 12) = 80;
  return result;
}

//----- (0044DF60) --------------------------------------------------------
signed int __cdecl NPC196(int a1)
{
  int v1; // edx@4
  signed int result; // eax@4
  int v3; // edx@5

  *(_DWORD *)(a1 + 8) -= 3072;
  if ( *(_DWORD *)(a1 + 8) <= 155648 )
    *(_DWORD *)(a1 + 8) += 180224;
  if ( *(_DWORD *)(a1 + 76) )
  {
    v3 = a1 + 84;
    *(_DWORD *)v3 = 112;
    *(_DWORD *)(v3 + 4) = 80;
    result = 144;
    *(_DWORD *)(v3 + 8) = 144;
    *(_DWORD *)(v3 + 12) = 96;
  }
  else
  {
    v1 = a1 + 84;
    *(_DWORD *)v1 = 112;
    *(_DWORD *)(v1 + 4) = 64;
    result = 144;
    *(_DWORD *)(v1 + 8) = 144;
    *(_DWORD *)(v1 + 12) = 80;
  }
  return result;
}

//----- (0044E020) --------------------------------------------------------
int __cdecl NPC197(void *a1)
{
  int *v1; // ecx@23
  char *v2; // edx@23
  int result; // eax@23
  int v4; // [sp+0h] [bp-44h]@1
  int v5; // [sp+4h] [bp-40h]@1
  int v6; // [sp+8h] [bp-3Ch]@1
  int v7; // [sp+Ch] [bp-38h]@1
  int v8; // [sp+10h] [bp-34h]@1
  int v9; // [sp+14h] [bp-30h]@1
  int v10; // [sp+18h] [bp-2Ch]@1
  int v11; // [sp+1Ch] [bp-28h]@1
  int v12; // [sp+20h] [bp-24h]@1
  int v13; // [sp+24h] [bp-20h]@1
  int v14; // [sp+28h] [bp-1Ch]@1
  int v15; // [sp+2Ch] [bp-18h]@1
  int v16; // [sp+30h] [bp-14h]@1
  int v17; // [sp+34h] [bp-10h]@1
  int v18; // [sp+38h] [bp-Ch]@1
  int v19; // [sp+3Ch] [bp-8h]@1
  int v20; // [sp+40h] [bp-4h]@1

  v5 = 0;
  v6 = 0;
  v7 = 16;
  v8 = 16;
  v9 = 16;
  v10 = 0;
  v11 = 32;
  v12 = 16;
  v13 = 32;
  v14 = 0;
  v15 = 48;
  v16 = 16;
  v17 = 48;
  v18 = 0;
  v19 = 64;
  v20 = 16;
  v4 = *((_DWORD *)a1 + 29);
  if ( v4 )
  {
    if ( v4 != 10 )
    {
      if ( v4 == 20 )
      {
        *((_DWORD *)a1 + 41) = 3;
        if ( ++*((_DWORD *)a1 + 25) > 0 )
        {
          *((_DWORD *)a1 + 25) = 0;
          ++*((_DWORD *)a1 + 26);
        }
        if ( *((_DWORD *)a1 + 26) > 3 )
          *((_DWORD *)a1 + 26) = 2;
        if ( *((_DWORD *)a1 + 2) < 24576 )
        {
          *((_DWORD *)a1 + 15) = 0;
          sub_471B80(a1, 1);
        }
      }
      goto LABEL_19;
    }
  }
  else
  {
    *((_DWORD *)a1 + 29) = 10;
    *((_DWORD *)a1 + 25) = 0;
    *((_DWORD *)a1 + 5) = RNG_Range(-512, 512);
    *((_DWORD *)a1 + 4) = 2048;
  }
  if ( ++*((_DWORD *)a1 + 25) > 2 )
  {
    *((_DWORD *)a1 + 25) = 0;
    ++*((_DWORD *)a1 + 26);
  }
  if ( *((_DWORD *)a1 + 26) > 1 )
    *((_DWORD *)a1 + 26) = 0;
  if ( *((_DWORD *)a1 + 4) < 0 )
  {
    *((_DWORD *)a1 + 41) = 3;
    *((_DWORD *)a1 + 29) = 20;
  }
LABEL_19:
  if ( *((_DWORD *)a1 + 1) & 2 )
    *((_DWORD *)a1 + 5) = 512;
  if ( *((_DWORD *)a1 + 1) & 8 )
    *((_DWORD *)a1 + 5) = -512;
  *((_DWORD *)a1 + 4) -= 12;
  *((_DWORD *)a1 + 2) += *((_DWORD *)a1 + 4);
  *((_DWORD *)a1 + 3) += *((_DWORD *)a1 + 5);
  v1 = &v5 + 4 * *((_DWORD *)a1 + 26);
  v2 = (char *)a1 + 84;
  *(_DWORD *)v2 = *v1;
  *((_DWORD *)v2 + 1) = v1[1];
  result = v1[2];
  *((_DWORD *)v2 + 2) = result;
  *((_DWORD *)v2 + 3) = v1[3];
  return result;
}

//----- (0044E260) --------------------------------------------------------
int __cdecl NPC198(int a1)
{
  int *v1; // eax@12
  int v2; // ecx@12
  int result; // eax@14
  int v4; // [sp+0h] [bp-34h]@1
  int v5; // [sp+4h] [bp-30h]@1
  int v6; // [sp+8h] [bp-2Ch]@1
  int v7; // [sp+Ch] [bp-28h]@1
  int v8; // [sp+10h] [bp-24h]@1
  int v9; // [sp+14h] [bp-20h]@1
  int v10; // [sp+18h] [bp-1Ch]@1
  int v11; // [sp+1Ch] [bp-18h]@1
  int v12; // [sp+20h] [bp-14h]@1
  int v13; // [sp+24h] [bp-10h]@1
  int v14; // [sp+28h] [bp-Ch]@1
  int v15; // [sp+2Ch] [bp-8h]@1
  int v16; // [sp+30h] [bp-4h]@1

  v5 = 208;
  v6 = 48;
  v7 = 224;
  v8 = 72;
  v9 = 224;
  v10 = 48;
  v11 = 240;
  v12 = 72;
  v13 = 240;
  v14 = 48;
  v15 = 256;
  v16 = 72;
  v4 = *(_DWORD *)(a1 + 116);
  if ( v4 )
  {
    if ( v4 == 1 )
      *(_DWORD *)(a1 + 16) += 32;
  }
  else if ( ++*(_DWORD *)(a1 + 120) > 20 )
  {
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 16) = 0;
    *(_DWORD *)(a1 + 20) = 0;
    *(_DWORD *)(a1 + 108) = 0;
  }
  if ( ++*(_DWORD *)(a1 + 100) > 0 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    ++*(_DWORD *)(a1 + 104);
  }
  if ( *(_DWORD *)(a1 + 104) > 2 )
    *(_DWORD *)(a1 + 104) = 0;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  v1 = &v5 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  *(_DWORD *)(v2 + 8) = v1[2];
  *(_DWORD *)(v2 + 12) = v1[3];
  if ( ++*(_DWORD *)(a1 + 108) > 100 )
    *(_BYTE *)a1 = 0;
  result = a1;
  if ( *(_DWORD *)(a1 + 108) % 4 == 1 )
    result = Play_Sound_Effect(46, 1);
  return result;
}

//----- (0044E400) --------------------------------------------------------
int __cdecl NPC199(int a1)
{
  int *v1; // edx@12
  int result; // eax@12
  int v3; // [sp+8h] [bp-50h]@1
  int v4; // [sp+Ch] [bp-4Ch]@1
  int v5; // [sp+10h] [bp-48h]@1
  int v6; // [sp+14h] [bp-44h]@1
  int v7; // [sp+18h] [bp-40h]@1
  int v8; // [sp+1Ch] [bp-3Ch]@1
  int v9; // [sp+20h] [bp-38h]@1
  int v10; // [sp+24h] [bp-34h]@1
  int v11; // [sp+28h] [bp-30h]@1
  int v12; // [sp+2Ch] [bp-2Ch]@1
  int v13; // [sp+30h] [bp-28h]@1
  int v14; // [sp+34h] [bp-24h]@1
  int v15; // [sp+38h] [bp-20h]@1
  int v16; // [sp+3Ch] [bp-1Ch]@1
  int v17; // [sp+40h] [bp-18h]@1
  int v18; // [sp+44h] [bp-14h]@1
  int v19; // [sp+48h] [bp-10h]@1
  int v20; // [sp+4Ch] [bp-Ch]@1
  int v21; // [sp+50h] [bp-8h]@1
  int v22; // [sp+54h] [bp-4h]@1

  v3 = 72;
  v4 = 16;
  v5 = 74;
  v6 = 18;
  v7 = 74;
  v8 = 16;
  v9 = 76;
  v10 = 18;
  v11 = 76;
  v12 = 16;
  v13 = 78;
  v14 = 18;
  v15 = 78;
  v16 = 16;
  v17 = 80;
  v18 = 18;
  v19 = 80;
  v20 = 16;
  v21 = 82;
  v22 = 18;
  if ( !*(_DWORD *)(a1 + 116) )
  {
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 104) = RNG_Range(0, 2);
    switch ( *(_DWORD *)(a1 + 76) )
    {
      case 0:
        *(_DWORD *)(a1 + 16) = -1;
        break;
      case 1:
        *(_DWORD *)(a1 + 20) = -1;
        break;
      case 2:
        *(_DWORD *)(a1 + 16) = 1;
        break;
      case 3:
        *(_DWORD *)(a1 + 20) = 1;
        break;
      default:
        break;
    }
    *(_DWORD *)(a1 + 16) *= (RNG_Range(4, 8) << 9) / 2;
    *(_DWORD *)(a1 + 20) *= (RNG_Range(4, 8) << 9) / 2;
  }
  if ( ++*(_DWORD *)(a1 + 100) > 6 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    ++*(_DWORD *)(a1 + 104);
  }
  if ( *(_DWORD *)(a1 + 104) > 4 )
    *(_BYTE *)a1 = 0;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  v1 = &v3 + 4 * *(_DWORD *)(a1 + 104);
  result = a1 + 84;
  *(_DWORD *)result = *v1;
  *(_DWORD *)(result + 4) = v1[1];
  *(_DWORD *)(result + 8) = v1[2];
  *(_DWORD *)(result + 12) = v1[3];
  return result;
}

//----- (0044E5F0) --------------------------------------------------------
int __cdecl NPC200(int a1)
{
  int *v1; // ecx@43
  int v2; // edx@43
  int result; // eax@43
  int *v4; // ecx@44
  int v5; // edx@44
  int Y_Velocity; // [sp+4h] [bp-D4h]@33
  int v7; // [sp+8h] [bp-D0h]@1
  int v8; // [sp+Ch] [bp-CCh]@1
  int v9; // [sp+10h] [bp-C8h]@1
  int v10; // [sp+14h] [bp-C4h]@1
  int v11; // [sp+18h] [bp-C0h]@1
  int v12; // [sp+1Ch] [bp-BCh]@1
  int v13; // [sp+20h] [bp-B8h]@1
  int v14; // [sp+24h] [bp-B4h]@1
  int v15; // [sp+28h] [bp-B0h]@1
  int v16; // [sp+2Ch] [bp-ACh]@1
  int v17; // [sp+30h] [bp-A8h]@1
  int v18; // [sp+34h] [bp-A4h]@1
  int v19; // [sp+38h] [bp-A0h]@1
  int v20; // [sp+3Ch] [bp-9Ch]@1
  int v21; // [sp+40h] [bp-98h]@1
  int v22; // [sp+44h] [bp-94h]@1
  int v23; // [sp+48h] [bp-90h]@1
  int v24; // [sp+4Ch] [bp-8Ch]@1
  int v25; // [sp+50h] [bp-88h]@1
  int v26; // [sp+54h] [bp-84h]@1
  int v27; // [sp+58h] [bp-80h]@1
  int v28; // [sp+5Ch] [bp-7Ch]@1
  int v29; // [sp+60h] [bp-78h]@1
  int v30; // [sp+64h] [bp-74h]@1
  int X_Velocity; // [sp+6Ch] [bp-6Ch]@33
  int v32; // [sp+70h] [bp-68h]@1
  int v33; // [sp+74h] [bp-64h]@1
  int v34; // [sp+78h] [bp-60h]@1
  int v35; // [sp+7Ch] [bp-5Ch]@1
  int v36; // [sp+80h] [bp-58h]@1
  int v37; // [sp+84h] [bp-54h]@1
  int v38; // [sp+88h] [bp-50h]@1
  int v39; // [sp+8Ch] [bp-4Ch]@1
  int v40; // [sp+90h] [bp-48h]@1
  int v41; // [sp+94h] [bp-44h]@1
  int v42; // [sp+98h] [bp-40h]@1
  int v43; // [sp+9Ch] [bp-3Ch]@1
  int v44; // [sp+A0h] [bp-38h]@1
  int v45; // [sp+A4h] [bp-34h]@1
  int v46; // [sp+A8h] [bp-30h]@1
  int v47; // [sp+ACh] [bp-2Ch]@1
  int v48; // [sp+B0h] [bp-28h]@1
  int v49; // [sp+B4h] [bp-24h]@1
  int v50; // [sp+B8h] [bp-20h]@1
  int v51; // [sp+BCh] [bp-1Ch]@1
  int v52; // [sp+C0h] [bp-18h]@1
  int v53; // [sp+C4h] [bp-14h]@1
  int v54; // [sp+C8h] [bp-10h]@1
  int v55; // [sp+CCh] [bp-Ch]@1
  unsigned __int8 v56; // [sp+D7h] [bp-1h]@31

  v32 = 0;
  v33 = 0;
  v34 = 40;
  v35 = 40;
  v36 = 40;
  v37 = 0;
  v38 = 80;
  v39 = 40;
  v40 = 80;
  v41 = 0;
  v42 = 120;
  v43 = 40;
  v44 = 120;
  v45 = 0;
  v46 = 160;
  v47 = 40;
  v48 = 160;
  v49 = 0;
  v50 = 200;
  v51 = 40;
  v52 = 200;
  v53 = 0;
  v54 = 240;
  v55 = 40;
  v7 = 0;
  v8 = 40;
  v9 = 40;
  v10 = 80;
  v11 = 40;
  v12 = 40;
  v13 = 80;
  v14 = 80;
  v15 = 80;
  v16 = 40;
  v17 = 120;
  v18 = 80;
  v19 = 120;
  v20 = 40;
  v21 = 160;
  v22 = 80;
  v23 = 160;
  v24 = 40;
  v25 = 200;
  v26 = 80;
  v27 = 200;
  v28 = 40;
  v29 = 240;
  v30 = 80;
  if ( *(_DWORD *)(a1 + 116) < 100 && *(_DWORD *)(a1 + 64) < 950 )
  {
    Play_Sound_Effect(72, 1);
    sub_46F150(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), *(_DWORD *)(a1 + 148), 8);
    Spawn_Exp(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), *(_DWORD *)(a1 + 68));
    *(_DWORD *)(a1 + 116) = 100;
    *(_WORD *)(a1 + 80) &= 0xFFDFu;
    *(_DWORD *)(a1 + 164) = 0;
  }
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 10;
      *(_DWORD *)(a1 + 108) = 0;
      goto LABEL_6;
    case 0xA:
LABEL_6:
      if ( ++*(_DWORD *)(a1 + 100) > 30 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 1 )
        *(_DWORD *)(a1 + 104) = 0;
      if ( *(_DWORD *)(a1 + 108) )
        --*(_DWORD *)(a1 + 108);
      if ( !*(_DWORD *)(a1 + 108)
        && Quote_X_Position > *(_DWORD *)(a1 + 8) - 57344
        && Quote_X_Position < *(_DWORD *)(a1 + 8) + 57344 )
      {
        *(_DWORD *)(a1 + 116) = 20;
      }
      break;
    case 0x14:
      *(_DWORD *)(a1 + 116) = 21;
      *(_DWORD *)(a1 + 120) = 0;
      goto LABEL_18;
    case 0x15:
LABEL_18:
      if ( ++*(_DWORD *)(a1 + 120) / 2 % 2 )
        *(_DWORD *)(a1 + 104) = 2;
      else
        *(_DWORD *)(a1 + 104) = 3;
      if ( *(_DWORD *)(a1 + 120) > 30 )
        *(_DWORD *)(a1 + 116) = 30;
      if ( Quote_X_Position >= *(_DWORD *)(a1 + 8) )
        *(_DWORD *)(a1 + 76) = 2;
      else
        *(_DWORD *)(a1 + 76) = 0;
      break;
    case 0x1E:
      *(_DWORD *)(a1 + 116) = 31;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 104) = 4;
      *(_DWORD *)(a1 + 32) = Quote_X_Position;
      *(_DWORD *)(a1 + 36) = Quote_Y_Position;
      goto LABEL_28;
    case 0x1F:
LABEL_28:
      if ( ++*(_DWORD *)(a1 + 120) < 40 && *(_DWORD *)(a1 + 120) % 8 == 1 )
      {
        v56 = *(_DWORD *)(a1 + 76) ? Angle_Calculator(
                                       *(_DWORD *)(a1 + 8) + 7168 - *(_DWORD *)(a1 + 32),
                                       *(_DWORD *)(a1 + 12) - *(_DWORD *)(a1 + 36)) : Angle_Calculator(
                                                                                        *(_DWORD *)(a1 + 8)
                                                                                      - 7168
                                                                                      - *(_DWORD *)(a1 + 32),
                                                                                        *(_DWORD *)(a1 + 12)
                                                                                      - *(_DWORD *)(a1 + 36));
        v56 += RNG_Range(-6, 6);
        Y_Velocity = 3 * SIN_function(v56);
        X_Velocity = 3 * COS_function(v56);
        if ( *(_DWORD *)(a1 + 76) )
          NPC_Create(202, *(_DWORD *)(a1 + 8) + 7168, *(_DWORD *)(a1 + 12), X_Velocity, Y_Velocity, 0, 0, 256);
        else
          NPC_Create(202, *(_DWORD *)(a1 + 8) - 7168, *(_DWORD *)(a1 + 12), X_Velocity, Y_Velocity, 0, 0, 256);
        if ( !(*(_BYTE *)&Player_Flags & 2) )
          Play_Sound_Effect(33, 1);
      }
      if ( *(_DWORD *)(a1 + 120) > 60 )
      {
        *(_DWORD *)(a1 + 116) = 10;
        *(_DWORD *)(a1 + 108) = RNG_Range(100, 200);
        *(_DWORD *)(a1 + 100) = 0;
      }
      break;
    case 0x64:
      *(_DWORD *)(a1 + 104) = 5;
      break;
    default:
      break;
  }
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v7 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    result = v4[2];
    *(_DWORD *)(v5 + 8) = result;
    *(_DWORD *)(v5 + 12) = v4[3];
  }
  else
  {
    v1 = &v32 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    result = v1[2];
    *(_DWORD *)(v2 + 8) = result;
    *(_DWORD *)(v2 + 12) = v1[3];
  }
  return result;
}

//----- (0044EC40) --------------------------------------------------------
int __cdecl NPC201(int a1)
{
  int *v1; // eax@2
  int v2; // ecx@2
  int result; // eax@2
  int *v4; // eax@3
  int v5; // ecx@3
  int v6; // [sp+0h] [bp-20h]@1
  int v7; // [sp+4h] [bp-1Ch]@1
  int v8; // [sp+8h] [bp-18h]@1
  int v9; // [sp+Ch] [bp-14h]@1
  int v10; // [sp+10h] [bp-10h]@1
  int v11; // [sp+14h] [bp-Ch]@1
  int v12; // [sp+18h] [bp-8h]@1
  int v13; // [sp+1Ch] [bp-4h]@1

  v10 = 200;
  v11 = 0;
  v12 = 240;
  v13 = 40;
  v6 = 200;
  v7 = 40;
  v8 = 240;
  v9 = 80;
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v6 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    *(_DWORD *)(v5 + 8) = v4[2];
    result = v4[3];
    *(_DWORD *)(v5 + 12) = result;
  }
  else
  {
    v1 = &v10 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    *(_DWORD *)(v2 + 8) = v1[2];
    result = v1[3];
    *(_DWORD *)(v2 + 12) = result;
  }
  return result;
}

//----- (0044ECE0) --------------------------------------------------------
int __cdecl NPC202(int a1)
{
  int *v1; // eax@7
  int v2; // ecx@7
  int result; // eax@7
  int v4; // [sp+0h] [bp-30h]@3
  int v5; // [sp+4h] [bp-2Ch]@3
  int v6; // [sp+8h] [bp-28h]@3
  int v7; // [sp+Ch] [bp-24h]@3
  int v8; // [sp+10h] [bp-20h]@3
  int v9; // [sp+14h] [bp-1Ch]@3
  int v10; // [sp+18h] [bp-18h]@3
  int v11; // [sp+1Ch] [bp-14h]@3
  int v12; // [sp+20h] [bp-10h]@3
  int v13; // [sp+24h] [bp-Ch]@3
  int v14; // [sp+28h] [bp-8h]@3
  int v15; // [sp+2Ch] [bp-4h]@3

  if ( *(_DWORD *)(a1 + 4) & 0xFF )
  {
    *(_BYTE *)a1 = 0;
    Create_Animated_Effect(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 2, 0);
  }
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  v4 = 184;
  v5 = 216;
  v6 = 200;
  v7 = 240;
  v8 = 200;
  v9 = 216;
  v10 = 216;
  v11 = 240;
  v12 = 216;
  v13 = 216;
  v14 = 232;
  v15 = 240;
  if ( ++*(_DWORD *)(a1 + 100) > 1 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    ++*(_DWORD *)(a1 + 104);
  }
  if ( *(_DWORD *)(a1 + 104) > 2 )
    *(_DWORD *)(a1 + 104) = 0;
  v1 = &v4 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  *(_DWORD *)(v2 + 8) = v1[2];
  *(_DWORD *)(v2 + 12) = v1[3];
  result = a1;
  if ( ++*(_DWORD *)(a1 + 108) > 300 )
  {
    *(_BYTE *)a1 = 0;
    result = Create_Animated_Effect(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 2, 0);
  }
  return result;
}

//----- (0044EE40) --------------------------------------------------------
int __cdecl NPC203(int a1)
{
  int *v1; // edx@37
  int result; // eax@37
  int *v3; // edx@38
  int v4; // [sp+4h] [bp-60h]@1
  int v5; // [sp+8h] [bp-5Ch]@1
  int v6; // [sp+Ch] [bp-58h]@1
  int v7; // [sp+10h] [bp-54h]@1
  int v8; // [sp+14h] [bp-50h]@1
  int v9; // [sp+18h] [bp-4Ch]@1
  int v10; // [sp+1Ch] [bp-48h]@1
  int v11; // [sp+20h] [bp-44h]@1
  int v12; // [sp+24h] [bp-40h]@1
  int v13; // [sp+28h] [bp-3Ch]@1
  int v14; // [sp+2Ch] [bp-38h]@1
  int v15; // [sp+30h] [bp-34h]@1
  int v16; // [sp+34h] [bp-30h]@1
  int v17; // [sp+38h] [bp-2Ch]@1
  int v18; // [sp+3Ch] [bp-28h]@1
  int v19; // [sp+40h] [bp-24h]@1
  int v20; // [sp+44h] [bp-20h]@1
  int v21; // [sp+48h] [bp-1Ch]@1
  int v22; // [sp+4Ch] [bp-18h]@1
  int v23; // [sp+50h] [bp-14h]@1
  int v24; // [sp+54h] [bp-10h]@1
  int v25; // [sp+58h] [bp-Ch]@1
  int v26; // [sp+5Ch] [bp-8h]@1
  int v27; // [sp+60h] [bp-4h]@1

  v16 = 0;
  v17 = 80;
  v18 = 16;
  v19 = 96;
  v20 = 16;
  v21 = 80;
  v22 = 32;
  v23 = 96;
  v24 = 32;
  v25 = 80;
  v26 = 48;
  v27 = 96;
  v4 = 0;
  v5 = 96;
  v6 = 16;
  v7 = 112;
  v8 = 16;
  v9 = 96;
  v10 = 32;
  v11 = 112;
  v12 = 32;
  v13 = 96;
  v14 = 48;
  v15 = 112;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 12) += 1536;
      *(_DWORD *)(a1 + 116) = 1;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
        *(_DWORD *)(a1 + 76) = 2;
      else
        *(_DWORD *)(a1 + 76) = 0;
      if ( *(_DWORD *)(a1 + 120) < 8
        || *(_DWORD *)(a1 + 8) - 57344 >= Quote_X_Position
        || *(_DWORD *)(a1 + 8) + 57344 <= Quote_X_Position
        || *(_DWORD *)(a1 + 12) - 40960 >= Quote_Y_Position
        || *(_DWORD *)(a1 + 12) + 40960 <= Quote_Y_Position )
      {
        if ( *(_DWORD *)(a1 + 120) < 8 )
          ++*(_DWORD *)(a1 + 120);
        *(_DWORD *)(a1 + 104) = 0;
      }
      else
      {
        *(_DWORD *)(a1 + 104) = 1;
      }
      if ( *(_BYTE *)(a1 + 156) )
      {
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 104) = 0;
        *(_DWORD *)(a1 + 120) = 0;
      }
      if ( *(_DWORD *)(a1 + 120) >= 8
        && *(_DWORD *)(a1 + 8) - 24576 < Quote_X_Position
        && *(_DWORD *)(a1 + 8) + 24576 > Quote_X_Position
        && *(_DWORD *)(a1 + 12) - 40960 < Quote_Y_Position
        && *(_DWORD *)(a1 + 12) + 24576 > Quote_Y_Position )
      {
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 104) = 0;
        *(_DWORD *)(a1 + 120) = 0;
      }
      break;
    case 2:
      if ( ++*(_DWORD *)(a1 + 120) > 8 )
      {
        *(_DWORD *)(a1 + 116) = 3;
        *(_DWORD *)(a1 + 104) = 2;
        *(_DWORD *)(a1 + 20) = -1535;
        if ( !(*(_BYTE *)&Player_Flags & 2) )
          Play_Sound_Effect(30, 1);
        if ( *(_DWORD *)(a1 + 76) )
          *(_DWORD *)(a1 + 16) = 256;
        else
          *(_DWORD *)(a1 + 16) = -256;
      }
      break;
    case 3:
      if ( *(_DWORD *)(a1 + 4) & 8 )
      {
        *(_DWORD *)(a1 + 16) = 0;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 0;
        *(_DWORD *)(a1 + 116) = 1;
        if ( !(*(_BYTE *)&Player_Flags & 2) )
          Play_Sound_Effect(23, 1);
      }
      break;
    default:
      break;
  }
  *(_DWORD *)(a1 + 20) += 64;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 76) )
  {
    v3 = &v4 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v3;
    *(_DWORD *)(result + 4) = v3[1];
    *(_DWORD *)(result + 8) = v3[2];
    *(_DWORD *)(result + 12) = v3[3];
  }
  else
  {
    v1 = &v16 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v1;
    *(_DWORD *)(result + 4) = v1[1];
    *(_DWORD *)(result + 8) = v1[2];
    *(_DWORD *)(result + 12) = v1[3];
  }
  return result;
}

//----- (0044F1F0) --------------------------------------------------------
int __cdecl NPC204(int a1)
{
  int result; // eax@17
  int *v2; // edx@20
  int v3; // [sp+4h] [bp-20h]@1
  int v4; // [sp+8h] [bp-1Ch]@1
  int v5; // [sp+Ch] [bp-18h]@1
  int v6; // [sp+10h] [bp-14h]@1
  int v7; // [sp+14h] [bp-10h]@1
  int v8; // [sp+18h] [bp-Ch]@1
  int v9; // [sp+1Ch] [bp-8h]@1
  int v10; // [sp+20h] [bp-4h]@1

  v3 = 240;
  v4 = 80;
  v5 = 256;
  v6 = 96;
  v7 = 240;
  v8 = 144;
  v9 = 256;
  v10 = 160;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 32) = *(_DWORD *)(a1 + 8);
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( Quote_X_Position > *(_DWORD *)(a1 + 8) - 6144
        && Quote_X_Position < *(_DWORD *)(a1 + 8) + 6144
        && Quote_Y_Position > *(_DWORD *)(a1 + 12) )
      {
        *(_DWORD *)(a1 + 116) = 2;
      }
      goto LABEL_18;
    case 2:
      if ( ++*(_DWORD *)(a1 + 120) / 6 % 2 )
        *(_DWORD *)(a1 + 8) = *(_DWORD *)(a1 + 32) - 512;
      else
        *(_DWORD *)(a1 + 8) = *(_DWORD *)(a1 + 32);
      if ( *(_DWORD *)(a1 + 120) > 30 )
      {
        *(_DWORD *)(a1 + 116) = 3;
        *(_DWORD *)(a1 + 104) = 1;
      }
      goto LABEL_18;
    case 3:
      *(_DWORD *)(a1 + 20) += 32;
      if ( !(*(_DWORD *)(a1 + 4) & 0xFF) )
        goto LABEL_18;
      if ( !(*(_BYTE *)&Player_Flags & 2) )
        Play_Sound_Effect(12, 1);
      result = sub_46F150(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), *(_DWORD *)(a1 + 148), 4);
      *(_BYTE *)a1 = 0;
      break;
    default:
LABEL_18:
      if ( *(_DWORD *)(a1 + 20) > 3072 )
        *(_DWORD *)(a1 + 20) = 3072;
      *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
      v2 = &v3 + 4 * *(_DWORD *)(a1 + 104);
      result = a1 + 84;
      *(_DWORD *)result = *v2;
      *(_DWORD *)(result + 4) = v2[1];
      *(_DWORD *)(result + 8) = v2[2];
      *(_DWORD *)(result + 12) = v2[3];
      break;
  }
  return result;
}

//----- (0044F3E0) --------------------------------------------------------
int __cdecl NPC205(int a1)
{
  int result; // eax@19
  int *v2; // ecx@25
  int v3; // edx@25
  int v4; // [sp+4h] [bp-20h]@1
  int v5; // [sp+8h] [bp-1Ch]@1
  int v6; // [sp+Ch] [bp-18h]@1
  int v7; // [sp+10h] [bp-14h]@1
  int v8; // [sp+14h] [bp-10h]@1
  int v9; // [sp+18h] [bp-Ch]@1
  int v10; // [sp+1Ch] [bp-8h]@1
  int v11; // [sp+20h] [bp-4h]@1

  v4 = 112;
  v5 = 80;
  v6 = 128;
  v7 = 112;
  v8 = 128;
  v9 = 80;
  v10 = 144;
  v11 = 112;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 32) = *(_DWORD *)(a1 + 8);
      *(_DWORD *)(a1 + 12) += 2048;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( Quote_X_Position > *(_DWORD *)(a1 + 8) - 6144
        && Quote_X_Position < *(_DWORD *)(a1 + 8) + 6144
        && Quote_Y_Position > *(_DWORD *)(a1 + 12) )
      {
        *(_DWORD *)(a1 + 116) = 2;
      }
      break;
    case 2:
      if ( ++*(_DWORD *)(a1 + 120) / 6 % 2 )
        *(_DWORD *)(a1 + 8) = *(_DWORD *)(a1 + 32) - 512;
      else
        *(_DWORD *)(a1 + 8) = *(_DWORD *)(a1 + 32);
      if ( *(_DWORD *)(a1 + 120) > 30 )
      {
        *(_DWORD *)(a1 + 116) = 3;
        *(_DWORD *)(a1 + 104) = 1;
        *(_DWORD *)(a1 + 120) = 0;
      }
      break;
    case 3:
      *(_DWORD *)(a1 + 20) += 32;
      if ( Quote_Y_Position <= *(_DWORD *)(a1 + 12) )
      {
        *(_WORD *)(a1 + 80) |= 0x40u;
        *(_DWORD *)(a1 + 164) = 0;
      }
      else
      {
        *(_WORD *)(a1 + 80) &= 0xFFBFu;
        *(_DWORD *)(a1 + 164) = 127;
      }
      if ( ++*(_DWORD *)(a1 + 120) <= 8 || !(*(_DWORD *)(a1 + 4) & 0xFF) )
        break;
      *(_WORD *)(a1 + 80) |= 0x40u;
      *(_DWORD *)(a1 + 116) = 4;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 20) = 0;
      *(_DWORD *)(a1 + 164) = 0;
      Play_Sound_Effect(12, 1);
      sub_46F150(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), *(_DWORD *)(a1 + 148), 4);
      return Create_Bullet(24, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 0);
    case 4:
      if ( ++*(_DWORD *)(a1 + 120) > 4 )
      {
        *(_DWORD *)(a1 + 116) = 5;
        *(_WORD *)(a1 + 80) |= 0x20u;
      }
      break;
    default:
      break;
  }
  if ( *(_DWORD *)(a1 + 20) > 3072 )
    *(_DWORD *)(a1 + 20) = 3072;
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  v2 = &v4 + 4 * *(_DWORD *)(a1 + 104);
  v3 = a1 + 84;
  *(_DWORD *)v3 = *v2;
  *(_DWORD *)(v3 + 4) = v2[1];
  result = v2[2];
  *(_DWORD *)(v3 + 8) = result;
  *(_DWORD *)(v3 + 12) = v2[3];
  return result;
}

//----- (0044F6D0) --------------------------------------------------------
int __cdecl NPC206(int a1)
{
  int *v1; // ecx@40
  int v2; // edx@40
  int result; // eax@40
  signed int v4; // [sp+0h] [bp-38h]@11
  int v5; // [sp+8h] [bp-30h]@36
  int v6; // [sp+Ch] [bp-2Ch]@36
  int v7; // [sp+10h] [bp-28h]@36
  int v8; // [sp+14h] [bp-24h]@36
  int v9; // [sp+18h] [bp-20h]@36
  int v10; // [sp+1Ch] [bp-1Ch]@36
  int v11; // [sp+20h] [bp-18h]@36
  int v12; // [sp+24h] [bp-14h]@36
  int v13; // [sp+28h] [bp-10h]@36
  int v14; // [sp+2Ch] [bp-Ch]@36
  int v15; // [sp+30h] [bp-8h]@36
  int v16; // [sp+34h] [bp-4h]@36

  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 32) = *(_DWORD *)(a1 + 8);
      *(_DWORD *)(a1 + 36) = *(_DWORD *)(a1 + 12);
      *(_DWORD *)(a1 + 108) = 120;
      *(_DWORD *)(a1 + 120) = RNG_Range(0, 50);
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( ++*(_DWORD *)(a1 + 120) >= 50 )
      {
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 20) = 768;
      }
      break;
    case 2:
      if ( Quote_X_Position > *(_DWORD *)(a1 + 8) - 40960 && Quote_X_Position < *(_DWORD *)(a1 + 8) + 40960 )
      {
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 116) = 3;
      }
      if ( *(_BYTE *)(a1 + 156) )
      {
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 116) = 3;
      }
      break;
    case 3:
      v4 = *(_DWORD *)(a1 + 120);
      if ( v4 > 180 )
      {
        if ( v4 == 240 )
        {
          NPC_Create(207, *(_DWORD *)(a1 + 8) + 0x2000, *(_DWORD *)(a1 + 12) + 2048, 0, 0, 4, 0, 256);
        }
        else if ( v4 == 300 )
        {
          *(_DWORD *)(a1 + 132) = 0x10000;
          *(_DWORD *)(a1 + 124) = 0x10000;
          *(_DWORD *)(a1 + 128) = 51200;
          *(_DWORD *)(a1 + 136) = 51200;
          *(_DWORD *)(a1 + 164) = 30;
          Play_Sound_Effect(35, 1);
          sub_46F150(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 0x10000, 100);
          sub_40F310(20);
          *(_BYTE *)a1 |= 8u;
        }
      }
      else if ( v4 == 180 )
      {
        NPC_Create(207, *(_DWORD *)(a1 + 8) + 0x2000, *(_DWORD *)(a1 + 12) + 2048, 0, 0, 3, 0, 256);
      }
      else if ( v4 )
      {
        if ( v4 == 60 )
        {
          NPC_Create(207, *(_DWORD *)(a1 + 8) + 0x2000, *(_DWORD *)(a1 + 12) + 2048, 0, 0, 1, 0, 256);
        }
        else if ( v4 == 120 )
        {
          NPC_Create(207, *(_DWORD *)(a1 + 8) + 0x2000, *(_DWORD *)(a1 + 12) + 2048, 0, 0, 2, 0, 256);
        }
      }
      else
      {
        NPC_Create(207, *(_DWORD *)(a1 + 8) + 0x2000, *(_DWORD *)(a1 + 12) + 2048, 0, 0, 0, 0, 256);
      }
      ++*(_DWORD *)(a1 + 120);
      break;
    default:
      break;
  }
  if ( *(_DWORD *)(a1 + 116) > 1 )
  {
    if ( *(_DWORD *)(a1 + 36) < *(_DWORD *)(a1 + 12) )
      *(_DWORD *)(a1 + 20) -= 16;
    if ( *(_DWORD *)(a1 + 36) > *(_DWORD *)(a1 + 12) )
      *(_DWORD *)(a1 + 20) += 16;
    if ( *(_DWORD *)(a1 + 20) > 256 )
      *(_DWORD *)(a1 + 20) = 256;
    if ( *(_DWORD *)(a1 + 20) < -256 )
      *(_DWORD *)(a1 + 20) = -256;
  }
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  v5 = 80;
  v6 = 80;
  v7 = 120;
  v8 = 120;
  v9 = 120;
  v10 = 80;
  v11 = 160;
  v12 = 120;
  v13 = 160;
  v14 = 80;
  v15 = 200;
  v16 = 120;
  if ( ++*(_DWORD *)(a1 + 100) > 4 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    ++*(_DWORD *)(a1 + 104);
  }
  if ( *(_DWORD *)(a1 + 104) > 2 )
    *(_DWORD *)(a1 + 104) = 0;
  v1 = &v5 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  result = v1[2];
  *(_DWORD *)(v2 + 8) = result;
  *(_DWORD *)(v2 + 12) = v1[3];
  return result;
}

//----- (0044FB40) --------------------------------------------------------
int __cdecl NPC207(int a1)
{
  int result; // eax@9
  int *v2; // ecx@11
  int v3; // edx@11
  int v4; // [sp+0h] [bp-54h]@1
  int v5; // [sp+4h] [bp-50h]@1
  int v6; // [sp+8h] [bp-4Ch]@1
  int v7; // [sp+Ch] [bp-48h]@1
  int v8; // [sp+10h] [bp-44h]@1
  int v9; // [sp+14h] [bp-40h]@1
  int v10; // [sp+18h] [bp-3Ch]@1
  int v11; // [sp+1Ch] [bp-38h]@1
  int v12; // [sp+20h] [bp-34h]@1
  int v13; // [sp+24h] [bp-30h]@1
  int v14; // [sp+28h] [bp-2Ch]@1
  int v15; // [sp+2Ch] [bp-28h]@1
  int v16; // [sp+30h] [bp-24h]@1
  int v17; // [sp+34h] [bp-20h]@1
  int v18; // [sp+38h] [bp-1Ch]@1
  int v19; // [sp+3Ch] [bp-18h]@1
  int v20; // [sp+40h] [bp-14h]@1
  int v21; // [sp+44h] [bp-10h]@1
  int v22; // [sp+48h] [bp-Ch]@1
  int v23; // [sp+4Ch] [bp-8h]@1
  int v24; // [sp+50h] [bp-4h]@1

  v5 = 0;
  v6 = 144;
  v7 = 16;
  v8 = 160;
  v9 = 16;
  v10 = 144;
  v11 = 32;
  v12 = 160;
  v13 = 32;
  v14 = 144;
  v15 = 48;
  v16 = 160;
  v17 = 48;
  v18 = 144;
  v19 = 64;
  v20 = 160;
  v21 = 64;
  v22 = 144;
  v23 = 80;
  v24 = 160;
  v4 = *(_DWORD *)(a1 + 116);
  if ( !v4 )
  {
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 104) = *(_DWORD *)(a1 + 76);
    Play_Sound_Effect(43, 1);
LABEL_6:
    *(_DWORD *)(a1 + 8) += 512;
    if ( ++*(_DWORD *)(a1 + 120) > 8 )
    {
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 116) = 2;
    }
    goto LABEL_11;
  }
  if ( v4 == 1 )
    goto LABEL_6;
  if ( v4 == 2 )
  {
    ++*(_DWORD *)(a1 + 120);
    result = a1;
    if ( *(_DWORD *)(a1 + 120) > 30 )
    {
      *(_BYTE *)a1 = 0;
      return result;
    }
  }
LABEL_11:
  v2 = &v5 + 4 * *(_DWORD *)(a1 + 104);
  v3 = a1 + 84;
  *(_DWORD *)v3 = *v2;
  *(_DWORD *)(v3 + 4) = v2[1];
  result = v2[2];
  *(_DWORD *)(v3 + 8) = result;
  *(_DWORD *)(v3 + 12) = v2[3];
  return result;
}

//----- (0044FCB0) --------------------------------------------------------
int __cdecl NPC208(int a1)
{
  int result; // eax@7
  unsigned __int8 v2; // ST2F_1@42
  char v3; // ST2F_1@42
  int Y_Velocity; // ST24_4@42
  int X_Velocity; // ST28_4@42
  int *v6; // edx@54
  int *v7; // edx@55
  int v8; // [sp+0h] [bp-70h]@1
  int v9; // [sp+10h] [bp-60h]@1
  int v10; // [sp+14h] [bp-5Ch]@1
  int v11; // [sp+18h] [bp-58h]@1
  int v12; // [sp+1Ch] [bp-54h]@1
  int v13; // [sp+20h] [bp-50h]@1
  int v14; // [sp+24h] [bp-4Ch]@1
  int v15; // [sp+28h] [bp-48h]@1
  int v16; // [sp+2Ch] [bp-44h]@1
  int v17; // [sp+30h] [bp-40h]@1
  int v18; // [sp+34h] [bp-3Ch]@1
  int v19; // [sp+38h] [bp-38h]@1
  int v20; // [sp+3Ch] [bp-34h]@1
  int v21; // [sp+40h] [bp-30h]@1
  int v22; // [sp+44h] [bp-2Ch]@1
  int v23; // [sp+48h] [bp-28h]@1
  int v24; // [sp+4Ch] [bp-24h]@1
  int v25; // [sp+50h] [bp-20h]@1
  int v26; // [sp+54h] [bp-1Ch]@1
  int v27; // [sp+58h] [bp-18h]@1
  int v28; // [sp+5Ch] [bp-14h]@1
  int v29; // [sp+60h] [bp-10h]@1
  int v30; // [sp+64h] [bp-Ch]@1
  int v31; // [sp+68h] [bp-8h]@1
  int v32; // [sp+6Ch] [bp-4h]@1

  v21 = 248;
  v22 = 80;
  v23 = 272;
  v24 = 104;
  v25 = 272;
  v26 = 80;
  v27 = 296;
  v28 = 104;
  v29 = 296;
  v30 = 80;
  v31 = 320;
  v32 = 104;
  v9 = 248;
  v10 = 104;
  v11 = 272;
  v12 = 128;
  v13 = 272;
  v14 = 104;
  v15 = 296;
  v16 = 128;
  v17 = 296;
  v18 = 104;
  v19 = 320;
  v20 = 128;
  v8 = *(_DWORD *)(a1 + 116);
  if ( v8 )
  {
    if ( v8 != 1 )
      goto LABEL_58;
    if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
    {
      *(_DWORD *)(a1 + 76) = 2;
      *(_DWORD *)(a1 + 16) += 16;
    }
    else
    {
      *(_DWORD *)(a1 + 76) = 0;
      *(_DWORD *)(a1 + 16) -= 16;
    }
    if ( *(_DWORD *)(a1 + 4) & 1 )
      *(_DWORD *)(a1 + 16) = 512;
    if ( *(_DWORD *)(a1 + 4) & 4 )
      *(_DWORD *)(a1 + 16) = -512;
    if ( *(_DWORD *)(a1 + 12) >= *(_DWORD *)(a1 + 36) )
      *(_DWORD *)(a1 + 20) -= 8;
    else
      *(_DWORD *)(a1 + 20) += 8;
    if ( *(_DWORD *)(a1 + 16) > 767 )
      *(_DWORD *)(a1 + 16) = 767;
    if ( *(_DWORD *)(a1 + 16) < -767 )
      *(_DWORD *)(a1 + 16) = -767;
    if ( *(_DWORD *)(a1 + 20) > 512 )
      *(_DWORD *)(a1 + 20) = 512;
    if ( *(_DWORD *)(a1 + 20) < -512 )
      *(_DWORD *)(a1 + 20) = -512;
    if ( *(_BYTE *)(a1 + 156) )
    {
      *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16) / 2;
      *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20) / 2;
    }
    else
    {
      *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
      *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
    }
    if ( Quote_X_Position <= *(_DWORD *)(a1 + 8) + 204800 && Quote_X_Position >= *(_DWORD *)(a1 + 8) - 204800 )
    {
LABEL_58:
      if ( *(_DWORD *)(a1 + 116) )
      {
        if ( *(_DWORD *)(a1 + 120) < 150 )
          ++*(_DWORD *)(a1 + 120);
        if ( *(_DWORD *)(a1 + 120) == 150 )
        {
          if ( !(++*(_DWORD *)(a1 + 112) % 8)
            && *(_DWORD *)(a1 + 8) < Quote_X_Position + 81920
            && *(_DWORD *)(a1 + 8) > Quote_X_Position - 81920 )
          {
            v2 = Angle_Calculator(*(_DWORD *)(a1 + 8) - Quote_X_Position, *(_DWORD *)(a1 + 12) - Quote_Y_Position);
            v3 = RNG_Range(-6, 6) + v2;
            Y_Velocity = 3 * SIN_function(v3);
            X_Velocity = 3 * COS_function(v3);
            NPC_Create(209, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), X_Velocity, Y_Velocity, 0, 0, 256);
            Play_Sound_Effect(39, 1);
          }
          if ( *(_DWORD *)(a1 + 112) > 16 )
          {
            *(_DWORD *)(a1 + 120) = 0;
            *(_DWORD *)(a1 + 112) = 0;
          }
        }
      }
      if ( ++*(_DWORD *)(a1 + 100) > 1 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 1 )
        *(_DWORD *)(a1 + 104) = 0;
      if ( *(_DWORD *)(a1 + 120) > 120 && *(_DWORD *)(a1 + 120) / 2 % 2 == 1 && *(_DWORD *)(a1 + 104) == 1 )
        *(_DWORD *)(a1 + 104) = 2;
      if ( *(_DWORD *)(a1 + 76) )
      {
        v7 = &v9 + 4 * *(_DWORD *)(a1 + 104);
        result = a1 + 84;
        *(_DWORD *)result = *v7;
        *(_DWORD *)(result + 4) = v7[1];
        *(_DWORD *)(result + 8) = v7[2];
        *(_DWORD *)(result + 12) = v7[3];
      }
      else
      {
        v6 = &v21 + 4 * *(_DWORD *)(a1 + 104);
        result = a1 + 84;
        *(_DWORD *)result = *v6;
        *(_DWORD *)(result + 4) = v6[1];
        *(_DWORD *)(result + 8) = v6[2];
        *(_DWORD *)(result + 12) = v6[3];
      }
    }
    else
    {
      *(_DWORD *)(a1 + 116) = 0;
      *(_DWORD *)(a1 + 16) = 0;
      *(_DWORD *)(a1 + 76) = *(_DWORD *)(a1 + 108);
      *(_DWORD *)(a1 + 8) = *(_DWORD *)(a1 + 32);
      *(_DWORD *)(a1 + 92) = 0;
      result = a1;
      *(_DWORD *)(a1 + 164) = 0;
    }
  }
  else if ( Quote_X_Position >= *(_DWORD *)(a1 + 8) + 0x2000 || Quote_X_Position <= *(_DWORD *)(a1 + 8) - 0x2000 )
  {
    *(_DWORD *)(a1 + 92) = 0;
    *(_DWORD *)(a1 + 164) = 0;
    *(_DWORD *)(a1 + 16) = 0;
    *(_DWORD *)(a1 + 20) = 0;
    result = a1;
    *(_WORD *)(a1 + 80) &= 0xFFDFu;
  }
  else
  {
    *(_WORD *)(a1 + 80) |= 0x20u;
    *(_DWORD *)(a1 + 20) = -512;
    *(_DWORD *)(a1 + 32) = *(_DWORD *)(a1 + 8);
    *(_DWORD *)(a1 + 36) = *(_DWORD *)(a1 + 12);
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 120) = 0;
    *(_DWORD *)(a1 + 108) = *(_DWORD *)(a1 + 76);
    *(_DWORD *)(a1 + 112) = 0;
    *(_DWORD *)(a1 + 164) = 6;
    if ( *(_DWORD *)(a1 + 76) )
    {
      result = Quote_X_Position - 0x20000;
      *(_DWORD *)(a1 + 8) = Quote_X_Position - 0x20000;
      *(_DWORD *)(a1 + 16) = 767;
    }
    else
    {
      result = Quote_X_Position + 0x20000;
      *(_DWORD *)(a1 + 8) = Quote_X_Position + 0x20000;
      *(_DWORD *)(a1 + 16) = -767;
    }
  }
  return result;
}

//----- (00450280) --------------------------------------------------------
int __cdecl NPC209(int a1)
{
  int *v1; // eax@7
  int v2; // ecx@7
  int result; // eax@7
  int v4; // [sp+0h] [bp-40h]@3
  int v5; // [sp+4h] [bp-3Ch]@3
  int v6; // [sp+8h] [bp-38h]@3
  int v7; // [sp+Ch] [bp-34h]@3
  int v8; // [sp+10h] [bp-30h]@3
  int v9; // [sp+14h] [bp-2Ch]@3
  int v10; // [sp+18h] [bp-28h]@3
  int v11; // [sp+1Ch] [bp-24h]@3
  int v12; // [sp+20h] [bp-20h]@3
  int v13; // [sp+24h] [bp-1Ch]@3
  int v14; // [sp+28h] [bp-18h]@3
  int v15; // [sp+2Ch] [bp-14h]@3
  int v16; // [sp+30h] [bp-10h]@3
  int v17; // [sp+34h] [bp-Ch]@3
  int v18; // [sp+38h] [bp-8h]@3
  int v19; // [sp+3Ch] [bp-4h]@3

  if ( *(_DWORD *)(a1 + 4) & 0xFF )
  {
    *(_BYTE *)a1 = 0;
    Create_Animated_Effect(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 2, 0);
  }
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  v4 = 232;
  v5 = 96;
  v6 = 248;
  v7 = 112;
  v8 = 200;
  v9 = 112;
  v10 = 216;
  v11 = 128;
  v12 = 216;
  v13 = 112;
  v14 = 232;
  v15 = 128;
  v16 = 232;
  v17 = 112;
  v18 = 248;
  v19 = 128;
  if ( ++*(_DWORD *)(a1 + 100) > 2 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    ++*(_DWORD *)(a1 + 104);
  }
  if ( *(_DWORD *)(a1 + 104) > 3 )
    *(_DWORD *)(a1 + 104) = 0;
  v1 = &v4 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  *(_DWORD *)(v2 + 8) = v1[2];
  *(_DWORD *)(v2 + 12) = v1[3];
  result = a1;
  if ( ++*(_DWORD *)(a1 + 108) > 300 )
  {
    *(_BYTE *)a1 = 0;
    result = Create_Animated_Effect(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 2, 0);
  }
  return result;
}

//----- (00450400) --------------------------------------------------------
int __cdecl NPC210(int a1)
{
  int result; // eax@10
  int *v2; // eax@33
  int v3; // ecx@33
  int *v4; // eax@34
  int v5; // ecx@34
  int v6; // [sp+0h] [bp-44h]@1
  int v7; // [sp+4h] [bp-40h]@1
  int v8; // [sp+8h] [bp-3Ch]@1
  int v9; // [sp+Ch] [bp-38h]@1
  int v10; // [sp+10h] [bp-34h]@1
  int v11; // [sp+14h] [bp-30h]@1
  int v12; // [sp+18h] [bp-2Ch]@1
  int v13; // [sp+1Ch] [bp-28h]@1
  int v14; // [sp+20h] [bp-24h]@1
  int v15; // [sp+24h] [bp-20h]@1
  int v16; // [sp+28h] [bp-1Ch]@1
  int v17; // [sp+2Ch] [bp-18h]@1
  int v18; // [sp+30h] [bp-14h]@1
  int v19; // [sp+34h] [bp-10h]@1
  int v20; // [sp+38h] [bp-Ch]@1
  int v21; // [sp+3Ch] [bp-8h]@1
  int v22; // [sp+40h] [bp-4h]@1

  v15 = 0;
  v16 = 112;
  v17 = 16;
  v18 = 128;
  v19 = 16;
  v20 = 112;
  v21 = 32;
  v22 = 128;
  v7 = 32;
  v8 = 112;
  v9 = 48;
  v10 = 128;
  v11 = 48;
  v12 = 112;
  v13 = 64;
  v14 = 128;
  v6 = *(_DWORD *)(a1 + 116);
  if ( v6 )
  {
    if ( v6 == 1 )
    {
      if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
      {
        *(_DWORD *)(a1 + 76) = 2;
        *(_DWORD *)(a1 + 16) += 16;
      }
      else
      {
        *(_DWORD *)(a1 + 76) = 0;
        *(_DWORD *)(a1 + 16) -= 16;
      }
      if ( *(_DWORD *)(a1 + 16) > 767 )
        *(_DWORD *)(a1 + 16) = 767;
      if ( *(_DWORD *)(a1 + 16) < -767 )
        *(_DWORD *)(a1 + 16) = -767;
      if ( *(_DWORD *)(a1 + 12) >= *(_DWORD *)(a1 + 36) )
        *(_DWORD *)(a1 + 20) -= 8;
      else
        *(_DWORD *)(a1 + 20) += 8;
      if ( *(_DWORD *)(a1 + 20) > 512 )
        *(_DWORD *)(a1 + 20) = 512;
      if ( *(_DWORD *)(a1 + 20) < -512 )
        *(_DWORD *)(a1 + 20) = -512;
      if ( *(_BYTE *)(a1 + 156) )
      {
        *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16) / 2;
        *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20) / 2;
      }
      else
      {
        *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
        *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
      }
    }
  }
  else
  {
    if ( Quote_X_Position >= *(_DWORD *)(a1 + 8) + 0x2000 || Quote_X_Position <= *(_DWORD *)(a1 + 8) - 0x2000 )
    {
      *(_WORD *)(a1 + 80) &= 0xFFDFu;
      *(_DWORD *)(a1 + 92) = 0;
      *(_DWORD *)(a1 + 164) = 0;
      result = a1;
      *(_DWORD *)(a1 + 16) = 0;
      *(_DWORD *)(a1 + 20) = 0;
      return result;
    }
    *(_WORD *)(a1 + 80) |= 0x20u;
    *(_DWORD *)(a1 + 20) = -512;
    *(_DWORD *)(a1 + 36) = *(_DWORD *)(a1 + 12);
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 164) = 2;
    if ( *(_DWORD *)(a1 + 76) )
    {
      *(_DWORD *)(a1 + 8) = Quote_X_Position - 0x20000;
      *(_DWORD *)(a1 + 16) = 767;
    }
    else
    {
      *(_DWORD *)(a1 + 8) = Quote_X_Position + 0x20000;
      *(_DWORD *)(a1 + 16) = -767;
    }
  }
  if ( ++*(_DWORD *)(a1 + 100) > 1 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    ++*(_DWORD *)(a1 + 104);
  }
  if ( *(_DWORD *)(a1 + 104) > 1 )
    *(_DWORD *)(a1 + 104) = 0;
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v7 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    *(_DWORD *)(v5 + 8) = v4[2];
    result = v4[3];
    *(_DWORD *)(v5 + 12) = result;
  }
  else
  {
    v2 = &v15 + 4 * *(_DWORD *)(a1 + 104);
    v3 = a1 + 84;
    *(_DWORD *)v3 = *v2;
    *(_DWORD *)(v3 + 4) = v2[1];
    *(_DWORD *)(v3 + 8) = v2[2];
    result = v2[3];
    *(_DWORD *)(v3 + 12) = result;
  }
  return result;
}

//----- (00450760) --------------------------------------------------------
int __cdecl NPC211(int a1)
{
  int *v1; // edx@1
  int result; // eax@1
  int v3; // [sp+0h] [bp-40h]@1
  int v4; // [sp+4h] [bp-3Ch]@1
  int v5; // [sp+8h] [bp-38h]@1
  int v6; // [sp+Ch] [bp-34h]@1
  int v7; // [sp+10h] [bp-30h]@1
  int v8; // [sp+14h] [bp-2Ch]@1
  int v9; // [sp+18h] [bp-28h]@1
  int v10; // [sp+1Ch] [bp-24h]@1
  int v11; // [sp+20h] [bp-20h]@1
  int v12; // [sp+24h] [bp-1Ch]@1
  int v13; // [sp+28h] [bp-18h]@1
  int v14; // [sp+2Ch] [bp-14h]@1
  int v15; // [sp+30h] [bp-10h]@1
  int v16; // [sp+34h] [bp-Ch]@1
  int v17; // [sp+38h] [bp-8h]@1
  int v18; // [sp+3Ch] [bp-4h]@1

  v3 = 256;
  v4 = 200;
  v5 = 272;
  v6 = 216;
  v7 = 272;
  v8 = 200;
  v9 = 288;
  v10 = 216;
  v11 = 288;
  v12 = 200;
  v13 = 304;
  v14 = 216;
  v15 = 304;
  v16 = 200;
  v17 = 320;
  v18 = 216;
  v1 = &v3 + 4 * *(_DWORD *)(a1 + 48);
  result = a1 + 84;
  *(_DWORD *)result = *v1;
  *(_DWORD *)(result + 4) = v1[1];
  *(_DWORD *)(result + 8) = v1[2];
  *(_DWORD *)(result + 12) = v1[3];
  return result;
}

//----- (00450810) --------------------------------------------------------
int __cdecl NPC212(int a1)
{
  int *v1; // ecx@34
  int v2; // edx@34
  int result; // eax@34
  int v4; // [sp+4h] [bp-40h]@1
  int v5; // [sp+8h] [bp-3Ch]@1
  int v6; // [sp+Ch] [bp-38h]@1
  int v7; // [sp+10h] [bp-34h]@1
  int v8; // [sp+14h] [bp-30h]@1
  int v9; // [sp+18h] [bp-2Ch]@1
  int v10; // [sp+1Ch] [bp-28h]@1
  int v11; // [sp+20h] [bp-24h]@1
  int v12; // [sp+24h] [bp-20h]@1
  int v13; // [sp+28h] [bp-1Ch]@1
  int v14; // [sp+2Ch] [bp-18h]@1
  int v15; // [sp+30h] [bp-14h]@1
  int v16; // [sp+34h] [bp-10h]@1
  int v17; // [sp+38h] [bp-Ch]@1
  int v18; // [sp+3Ch] [bp-8h]@1
  int v19; // [sp+40h] [bp-4h]@1

  v4 = 160;
  v5 = 152;
  v6 = 200;
  v7 = 192;
  v8 = 200;
  v9 = 152;
  v10 = 240;
  v11 = 192;
  v12 = 240;
  v13 = 112;
  v14 = 280;
  v15 = 152;
  v16 = 280;
  v17 = 112;
  v18 = 320;
  v19 = 152;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 12) -= 2048;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( ++*(_DWORD *)(a1 + 100) > 30 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 1 )
        *(_DWORD *)(a1 + 104) = 0;
      break;
    case 0xA:
      *(_DWORD *)(a1 + 116) = 11;
      *(_DWORD *)(a1 + 104) = 2;
      *(_DWORD *)(a1 + 100) = 0;
      *(_DWORD *)(a1 + 36) = *(_DWORD *)(a1 + 12) - 0x2000;
      *(_DWORD *)(a1 + 32) = *(_DWORD *)(a1 + 8) - 3072;
      *(_DWORD *)(a1 + 20) = 0;
      *(_WORD *)(a1 + 80) |= 8u;
      goto LABEL_9;
    case 0xB:
LABEL_9:
      if ( *(_DWORD *)(a1 + 8) >= *(_DWORD *)(a1 + 32) )
        *(_DWORD *)(a1 + 16) -= 8;
      else
        *(_DWORD *)(a1 + 16) += 8;
      if ( *(_DWORD *)(a1 + 12) >= *(_DWORD *)(a1 + 36) )
        *(_DWORD *)(a1 + 20) -= 8;
      else
        *(_DWORD *)(a1 + 20) += 8;
      *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
      *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
      if ( ++*(_DWORD *)(a1 + 100) > 5 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 3 )
        *(_DWORD *)(a1 + 104) = 2;
      break;
    case 0x14:
      *(_DWORD *)(a1 + 116) = 21;
      *(_WORD *)(a1 + 80) |= 8u;
      goto LABEL_21;
    case 0x15:
LABEL_21:
      if ( *(_DWORD *)(a1 + 12) >= *(_DWORD *)(a1 + 36) )
        *(_DWORD *)(a1 + 20) -= 16;
      else
        *(_DWORD *)(a1 + 20) += 16;
      *(_DWORD *)(a1 + 16) += 32;
      if ( *(_DWORD *)(a1 + 16) > 1536 )
        *(_DWORD *)(a1 + 16) = 1536;
      if ( *(_DWORD *)(a1 + 16) < -1536 )
        *(_DWORD *)(a1 + 16) = -1536;
      *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
      *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
      if ( ++*(_DWORD *)(a1 + 100) > 2 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 3 )
        *(_DWORD *)(a1 + 104) = 2;
      break;
    case 0x1E:
      *(_DWORD *)(a1 + 116) = 31;
      NPC_Create(297, 0, 0, 0, 0, 0, a1, 256);
      break;
    default:
      break;
  }
  v1 = &v4 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  result = v1[2];
  *(_DWORD *)(v2 + 8) = result;
  *(_DWORD *)(v2 + 12) = v1[3];
  if ( EquippedItems & 0x40 )
  {
    result = a1;
    if ( *(_DWORD *)(a1 + 104) > 1 )
    {
      *(_DWORD *)(a1 + 88) += 40;
      result = a1;
      *(_DWORD *)(a1 + 96) += 40;
    }
  }
  return result;
}
// 49E650: using guessed type int EquippedItems;

//----- (00450BF0) --------------------------------------------------------
int __cdecl NPC213(int a1)
{
  int v1; // ST10_4@29
  int v2; // eax@29
  int *v3; // edx@69
  int result; // eax@69
  int v5; // [sp+4h] [bp-A0h]@1
  int v6; // [sp+8h] [bp-9Ch]@1
  int v7; // [sp+Ch] [bp-98h]@1
  int v8; // [sp+10h] [bp-94h]@1
  int v9; // [sp+14h] [bp-90h]@1
  int v10; // [sp+18h] [bp-8Ch]@1
  int v11; // [sp+1Ch] [bp-88h]@1
  int v12; // [sp+20h] [bp-84h]@1
  int v13; // [sp+24h] [bp-80h]@1
  int v14; // [sp+28h] [bp-7Ch]@1
  int v15; // [sp+2Ch] [bp-78h]@1
  int v16; // [sp+30h] [bp-74h]@1
  int v17; // [sp+34h] [bp-70h]@1
  int v18; // [sp+38h] [bp-6Ch]@1
  int v19; // [sp+3Ch] [bp-68h]@1
  int v20; // [sp+40h] [bp-64h]@1
  int v21; // [sp+44h] [bp-60h]@1
  int v22; // [sp+48h] [bp-5Ch]@1
  int v23; // [sp+4Ch] [bp-58h]@1
  int v24; // [sp+50h] [bp-54h]@1
  int v25; // [sp+54h] [bp-50h]@1
  int v26; // [sp+58h] [bp-4Ch]@1
  int v27; // [sp+5Ch] [bp-48h]@1
  int v28; // [sp+60h] [bp-44h]@1
  int v29; // [sp+64h] [bp-40h]@1
  int v30; // [sp+68h] [bp-3Ch]@1
  int v31; // [sp+6Ch] [bp-38h]@1
  int v32; // [sp+70h] [bp-34h]@1
  int v33; // [sp+74h] [bp-30h]@1
  int v34; // [sp+78h] [bp-2Ch]@1
  int v35; // [sp+7Ch] [bp-28h]@1
  int v36; // [sp+80h] [bp-24h]@1
  int v37; // [sp+84h] [bp-20h]@1
  int v38; // [sp+88h] [bp-1Ch]@1
  int v39; // [sp+8Ch] [bp-18h]@1
  int v40; // [sp+90h] [bp-14h]@1
  int v41; // [sp+94h] [bp-10h]@1
  int v42; // [sp+98h] [bp-Ch]@1
  int v43; // [sp+9Ch] [bp-8h]@1
  int v44; // [sp+A0h] [bp-4h]@1

  v5 = 0;
  v6 = 0;
  v7 = 0;
  v8 = 0;
  v9 = 0;
  v10 = 0;
  v11 = 48;
  v12 = 48;
  v13 = 48;
  v14 = 0;
  v15 = 96;
  v16 = 48;
  v17 = 96;
  v18 = 0;
  v19 = 144;
  v20 = 48;
  v21 = 144;
  v22 = 0;
  v23 = 192;
  v24 = 48;
  v25 = 192;
  v26 = 0;
  v27 = 240;
  v28 = 48;
  v29 = 240;
  v30 = 0;
  v31 = 288;
  v32 = 48;
  v33 = 0;
  v34 = 48;
  v35 = 48;
  v36 = 96;
  v37 = 48;
  v38 = 48;
  v39 = 96;
  v40 = 96;
  v41 = 96;
  v42 = 48;
  v43 = 144;
  v44 = 96;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 32) = *(_DWORD *)(a1 + 8);
      *(_DWORD *)(a1 + 36) = *(_DWORD *)(a1 + 12);
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( Quote_Y_Position > *(_DWORD *)(a1 + 12) - 4096 && Quote_Y_Position < *(_DWORD *)(a1 + 12) + 4096 )
      {
        if ( *(_DWORD *)(a1 + 76) )
          *(_DWORD *)(a1 + 12) += 122880;
        else
          *(_DWORD *)(a1 + 12) -= 122880;
        *(_DWORD *)(a1 + 116) = 10;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 1;
        *(_DWORD *)(a1 + 20) = 0;
        *(_WORD *)(a1 + 80) |= 0x20u;
      }
      break;
    case 0xA:
      if ( ++*(_DWORD *)(a1 + 100) > 2 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 3 )
        *(_DWORD *)(a1 + 104) = 1;
      if ( ++*(_DWORD *)(a1 + 120) > 200 )
      {
        *(_DWORD *)(a1 + 116) = 20;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 4;
      }
      break;
    case 0x14:
      if ( ++*(_DWORD *)(a1 + 100) > 2 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 6 )
        *(_DWORD *)(a1 + 104) = 4;
      if ( ++*(_DWORD *)(a1 + 120) > 50 )
      {
        *(_DWORD *)(a1 + 116) = 30;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 7;
      }
      break;
    case 0x1E:
      if ( ++*(_DWORD *)(a1 + 100) > 2 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 9 )
        *(_DWORD *)(a1 + 104) = 7;
      if ( ++*(_DWORD *)(a1 + 120) % 5 == 1 )
      {
        v1 = RNG_Range(-512, 512);
        v2 = RNG_Range(2, 12);
        NPC_Create(214, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), (v2 << 9) / 4, v1, 0, 0, 256);
        Play_Sound_Effect(21, 1);
      }
      if ( *(_DWORD *)(a1 + 120) > 50 )
      {
        *(_DWORD *)(a1 + 116) = 10;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 1;
      }
      break;
    case 0x28:
      if ( *(_DWORD *)(a1 + 12) >= *(_DWORD *)(a1 + 36) )
        *(_DWORD *)(a1 + 20) -= 64;
      else
        *(_DWORD *)(a1 + 20) += 64;
      if ( *(_DWORD *)(a1 + 20) < -1024 )
        *(_DWORD *)(a1 + 20) = -1024;
      if ( *(_DWORD *)(a1 + 20) > 1024 )
        *(_DWORD *)(a1 + 20) = 1024;
      if ( *(_BYTE *)(a1 + 156) )
        *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20) / 2;
      else
        *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
      if ( ++*(_DWORD *)(a1 + 100) > 2 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 6 )
        *(_DWORD *)(a1 + 104) = 4;
      if ( Quote_Y_Position < *(_DWORD *)(a1 + 36) + 122880 && Quote_Y_Position > *(_DWORD *)(a1 + 36) - 122880 )
      {
        *(_DWORD *)(a1 + 116) = 20;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 4;
      }
      break;
    default:
      break;
  }
  if ( *(_DWORD *)(a1 + 116) >= 10 && *(_DWORD *)(a1 + 116) <= 30 )
  {
    if ( *(_DWORD *)(a1 + 12) >= Quote_Y_Position )
      *(_DWORD *)(a1 + 20) -= 25;
    else
      *(_DWORD *)(a1 + 20) += 25;
    if ( *(_DWORD *)(a1 + 20) < -1024 )
      *(_DWORD *)(a1 + 20) = -1024;
    if ( *(_DWORD *)(a1 + 20) > 1024 )
      *(_DWORD *)(a1 + 20) = 1024;
    if ( *(_DWORD *)(a1 + 4) & 2 )
      *(_DWORD *)(a1 + 20) = 512;
    if ( *(_DWORD *)(a1 + 4) & 8 )
      *(_DWORD *)(a1 + 20) = -512;
    if ( *(_BYTE *)(a1 + 156) )
      *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20) / 2;
    else
      *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
    if ( Quote_Y_Position > *(_DWORD *)(a1 + 36) + 122880 || Quote_Y_Position < *(_DWORD *)(a1 + 36) - 122880 )
      *(_DWORD *)(a1 + 116) = 40;
  }
  v3 = &v5 + 4 * *(_DWORD *)(a1 + 104);
  result = a1 + 84;
  *(_DWORD *)result = *v3;
  *(_DWORD *)(result + 4) = v3[1];
  *(_DWORD *)(result + 8) = v3[2];
  *(_DWORD *)(result + 12) = v3[3];
  return result;
}

//----- (004512A0) --------------------------------------------------------
int __cdecl NPC214(int a1)
{
  int *v1; // eax@13
  int v2; // ecx@13
  int result; // eax@13
  int v4; // [sp+0h] [bp-34h]@1
  int v5; // [sp+4h] [bp-30h]@1
  int v6; // [sp+8h] [bp-2Ch]@1
  int v7; // [sp+Ch] [bp-28h]@1
  int v8; // [sp+10h] [bp-24h]@1
  int v9; // [sp+14h] [bp-20h]@1
  int v10; // [sp+18h] [bp-1Ch]@1
  int v11; // [sp+1Ch] [bp-18h]@1
  int v12; // [sp+20h] [bp-14h]@1
  int v13; // [sp+24h] [bp-10h]@1
  int v14; // [sp+28h] [bp-Ch]@1
  int v15; // [sp+2Ch] [bp-8h]@1
  int v16; // [sp+30h] [bp-4h]@1

  v5 = 144;
  v6 = 48;
  v7 = 176;
  v8 = 64;
  v9 = 176;
  v10 = 48;
  v11 = 208;
  v12 = 64;
  v13 = 208;
  v14 = 48;
  v15 = 240;
  v16 = 64;
  v4 = *(_DWORD *)(a1 + 116);
  if ( v4 )
  {
    if ( v4 != 1 )
      goto LABEL_13;
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 1;
    *(_WORD *)(a1 + 80) |= 8u;
  }
  if ( ++*(_DWORD *)(a1 + 100) > 2 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    ++*(_DWORD *)(a1 + 104);
  }
  if ( *(_DWORD *)(a1 + 104) > 2 )
    *(_DWORD *)(a1 + 104) = 0;
  *(_DWORD *)(a1 + 16) -= 25;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 16) < 0 )
    *(_WORD *)(a1 + 80) &= 0xFFF7u;
  if ( *(_DWORD *)(a1 + 4) & 0xFF )
  {
    sub_46F150(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), *(_DWORD *)(a1 + 148), 4);
    Play_Sound_Effect(28, 1);
    *(_BYTE *)a1 = 0;
  }
LABEL_13:
  v1 = &v5 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  *(_DWORD *)(v2 + 8) = v1[2];
  result = v1[3];
  *(_DWORD *)(v2 + 12) = result;
  return result;
}

//----- (00451430) --------------------------------------------------------
int __cdecl NPC215(int a1)
{
  int *v1; // eax@28
  int v2; // ecx@28
  int result; // eax@28
  int v4; // [sp+4h] [bp-50h]@28
  int v5; // [sp+8h] [bp-4Ch]@28
  int v6; // [sp+Ch] [bp-48h]@28
  int v7; // [sp+10h] [bp-44h]@28
  int v8; // [sp+14h] [bp-40h]@28
  int v9; // [sp+18h] [bp-3Ch]@28
  int v10; // [sp+1Ch] [bp-38h]@28
  int v11; // [sp+20h] [bp-34h]@28
  int v12; // [sp+24h] [bp-30h]@28
  int v13; // [sp+28h] [bp-2Ch]@28
  int v14; // [sp+2Ch] [bp-28h]@28
  int v15; // [sp+30h] [bp-24h]@28
  int v16; // [sp+34h] [bp-20h]@28
  int v17; // [sp+38h] [bp-1Ch]@28
  int v18; // [sp+3Ch] [bp-18h]@28
  int v19; // [sp+40h] [bp-14h]@28
  int v20; // [sp+44h] [bp-10h]@28
  int v21; // [sp+48h] [bp-Ch]@28
  int v22; // [sp+4Ch] [bp-8h]@28
  int v23; // [sp+50h] [bp-4h]@28

  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 36) = *(_DWORD *)(a1 + 12);
      *(_WORD *)(a1 + 80) &= 0xFFDFu;
      *(_WORD *)(a1 + 80) &= 0xFFFBu;
      *(_WORD *)(a1 + 80) &= 0xFFFEu;
      *(_WORD *)(a1 + 80) &= 0xFFF7u;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( Quote_X_Position > *(_DWORD *)(a1 + 8) - 6144
        && Quote_X_Position < *(_DWORD *)(a1 + 8) + 6144
        && Quote_Y_Position > *(_DWORD *)(a1 + 12)
        && Quote_Y_Position < *(_DWORD *)(a1 + 12) + 4096 )
      {
        *(_DWORD *)(a1 + 116) = 15;
        *(_DWORD *)(a1 + 120) = 0;
      }
      break;
    case 0xF:
      if ( ++*(_DWORD *)(a1 + 120) > 10 )
      {
        Play_Sound_Effect(102, 1);
        *(_DWORD *)(a1 + 116) = 20;
      }
      break;
    case 0x14:
      if ( ++*(_DWORD *)(a1 + 100) > 3 )
      {
        ++*(_DWORD *)(a1 + 104);
        *(_DWORD *)(a1 + 100) = 0;
      }
      if ( *(_DWORD *)(a1 + 104) == 3 )
        *(_DWORD *)(a1 + 164) = 15;
      if ( *(_DWORD *)(a1 + 104) == 4 )
      {
        *(_WORD *)(a1 + 80) |= 0x20u;
        *(_DWORD *)(a1 + 116) = 30;
        *(_DWORD *)(a1 + 120) = 0;
      }
      break;
    case 0x1E:
      *(_WORD *)(a1 + 80) |= 1u;
      *(_DWORD *)(a1 + 164) = 0;
      ++*(_DWORD *)(a1 + 120);
      if ( *(_BYTE *)(a1 + 156) )
      {
        *(_DWORD *)(a1 + 116) = 40;
        *(_DWORD *)(a1 + 120) = 0;
      }
      break;
    case 0x28:
      *(_WORD *)(a1 + 80) |= 8u;
      *(_DWORD *)(a1 + 12) += 512;
      if ( ++*(_DWORD *)(a1 + 120) == 32 )
      {
        *(_WORD *)(a1 + 80) &= 0xFFFEu;
        *(_WORD *)(a1 + 80) &= 0xFFDFu;
        *(_DWORD *)(a1 + 116) = 50;
        *(_DWORD *)(a1 + 120) = 0;
      }
      break;
    case 0x32:
      if ( *(_DWORD *)(a1 + 120) >= 100 )
      {
        *(_DWORD *)(a1 + 12) = *(_DWORD *)(a1 + 36);
        *(_DWORD *)(a1 + 104) = 0;
        *(_DWORD *)(a1 + 116) = 0;
      }
      else
      {
        ++*(_DWORD *)(a1 + 120);
      }
      break;
    default:
      break;
  }
  v4 = 0;
  v5 = 0;
  v6 = 0;
  v7 = 0;
  v8 = 0;
  v9 = 96;
  v10 = 48;
  v11 = 128;
  v12 = 48;
  v13 = 96;
  v14 = 96;
  v15 = 128;
  v16 = 96;
  v17 = 96;
  v18 = 144;
  v19 = 128;
  v20 = 144;
  v21 = 96;
  v22 = 192;
  v23 = 128;
  v1 = &v4 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  *(_DWORD *)(v2 + 8) = v1[2];
  result = v1[3];
  *(_DWORD *)(v2 + 12) = result;
  return result;
}

//----- (004517F0) --------------------------------------------------------
int __cdecl NPC216(int a1)
{
  int result; // eax@1

  result = a1 + 84;
  *(_DWORD *)result = 256;
  *(_DWORD *)(result + 4) = 192;
  *(_DWORD *)(result + 8) = 272;
  *(_DWORD *)(result + 12) = 216;
  return result;
}

//----- (00451840) --------------------------------------------------------
int __cdecl NPC217(int a1)
{
  int *v1; // edx@32
  int result; // eax@32
  int v3; // [sp+4h] [bp-80h]@1
  int v4; // [sp+8h] [bp-7Ch]@1
  int v5; // [sp+Ch] [bp-78h]@1
  int v6; // [sp+10h] [bp-74h]@1
  int v7; // [sp+14h] [bp-70h]@1
  int v8; // [sp+18h] [bp-6Ch]@1
  int v9; // [sp+1Ch] [bp-68h]@1
  int v10; // [sp+20h] [bp-64h]@1
  int v11; // [sp+24h] [bp-60h]@1
  int v12; // [sp+28h] [bp-5Ch]@1
  int v13; // [sp+2Ch] [bp-58h]@1
  int v14; // [sp+30h] [bp-54h]@1
  int v15; // [sp+34h] [bp-50h]@1
  int v16; // [sp+38h] [bp-4Ch]@1
  int v17; // [sp+3Ch] [bp-48h]@1
  int v18; // [sp+40h] [bp-44h]@1
  int v19; // [sp+44h] [bp-40h]@1
  int v20; // [sp+48h] [bp-3Ch]@1
  int v21; // [sp+4Ch] [bp-38h]@1
  int v22; // [sp+50h] [bp-34h]@1
  int v23; // [sp+54h] [bp-30h]@1
  int v24; // [sp+58h] [bp-2Ch]@1
  int v25; // [sp+5Ch] [bp-28h]@1
  int v26; // [sp+60h] [bp-24h]@1
  int v27; // [sp+64h] [bp-20h]@1
  int v28; // [sp+68h] [bp-1Ch]@1
  int v29; // [sp+6Ch] [bp-18h]@1
  int v30; // [sp+70h] [bp-14h]@1
  int v31; // [sp+74h] [bp-10h]@1
  int v32; // [sp+78h] [bp-Ch]@1
  int v33; // [sp+7Ch] [bp-8h]@1
  int v34; // [sp+80h] [bp-4h]@1

  v3 = 144;
  v4 = 64;
  v5 = 160;
  v6 = 80;
  v7 = 160;
  v8 = 64;
  v9 = 176;
  v10 = 80;
  v11 = 176;
  v12 = 64;
  v13 = 192;
  v14 = 80;
  v15 = 192;
  v16 = 64;
  v17 = 208;
  v18 = 80;
  v19 = 144;
  v20 = 80;
  v21 = 160;
  v22 = 96;
  v23 = 160;
  v24 = 80;
  v25 = 176;
  v26 = 96;
  v27 = 144;
  v28 = 80;
  v29 = 160;
  v30 = 96;
  v31 = 176;
  v32 = 80;
  v33 = 192;
  v34 = 96;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 100) = 0;
      *(_DWORD *)(a1 + 16) = 0;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( RNG_Range(0, 120) == 10 )
      {
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 1;
      }
      break;
    case 2:
      if ( ++*(_DWORD *)(a1 + 120) > 8 )
      {
        *(_DWORD *)(a1 + 116) = 1;
        *(_DWORD *)(a1 + 104) = 0;
      }
      break;
    case 0xA:
      *(_DWORD *)(a1 + 104) = 2;
      *(_DWORD *)(a1 + 16) = 0;
      break;
    case 0x14:
      *(_DWORD *)(a1 + 116) = 21;
      *(_DWORD *)(a1 + 104) = 2;
      *(_DWORD *)(a1 + 16) += 512;
      *(_DWORD *)(a1 + 20) -= 1024;
      break;
    case 0x15:
      if ( *(_DWORD *)(a1 + 4) & 8 )
      {
        *(_DWORD *)(a1 + 104) = 3;
        *(_DWORD *)(a1 + 116) = 30;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 16) = 0;
        *(_DWORD *)(a1 + 32) = *(_DWORD *)(a1 + 8);
      }
      break;
    case 0x1E:
      *(_DWORD *)(a1 + 104) = 3;
      if ( ++*(_DWORD *)(a1 + 120) / 2 % 2 )
        *(_DWORD *)(a1 + 8) = *(_DWORD *)(a1 + 32) + 512;
      else
        *(_DWORD *)(a1 + 8) = *(_DWORD *)(a1 + 32);
      break;
    case 0x28:
      *(_DWORD *)(a1 + 116) = 41;
      *(_DWORD *)(a1 + 20) = -512;
      *(_DWORD *)(a1 + 104) = 2;
      goto LABEL_19;
    case 0x29:
LABEL_19:
      if ( *(_DWORD *)(a1 + 4) & 8 )
      {
        *(_DWORD *)(a1 + 116) = 42;
        *(_DWORD *)(a1 + 104) = 4;
      }
      break;
    case 0x2A:
      *(_DWORD *)(a1 + 16) = 0;
      *(_DWORD *)(a1 + 104) = 4;
      break;
    case 0x32:
      *(_DWORD *)(a1 + 116) = 51;
      *(_DWORD *)(a1 + 120) = 0;
      goto LABEL_24;
    case 0x33:
LABEL_24:
      if ( ++*(_DWORD *)(a1 + 120) > 32 )
        *(_DWORD *)(a1 + 116) = 42;
      *(_DWORD *)(a1 + 16) = 512;
      if ( ++*(_DWORD *)(a1 + 100) > 3 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 7 )
        *(_DWORD *)(a1 + 104) = 4;
      break;
    default:
      break;
  }
  *(_DWORD *)(a1 + 20) += 64;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  v1 = &v3 + 4 * *(_DWORD *)(a1 + 104);
  result = a1 + 84;
  *(_DWORD *)result = *v1;
  *(_DWORD *)(result + 4) = v1[1];
  *(_DWORD *)(result + 8) = v1[2];
  *(_DWORD *)(result + 12) = v1[3];
  return result;
}

//----- (00451CA0) --------------------------------------------------------
int __cdecl NPC218(int a1)
{
  int *v1; // ecx@7
  int v2; // edx@7
  int result; // eax@7
  int v4; // [sp+0h] [bp-20h]@1
  int v5; // [sp+4h] [bp-1Ch]@1
  int v6; // [sp+8h] [bp-18h]@1
  int v7; // [sp+Ch] [bp-14h]@1
  int v8; // [sp+10h] [bp-10h]@1
  int v9; // [sp+14h] [bp-Ch]@1
  int v10; // [sp+18h] [bp-8h]@1
  int v11; // [sp+1Ch] [bp-4h]@1

  v4 = 256;
  v5 = 120;
  v6 = 288;
  v7 = 152;
  v8 = 288;
  v9 = 120;
  v10 = 320;
  v11 = 152;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( ++*(_DWORD *)(a1 + 120) > 200 )
    *(_BYTE *)a1 = 0;
  if ( ++*(_DWORD *)(a1 + 100) > 2 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    ++*(_DWORD *)(a1 + 104);
  }
  if ( *(_DWORD *)(a1 + 104) > 1 )
    *(_DWORD *)(a1 + 104) = 0;
  v1 = &v4 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  result = v1[2];
  *(_DWORD *)(v2 + 8) = result;
  *(_DWORD *)(v2 + 12) = v1[3];
  return result;
}

//----- (00451DA0) --------------------------------------------------------
int __cdecl NPC219(int a1)
{
  int v1; // ST08_4@3
  int v2; // eax@3
  int v3; // ST08_4@5
  int v4; // eax@5
  int v5; // edx@6
  int result; // eax@6

  if ( *(_DWORD *)(a1 + 76) )
  {
    v3 = *(_DWORD *)(a1 + 12) + (RNG_Range(-128, 128) << 9);
    v4 = RNG_Range(-160, 160);
    NPC_Create(199, *(_DWORD *)(a1 + 8) + (v4 << 9), v3, 0, 0, 2, 0, 256);
  }
  else if ( RNG_Range(0, 40) == 1 )
  {
    v1 = *(_DWORD *)(a1 + 12);
    v2 = RNG_Range(-20, 20);
    NPC_Create(4, *(_DWORD *)(a1 + 8) + (v2 << 9), v1, 0, -512, 0, 0, 256);
  }
  v5 = a1 + 84;
  *(_DWORD *)v5 = 0;
  *(_DWORD *)(v5 + 4) = 0;
  result = 0;
  *(_DWORD *)(v5 + 8) = 0;
  *(_DWORD *)(v5 + 12) = 0;
  return result;
}

//----- (00451E90) --------------------------------------------------------
int __cdecl NPC220(int a1)
{
  int *v1; // edx@12
  int result; // eax@12
  int *v3; // edx@13
  int v4; // [sp+0h] [bp-44h]@1
  int v5; // [sp+4h] [bp-40h]@1
  int v6; // [sp+8h] [bp-3Ch]@1
  int v7; // [sp+Ch] [bp-38h]@1
  int v8; // [sp+10h] [bp-34h]@1
  int v9; // [sp+14h] [bp-30h]@1
  int v10; // [sp+18h] [bp-2Ch]@1
  int v11; // [sp+1Ch] [bp-28h]@1
  int v12; // [sp+20h] [bp-24h]@1
  int v13; // [sp+24h] [bp-20h]@1
  int v14; // [sp+28h] [bp-1Ch]@1
  int v15; // [sp+2Ch] [bp-18h]@1
  int v16; // [sp+30h] [bp-14h]@1
  int v17; // [sp+34h] [bp-10h]@1
  int v18; // [sp+38h] [bp-Ch]@1
  int v19; // [sp+3Ch] [bp-8h]@1
  int v20; // [sp+40h] [bp-4h]@1

  v13 = 0;
  v14 = 64;
  v15 = 16;
  v16 = 80;
  v17 = 16;
  v18 = 64;
  v19 = 32;
  v20 = 80;
  v5 = 0;
  v6 = 80;
  v7 = 16;
  v8 = 96;
  v9 = 16;
  v10 = 80;
  v11 = 32;
  v12 = 96;
  v4 = *(_DWORD *)(a1 + 116);
  if ( v4 )
  {
    if ( v4 != 1 )
    {
      if ( v4 == 2 && ++*(_DWORD *)(a1 + 120) > 8 )
      {
        *(_DWORD *)(a1 + 116) = 1;
        *(_DWORD *)(a1 + 104) = 0;
      }
      goto LABEL_11;
    }
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 104) = 0;
    *(_DWORD *)(a1 + 100) = 0;
  }
  if ( RNG_Range(0, 120) == 10 )
  {
    *(_DWORD *)(a1 + 116) = 2;
    *(_DWORD *)(a1 + 120) = 0;
    *(_DWORD *)(a1 + 104) = 1;
  }
LABEL_11:
  if ( *(_DWORD *)(a1 + 76) )
  {
    v3 = &v5 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v3;
    *(_DWORD *)(result + 4) = v3[1];
    *(_DWORD *)(result + 8) = v3[2];
    *(_DWORD *)(result + 12) = v3[3];
  }
  else
  {
    v1 = &v13 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v1;
    *(_DWORD *)(result + 4) = v1[1];
    *(_DWORD *)(result + 8) = v1[2];
    *(_DWORD *)(result + 12) = v1[3];
  }
  return result;
}

//----- (00452000) --------------------------------------------------------
int __cdecl NPC221(int a1)
{
  int *v1; // eax@32
  int v2; // ecx@32
  int result; // eax@32
  int *v4; // eax@33
  int v5; // ecx@33
  int v6; // [sp+4h] [bp-C0h]@1
  int v7; // [sp+8h] [bp-BCh]@1
  int v8; // [sp+Ch] [bp-B8h]@1
  int v9; // [sp+10h] [bp-B4h]@1
  int v10; // [sp+14h] [bp-B0h]@1
  int v11; // [sp+18h] [bp-ACh]@1
  int v12; // [sp+1Ch] [bp-A8h]@1
  int v13; // [sp+20h] [bp-A4h]@1
  int v14; // [sp+24h] [bp-A0h]@1
  int v15; // [sp+28h] [bp-9Ch]@1
  int v16; // [sp+2Ch] [bp-98h]@1
  int v17; // [sp+30h] [bp-94h]@1
  int v18; // [sp+34h] [bp-90h]@1
  int v19; // [sp+38h] [bp-8Ch]@1
  int v20; // [sp+3Ch] [bp-88h]@1
  int v21; // [sp+40h] [bp-84h]@1
  int v22; // [sp+44h] [bp-80h]@1
  int v23; // [sp+48h] [bp-7Ch]@1
  int v24; // [sp+4Ch] [bp-78h]@1
  int v25; // [sp+50h] [bp-74h]@1
  int v26; // [sp+54h] [bp-70h]@1
  int v27; // [sp+58h] [bp-6Ch]@1
  int v28; // [sp+5Ch] [bp-68h]@1
  int v29; // [sp+60h] [bp-64h]@1
  int v30; // [sp+64h] [bp-60h]@1
  int v31; // [sp+68h] [bp-5Ch]@1
  int v32; // [sp+6Ch] [bp-58h]@1
  int v33; // [sp+70h] [bp-54h]@1
  int v34; // [sp+74h] [bp-50h]@1
  int v35; // [sp+78h] [bp-4Ch]@1
  int v36; // [sp+7Ch] [bp-48h]@1
  int v37; // [sp+80h] [bp-44h]@1
  int v38; // [sp+84h] [bp-40h]@1
  int v39; // [sp+88h] [bp-3Ch]@1
  int v40; // [sp+8Ch] [bp-38h]@1
  int v41; // [sp+90h] [bp-34h]@1
  int v42; // [sp+94h] [bp-30h]@1
  int v43; // [sp+98h] [bp-2Ch]@1
  int v44; // [sp+9Ch] [bp-28h]@1
  int v45; // [sp+A0h] [bp-24h]@1
  int v46; // [sp+A4h] [bp-20h]@1
  int v47; // [sp+A8h] [bp-1Ch]@1
  int v48; // [sp+ACh] [bp-18h]@1
  int v49; // [sp+B0h] [bp-14h]@1
  int v50; // [sp+B4h] [bp-10h]@1
  int v51; // [sp+B8h] [bp-Ch]@1
  int v52; // [sp+BCh] [bp-8h]@1
  int v53; // [sp+C0h] [bp-4h]@1

  v30 = 0;
  v31 = 64;
  v32 = 16;
  v33 = 80;
  v34 = 16;
  v35 = 64;
  v36 = 32;
  v37 = 80;
  v38 = 32;
  v39 = 64;
  v40 = 48;
  v41 = 80;
  v42 = 0;
  v43 = 64;
  v44 = 16;
  v45 = 80;
  v46 = 48;
  v47 = 64;
  v48 = 64;
  v49 = 80;
  v50 = 0;
  v51 = 64;
  v52 = 16;
  v53 = 80;
  v6 = 0;
  v7 = 80;
  v8 = 16;
  v9 = 96;
  v10 = 16;
  v11 = 80;
  v12 = 32;
  v13 = 96;
  v14 = 32;
  v15 = 80;
  v16 = 48;
  v17 = 96;
  v18 = 0;
  v19 = 80;
  v20 = 16;
  v21 = 96;
  v22 = 48;
  v23 = 80;
  v24 = 64;
  v25 = 96;
  v26 = 0;
  v27 = 80;
  v28 = 16;
  v29 = 96;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 100) = 0;
      *(_DWORD *)(a1 + 16) = 0;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( RNG_Range(0, 60) == 1 )
      {
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 1;
      }
      if ( RNG_Range(0, 60) == 1 )
      {
        *(_DWORD *)(a1 + 116) = 10;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 1;
      }
      break;
    case 2:
      if ( ++*(_DWORD *)(a1 + 120) > 8 )
      {
        *(_DWORD *)(a1 + 116) = 1;
        *(_DWORD *)(a1 + 104) = 0;
      }
      break;
    case 0xA:
      *(_DWORD *)(a1 + 116) = 11;
      *(_DWORD *)(a1 + 120) = RNG_Range(0, 16);
      *(_DWORD *)(a1 + 104) = 2;
      *(_DWORD *)(a1 + 100) = 0;
      if ( RNG_Range(0, 9) % 2 )
        *(_DWORD *)(a1 + 76) = 0;
      else
        *(_DWORD *)(a1 + 76) = 2;
      goto LABEL_14;
    case 0xB:
LABEL_14:
      if ( *(_DWORD *)(a1 + 76) || !(*(_DWORD *)(a1 + 4) & 1) )
      {
        if ( *(_DWORD *)(a1 + 76) == 2 && *(_DWORD *)(a1 + 4) & 4 )
          *(_DWORD *)(a1 + 76) = 0;
      }
      else
      {
        *(_DWORD *)(a1 + 76) = 2;
      }
      if ( *(_DWORD *)(a1 + 76) )
        *(_DWORD *)(a1 + 16) = 512;
      else
        *(_DWORD *)(a1 + 16) = -512;
      if ( ++*(_DWORD *)(a1 + 100) > 4 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 5 )
        *(_DWORD *)(a1 + 104) = 2;
      if ( ++*(_DWORD *)(a1 + 120) > 32 )
        *(_DWORD *)(a1 + 116) = 0;
      break;
    default:
      break;
  }
  *(_DWORD *)(a1 + 20) += 32;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v6 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    *(_DWORD *)(v5 + 8) = v4[2];
    result = v4[3];
    *(_DWORD *)(v5 + 12) = result;
  }
  else
  {
    v1 = &v30 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    *(_DWORD *)(v2 + 8) = v1[2];
    result = v1[3];
    *(_DWORD *)(v2 + 12) = result;
  }
  return result;
}

//----- (00452470) --------------------------------------------------------
signed int __cdecl NPC222(int a1)
{
  int v1; // ecx@3
  signed int result; // eax@3

  if ( !*(_DWORD *)(a1 + 116) )
  {
    ++*(_DWORD *)(a1 + 116);
    *(_DWORD *)(a1 + 12) -= 4096;
  }
  v1 = a1 + 84;
  *(_DWORD *)v1 = 96;
  *(_DWORD *)(v1 + 4) = 168;
  *(_DWORD *)(v1 + 8) = 112;
  result = 200;
  *(_DWORD *)(v1 + 12) = 200;
  return result;
}

//----- (004524E0) --------------------------------------------------------
int __cdecl NPC223(int a1)
{
  int *v1; // ecx@17
  int v2; // edx@17
  int result; // eax@17
  int *v4; // ecx@18
  int v5; // edx@18
  int v6; // [sp+4h] [bp-60h]@1
  int v7; // [sp+8h] [bp-5Ch]@1
  int v8; // [sp+Ch] [bp-58h]@1
  int v9; // [sp+10h] [bp-54h]@1
  int v10; // [sp+14h] [bp-50h]@1
  int v11; // [sp+18h] [bp-4Ch]@1
  int v12; // [sp+1Ch] [bp-48h]@1
  int v13; // [sp+20h] [bp-44h]@1
  int v14; // [sp+24h] [bp-40h]@1
  int v15; // [sp+28h] [bp-3Ch]@1
  int v16; // [sp+2Ch] [bp-38h]@1
  int v17; // [sp+30h] [bp-34h]@1
  int v18; // [sp+34h] [bp-30h]@1
  int v19; // [sp+38h] [bp-2Ch]@1
  int v20; // [sp+3Ch] [bp-28h]@1
  int v21; // [sp+40h] [bp-24h]@1
  int v22; // [sp+44h] [bp-20h]@1
  int v23; // [sp+48h] [bp-1Ch]@1
  int v24; // [sp+4Ch] [bp-18h]@1
  int v25; // [sp+50h] [bp-14h]@1
  int v26; // [sp+54h] [bp-10h]@1
  int v27; // [sp+58h] [bp-Ch]@1
  int v28; // [sp+5Ch] [bp-8h]@1
  int v29; // [sp+60h] [bp-4h]@1

  v18 = 80;
  v19 = 192;
  v20 = 96;
  v21 = 216;
  v22 = 96;
  v23 = 192;
  v24 = 112;
  v25 = 216;
  v26 = 112;
  v27 = 192;
  v28 = 128;
  v29 = 216;
  v6 = 80;
  v7 = 216;
  v8 = 96;
  v9 = 240;
  v10 = 96;
  v11 = 216;
  v12 = 112;
  v13 = 240;
  v14 = 112;
  v15 = 216;
  v16 = 128;
  v17 = 240;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 100) = 0;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( RNG_Range(0, 160) == 1 )
      {
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 1;
      }
      break;
    case 2:
      if ( ++*(_DWORD *)(a1 + 120) > 12 )
      {
        *(_DWORD *)(a1 + 116) = 1;
        *(_DWORD *)(a1 + 104) = 0;
      }
      break;
    case 3:
      *(_DWORD *)(a1 + 104) = 2;
      break;
    default:
      break;
  }
  if ( *(_DWORD *)(a1 + 116) < 2
    && Quote_Y_Position < *(_DWORD *)(a1 + 12) + 0x2000
    && Quote_Y_Position > *(_DWORD *)(a1 + 12) - 0x2000 )
  {
    if ( Quote_X_Position >= *(_DWORD *)(a1 + 8) )
      *(_DWORD *)(a1 + 76) = 2;
    else
      *(_DWORD *)(a1 + 76) = 0;
  }
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v6 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    result = v4[2];
    *(_DWORD *)(v5 + 8) = result;
    *(_DWORD *)(v5 + 12) = v4[3];
  }
  else
  {
    v1 = &v18 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    result = v1[2];
    *(_DWORD *)(v2 + 8) = result;
    *(_DWORD *)(v2 + 12) = v1[3];
  }
  return result;
}

//----- (00452700) --------------------------------------------------------
int __cdecl NPC224(int a1)
{
  int *v1; // edx@18
  int result; // eax@18
  int *v3; // edx@19
  int v4; // [sp+0h] [bp-44h]@1
  int v5; // [sp+4h] [bp-40h]@1
  int v6; // [sp+8h] [bp-3Ch]@1
  int v7; // [sp+Ch] [bp-38h]@1
  int v8; // [sp+10h] [bp-34h]@1
  int v9; // [sp+14h] [bp-30h]@1
  int v10; // [sp+18h] [bp-2Ch]@1
  int v11; // [sp+1Ch] [bp-28h]@1
  int v12; // [sp+20h] [bp-24h]@1
  int v13; // [sp+24h] [bp-20h]@1
  int v14; // [sp+28h] [bp-1Ch]@1
  int v15; // [sp+2Ch] [bp-18h]@1
  int v16; // [sp+30h] [bp-14h]@1
  int v17; // [sp+34h] [bp-10h]@1
  int v18; // [sp+38h] [bp-Ch]@1
  int v19; // [sp+3Ch] [bp-8h]@1
  int v20; // [sp+40h] [bp-4h]@1

  v13 = 112;
  v14 = 32;
  v15 = 128;
  v16 = 48;
  v17 = 128;
  v18 = 32;
  v19 = 144;
  v20 = 48;
  v5 = 112;
  v6 = 48;
  v7 = 128;
  v8 = 64;
  v9 = 128;
  v10 = 48;
  v11 = 144;
  v12 = 64;
  v4 = *(_DWORD *)(a1 + 116);
  if ( v4 )
  {
    if ( v4 != 1 )
    {
      if ( v4 == 2 && ++*(_DWORD *)(a1 + 120) > 12 )
      {
        *(_DWORD *)(a1 + 116) = 1;
        *(_DWORD *)(a1 + 104) = 0;
      }
      goto LABEL_11;
    }
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 104) = 0;
    *(_DWORD *)(a1 + 100) = 0;
  }
  if ( RNG_Range(0, 160) == 1 )
  {
    *(_DWORD *)(a1 + 116) = 2;
    *(_DWORD *)(a1 + 120) = 0;
    *(_DWORD *)(a1 + 104) = 1;
  }
LABEL_11:
  if ( *(_DWORD *)(a1 + 116) < 2
    && Quote_Y_Position < *(_DWORD *)(a1 + 12) + 0x2000
    && Quote_Y_Position > *(_DWORD *)(a1 + 12) - 0x2000 )
  {
    if ( Quote_X_Position >= *(_DWORD *)(a1 + 8) )
      *(_DWORD *)(a1 + 76) = 2;
    else
      *(_DWORD *)(a1 + 76) = 0;
  }
  if ( *(_DWORD *)(a1 + 76) )
  {
    v3 = &v5 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v3;
    *(_DWORD *)(result + 4) = v3[1];
    *(_DWORD *)(result + 8) = v3[2];
    *(_DWORD *)(result + 12) = v3[3];
  }
  else
  {
    v1 = &v13 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v1;
    *(_DWORD *)(result + 4) = v1[1];
    *(_DWORD *)(result + 8) = v1[2];
    *(_DWORD *)(result + 12) = v1[3];
  }
  return result;
}

//----- (004528D0) --------------------------------------------------------
int __cdecl NPC225(int a1)
{
  int *v1; // edx@12
  int result; // eax@12
  int *v3; // edx@13
  int v4; // [sp+0h] [bp-44h]@1
  int v5; // [sp+4h] [bp-40h]@1
  int v6; // [sp+8h] [bp-3Ch]@1
  int v7; // [sp+Ch] [bp-38h]@1
  int v8; // [sp+10h] [bp-34h]@1
  int v9; // [sp+14h] [bp-30h]@1
  int v10; // [sp+18h] [bp-2Ch]@1
  int v11; // [sp+1Ch] [bp-28h]@1
  int v12; // [sp+20h] [bp-24h]@1
  int v13; // [sp+24h] [bp-20h]@1
  int v14; // [sp+28h] [bp-1Ch]@1
  int v15; // [sp+2Ch] [bp-18h]@1
  int v16; // [sp+30h] [bp-14h]@1
  int v17; // [sp+34h] [bp-10h]@1
  int v18; // [sp+38h] [bp-Ch]@1
  int v19; // [sp+3Ch] [bp-8h]@1
  int v20; // [sp+40h] [bp-4h]@1

  v13 = 64;
  v14 = 64;
  v15 = 80;
  v16 = 80;
  v17 = 80;
  v18 = 64;
  v19 = 96;
  v20 = 80;
  v5 = 64;
  v6 = 80;
  v7 = 80;
  v8 = 96;
  v9 = 80;
  v10 = 80;
  v11 = 96;
  v12 = 96;
  v4 = *(_DWORD *)(a1 + 116);
  if ( v4 )
  {
    if ( v4 != 1 )
    {
      if ( v4 == 2 && ++*(_DWORD *)(a1 + 120) > 12 )
      {
        *(_DWORD *)(a1 + 116) = 1;
        *(_DWORD *)(a1 + 104) = 0;
      }
      goto LABEL_11;
    }
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 104) = 0;
    *(_DWORD *)(a1 + 100) = 0;
  }
  if ( RNG_Range(0, 160) == 1 )
  {
    *(_DWORD *)(a1 + 116) = 2;
    *(_DWORD *)(a1 + 120) = 0;
    *(_DWORD *)(a1 + 104) = 1;
  }
LABEL_11:
  if ( *(_DWORD *)(a1 + 76) )
  {
    v3 = &v5 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v3;
    *(_DWORD *)(result + 4) = v3[1];
    *(_DWORD *)(result + 8) = v3[2];
    *(_DWORD *)(result + 12) = v3[3];
  }
  else
  {
    v1 = &v13 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v1;
    *(_DWORD *)(result + 4) = v1[1];
    *(_DWORD *)(result + 8) = v1[2];
    *(_DWORD *)(result + 12) = v1[3];
  }
  return result;
}

//----- (00452A50) --------------------------------------------------------
int __cdecl NPC226(int a1)
{
  int *v1; // eax@18
  int v2; // ecx@18
  int result; // eax@18
  int v4; // [sp+4h] [bp-70h]@1
  int v5; // [sp+8h] [bp-6Ch]@1
  int v6; // [sp+Ch] [bp-68h]@1
  int v7; // [sp+10h] [bp-64h]@1
  int v8; // [sp+14h] [bp-60h]@1
  int v9; // [sp+18h] [bp-5Ch]@1
  int v10; // [sp+1Ch] [bp-58h]@1
  int v11; // [sp+20h] [bp-54h]@1
  int v12; // [sp+24h] [bp-50h]@1
  int v13; // [sp+28h] [bp-4Ch]@1
  int v14; // [sp+2Ch] [bp-48h]@1
  int v15; // [sp+30h] [bp-44h]@1
  int v16; // [sp+34h] [bp-40h]@1
  int v17; // [sp+38h] [bp-3Ch]@1
  int v18; // [sp+3Ch] [bp-38h]@1
  int v19; // [sp+40h] [bp-34h]@1
  int v20; // [sp+44h] [bp-30h]@1
  int v21; // [sp+48h] [bp-2Ch]@1
  int v22; // [sp+4Ch] [bp-28h]@1
  int v23; // [sp+50h] [bp-24h]@1
  int v24; // [sp+54h] [bp-20h]@1
  int v25; // [sp+58h] [bp-1Ch]@1
  int v26; // [sp+5Ch] [bp-18h]@1
  int v27; // [sp+60h] [bp-14h]@1
  int v28; // [sp+64h] [bp-10h]@1
  int v29; // [sp+68h] [bp-Ch]@1
  int v30; // [sp+6Ch] [bp-8h]@1
  int v31; // [sp+70h] [bp-4h]@1

  v4 = 256;
  v5 = 56;
  v6 = 272;
  v7 = 80;
  v8 = 272;
  v9 = 56;
  v10 = 288;
  v11 = 80;
  v12 = 288;
  v13 = 56;
  v14 = 304;
  v15 = 80;
  v16 = 256;
  v17 = 56;
  v18 = 272;
  v19 = 80;
  v20 = 304;
  v21 = 56;
  v22 = 320;
  v23 = 80;
  v24 = 256;
  v25 = 56;
  v26 = 272;
  v27 = 80;
  v28 = 240;
  v29 = 56;
  v30 = 256;
  v31 = 80;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 100) = 0;
      *(_DWORD *)(a1 + 16) = 0;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( RNG_Range(0, 60) == 1 )
      {
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 1;
      }
      break;
    case 2:
      if ( ++*(_DWORD *)(a1 + 120) > 8 )
      {
        *(_DWORD *)(a1 + 116) = 1;
        *(_DWORD *)(a1 + 104) = 0;
      }
      break;
    case 0xA:
      *(_DWORD *)(a1 + 116) = 11;
      *(_DWORD *)(a1 + 104) = 2;
      *(_DWORD *)(a1 + 100) = 0;
      goto LABEL_10;
    case 0xB:
LABEL_10:
      *(_DWORD *)(a1 + 16) = 512;
      if ( ++*(_DWORD *)(a1 + 100) > 4 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 5 )
        *(_DWORD *)(a1 + 104) = 2;
      ++*(_DWORD *)(a1 + 120);
      break;
    case 0x14:
      *(_DWORD *)(a1 + 16) = 0;
      *(_DWORD *)(a1 + 104) = 6;
      break;
    default:
      break;
  }
  *(_DWORD *)(a1 + 20) += 32;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  v1 = &v4 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  *(_DWORD *)(v2 + 8) = v1[2];
  result = v1[3];
  *(_DWORD *)(v2 + 12) = result;
  return result;
}

//----- (00452D10) --------------------------------------------------------
int __cdecl NPC227(int a1)
{
  int result; // eax@1

  result = a1 + 84;
  *(_DWORD *)result = 208;
  *(_DWORD *)(result + 4) = 32;
  *(_DWORD *)(result + 8) = 224;
  *(_DWORD *)(result + 12) = 48;
  return result;
}

//----- (00452D60) --------------------------------------------------------
int __cdecl NPC228(int a1)
{
  int *v1; // eax@26
  int v2; // ecx@26
  int result; // eax@26
  int *v4; // eax@27
  int v5; // ecx@27
  int v6; // [sp+4h] [bp-80h]@1
  int v7; // [sp+8h] [bp-7Ch]@1
  int v8; // [sp+Ch] [bp-78h]@1
  int v9; // [sp+10h] [bp-74h]@1
  int v10; // [sp+14h] [bp-70h]@1
  int v11; // [sp+18h] [bp-6Ch]@1
  int v12; // [sp+1Ch] [bp-68h]@1
  int v13; // [sp+20h] [bp-64h]@1
  int v14; // [sp+24h] [bp-60h]@1
  int v15; // [sp+28h] [bp-5Ch]@1
  int v16; // [sp+2Ch] [bp-58h]@1
  int v17; // [sp+30h] [bp-54h]@1
  int v18; // [sp+34h] [bp-50h]@1
  int v19; // [sp+38h] [bp-4Ch]@1
  int v20; // [sp+3Ch] [bp-48h]@1
  int v21; // [sp+40h] [bp-44h]@1
  int v22; // [sp+44h] [bp-40h]@1
  int v23; // [sp+48h] [bp-3Ch]@1
  int v24; // [sp+4Ch] [bp-38h]@1
  int v25; // [sp+50h] [bp-34h]@1
  int v26; // [sp+54h] [bp-30h]@1
  int v27; // [sp+58h] [bp-2Ch]@1
  int v28; // [sp+5Ch] [bp-28h]@1
  int v29; // [sp+60h] [bp-24h]@1
  int v30; // [sp+64h] [bp-20h]@1
  int v31; // [sp+68h] [bp-1Ch]@1
  int v32; // [sp+6Ch] [bp-18h]@1
  int v33; // [sp+70h] [bp-14h]@1
  int v34; // [sp+74h] [bp-10h]@1
  int v35; // [sp+78h] [bp-Ch]@1
  int v36; // [sp+7Ch] [bp-8h]@1
  int v37; // [sp+80h] [bp-4h]@1

  v22 = 0;
  v23 = 0;
  v24 = 32;
  v25 = 40;
  v26 = 32;
  v27 = 0;
  v28 = 64;
  v29 = 40;
  v30 = 64;
  v31 = 0;
  v32 = 96;
  v33 = 40;
  v34 = 96;
  v35 = 0;
  v36 = 128;
  v37 = 40;
  v6 = 0;
  v7 = 40;
  v8 = 32;
  v9 = 80;
  v10 = 32;
  v11 = 40;
  v12 = 64;
  v13 = 80;
  v14 = 64;
  v15 = 40;
  v16 = 96;
  v17 = 80;
  v18 = 96;
  v19 = 40;
  v20 = 128;
  v21 = 80;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 12) -= 4096;
      goto LABEL_3;
    case 1:
LABEL_3:
      *(_DWORD *)(a1 + 16) = 0;
      *(_DWORD *)(a1 + 116) = 2;
      *(_DWORD *)(a1 + 104) = 0;
      goto LABEL_4;
    case 2:
LABEL_4:
      if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
        *(_DWORD *)(a1 + 76) = 2;
      else
        *(_DWORD *)(a1 + 76) = 0;
      if ( ++*(_DWORD *)(a1 + 100) > 50 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 1 )
        *(_DWORD *)(a1 + 104) = 0;
      break;
    case 0xA:
      *(_DWORD *)(a1 + 116) = 11;
      *(_DWORD *)(a1 + 104) = 2;
      *(_DWORD *)(a1 + 120) = 0;
      goto LABEL_13;
    case 0xB:
LABEL_13:
      if ( ++*(_DWORD *)(a1 + 120) > 10 )
      {
        *(_DWORD *)(a1 + 116) = 12;
        *(_DWORD *)(a1 + 104) = 3;
        *(_DWORD *)(a1 + 20) = -1536;
        if ( *(_DWORD *)(a1 + 76) )
          *(_DWORD *)(a1 + 16) = 512;
        else
          *(_DWORD *)(a1 + 16) = -512;
      }
      break;
    case 0xC:
      if ( *(_DWORD *)(a1 + 4) & 8 )
      {
        *(_DWORD *)(a1 + 104) = 2;
        *(_DWORD *)(a1 + 116) = 13;
        *(_DWORD *)(a1 + 120) = 0;
      }
      break;
    case 0xD:
      *(_DWORD *)(a1 + 16) /= 2;
      if ( ++*(_DWORD *)(a1 + 120) > 10 )
        *(_DWORD *)(a1 + 116) = 1;
      break;
    default:
      break;
  }
  *(_DWORD *)(a1 + 20) += 64;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v6 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    *(_DWORD *)(v5 + 8) = v4[2];
    result = v4[3];
    *(_DWORD *)(v5 + 12) = result;
  }
  else
  {
    v1 = &v22 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    *(_DWORD *)(v2 + 8) = v1[2];
    result = v1[3];
    *(_DWORD *)(v2 + 12) = result;
  }
  return result;
}

//----- (004530D0) --------------------------------------------------------
signed int __cdecl NPC229(int a1)
{
  int v1; // ecx@4
  signed int result; // eax@4
  int v3; // ecx@5

  if ( !*(_DWORD *)(a1 + 116) )
  {
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 12) -= 0x2000;
  }
  if ( *(_DWORD *)(a1 + 76) )
  {
    v3 = a1 + 84;
    *(_DWORD *)v3 = 0;
    *(_DWORD *)(v3 + 4) = 112;
    *(_DWORD *)(v3 + 8) = 48;
    result = 128;
    *(_DWORD *)(v3 + 12) = 128;
  }
  else
  {
    v1 = a1 + 84;
    *(_DWORD *)v1 = 0;
    *(_DWORD *)(v1 + 4) = 96;
    *(_DWORD *)(v1 + 8) = 48;
    result = 112;
    *(_DWORD *)(v1 + 12) = 112;
  }
  return result;
}

//----- (00453190) --------------------------------------------------------
signed int __cdecl NPC230(int a1)
{
  int v1; // ecx@4
  signed int result; // eax@4
  int v3; // ecx@5

  if ( !*(_DWORD *)(a1 + 116) )
  {
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 8) -= 0x2000;
    *(_DWORD *)(a1 + 12) -= 0x2000;
  }
  if ( *(_DWORD *)(a1 + 76) )
  {
    v3 = a1 + 84;
    *(_DWORD *)v3 = 96;
    *(_DWORD *)(v3 + 4) = 96;
    *(_DWORD *)(v3 + 8) = 144;
    result = 128;
    *(_DWORD *)(v3 + 12) = 128;
  }
  else
  {
    v1 = a1 + 84;
    *(_DWORD *)v1 = 48;
    *(_DWORD *)(v1 + 4) = 96;
    *(_DWORD *)(v1 + 8) = 96;
    result = 128;
    *(_DWORD *)(v1 + 12) = 128;
  }
  return result;
}

//----- (00453260) --------------------------------------------------------
int __cdecl NPC231(int a1)
{
  int v1; // ST08_4@12
  int v2; // eax@12
  int v3; // ST08_4@27
  int v4; // eax@27
  int *v5; // ecx@42
  int v6; // edx@42
  int result; // eax@42
  signed int i; // [sp+4h] [bp-24h]@10
  signed int j; // [sp+4h] [bp-24h]@25
  int v10; // [sp+8h] [bp-20h]@1
  int v11; // [sp+Ch] [bp-1Ch]@1
  int v12; // [sp+10h] [bp-18h]@1
  int v13; // [sp+14h] [bp-14h]@1
  int v14; // [sp+18h] [bp-10h]@1
  int v15; // [sp+1Ch] [bp-Ch]@1
  int v16; // [sp+20h] [bp-8h]@1
  int v17; // [sp+24h] [bp-4h]@1

  v10 = 176;
  v11 = 32;
  v12 = 208;
  v13 = 48;
  v14 = 176;
  v15 = 48;
  v16 = 208;
  v17 = 64;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      goto LABEL_3;
    case 1:
LABEL_3:
      *(_DWORD *)(a1 + 104) = 0;
      break;
    case 0xA:
      *(_DWORD *)(a1 + 116) = 11;
      *(_DWORD *)(a1 + 120) = 0;
      goto LABEL_5;
    case 0xB:
LABEL_5:
      ++*(_DWORD *)(a1 + 120);
      *(_DWORD *)(a1 + 20) += 8;
      if ( *(_DWORD *)(a1 + 4) & 8 )
      {
        if ( *(_DWORD *)(a1 + 120) >= 10 )
          *(_DWORD *)(a1 + 116) = 1;
        else
          *(_DWORD *)(a1 + 116) = 12;
      }
      break;
    case 0xC:
      *(_WORD *)(a1 + 80) &= 0xDFFFu;
      *(_DWORD *)(a1 + 116) = 13;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 104) = 1;
      for ( i = 0; i < 10; ++i )
      {
        v1 = *(_DWORD *)(a1 + 12) + (RNG_Range(-8, 8) << 9);
        v2 = RNG_Range(-16, 16);
        NPC_Create(4, *(_DWORD *)(a1 + 8) + (v2 << 9), v1, 0, 0, 0, 0, 256);
        Play_Sound_Effect(12, 1);
      }
      goto LABEL_13;
    case 0xD:
LABEL_13:
      *(_DWORD *)(a1 + 20) -= 8;
      if ( !(++*(_DWORD *)(a1 + 120) % 2) )
        Create_Animated_Effect(*(_DWORD *)(a1 + 8) - 5120, *(_DWORD *)(a1 + 12) + 4096, 7, 3);
      if ( *(_DWORD *)(a1 + 120) % 2 == 1 )
        Create_Animated_Effect(*(_DWORD *)(a1 + 8) + 5120, *(_DWORD *)(a1 + 12) + 4096, 7, 3);
      if ( *(_DWORD *)(a1 + 120) % 4 == 1 )
        Play_Sound_Effect(34, 1);
      if ( *(_DWORD *)(a1 + 4) & 2 || Tile_On_Which_Quote_Is & 2 || *(_DWORD *)(a1 + 120) > 450 )
      {
        if ( *(_DWORD *)(a1 + 4) & 2 || Tile_On_Which_Quote_Is & 2 )
          *(_DWORD *)(a1 + 20) = 0;
        *(_DWORD *)(a1 + 116) = 15;
        for ( j = 0; j < 6; ++j )
        {
          v3 = *(_DWORD *)(a1 + 12) + (RNG_Range(-8, 8) << 9);
          v4 = RNG_Range(-16, 16);
          NPC_Create(4, *(_DWORD *)(a1 + 8) + (v4 << 9), v3, 0, 0, 0, 0, 256);
          Play_Sound_Effect(12, 1);
        }
      }
      break;
    case 0xF:
      *(_DWORD *)(a1 + 20) += 8;
      ++*(_DWORD *)(a1 + 120);
      if ( *(_DWORD *)(a1 + 20) < 0 )
      {
        if ( !(*(_DWORD *)(a1 + 120) % 8) )
          Create_Animated_Effect(*(_DWORD *)(a1 + 8) - 5120, *(_DWORD *)(a1 + 12) + 4096, 7, 3);
        if ( *(_DWORD *)(a1 + 120) % 8 == 4 )
          Create_Animated_Effect(*(_DWORD *)(a1 + 8) + 5120, *(_DWORD *)(a1 + 12) + 4096, 7, 3);
        if ( *(_DWORD *)(a1 + 120) % 16 == 1 )
          Play_Sound_Effect(34, 1);
      }
      if ( *(_DWORD *)(a1 + 4) & 8 )
      {
        *(_WORD *)(a1 + 80) |= 0x2000u;
        *(_DWORD *)(a1 + 116) = 1;
        *(_DWORD *)(a1 + 104) = 0;
      }
      break;
    default:
      break;
  }
  if ( *(_DWORD *)(a1 + 20) < -1535 )
    *(_DWORD *)(a1 + 20) = -1535;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  v5 = &v10 + 4 * *(_DWORD *)(a1 + 104);
  v6 = a1 + 84;
  *(_DWORD *)v6 = *v5;
  *(_DWORD *)(v6 + 4) = v5[1];
  result = v5[2];
  *(_DWORD *)(v6 + 8) = result;
  *(_DWORD *)(v6 + 12) = v5[3];
  return result;
}
// 49E63C: using guessed type int Tile_On_Which_Quote_Is;

//----- (004536F0) --------------------------------------------------------
int __cdecl NPC232(int a1)
{
  int *v1; // eax@28
  int v2; // ecx@28
  int result; // eax@28
  int *v4; // eax@29
  int v5; // ecx@29
  int v6; // [sp+0h] [bp-68h]@1
  int v7; // [sp+4h] [bp-64h]@27
  int v8; // [sp+8h] [bp-60h]@27
  int v9; // [sp+Ch] [bp-5Ch]@27
  int v10; // [sp+10h] [bp-58h]@27
  int v11; // [sp+14h] [bp-54h]@27
  int v12; // [sp+18h] [bp-50h]@27
  int v13; // [sp+1Ch] [bp-4Ch]@27
  int v14; // [sp+20h] [bp-48h]@27
  int v15; // [sp+24h] [bp-44h]@27
  int v16; // [sp+28h] [bp-40h]@27
  int v17; // [sp+2Ch] [bp-3Ch]@27
  int v18; // [sp+30h] [bp-38h]@27
  int i; // [sp+34h] [bp-34h]@4
  int v20; // [sp+38h] [bp-30h]@27
  int v21; // [sp+3Ch] [bp-2Ch]@27
  int v22; // [sp+40h] [bp-28h]@27
  int v23; // [sp+44h] [bp-24h]@27
  int v24; // [sp+48h] [bp-20h]@27
  int v25; // [sp+4Ch] [bp-1Ch]@27
  int v26; // [sp+50h] [bp-18h]@27
  int v27; // [sp+54h] [bp-14h]@27
  int v28; // [sp+58h] [bp-10h]@27
  int v29; // [sp+5Ch] [bp-Ch]@27
  int v30; // [sp+60h] [bp-8h]@27
  int v31; // [sp+64h] [bp-4h]@27

  v6 = *(_DWORD *)(a1 + 116);
  if ( v6 )
  {
    if ( v6 != 1 )
      goto LABEL_27;
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 32) = *(_DWORD *)(a1 + 8);
    *(_DWORD *)(a1 + 36) = *(_DWORD *)(a1 + 12);
    *(_DWORD *)(a1 + 20) = 512;
    for ( i = 0; i < 8; ++i )
      NPC_Create(233, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 0, 0, *(_DWORD *)(a1 + 76), a1, 256);
  }
  if ( *(_DWORD *)(a1 + 16) < 0 && *(_DWORD *)(a1 + 4) & 1 )
    *(_DWORD *)(a1 + 76) = 2;
  if ( *(_DWORD *)(a1 + 16) > 0 && *(_DWORD *)(a1 + 4) & 4 )
    *(_DWORD *)(a1 + 76) = 0;
  if ( *(_DWORD *)(a1 + 76) )
    *(_DWORD *)(a1 + 16) = 256;
  else
    *(_DWORD *)(a1 + 16) = -256;
  if ( *(_DWORD *)(a1 + 12) >= *(_DWORD *)(a1 + 36) )
    *(_DWORD *)(a1 + 20) -= 8;
  else
    *(_DWORD *)(a1 + 20) += 8;
  if ( *(_DWORD *)(a1 + 20) > 512 )
    *(_DWORD *)(a1 + 20) = 512;
  if ( *(_DWORD *)(a1 + 20) < -512 )
    *(_DWORD *)(a1 + 20) = -512;
  if ( ++*(_DWORD *)(a1 + 100) > 5 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    ++*(_DWORD *)(a1 + 104);
  }
  if ( *(_DWORD *)(a1 + 104) > 2 )
    *(_DWORD *)(a1 + 104) = 0;
LABEL_27:
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  v20 = 128;
  v21 = 0;
  v22 = 160;
  v23 = 32;
  v24 = 160;
  v25 = 0;
  v26 = 192;
  v27 = 32;
  v28 = 192;
  v29 = 0;
  v30 = 224;
  v31 = 32;
  v7 = 128;
  v8 = 32;
  v9 = 160;
  v10 = 64;
  v11 = 160;
  v12 = 32;
  v13 = 192;
  v14 = 64;
  v15 = 192;
  v16 = 32;
  v17 = 224;
  v18 = 64;
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v7 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    *(_DWORD *)(v5 + 8) = v4[2];
    result = v4[3];
    *(_DWORD *)(v5 + 12) = result;
  }
  else
  {
    v1 = &v20 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    *(_DWORD *)(v2 + 8) = v1[2];
    result = v1[3];
    *(_DWORD *)(v2 + 12) = result;
  }
  return result;
}

//----- (004539B0) --------------------------------------------------------
int __cdecl NPC233(int a1)
{
  char v1; // al@5
  int *v2; // ecx@43
  int v3; // edx@43
  int result; // eax@43
  int *v5; // ecx@44
  int v6; // edx@44
  int v7; // [sp+0h] [bp-8Ch]@1
  int v8; // [sp+4h] [bp-88h]@36
  int v9; // [sp+8h] [bp-84h]@36
  int v10; // [sp+Ch] [bp-80h]@36
  int v11; // [sp+10h] [bp-7Ch]@36
  int v12; // [sp+14h] [bp-78h]@36
  int v13; // [sp+18h] [bp-74h]@36
  int v14; // [sp+1Ch] [bp-70h]@36
  int v15; // [sp+20h] [bp-6Ch]@36
  int v16; // [sp+24h] [bp-68h]@36
  int v17; // [sp+28h] [bp-64h]@36
  int v18; // [sp+2Ch] [bp-60h]@36
  int v19; // [sp+30h] [bp-5Ch]@36
  int v20; // [sp+34h] [bp-58h]@36
  int v21; // [sp+38h] [bp-54h]@36
  int v22; // [sp+3Ch] [bp-50h]@36
  int v23; // [sp+40h] [bp-4Ch]@36
  int v24; // [sp+44h] [bp-48h]@36
  int v25; // [sp+48h] [bp-44h]@36
  int v26; // [sp+4Ch] [bp-40h]@36
  int v27; // [sp+50h] [bp-3Ch]@36
  int v28; // [sp+54h] [bp-38h]@36
  int v29; // [sp+58h] [bp-34h]@36
  int v30; // [sp+5Ch] [bp-30h]@36
  int v31; // [sp+60h] [bp-2Ch]@36
  int v32; // [sp+64h] [bp-28h]@36
  int v33; // [sp+68h] [bp-24h]@36
  int v34; // [sp+6Ch] [bp-20h]@36
  int v35; // [sp+70h] [bp-1Ch]@36
  int v36; // [sp+74h] [bp-18h]@36
  int v37; // [sp+78h] [bp-14h]@36
  int v38; // [sp+7Ch] [bp-10h]@36
  int v39; // [sp+80h] [bp-Ch]@36
  unsigned __int8 v40; // [sp+8Bh] [bp-1h]@5

  v7 = *(_DWORD *)(a1 + 116);
  if ( v7 )
  {
    if ( v7 != 1 )
    {
      if ( v7 == 3 )
      {
        *(_DWORD *)(a1 + 20) += 64;
        if ( *(_DWORD *)(a1 + 20) > 1535 )
          *(_DWORD *)(a1 + 20) = 1535;
        if ( *(_DWORD *)(a1 + 4) & 8 )
        {
          *(_DWORD *)(a1 + 20) = 0;
          *(_DWORD *)(a1 + 16) *= 2;
          *(_DWORD *)(a1 + 108) = 0;
          *(_DWORD *)(a1 + 116) = 1;
          *(_WORD *)(a1 + 80) |= 8u;
        }
      }
      goto LABEL_36;
    }
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 1;
    v1 = RNG_Range(0, 255);
    *(_DWORD *)(a1 + 16) = COS_function(v1);
    v40 = RNG_Range(0, 255);
    *(_DWORD *)(a1 + 20) = SIN_function(v40);
    *(_DWORD *)(a1 + 108) = 120;
    *(_DWORD *)(a1 + 112) = RNG_Range(-32, 32) << 9;
  }
  if ( *(_DWORD *)(*(_DWORD *)(a1 + 168) + 40) == 232 )
  {
    *(_DWORD *)(a1 + 32) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 8);
    *(_DWORD *)(a1 + 36) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 12);
    *(_DWORD *)(a1 + 76) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 76);
  }
  if ( *(_DWORD *)(a1 + 32) < *(_DWORD *)(a1 + 8) )
    *(_DWORD *)(a1 + 16) -= 8;
  if ( *(_DWORD *)(a1 + 32) > *(_DWORD *)(a1 + 8) )
    *(_DWORD *)(a1 + 16) += 8;
  if ( *(_DWORD *)(a1 + 112) + *(_DWORD *)(a1 + 36) < *(_DWORD *)(a1 + 12) )
    *(_DWORD *)(a1 + 20) -= 32;
  if ( *(_DWORD *)(a1 + 112) + *(_DWORD *)(a1 + 36) > *(_DWORD *)(a1 + 12) )
    *(_DWORD *)(a1 + 20) += 32;
  if ( *(_DWORD *)(a1 + 16) > 1024 )
    *(_DWORD *)(a1 + 16) = 1024;
  if ( *(_DWORD *)(a1 + 16) < -1024 )
    *(_DWORD *)(a1 + 16) = -1024;
  if ( *(_DWORD *)(a1 + 20) > 1024 )
    *(_DWORD *)(a1 + 20) = 1024;
  if ( *(_DWORD *)(a1 + 20) < -1024 )
    *(_DWORD *)(a1 + 20) = -1024;
  if ( *(_DWORD *)(a1 + 108) >= 120 )
  {
    if ( *(_DWORD *)(a1 + 8) - 4096 < Quote_X_Position
      && *(_DWORD *)(a1 + 8) + 4096 > Quote_X_Position
      && *(_DWORD *)(a1 + 12) < Quote_Y_Position
      && *(_DWORD *)(a1 + 12) + 90112 > Quote_Y_Position )
    {
      *(_DWORD *)(a1 + 16) /= 4;
      *(_DWORD *)(a1 + 20) = 0;
      *(_DWORD *)(a1 + 116) = 3;
      *(_WORD *)(a1 + 80) &= 0xFFF7u;
    }
  }
  else
  {
    ++*(_DWORD *)(a1 + 108);
  }
LABEL_36:
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  v24 = 256;
  v25 = 0;
  v26 = 272;
  v27 = 16;
  v28 = 272;
  v29 = 0;
  v30 = 288;
  v31 = 16;
  v32 = 288;
  v33 = 0;
  v34 = 304;
  v35 = 16;
  v36 = 304;
  v37 = 0;
  v38 = 320;
  v39 = 16;
  v8 = 256;
  v9 = 16;
  v10 = 272;
  v11 = 32;
  v12 = 272;
  v13 = 16;
  v14 = 288;
  v15 = 32;
  v16 = 288;
  v17 = 16;
  v18 = 304;
  v19 = 32;
  v20 = 304;
  v21 = 16;
  v22 = 320;
  v23 = 32;
  if ( *(_DWORD *)(a1 + 116) == 3 )
  {
    *(_DWORD *)(a1 + 104) = 3;
  }
  else
  {
    if ( ++*(_DWORD *)(a1 + 100) > 1 )
    {
      *(_DWORD *)(a1 + 100) = 0;
      ++*(_DWORD *)(a1 + 104);
    }
    if ( *(_DWORD *)(a1 + 104) > 2 )
      *(_DWORD *)(a1 + 104) = 0;
  }
  if ( *(_DWORD *)(a1 + 76) )
  {
    v5 = &v8 + 4 * *(_DWORD *)(a1 + 104);
    v6 = a1 + 84;
    *(_DWORD *)v6 = *v5;
    *(_DWORD *)(v6 + 4) = v5[1];
    result = v5[2];
    *(_DWORD *)(v6 + 8) = result;
    *(_DWORD *)(v6 + 12) = v5[3];
  }
  else
  {
    v2 = &v24 + 4 * *(_DWORD *)(a1 + 104);
    v3 = a1 + 84;
    *(_DWORD *)v3 = *v2;
    *(_DWORD *)(v3 + 4) = v2[1];
    result = v2[2];
    *(_DWORD *)(v3 + 8) = result;
    *(_DWORD *)(v3 + 12) = v2[3];
  }
  return result;
}

//----- (00453E60) --------------------------------------------------------
signed int __cdecl NPC234(int a1)
{
  int v1; // ecx@4
  signed int result; // eax@4
  int v3; // ecx@5

  if ( !*(_DWORD *)(a1 + 116) )
  {
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 12) += 0x2000;
  }
  if ( *(_DWORD *)(a1 + 76) )
  {
    v3 = a1 + 84;
    *(_DWORD *)v3 = 144;
    *(_DWORD *)(v3 + 4) = 112;
    *(_DWORD *)(v3 + 8) = 192;
    result = 128;
    *(_DWORD *)(v3 + 12) = 128;
  }
  else
  {
    v1 = a1 + 84;
    *(_DWORD *)v1 = 144;
    *(_DWORD *)(v1 + 4) = 96;
    *(_DWORD *)(v1 + 8) = 192;
    result = 112;
    *(_DWORD *)(v1 + 12) = 112;
  }
  return result;
}

//----- (00453F20) --------------------------------------------------------
int __cdecl NPC235(int a1)
{
  int *v1; // eax@35
  int v2; // ecx@35
  int result; // eax@35
  int *v4; // eax@36
  int v5; // ecx@36
  int v6; // [sp+4h] [bp-80h]@1
  int v7; // [sp+8h] [bp-7Ch]@1
  int v8; // [sp+Ch] [bp-78h]@1
  int v9; // [sp+10h] [bp-74h]@1
  int v10; // [sp+14h] [bp-70h]@1
  int v11; // [sp+18h] [bp-6Ch]@1
  int v12; // [sp+1Ch] [bp-68h]@1
  int v13; // [sp+20h] [bp-64h]@1
  int v14; // [sp+24h] [bp-60h]@1
  int v15; // [sp+28h] [bp-5Ch]@1
  int v16; // [sp+2Ch] [bp-58h]@1
  int v17; // [sp+30h] [bp-54h]@1
  int v18; // [sp+34h] [bp-50h]@1
  int v19; // [sp+38h] [bp-4Ch]@1
  int v20; // [sp+3Ch] [bp-48h]@1
  int v21; // [sp+40h] [bp-44h]@1
  int v22; // [sp+44h] [bp-40h]@1
  int v23; // [sp+48h] [bp-3Ch]@1
  int v24; // [sp+4Ch] [bp-38h]@1
  int v25; // [sp+50h] [bp-34h]@1
  int v26; // [sp+54h] [bp-30h]@1
  int v27; // [sp+58h] [bp-2Ch]@1
  int v28; // [sp+5Ch] [bp-28h]@1
  int v29; // [sp+60h] [bp-24h]@1
  int v30; // [sp+64h] [bp-20h]@1
  int v31; // [sp+68h] [bp-1Ch]@1
  int v32; // [sp+6Ch] [bp-18h]@1
  int v33; // [sp+70h] [bp-14h]@1
  int v34; // [sp+74h] [bp-10h]@1
  int v35; // [sp+78h] [bp-Ch]@1
  int v36; // [sp+7Ch] [bp-8h]@1
  int v37; // [sp+80h] [bp-4h]@1

  v22 = 192;
  v23 = 96;
  v24 = 208;
  v25 = 112;
  v26 = 208;
  v27 = 96;
  v28 = 224;
  v29 = 112;
  v30 = 224;
  v31 = 96;
  v32 = 240;
  v33 = 112;
  v34 = 192;
  v35 = 96;
  v36 = 208;
  v37 = 112;
  v6 = 192;
  v7 = 112;
  v8 = 208;
  v9 = 128;
  v10 = 208;
  v11 = 112;
  v12 = 224;
  v13 = 128;
  v14 = 224;
  v15 = 112;
  v16 = 240;
  v17 = 128;
  v18 = 192;
  v19 = 112;
  v20 = 208;
  v21 = 128;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 100) = 0;
      *(_DWORD *)(a1 + 16) = 0;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( RNG_Range(0, 30) == 1 )
      {
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 1;
      }
      if ( RNG_Range(0, 30) == 1 )
      {
        *(_DWORD *)(a1 + 116) = 10;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 1;
      }
      break;
    case 2:
      if ( ++*(_DWORD *)(a1 + 120) > 8 )
      {
        *(_DWORD *)(a1 + 116) = 1;
        *(_DWORD *)(a1 + 104) = 0;
      }
      break;
    case 0xA:
      *(_DWORD *)(a1 + 116) = 11;
      *(_DWORD *)(a1 + 120) = RNG_Range(0, 16);
      *(_DWORD *)(a1 + 104) = 2;
      *(_DWORD *)(a1 + 100) = 0;
      if ( RNG_Range(0, 9) % 2 )
        *(_DWORD *)(a1 + 76) = 0;
      else
        *(_DWORD *)(a1 + 76) = 2;
      goto LABEL_14;
    case 0xB:
LABEL_14:
      if ( *(_DWORD *)(a1 + 76) || !(*(_DWORD *)(a1 + 4) & 1) )
      {
        if ( *(_DWORD *)(a1 + 76) == 2 && *(_DWORD *)(a1 + 4) & 4 )
          *(_DWORD *)(a1 + 76) = 0;
      }
      else
      {
        *(_DWORD *)(a1 + 76) = 2;
      }
      if ( *(_DWORD *)(a1 + 76) )
        *(_DWORD *)(a1 + 16) = 1024;
      else
        *(_DWORD *)(a1 + 16) = -1024;
      if ( ++*(_DWORD *)(a1 + 100) > 1 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 3 )
        *(_DWORD *)(a1 + 104) = 2;
      if ( ++*(_DWORD *)(a1 + 120) > 64 )
        *(_DWORD *)(a1 + 116) = 0;
      break;
    default:
      break;
  }
  *(_DWORD *)(a1 + 20) += 32;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 104) == 2 )
    *(_DWORD *)(a1 + 128) = 2560;
  else
    *(_DWORD *)(a1 + 128) = 2048;
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v6 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    *(_DWORD *)(v5 + 8) = v4[2];
    result = v4[3];
    *(_DWORD *)(v5 + 12) = result;
  }
  else
  {
    v1 = &v22 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    *(_DWORD *)(v2 + 8) = v1[2];
    result = v1[3];
    *(_DWORD *)(v2 + 12) = result;
  }
  return result;
}

//----- (00454310) --------------------------------------------------------
int __cdecl NPC236(int a1)
{
  int *v1; // edx@47
  int result; // eax@47
  int *v3; // edx@48
  int v4; // [sp+4h] [bp-C0h]@1
  int v5; // [sp+8h] [bp-BCh]@1
  int v6; // [sp+Ch] [bp-B8h]@1
  int v7; // [sp+10h] [bp-B4h]@1
  int v8; // [sp+14h] [bp-B0h]@1
  int v9; // [sp+18h] [bp-ACh]@1
  int v10; // [sp+1Ch] [bp-A8h]@1
  int v11; // [sp+20h] [bp-A4h]@1
  int v12; // [sp+24h] [bp-A0h]@1
  int v13; // [sp+28h] [bp-9Ch]@1
  int v14; // [sp+2Ch] [bp-98h]@1
  int v15; // [sp+30h] [bp-94h]@1
  int v16; // [sp+34h] [bp-90h]@1
  int v17; // [sp+38h] [bp-8Ch]@1
  int v18; // [sp+3Ch] [bp-88h]@1
  int v19; // [sp+40h] [bp-84h]@1
  int v20; // [sp+44h] [bp-80h]@1
  int v21; // [sp+48h] [bp-7Ch]@1
  int v22; // [sp+4Ch] [bp-78h]@1
  int v23; // [sp+50h] [bp-74h]@1
  int v24; // [sp+54h] [bp-70h]@1
  int v25; // [sp+58h] [bp-6Ch]@1
  int v26; // [sp+5Ch] [bp-68h]@1
  int v27; // [sp+60h] [bp-64h]@1
  int v28; // [sp+64h] [bp-60h]@1
  int v29; // [sp+68h] [bp-5Ch]@1
  int v30; // [sp+6Ch] [bp-58h]@1
  int v31; // [sp+70h] [bp-54h]@1
  int v32; // [sp+74h] [bp-50h]@1
  int v33; // [sp+78h] [bp-4Ch]@1
  int v34; // [sp+7Ch] [bp-48h]@1
  int v35; // [sp+80h] [bp-44h]@1
  int v36; // [sp+84h] [bp-40h]@1
  int v37; // [sp+88h] [bp-3Ch]@1
  int v38; // [sp+8Ch] [bp-38h]@1
  int v39; // [sp+90h] [bp-34h]@1
  int v40; // [sp+94h] [bp-30h]@1
  int v41; // [sp+98h] [bp-2Ch]@1
  int v42; // [sp+9Ch] [bp-28h]@1
  int v43; // [sp+A0h] [bp-24h]@1
  int v44; // [sp+A4h] [bp-20h]@1
  int v45; // [sp+A8h] [bp-1Ch]@1
  int v46; // [sp+ACh] [bp-18h]@1
  int v47; // [sp+B0h] [bp-14h]@1
  int v48; // [sp+B4h] [bp-10h]@1
  int v49; // [sp+B8h] [bp-Ch]@1
  int v50; // [sp+BCh] [bp-8h]@1
  int v51; // [sp+C0h] [bp-4h]@1

  v28 = 128;
  v29 = 64;
  v30 = 152;
  v31 = 88;
  v32 = 152;
  v33 = 64;
  v34 = 176;
  v35 = 88;
  v36 = 176;
  v37 = 64;
  v38 = 200;
  v39 = 88;
  v40 = 200;
  v41 = 64;
  v42 = 224;
  v43 = 88;
  v44 = 224;
  v45 = 64;
  v46 = 248;
  v47 = 88;
  v48 = 248;
  v49 = 64;
  v50 = 272;
  v51 = 88;
  v4 = 128;
  v5 = 88;
  v6 = 152;
  v7 = 112;
  v8 = 152;
  v9 = 88;
  v10 = 176;
  v11 = 112;
  v12 = 176;
  v13 = 88;
  v14 = 200;
  v15 = 112;
  v16 = 200;
  v17 = 88;
  v18 = 224;
  v19 = 112;
  v20 = 224;
  v21 = 88;
  v22 = 248;
  v23 = 112;
  v24 = 248;
  v25 = 88;
  v26 = 272;
  v27 = 112;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 120) = RNG_Range(0, 50);
      *(_DWORD *)(a1 + 32) = *(_DWORD *)(a1 + 8);
      *(_DWORD *)(a1 + 36) = *(_DWORD *)(a1 + 12);
      *(_DWORD *)(a1 + 20) = 0;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( *(_DWORD *)(a1 + 120) )
      {
        --*(_DWORD *)(a1 + 120);
      }
      else
      {
        *(_DWORD *)(a1 + 20) = 512;
        *(_DWORD *)(a1 + 116) = 2;
      }
      break;
    case 2:
      if ( *(_DWORD *)(a1 + 8) >= Quote_X_Position )
        *(_DWORD *)(a1 + 76) = 0;
      else
        *(_DWORD *)(a1 + 76) = 2;
      if ( Quote_X_Position < *(_DWORD *)(a1 + 8) + 0x10000
        && Quote_X_Position > *(_DWORD *)(a1 + 8) - 0x10000
        && Quote_Y_Position < *(_DWORD *)(a1 + 12) + 0x4000
        && Quote_Y_Position > *(_DWORD *)(a1 + 12) - 81920 )
      {
        ++*(_DWORD *)(a1 + 120);
      }
      if ( *(_DWORD *)(a1 + 120) > 80 )
      {
        *(_DWORD *)(a1 + 116) = 10;
        *(_DWORD *)(a1 + 120) = 0;
      }
      if ( ++*(_DWORD *)(a1 + 100) > 1 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 1 )
        *(_DWORD *)(a1 + 104) = 0;
      break;
    case 0xA:
      if ( ++*(_DWORD *)(a1 + 120) > 20 )
      {
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 116) = 20;
      }
      if ( ++*(_DWORD *)(a1 + 100) > 1 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 3 )
        *(_DWORD *)(a1 + 104) = 2;
      break;
    case 0x14:
      if ( ++*(_DWORD *)(a1 + 120) > 60 )
      {
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 116) = 2;
      }
      if ( *(_DWORD *)(a1 + 120) % 10 == 3 )
      {
        Play_Sound_Effect(39, 1);
        if ( *(_DWORD *)(a1 + 76) )
          NPC_Create(237, *(_DWORD *)(a1 + 8) + 4096, *(_DWORD *)(a1 + 12) - 4096, 1024, -1024, 0, 0, 256);
        else
          NPC_Create(237, *(_DWORD *)(a1 + 8) - 4096, *(_DWORD *)(a1 + 12) - 4096, -1024, -1024, 0, 0, 256);
      }
      if ( ++*(_DWORD *)(a1 + 100) > 1 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 5 )
        *(_DWORD *)(a1 + 104) = 4;
      break;
    default:
      break;
  }
  if ( *(_DWORD *)(a1 + 12) >= *(_DWORD *)(a1 + 36) )
    *(_DWORD *)(a1 + 20) -= 16;
  else
    *(_DWORD *)(a1 + 20) += 16;
  if ( *(_DWORD *)(a1 + 20) > 256 )
    *(_DWORD *)(a1 + 20) = 256;
  if ( *(_DWORD *)(a1 + 20) < -256 )
    *(_DWORD *)(a1 + 20) = -256;
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 76) )
  {
    v3 = &v4 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v3;
    *(_DWORD *)(result + 4) = v3[1];
    *(_DWORD *)(result + 8) = v3[2];
    *(_DWORD *)(result + 12) = v3[3];
  }
  else
  {
    v1 = &v28 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v1;
    *(_DWORD *)(result + 4) = v1[1];
    *(_DWORD *)(result + 8) = v1[2];
    *(_DWORD *)(result + 12) = v1[3];
  }
  return result;
}

//----- (004548B0) --------------------------------------------------------
int __cdecl NPC237(int a1)
{
  int result; // eax@14
  int v2; // [sp+0h] [bp-1Ch]@1
  signed int v3; // [sp+4h] [bp-18h]@5
  signed int i; // [sp+8h] [bp-14h]@11

  v2 = *(_DWORD *)(a1 + 116);
  if ( v2 )
  {
    if ( v2 != 1 )
      goto LABEL_15;
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 1;
  }
  v3 = 0;
  ++*(_DWORD *)(a1 + 120);
  if ( *(_DWORD *)(a1 + 4) & 0xFF )
    v3 = 1;
  if ( *(_DWORD *)(a1 + 120) > 10 && *(_DWORD *)(a1 + 4) & 0x100 )
    v3 = 1;
  if ( v3 )
  {
    for ( i = 0; i < 5; ++i )
      Create_Animated_Effect(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 1, 0);
    result = Play_Sound_Effect(21, 1);
    *(_BYTE *)a1 = 0;
    return result;
  }
LABEL_15:
  *(_DWORD *)(a1 + 20) += 32;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  result = a1 + 84;
  *(_DWORD *)result = 312;
  *(_DWORD *)(result + 4) = 32;
  *(_DWORD *)(result + 8) = 320;
  *(_DWORD *)(result + 12) = 40;
  return result;
}

//----- (00454A00) --------------------------------------------------------
int __cdecl NPC238(int a1)
{
  int v1; // ST08_4@22
  int v2; // eax@22
  int *v3; // ecx@39
  int v4; // edx@39
  int result; // eax@39
  signed int i; // [sp+4h] [bp-34h]@20
  int v7; // [sp+8h] [bp-30h]@1
  int v8; // [sp+Ch] [bp-2Ch]@1
  int v9; // [sp+10h] [bp-28h]@1
  int v10; // [sp+14h] [bp-24h]@1
  int v11; // [sp+18h] [bp-20h]@1
  int v12; // [sp+1Ch] [bp-1Ch]@1
  int v13; // [sp+20h] [bp-18h]@1
  int v14; // [sp+24h] [bp-14h]@1
  int v15; // [sp+28h] [bp-10h]@1
  int v16; // [sp+2Ch] [bp-Ch]@1
  int v17; // [sp+30h] [bp-8h]@1
  int v18; // [sp+34h] [bp-4h]@1

  v7 = 184;
  v8 = 200;
  v9 = 208;
  v10 = 216;
  v11 = 208;
  v12 = 200;
  v13 = 232;
  v14 = 216;
  v15 = 232;
  v16 = 200;
  v17 = 256;
  v18 = 216;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 32) = *(_DWORD *)(a1 + 8);
      *(_DWORD *)(a1 + 36) = *(_DWORD *)(a1 + 12);
      *(_DWORD *)(a1 + 140) = 0x2000;
      *(_DWORD *)(a1 + 148) = 4096;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( !*(_DWORD *)(a1 + 76)
        && Quote_X_Position < *(_DWORD *)(a1 + 8)
        && Quote_X_Position > *(_DWORD *)(a1 + 8) - 98304
        && Quote_Y_Position > *(_DWORD *)(a1 + 12) - 2048
        && Quote_Y_Position < *(_DWORD *)(a1 + 12) + 4096 )
      {
        *(_DWORD *)(a1 + 116) = 10;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 2;
      }
      if ( *(_DWORD *)(a1 + 76) == 2
        && Quote_X_Position > *(_DWORD *)(a1 + 8)
        && Quote_X_Position < *(_DWORD *)(a1 + 8) + 98304
        && Quote_Y_Position > *(_DWORD *)(a1 + 12) - 2048
        && Quote_Y_Position < *(_DWORD *)(a1 + 12) + 4096 )
      {
        *(_DWORD *)(a1 + 116) = 10;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 2;
      }
      break;
    case 0xA:
      *(_DWORD *)(a1 + 164) = 127;
      if ( *(_DWORD *)(a1 + 76) )
        *(_DWORD *)(a1 + 8) += 3072;
      else
        *(_DWORD *)(a1 + 8) -= 3072;
      if ( ++*(_DWORD *)(a1 + 120) == 8 )
      {
        *(_DWORD *)(a1 + 116) = 20;
        *(_DWORD *)(a1 + 120) = 0;
        for ( i = 0; i < 4; ++i )
        {
          v1 = *(_DWORD *)(a1 + 12) + (RNG_Range(-8, 8) << 9);
          v2 = RNG_Range(-16, 16);
          NPC_Create(4, *(_DWORD *)(a1 + 8) + (v2 << 9), v1, 0, 0, 0, 0, 256);
          Play_Sound_Effect(12, 1);
        }
      }
      break;
    case 0x14:
      *(_DWORD *)(a1 + 164) = 0;
      if ( ++*(_DWORD *)(a1 + 120) > 50 )
      {
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 116) = 30;
      }
      break;
    case 0x1E:
      *(_DWORD *)(a1 + 164) = 0;
      *(_DWORD *)(a1 + 104) = 1;
      if ( ++*(_DWORD *)(a1 + 120) == 12 )
      {
        *(_DWORD *)(a1 + 116) = 1;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 0;
      }
      if ( *(_DWORD *)(a1 + 76) )
        *(_DWORD *)(a1 + 8) -= 2048;
      else
        *(_DWORD *)(a1 + 8) += 2048;
      break;
    default:
      break;
  }
  if ( *(_DWORD *)(a1 + 76) || Quote_X_Position >= *(_DWORD *)(a1 + 8) )
  {
    if ( *(_DWORD *)(a1 + 76) != 2 || Quote_X_Position <= *(_DWORD *)(a1 + 8) )
      *(_DWORD *)(a1 + 132) = 4096;
    else
      *(_DWORD *)(a1 + 132) = 0x2000;
  }
  else
  {
    *(_DWORD *)(a1 + 132) = 0x2000;
  }
  v3 = &v7 + 4 * *(_DWORD *)(a1 + 104);
  v4 = a1 + 84;
  *(_DWORD *)v4 = *v3;
  *(_DWORD *)(v4 + 4) = v3[1];
  result = v3[2];
  *(_DWORD *)(v4 + 8) = result;
  *(_DWORD *)(v4 + 12) = v3[3];
  return result;
}

//----- (00454DF0) --------------------------------------------------------
int __cdecl NPC239(int a1)
{
  int result; // eax@6

  if ( !*(_DWORD *)(a1 + 116) )
  {
    *(_DWORD *)(a1 + 116) = 1;
    if ( *(_DWORD *)(a1 + 76) )
    {
      *(_DWORD *)(a1 + 140) = 12288;
      *(_DWORD *)(a1 + 148) = 12288;
      *(_DWORD *)(a1 + 144) = 4096;
      *(_DWORD *)(a1 + 148) = 12288;
    }
    else
    {
      *(_DWORD *)(a1 + 8) += 4096;
      *(_DWORD *)(a1 + 12) += 0x2000;
    }
  }
  if ( *(_DWORD *)(a1 + 76) )
  {
    result = a1 + 84;
    *(_DWORD *)result = 96;
    *(_DWORD *)(result + 4) = 112;
    *(_DWORD *)(result + 8) = 144;
    *(_DWORD *)(result + 12) = 144;
  }
  else
  {
    result = a1 + 84;
    *(_DWORD *)result = 192;
    *(_DWORD *)(result + 4) = 48;
    *(_DWORD *)(result + 8) = 256;
    *(_DWORD *)(result + 12) = 80;
  }
  return result;
}

//----- (00454F00) --------------------------------------------------------
int __cdecl NPC240(int a1)
{
  int *v1; // eax@32
  int v2; // ecx@32
  int result; // eax@32
  int *v4; // eax@33
  int v5; // ecx@33
  int v6; // [sp+4h] [bp-C0h]@1
  int v7; // [sp+8h] [bp-BCh]@1
  int v8; // [sp+Ch] [bp-B8h]@1
  int v9; // [sp+10h] [bp-B4h]@1
  int v10; // [sp+14h] [bp-B0h]@1
  int v11; // [sp+18h] [bp-ACh]@1
  int v12; // [sp+1Ch] [bp-A8h]@1
  int v13; // [sp+20h] [bp-A4h]@1
  int v14; // [sp+24h] [bp-A0h]@1
  int v15; // [sp+28h] [bp-9Ch]@1
  int v16; // [sp+2Ch] [bp-98h]@1
  int v17; // [sp+30h] [bp-94h]@1
  int v18; // [sp+34h] [bp-90h]@1
  int v19; // [sp+38h] [bp-8Ch]@1
  int v20; // [sp+3Ch] [bp-88h]@1
  int v21; // [sp+40h] [bp-84h]@1
  int v22; // [sp+44h] [bp-80h]@1
  int v23; // [sp+48h] [bp-7Ch]@1
  int v24; // [sp+4Ch] [bp-78h]@1
  int v25; // [sp+50h] [bp-74h]@1
  int v26; // [sp+54h] [bp-70h]@1
  int v27; // [sp+58h] [bp-6Ch]@1
  int v28; // [sp+5Ch] [bp-68h]@1
  int v29; // [sp+60h] [bp-64h]@1
  int v30; // [sp+64h] [bp-60h]@1
  int v31; // [sp+68h] [bp-5Ch]@1
  int v32; // [sp+6Ch] [bp-58h]@1
  int v33; // [sp+70h] [bp-54h]@1
  int v34; // [sp+74h] [bp-50h]@1
  int v35; // [sp+78h] [bp-4Ch]@1
  int v36; // [sp+7Ch] [bp-48h]@1
  int v37; // [sp+80h] [bp-44h]@1
  int v38; // [sp+84h] [bp-40h]@1
  int v39; // [sp+88h] [bp-3Ch]@1
  int v40; // [sp+8Ch] [bp-38h]@1
  int v41; // [sp+90h] [bp-34h]@1
  int v42; // [sp+94h] [bp-30h]@1
  int v43; // [sp+98h] [bp-2Ch]@1
  int v44; // [sp+9Ch] [bp-28h]@1
  int v45; // [sp+A0h] [bp-24h]@1
  int v46; // [sp+A4h] [bp-20h]@1
  int v47; // [sp+A8h] [bp-1Ch]@1
  int v48; // [sp+ACh] [bp-18h]@1
  int v49; // [sp+B0h] [bp-14h]@1
  int v50; // [sp+B4h] [bp-10h]@1
  int v51; // [sp+B8h] [bp-Ch]@1
  int v52; // [sp+BCh] [bp-8h]@1
  int v53; // [sp+C0h] [bp-4h]@1

  v30 = 160;
  v31 = 64;
  v32 = 176;
  v33 = 80;
  v34 = 176;
  v35 = 64;
  v36 = 192;
  v37 = 80;
  v38 = 192;
  v39 = 64;
  v40 = 208;
  v41 = 80;
  v42 = 160;
  v43 = 64;
  v44 = 176;
  v45 = 80;
  v46 = 208;
  v47 = 64;
  v48 = 224;
  v49 = 80;
  v50 = 160;
  v51 = 64;
  v52 = 176;
  v53 = 80;
  v6 = 160;
  v7 = 80;
  v8 = 176;
  v9 = 96;
  v10 = 176;
  v11 = 80;
  v12 = 192;
  v13 = 96;
  v14 = 192;
  v15 = 80;
  v16 = 208;
  v17 = 96;
  v18 = 160;
  v19 = 80;
  v20 = 176;
  v21 = 96;
  v22 = 208;
  v23 = 80;
  v24 = 224;
  v25 = 96;
  v26 = 160;
  v27 = 80;
  v28 = 176;
  v29 = 96;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 100) = 0;
      *(_DWORD *)(a1 + 16) = 0;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( RNG_Range(0, 60) == 1 )
      {
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 1;
      }
      if ( RNG_Range(0, 60) == 1 )
      {
        *(_DWORD *)(a1 + 116) = 10;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 1;
      }
      break;
    case 2:
      if ( ++*(_DWORD *)(a1 + 120) > 8 )
      {
        *(_DWORD *)(a1 + 116) = 1;
        *(_DWORD *)(a1 + 104) = 0;
      }
      break;
    case 0xA:
      *(_DWORD *)(a1 + 116) = 11;
      *(_DWORD *)(a1 + 120) = RNG_Range(0, 16);
      *(_DWORD *)(a1 + 104) = 2;
      *(_DWORD *)(a1 + 100) = 0;
      if ( RNG_Range(0, 9) % 2 )
        *(_DWORD *)(a1 + 76) = 0;
      else
        *(_DWORD *)(a1 + 76) = 2;
      goto LABEL_14;
    case 0xB:
LABEL_14:
      if ( *(_DWORD *)(a1 + 76) || !(*(_DWORD *)(a1 + 4) & 1) )
      {
        if ( *(_DWORD *)(a1 + 76) == 2 && *(_DWORD *)(a1 + 4) & 4 )
          *(_DWORD *)(a1 + 76) = 0;
      }
      else
      {
        *(_DWORD *)(a1 + 76) = 2;
      }
      if ( *(_DWORD *)(a1 + 76) )
        *(_DWORD *)(a1 + 16) = 512;
      else
        *(_DWORD *)(a1 + 16) = -512;
      if ( ++*(_DWORD *)(a1 + 100) > 4 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 5 )
        *(_DWORD *)(a1 + 104) = 2;
      if ( ++*(_DWORD *)(a1 + 120) > 32 )
        *(_DWORD *)(a1 + 116) = 0;
      break;
    default:
      break;
  }
  *(_DWORD *)(a1 + 20) += 32;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v6 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    *(_DWORD *)(v5 + 8) = v4[2];
    result = v4[3];
    *(_DWORD *)(v5 + 12) = result;
  }
  else
  {
    v1 = &v30 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    *(_DWORD *)(v2 + 8) = v1[2];
    result = v1[3];
    *(_DWORD *)(v2 + 12) = result;
  }
  return result;
}

//----- (00455370) --------------------------------------------------------
int __cdecl NPC241(int a1)
{
  int *v1; // eax@34
  int v2; // ecx@34
  int result; // eax@34
  int *v4; // eax@35
  int v5; // ecx@35
  int v6; // [sp+4h] [bp-60h]@1
  int v7; // [sp+8h] [bp-5Ch]@1
  int v8; // [sp+Ch] [bp-58h]@1
  int v9; // [sp+10h] [bp-54h]@1
  int v10; // [sp+14h] [bp-50h]@1
  int v11; // [sp+18h] [bp-4Ch]@1
  int v12; // [sp+1Ch] [bp-48h]@1
  int v13; // [sp+20h] [bp-44h]@1
  int v14; // [sp+24h] [bp-40h]@1
  int v15; // [sp+28h] [bp-3Ch]@1
  int v16; // [sp+2Ch] [bp-38h]@1
  int v17; // [sp+30h] [bp-34h]@1
  int v18; // [sp+34h] [bp-30h]@1
  int v19; // [sp+38h] [bp-2Ch]@1
  int v20; // [sp+3Ch] [bp-28h]@1
  int v21; // [sp+40h] [bp-24h]@1
  int v22; // [sp+44h] [bp-20h]@1
  int v23; // [sp+48h] [bp-1Ch]@1
  int v24; // [sp+4Ch] [bp-18h]@1
  int v25; // [sp+50h] [bp-14h]@1
  int v26; // [sp+54h] [bp-10h]@1
  int v27; // [sp+58h] [bp-Ch]@1
  int v28; // [sp+5Ch] [bp-8h]@1
  int v29; // [sp+60h] [bp-4h]@1

  v18 = 0;
  v19 = 0;
  v20 = 16;
  v21 = 16;
  v22 = 16;
  v23 = 0;
  v24 = 32;
  v25 = 16;
  v26 = 32;
  v27 = 0;
  v28 = 48;
  v29 = 16;
  v6 = 0;
  v7 = 16;
  v8 = 16;
  v9 = 32;
  v10 = 16;
  v11 = 16;
  v12 = 32;
  v13 = 32;
  v14 = 32;
  v15 = 16;
  v16 = 48;
  v17 = 32;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 12) += 1536;
      *(_DWORD *)(a1 + 116) = 1;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
        *(_DWORD *)(a1 + 76) = 2;
      else
        *(_DWORD *)(a1 + 76) = 0;
      if ( *(_DWORD *)(a1 + 120) < 8
        || *(_DWORD *)(a1 + 8) - 73728 >= Quote_X_Position
        || *(_DWORD *)(a1 + 8) + 73728 <= Quote_X_Position
        || *(_DWORD *)(a1 + 12) - 40960 >= Quote_Y_Position
        || *(_DWORD *)(a1 + 12) + 40960 <= Quote_Y_Position )
      {
        if ( *(_DWORD *)(a1 + 120) < 8 )
          ++*(_DWORD *)(a1 + 120);
        *(_DWORD *)(a1 + 104) = 0;
      }
      else
      {
        *(_DWORD *)(a1 + 104) = 1;
      }
      if ( *(_BYTE *)(a1 + 156) )
      {
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 104) = 0;
        *(_DWORD *)(a1 + 120) = 0;
      }
      if ( *(_DWORD *)(a1 + 120) >= 8
        && *(_DWORD *)(a1 + 8) - 49152 < Quote_X_Position
        && *(_DWORD *)(a1 + 8) + 49152 > Quote_X_Position
        && *(_DWORD *)(a1 + 12) - 40960 < Quote_Y_Position
        && *(_DWORD *)(a1 + 12) + 49152 > Quote_Y_Position )
      {
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 104) = 0;
        *(_DWORD *)(a1 + 120) = 0;
      }
      break;
    case 2:
      if ( ++*(_DWORD *)(a1 + 120) > 8 )
      {
        *(_DWORD *)(a1 + 116) = 3;
        *(_DWORD *)(a1 + 104) = 2;
        *(_DWORD *)(a1 + 20) = -1535;
        Play_Sound_Effect(30, 1);
        if ( *(_DWORD *)(a1 + 76) )
          *(_DWORD *)(a1 + 16) = 512;
        else
          *(_DWORD *)(a1 + 16) = -512;
      }
      break;
    case 3:
      if ( *(_DWORD *)(a1 + 4) & 8 )
      {
        *(_DWORD *)(a1 + 16) = 0;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 0;
        *(_DWORD *)(a1 + 116) = 1;
        Play_Sound_Effect(23, 1);
      }
      break;
    default:
      break;
  }
  *(_DWORD *)(a1 + 20) += 85;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v6 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    *(_DWORD *)(v5 + 8) = v4[2];
    result = v4[3];
    *(_DWORD *)(v5 + 12) = result;
  }
  else
  {
    v1 = &v18 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    *(_DWORD *)(v2 + 8) = v1[2];
    result = v1[3];
    *(_DWORD *)(v2 + 12) = result;
  }
  return result;
}

//----- (00455710) --------------------------------------------------------
int __cdecl NPC242(void *a1)
{
  int result; // eax@3
  int *v2; // eax@28
  char *v3; // ecx@28
  int *v4; // eax@29
  char *v5; // ecx@29
  int v6; // [sp+0h] [bp-84h]@4
  int v7; // [sp+4h] [bp-80h]@23
  int v8; // [sp+8h] [bp-7Ch]@23
  int v9; // [sp+Ch] [bp-78h]@23
  int v10; // [sp+10h] [bp-74h]@23
  int v11; // [sp+14h] [bp-70h]@23
  int v12; // [sp+18h] [bp-6Ch]@23
  int v13; // [sp+1Ch] [bp-68h]@23
  int v14; // [sp+20h] [bp-64h]@23
  int v15; // [sp+24h] [bp-60h]@23
  int v16; // [sp+28h] [bp-5Ch]@23
  int v17; // [sp+2Ch] [bp-58h]@23
  int v18; // [sp+30h] [bp-54h]@23
  int v19; // [sp+34h] [bp-50h]@23
  int v20; // [sp+38h] [bp-4Ch]@23
  int v21; // [sp+3Ch] [bp-48h]@23
  int v22; // [sp+40h] [bp-44h]@23
  int v23; // [sp+44h] [bp-40h]@23
  int v24; // [sp+48h] [bp-3Ch]@23
  int v25; // [sp+4Ch] [bp-38h]@23
  int v26; // [sp+50h] [bp-34h]@23
  int v27; // [sp+54h] [bp-30h]@23
  int v28; // [sp+58h] [bp-2Ch]@23
  int v29; // [sp+5Ch] [bp-28h]@23
  int v30; // [sp+60h] [bp-24h]@23
  int v31; // [sp+64h] [bp-20h]@23
  int v32; // [sp+68h] [bp-1Ch]@23
  int v33; // [sp+6Ch] [bp-18h]@23
  int v34; // [sp+70h] [bp-14h]@23
  int v35; // [sp+74h] [bp-10h]@23
  int v36; // [sp+78h] [bp-Ch]@23
  int v37; // [sp+7Ch] [bp-8h]@23
  int v38; // [sp+80h] [bp-4h]@23

  if ( *((_DWORD *)a1 + 2) < 0 || *((_DWORD *)a1 + 2) > *(signed __int16 *)&word_49E586 << 13 )
    return sub_46F760(a1);
  v6 = *((_DWORD *)a1 + 29);
  if ( v6 )
  {
    if ( v6 != 1 )
    {
      if ( v6 != 2 )
        goto LABEL_23;
LABEL_12:
      if ( *((_DWORD *)a1 + 19) )
        *((_DWORD *)a1 + 4) = 256;
      else
        *((_DWORD *)a1 + 4) = -256;
      if ( *((_DWORD *)a1 + 9) < *((_DWORD *)a1 + 3) )
        *((_DWORD *)a1 + 5) -= 16;
      if ( *((_DWORD *)a1 + 9) > *((_DWORD *)a1 + 3) )
        *((_DWORD *)a1 + 5) += 16;
      if ( *((_DWORD *)a1 + 5) > 768 )
        *((_DWORD *)a1 + 5) = 768;
      if ( *((_DWORD *)a1 + 5) < -768 )
        *((_DWORD *)a1 + 5) = -768;
      goto LABEL_23;
    }
  }
  else
  {
    *((_DWORD *)a1 + 29) = 1;
    *((_DWORD *)a1 + 8) = *((_DWORD *)a1 + 2);
    *((_DWORD *)a1 + 9) = *((_DWORD *)a1 + 3);
    *((_DWORD *)a1 + 30) = RNG_Range(0, 50);
  }
  if ( !*((_DWORD *)a1 + 30) )
  {
    *((_DWORD *)a1 + 29) = 2;
    *((_DWORD *)a1 + 5) = 1024;
    goto LABEL_12;
  }
  --*((_DWORD *)a1 + 30);
LABEL_23:
  *((_DWORD *)a1 + 2) += *((_DWORD *)a1 + 4);
  *((_DWORD *)a1 + 3) += *((_DWORD *)a1 + 5);
  v23 = 32;
  v24 = 32;
  v25 = 48;
  v26 = 48;
  v27 = 48;
  v28 = 32;
  v29 = 64;
  v30 = 48;
  v31 = 64;
  v32 = 32;
  v33 = 80;
  v34 = 48;
  v35 = 80;
  v36 = 32;
  v37 = 96;
  v38 = 48;
  v7 = 32;
  v8 = 48;
  v9 = 48;
  v10 = 64;
  v11 = 48;
  v12 = 48;
  v13 = 64;
  v14 = 64;
  v15 = 64;
  v16 = 48;
  v17 = 80;
  v18 = 64;
  v19 = 80;
  v20 = 48;
  v21 = 96;
  v22 = 64;
  if ( ++*((_DWORD *)a1 + 25) > 1 )
  {
    *((_DWORD *)a1 + 25) = 0;
    ++*((_DWORD *)a1 + 26);
  }
  if ( *((_DWORD *)a1 + 26) > 2 )
    *((_DWORD *)a1 + 26) = 0;
  if ( *((_DWORD *)a1 + 19) )
  {
    v4 = &v7 + 4 * *((_DWORD *)a1 + 26);
    v5 = (char *)a1 + 84;
    *(_DWORD *)v5 = *v4;
    *((_DWORD *)v5 + 1) = v4[1];
    *((_DWORD *)v5 + 2) = v4[2];
    result = v4[3];
    *((_DWORD *)v5 + 3) = result;
  }
  else
  {
    v2 = &v23 + 4 * *((_DWORD *)a1 + 26);
    v3 = (char *)a1 + 84;
    *(_DWORD *)v3 = *v2;
    *((_DWORD *)v3 + 1) = v2[1];
    *((_DWORD *)v3 + 2) = v2[2];
    result = v2[3];
    *((_DWORD *)v3 + 3) = result;
  }
  return result;
}

//----- (00455A10) --------------------------------------------------------
int __cdecl NPC243(int a1)
{
  int result; // eax@1
  int v2; // ST14_4@7
  int v3; // eax@7
  int v4; // [sp+0h] [bp-4h]@1

  result = a1;
  v4 = *(_DWORD *)(a1 + 116);
  if ( v4 )
  {
    if ( v4 != 1 )
      return result;
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 120) = RNG_Range(0, 500);
  }
  if ( *(_DWORD *)(a1 + 120) )
  {
    result = a1;
    --*(_DWORD *)(a1 + 120);
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 0;
    v2 = *(_DWORD *)(a1 + 76);
    v3 = RNG_Range(-32, 32);
    result = NPC_Create(242, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12) + (v3 << 9), 0, 0, v2, 0, 256);
  }
  return result;
}

//----- (00455AB0) --------------------------------------------------------
signed int __cdecl NPC244(signed int a1)
{
  signed int result; // eax@15
  int v2; // ecx@18
  signed int v3; // [sp+0h] [bp-18h]@1
  signed int i; // [sp+4h] [bp-14h]@7

  *(_DWORD *)(a1 + 20) += 64;
  v3 = 0;
  if ( *(_DWORD *)(a1 + 4) & 0xFF )
    v3 = 1;
  if ( *(_DWORD *)(a1 + 120) > 10 && *(_DWORD *)(a1 + 4) & 0x100 )
    v3 = 1;
  if ( v3 )
  {
    for ( i = 0; i < 3; ++i )
      Create_Animated_Effect(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12) + 2048, 1, 2);
    if ( *(_DWORD *)(a1 + 8) > Quote_X_Position - 0x20000
      && *(_DWORD *)(a1 + 8) < Quote_X_Position + 0x20000
      && *(_DWORD *)(a1 + 12) > Quote_Y_Position - 81920
      && *(_DWORD *)(a1 + 12) < Quote_Y_Position + 81920 )
    {
      Play_Sound_Effect(21, 1);
    }
    result = a1;
    *(_BYTE *)a1 = 0;
  }
  else
  {
    if ( *(_DWORD *)(a1 + 20) > 1535 )
      *(_DWORD *)(a1 + 20) = 1535;
    *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
    v2 = a1 + 84;
    *(_DWORD *)v2 = 96;
    *(_DWORD *)(v2 + 4) = 0;
    *(_DWORD *)(v2 + 8) = 104;
    result = 16;
    *(_DWORD *)(v2 + 12) = 16;
  }
  return result;
}

//----- (00455C10) --------------------------------------------------------
int __cdecl NPC245(int a1)
{
  int result; // eax@7
  int *v2; // ecx@16
  int v3; // edx@16
  int v4; // [sp+0h] [bp-44h]@1
  int v5; // [sp+4h] [bp-40h]@1
  int v6; // [sp+8h] [bp-3Ch]@1
  int v7; // [sp+Ch] [bp-38h]@1
  int v8; // [sp+10h] [bp-34h]@1
  int v9; // [sp+14h] [bp-30h]@1
  int v10; // [sp+18h] [bp-2Ch]@1
  int v11; // [sp+1Ch] [bp-28h]@1
  int v12; // [sp+20h] [bp-24h]@1
  int v13; // [sp+24h] [bp-20h]@1
  int v14; // [sp+28h] [bp-1Ch]@1
  int v15; // [sp+2Ch] [bp-18h]@1
  int v16; // [sp+30h] [bp-14h]@1
  int v17; // [sp+34h] [bp-10h]@1
  int v18; // [sp+38h] [bp-Ch]@1
  int v19; // [sp+3Ch] [bp-8h]@1
  int v20; // [sp+40h] [bp-4h]@1

  v5 = 0;
  v6 = 0;
  v7 = 0;
  v8 = 0;
  v9 = 104;
  v10 = 0;
  v11 = 112;
  v12 = 16;
  v13 = 112;
  v14 = 0;
  v15 = 120;
  v16 = 16;
  v17 = 120;
  v18 = 0;
  v19 = 128;
  v20 = 16;
  v4 = *(_DWORD *)(a1 + 116);
  if ( v4 )
  {
    if ( v4 != 1 )
    {
      if ( v4 == 10 )
      {
        if ( ++*(_DWORD *)(a1 + 100) > 10 )
        {
          *(_DWORD *)(a1 + 100) = 0;
          ++*(_DWORD *)(a1 + 104);
        }
        if ( *(_DWORD *)(a1 + 104) > 3 )
        {
          *(_DWORD *)(a1 + 104) = 0;
          *(_DWORD *)(a1 + 116) = 1;
          *(_DWORD *)(a1 + 120) = *(_DWORD *)(a1 + 44);
          NPC_Create(244, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 0, 0, 0, 0, 256);
        }
      }
      goto LABEL_13;
    }
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 32) = *(_DWORD *)(a1 + 8);
    *(_DWORD *)(a1 + 120) = *(_DWORD *)(a1 + 48);
  }
  *(_DWORD *)(a1 + 104) = 0;
  if ( *(_DWORD *)(a1 + 120) )
  {
    result = *(_DWORD *)(a1 + 120) - 1;
    *(_DWORD *)(a1 + 120) = result;
    return result;
  }
  *(_DWORD *)(a1 + 116) = 10;
  *(_DWORD *)(a1 + 100) = 0;
LABEL_13:
  if ( *(_DWORD *)(a1 + 100) / 2 % 2 )
    *(_DWORD *)(a1 + 8) = *(_DWORD *)(a1 + 32);
  else
    *(_DWORD *)(a1 + 8) = *(_DWORD *)(a1 + 32) + 512;
  v2 = &v5 + 4 * *(_DWORD *)(a1 + 104);
  v3 = a1 + 84;
  *(_DWORD *)v3 = *v2;
  *(_DWORD *)(v3 + 4) = v2[1];
  result = v2[2];
  *(_DWORD *)(v3 + 8) = result;
  *(_DWORD *)(v3 + 12) = v2[3];
  return result;
}

//----- (00455E00) --------------------------------------------------------
int __cdecl NPC246(int a1)
{
  int v1; // ST10_4@23
  int v2; // eax@23
  int *v3; // eax@30
  int v4; // ecx@30
  int result; // eax@30
  signed int i; // [sp+4h] [bp-34h]@21
  int v7; // [sp+8h] [bp-30h]@1
  int v8; // [sp+Ch] [bp-2Ch]@1
  int v9; // [sp+10h] [bp-28h]@1
  int v10; // [sp+14h] [bp-24h]@1
  int v11; // [sp+18h] [bp-20h]@1
  int v12; // [sp+1Ch] [bp-1Ch]@1
  int v13; // [sp+20h] [bp-18h]@1
  int v14; // [sp+24h] [bp-14h]@1
  int v15; // [sp+28h] [bp-10h]@1
  int v16; // [sp+2Ch] [bp-Ch]@1
  int v17; // [sp+30h] [bp-8h]@1
  int v18; // [sp+34h] [bp-4h]@1

  v7 = 144;
  v8 = 112;
  v9 = 160;
  v10 = 136;
  v11 = 160;
  v12 = 112;
  v13 = 176;
  v14 = 136;
  v15 = 176;
  v16 = 112;
  v17 = 192;
  v18 = 136;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 12) -= 2048;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( Quote_X_Position < *(_DWORD *)(a1 + 8) + 4096
        && Quote_X_Position > *(_DWORD *)(a1 + 8) - 4096
        && Quote_Y_Position > *(_DWORD *)(a1 + 12) + 4096
        && Quote_Y_Position < *(_DWORD *)(a1 + 12) + 0x10000 )
      {
        *(_DWORD *)(a1 + 116) = 5;
      }
      break;
    case 5:
      if ( !(*(_DWORD *)(a1 + 4) & 8) )
      {
        *(_DWORD *)(a1 + 116) = 10;
        *(_DWORD *)(a1 + 100) = 0;
        *(_DWORD *)(a1 + 104) = 1;
      }
      break;
    case 0xA:
      if ( ++*(_DWORD *)(a1 + 100) > 2 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 2 )
        *(_DWORD *)(a1 + 104) = 2;
      if ( Quote_Y_Position <= *(_DWORD *)(a1 + 12) )
      {
        *(_WORD *)(a1 + 80) |= 0x40u;
        *(_DWORD *)(a1 + 164) = 0;
      }
      else
      {
        *(_WORD *)(a1 + 80) &= 0xFFBFu;
        *(_DWORD *)(a1 + 164) = 127;
      }
      if ( *(_DWORD *)(a1 + 4) & 8 )
      {
        if ( *(_DWORD *)(a1 + 104) > 1 )
        {
          for ( i = 0; i < 4; ++i )
          {
            v1 = RNG_Range(-1536, 0);
            v2 = RNG_Range(-341, 341);
            NPC_Create(4, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), v2, v1, 0, 0, 256);
          }
          Play_Sound_Effect(26, 1);
          sub_40F310(10);
        }
        *(_DWORD *)(a1 + 116) = 20;
        *(_DWORD *)(a1 + 104) = 0;
        *(_DWORD *)(a1 + 100) = 0;
        *(_WORD *)(a1 + 80) |= 0x40u;
        *(_DWORD *)(a1 + 164) = 0;
      }
      break;
    default:
      break;
  }
  if ( *(_DWORD *)(a1 + 116) >= 5 )
  {
    *(_DWORD *)(a1 + 20) += 128;
    if ( *(_DWORD *)(a1 + 20) > 1535 )
      *(_DWORD *)(a1 + 20) = 1535;
    *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  }
  v3 = &v7 + 4 * *(_DWORD *)(a1 + 104);
  v4 = a1 + 84;
  *(_DWORD *)v4 = *v3;
  *(_DWORD *)(v4 + 4) = v3[1];
  *(_DWORD *)(v4 + 8) = v3[2];
  result = v3[3];
  *(_DWORD *)(v4 + 12) = result;
  return result;
}

//----- (00456110) --------------------------------------------------------
int __cdecl NPC247(int a1)
{
  int Y_Velocity; // ST24_4@56
  int *v2; // edx@109
  int result; // eax@109
  int *v4; // edx@110
  signed int v5; // [sp+0h] [bp-138h]@1
  int v6; // [sp+8h] [bp-130h]@1
  int v7; // [sp+Ch] [bp-12Ch]@1
  int v8; // [sp+10h] [bp-128h]@1
  int v9; // [sp+14h] [bp-124h]@1
  int v10; // [sp+18h] [bp-120h]@1
  int v11; // [sp+1Ch] [bp-11Ch]@1
  int v12; // [sp+20h] [bp-118h]@1
  int v13; // [sp+24h] [bp-114h]@1
  int v14; // [sp+28h] [bp-110h]@1
  int v15; // [sp+2Ch] [bp-10Ch]@1
  int v16; // [sp+30h] [bp-108h]@1
  int v17; // [sp+34h] [bp-104h]@1
  int v18; // [sp+38h] [bp-100h]@1
  int v19; // [sp+3Ch] [bp-FCh]@1
  int v20; // [sp+40h] [bp-F8h]@1
  int v21; // [sp+44h] [bp-F4h]@1
  int v22; // [sp+48h] [bp-F0h]@1
  int v23; // [sp+4Ch] [bp-ECh]@1
  int v24; // [sp+50h] [bp-E8h]@1
  int v25; // [sp+54h] [bp-E4h]@1
  int v26; // [sp+58h] [bp-E0h]@1
  int v27; // [sp+5Ch] [bp-DCh]@1
  int v28; // [sp+60h] [bp-D8h]@1
  int v29; // [sp+64h] [bp-D4h]@1
  int v30; // [sp+68h] [bp-D0h]@1
  int v31; // [sp+6Ch] [bp-CCh]@1
  int v32; // [sp+70h] [bp-C8h]@1
  int v33; // [sp+74h] [bp-C4h]@1
  int v34; // [sp+78h] [bp-C0h]@1
  int v35; // [sp+7Ch] [bp-BCh]@1
  int v36; // [sp+80h] [bp-B8h]@1
  int v37; // [sp+84h] [bp-B4h]@1
  int v38; // [sp+88h] [bp-B0h]@1
  int v39; // [sp+8Ch] [bp-ACh]@1
  int v40; // [sp+90h] [bp-A8h]@1
  int v41; // [sp+94h] [bp-A4h]@1
  int X_Velocity; // [sp+9Ch] [bp-9Ch]@56
  int v43; // [sp+A0h] [bp-98h]@1
  int v44; // [sp+A4h] [bp-94h]@1
  int v45; // [sp+A8h] [bp-90h]@1
  int v46; // [sp+ACh] [bp-8Ch]@1
  int v47; // [sp+B0h] [bp-88h]@1
  int v48; // [sp+B4h] [bp-84h]@1
  int v49; // [sp+B8h] [bp-80h]@1
  int v50; // [sp+BCh] [bp-7Ch]@1
  int v51; // [sp+C0h] [bp-78h]@1
  int v52; // [sp+C4h] [bp-74h]@1
  int v53; // [sp+C8h] [bp-70h]@1
  int v54; // [sp+CCh] [bp-6Ch]@1
  int v55; // [sp+D0h] [bp-68h]@1
  int v56; // [sp+D4h] [bp-64h]@1
  int v57; // [sp+D8h] [bp-60h]@1
  int v58; // [sp+DCh] [bp-5Ch]@1
  int v59; // [sp+E0h] [bp-58h]@1
  int v60; // [sp+E4h] [bp-54h]@1
  int v61; // [sp+E8h] [bp-50h]@1
  int v62; // [sp+ECh] [bp-4Ch]@1
  int v63; // [sp+F0h] [bp-48h]@1
  int v64; // [sp+F4h] [bp-44h]@1
  int v65; // [sp+F8h] [bp-40h]@1
  int v66; // [sp+FCh] [bp-3Ch]@1
  int v67; // [sp+100h] [bp-38h]@1
  int v68; // [sp+104h] [bp-34h]@1
  int v69; // [sp+108h] [bp-30h]@1
  int v70; // [sp+10Ch] [bp-2Ch]@1
  int v71; // [sp+110h] [bp-28h]@1
  int v72; // [sp+114h] [bp-24h]@1
  int v73; // [sp+118h] [bp-20h]@1
  int v74; // [sp+11Ch] [bp-1Ch]@1
  int v75; // [sp+120h] [bp-18h]@1
  int v76; // [sp+124h] [bp-14h]@1
  int v77; // [sp+128h] [bp-10h]@1
  int v78; // [sp+12Ch] [bp-Ch]@1
  unsigned __int8 v79; // [sp+137h] [bp-1h]@56

  v43 = 0;
  v44 = 0;
  v45 = 16;
  v46 = 16;
  v47 = 16;
  v48 = 0;
  v49 = 32;
  v50 = 16;
  v51 = 32;
  v52 = 0;
  v53 = 48;
  v54 = 16;
  v55 = 48;
  v56 = 0;
  v57 = 64;
  v58 = 16;
  v59 = 64;
  v60 = 0;
  v61 = 80;
  v62 = 16;
  v63 = 80;
  v64 = 0;
  v65 = 96;
  v66 = 16;
  v67 = 96;
  v68 = 0;
  v69 = 112;
  v70 = 16;
  v71 = 0;
  v72 = 0;
  v73 = 0;
  v74 = 0;
  v75 = 112;
  v76 = 0;
  v77 = 128;
  v78 = 16;
  v6 = 0;
  v7 = 16;
  v8 = 16;
  v9 = 32;
  v10 = 16;
  v11 = 16;
  v12 = 32;
  v13 = 32;
  v14 = 32;
  v15 = 16;
  v16 = 48;
  v17 = 32;
  v18 = 48;
  v19 = 16;
  v20 = 64;
  v21 = 32;
  v22 = 64;
  v23 = 16;
  v24 = 80;
  v25 = 32;
  v26 = 80;
  v27 = 16;
  v28 = 96;
  v29 = 32;
  v30 = 96;
  v31 = 16;
  v32 = 112;
  v33 = 32;
  v34 = 0;
  v35 = 0;
  v36 = 0;
  v37 = 0;
  v38 = 112;
  v39 = 16;
  v40 = 128;
  v41 = 32;
  v5 = *(_DWORD *)(a1 + 116);
  if ( v5 <= 111 )
  {
    if ( v5 == 111 )
    {
LABEL_46:
      if ( ++*(_DWORD *)(a1 + 120) % 2 )
        *(_DWORD *)(a1 + 104) = 5;
      else
        *(_DWORD *)(a1 + 104) = 6;
      if ( *(_DWORD *)(a1 + 120) > 30 )
      {
        *(_DWORD *)(a1 + 120) = 0;
        if ( ++*(_DWORD *)(a1 + 108) % 3 )
          *(_DWORD *)(a1 + 116) = 112;
        else
          *(_DWORD *)(a1 + 116) = 113;
        *(_DWORD *)(a1 + 104) = 4;
      }
    }
    else
    {
      switch ( v5 )
      {
        case 0:
          *(_DWORD *)(a1 + 116) = 1;
          *(_DWORD *)(a1 + 12) += 3072;
          *(_DWORD *)(a1 + 36) = 0x8000;
          goto LABEL_15;
        case 1:
LABEL_15:
          if ( RNG_Range(0, 120) == 10 )
          {
            *(_DWORD *)(a1 + 116) = 2;
            *(_DWORD *)(a1 + 120) = 0;
            *(_DWORD *)(a1 + 104) = 1;
          }
          goto LABEL_100;
        case 2:
          if ( ++*(_DWORD *)(a1 + 120) > 8 )
          {
            *(_DWORD *)(a1 + 116) = 1;
            *(_DWORD *)(a1 + 104) = 0;
          }
          goto LABEL_100;
        case 20:
          *(_DWORD *)(a1 + 16) = 0;
          *(_DWORD *)(a1 + 20) += 64;
          if ( *(_DWORD *)(a1 + 4) & 8 )
          {
            *(_DWORD *)(a1 + 116) = 21;
            *(_DWORD *)(a1 + 104) = 2;
          }
          goto LABEL_100;
        case 21:
          if ( RNG_Range(0, 120) == 10 )
          {
            *(_DWORD *)(a1 + 116) = 22;
            *(_DWORD *)(a1 + 120) = 0;
            *(_DWORD *)(a1 + 104) = 3;
          }
          goto LABEL_100;
        case 22:
          if ( ++*(_DWORD *)(a1 + 120) > 8 )
          {
            *(_DWORD *)(a1 + 116) = 21;
            *(_DWORD *)(a1 + 104) = 2;
          }
          goto LABEL_100;
        case 100:
          *(_DWORD *)(a1 + 116) = 101;
          *(_DWORD *)(a1 + 120) = 0;
          *(_DWORD *)(a1 + 104) = 0;
          *(_DWORD *)(a1 + 16) = 0;
          *(_WORD *)(a1 + 80) |= 0x20u;
          *(_DWORD *)(a1 + 112) = *(_DWORD *)(a1 + 64);
          goto LABEL_31;
        case 101:
LABEL_31:
          if ( Quote_X_Position >= *(_DWORD *)(a1 + 8) )
            *(_DWORD *)(a1 + 76) = 2;
          else
            *(_DWORD *)(a1 + 76) = 0;
          if ( *(_DWORD *)(a1 + 12) >= *(_DWORD *)(a1 + 36) )
            *(_DWORD *)(a1 + 20) -= 32;
          else
            *(_DWORD *)(a1 + 20) += 32;
          if ( *(_DWORD *)(a1 + 20) < -512 )
            *(_DWORD *)(a1 + 20) = -512;
          if ( *(_DWORD *)(a1 + 20) > 512 )
            *(_DWORD *)(a1 + 20) = 512;
          if ( ++*(_DWORD *)(a1 + 120) > 200 || *(_DWORD *)(a1 + 64) <= *(_DWORD *)(a1 + 112) - 80 )
          {
            *(_DWORD *)(a1 + 120) = 0;
            *(_DWORD *)(a1 + 116) = 110;
          }
          break;
        case 110:
          *(_DWORD *)(a1 + 116) = 111;
          *(_DWORD *)(a1 + 120) = 0;
          *(_DWORD *)(a1 + 16) = 0;
          *(_DWORD *)(a1 + 20) = 0;
          *(_WORD *)(a1 + 80) &= 0xFFDFu;
          goto LABEL_46;
        default:
          goto LABEL_100;
      }
    }
    goto LABEL_100;
  }
  if ( v5 <= 160 )
  {
    if ( v5 != 160 )
    {
      switch ( v5 )
      {
        case 112:
          if ( !(++*(_DWORD *)(a1 + 120) % 6) )
          {
            v79 = Angle_Calculator(*(_DWORD *)(a1 + 8) - Quote_X_Position, *(_DWORD *)(a1 + 12) - Quote_Y_Position);
            v79 += RNG_Range(-4, 4);
            Y_Velocity = 4 * SIN_function(v79);
            X_Velocity = 4 * COS_function(v79);
            NPC_Create(248, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12) + 2048, X_Velocity, Y_Velocity, 0, 0, 256);
            Play_Sound_Effect(34, 1);
          }
          if ( *(_DWORD *)(a1 + 120) > 30 )
          {
            *(_DWORD *)(a1 + 120) = 0;
            *(_DWORD *)(a1 + 116) = 150;
          }
          break;
        case 113:
          if ( ++*(_DWORD *)(a1 + 120) == 10 )
            NPC_Create(279, Quote_X_Position, Quote_Y_Position - 0x8000, 0, 0, 1, 0, 256);
          if ( *(_DWORD *)(a1 + 120) > 30 )
          {
            *(_DWORD *)(a1 + 120) = 0;
            *(_DWORD *)(a1 + 116) = 150;
          }
          break;
        case 150:
          *(_DWORD *)(a1 + 116) = 151;
          *(_DWORD *)(a1 + 120) = 0;
          *(_DWORD *)(a1 + 104) = 7;
          NPC_Create(249, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 0, 0, 0, 0, 256);
          NPC_Create(249, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 0, 0, 2, 0, 256);
          *(_DWORD *)(a1 + 32) = RNG_Range(9, 31) << 13;
          *(_DWORD *)(a1 + 36) = RNG_Range(5, 7) << 13;
          Play_Sound_Effect(29, 1);
          goto LABEL_66;
        case 151:
LABEL_66:
          if ( ++*(_DWORD *)(a1 + 120) == 42 )
          {
            NPC_Create(249, *(_DWORD *)(a1 + 32) + 0x2000, *(_DWORD *)(a1 + 36), 0, 0, 0, 0, 256);
            NPC_Create(249, *(_DWORD *)(a1 + 32) - 0x2000, *(_DWORD *)(a1 + 36), 0, 0, 2, 0, 256);
          }
          if ( *(_DWORD *)(a1 + 120) > 50 )
          {
            *(_DWORD *)(a1 + 120) = 0;
            *(_DWORD *)(a1 + 20) = -512;
            *(_WORD *)(a1 + 80) |= 0x20u;
            *(_DWORD *)(a1 + 8) = *(_DWORD *)(a1 + 32);
            *(_DWORD *)(a1 + 12) = *(_DWORD *)(a1 + 36);
            if ( *(_DWORD *)(a1 + 64) < 340 )
            {
              NPC_Create(252, 0, 0, 0, 0, 0, a1, 256);
              NPC_Create(252, 0, 0, 0, 0, 128, a1, 256);
            }
            if ( *(_DWORD *)(a1 + 64) < 180 )
            {
              NPC_Create(252, 0, 0, 0, 0, 64, a1, 256);
              NPC_Create(252, 0, 0, 0, 0, 192, a1, 256);
            }
            if ( Quote_X_Position >= *(_DWORD *)(a1 + 8) - 57344 && Quote_X_Position <= *(_DWORD *)(a1 + 8) + 57344 )
              *(_DWORD *)(a1 + 116) = 100;
            else
              *(_DWORD *)(a1 + 116) = 160;
          }
          break;
        default:
          goto LABEL_100;
      }
      goto LABEL_100;
    }
    *(_DWORD *)(a1 + 116) = 161;
    *(_DWORD *)(a1 + 120) = 0;
    *(_DWORD *)(a1 + 104) = 4;
    if ( Quote_X_Position >= *(_DWORD *)(a1 + 8) )
      *(_DWORD *)(a1 + 76) = 2;
    else
      *(_DWORD *)(a1 + 76) = 0;
    goto LABEL_81;
  }
  if ( v5 <= 1001 )
  {
    if ( v5 != 1001 )
    {
      if ( v5 == 161 )
      {
LABEL_81:
        if ( *(_DWORD *)(a1 + 12) >= *(_DWORD *)(a1 + 36) )
          *(_DWORD *)(a1 + 20) -= 32;
        else
          *(_DWORD *)(a1 + 20) += 32;
        if ( *(_DWORD *)(a1 + 20) < -512 )
          *(_DWORD *)(a1 + 20) = -512;
        if ( *(_DWORD *)(a1 + 20) > 512 )
          *(_DWORD *)(a1 + 20) = 512;
        if ( !(++*(_DWORD *)(a1 + 120) % 24) )
        {
          NPC_Create(250, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12) + 2048, 0, 0, 0, 0, 256);
          Play_Sound_Effect(34, 1);
        }
        if ( *(_DWORD *)(a1 + 120) > 72 )
        {
          *(_DWORD *)(a1 + 120) = 0;
          *(_DWORD *)(a1 + 116) = 100;
        }
        goto LABEL_100;
      }
      if ( v5 != 1000 )
        goto LABEL_100;
      *(_WORD *)(a1 + 80) &= 0xFFDFu;
      *(_DWORD *)(a1 + 116) = 1001;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 104) = 4;
      *(_DWORD *)(a1 + 32) = *(_DWORD *)(a1 + 8);
      *(_DWORD *)(a1 + 36) = *(_DWORD *)(a1 + 12);
      *(_DWORD *)(a1 + 16) = 0;
      *(_DWORD *)(a1 + 20) = 0;
      sub_4702D0(252, 1);
      NPC_Create(4, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 0, 0, 0, 0, 256);
      NPC_Create(4, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 0, 0, 0, 0, 256);
      NPC_Create(4, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 0, 0, 0, 0, 256);
    }
    if ( ++*(_DWORD *)(a1 + 120) / 2 % 2 )
      *(_DWORD *)(a1 + 8) = *(_DWORD *)(a1 + 32) + 512;
    else
      *(_DWORD *)(a1 + 8) = *(_DWORD *)(a1 + 32);
    goto LABEL_100;
  }
  if ( v5 == 1010 )
  {
    *(_DWORD *)(a1 + 20) += 16;
    if ( *(_DWORD *)(a1 + 4) & 8 )
    {
      *(_DWORD *)(a1 + 116) = 1020;
      *(_DWORD *)(a1 + 104) = 8;
    }
  }
LABEL_100:
  if ( *(_DWORD *)(a1 + 16) < -512 )
    *(_DWORD *)(a1 + 16) = -512;
  if ( *(_DWORD *)(a1 + 16) > 512 )
    *(_DWORD *)(a1 + 16) = 512;
  if ( *(_DWORD *)(a1 + 20) < -1024 )
    *(_DWORD *)(a1 + 20) = -1024;
  if ( *(_DWORD *)(a1 + 20) > 1024 )
    *(_DWORD *)(a1 + 20) = 1024;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v6 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v4;
    *(_DWORD *)(result + 4) = v4[1];
    *(_DWORD *)(result + 8) = v4[2];
    *(_DWORD *)(result + 12) = v4[3];
  }
  else
  {
    v2 = &v43 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v2;
    *(_DWORD *)(result + 4) = v2[1];
    *(_DWORD *)(result + 8) = v2[2];
    *(_DWORD *)(result + 12) = v2[3];
  }
  return result;
}

//----- (00456F50) --------------------------------------------------------
int __cdecl NPC248(int a1)
{
  int *v1; // eax@6
  int v2; // ecx@6
  int result; // eax@6
  int v4; // [sp+0h] [bp-30h]@3
  int v5; // [sp+4h] [bp-2Ch]@3
  int v6; // [sp+8h] [bp-28h]@3
  int v7; // [sp+Ch] [bp-24h]@3
  int v8; // [sp+10h] [bp-20h]@3
  int v9; // [sp+14h] [bp-1Ch]@3
  int v10; // [sp+18h] [bp-18h]@3
  int v11; // [sp+1Ch] [bp-14h]@3
  int v12; // [sp+20h] [bp-10h]@3
  int v13; // [sp+24h] [bp-Ch]@3
  int v14; // [sp+28h] [bp-8h]@3
  int v15; // [sp+2Ch] [bp-4h]@3

  if ( *(_DWORD *)(a1 + 4) & 0xFF )
  {
    *(_BYTE *)a1 = 0;
    Create_Animated_Effect(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 2, 0);
  }
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  v4 = 0;
  v5 = 48;
  v6 = 16;
  v7 = 64;
  v8 = 16;
  v9 = 48;
  v10 = 32;
  v11 = 64;
  v12 = 32;
  v13 = 48;
  v14 = 48;
  v15 = 64;
  if ( ++*(_DWORD *)(a1 + 100) > 1 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    if ( ++*(_DWORD *)(a1 + 104) > 2 )
      *(_DWORD *)(a1 + 104) = 0;
  }
  v1 = &v4 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  *(_DWORD *)(v2 + 8) = v1[2];
  *(_DWORD *)(v2 + 12) = v1[3];
  result = a1;
  if ( ++*(_DWORD *)(a1 + 108) > 300 )
  {
    *(_BYTE *)a1 = 0;
    result = Create_Animated_Effect(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 2, 0);
  }
  return result;
}

//----- (004570B0) --------------------------------------------------------
int __cdecl NPC249(int a1)
{
  int v1; // eax@4
  int result; // eax@4
  int v3; // eax@5

  if ( ++*(_DWORD *)(a1 + 120) > 8 )
    *(_BYTE *)a1 = 0;
  if ( *(_DWORD *)(a1 + 76) )
  {
    v3 = a1 + 84;
    *(_DWORD *)v3 = 64;
    *(_DWORD *)(v3 + 4) = 48;
    *(_DWORD *)(v3 + 8) = 80;
    *(_DWORD *)(v3 + 12) = 64;
    result = a1;
    *(_DWORD *)(a1 + 8) += 1024;
  }
  else
  {
    v1 = a1 + 84;
    *(_DWORD *)v1 = 48;
    *(_DWORD *)(v1 + 4) = 48;
    *(_DWORD *)(v1 + 8) = 64;
    *(_DWORD *)(v1 + 12) = 64;
    result = a1;
    *(_DWORD *)(a1 + 8) -= 1024;
  }
  return result;
}

//----- (00457180) --------------------------------------------------------
int __cdecl NPC250(int a1)
{
  int result; // eax@28
  int *v2; // ecx@32
  int v3; // edx@32
  int v4; // [sp+4h] [bp-30h]@1
  int v5; // [sp+8h] [bp-2Ch]@1
  int v6; // [sp+Ch] [bp-28h]@1
  int v7; // [sp+10h] [bp-24h]@1
  int v8; // [sp+14h] [bp-20h]@1
  int v9; // [sp+18h] [bp-1Ch]@1
  int v10; // [sp+1Ch] [bp-18h]@1
  int v11; // [sp+20h] [bp-14h]@1
  int v12; // [sp+24h] [bp-10h]@1
  int v13; // [sp+28h] [bp-Ch]@1
  int v14; // [sp+2Ch] [bp-8h]@1
  int v15; // [sp+30h] [bp-4h]@1

  v4 = 0;
  v5 = 32;
  v6 = 16;
  v7 = 48;
  v8 = 16;
  v9 = 32;
  v10 = 32;
  v11 = 48;
  v12 = 32;
  v13 = 32;
  v14 = 48;
  v15 = 48;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 36) = *(_DWORD *)(a1 + 12);
      *(_DWORD *)(a1 + 16) = 0;
      *(_DWORD *)(a1 + 20) = -512;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( *(_DWORD *)(a1 + 8) >= Quote_X_Position )
        *(_DWORD *)(a1 + 16) -= 16;
      else
        *(_DWORD *)(a1 + 16) += 16;
      if ( *(_DWORD *)(a1 + 12) >= *(_DWORD *)(a1 + 36) )
        *(_DWORD *)(a1 + 20) -= 32;
      else
        *(_DWORD *)(a1 + 20) += 32;
      if ( *(_DWORD *)(a1 + 16) > 512 )
        *(_DWORD *)(a1 + 16) = 512;
      if ( *(_DWORD *)(a1 + 16) < -512 )
        *(_DWORD *)(a1 + 16) = -512;
      if ( *(_DWORD *)(a1 + 20) > 512 )
        *(_DWORD *)(a1 + 20) = 512;
      if ( *(_DWORD *)(a1 + 20) < -512 )
        *(_DWORD *)(a1 + 20) = -512;
      *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
      *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
      if ( ++*(_DWORD *)(a1 + 100) > 2 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 1 )
        *(_DWORD *)(a1 + 104) = 0;
      if ( Quote_X_Position > *(_DWORD *)(a1 + 8) - 4096
        && Quote_X_Position < *(_DWORD *)(a1 + 8) + 4096
        && Quote_Y_Position > *(_DWORD *)(a1 + 12) )
      {
        *(_DWORD *)(a1 + 116) = 10;
      }
      goto LABEL_32;
    case 0xA:
      *(_DWORD *)(a1 + 116) = 11;
      *(_DWORD *)(a1 + 120) = 0;
      goto LABEL_27;
    case 0xB:
LABEL_27:
      if ( ++*(_DWORD *)(a1 + 120) <= 10 )
      {
        if ( *(_DWORD *)(a1 + 120) / 2 % 2 )
          *(_DWORD *)(a1 + 104) = 2;
        else
          *(_DWORD *)(a1 + 104) = 1;
LABEL_32:
        v2 = &v4 + 4 * *(_DWORD *)(a1 + 104);
        v3 = a1 + 84;
        *(_DWORD *)v3 = *v2;
        *(_DWORD *)(v3 + 4) = v2[1];
        result = v2[2];
        *(_DWORD *)(v3 + 8) = result;
        *(_DWORD *)(v3 + 12) = v2[3];
      }
      else
      {
        NPC_Create(251, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 0, 0, 0, 0, 256);
        result = Play_Sound_Effect(101, 1);
        *(_BYTE *)a1 = 0;
      }
      return result;
    default:
      goto LABEL_32;
  }
}

//----- (00457470) --------------------------------------------------------
int __cdecl NPC251(int a1)
{
  int *v1; // ecx@9
  int v2; // edx@9
  int result; // eax@9
  int v4; // [sp+0h] [bp-24h]@1
  int v5; // [sp+4h] [bp-20h]@1
  int v6; // [sp+8h] [bp-1Ch]@1
  int v7; // [sp+Ch] [bp-18h]@1
  int v8; // [sp+10h] [bp-14h]@1
  int v9; // [sp+14h] [bp-10h]@1
  int v10; // [sp+18h] [bp-Ch]@1
  int v11; // [sp+1Ch] [bp-8h]@1
  int v12; // [sp+20h] [bp-4h]@1

  v5 = 80;
  v6 = 32;
  v7 = 96;
  v8 = 64;
  v9 = 96;
  v10 = 32;
  v11 = 112;
  v12 = 64;
  v4 = *(_DWORD *)(a1 + 116);
  if ( v4 )
  {
    if ( v4 != 1 )
      goto LABEL_9;
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 1;
  }
  if ( ++*(_DWORD *)(a1 + 104) > 1 )
    *(_DWORD *)(a1 + 104) = 0;
  *(_DWORD *)(a1 + 12) += 4096;
  if ( *(_DWORD *)(a1 + 4) & 0xFF )
  {
    sub_46F150(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), *(_DWORD *)(a1 + 148), 3);
    *(_BYTE *)a1 = 0;
  }
LABEL_9:
  v1 = &v5 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  result = v1[2];
  *(_DWORD *)(v2 + 8) = result;
  *(_DWORD *)(v2 + 12) = v1[3];
  return result;
}

//----- (00457570) --------------------------------------------------------
int __cdecl NPC252(int a1)
{
  int v1; // esi@5
  int v2; // esi@5
  int *v3; // edx@18
  int result; // eax@18
  int *v5; // edx@19
  int v6; // [sp+8h] [bp-88h]@1
  int v7; // [sp+Ch] [bp-84h]@1
  int v8; // [sp+10h] [bp-80h]@1
  int v9; // [sp+14h] [bp-7Ch]@1
  int v10; // [sp+18h] [bp-78h]@1
  int v11; // [sp+1Ch] [bp-74h]@1
  int v12; // [sp+20h] [bp-70h]@1
  int v13; // [sp+24h] [bp-6Ch]@1
  int v14; // [sp+28h] [bp-68h]@1
  int v15; // [sp+2Ch] [bp-64h]@1
  int v16; // [sp+30h] [bp-60h]@1
  int v17; // [sp+34h] [bp-5Ch]@1
  int v18; // [sp+38h] [bp-58h]@1
  int v19; // [sp+3Ch] [bp-54h]@1
  int v20; // [sp+40h] [bp-50h]@1
  int v21; // [sp+44h] [bp-4Ch]@1
  int v22; // [sp+48h] [bp-48h]@1
  int v23; // [sp+4Ch] [bp-44h]@1
  int v24; // [sp+50h] [bp-40h]@1
  int v25; // [sp+54h] [bp-3Ch]@1
  int v26; // [sp+58h] [bp-38h]@1
  int v27; // [sp+5Ch] [bp-34h]@1
  int v28; // [sp+60h] [bp-30h]@1
  int v29; // [sp+64h] [bp-2Ch]@1
  int v30; // [sp+68h] [bp-28h]@1
  int v31; // [sp+6Ch] [bp-24h]@1
  int v32; // [sp+70h] [bp-20h]@1
  int v33; // [sp+74h] [bp-1Ch]@1
  int v34; // [sp+78h] [bp-18h]@1
  int v35; // [sp+7Ch] [bp-14h]@1
  int v36; // [sp+80h] [bp-10h]@1
  int v37; // [sp+84h] [bp-Ch]@1
  unsigned __int8 v38; // [sp+8Fh] [bp-1h]@3

  v22 = 48;
  v23 = 32;
  v24 = 64;
  v25 = 48;
  v26 = 112;
  v27 = 32;
  v28 = 128;
  v29 = 48;
  v30 = 128;
  v31 = 32;
  v32 = 144;
  v33 = 48;
  v34 = 144;
  v35 = 32;
  v36 = 160;
  v37 = 48;
  v6 = 48;
  v7 = 32;
  v8 = 64;
  v9 = 48;
  v10 = 112;
  v11 = 48;
  v12 = 128;
  v13 = 64;
  v14 = 128;
  v15 = 48;
  v16 = 144;
  v17 = 64;
  v18 = 144;
  v19 = 48;
  v20 = 160;
  v21 = 64;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 108) = *(_DWORD *)(a1 + 76);
      goto LABEL_3;
    case 1:
LABEL_3:
      *(_DWORD *)(a1 + 108) += 2;
      *(_DWORD *)(a1 + 108) %= 256;
      v38 = *(_BYTE *)(a1 + 108);
      if ( *(_DWORD *)(a1 + 120) < 192 )
        ++*(_DWORD *)(a1 + 120);
      v1 = *(_DWORD *)(a1 + 168);
      *(_DWORD *)(a1 + 8) = *(_DWORD *)(v1 + 8) + *(_DWORD *)(a1 + 120) * COS_function(v38) / 4;
      v2 = *(_DWORD *)(a1 + 168);
      *(_DWORD *)(a1 + 12) = *(_DWORD *)(v2 + 12) + *(_DWORD *)(a1 + 120) * SIN_function(v38) / 4;
      if ( *(_DWORD *)(*(_DWORD *)(a1 + 168) + 116) == 151 )
      {
        *(_DWORD *)(a1 + 116) = 10;
        *(_DWORD *)(a1 + 104) = 0;
      }
      break;
    case 0xA:
      *(_DWORD *)(a1 + 116) = 11;
      *(_WORD *)(a1 + 80) |= 0x20u;
      *(_WORD *)(a1 + 80) &= 0xFFFBu;
      *(_WORD *)(a1 + 80) &= 0xFFF7u;
      v38 = Angle_Calculator(*(_DWORD *)(a1 + 8) - Quote_X_Position, *(_DWORD *)(a1 + 12) - Quote_Y_Position);
      v38 += RNG_Range(-3, 3);
      *(_DWORD *)(a1 + 16) = COS_function(v38);
      *(_DWORD *)(a1 + 20) = SIN_function(v38);
      *(_DWORD *)(a1 + 104) = 1;
      *(_DWORD *)(a1 + 100) = 0;
      if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
        *(_DWORD *)(a1 + 76) = 2;
      else
        *(_DWORD *)(a1 + 76) = 0;
      goto LABEL_11;
    case 0xB:
LABEL_11:
      *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
      *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
      if ( *(_DWORD *)(a1 + 4) & 0xFF )
      {
        NPC_Create(4, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 0, 0, 0, 0, 256);
        NPC_Create(4, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 0, 0, 0, 0, 256);
        NPC_Create(4, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 0, 0, 0, 0, 256);
        *(_BYTE *)a1 = 0;
      }
      if ( ++*(_DWORD *)(a1 + 100) > 4 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 3 )
        *(_DWORD *)(a1 + 104) = 1;
      break;
    default:
      break;
  }
  if ( *(_DWORD *)(a1 + 76) )
  {
    v5 = &v6 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v5;
    *(_DWORD *)(result + 4) = v5[1];
    *(_DWORD *)(result + 8) = v5[2];
    *(_DWORD *)(result + 12) = v5[3];
  }
  else
  {
    v3 = &v22 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v3;
    *(_DWORD *)(result + 4) = v3[1];
    *(_DWORD *)(result + 8) = v3[2];
    *(_DWORD *)(result + 12) = v3[3];
  }
  return result;
}

//----- (004579D0) --------------------------------------------------------
int __cdecl NPC253(int a1)
{
  int *v1; // edx@11
  int result; // eax@11
  int v3; // [sp+0h] [bp-24h]@1
  int v4; // [sp+4h] [bp-20h]@11
  int v5; // [sp+8h] [bp-1Ch]@11
  int v6; // [sp+Ch] [bp-18h]@11
  int v7; // [sp+10h] [bp-14h]@11
  int v8; // [sp+14h] [bp-10h]@11
  int v9; // [sp+18h] [bp-Ch]@11
  int v10; // [sp+1Ch] [bp-8h]@11
  int v11; // [sp+20h] [bp-4h]@11

  v3 = *(_DWORD *)(a1 + 116);
  if ( v3 )
  {
    if ( v3 != 1 )
      goto LABEL_9;
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 1;
  }
  if ( ++*(_DWORD *)(a1 + 100) > 4 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    ++*(_DWORD *)(a1 + 104);
  }
  if ( *(_DWORD *)(a1 + 104) > 1 )
    *(_DWORD *)(a1 + 104) = 0;
LABEL_9:
  if ( *(_DWORD *)(a1 + 64) <= 100 )
  {
    Spawn_Exp(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), *(_DWORD *)(a1 + 44));
    sub_46F150(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), *(_DWORD *)(a1 + 148), 8);
    Play_Sound_Effect(25, 1);
    *(_BYTE *)a1 = 0;
  }
  v4 = 0;
  v5 = 64;
  v6 = 16;
  v7 = 80;
  v8 = 16;
  v9 = 64;
  v10 = 32;
  v11 = 80;
  v1 = &v4 + 4 * *(_DWORD *)(a1 + 104);
  result = a1 + 84;
  *(_DWORD *)result = *v1;
  *(_DWORD *)(result + 4) = v1[1];
  *(_DWORD *)(result + 8) = v1[2];
  *(_DWORD *)(result + 12) = v1[3];
  return result;
}

//----- (00457B00) --------------------------------------------------------
signed int __cdecl NPC254(int a1)
{
  int v1; // ecx@7
  signed int result; // eax@7
  int v3; // ecx@8

  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      NPC_Create(255, *(_DWORD *)(a1 + 8) + 9216, *(_DWORD *)(a1 + 12) - 29184, 0, 0, 0, a1, 256);
      NPC_Create(255, *(_DWORD *)(a1 + 8) - 0x4000, *(_DWORD *)(a1 + 12) - 26624, 0, 0, 2, a1, 256);
      break;
    case 0x14:
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 108) = 60;
      *(_DWORD *)(a1 + 116) = 21;
      break;
    case 0x1E:
      *(_DWORD *)(a1 + 116) = 21;
      NPC_Create(223, *(_DWORD *)(a1 + 8) - 5632, *(_DWORD *)(a1 + 12) - 7168, 0, 0, 0, 0, 256);
      break;
    case 0x28:
      *(_DWORD *)(a1 + 116) = 21;
      NPC_Create(223, *(_DWORD *)(a1 + 8) - 4608, *(_DWORD *)(a1 + 12) - 7168, 0, 0, 0, 0, 256);
      NPC_Create(40, *(_DWORD *)(a1 + 8) - 11264, *(_DWORD *)(a1 + 12) - 7168, 0, 0, 0, 0, 256);
      NPC_Create(93, *(_DWORD *)(a1 + 8) - 17920, *(_DWORD *)(a1 + 12) - 7168, 0, 0, 0, 0, 256);
      break;
    default:
      break;
  }
  if ( *(_DWORD *)(a1 + 76) )
  {
    v3 = a1 + 84;
    *(_DWORD *)v3 = 0;
    *(_DWORD *)(v3 + 4) = 64;
    *(_DWORD *)(v3 + 8) = 128;
    result = 128;
    *(_DWORD *)(v3 + 12) = 128;
  }
  else
  {
    v1 = a1 + 84;
    *(_DWORD *)v1 = 0;
    *(_DWORD *)(v1 + 4) = 0;
    *(_DWORD *)(v1 + 8) = 128;
    result = 64;
    *(_DWORD *)(v1 + 12) = 64;
  }
  return result;
}

//----- (00457D70) --------------------------------------------------------
int __cdecl NPC255(int a1)
{
  int *v1; // eax@15
  int v2; // ecx@15
  int result; // eax@15
  int *v4; // eax@16
  int v5; // ecx@16
  int v6; // [sp+4h] [bp-80h]@1
  int v7; // [sp+8h] [bp-7Ch]@1
  int v8; // [sp+Ch] [bp-78h]@1
  int v9; // [sp+10h] [bp-74h]@1
  int v10; // [sp+14h] [bp-70h]@1
  int v11; // [sp+18h] [bp-6Ch]@1
  int v12; // [sp+1Ch] [bp-68h]@1
  int v13; // [sp+20h] [bp-64h]@1
  int v14; // [sp+24h] [bp-60h]@1
  int v15; // [sp+28h] [bp-5Ch]@1
  int v16; // [sp+2Ch] [bp-58h]@1
  int v17; // [sp+30h] [bp-54h]@1
  int v18; // [sp+34h] [bp-50h]@1
  int v19; // [sp+38h] [bp-4Ch]@1
  int v20; // [sp+3Ch] [bp-48h]@1
  int v21; // [sp+40h] [bp-44h]@1
  int v22; // [sp+44h] [bp-40h]@1
  int v23; // [sp+48h] [bp-3Ch]@1
  int v24; // [sp+4Ch] [bp-38h]@1
  int v25; // [sp+50h] [bp-34h]@1
  int v26; // [sp+54h] [bp-30h]@1
  int v27; // [sp+58h] [bp-2Ch]@1
  int v28; // [sp+5Ch] [bp-28h]@1
  int v29; // [sp+60h] [bp-24h]@1
  int v30; // [sp+64h] [bp-20h]@1
  int v31; // [sp+68h] [bp-1Ch]@1
  int v32; // [sp+6Ch] [bp-18h]@1
  int v33; // [sp+70h] [bp-14h]@1
  int v34; // [sp+74h] [bp-10h]@1
  int v35; // [sp+78h] [bp-Ch]@1
  int v36; // [sp+7Ch] [bp-8h]@1
  int v37; // [sp+80h] [bp-4h]@1

  v22 = 128;
  v23 = 0;
  v24 = 240;
  v25 = 16;
  v26 = 128;
  v27 = 16;
  v28 = 240;
  v29 = 32;
  v30 = 128;
  v31 = 32;
  v32 = 240;
  v33 = 48;
  v34 = 128;
  v35 = 16;
  v36 = 240;
  v37 = 32;
  v6 = 240;
  v7 = 0;
  v8 = 320;
  v9 = 16;
  v10 = 240;
  v11 = 16;
  v12 = 320;
  v13 = 32;
  v14 = 240;
  v15 = 32;
  v16 = 320;
  v17 = 48;
  v18 = 240;
  v19 = 16;
  v20 = 320;
  v21 = 32;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      if ( *(_DWORD *)(a1 + 76) )
      {
        *(_DWORD *)(a1 + 140) = 20480;
        *(_DWORD *)(a1 + 148) = 20480;
      }
      else
      {
        *(_DWORD *)(a1 + 140) = 28672;
        *(_DWORD *)(a1 + 148) = 28672;
      }
      goto LABEL_5;
    case 1:
LABEL_5:
      if ( *(_DWORD *)(*(_DWORD *)(a1 + 168) + 116) >= 20 )
        *(_DWORD *)(a1 + 116) = 10;
      break;
    case 0xA:
      *(_DWORD *)(a1 + 116) = 11;
      goto LABEL_9;
    case 0xB:
LABEL_9:
      if ( ++*(_DWORD *)(a1 + 104) > 3 )
        *(_DWORD *)(a1 + 104) = 0;
      break;
    default:
      break;
  }
  if ( *(_DWORD *)(a1 + 76) )
  {
    *(_DWORD *)(a1 + 8) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 8) - 0x4000;
    *(_DWORD *)(a1 + 12) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 12) - 26624;
  }
  else
  {
    *(_DWORD *)(a1 + 8) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 8) + 9216;
    *(_DWORD *)(a1 + 12) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 12) - 29184;
  }
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v6 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    *(_DWORD *)(v5 + 8) = v4[2];
    result = v4[3];
    *(_DWORD *)(v5 + 12) = result;
  }
  else
  {
    v1 = &v22 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    *(_DWORD *)(v2 + 8) = v1[2];
    result = v1[3];
    *(_DWORD *)(v2 + 12) = result;
  }
  return result;
}

//----- (00458010) --------------------------------------------------------
int __cdecl NPC256(int a1)
{
  int *v1; // ecx@23
  int v2; // edx@23
  int result; // eax@23
  int v4; // [sp+4h] [bp-60h]@1
  int v5; // [sp+8h] [bp-5Ch]@1
  int v6; // [sp+Ch] [bp-58h]@1
  int v7; // [sp+10h] [bp-54h]@1
  int v8; // [sp+14h] [bp-50h]@1
  int v9; // [sp+18h] [bp-4Ch]@1
  int v10; // [sp+1Ch] [bp-48h]@1
  int v11; // [sp+20h] [bp-44h]@1
  int v12; // [sp+24h] [bp-40h]@1
  int v13; // [sp+28h] [bp-3Ch]@1
  int v14; // [sp+2Ch] [bp-38h]@1
  int v15; // [sp+30h] [bp-34h]@1
  int v16; // [sp+34h] [bp-30h]@1
  int v17; // [sp+38h] [bp-2Ch]@1
  int v18; // [sp+3Ch] [bp-28h]@1
  int v19; // [sp+40h] [bp-24h]@1
  int v20; // [sp+44h] [bp-20h]@1
  int v21; // [sp+48h] [bp-1Ch]@1
  int v22; // [sp+4Ch] [bp-18h]@1
  int v23; // [sp+50h] [bp-14h]@1
  int v24; // [sp+54h] [bp-10h]@1
  int v25; // [sp+58h] [bp-Ch]@1
  int v26; // [sp+5Ch] [bp-8h]@1
  int v27; // [sp+60h] [bp-4h]@1

  v4 = 48;
  v5 = 160;
  v6 = 72;
  v7 = 192;
  v8 = 72;
  v9 = 160;
  v10 = 96;
  v11 = 192;
  v12 = 0;
  v13 = 128;
  v14 = 24;
  v15 = 160;
  v16 = 24;
  v17 = 128;
  v18 = 48;
  v19 = 160;
  v20 = 0;
  v21 = 160;
  v22 = 24;
  v23 = 192;
  v24 = 24;
  v25 = 160;
  v26 = 48;
  v27 = 192;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      dword_4BBA30 = 0;
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 12) -= 4096;
      goto LABEL_3;
    case 1:
LABEL_3:
      *(_DWORD *)(a1 + 104) = 0;
      break;
    case 0xA:
      *(_DWORD *)(a1 + 116) = 11;
      *(_DWORD *)(a1 + 100) = 0;
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 108) = 0;
      goto LABEL_5;
    case 0xB:
LABEL_5:
      if ( ++*(_DWORD *)(a1 + 100) > 5 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 1 )
      {
        *(_DWORD *)(a1 + 104) = 0;
        ++*(_DWORD *)(a1 + 108);
      }
      if ( *(_DWORD *)(a1 + 108) > 5 )
        *(_DWORD *)(a1 + 116) = 1;
      break;
    case 0x14:
      *(_DWORD *)(a1 + 116) = 21;
      goto LABEL_13;
    case 0x15:
LABEL_13:
      *(_DWORD *)(a1 + 104) = 2;
      break;
    case 0x28:
      *(_DWORD *)(a1 + 116) = 41;
      NPC_Create(257, *(_DWORD *)(a1 + 8) - 7168, *(_DWORD *)(a1 + 12) - 0x2000, 0, 0, 0, 0, 256);
      NPC_Create(257, *(_DWORD *)(a1 + 8) - 7168, *(_DWORD *)(a1 + 12) - 0x2000, 0, 0, 2, 0, 170);
      goto LABEL_15;
    case 0x29:
LABEL_15:
      *(_DWORD *)(a1 + 104) = 4;
      break;
    case 0x32:
      *(_DWORD *)(a1 + 116) = 51;
      *(_DWORD *)(a1 + 100) = 0;
      *(_DWORD *)(a1 + 104) = 4;
      *(_DWORD *)(a1 + 108) = 0;
      goto LABEL_17;
    case 0x33:
LABEL_17:
      if ( ++*(_DWORD *)(a1 + 100) > 5 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 5 )
      {
        *(_DWORD *)(a1 + 104) = 4;
        ++*(_DWORD *)(a1 + 108);
      }
      if ( *(_DWORD *)(a1 + 108) > 5 )
        *(_DWORD *)(a1 + 116) = 41;
      break;
    default:
      break;
  }
  v1 = &v4 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  result = v1[2];
  *(_DWORD *)(v2 + 8) = result;
  *(_DWORD *)(v2 + 12) = v1[3];
  return result;
}
// 4BBA30: using guessed type int dword_4BBA30;

//----- (00458360) --------------------------------------------------------
int __cdecl NPC257(int a1)
{
  int *v1; // ecx@36
  int v2; // edx@36
  int result; // eax@36
  int v4; // [sp+0h] [bp-34h]@1
  int v5; // [sp+4h] [bp-30h]@1
  int v6; // [sp+8h] [bp-2Ch]@1
  int v7; // [sp+Ch] [bp-28h]@1
  int v8; // [sp+10h] [bp-24h]@1
  int v9; // [sp+14h] [bp-20h]@1
  int v10; // [sp+18h] [bp-1Ch]@1
  int v11; // [sp+1Ch] [bp-18h]@1
  int v12; // [sp+20h] [bp-14h]@1
  int v13; // [sp+24h] [bp-10h]@1
  int v14; // [sp+28h] [bp-Ch]@1
  int v15; // [sp+2Ch] [bp-8h]@1
  int v16; // [sp+30h] [bp-4h]@1

  v5 = 176;
  v6 = 32;
  v7 = 184;
  v8 = 48;
  v9 = 184;
  v10 = 32;
  v11 = 192;
  v12 = 48;
  v13 = 0;
  v14 = 0;
  v15 = 0;
  v16 = 0;
  v4 = *(_DWORD *)(a1 + 116);
  if ( v4 )
  {
    if ( v4 != 1 )
    {
      if ( v4 == 10 )
      {
        if ( *(_DWORD *)(a1 + 8) < dword_4BBA30 )
          *(_DWORD *)(a1 + 16) += 85;
        if ( *(_DWORD *)(a1 + 8) > dword_4BBA30 )
          *(_DWORD *)(a1 + 16) -= 85;
        if ( *(_DWORD *)(a1 + 12) < dword_4BBA28 )
          *(_DWORD *)(a1 + 20) += 85;
        if ( *(_DWORD *)(a1 + 12) > dword_4BBA28 )
          *(_DWORD *)(a1 + 20) -= 85;
        if ( *(_DWORD *)(a1 + 16) > 1024 )
          *(_DWORD *)(a1 + 16) = 1024;
        if ( *(_DWORD *)(a1 + 16) < -1024 )
          *(_DWORD *)(a1 + 16) = -1024;
        if ( *(_DWORD *)(a1 + 20) > 1024 )
          *(_DWORD *)(a1 + 20) = 1024;
        if ( *(_DWORD *)(a1 + 20) < -1024 )
          *(_DWORD *)(a1 + 20) = -1024;
        *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
        *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
      }
      goto LABEL_26;
    }
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 1;
  }
  if ( dword_4BBA30 )
    *(_DWORD *)(a1 + 116) = 10;
LABEL_26:
  if ( ++*(_DWORD *)(a1 + 100) > 3 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    ++*(_DWORD *)(a1 + 104);
  }
  if ( *(_DWORD *)(a1 + 104) > 1 )
    *(_DWORD *)(a1 + 104) = 0;
  if ( !*(_DWORD *)(a1 + 76) && *(_DWORD *)(a1 + 16) > 0 )
    *(_DWORD *)(a1 + 104) = 2;
  if ( *(_DWORD *)(a1 + 76) == 2 && *(_DWORD *)(a1 + 16) < 0 )
    *(_DWORD *)(a1 + 104) = 2;
  v1 = &v5 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  result = v1[2];
  *(_DWORD *)(v2 + 8) = result;
  *(_DWORD *)(v2 + 12) = v1[3];
  return result;
}
// 4BBA28: using guessed type int dword_4BBA28;
// 4BBA30: using guessed type int dword_4BBA30;

//----- (004585A0) --------------------------------------------------------
int __cdecl NPC258(int a1)
{
  int result; // eax@1

  result = a1 + 84;
  *(_DWORD *)result = 48;
  *(_DWORD *)(result + 4) = 32;
  *(_DWORD *)(result + 8) = 64;
  *(_DWORD *)(result + 12) = 48;
  return result;
}

//----- (004585F0) --------------------------------------------------------
char *__cdecl NPC259(void *a1)
{
  char *result; // eax@1
  char *v2; // edx@8

  result = (char *)a1;
  switch ( *((_DWORD *)a1 + 29) )
  {
    case 0:
      *((_WORD *)a1 + 40) &= 0xDFFFu;
      *((_DWORD *)a1 + 29) = 1;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( *(_DWORD *)&Quote_Direction_Faced )
        *((_DWORD *)a1 + 19) = 2;
      else
        *((_DWORD *)a1 + 19) = 0;
      *((_DWORD *)a1 + 3) = Quote_Y_Position - 2048;
      if ( *((_DWORD *)a1 + 19) )
      {
        *((_DWORD *)a1 + 2) = Quote_X_Position - 1536;
        v2 = (char *)a1 + 84;
        *(_DWORD *)v2 = 224;
        *((_DWORD *)v2 + 1) = 112;
        result = (char *)240;
        *((_DWORD *)v2 + 2) = 240;
        *((_DWORD *)v2 + 3) = 128;
      }
      else
      {
        *((_DWORD *)a1 + 2) = Quote_X_Position + 1536;
        result = (char *)a1 + 84;
        *(_DWORD *)result = 224;
        *((_DWORD *)result + 1) = 96;
        *((_DWORD *)result + 2) = 240;
        *((_DWORD *)result + 3) = 112;
      }
      if ( Quote_Animation_Frame % 2 )
      {
        result = (char *)a1;
        ++*((_DWORD *)a1 + 22);
      }
      break;
    case 0xA:
      *((_DWORD *)a1 + 29) = 11;
      *((_DWORD *)a1 + 4) = 64;
      *((_DWORD *)a1 + 5) = -32;
      result = (char *)a1 + 84;
      *(_DWORD *)result = 224;
      *((_DWORD *)result + 1) = 96;
      *((_DWORD *)result + 2) = 240;
      *((_DWORD *)result + 3) = 112;
      break;
    case 0xB:
      if ( *((_DWORD *)a1 + 3) < 0x8000 )
        *((_DWORD *)a1 + 5) = 32;
      *((_DWORD *)a1 + 2) += *((_DWORD *)a1 + 4);
      result = (char *)a1;
      *((_DWORD *)a1 + 3) += *((_DWORD *)a1 + 5);
      break;
    case 0x14:
      sub_46F760(a1);
      result = (char *)sub_46F200(*((_DWORD *)a1 + 2), *((_DWORD *)a1 + 3), 0x2000, 64);
      break;
    default:
      return result;
  }
  return result;
}
// 49E678: using guessed type int Quote_Animation_Frame;

//----- (00458810) --------------------------------------------------------
int __cdecl NPC260(int a1)
{
  int *v1; // edx@14
  int result; // eax@14
  int *v3; // edx@15
  int v4; // [sp+4h] [bp-60h]@1
  int v5; // [sp+8h] [bp-5Ch]@1
  int v6; // [sp+Ch] [bp-58h]@1
  int v7; // [sp+10h] [bp-54h]@1
  int v8; // [sp+14h] [bp-50h]@1
  int v9; // [sp+18h] [bp-4Ch]@1
  int v10; // [sp+1Ch] [bp-48h]@1
  int v11; // [sp+20h] [bp-44h]@1
  int v12; // [sp+24h] [bp-40h]@1
  int v13; // [sp+28h] [bp-3Ch]@1
  int v14; // [sp+2Ch] [bp-38h]@1
  int v15; // [sp+30h] [bp-34h]@1
  int v16; // [sp+34h] [bp-30h]@1
  int v17; // [sp+38h] [bp-2Ch]@1
  int v18; // [sp+3Ch] [bp-28h]@1
  int v19; // [sp+40h] [bp-24h]@1
  int v20; // [sp+44h] [bp-20h]@1
  int v21; // [sp+48h] [bp-1Ch]@1
  int v22; // [sp+4Ch] [bp-18h]@1
  int v23; // [sp+50h] [bp-14h]@1
  int v24; // [sp+54h] [bp-10h]@1
  int v25; // [sp+58h] [bp-Ch]@1
  int v26; // [sp+5Ch] [bp-8h]@1
  int v27; // [sp+60h] [bp-4h]@1

  v16 = 128;
  v17 = 64;
  v18 = 144;
  v19 = 80;
  v20 = 144;
  v21 = 64;
  v22 = 160;
  v23 = 80;
  v24 = 224;
  v25 = 64;
  v26 = 240;
  v27 = 80;
  v4 = 128;
  v5 = 80;
  v6 = 144;
  v7 = 96;
  v8 = 144;
  v9 = 80;
  v10 = 160;
  v11 = 96;
  v12 = 224;
  v13 = 80;
  v14 = 240;
  v15 = 96;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 8) += 512;
      *(_DWORD *)(a1 + 12) -= 1024;
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 100) = 0;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( RNG_Range(0, 160) == 1 )
      {
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 1;
      }
      break;
    case 2:
      if ( ++*(_DWORD *)(a1 + 120) > 12 )
      {
        *(_DWORD *)(a1 + 116) = 1;
        *(_DWORD *)(a1 + 104) = 0;
      }
      break;
    case 0xA:
      *(_DWORD *)(a1 + 116) = 11;
      *(_DWORD *)(a1 + 104) = 2;
      NPC_Create(87, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12) - 0x2000, 0, 0, 0, 0, 256);
      break;
    default:
      break;
  }
  if ( Quote_X_Position >= *(_DWORD *)(a1 + 8) )
    *(_DWORD *)(a1 + 76) = 2;
  else
    *(_DWORD *)(a1 + 76) = 0;
  if ( *(_DWORD *)(a1 + 76) )
  {
    v3 = &v4 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v3;
    *(_DWORD *)(result + 4) = v3[1];
    *(_DWORD *)(result + 8) = v3[2];
    *(_DWORD *)(result + 12) = v3[3];
  }
  else
  {
    v1 = &v16 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v1;
    *(_DWORD *)(result + 4) = v1[1];
    *(_DWORD *)(result + 8) = v1[2];
    *(_DWORD *)(result + 12) = v1[3];
  }
  return result;
}

//----- (00458A70) --------------------------------------------------------
int __cdecl NPC261(int a1)
{
  int *v1; // eax@15
  int v2; // ecx@15
  int result; // eax@15
  int *v4; // eax@16
  int v5; // ecx@16
  int v6; // [sp+0h] [bp-44h]@1
  int v7; // [sp+4h] [bp-40h]@1
  int v8; // [sp+8h] [bp-3Ch]@1
  int v9; // [sp+Ch] [bp-38h]@1
  int v10; // [sp+10h] [bp-34h]@1
  int v11; // [sp+14h] [bp-30h]@1
  int v12; // [sp+18h] [bp-2Ch]@1
  int v13; // [sp+1Ch] [bp-28h]@1
  int v14; // [sp+20h] [bp-24h]@1
  int v15; // [sp+24h] [bp-20h]@1
  int v16; // [sp+28h] [bp-1Ch]@1
  int v17; // [sp+2Ch] [bp-18h]@1
  int v18; // [sp+30h] [bp-14h]@1
  int v19; // [sp+34h] [bp-10h]@1
  int v20; // [sp+38h] [bp-Ch]@1
  int v21; // [sp+3Ch] [bp-8h]@1
  int v22; // [sp+40h] [bp-4h]@1

  v15 = 112;
  v16 = 32;
  v17 = 128;
  v18 = 48;
  v19 = 128;
  v20 = 32;
  v21 = 144;
  v22 = 48;
  v7 = 112;
  v8 = 48;
  v9 = 128;
  v10 = 64;
  v11 = 128;
  v12 = 48;
  v13 = 144;
  v14 = 64;
  v6 = *(_DWORD *)(a1 + 116);
  if ( v6 )
  {
    if ( v6 != 1 )
    {
      if ( v6 == 2 && ++*(_DWORD *)(a1 + 120) > 12 )
      {
        *(_DWORD *)(a1 + 116) = 1;
        *(_DWORD *)(a1 + 104) = 0;
      }
      goto LABEL_11;
    }
  }
  else
  {
    *(_DWORD *)(a1 + 8) -= 512;
    *(_DWORD *)(a1 + 12) -= 1024;
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 104) = 0;
    *(_DWORD *)(a1 + 100) = 0;
  }
  if ( RNG_Range(0, 160) == 1 )
  {
    *(_DWORD *)(a1 + 116) = 2;
    *(_DWORD *)(a1 + 120) = 0;
    *(_DWORD *)(a1 + 104) = 1;
  }
LABEL_11:
  if ( Quote_X_Position >= *(_DWORD *)(a1 + 8) )
    *(_DWORD *)(a1 + 76) = 2;
  else
    *(_DWORD *)(a1 + 76) = 0;
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v7 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    *(_DWORD *)(v5 + 8) = v4[2];
    result = v4[3];
    *(_DWORD *)(v5 + 12) = result;
  }
  else
  {
    v1 = &v15 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    *(_DWORD *)(v2 + 8) = v1[2];
    result = v1[3];
    *(_DWORD *)(v2 + 12) = result;
  }
  return result;
}

//----- (00458C30) --------------------------------------------------------
int __cdecl NPC262(int a1)
{
  int *v1; // eax@15
  int v2; // ecx@15
  int result; // eax@15
  int *v4; // eax@16
  int v5; // ecx@16
  int v6; // [sp+0h] [bp-44h]@1
  int v7; // [sp+4h] [bp-40h]@1
  int v8; // [sp+8h] [bp-3Ch]@1
  int v9; // [sp+Ch] [bp-38h]@1
  int v10; // [sp+10h] [bp-34h]@1
  int v11; // [sp+14h] [bp-30h]@1
  int v12; // [sp+18h] [bp-2Ch]@1
  int v13; // [sp+1Ch] [bp-28h]@1
  int v14; // [sp+20h] [bp-24h]@1
  int v15; // [sp+24h] [bp-20h]@1
  int v16; // [sp+28h] [bp-1Ch]@1
  int v17; // [sp+2Ch] [bp-18h]@1
  int v18; // [sp+30h] [bp-14h]@1
  int v19; // [sp+34h] [bp-10h]@1
  int v20; // [sp+38h] [bp-Ch]@1
  int v21; // [sp+3Ch] [bp-8h]@1
  int v22; // [sp+40h] [bp-4h]@1

  v15 = 128;
  v16 = 0;
  v17 = 144;
  v18 = 16;
  v19 = 144;
  v20 = 0;
  v21 = 160;
  v22 = 16;
  v7 = 128;
  v8 = 16;
  v9 = 144;
  v10 = 32;
  v11 = 144;
  v12 = 16;
  v13 = 160;
  v14 = 32;
  v6 = *(_DWORD *)(a1 + 116);
  if ( v6 )
  {
    if ( v6 != 1 )
    {
      if ( v6 == 2 && ++*(_DWORD *)(a1 + 120) > 12 )
      {
        *(_DWORD *)(a1 + 116) = 1;
        *(_DWORD *)(a1 + 104) = 0;
      }
      goto LABEL_11;
    }
  }
  else
  {
    *(_DWORD *)(a1 + 8) -= 512;
    *(_DWORD *)(a1 + 12) -= 1024;
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 104) = 0;
    *(_DWORD *)(a1 + 100) = 0;
  }
  if ( RNG_Range(0, 160) == 1 )
  {
    *(_DWORD *)(a1 + 116) = 2;
    *(_DWORD *)(a1 + 120) = 0;
    *(_DWORD *)(a1 + 104) = 1;
  }
LABEL_11:
  if ( Quote_X_Position >= *(_DWORD *)(a1 + 8) )
    *(_DWORD *)(a1 + 76) = 2;
  else
    *(_DWORD *)(a1 + 76) = 0;
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v7 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    *(_DWORD *)(v5 + 8) = v4[2];
    result = v4[3];
    *(_DWORD *)(v5 + 12) = result;
  }
  else
  {
    v1 = &v15 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    *(_DWORD *)(v2 + 8) = v1[2];
    result = v1[3];
    *(_DWORD *)(v2 + 12) = result;
  }
  return result;
}

//----- (00458DF0) --------------------------------------------------------
int __cdecl NPC263(int a1)
{
  int Y_Velocity; // ST24_4@52
  int *v2; // edx@89
  int v3; // eax@89
  int *v4; // edx@90
  int v5; // eax@90
  int result; // eax@91
  signed int v7; // [sp+0h] [bp-138h]@1
  int v8; // [sp+8h] [bp-130h]@1
  int v9; // [sp+Ch] [bp-12Ch]@1
  int v10; // [sp+10h] [bp-128h]@1
  int v11; // [sp+14h] [bp-124h]@1
  int v12; // [sp+18h] [bp-120h]@1
  int v13; // [sp+1Ch] [bp-11Ch]@1
  int v14; // [sp+20h] [bp-118h]@1
  int v15; // [sp+24h] [bp-114h]@1
  int v16; // [sp+28h] [bp-110h]@1
  int v17; // [sp+2Ch] [bp-10Ch]@1
  int v18; // [sp+30h] [bp-108h]@1
  int v19; // [sp+34h] [bp-104h]@1
  int v20; // [sp+38h] [bp-100h]@1
  int v21; // [sp+3Ch] [bp-FCh]@1
  int v22; // [sp+40h] [bp-F8h]@1
  int v23; // [sp+44h] [bp-F4h]@1
  int v24; // [sp+48h] [bp-F0h]@1
  int v25; // [sp+4Ch] [bp-ECh]@1
  int v26; // [sp+50h] [bp-E8h]@1
  int v27; // [sp+54h] [bp-E4h]@1
  int v28; // [sp+58h] [bp-E0h]@1
  int v29; // [sp+5Ch] [bp-DCh]@1
  int v30; // [sp+60h] [bp-D8h]@1
  int v31; // [sp+64h] [bp-D4h]@1
  int v32; // [sp+68h] [bp-D0h]@1
  int v33; // [sp+6Ch] [bp-CCh]@1
  int v34; // [sp+70h] [bp-C8h]@1
  int v35; // [sp+74h] [bp-C4h]@1
  int v36; // [sp+78h] [bp-C0h]@1
  int v37; // [sp+7Ch] [bp-BCh]@1
  int v38; // [sp+80h] [bp-B8h]@1
  int v39; // [sp+84h] [bp-B4h]@1
  int v40; // [sp+88h] [bp-B0h]@1
  int v41; // [sp+8Ch] [bp-ACh]@1
  int v42; // [sp+90h] [bp-A8h]@1
  int v43; // [sp+94h] [bp-A4h]@1
  int X_Velocity; // [sp+9Ch] [bp-9Ch]@52
  int v45; // [sp+A0h] [bp-98h]@1
  int v46; // [sp+A4h] [bp-94h]@1
  int v47; // [sp+A8h] [bp-90h]@1
  int v48; // [sp+ACh] [bp-8Ch]@1
  int v49; // [sp+B0h] [bp-88h]@1
  int v50; // [sp+B4h] [bp-84h]@1
  int v51; // [sp+B8h] [bp-80h]@1
  int v52; // [sp+BCh] [bp-7Ch]@1
  int v53; // [sp+C0h] [bp-78h]@1
  int v54; // [sp+C4h] [bp-74h]@1
  int v55; // [sp+C8h] [bp-70h]@1
  int v56; // [sp+CCh] [bp-6Ch]@1
  int v57; // [sp+D0h] [bp-68h]@1
  int v58; // [sp+D4h] [bp-64h]@1
  int v59; // [sp+D8h] [bp-60h]@1
  int v60; // [sp+DCh] [bp-5Ch]@1
  int v61; // [sp+E0h] [bp-58h]@1
  int v62; // [sp+E4h] [bp-54h]@1
  int v63; // [sp+E8h] [bp-50h]@1
  int v64; // [sp+ECh] [bp-4Ch]@1
  int v65; // [sp+F0h] [bp-48h]@1
  int v66; // [sp+F4h] [bp-44h]@1
  int v67; // [sp+F8h] [bp-40h]@1
  int v68; // [sp+FCh] [bp-3Ch]@1
  int v69; // [sp+100h] [bp-38h]@1
  int v70; // [sp+104h] [bp-34h]@1
  int v71; // [sp+108h] [bp-30h]@1
  int v72; // [sp+10Ch] [bp-2Ch]@1
  int v73; // [sp+110h] [bp-28h]@1
  int v74; // [sp+114h] [bp-24h]@1
  int v75; // [sp+118h] [bp-20h]@1
  int v76; // [sp+11Ch] [bp-1Ch]@1
  int v77; // [sp+120h] [bp-18h]@1
  int v78; // [sp+124h] [bp-14h]@1
  int v79; // [sp+128h] [bp-10h]@1
  int v80; // [sp+12Ch] [bp-Ch]@1
  int i; // [sp+134h] [bp-4h]@50

  v45 = 0;
  v46 = 0;
  v47 = 24;
  v48 = 32;
  v49 = 24;
  v50 = 0;
  v51 = 48;
  v52 = 32;
  v53 = 48;
  v54 = 0;
  v55 = 72;
  v56 = 32;
  v57 = 0;
  v58 = 0;
  v59 = 0;
  v60 = 0;
  v61 = 72;
  v62 = 0;
  v63 = 96;
  v64 = 32;
  v65 = 96;
  v66 = 0;
  v67 = 120;
  v68 = 32;
  v69 = 120;
  v70 = 0;
  v71 = 144;
  v72 = 32;
  v73 = 144;
  v74 = 0;
  v75 = 168;
  v76 = 32;
  v77 = 264;
  v78 = 0;
  v79 = 288;
  v80 = 32;
  v8 = 0;
  v9 = 32;
  v10 = 24;
  v11 = 64;
  v12 = 24;
  v13 = 32;
  v14 = 48;
  v15 = 64;
  v16 = 48;
  v17 = 32;
  v18 = 72;
  v19 = 64;
  v20 = 0;
  v21 = 0;
  v22 = 0;
  v23 = 0;
  v24 = 72;
  v25 = 32;
  v26 = 96;
  v27 = 64;
  v28 = 96;
  v29 = 32;
  v30 = 120;
  v31 = 64;
  v32 = 120;
  v33 = 32;
  v34 = 144;
  v35 = 64;
  v36 = 144;
  v37 = 32;
  v38 = 168;
  v39 = 64;
  v40 = 264;
  v41 = 32;
  v42 = 288;
  v43 = 64;
  v7 = *(_DWORD *)(a1 + 116);
  if ( v7 <= 32 )
  {
    if ( v7 == 32 )
    {
      if ( ++*(_DWORD *)(a1 + 120) > 50 )
        *(_DWORD *)(a1 + 116) = 100;
    }
    else
    {
      switch ( v7 )
      {
        case 0:
          *(_DWORD *)(a1 + 116) = 1;
          *(_DWORD *)(a1 + 12) += 4096;
          *(_DWORD *)(a1 + 104) = 3;
          break;
        case 2:
          if ( ++*(_DWORD *)(a1 + 120) / 2 % 2 )
            *(_DWORD *)(a1 + 104) = 0;
          else
            *(_DWORD *)(a1 + 104) = 3;
          if ( *(_DWORD *)(a1 + 120) > 50 )
            *(_DWORD *)(a1 + 116) = 10;
          break;
        case 10:
          *(_DWORD *)(a1 + 20) += 128;
          *(_WORD *)(a1 + 80) |= 0x20u;
          *(_DWORD *)(a1 + 164) = 3;
          if ( *(_DWORD *)(a1 + 4) & 8 )
          {
            *(_DWORD *)(a1 + 116) = 20;
            *(_DWORD *)(a1 + 120) = 0;
            *(_DWORD *)(a1 + 104) = 0;
            *(_DWORD *)(a1 + 112) = *(_DWORD *)(a1 + 64);
            if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
              *(_DWORD *)(a1 + 76) = 2;
            else
              *(_DWORD *)(a1 + 76) = 0;
          }
          break;
        case 20:
          if ( ++*(_DWORD *)(a1 + 120) < 50 && *(_DWORD *)(a1 + 64) < *(_DWORD *)(a1 + 112) - 20 )
            *(_DWORD *)(a1 + 120) = 50;
          if ( *(_DWORD *)(a1 + 120) == 50 )
          {
            if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
              *(_DWORD *)(a1 + 76) = 2;
            else
              *(_DWORD *)(a1 + 76) = 0;
            *(_DWORD *)(a1 + 104) = 4;
          }
          if ( *(_DWORD *)(a1 + 120) == 80 )
          {
            *(_DWORD *)(a1 + 104) = 5;
            Play_Sound_Effect(25, 1);
            if ( *(_DWORD *)(a1 + 76) )
            {
              NPC_Create(264, *(_DWORD *)(a1 + 8) + 0x2000, *(_DWORD *)(a1 + 12), 0, 0, 2, 0, 256);
              NPC_Create(264, *(_DWORD *)(a1 + 8) + 0x2000, *(_DWORD *)(a1 + 12), 0, 0, 1026, 0, 256);
            }
            else
            {
              NPC_Create(264, *(_DWORD *)(a1 + 8) - 0x2000, *(_DWORD *)(a1 + 12), 0, 0, 0, 0, 256);
              NPC_Create(264, *(_DWORD *)(a1 + 8) - 0x2000, *(_DWORD *)(a1 + 12), 0, 0, 1024, 0, 256);
            }
          }
          if ( *(_DWORD *)(a1 + 120) == 120 )
            *(_DWORD *)(a1 + 104) = 0;
          if ( *(_DWORD *)(a1 + 120) > 130 && *(_DWORD *)(a1 + 64) < *(_DWORD *)(a1 + 112) - 50 )
            *(_DWORD *)(a1 + 120) = 161;
          if ( *(_DWORD *)(a1 + 120) > 160 )
          {
            *(_DWORD *)(a1 + 116) = 100;
            *(_DWORD *)(a1 + 104) = 0;
          }
          break;
        case 30:
          *(_DWORD *)(a1 + 116) = 31;
          *(_DWORD *)(a1 + 120) = 0;
          *(_DWORD *)(a1 + 104) = 6;
          *(_DWORD *)(a1 + 32) = *(_DWORD *)(a1 + 8);
          *(_WORD *)(a1 + 80) |= 0x20u;
          goto LABEL_46;
        case 31:
LABEL_46:
          if ( ++*(_DWORD *)(a1 + 120) / 2 % 2 )
            *(_DWORD *)(a1 + 8) = *(_DWORD *)(a1 + 32);
          else
            *(_DWORD *)(a1 + 8) = *(_DWORD *)(a1 + 32) + 512;
          if ( *(_DWORD *)(a1 + 120) > 50 )
          {
            *(_DWORD *)(a1 + 116) = 32;
            *(_DWORD *)(a1 + 120) = 0;
            *(_DWORD *)(a1 + 104) = 7;
            Play_Sound_Effect(101, 1);
            for ( i = 8; i < 256; i += 16 )
            {
              X_Velocity = 2 * COS_function(i);
              Y_Velocity = 2 * SIN_function(i);
              NPC_Create(266, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), X_Velocity, Y_Velocity, 0, 0, 256);
            }
          }
          break;
        default:
          goto LABEL_82;
      }
    }
    goto LABEL_82;
  }
  if ( v7 > 103 )
  {
    if ( v7 == 500 )
    {
      *(_WORD *)(a1 + 80) &= 0xFFDFu;
      *(_DWORD *)(a1 + 104) = 6;
      *(_DWORD *)(a1 + 20) += 16;
      if ( *(_DWORD *)(a1 + 4) & 8 )
      {
        *(_DWORD *)(a1 + 116) = 501;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 32) = *(_DWORD *)(a1 + 8);
        if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
          *(_DWORD *)(a1 + 76) = 2;
        else
          *(_DWORD *)(a1 + 76) = 0;
      }
    }
    else if ( v7 == 501 )
    {
      if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
        *(_DWORD *)(a1 + 76) = 2;
      else
        *(_DWORD *)(a1 + 76) = 0;
      *(_DWORD *)(a1 + 104) = 8;
      if ( ++*(_DWORD *)(a1 + 120) / 2 % 2 )
        *(_DWORD *)(a1 + 8) = *(_DWORD *)(a1 + 32);
      else
        *(_DWORD *)(a1 + 8) = *(_DWORD *)(a1 + 32) + 512;
    }
  }
  else if ( v7 == 103 )
  {
    *(_DWORD *)(a1 + 120) -= 2;
    if ( *(_DWORD *)(a1 + 120) <= 0 )
    {
      *(_WORD *)(a1 + 80) |= 0x20u;
      *(_DWORD *)(a1 + 164) = 3;
      if ( *(_DWORD *)(a1 + 108) >= 3 )
      {
        *(_DWORD *)(a1 + 108) = 0;
        *(_DWORD *)(a1 + 116) = 30;
      }
      else
      {
        ++*(_DWORD *)(a1 + 108);
        *(_DWORD *)(a1 + 116) = 10;
      }
    }
  }
  else
  {
    if ( v7 == 100 )
    {
      *(_DWORD *)(a1 + 116) = 101;
      *(_WORD *)(a1 + 80) &= 0xFFDFu;
      *(_DWORD *)(a1 + 164) = 0;
      *(_DWORD *)(a1 + 120) = 0;
      Play_Sound_Effect(29, 1);
    }
    else if ( v7 != 101 )
    {
      if ( v7 == 102 && ++*(_DWORD *)(a1 + 120) > 40 )
      {
        *(_DWORD *)(a1 + 116) = 103;
        *(_DWORD *)(a1 + 120) = 16;
        *(_DWORD *)(a1 + 104) = 2;
        *(_DWORD *)(a1 + 20) = 0;
        *(_DWORD *)(a1 + 8) = *(_DWORD *)(a1 + 32);
        *(_DWORD *)(a1 + 12) = *(_DWORD *)(a1 + 36);
        if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
          *(_DWORD *)(a1 + 76) = 2;
        else
          *(_DWORD *)(a1 + 76) = 0;
      }
      goto LABEL_82;
    }
    *(_DWORD *)(a1 + 120) += 2;
    if ( *(_DWORD *)(a1 + 120) > 16 )
    {
      *(_DWORD *)(a1 + 116) = 102;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 104) = 3;
      *(_DWORD *)(a1 + 32) = RNG_Range(5, 35) << 13;
      *(_DWORD *)(a1 + 36) = RNG_Range(5, 7) << 13;
    }
  }
LABEL_82:
  if ( *(_DWORD *)(a1 + 116) >= 10 )
  {
    if ( *(_DWORD *)(a1 + 116) == 102 )
    {
      dword_4BBA30 = *(_DWORD *)(a1 + 32);
      dword_4BBA28 = *(_DWORD *)(a1 + 36);
    }
    else
    {
      dword_4BBA30 = *(_DWORD *)(a1 + 8);
      dword_4BBA28 = *(_DWORD *)(a1 + 12);
    }
  }
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v8 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    *(_DWORD *)(v5 + 8) = v4[2];
    *(_DWORD *)(v5 + 12) = v4[3];
  }
  else
  {
    v2 = &v45 + 4 * *(_DWORD *)(a1 + 104);
    v3 = a1 + 84;
    *(_DWORD *)v3 = *v2;
    *(_DWORD *)(v3 + 4) = v2[1];
    *(_DWORD *)(v3 + 8) = v2[2];
    *(_DWORD *)(v3 + 12) = v2[3];
  }
  result = a1;
  if ( *(_DWORD *)(a1 + 116) != 101 && *(_DWORD *)(a1 + 116) != 103 )
  {
    *(_DWORD *)(a1 + 144) = 0x2000;
  }
  else
  {
    *(_DWORD *)(a1 + 88) += *(_DWORD *)(a1 + 120);
    *(_DWORD *)(a1 + 96) -= *(_DWORD *)(a1 + 120);
    result = a1;
    *(_DWORD *)(a1 + 144) = (16 - *(_DWORD *)(a1 + 120)) << 9;
  }
  return result;
}
// 4BBA28: using guessed type int dword_4BBA28;
// 4BBA30: using guessed type int dword_4BBA30;

//----- (00459950) --------------------------------------------------------
char *__cdecl NPC264(void *a1)
{
  char *result; // eax@3
  __int64 v2; // rax@13
  int v3; // [sp+0h] [bp-18h]@4
  char v4; // [sp+17h] [bp-1h]@8

  if ( *((_DWORD *)a1 + 2) < 0 || *((_DWORD *)a1 + 2) > *(signed __int16 *)&word_49E586 << 13 )
    return (char *)sub_46F760(a1);
  v3 = *((_DWORD *)a1 + 29);
  if ( !v3 )
  {
    *((_DWORD *)a1 + 29) = 1;
    *((_DWORD *)a1 + 8) = *((_DWORD *)a1 + 2);
    *((_DWORD *)a1 + 9) = *((_DWORD *)a1 + 3);
    *((_DWORD *)a1 + 27) = *((_DWORD *)a1 + 19) / 8;
    *((_DWORD *)a1 + 19) %= 8;
    goto LABEL_8;
  }
  if ( v3 == 1 )
  {
LABEL_8:
    *((_DWORD *)a1 + 27) += 6;
    *((_DWORD *)a1 + 27) %= 256;
    v4 = *((_BYTE *)a1 + 108);
    if ( *((_DWORD *)a1 + 30) < 128 )
      ++*((_DWORD *)a1 + 30);
    if ( *((_DWORD *)a1 + 19) )
      *((_DWORD *)a1 + 4) += 21;
    else
      *((_DWORD *)a1 + 4) -= 21;
    *((_DWORD *)a1 + 8) += *((_DWORD *)a1 + 4);
    v2 = *((_DWORD *)a1 + 30) * COS_function(v4) / 2;
    *((_DWORD *)a1 + 2) = *((_DWORD *)a1 + 8) + (((BYTE4(v2) & 3) + (signed int)v2) >> 2);
    *((_DWORD *)a1 + 3) = *((_DWORD *)a1 + 9) + *((_DWORD *)a1 + 30) * SIN_function(v4) / 2;
    NPC_Create(265, *((_DWORD *)a1 + 2), *((_DWORD *)a1 + 3), 0, 0, 0, 0, 256);
  }
  result = (char *)a1 + 84;
  *(_DWORD *)result = 288;
  *((_DWORD *)result + 1) = 0;
  *((_DWORD *)result + 2) = 304;
  *((_DWORD *)result + 3) = 16;
  return result;
}

//----- (00459B30) --------------------------------------------------------
int __cdecl NPC265(int a1)
{
  int result; // eax@4
  int *v2; // eax@5
  int v3; // ecx@5
  int v4; // [sp+0h] [bp-30h]@1
  int v5; // [sp+4h] [bp-2Ch]@1
  int v6; // [sp+8h] [bp-28h]@1
  int v7; // [sp+Ch] [bp-24h]@1
  int v8; // [sp+10h] [bp-20h]@1
  int v9; // [sp+14h] [bp-1Ch]@1
  int v10; // [sp+18h] [bp-18h]@1
  int v11; // [sp+1Ch] [bp-14h]@1
  int v12; // [sp+20h] [bp-10h]@1
  int v13; // [sp+24h] [bp-Ch]@1
  int v14; // [sp+28h] [bp-8h]@1
  int v15; // [sp+2Ch] [bp-4h]@1

  v4 = 288;
  v5 = 16;
  v6 = 304;
  v7 = 32;
  v8 = 288;
  v9 = 32;
  v10 = 304;
  v11 = 48;
  v12 = 288;
  v13 = 48;
  v14 = 304;
  v15 = 64;
  if ( ++*(_DWORD *)(a1 + 100) > 3 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    ++*(_DWORD *)(a1 + 104);
  }
  if ( *(_DWORD *)(a1 + 104) <= 2 )
  {
    v2 = &v4 + 4 * *(_DWORD *)(a1 + 104);
    v3 = a1 + 84;
    *(_DWORD *)v3 = *v2;
    *(_DWORD *)(v3 + 4) = v2[1];
    *(_DWORD *)(v3 + 8) = v2[2];
    result = v2[3];
    *(_DWORD *)(v3 + 12) = result;
  }
  else
  {
    result = a1;
    *(_BYTE *)a1 = 0;
  }
  return result;
}

//----- (00459C00) --------------------------------------------------------
int __cdecl NPC266(void *a1)
{
  int *v1; // ecx@11
  char *v2; // edx@11
  int result; // eax@11
  int v4; // [sp+0h] [bp-20h]@1
  int v5; // [sp+4h] [bp-1Ch]@1
  int v6; // [sp+8h] [bp-18h]@1
  int v7; // [sp+Ch] [bp-14h]@1
  int v8; // [sp+10h] [bp-10h]@1
  int v9; // [sp+14h] [bp-Ch]@1
  int v10; // [sp+18h] [bp-8h]@1
  int v11; // [sp+1Ch] [bp-4h]@1

  v4 = 304;
  v5 = 16;
  v6 = 320;
  v7 = 32;
  v8 = 304;
  v9 = 32;
  v10 = 320;
  v11 = 48;
  if ( *((_DWORD *)a1 + 1) & 1 )
    *((_DWORD *)a1 + 4) = -*((_DWORD *)a1 + 4);
  if ( *((_DWORD *)a1 + 1) & 4 )
    *((_DWORD *)a1 + 4) = -*((_DWORD *)a1 + 4);
  if ( *((_DWORD *)a1 + 1) & 2 )
    *((_DWORD *)a1 + 5) = 512;
  if ( *((_DWORD *)a1 + 1) & 8 )
    *((_DWORD *)a1 + 5) = -512;
  *((_DWORD *)a1 + 2) += *((_DWORD *)a1 + 4);
  *((_DWORD *)a1 + 3) += *((_DWORD *)a1 + 5);
  if ( ++*((_DWORD *)a1 + 26) > 1 )
    *((_DWORD *)a1 + 26) = 0;
  v1 = &v4 + 4 * *((_DWORD *)a1 + 26);
  v2 = (char *)a1 + 84;
  *(_DWORD *)v2 = *v1;
  *((_DWORD *)v2 + 1) = v1[1];
  *((_DWORD *)v2 + 2) = v1[2];
  *((_DWORD *)v2 + 3) = v1[3];
  result = ++*((_DWORD *)a1 + 30) % 4;
  if ( result == 1 )
    result = NPC_Create(265, *((_DWORD *)a1 + 2), *((_DWORD *)a1 + 3), 0, 0, 0, 0, 256);
  if ( *((_DWORD *)a1 + 30) > 250 )
    result = sub_46F760(a1);
  return result;
}

//----- (00459D80) --------------------------------------------------------
int __cdecl NPC267(int a1)
{
  int v1; // ST10_4@54
  int v2; // ST0C_4@54
  int v3; // ST08_4@54
  int v4; // eax@54
  int v5; // ST0C_4@188
  int v6; // ST08_4@188
  int v7; // eax@188
  int v8; // ST10_4@190
  int v9; // ST0C_4@190
  int v10; // ST08_4@190
  int v11; // eax@190
  int v12; // ST10_4@190
  int v13; // ST0C_4@190
  int v14; // ST08_4@190
  int v15; // eax@190
  int v16; // ST10_4@190
  int v17; // ST08_4@190
  int v18; // eax@190
  int v19; // ST10_4@190
  int v20; // ST08_4@190
  int v21; // eax@190
  int *v22; // eax@192
  int v23; // ecx@192
  int result; // eax@192
  int *v25; // eax@193
  int v26; // ecx@193
  signed int v27; // [sp+4h] [bp-154h]@1
  int v28; // [sp+8h] [bp-150h]@1
  int v29; // [sp+Ch] [bp-14Ch]@1
  int v30; // [sp+10h] [bp-148h]@1
  int v31; // [sp+14h] [bp-144h]@1
  int v32; // [sp+18h] [bp-140h]@1
  int v33; // [sp+1Ch] [bp-13Ch]@1
  int v34; // [sp+20h] [bp-138h]@1
  int v35; // [sp+24h] [bp-134h]@1
  int v36; // [sp+28h] [bp-130h]@1
  int v37; // [sp+2Ch] [bp-12Ch]@1
  int v38; // [sp+30h] [bp-128h]@1
  int v39; // [sp+34h] [bp-124h]@1
  int v40; // [sp+38h] [bp-120h]@1
  int v41; // [sp+3Ch] [bp-11Ch]@1
  int v42; // [sp+40h] [bp-118h]@1
  int v43; // [sp+44h] [bp-114h]@1
  int v44; // [sp+48h] [bp-110h]@1
  int v45; // [sp+4Ch] [bp-10Ch]@1
  int v46; // [sp+50h] [bp-108h]@1
  int v47; // [sp+54h] [bp-104h]@1
  int v48; // [sp+58h] [bp-100h]@1
  int v49; // [sp+5Ch] [bp-FCh]@1
  int v50; // [sp+60h] [bp-F8h]@1
  int v51; // [sp+64h] [bp-F4h]@1
  int v52; // [sp+68h] [bp-F0h]@1
  int v53; // [sp+6Ch] [bp-ECh]@1
  int v54; // [sp+70h] [bp-E8h]@1
  int v55; // [sp+74h] [bp-E4h]@1
  int v56; // [sp+78h] [bp-E0h]@1
  int v57; // [sp+7Ch] [bp-DCh]@1
  int v58; // [sp+80h] [bp-D8h]@1
  int v59; // [sp+84h] [bp-D4h]@1
  int v60; // [sp+88h] [bp-D0h]@1
  int v61; // [sp+8Ch] [bp-CCh]@1
  int v62; // [sp+90h] [bp-C8h]@1
  int v63; // [sp+94h] [bp-C4h]@1
  int v64; // [sp+98h] [bp-C0h]@1
  int v65; // [sp+9Ch] [bp-BCh]@1
  int v66; // [sp+A0h] [bp-B8h]@1
  int v67; // [sp+A4h] [bp-B4h]@1
  int Y_Velocity; // [sp+ACh] [bp-ACh]@98
  int X_Velocity; // [sp+B0h] [bp-A8h]@98
  int i; // [sp+B4h] [bp-A4h]@52
  int v71; // [sp+B8h] [bp-A0h]@1
  int v72; // [sp+BCh] [bp-9Ch]@1
  int v73; // [sp+C0h] [bp-98h]@1
  int v74; // [sp+C4h] [bp-94h]@1
  int v75; // [sp+C8h] [bp-90h]@1
  int v76; // [sp+CCh] [bp-8Ch]@1
  int v77; // [sp+D0h] [bp-88h]@1
  int v78; // [sp+D4h] [bp-84h]@1
  int v79; // [sp+D8h] [bp-80h]@1
  int v80; // [sp+DCh] [bp-7Ch]@1
  int v81; // [sp+E0h] [bp-78h]@1
  int v82; // [sp+E4h] [bp-74h]@1
  int v83; // [sp+E8h] [bp-70h]@1
  int v84; // [sp+ECh] [bp-6Ch]@1
  int v85; // [sp+F0h] [bp-68h]@1
  int v86; // [sp+F4h] [bp-64h]@1
  int v87; // [sp+F8h] [bp-60h]@1
  int v88; // [sp+FCh] [bp-5Ch]@1
  int v89; // [sp+100h] [bp-58h]@1
  int v90; // [sp+104h] [bp-54h]@1
  int v91; // [sp+108h] [bp-50h]@1
  int v92; // [sp+10Ch] [bp-4Ch]@1
  int v93; // [sp+110h] [bp-48h]@1
  int v94; // [sp+114h] [bp-44h]@1
  int v95; // [sp+118h] [bp-40h]@1
  int v96; // [sp+11Ch] [bp-3Ch]@1
  int v97; // [sp+120h] [bp-38h]@1
  int v98; // [sp+124h] [bp-34h]@1
  int v99; // [sp+128h] [bp-30h]@1
  int v100; // [sp+12Ch] [bp-2Ch]@1
  int v101; // [sp+130h] [bp-28h]@1
  int v102; // [sp+134h] [bp-24h]@1
  int v103; // [sp+138h] [bp-20h]@1
  int v104; // [sp+13Ch] [bp-1Ch]@1
  int v105; // [sp+140h] [bp-18h]@1
  int v106; // [sp+144h] [bp-14h]@1
  int v107; // [sp+148h] [bp-10h]@1
  int v108; // [sp+14Ch] [bp-Ch]@1
  int v109; // [sp+150h] [bp-8h]@1
  int v110; // [sp+154h] [bp-4h]@1

  v71 = 0;
  v72 = 0;
  v73 = 0;
  v74 = 0;
  v75 = 0;
  v76 = 64;
  v77 = 40;
  v78 = 112;
  v79 = 40;
  v80 = 64;
  v81 = 80;
  v82 = 112;
  v83 = 80;
  v84 = 64;
  v85 = 120;
  v86 = 112;
  v87 = 120;
  v88 = 64;
  v89 = 160;
  v90 = 112;
  v91 = 160;
  v92 = 64;
  v93 = 200;
  v94 = 112;
  v95 = 200;
  v96 = 64;
  v97 = 240;
  v98 = 112;
  v99 = 240;
  v100 = 64;
  v101 = 280;
  v102 = 112;
  v103 = 280;
  v104 = 64;
  v105 = 320;
  v106 = 112;
  v107 = 0;
  v108 = 160;
  v109 = 40;
  v110 = 208;
  v28 = 0;
  v29 = 0;
  v30 = 0;
  v31 = 0;
  v32 = 0;
  v33 = 112;
  v34 = 40;
  v35 = 160;
  v36 = 40;
  v37 = 112;
  v38 = 80;
  v39 = 160;
  v40 = 80;
  v41 = 112;
  v42 = 120;
  v43 = 160;
  v44 = 120;
  v45 = 112;
  v46 = 160;
  v47 = 160;
  v48 = 160;
  v49 = 112;
  v50 = 200;
  v51 = 160;
  v52 = 200;
  v53 = 112;
  v54 = 240;
  v55 = 160;
  v56 = 240;
  v57 = 112;
  v58 = 280;
  v59 = 160;
  v60 = 280;
  v61 = 112;
  v62 = 320;
  v63 = 160;
  v64 = 40;
  v65 = 160;
  v66 = 80;
  v67 = 208;
  v27 = *(_DWORD *)(a1 + 116);
  if ( v27 <= 100 )
  {
    if ( v27 != 100 )
    {
      switch ( v27 )
      {
        case 0:
          if ( dword_4BBA30 <= Quote_X_Position )
            *(_DWORD *)(a1 + 76) = 2;
          else
            *(_DWORD *)(a1 + 76) = 0;
          if ( *(_DWORD *)(a1 + 76) )
            *(_DWORD *)(a1 + 8) = dword_4BBA30 + 3072;
          else
            *(_DWORD *)(a1 + 8) = dword_4BBA30 - 3072;
          *(_DWORD *)(a1 + 12) = dword_4BBA28;
          goto LABEL_24;
        case 1:
LABEL_24:
          *(_DWORD *)(a1 + 116) = 2;
          goto LABEL_25;
        case 2:
LABEL_25:
          *(_DWORD *)(a1 + 20) += 128;
          if ( ++*(_DWORD *)(a1 + 120) / 2 % 2 )
            *(_DWORD *)(a1 + 104) = 0;
          else
            *(_DWORD *)(a1 + 104) = 3;
          goto LABEL_176;
        case 5:
          *(_DWORD *)(a1 + 116) = 6;
          *(_DWORD *)(a1 + 104) = 1;
          *(_DWORD *)(a1 + 100) = 0;
          goto LABEL_30;
        case 6:
LABEL_30:
          *(_DWORD *)(a1 + 20) += 128;
          if ( ++*(_DWORD *)(a1 + 100) > 40 )
          {
            *(_DWORD *)(a1 + 100) = 0;
            ++*(_DWORD *)(a1 + 104);
          }
          if ( *(_DWORD *)(a1 + 104) > 2 )
            *(_DWORD *)(a1 + 104) = 1;
          goto LABEL_176;
        case 7:
          *(_DWORD *)(a1 + 116) = 8;
          *(_DWORD *)(a1 + 120) = 0;
          *(_DWORD *)(a1 + 104) = 3;
          goto LABEL_36;
        case 8:
LABEL_36:
          *(_DWORD *)(a1 + 20) += 64;
          if ( ++*(_DWORD *)(a1 + 120) > 40 )
            *(_DWORD *)(a1 + 116) = 10;
          goto LABEL_176;
        case 10:
          *(_WORD *)(a1 + 80) |= 4u;
          *(_DWORD *)(a1 + 16) = 0;
          *(_DWORD *)(a1 + 116) = 11;
          *(_DWORD *)(a1 + 120) = 0;
          *(_DWORD *)(a1 + 104) = 1;
          *(_DWORD *)(a1 + 100) = 0;
          *(_DWORD *)(a1 + 112) = *(_DWORD *)(a1 + 64);
          goto LABEL_40;
        case 11:
LABEL_40:
          *(_DWORD *)(a1 + 20) += 128;
          if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
            *(_DWORD *)(a1 + 76) = 2;
          else
            *(_DWORD *)(a1 + 76) = 0;
          if ( *(_DWORD *)(a1 + 4) & 8 )
          {
            if ( *(_DWORD *)(a1 + 64) >= *(_DWORD *)(a1 + 112) - 20 )
            {
              if ( ++*(_DWORD *)(a1 + 100) > 10 )
              {
                *(_DWORD *)(a1 + 100) = 0;
                if ( ++*(_DWORD *)(a1 + 104) > 2 )
                  *(_DWORD *)(a1 + 104) = 1;
              }
            }
            else if ( Tile_On_Which_Quote_Is & 8
                   && Quote_X_Position > *(_DWORD *)(a1 + 8) - 24576
                   && Quote_X_Position < *(_DWORD *)(a1 + 8) + 24576
                   && *(_DWORD *)(a1 + 104) != 6 )
            {
              *(_DWORD *)(a1 + 104) = 6;
              Take_Damage(5);
              sub_40F310(10);
              Play_Sound_Effect(26, 1);
              Quote_Y_Velocity = -1024;
              if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
                Quote_X_Velocity = 1535;
              else
                Quote_X_Velocity = -1535;
              for ( i = 0; i < 100; ++i )
              {
                v1 = 3 * RNG_Range(-512, 512);
                v2 = 3 * RNG_Range(-512, 512);
                v3 = *(_DWORD *)(a1 + 12) + (RNG_Range(-16, 16) << 9);
                v4 = RNG_Range(-16, 16);
                NPC_Create(270, *(_DWORD *)(a1 + 8) + (v4 << 9), v3, v2, v1, 3, 0, 170);
              }
            }
          }
          else
          {
            *(_DWORD *)(a1 + 104) = 4;
          }
          if ( ++*(_DWORD *)(a1 + 120) > 30 || *(_DWORD *)(a1 + 64) < *(_DWORD *)(a1 + 112) - 20 )
          {
            if ( ++*(_DWORD *)(a1 + 108) > 10 )
              *(_DWORD *)(a1 + 108) = 0;
            switch ( *(_DWORD *)(a1 + 108) )
            {
              case 8:
                *(_DWORD *)(a1 + 116) = 20;
                break;
              case 2:
              case 7:
                *(_DWORD *)(a1 + 116) = 100;
                break;
              case 3:
              case 6:
                *(_DWORD *)(a1 + 116) = 30;
                break;
              case 1:
              case 9:
                *(_DWORD *)(a1 + 116) = 40;
                break;
              default:
                *(_DWORD *)(a1 + 116) = 15;
                *(_DWORD *)(a1 + 120) = 0;
                break;
            }
          }
          goto LABEL_176;
        case 15:
          *(_DWORD *)(a1 + 104) = 3;
          ++*(_DWORD *)(a1 + 120);
          if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
            *(_DWORD *)(a1 + 76) = 2;
          else
            *(_DWORD *)(a1 + 76) = 0;
          if ( *(_DWORD *)(a1 + 120) > 20 )
          {
            *(_DWORD *)(a1 + 116) = 16;
            *(_DWORD *)(a1 + 104) = 4;
            *(_DWORD *)(a1 + 100) = 0;
            *(_DWORD *)(a1 + 20) = -1536;
            if ( *(_DWORD *)(a1 + 76) )
              *(_DWORD *)(a1 + 16) = 1024;
            else
              *(_DWORD *)(a1 + 16) = -1024;
          }
          goto LABEL_176;
        case 16:
          *(_DWORD *)(a1 + 20) += 64;
          if ( ++*(_DWORD *)(a1 + 100) > 1 )
          {
            *(_DWORD *)(a1 + 100) = 0;
            ++*(_DWORD *)(a1 + 104);
          }
          if ( *(_DWORD *)(a1 + 104) > 5 )
            *(_DWORD *)(a1 + 104) = 4;
          if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
            *(_DWORD *)(a1 + 76) = 2;
          else
            *(_DWORD *)(a1 + 76) = 0;
          if ( *(_DWORD *)(a1 + 20) > 0 && *(_DWORD *)(a1 + 4) & 8 )
            *(_DWORD *)(a1 + 116) = 17;
          goto LABEL_176;
        case 17:
          *(_DWORD *)(a1 + 116) = 18;
          *(_DWORD *)(a1 + 120) = 0;
          sub_40F310(10);
          Play_Sound_Effect(26, 1);
          goto LABEL_92;
        case 18:
LABEL_92:
          *(_DWORD *)(a1 + 104) = 3;
          ++*(_DWORD *)(a1 + 120);
          *(_DWORD *)(a1 + 16) = 7 * *(_DWORD *)(a1 + 16) / 8;
          *(_DWORD *)(a1 + 20) += 128;
          if ( *(_DWORD *)(a1 + 120) > 10 )
            *(_DWORD *)(a1 + 116) = 10;
          goto LABEL_176;
        case 20:
          *(_DWORD *)(a1 + 116) = 21;
          *(_DWORD *)(a1 + 120) = 0;
          goto LABEL_96;
        case 21:
LABEL_96:
          ++*(_DWORD *)(a1 + 120);
          *(_DWORD *)(a1 + 104) = 6;
          if ( *(_DWORD *)(a1 + 120) > 20 && *(_DWORD *)(a1 + 120) % 3 == 1 )
          {
            Y_Velocity = RNG_Range(-512, 512);
            X_Velocity = 4 * RNG_Range(256, 512);
            if ( *(_DWORD *)(a1 + 76) )
              NPC_Create(
                269,
                *(_DWORD *)(a1 + 8) + 4096,
                *(_DWORD *)(a1 + 12) - 2048,
                X_Velocity,
                Y_Velocity,
                2,
                0,
                256);
            else
              NPC_Create(
                269,
                *(_DWORD *)(a1 + 8) - 4096,
                *(_DWORD *)(a1 + 12) - 2048,
                -X_Velocity,
                Y_Velocity,
                0,
                0,
                256);
            Play_Sound_Effect(39, 1);
          }
          if ( *(_DWORD *)(a1 + 120) > 90 )
            *(_DWORD *)(a1 + 116) = 10;
          goto LABEL_176;
        case 30:
          *(_DWORD *)(a1 + 116) = 31;
          *(_DWORD *)(a1 + 120) = 0;
          *(_WORD *)(a1 + 80) |= 1u;
          *(_WORD *)(a1 + 80) &= 0xFFDFu;
          goto LABEL_106;
        case 31:
LABEL_106:
          *(_DWORD *)(a1 + 104) = 3;
          if ( ++*(_DWORD *)(a1 + 120) > 20 )
          {
            *(_DWORD *)(a1 + 116) = 32;
            *(_DWORD *)(a1 + 120) = 0;
            *(_DWORD *)(a1 + 104) = 7;
            *(_WORD *)(a1 + 80) |= 0x80u;
            *(_DWORD *)(a1 + 164) = 10;
            Play_Sound_Effect(25, 1);
            if ( *(_DWORD *)(a1 + 76) )
              *(_DWORD *)(a1 + 16) = 1535;
            else
              *(_DWORD *)(a1 + 16) = -1535;
          }
          break;
        case 32:
          ++*(_DWORD *)(a1 + 120);
          *(_DWORD *)(a1 + 20) = 0;
          if ( *(_DWORD *)(a1 + 120) / 2 % 2 )
            *(_DWORD *)(a1 + 104) = 7;
          else
            *(_DWORD *)(a1 + 104) = 8;
          if ( *(_DWORD *)(a1 + 120) > 30 )
          {
            *(_DWORD *)(a1 + 120) = 0;
            *(_DWORD *)(a1 + 116) = 18;
            *(_DWORD *)(a1 + 164) = 5;
            *(_WORD *)(a1 + 80) &= 0xFF7Eu;
            *(_WORD *)(a1 + 80) |= 0x20u;
          }
          if ( *(_DWORD *)(a1 + 4) & 1 || *(_DWORD *)(a1 + 4) & 4 )
          {
            *(_DWORD *)(a1 + 116) = 15;
            *(_DWORD *)(a1 + 120) = 0;
            *(_DWORD *)(a1 + 164) = 5;
            *(_WORD *)(a1 + 80) &= 0xFF7Eu;
            *(_WORD *)(a1 + 80) |= 0x20u;
          }
          break;
        case 40:
          *(_DWORD *)(a1 + 104) = 3;
          ++*(_DWORD *)(a1 + 120);
          if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
            *(_DWORD *)(a1 + 76) = 2;
          else
            *(_DWORD *)(a1 + 76) = 0;
          if ( *(_DWORD *)(a1 + 120) > 20 )
          {
            *(_DWORD *)(a1 + 116) = 41;
            *(_DWORD *)(a1 + 104) = 4;
            *(_DWORD *)(a1 + 100) = 0;
            *(_DWORD *)(a1 + 20) = -2048;
            if ( *(_DWORD *)(a1 + 76) )
              *(_DWORD *)(a1 + 16) = 1024;
            else
              *(_DWORD *)(a1 + 16) = -1024;
          }
          break;
        case 41:
          *(_DWORD *)(a1 + 20) += 64;
          if ( ++*(_DWORD *)(a1 + 100) > 1 )
          {
            *(_DWORD *)(a1 + 100) = 0;
            ++*(_DWORD *)(a1 + 104);
          }
          if ( *(_DWORD *)(a1 + 104) > 5 )
            *(_DWORD *)(a1 + 104) = 4;
          if ( Quote_Y_Position > *(_DWORD *)(a1 + 12)
            && Quote_X_Position > *(_DWORD *)(a1 + 8) - 4096
            && Quote_X_Position < *(_DWORD *)(a1 + 8) + 4096 )
          {
            *(_DWORD *)(a1 + 116) = 16;
            *(_DWORD *)(a1 + 20) = 1535;
            *(_DWORD *)(a1 + 16) = 0;
          }
          if ( *(_DWORD *)(a1 + 20) > 0 && *(_DWORD *)(a1 + 4) & 8 )
            *(_DWORD *)(a1 + 116) = 17;
          break;
        default:
          goto LABEL_176;
      }
      goto LABEL_176;
    }
    *(_DWORD *)(a1 + 116) = 101;
    *(_DWORD *)(a1 + 120) = 0;
    *(_WORD *)(a1 + 80) &= 0xFFDBu;
    *(_DWORD *)(a1 + 164) = 0;
    Play_Sound_Effect(29, 1);
    goto LABEL_141;
  }
  if ( v27 > 501 )
  {
    if ( v27 == 510 )
    {
      *(_DWORD *)(a1 + 116) = 511;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 104) = 9;
      *(_DWORD *)(a1 + 32) = *(_DWORD *)(a1 + 8);
      *(_DWORD *)(a1 + 12) += 0x2000;
      *(_WORD *)(a1 + 80) |= 8u;
    }
    else if ( v27 != 511 )
    {
      if ( v27 == 520 )
      {
        *(_DWORD *)(a1 + 164) = 0;
        dword_4BBA28 = -16384;
      }
      goto LABEL_176;
    }
    sub_40F310(2);
    if ( ++*(_DWORD *)(a1 + 120) % 6 == 3 )
      Play_Sound_Effect(25, 1);
    if ( *(_DWORD *)(a1 + 120) / 2 % 2 )
      *(_DWORD *)(a1 + 8) = *(_DWORD *)(a1 + 32);
    else
      *(_DWORD *)(a1 + 8) = *(_DWORD *)(a1 + 32) + 512;
    if ( *(_DWORD *)(a1 + 120) > 352 )
    {
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 116) = 512;
    }
  }
  else
  {
    if ( v27 == 501 )
    {
      *(_DWORD *)(a1 + 104) = 9;
      if ( ++*(_DWORD *)(a1 + 120) / 2 % 2 )
        *(_DWORD *)(a1 + 8) = *(_DWORD *)(a1 + 32);
      else
        *(_DWORD *)(a1 + 8) = *(_DWORD *)(a1 + 32) + 512;
      goto LABEL_176;
    }
    if ( v27 > 103 )
    {
      if ( v27 == 500 )
      {
        sub_4702D0(269, 1);
        *(_WORD *)(a1 + 80) &= 0xFFDFu;
        *(_DWORD *)(a1 + 104) = 4;
        *(_DWORD *)(a1 + 20) += 32;
        *(_DWORD *)(a1 + 16) = 0;
        if ( *(_DWORD *)(a1 + 4) & 8 )
        {
          *(_DWORD *)(a1 + 116) = 501;
          *(_DWORD *)(a1 + 120) = 0;
          *(_DWORD *)(a1 + 32) = *(_DWORD *)(a1 + 8);
          if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
            *(_DWORD *)(a1 + 76) = 2;
          else
            *(_DWORD *)(a1 + 76) = 0;
        }
      }
    }
    else if ( v27 == 103 )
    {
      *(_DWORD *)(a1 + 120) -= 2;
      if ( *(_DWORD *)(a1 + 120) <= 0 )
      {
        *(_WORD *)(a1 + 80) |= 0x24u;
        *(_DWORD *)(a1 + 164) = 5;
        *(_DWORD *)(a1 + 116) = 16;
        *(_DWORD *)(a1 + 20) = -512;
        *(_DWORD *)(a1 + 16) = 0;
      }
    }
    else
    {
      if ( v27 == 101 )
      {
LABEL_141:
        *(_DWORD *)(a1 + 120) += 2;
        if ( *(_DWORD *)(a1 + 120) > 28 )
        {
          *(_DWORD *)(a1 + 116) = 102;
          *(_DWORD *)(a1 + 120) = 0;
          *(_DWORD *)(a1 + 104) = 0;
          *(_DWORD *)(a1 + 32) = Quote_X_Position;
          *(_DWORD *)(a1 + 36) = Quote_Y_Position - 0x4000;
          if ( *(_DWORD *)(a1 + 36) < 0x8000 )
            *(_DWORD *)(a1 + 36) = 0x8000;
          if ( *(_DWORD *)(a1 + 32) < 0x8000 )
            *(_DWORD *)(a1 + 32) = 0x8000;
          if ( *(_DWORD *)(a1 + 32) > 294912 )
            *(_DWORD *)(a1 + 32) = 294912;
        }
        goto LABEL_176;
      }
      if ( v27 == 102 && ++*(_DWORD *)(a1 + 120) > 40 )
      {
        *(_DWORD *)(a1 + 116) = 103;
        *(_DWORD *)(a1 + 120) = 28;
        *(_DWORD *)(a1 + 104) = 4;
        *(_DWORD *)(a1 + 20) = 0;
        *(_DWORD *)(a1 + 8) = *(_DWORD *)(a1 + 32);
        *(_DWORD *)(a1 + 12) = *(_DWORD *)(a1 + 36);
        if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
          *(_DWORD *)(a1 + 76) = 2;
        else
          *(_DWORD *)(a1 + 76) = 0;
      }
    }
  }
LABEL_176:
  if ( *(_DWORD *)(a1 + 116) >= 11 && *(_DWORD *)(a1 + 116) < 501 )
  {
    if ( *(_DWORD *)(a1 + 116) == 102 )
    {
      dword_4BBA30 = *(_DWORD *)(a1 + 32);
      dword_4BBA28 = *(_DWORD *)(a1 + 36);
    }
    else
    {
      dword_4BBA30 = *(_DWORD *)(a1 + 8);
      dword_4BBA28 = *(_DWORD *)(a1 + 12);
    }
  }
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 116) < 512 )
  {
    if ( *(_DWORD *)(a1 + 116) >= 510 )
    {
      v8 = 2 * RNG_Range(-512, 0);
      v9 = RNG_Range(-512, 512);
      v10 = *(_DWORD *)(a1 + 12) - ((336 - *(_DWORD *)(a1 + 120)) / 8 << 9);
      v11 = RNG_Range(-16, 16);
      NPC_Create(270, *(_DWORD *)(a1 + 8) + (v11 << 9), v10, v9, v8, 3, 0, 170);
      v12 = 2 * RNG_Range(-512, 0);
      v13 = RNG_Range(-512, 512);
      v14 = *(_DWORD *)(a1 + 12) - ((336 - *(_DWORD *)(a1 + 120)) / 8 << 9);
      v15 = RNG_Range(-16, 16);
      NPC_Create(270, *(_DWORD *)(a1 + 8) + (v15 << 9), v14, v13, v12, 3, 0, 170);
      v16 = 2 * RNG_Range(-512, 0);
      v17 = *(_DWORD *)(a1 + 12) - ((336 - *(_DWORD *)(a1 + 120)) / 8 << 9);
      v18 = RNG_Range(-16, 16);
      NPC_Create(270, *(_DWORD *)(a1 + 8) + (v18 << 9), v17, 0, v16, 3, 0, 170);
      v19 = 2 * RNG_Range(-512, 0);
      v20 = *(_DWORD *)(a1 + 12) - ((336 - *(_DWORD *)(a1 + 120)) / 8 << 9);
      v21 = RNG_Range(-16, 16);
      NPC_Create(270, *(_DWORD *)(a1 + 8) + (v21 << 9), v20, 0, v19, 3, 0, 170);
    }
    else if ( *(_DWORD *)(a1 + 116) != 102 && *(_DWORD *)(a1 + 116) != 103 && RNG_Range(0, 3) == 2 )
    {
      v5 = *(_DWORD *)(a1 + 16);
      v6 = *(_DWORD *)(a1 + 12) + (RNG_Range(-8, 4) << 9);
      v7 = RNG_Range(-16, 16);
      NPC_Create(270, *(_DWORD *)(a1 + 8) + (v7 << 9), v6, v5, 0, 3, 0, 256);
    }
  }
  if ( *(_DWORD *)(a1 + 76) )
  {
    v25 = &v28 + 4 * *(_DWORD *)(a1 + 104);
    v26 = a1 + 84;
    *(_DWORD *)v26 = *v25;
    *(_DWORD *)(v26 + 4) = v25[1];
    *(_DWORD *)(v26 + 8) = v25[2];
    result = v25[3];
    *(_DWORD *)(v26 + 12) = result;
  }
  else
  {
    v22 = &v71 + 4 * *(_DWORD *)(a1 + 104);
    v23 = a1 + 84;
    *(_DWORD *)v23 = *v22;
    *(_DWORD *)(v23 + 4) = v22[1];
    *(_DWORD *)(v23 + 8) = v22[2];
    result = v22[3];
    *(_DWORD *)(v23 + 12) = result;
  }
  if ( *(_DWORD *)(a1 + 116) == 511 )
  {
    *(_DWORD *)(a1 + 88) += *(_DWORD *)(a1 + 120) / 8;
    *(_DWORD *)(a1 + 144) = (44 - *(_DWORD *)(a1 + 120) / 8) << 9;
    result = a1;
    *(_DWORD *)(a1 + 152) = 2048;
  }
  else if ( *(_DWORD *)(a1 + 116) != 101 && *(_DWORD *)(a1 + 116) != 103 )
  {
    *(_DWORD *)(a1 + 144) = 14336;
  }
  else
  {
    *(_DWORD *)(a1 + 88) += *(_DWORD *)(a1 + 120);
    *(_DWORD *)(a1 + 96) -= *(_DWORD *)(a1 + 120);
    result = (28 - *(_DWORD *)(a1 + 120)) << 9;
    *(_DWORD *)(a1 + 144) = result;
  }
  return result;
}
// 49E63C: using guessed type int Tile_On_Which_Quote_Is;
// 49E66C: using guessed type int Quote_X_Velocity;
// 49E670: using guessed type int Quote_Y_Velocity;
// 4BBA28: using guessed type int dword_4BBA28;
// 4BBA30: using guessed type int dword_4BBA30;

//----- (0045B3D0) --------------------------------------------------------
int __cdecl NPC268(int a1)
{
  int Y_Velocity; // ST24_4@60
  int *v2; // ecx@72
  int v3; // edx@72
  int result; // eax@72
  int *v5; // ecx@73
  int v6; // edx@73
  int v7; // [sp+8h] [bp-150h]@1
  int v8; // [sp+Ch] [bp-14Ch]@1
  int v9; // [sp+10h] [bp-148h]@1
  int v10; // [sp+14h] [bp-144h]@1
  int v11; // [sp+18h] [bp-140h]@1
  int v12; // [sp+1Ch] [bp-13Ch]@1
  int v13; // [sp+20h] [bp-138h]@1
  int v14; // [sp+24h] [bp-134h]@1
  int v15; // [sp+28h] [bp-130h]@1
  int v16; // [sp+2Ch] [bp-12Ch]@1
  int v17; // [sp+30h] [bp-128h]@1
  int v18; // [sp+34h] [bp-124h]@1
  int v19; // [sp+38h] [bp-120h]@1
  int v20; // [sp+3Ch] [bp-11Ch]@1
  int v21; // [sp+40h] [bp-118h]@1
  int v22; // [sp+44h] [bp-114h]@1
  int v23; // [sp+48h] [bp-110h]@1
  int v24; // [sp+4Ch] [bp-10Ch]@1
  int v25; // [sp+50h] [bp-108h]@1
  int v26; // [sp+54h] [bp-104h]@1
  int v27; // [sp+58h] [bp-100h]@1
  int v28; // [sp+5Ch] [bp-FCh]@1
  int v29; // [sp+60h] [bp-F8h]@1
  int v30; // [sp+64h] [bp-F4h]@1
  int v31; // [sp+68h] [bp-F0h]@1
  int v32; // [sp+6Ch] [bp-ECh]@1
  int v33; // [sp+70h] [bp-E8h]@1
  int v34; // [sp+74h] [bp-E4h]@1
  int v35; // [sp+78h] [bp-E0h]@1
  int v36; // [sp+7Ch] [bp-DCh]@1
  int v37; // [sp+80h] [bp-D8h]@1
  int v38; // [sp+84h] [bp-D4h]@1
  int v39; // [sp+88h] [bp-D0h]@1
  int v40; // [sp+8Ch] [bp-CCh]@1
  int v41; // [sp+90h] [bp-C8h]@1
  int v42; // [sp+94h] [bp-C4h]@1
  int v43; // [sp+98h] [bp-C0h]@1
  int v44; // [sp+9Ch] [bp-BCh]@1
  int v45; // [sp+A0h] [bp-B8h]@1
  int v46; // [sp+A4h] [bp-B4h]@1
  int X_Velocity; // [sp+ACh] [bp-ACh]@60
  int v48; // [sp+B0h] [bp-A8h]@1
  int v49; // [sp+B4h] [bp-A4h]@1
  int v50; // [sp+B8h] [bp-A0h]@1
  int v51; // [sp+BCh] [bp-9Ch]@1
  int v52; // [sp+C0h] [bp-98h]@1
  int v53; // [sp+C4h] [bp-94h]@1
  int v54; // [sp+C8h] [bp-90h]@1
  int v55; // [sp+CCh] [bp-8Ch]@1
  int v56; // [sp+D0h] [bp-88h]@1
  int v57; // [sp+D4h] [bp-84h]@1
  int v58; // [sp+D8h] [bp-80h]@1
  int v59; // [sp+DCh] [bp-7Ch]@1
  int v60; // [sp+E0h] [bp-78h]@1
  int v61; // [sp+E4h] [bp-74h]@1
  int v62; // [sp+E8h] [bp-70h]@1
  int v63; // [sp+ECh] [bp-6Ch]@1
  int v64; // [sp+F0h] [bp-68h]@1
  int v65; // [sp+F4h] [bp-64h]@1
  int v66; // [sp+F8h] [bp-60h]@1
  int v67; // [sp+FCh] [bp-5Ch]@1
  int v68; // [sp+100h] [bp-58h]@1
  int v69; // [sp+104h] [bp-54h]@1
  int v70; // [sp+108h] [bp-50h]@1
  int v71; // [sp+10Ch] [bp-4Ch]@1
  int v72; // [sp+110h] [bp-48h]@1
  int v73; // [sp+114h] [bp-44h]@1
  int v74; // [sp+118h] [bp-40h]@1
  int v75; // [sp+11Ch] [bp-3Ch]@1
  int v76; // [sp+120h] [bp-38h]@1
  int v77; // [sp+124h] [bp-34h]@1
  int v78; // [sp+128h] [bp-30h]@1
  int v79; // [sp+12Ch] [bp-2Ch]@1
  int v80; // [sp+130h] [bp-28h]@1
  int v81; // [sp+134h] [bp-24h]@1
  int v82; // [sp+138h] [bp-20h]@1
  int v83; // [sp+13Ch] [bp-1Ch]@1
  int v84; // [sp+140h] [bp-18h]@1
  int v85; // [sp+144h] [bp-14h]@1
  int v86; // [sp+148h] [bp-10h]@1
  int v87; // [sp+14Ch] [bp-Ch]@1
  char v88; // [sp+157h] [bp-1h]@58

  v48 = 0;
  v49 = 0;
  v50 = 40;
  v51 = 40;
  v52 = 40;
  v53 = 0;
  v54 = 80;
  v55 = 40;
  v56 = 80;
  v57 = 0;
  v58 = 120;
  v59 = 40;
  v60 = 0;
  v61 = 0;
  v62 = 40;
  v63 = 40;
  v64 = 120;
  v65 = 0;
  v66 = 160;
  v67 = 40;
  v68 = 0;
  v69 = 0;
  v70 = 40;
  v71 = 40;
  v72 = 40;
  v73 = 80;
  v74 = 80;
  v75 = 120;
  v76 = 0;
  v77 = 80;
  v78 = 40;
  v79 = 120;
  v80 = 240;
  v81 = 0;
  v82 = 280;
  v83 = 40;
  v84 = 280;
  v85 = 0;
  v86 = 320;
  v87 = 40;
  v7 = 0;
  v8 = 40;
  v9 = 40;
  v10 = 80;
  v11 = 40;
  v12 = 40;
  v13 = 80;
  v14 = 80;
  v15 = 80;
  v16 = 40;
  v17 = 120;
  v18 = 80;
  v19 = 0;
  v20 = 40;
  v21 = 40;
  v22 = 80;
  v23 = 120;
  v24 = 40;
  v25 = 160;
  v26 = 80;
  v27 = 0;
  v28 = 40;
  v29 = 40;
  v30 = 80;
  v31 = 160;
  v32 = 80;
  v33 = 200;
  v34 = 120;
  v35 = 120;
  v36 = 80;
  v37 = 160;
  v38 = 120;
  v39 = 240;
  v40 = 40;
  v41 = 280;
  v42 = 80;
  v43 = 280;
  v44 = 40;
  v45 = 320;
  v46 = 80;
  if ( *(_DWORD *)(a1 + 8) < Quote_X_Position - 163840
    || *(_DWORD *)(a1 + 8) > Quote_X_Position + 163840
    || *(_DWORD *)(a1 + 12) < Quote_Y_Position - 122880
    || *(_DWORD *)(a1 + 12) > Quote_Y_Position + 122880 )
  {
    *(_DWORD *)(a1 + 116) = 1;
  }
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 12) += 4096;
      goto LABEL_8;
    case 1:
LABEL_8:
      if ( ++*(_DWORD *)(a1 + 100) > 20 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 1 )
        *(_DWORD *)(a1 + 104) = 0;
      if ( *(_DWORD *)(a1 + 8) < Quote_X_Position + 57344
        && *(_DWORD *)(a1 + 8) > Quote_X_Position - 57344
        && *(_DWORD *)(a1 + 8) < Quote_X_Position + 24576
        && *(_DWORD *)(a1 + 8) > Quote_X_Position - 57344 )
      {
        *(_DWORD *)(a1 + 116) = 10;
      }
      if ( *(_BYTE *)(a1 + 156) )
        *(_DWORD *)(a1 + 116) = 10;
      break;
    case 0xA:
      *(_DWORD *)(a1 + 116) = 11;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 100) = 0;
      if ( Quote_X_Position >= *(_DWORD *)(a1 + 8) )
        *(_DWORD *)(a1 + 76) = 2;
      else
        *(_DWORD *)(a1 + 76) = 0;
      goto LABEL_23;
    case 0xB:
LABEL_23:
      if ( *(_DWORD *)(a1 + 76) )
        *(_DWORD *)(a1 + 16) = 512;
      else
        *(_DWORD *)(a1 + 16) = -512;
      if ( *(_DWORD *)(a1 + 8) < Quote_X_Position + 0x8000 && *(_DWORD *)(a1 + 8) > Quote_X_Position - 0x8000 )
      {
        *(_DWORD *)(a1 + 116) = 20;
        *(_DWORD *)(a1 + 120) = 0;
      }
      if ( *(_DWORD *)(a1 + 16) < 0 && *(_DWORD *)(a1 + 4) & 1 )
      {
        *(_DWORD *)(a1 + 116) = 20;
        *(_DWORD *)(a1 + 120) = 0;
      }
      if ( *(_DWORD *)(a1 + 16) > 0 && *(_DWORD *)(a1 + 4) & 4 )
      {
        *(_DWORD *)(a1 + 116) = 20;
        *(_DWORD *)(a1 + 120) = 0;
      }
      if ( ++*(_DWORD *)(a1 + 100) > 4 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 5 )
        *(_DWORD *)(a1 + 104) = 2;
      break;
    case 0x14:
      *(_DWORD *)(a1 + 16) = 0;
      *(_DWORD *)(a1 + 104) = 6;
      if ( ++*(_DWORD *)(a1 + 120) > 10 )
      {
        *(_DWORD *)(a1 + 116) = 30;
        *(_DWORD *)(a1 + 20) = -1535;
        if ( *(_DWORD *)(a1 + 76) )
          *(_DWORD *)(a1 + 16) = 512;
        else
          *(_DWORD *)(a1 + 16) = -512;
        Play_Sound_Effect(108, 1);
      }
      break;
    case 0x1E:
      *(_DWORD *)(a1 + 104) = 7;
      if ( *(_DWORD *)(a1 + 4) & 8 )
      {
        *(_DWORD *)(a1 + 116) = 40;
        *(_DWORD *)(a1 + 120) = 0;
        sub_40F310(20);
        Play_Sound_Effect(26, 1);
      }
      break;
    case 0x28:
      *(_DWORD *)(a1 + 16) = 0;
      *(_DWORD *)(a1 + 104) = 6;
      if ( ++*(_DWORD *)(a1 + 120) > 30 )
        *(_DWORD *)(a1 + 116) = 50;
      break;
    case 0x32:
      *(_DWORD *)(a1 + 116) = 51;
      *(_DWORD *)(a1 + 120) = 0;
      if ( Quote_X_Position >= *(_DWORD *)(a1 + 8) )
        *(_DWORD *)(a1 + 76) = 2;
      else
        *(_DWORD *)(a1 + 76) = 0;
      goto LABEL_55;
    case 0x33:
LABEL_55:
      if ( ++*(_DWORD *)(a1 + 120) > 30 && *(_DWORD *)(a1 + 120) % 4 == 1 )
      {
        if ( *(_DWORD *)(a1 + 76) )
          v88 = -8;
        else
          v88 = -120;
        v88 += RNG_Range(-16, 16);
        Y_Velocity = 5 * SIN_function(v88);
        X_Velocity = 5 * COS_function(v88);
        NPC_Create(11, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12) + 2048, X_Velocity, Y_Velocity, 0, 0, 256);
        Play_Sound_Effect(12, 1);
      }
      if ( *(_DWORD *)(a1 + 120) < 50 && *(_DWORD *)(a1 + 120) / 2 % 2 )
        *(_DWORD *)(a1 + 104) = 9;
      else
        *(_DWORD *)(a1 + 104) = 8;
      if ( *(_DWORD *)(a1 + 120) > 82 )
      {
        *(_DWORD *)(a1 + 116) = 10;
        if ( Quote_X_Position >= *(_DWORD *)(a1 + 8) )
          *(_DWORD *)(a1 + 76) = 2;
        else
          *(_DWORD *)(a1 + 76) = 0;
      }
      break;
    default:
      break;
  }
  *(_DWORD *)(a1 + 20) += 51;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 76) )
  {
    v5 = &v7 + 4 * *(_DWORD *)(a1 + 104);
    v6 = a1 + 84;
    *(_DWORD *)v6 = *v5;
    *(_DWORD *)(v6 + 4) = v5[1];
    result = v5[2];
    *(_DWORD *)(v6 + 8) = result;
    *(_DWORD *)(v6 + 12) = v5[3];
  }
  else
  {
    v2 = &v48 + 4 * *(_DWORD *)(a1 + 104);
    v3 = a1 + 84;
    *(_DWORD *)v3 = *v2;
    *(_DWORD *)(v3 + 4) = v2[1];
    result = v2[2];
    *(_DWORD *)(v3 + 8) = result;
    *(_DWORD *)(v3 + 12) = v2[3];
  }
  return result;
}

//----- (0045BCB0) --------------------------------------------------------
int __cdecl NPC269(int a1)
{
  int *v1; // edx@22
  int result; // eax@22
  int *v3; // edx@23
  int v4; // [sp+0h] [bp-64h]@1
  int v5; // [sp+4h] [bp-60h]@1
  int v6; // [sp+8h] [bp-5Ch]@1
  int v7; // [sp+Ch] [bp-58h]@1
  int v8; // [sp+10h] [bp-54h]@1
  int v9; // [sp+14h] [bp-50h]@1
  int v10; // [sp+18h] [bp-4Ch]@1
  int v11; // [sp+1Ch] [bp-48h]@1
  int v12; // [sp+20h] [bp-44h]@1
  int v13; // [sp+24h] [bp-40h]@1
  int v14; // [sp+28h] [bp-3Ch]@1
  int v15; // [sp+2Ch] [bp-38h]@1
  int v16; // [sp+30h] [bp-34h]@1
  int v17; // [sp+34h] [bp-30h]@1
  int v18; // [sp+38h] [bp-2Ch]@1
  int v19; // [sp+3Ch] [bp-28h]@1
  int v20; // [sp+40h] [bp-24h]@1
  int v21; // [sp+44h] [bp-20h]@1
  int v22; // [sp+48h] [bp-1Ch]@1
  int v23; // [sp+4Ch] [bp-18h]@1
  int v24; // [sp+50h] [bp-14h]@1
  int v25; // [sp+54h] [bp-10h]@1
  int v26; // [sp+58h] [bp-Ch]@1
  int v27; // [sp+5Ch] [bp-8h]@1
  int v28; // [sp+60h] [bp-4h]@1

  v17 = 232;
  v18 = 0;
  v19 = 248;
  v20 = 16;
  v21 = 248;
  v22 = 0;
  v23 = 264;
  v24 = 16;
  v25 = 248;
  v26 = 16;
  v27 = 264;
  v28 = 32;
  v5 = 232;
  v6 = 32;
  v7 = 248;
  v8 = 48;
  v9 = 248;
  v10 = 32;
  v11 = 264;
  v12 = 48;
  v13 = 248;
  v14 = 48;
  v15 = 264;
  v16 = 64;
  v4 = *(_DWORD *)(a1 + 116);
  if ( v4 )
  {
    if ( v4 != 1 )
      goto LABEL_21;
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 24) = *(_DWORD *)(a1 + 16);
    *(_DWORD *)(a1 + 28) = *(_DWORD *)(a1 + 20);
  }
  if ( *(_DWORD *)(a1 + 24) < 0 && *(_DWORD *)(a1 + 4) & 1 )
  {
    *(_DWORD *)(a1 + 76) = 2;
    *(_DWORD *)(a1 + 24) = -*(_DWORD *)(a1 + 24);
  }
  else if ( *(_DWORD *)(a1 + 24) > 0 && *(_DWORD *)(a1 + 4) & 4 )
  {
    *(_DWORD *)(a1 + 76) = 0;
    *(_DWORD *)(a1 + 24) = -*(_DWORD *)(a1 + 24);
  }
  else if ( *(_DWORD *)(a1 + 28) < 0 && *(_DWORD *)(a1 + 4) & 2 )
  {
    *(_DWORD *)(a1 + 28) = -*(_DWORD *)(a1 + 28);
  }
  else if ( *(_DWORD *)(a1 + 28) > 0 && *(_DWORD *)(a1 + 4) & 8 )
  {
    *(_DWORD *)(a1 + 28) = -*(_DWORD *)(a1 + 28);
  }
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 24);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 28);
  if ( ++*(_DWORD *)(a1 + 100) > 2 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    ++*(_DWORD *)(a1 + 104);
  }
  if ( *(_DWORD *)(a1 + 104) > 2 )
    *(_DWORD *)(a1 + 104) = 0;
LABEL_21:
  if ( *(_DWORD *)(a1 + 76) )
  {
    v3 = &v5 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v3;
    *(_DWORD *)(result + 4) = v3[1];
    *(_DWORD *)(result + 8) = v3[2];
    *(_DWORD *)(result + 12) = v3[3];
  }
  else
  {
    v1 = &v17 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v1;
    *(_DWORD *)(result + 4) = v1[1];
    *(_DWORD *)(result + 8) = v1[2];
    *(_DWORD *)(result + 12) = v1[3];
  }
  return result;
}

//----- (0045BF10) --------------------------------------------------------
int __cdecl NPC270(int a1)
{
  int *v1; // edx@34
  int result; // eax@34
  int v3; // [sp+4h] [bp-20h]@1
  int v4; // [sp+8h] [bp-1Ch]@1
  int v5; // [sp+Ch] [bp-18h]@1
  int v6; // [sp+10h] [bp-14h]@1
  int v7; // [sp+14h] [bp-10h]@1
  int v8; // [sp+18h] [bp-Ch]@1
  int v9; // [sp+1Ch] [bp-8h]@1
  int v10; // [sp+20h] [bp-4h]@1

  v3 = 170;
  v4 = 34;
  v5 = 174;
  v6 = 38;
  v7 = 170;
  v8 = 42;
  v9 = 174;
  v10 = 46;
  if ( *(_DWORD *)(a1 + 76) != 3 && *(_DWORD *)(a1 + 76) != 1 )
  {
    if ( *(_DWORD *)(a1 + 76) == 2 )
    {
      if ( !*(_DWORD *)(a1 + 116) )
      {
        *(_DWORD *)(a1 + 116) = 1;
        *(_WORD *)(a1 + 80) |= 8u;
        *(_DWORD *)(a1 + 16) = 3 * RNG_Range(-512, 512);
        *(_DWORD *)(a1 + 20) = 3 * RNG_Range(-512, 512);
        *(_DWORD *)(a1 + 108) = RNG_Range(16, 51);
        *(_DWORD *)(a1 + 112) = RNG_Range(128, 256);
      }
      if ( *(_DWORD *)(a1 + 8) < *(_DWORD *)(*(_DWORD *)(a1 + 168) + 8) )
        *(_DWORD *)(a1 + 16) += 512 / *(_DWORD *)(a1 + 108);
      if ( *(_DWORD *)(a1 + 8) > *(_DWORD *)(*(_DWORD *)(a1 + 168) + 8) )
        *(_DWORD *)(a1 + 16) -= 512 / *(_DWORD *)(a1 + 108);
      if ( *(_DWORD *)(a1 + 12) < *(_DWORD *)(*(_DWORD *)(a1 + 168) + 12) )
        *(_DWORD *)(a1 + 20) += 512 / *(_DWORD *)(a1 + 108);
      if ( *(_DWORD *)(a1 + 12) > *(_DWORD *)(*(_DWORD *)(a1 + 168) + 12) )
        *(_DWORD *)(a1 + 20) -= 512 / *(_DWORD *)(a1 + 108);
      if ( *(_DWORD *)(a1 + 16) > 2 * *(_DWORD *)(a1 + 112) )
        *(_DWORD *)(a1 + 16) = 2 * *(_DWORD *)(a1 + 112);
      if ( *(_DWORD *)(a1 + 16) < -2 * *(_DWORD *)(a1 + 112) )
        *(_DWORD *)(a1 + 16) = -2 * *(_DWORD *)(a1 + 112);
      if ( *(_DWORD *)(a1 + 20) > 3 * *(_DWORD *)(a1 + 112) )
        *(_DWORD *)(a1 + 20) = 3 * *(_DWORD *)(a1 + 112);
      if ( *(_DWORD *)(a1 + 20) < -3 * *(_DWORD *)(a1 + 112) )
        *(_DWORD *)(a1 + 20) = -3 * *(_DWORD *)(a1 + 112);
      *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
      *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
    }
  }
  else
  {
    if ( *(_DWORD *)(a1 + 76) == 3 )
      *(_DWORD *)(a1 + 20) += 64;
    if ( *(_DWORD *)(a1 + 76) == 1 )
      *(_DWORD *)(a1 + 20) -= 64;
    ++*(_DWORD *)(a1 + 120);
    if ( *(_DWORD *)(a1 + 20) > 1535 )
      *(_DWORD *)(a1 + 20) = 1535;
    *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
    *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
    if ( *(_DWORD *)(a1 + 120) > 50 )
      *(_BYTE *)a1 = 0;
    if ( *(_DWORD *)(a1 + 4) & 0xFF )
      *(_BYTE *)a1 = 0;
  }
  v1 = &v3 + 4 * RNG_Range(0, 1);
  result = a1 + 84;
  *(_DWORD *)result = *v1;
  *(_DWORD *)(result + 4) = v1[1];
  *(_DWORD *)(result + 8) = v1[2];
  *(_DWORD *)(result + 12) = v1[3];
  return result;
}

//----- (0045C230) --------------------------------------------------------
void *__cdecl NPC271(void *a1)
{
  void *result; // eax@3
  signed int v2; // [sp+0h] [bp-4h]@8

  if ( *((_DWORD *)a1 + 4) >= 0 || *((_DWORD *)a1 + 2) >= -8192 )
  {
    if ( *((_DWORD *)a1 + 4) <= 0 || *((_DWORD *)a1 + 2) <= (*(signed __int16 *)&word_49E586 << 13) + 0x2000 )
    {
      if ( !*((_DWORD *)a1 + 29) )
      {
        *((_DWORD *)a1 + 29) = 1;
        v2 = RNG_Range(0, 9);
        if ( v2 == 9 )
        {
          *((_DWORD *)a1 + 21) = 0;
          *((_DWORD *)a1 + 23) = 32;
          *((_DWORD *)a1 + 22) = 64;
          *((_DWORD *)a1 + 24) = 96;
          *((_DWORD *)a1 + 35) = 0x2000;
          *((_DWORD *)a1 + 37) = 0x2000;
          *((_DWORD *)a1 + 36) = 0x2000;
          *((_DWORD *)a1 + 38) = 0x2000;
          *((_DWORD *)a1 + 31) = 6144;
          *((_DWORD *)a1 + 33) = 6144;
          *((_DWORD *)a1 + 32) = 6144;
          *((_DWORD *)a1 + 34) = 6144;
        }
        else
        {
          *((_DWORD *)a1 + 21) = 16 * (v2 % 3) + 112;
          *((_DWORD *)a1 + 22) = 16 * (v2 / 3);
          *((_DWORD *)a1 + 23) = *((_DWORD *)a1 + 21) + 16;
          *((_DWORD *)a1 + 24) = *((_DWORD *)a1 + 22) + 16;
        }
        if ( *((_DWORD *)a1 + 19) )
          *((_DWORD *)a1 + 4) = 2 * RNG_Range(256, 512);
        else
          *((_DWORD *)a1 + 4) = -2 * RNG_Range(256, 512);
        *((_DWORD *)a1 + 5) = RNG_Range(-512, 512);
      }
      if ( *((_DWORD *)a1 + 5) < 0 && *((_DWORD *)a1 + 3) - *((_DWORD *)a1 + 32) < 4096 )
      {
        *((_DWORD *)a1 + 5) = -*((_DWORD *)a1 + 5);
        Create_Animated_Effect(*((_DWORD *)a1 + 2), *((_DWORD *)a1 + 3) - 4096, 13, 0);
        Create_Animated_Effect(*((_DWORD *)a1 + 2), *((_DWORD *)a1 + 3) - 4096, 13, 0);
      }
      if ( *((_DWORD *)a1 + 5) > 0 && *((_DWORD *)a1 + 34) + *((_DWORD *)a1 + 3) > 118784 )
      {
        *((_DWORD *)a1 + 5) = -*((_DWORD *)a1 + 5);
        Create_Animated_Effect(*((_DWORD *)a1 + 2), *((_DWORD *)a1 + 3) + 4096, 13, 0);
        Create_Animated_Effect(*((_DWORD *)a1 + 2), *((_DWORD *)a1 + 3) + 4096, 13, 0);
      }
      *((_DWORD *)a1 + 2) += *((_DWORD *)a1 + 4);
      result = a1;
      *((_DWORD *)a1 + 3) += *((_DWORD *)a1 + 5);
    }
    else
    {
      result = (void *)sub_46F760(a1);
    }
  }
  else
  {
    result = (void *)sub_46F760(a1);
  }
  return result;
}

//----- (0045C500) --------------------------------------------------------
int __cdecl NPC272(int a1)
{
  int result; // eax@1
  int v2; // ST14_4@7
  int v3; // eax@7
  int v4; // [sp+0h] [bp-4h]@1

  result = a1;
  v4 = *(_DWORD *)(a1 + 116);
  if ( v4 )
  {
    if ( v4 != 1 )
      return result;
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 120) = RNG_Range(0, 200);
  }
  if ( *(_DWORD *)(a1 + 120) )
  {
    result = a1;
    --*(_DWORD *)(a1 + 120);
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 0;
    v2 = *(_DWORD *)(a1 + 76);
    v3 = RNG_Range(-32, 32);
    result = NPC_Create(271, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12) + (v3 << 9), 0, 0, v2, 0, 256);
  }
  return result;
}

//----- (0045C5A0) --------------------------------------------------------
int __cdecl NPC273(void *a1)
{
  int result; // eax@6
  int *v2; // eax@11
  char *v3; // ecx@11
  int v4; // [sp+0h] [bp-34h]@1
  int v5; // [sp+4h] [bp-30h]@1
  int v6; // [sp+8h] [bp-2Ch]@1
  int v7; // [sp+Ch] [bp-28h]@1
  int v8; // [sp+10h] [bp-24h]@1
  int v9; // [sp+14h] [bp-20h]@1
  int v10; // [sp+18h] [bp-1Ch]@1
  int v11; // [sp+1Ch] [bp-18h]@1
  int v12; // [sp+20h] [bp-14h]@1
  int v13; // [sp+24h] [bp-10h]@1
  int v14; // [sp+28h] [bp-Ch]@1
  int v15; // [sp+2Ch] [bp-8h]@1
  int v16; // [sp+30h] [bp-4h]@1

  v5 = 248;
  v6 = 40;
  v7 = 272;
  v8 = 64;
  v9 = 272;
  v10 = 40;
  v11 = 296;
  v12 = 64;
  v13 = 296;
  v14 = 40;
  v15 = 320;
  v16 = 64;
  v4 = *((_DWORD *)a1 + 29);
  if ( v4 )
  {
    if ( v4 != 1 )
      goto LABEL_11;
  }
  else
  {
    *((_DWORD *)a1 + 29) = 1;
  }
  *((_DWORD *)a1 + 2) += *((_DWORD *)a1 + 4);
  *((_DWORD *)a1 + 3) += *((_DWORD *)a1 + 5);
  if ( *((_DWORD *)a1 + 1) & 0xFF )
  {
    NPC_Create(4, *((_DWORD *)a1 + 2), *((_DWORD *)a1 + 3), 0, 0, 0, 0, 256);
    NPC_Create(4, *((_DWORD *)a1 + 2), *((_DWORD *)a1 + 3), 0, 0, 0, 0, 256);
    NPC_Create(4, *((_DWORD *)a1 + 2), *((_DWORD *)a1 + 3), 0, 0, 0, 0, 256);
    return sub_46F760(a1);
  }
  if ( !(++*((_DWORD *)a1 + 30) % 5) )
    Play_Sound_Effect(110, 1);
  if ( ++*((_DWORD *)a1 + 26) > 2 )
    *((_DWORD *)a1 + 26) = 0;
LABEL_11:
  v2 = &v5 + 4 * *((_DWORD *)a1 + 26);
  v3 = (char *)a1 + 84;
  *(_DWORD *)v3 = *v2;
  *((_DWORD *)v3 + 1) = v2[1];
  *((_DWORD *)v3 + 2) = v2[2];
  result = v2[3];
  *((_DWORD *)v3 + 3) = result;
  return result;
}

//----- (0045C750) --------------------------------------------------------
int __cdecl NPC274(int a1)
{
  int *v1; // eax@33
  int v2; // ecx@33
  int result; // eax@33
  int *v4; // eax@34
  int v5; // ecx@34
  int v6; // [sp+4h] [bp-D0h]@1
  int v7; // [sp+8h] [bp-CCh]@1
  int v8; // [sp+Ch] [bp-C8h]@1
  int v9; // [sp+10h] [bp-C4h]@1
  int v10; // [sp+14h] [bp-C0h]@1
  int v11; // [sp+18h] [bp-BCh]@1
  int v12; // [sp+1Ch] [bp-B8h]@1
  int v13; // [sp+20h] [bp-B4h]@1
  int v14; // [sp+24h] [bp-B0h]@1
  int v15; // [sp+28h] [bp-ACh]@1
  int v16; // [sp+2Ch] [bp-A8h]@1
  int v17; // [sp+30h] [bp-A4h]@1
  int v18; // [sp+34h] [bp-A0h]@1
  int v19; // [sp+38h] [bp-9Ch]@1
  int v20; // [sp+3Ch] [bp-98h]@1
  int v21; // [sp+40h] [bp-94h]@1
  int v22; // [sp+44h] [bp-90h]@1
  int v23; // [sp+48h] [bp-8Ch]@1
  int v24; // [sp+4Ch] [bp-88h]@1
  int v25; // [sp+50h] [bp-84h]@1
  int v26; // [sp+54h] [bp-80h]@1
  int v27; // [sp+58h] [bp-7Ch]@1
  int v28; // [sp+5Ch] [bp-78h]@1
  int v29; // [sp+60h] [bp-74h]@1
  int Y_Velocity; // [sp+64h] [bp-70h]@22
  int X_Velocity; // [sp+68h] [bp-6Ch]@22
  int v32; // [sp+6Ch] [bp-68h]@1
  int v33; // [sp+70h] [bp-64h]@1
  int v34; // [sp+74h] [bp-60h]@1
  int v35; // [sp+78h] [bp-5Ch]@1
  int v36; // [sp+7Ch] [bp-58h]@1
  int v37; // [sp+80h] [bp-54h]@1
  int v38; // [sp+84h] [bp-50h]@1
  int v39; // [sp+88h] [bp-4Ch]@1
  int v40; // [sp+8Ch] [bp-48h]@1
  int v41; // [sp+90h] [bp-44h]@1
  int v42; // [sp+94h] [bp-40h]@1
  int v43; // [sp+98h] [bp-3Ch]@1
  int v44; // [sp+9Ch] [bp-38h]@1
  int v45; // [sp+A0h] [bp-34h]@1
  int v46; // [sp+A4h] [bp-30h]@1
  int v47; // [sp+A8h] [bp-2Ch]@1
  int v48; // [sp+ACh] [bp-28h]@1
  int v49; // [sp+B0h] [bp-24h]@1
  int v50; // [sp+B4h] [bp-20h]@1
  int v51; // [sp+B8h] [bp-1Ch]@1
  int v52; // [sp+BCh] [bp-18h]@1
  int v53; // [sp+C0h] [bp-14h]@1
  int v54; // [sp+C4h] [bp-10h]@1
  int v55; // [sp+C8h] [bp-Ch]@1
  unsigned __int8 v56; // [sp+D3h] [bp-1h]@22

  v32 = 0;
  v33 = 0;
  v34 = 32;
  v35 = 40;
  v36 = 32;
  v37 = 0;
  v38 = 64;
  v39 = 40;
  v40 = 64;
  v41 = 0;
  v42 = 96;
  v43 = 40;
  v44 = 64;
  v45 = 80;
  v46 = 96;
  v47 = 120;
  v48 = 96;
  v49 = 80;
  v50 = 128;
  v51 = 120;
  v52 = 96;
  v53 = 0;
  v54 = 128;
  v55 = 40;
  v6 = 0;
  v7 = 40;
  v8 = 32;
  v9 = 80;
  v10 = 32;
  v11 = 40;
  v12 = 64;
  v13 = 80;
  v14 = 64;
  v15 = 40;
  v16 = 96;
  v17 = 80;
  v18 = 64;
  v19 = 120;
  v20 = 96;
  v21 = 160;
  v22 = 96;
  v23 = 120;
  v24 = 128;
  v25 = 160;
  v26 = 96;
  v27 = 40;
  v28 = 128;
  v29 = 80;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 12) -= 4096;
      *(_DWORD *)(a1 + 32) = *(_DWORD *)(a1 + 8);
      goto LABEL_3;
    case 1:
LABEL_3:
      *(_DWORD *)(a1 + 16) = 0;
      *(_DWORD *)(a1 + 116) = 2;
      *(_DWORD *)(a1 + 104) = 0;
      goto LABEL_4;
    case 2:
LABEL_4:
      if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
        *(_DWORD *)(a1 + 76) = 2;
      else
        *(_DWORD *)(a1 + 76) = 0;
      if ( ++*(_DWORD *)(a1 + 100) > 40 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 1 )
        *(_DWORD *)(a1 + 104) = 0;
      if ( *(_BYTE *)(a1 + 156) )
        *(_DWORD *)(a1 + 116) = 10;
      break;
    case 0xA:
      *(_DWORD *)(a1 + 116) = 11;
      *(_DWORD *)(a1 + 104) = 2;
      *(_DWORD *)(a1 + 120) = 0;
      goto LABEL_15;
    case 0xB:
LABEL_15:
      if ( ++*(_DWORD *)(a1 + 120) > 10 )
      {
        *(_DWORD *)(a1 + 116) = 12;
        *(_DWORD *)(a1 + 104) = 3;
        *(_DWORD *)(a1 + 20) = -1536;
        *(_DWORD *)(a1 + 108) = 0;
        if ( *(_DWORD *)(a1 + 32) <= *(_DWORD *)(a1 + 8) )
          *(_DWORD *)(a1 + 16) = -512;
        else
          *(_DWORD *)(a1 + 16) = 512;
      }
      break;
    case 0xC:
      if ( *(_DWORD *)(a1 + 20) > 0 )
      {
        *(_DWORD *)(a1 + 104) = 4;
        if ( !*(_DWORD *)(a1 + 108) )
        {
          ++*(_DWORD *)(a1 + 108);
          v56 = Angle_Calculator(*(_DWORD *)(a1 + 8) - Quote_X_Position, *(_DWORD *)(a1 + 12) - 5120 - Quote_Y_Position);
          Y_Velocity = 4 * SIN_function(v56);
          X_Velocity = 4 * COS_function(v56);
          NPC_Create(273, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12) - 5120, X_Velocity, Y_Velocity, 0, 0, 256);
          Play_Sound_Effect(39, 1);
        }
      }
      if ( *(_DWORD *)(a1 + 20) > 512 )
        *(_DWORD *)(a1 + 104) = 5;
      if ( *(_DWORD *)(a1 + 4) & 8 )
      {
        *(_DWORD *)(a1 + 104) = 2;
        *(_DWORD *)(a1 + 116) = 13;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 16) = 0;
      }
      break;
    case 0xD:
      *(_DWORD *)(a1 + 16) /= 2;
      if ( ++*(_DWORD *)(a1 + 120) > 10 )
        *(_DWORD *)(a1 + 116) = 1;
      break;
    default:
      break;
  }
  *(_DWORD *)(a1 + 20) += 85;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v6 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    *(_DWORD *)(v5 + 8) = v4[2];
    result = v4[3];
    *(_DWORD *)(v5 + 12) = result;
  }
  else
  {
    v1 = &v32 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    *(_DWORD *)(v2 + 8) = v1[2];
    result = v1[3];
    *(_DWORD *)(v2 + 12) = result;
  }
  return result;
}

//----- (0045CC80) --------------------------------------------------------
int __cdecl NPC275(int a1)
{
  int *v1; // edx@21
  int result; // eax@21
  int v3; // [sp+0h] [bp-44h]@1
  int v4; // [sp+4h] [bp-40h]@1
  int v5; // [sp+8h] [bp-3Ch]@1
  int v6; // [sp+Ch] [bp-38h]@1
  int v7; // [sp+10h] [bp-34h]@1
  int v8; // [sp+14h] [bp-30h]@1
  int v9; // [sp+18h] [bp-2Ch]@1
  int v10; // [sp+1Ch] [bp-28h]@1
  int v11; // [sp+20h] [bp-24h]@1
  int v12; // [sp+24h] [bp-20h]@1
  int v13; // [sp+28h] [bp-1Ch]@1
  int v14; // [sp+2Ch] [bp-18h]@1
  int v15; // [sp+30h] [bp-14h]@1
  int v16; // [sp+34h] [bp-10h]@1
  int v17; // [sp+38h] [bp-Ch]@1
  int v18; // [sp+3Ch] [bp-8h]@1
  int v19; // [sp+40h] [bp-4h]@1

  v4 = 272;
  v5 = 80;
  v6 = 288;
  v7 = 96;
  v8 = 288;
  v9 = 80;
  v10 = 304;
  v11 = 96;
  v12 = 272;
  v13 = 80;
  v14 = 288;
  v15 = 96;
  v16 = 304;
  v17 = 80;
  v18 = 320;
  v19 = 96;
  v3 = *(_DWORD *)(a1 + 116);
  if ( v3 )
  {
    if ( v3 != 1 )
    {
      if ( v3 == 2 && ++*(_DWORD *)(a1 + 120) > 8 )
      {
        *(_DWORD *)(a1 + 116) = 1;
        *(_DWORD *)(a1 + 104) = 0;
      }
      goto LABEL_19;
    }
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 104) = 0;
    *(_DWORD *)(a1 + 100) = 0;
  }
  if ( RNG_Range(0, 120) == 10 )
  {
    *(_DWORD *)(a1 + 116) = 2;
    *(_DWORD *)(a1 + 120) = 0;
    *(_DWORD *)(a1 + 104) = 1;
  }
  if ( *(_DWORD *)(a1 + 8) - 0x8000 < Quote_X_Position
    && *(_DWORD *)(a1 + 8) + 0x8000 > Quote_X_Position
    && *(_DWORD *)(a1 + 12) - 0x4000 < Quote_Y_Position
    && *(_DWORD *)(a1 + 12) + 0x2000 > Quote_Y_Position )
  {
    if ( ++*(_DWORD *)(a1 + 100) > 3 )
    {
      *(_DWORD *)(a1 + 100) = 0;
      ++*(_DWORD *)(a1 + 104);
    }
    if ( *(_DWORD *)(a1 + 104) > 3 )
      *(_DWORD *)(a1 + 104) = 2;
  }
LABEL_19:
  *(_DWORD *)(a1 + 20) += 64;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  v1 = &v4 + 4 * *(_DWORD *)(a1 + 104);
  result = a1 + 84;
  *(_DWORD *)result = *v1;
  *(_DWORD *)(result + 4) = v1[1];
  *(_DWORD *)(result + 8) = v1[2];
  *(_DWORD *)(result + 12) = v1[3];
  return result;
}

//----- (0045CEA0) --------------------------------------------------------
int __cdecl NPC276(int a1)
{
  int *v1; // ecx@48
  int v2; // edx@48
  int result; // eax@48
  int *v4; // ecx@49
  int v5; // edx@49
  int v6; // [sp+Ch] [bp-130h]@1
  int v7; // [sp+10h] [bp-12Ch]@1
  int v8; // [sp+14h] [bp-128h]@1
  int v9; // [sp+18h] [bp-124h]@1
  int v10; // [sp+1Ch] [bp-120h]@1
  int v11; // [sp+20h] [bp-11Ch]@1
  int v12; // [sp+24h] [bp-118h]@1
  int v13; // [sp+28h] [bp-114h]@1
  int v14; // [sp+2Ch] [bp-110h]@1
  int v15; // [sp+30h] [bp-10Ch]@1
  int v16; // [sp+34h] [bp-108h]@1
  int v17; // [sp+38h] [bp-104h]@1
  int v18; // [sp+3Ch] [bp-100h]@1
  int v19; // [sp+40h] [bp-FCh]@1
  int v20; // [sp+44h] [bp-F8h]@1
  int v21; // [sp+48h] [bp-F4h]@1
  int v22; // [sp+4Ch] [bp-F0h]@1
  int v23; // [sp+50h] [bp-ECh]@1
  int v24; // [sp+54h] [bp-E8h]@1
  int v25; // [sp+58h] [bp-E4h]@1
  int v26; // [sp+5Ch] [bp-E0h]@1
  int v27; // [sp+60h] [bp-DCh]@1
  int v28; // [sp+64h] [bp-D8h]@1
  int v29; // [sp+68h] [bp-D4h]@1
  int v30; // [sp+6Ch] [bp-D0h]@1
  int v31; // [sp+70h] [bp-CCh]@1
  int v32; // [sp+74h] [bp-C8h]@1
  int v33; // [sp+78h] [bp-C4h]@1
  int v34; // [sp+7Ch] [bp-C0h]@1
  int v35; // [sp+80h] [bp-BCh]@1
  int v36; // [sp+84h] [bp-B8h]@1
  int v37; // [sp+88h] [bp-B4h]@1
  int v38; // [sp+8Ch] [bp-B0h]@1
  int v39; // [sp+90h] [bp-ACh]@1
  int v40; // [sp+94h] [bp-A8h]@1
  int v41; // [sp+98h] [bp-A4h]@1
  int Y_Velocity; // [sp+9Ch] [bp-A0h]@16
  int X_Velocity; // [sp+A0h] [bp-9Ch]@16
  int v44; // [sp+A4h] [bp-98h]@1
  int v45; // [sp+A8h] [bp-94h]@1
  int v46; // [sp+ACh] [bp-90h]@1
  int v47; // [sp+B0h] [bp-8Ch]@1
  int v48; // [sp+B4h] [bp-88h]@1
  int v49; // [sp+B8h] [bp-84h]@1
  int v50; // [sp+BCh] [bp-80h]@1
  int v51; // [sp+C0h] [bp-7Ch]@1
  int v52; // [sp+C4h] [bp-78h]@1
  int v53; // [sp+C8h] [bp-74h]@1
  int v54; // [sp+CCh] [bp-70h]@1
  int v55; // [sp+D0h] [bp-6Ch]@1
  int v56; // [sp+D4h] [bp-68h]@1
  int v57; // [sp+D8h] [bp-64h]@1
  int v58; // [sp+DCh] [bp-60h]@1
  int v59; // [sp+E0h] [bp-5Ch]@1
  int v60; // [sp+E4h] [bp-58h]@1
  int v61; // [sp+E8h] [bp-54h]@1
  int v62; // [sp+ECh] [bp-50h]@1
  int v63; // [sp+F0h] [bp-4Ch]@1
  int v64; // [sp+F4h] [bp-48h]@1
  int v65; // [sp+F8h] [bp-44h]@1
  int v66; // [sp+FCh] [bp-40h]@1
  int v67; // [sp+100h] [bp-3Ch]@1
  int v68; // [sp+104h] [bp-38h]@1
  int v69; // [sp+108h] [bp-34h]@1
  int v70; // [sp+10Ch] [bp-30h]@1
  int v71; // [sp+110h] [bp-2Ch]@1
  int v72; // [sp+114h] [bp-28h]@1
  int v73; // [sp+118h] [bp-24h]@1
  int v74; // [sp+11Ch] [bp-20h]@1
  int v75; // [sp+120h] [bp-1Ch]@1
  int v76; // [sp+124h] [bp-18h]@1
  int v77; // [sp+128h] [bp-14h]@1
  int v78; // [sp+12Ch] [bp-10h]@1
  int v79; // [sp+130h] [bp-Ch]@1
  unsigned __int8 v80; // [sp+13Bh] [bp-1h]@16

  v44 = 0;
  v45 = 64;
  v46 = 32;
  v47 = 104;
  v48 = 32;
  v49 = 64;
  v50 = 64;
  v51 = 104;
  v52 = 64;
  v53 = 64;
  v54 = 96;
  v55 = 104;
  v56 = 96;
  v57 = 64;
  v58 = 128;
  v59 = 104;
  v60 = 128;
  v61 = 64;
  v62 = 160;
  v63 = 104;
  v64 = 160;
  v65 = 64;
  v66 = 192;
  v67 = 104;
  v68 = 192;
  v69 = 64;
  v70 = 224;
  v71 = 104;
  v72 = 224;
  v73 = 64;
  v74 = 256;
  v75 = 104;
  v76 = 256;
  v77 = 64;
  v78 = 288;
  v79 = 104;
  v6 = 0;
  v7 = 104;
  v8 = 32;
  v9 = 144;
  v10 = 32;
  v11 = 104;
  v12 = 64;
  v13 = 144;
  v14 = 64;
  v15 = 104;
  v16 = 96;
  v17 = 144;
  v18 = 96;
  v19 = 104;
  v20 = 128;
  v21 = 144;
  v22 = 128;
  v23 = 104;
  v24 = 160;
  v25 = 144;
  v26 = 160;
  v27 = 104;
  v28 = 192;
  v29 = 144;
  v30 = 192;
  v31 = 104;
  v32 = 224;
  v33 = 144;
  v34 = 224;
  v35 = 104;
  v36 = 256;
  v37 = 144;
  v38 = 256;
  v39 = 104;
  v40 = 288;
  v41 = 144;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 12) -= 4096;
      goto LABEL_3;
    case 1:
LABEL_3:
      *(_DWORD *)(a1 + 16) = 0;
      *(_DWORD *)(a1 + 116) = 2;
      *(_DWORD *)(a1 + 104) = 0;
      goto LABEL_4;
    case 2:
LABEL_4:
      if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
        *(_DWORD *)(a1 + 76) = 2;
      else
        *(_DWORD *)(a1 + 76) = 0;
      if ( ++*(_DWORD *)(a1 + 100) > 20 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 1 )
        *(_DWORD *)(a1 + 104) = 0;
      if ( *(_BYTE *)(a1 + 156) )
        *(_DWORD *)(a1 + 116) = 10;
      break;
    case 0xA:
      *(_DWORD *)(a1 + 116) = 11;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 104) = 3;
      *(_WORD *)(a1 + 80) |= 0x20u;
      goto LABEL_15;
    case 0xB:
LABEL_15:
      switch ( ++*(_DWORD *)(a1 + 120) )
      {
        case 0x1E:
        case 0x28:
        case 0x32:
          *(_DWORD *)(a1 + 104) = 4;
          v80 = Angle_Calculator(*(_DWORD *)(a1 + 8) - Quote_X_Position, *(_DWORD *)(a1 + 12) - Quote_Y_Position);
          Y_Velocity = 4 * SIN_function(v80);
          X_Velocity = 4 * COS_function(v80);
          NPC_Create(277, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), X_Velocity, Y_Velocity, 0, 0, 256);
          Play_Sound_Effect(39, 1);
          break;
        case 0x22:
        case 0x2C:
        case 0x36:
          *(_DWORD *)(a1 + 104) = 3;
          break;
        default:
          break;
      }
      if ( *(_DWORD *)(a1 + 120) > 60 )
      {
        *(_DWORD *)(a1 + 116) = 20;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 2;
      }
      break;
    case 0x14:
      if ( ++*(_DWORD *)(a1 + 120) > 20 )
      {
        *(_DWORD *)(a1 + 116) = 21;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 5;
        *(_DWORD *)(a1 + 20) = -1535;
        if ( *(_DWORD *)(a1 + 8) >= Quote_X_Position )
          *(_DWORD *)(a1 + 16) = -256;
        else
          *(_DWORD *)(a1 + 16) = 256;
      }
      break;
    case 0x15:
      switch ( ++*(_DWORD *)(a1 + 120) )
      {
        case 0x1E:
        case 0x28:
        case 0x32:
          *(_DWORD *)(a1 + 104) = 6;
          v80 = Angle_Calculator(*(_DWORD *)(a1 + 8) - Quote_X_Position, *(_DWORD *)(a1 + 12) - 5120 - Quote_Y_Position);
          Y_Velocity = 4 * SIN_function(v80);
          X_Velocity = 4 * COS_function(v80);
          NPC_Create(277, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12) - 5120, X_Velocity, Y_Velocity, 0, 0, 256);
          Play_Sound_Effect(39, 1);
          break;
        case 0x22:
        case 0x2C:
          *(_DWORD *)(a1 + 104) = 5;
          break;
        default:
          break;
      }
      if ( *(_DWORD *)(a1 + 120) > 53 )
        *(_DWORD *)(a1 + 104) = 7;
      if ( *(_DWORD *)(a1 + 4) & 8 )
      {
        *(_DWORD *)(a1 + 116) = 22;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 2;
        sub_40F310(10);
        Play_Sound_Effect(26, 1);
      }
      break;
    case 0x16:
      *(_DWORD *)(a1 + 16) /= 2;
      if ( ++*(_DWORD *)(a1 + 120) > 22 )
        *(_DWORD *)(a1 + 116) = 10;
      break;
    case 0x32:
      *(_WORD *)(a1 + 80) &= 0xFFDFu;
      *(_DWORD *)(a1 + 164) = 0;
      if ( *(_DWORD *)(a1 + 4) & 8 )
      {
        *(_DWORD *)(a1 + 116) = 51;
        *(_DWORD *)(a1 + 104) = 2;
        sub_40F310(10);
        Spawn_Exp(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 19);
        sub_46F150(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), *(_DWORD *)(a1 + 148), 8);
        Play_Sound_Effect(72, 1);
      }
      break;
    case 0x33:
      *(_DWORD *)(a1 + 16) = 7 * *(_DWORD *)(a1 + 16) / 8;
      *(_DWORD *)(a1 + 104) = 8;
      break;
    default:
      break;
  }
  *(_DWORD *)(a1 + 20) += 32;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 116) < 50 )
  {
    if ( *(_DWORD *)(a1 + 8) >= Quote_X_Position )
      *(_DWORD *)(a1 + 76) = 0;
    else
      *(_DWORD *)(a1 + 76) = 2;
  }
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v6 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    result = v4[2];
    *(_DWORD *)(v5 + 8) = result;
    *(_DWORD *)(v5 + 12) = v4[3];
  }
  else
  {
    v1 = &v44 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    result = v1[2];
    *(_DWORD *)(v2 + 8) = result;
    *(_DWORD *)(v2 + 12) = v1[3];
  }
  return result;
}

//----- (0045D780) --------------------------------------------------------
int __cdecl NPC277(void *a1)
{
  int result; // eax@6
  int *v2; // eax@11
  char *v3; // ecx@11
  int v4; // [sp+0h] [bp-34h]@1
  int v5; // [sp+4h] [bp-30h]@1
  int v6; // [sp+8h] [bp-2Ch]@1
  int v7; // [sp+Ch] [bp-28h]@1
  int v8; // [sp+10h] [bp-24h]@1
  int v9; // [sp+14h] [bp-20h]@1
  int v10; // [sp+18h] [bp-1Ch]@1
  int v11; // [sp+1Ch] [bp-18h]@1
  int v12; // [sp+20h] [bp-14h]@1
  int v13; // [sp+24h] [bp-10h]@1
  int v14; // [sp+28h] [bp-Ch]@1
  int v15; // [sp+2Ch] [bp-8h]@1
  int v16; // [sp+30h] [bp-4h]@1

  v5 = 128;
  v6 = 0;
  v7 = 152;
  v8 = 24;
  v9 = 152;
  v10 = 0;
  v11 = 176;
  v12 = 24;
  v13 = 176;
  v14 = 0;
  v15 = 200;
  v16 = 24;
  v4 = *((_DWORD *)a1 + 29);
  if ( v4 )
  {
    if ( v4 != 1 )
      goto LABEL_11;
  }
  else
  {
    *((_DWORD *)a1 + 29) = 1;
  }
  *((_DWORD *)a1 + 2) += *((_DWORD *)a1 + 4);
  *((_DWORD *)a1 + 3) += *((_DWORD *)a1 + 5);
  if ( *((_DWORD *)a1 + 1) & 0xFF )
  {
    NPC_Create(4, *((_DWORD *)a1 + 2), *((_DWORD *)a1 + 3), 0, 0, 0, 0, 256);
    NPC_Create(4, *((_DWORD *)a1 + 2), *((_DWORD *)a1 + 3), 0, 0, 0, 0, 256);
    NPC_Create(4, *((_DWORD *)a1 + 2), *((_DWORD *)a1 + 3), 0, 0, 0, 0, 256);
    return sub_46F760(a1);
  }
  if ( !(++*((_DWORD *)a1 + 30) % 5) )
    Play_Sound_Effect(110, 1);
  if ( ++*((_DWORD *)a1 + 26) > 2 )
    *((_DWORD *)a1 + 26) = 0;
LABEL_11:
  v2 = &v5 + 4 * *((_DWORD *)a1 + 26);
  v3 = (char *)a1 + 84;
  *(_DWORD *)v3 = *v2;
  *((_DWORD *)v3 + 1) = v2[1];
  *((_DWORD *)v3 + 2) = v2[2];
  result = v2[3];
  *((_DWORD *)v3 + 3) = result;
  return result;
}

//----- (0045D930) --------------------------------------------------------
int __cdecl NPC278(int a1)
{
  int *v1; // ecx@34
  int v2; // edx@34
  int *v3; // ecx@35
  int v4; // edx@35
  int *v5; // ecx@33
  int v6; // edx@33
  int result; // eax@33
  int v8; // [sp+0h] [bp-68h]@31
  int v9; // [sp+8h] [bp-60h]@1
  int v10; // [sp+Ch] [bp-5Ch]@1
  int v11; // [sp+10h] [bp-58h]@1
  int v12; // [sp+14h] [bp-54h]@1
  int v13; // [sp+18h] [bp-50h]@1
  int v14; // [sp+1Ch] [bp-4Ch]@1
  int v15; // [sp+20h] [bp-48h]@1
  int v16; // [sp+24h] [bp-44h]@1
  int v17; // [sp+28h] [bp-40h]@1
  int v18; // [sp+2Ch] [bp-3Ch]@1
  int v19; // [sp+30h] [bp-38h]@1
  int v20; // [sp+34h] [bp-34h]@1
  int v21; // [sp+38h] [bp-30h]@1
  int v22; // [sp+3Ch] [bp-2Ch]@1
  int v23; // [sp+40h] [bp-28h]@1
  int v24; // [sp+44h] [bp-24h]@1
  int v25; // [sp+48h] [bp-20h]@1
  int v26; // [sp+4Ch] [bp-1Ch]@1
  int v27; // [sp+50h] [bp-18h]@1
  int v28; // [sp+54h] [bp-14h]@1
  int v29; // [sp+58h] [bp-10h]@1
  int v30; // [sp+5Ch] [bp-Ch]@1
  int v31; // [sp+60h] [bp-8h]@1
  int v32; // [sp+64h] [bp-4h]@1

  v17 = 0;
  v18 = 120;
  v19 = 8;
  v20 = 128;
  v21 = 8;
  v22 = 120;
  v23 = 16;
  v24 = 128;
  v9 = 16;
  v10 = 120;
  v11 = 24;
  v12 = 128;
  v13 = 24;
  v14 = 120;
  v15 = 32;
  v16 = 128;
  v25 = 32;
  v26 = 120;
  v27 = 40;
  v28 = 128;
  v29 = 40;
  v30 = 120;
  v31 = 48;
  v32 = 128;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 100) = 0;
      *(_DWORD *)(a1 + 16) = 0;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( RNG_Range(0, 60) == 1 )
      {
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 1;
      }
      if ( RNG_Range(0, 60) == 1 )
      {
        *(_DWORD *)(a1 + 116) = 10;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 1;
      }
      break;
    case 2:
      if ( ++*(_DWORD *)(a1 + 120) > 8 )
      {
        *(_DWORD *)(a1 + 116) = 1;
        *(_DWORD *)(a1 + 104) = 0;
      }
      break;
    case 0xA:
      *(_DWORD *)(a1 + 116) = 11;
      *(_DWORD *)(a1 + 120) = RNG_Range(0, 16);
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 100) = 0;
      if ( RNG_Range(0, 9) % 2 )
        *(_DWORD *)(a1 + 76) = 0;
      else
        *(_DWORD *)(a1 + 76) = 2;
      goto LABEL_14;
    case 0xB:
LABEL_14:
      if ( *(_DWORD *)(a1 + 76) || !(*(_DWORD *)(a1 + 4) & 1) )
      {
        if ( *(_DWORD *)(a1 + 76) == 2 && *(_DWORD *)(a1 + 4) & 4 )
          *(_DWORD *)(a1 + 76) = 0;
      }
      else
      {
        *(_DWORD *)(a1 + 76) = 2;
      }
      if ( *(_DWORD *)(a1 + 76) )
        *(_DWORD *)(a1 + 16) = 256;
      else
        *(_DWORD *)(a1 + 16) = -256;
      if ( ++*(_DWORD *)(a1 + 100) > 4 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 1 )
        *(_DWORD *)(a1 + 104) = 0;
      if ( ++*(_DWORD *)(a1 + 120) > 32 )
        *(_DWORD *)(a1 + 116) = 0;
      break;
    default:
      break;
  }
  *(_DWORD *)(a1 + 20) += 32;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  v8 = *(_DWORD *)(a1 + 48);
  if ( v8 == 200 )
  {
    v1 = &v17 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    result = v1[2];
    *(_DWORD *)(v2 + 8) = result;
    *(_DWORD *)(v2 + 12) = v1[3];
  }
  else if ( v8 == 210 )
  {
    v3 = &v9 + 4 * *(_DWORD *)(a1 + 104);
    v4 = a1 + 84;
    *(_DWORD *)v4 = *v3;
    *(_DWORD *)(v4 + 4) = v3[1];
    result = v3[2];
    *(_DWORD *)(v4 + 8) = result;
    *(_DWORD *)(v4 + 12) = v3[3];
  }
  else
  {
    v5 = &v25 + 4 * *(_DWORD *)(a1 + 104);
    v6 = a1 + 84;
    *(_DWORD *)v6 = *v5;
    *(_DWORD *)(v6 + 4) = v5[1];
    result = v5[2];
    *(_DWORD *)(v6 + 8) = result;
    *(_DWORD *)(v6 + 12) = v5[3];
  }
  return result;
}

//----- (0045DCF0) --------------------------------------------------------
int __cdecl NPC279(int a1)
{
  int v1; // ST10_4@21
  int v2; // ST0C_4@21
  int v3; // ST08_4@21
  int v4; // eax@21
  int result; // eax@23
  int *v6; // ecx@28
  int v7; // edx@28
  int v8; // [sp+0h] [bp-2Ch]@2
  signed int i; // [sp+8h] [bp-24h]@19
  int v10; // [sp+Ch] [bp-20h]@1
  int v11; // [sp+10h] [bp-1Ch]@1
  int v12; // [sp+14h] [bp-18h]@1
  int v13; // [sp+18h] [bp-14h]@1
  int v14; // [sp+1Ch] [bp-10h]@1
  int v15; // [sp+20h] [bp-Ch]@1
  int v16; // [sp+24h] [bp-8h]@1
  int v17; // [sp+28h] [bp-4h]@1

  v10 = 0;
  v11 = 16;
  v12 = 32;
  v13 = 48;
  v14 = 16;
  v15 = 0;
  v16 = 32;
  v17 = 16;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      v8 = *(_DWORD *)(a1 + 76);
      if ( v8 )
      {
        if ( v8 == 1 )
        {
          *(_DWORD *)(a1 + 104) = 0;
          *(_DWORD *)(a1 + 116) = 10;
        }
        else if ( v8 == 2 )
        {
          *(_DWORD *)(a1 + 116) = 100;
          *(_WORD *)(a1 + 80) |= 4u;
          *(_DWORD *)(a1 + 104) = 1;
          *(_DWORD *)(a1 + 148) = 4096;
          *(_DWORD *)(a1 + 140) = 4096;
          *(_DWORD *)(a1 + 144) = 4096;
          *(_DWORD *)(a1 + 152) = 4096;
          *(_DWORD *)(a1 + 132) = 4096;
          *(_DWORD *)(a1 + 124) = 4096;
          *(_DWORD *)(a1 + 128) = 4096;
          *(_DWORD *)(a1 + 136) = 4096;
        }
      }
      else
      {
        *(_DWORD *)(a1 + 116) = 100;
        *(_WORD *)(a1 + 80) |= 4u;
        *(_DWORD *)(a1 + 104) = 0;
      }
      if ( *(_DWORD *)(a1 + 76) != 1 )
        goto LABEL_25;
      goto LABEL_10;
    case 0xA:
LABEL_10:
      *(_DWORD *)(a1 + 116) = 11;
      *(_DWORD *)(a1 + 120) = 16;
      goto LABEL_11;
    case 0xB:
LABEL_11:
      *(_DWORD *)(a1 + 120) -= 2;
      if ( *(_DWORD *)(a1 + 120) <= 0 )
      {
        *(_DWORD *)(a1 + 116) = 100;
        *(_WORD *)(a1 + 80) |= 4u;
      }
      goto LABEL_25;
    case 0x64:
      *(_DWORD *)(a1 + 20) += 64;
      if ( *(_DWORD *)(a1 + 20) > 1792 )
        *(_DWORD *)(a1 + 20) = 1792;
      if ( *(_DWORD *)(a1 + 12) > 0x10000 )
        *(_WORD *)(a1 + 80) &= 0xFFF7u;
      if ( *(_DWORD *)(a1 + 4) & 8 )
      {
        *(_DWORD *)(a1 + 20) = -512;
        *(_DWORD *)(a1 + 116) = 110;
        *(_WORD *)(a1 + 80) |= 8u;
        Play_Sound_Effect(26, 1);
        sub_40F310(10);
        for ( i = 0; i < 4; ++i )
        {
          v1 = RNG_Range(-1536, 0);
          v2 = RNG_Range(-341, 341);
          v3 = *(_DWORD *)(a1 + 12) + 0x2000;
          v4 = RNG_Range(-12, 12);
          NPC_Create(4, *(_DWORD *)(a1 + 8) + (v4 << 9), v3, v2, v1, 0, 0, 256);
        }
      }
      goto LABEL_25;
    case 0x6E:
      *(_DWORD *)(a1 + 20) += 64;
      result = (*(signed __int16 *)&word_49E588 << 13) + 0x4000;
      if ( *(_DWORD *)(a1 + 12) <= result )
        goto LABEL_25;
      *(_BYTE *)a1 = 0;
      break;
    default:
LABEL_25:
      if ( Quote_Y_Position <= *(_DWORD *)(a1 + 12) )
        *(_DWORD *)(a1 + 164) = 0;
      else
        *(_DWORD *)(a1 + 164) = 10;
      *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
      v6 = &v10 + 4 * *(_DWORD *)(a1 + 104);
      v7 = a1 + 84;
      *(_DWORD *)v7 = *v6;
      *(_DWORD *)(v7 + 4) = v6[1];
      result = v6[2];
      *(_DWORD *)(v7 + 8) = result;
      *(_DWORD *)(v7 + 12) = v6[3];
      if ( *(_DWORD *)(a1 + 116) == 11 )
      {
        *(_DWORD *)(a1 + 88) += *(_DWORD *)(a1 + 120);
        *(_DWORD *)(a1 + 96) -= *(_DWORD *)(a1 + 120);
        result = (16 - *(_DWORD *)(a1 + 120)) << 9;
        *(_DWORD *)(a1 + 144) = result;
      }
      break;
  }
  return result;
}

//----- (0045E110) --------------------------------------------------------
int __cdecl NPC280(int a1)
{
  int *v1; // eax@16
  int v2; // ecx@16
  int result; // eax@16
  int *v4; // eax@17
  int v5; // ecx@17
  int v6; // [sp+0h] [bp-44h]@1
  int v7; // [sp+4h] [bp-40h]@1
  int v8; // [sp+8h] [bp-3Ch]@1
  int v9; // [sp+Ch] [bp-38h]@1
  int v10; // [sp+10h] [bp-34h]@1
  int v11; // [sp+14h] [bp-30h]@1
  int v12; // [sp+18h] [bp-2Ch]@1
  int v13; // [sp+1Ch] [bp-28h]@1
  int v14; // [sp+20h] [bp-24h]@1
  int v15; // [sp+24h] [bp-20h]@1
  int v16; // [sp+28h] [bp-1Ch]@1
  int v17; // [sp+2Ch] [bp-18h]@1
  int v18; // [sp+30h] [bp-14h]@1
  int v19; // [sp+34h] [bp-10h]@1
  int v20; // [sp+38h] [bp-Ch]@1
  int v21; // [sp+3Ch] [bp-8h]@1
  int v22; // [sp+40h] [bp-4h]@1

  v15 = 112;
  v16 = 32;
  v17 = 128;
  v18 = 48;
  v19 = 144;
  v20 = 32;
  v21 = 160;
  v22 = 48;
  v7 = 112;
  v8 = 48;
  v9 = 128;
  v10 = 64;
  v11 = 144;
  v12 = 48;
  v13 = 160;
  v14 = 64;
  v6 = *(_DWORD *)(a1 + 116);
  if ( v6 )
  {
    if ( v6 != 1 )
    {
      if ( v6 == 2 )
      {
        *(_DWORD *)(a1 + 104) = 0;
        if ( *(_DWORD *)(a1 + 4) & 8 )
        {
          *(_DWORD *)(a1 + 116) = 4;
          *(_DWORD *)(a1 + 120) = 0;
          *(_DWORD *)(a1 + 104) = 1;
          Play_Sound_Effect(23, 1);
        }
      }
      goto LABEL_11;
    }
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 104) = 0;
    *(_DWORD *)(a1 + 100) = 0;
    *(_DWORD *)(a1 + 8) += 3072;
    *(_DWORD *)(a1 + 32) = *(_DWORD *)(a1 + 8);
    Play_Sound_Effect(29, 1);
  }
  if ( ++*(_DWORD *)(a1 + 120) == 64 )
  {
    *(_DWORD *)(a1 + 116) = 2;
    *(_DWORD *)(a1 + 120) = 0;
  }
LABEL_11:
  if ( *(_DWORD *)(a1 + 116) > 1 )
  {
    *(_DWORD *)(a1 + 20) += 32;
    if ( *(_DWORD *)(a1 + 20) > 1535 )
      *(_DWORD *)(a1 + 20) = 1535;
    *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  }
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v7 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    *(_DWORD *)(v5 + 8) = v4[2];
    result = v4[3];
    *(_DWORD *)(v5 + 12) = result;
  }
  else
  {
    v1 = &v15 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    *(_DWORD *)(v2 + 8) = v1[2];
    result = v1[3];
    *(_DWORD *)(v2 + 12) = result;
  }
  if ( *(_DWORD *)(a1 + 116) == 1 )
  {
    *(_DWORD *)(a1 + 96) = *(_DWORD *)(a1 + 88) + *(_DWORD *)(a1 + 120) / 4;
    if ( *(_DWORD *)(a1 + 120) / 2 % 2 )
    {
      result = *(_DWORD *)(a1 + 32);
      *(_DWORD *)(a1 + 8) = result;
    }
    else
    {
      result = a1;
      *(_DWORD *)(a1 + 8) = *(_DWORD *)(a1 + 32) + 512;
    }
  }
  return result;
}

//----- (0045E360) --------------------------------------------------------
int __cdecl NPC281(int a1)
{
  int result; // eax@10

  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      break;
    case 0xA:
      *(_DWORD *)(a1 + 116) = 11;
      *(_DWORD *)(a1 + 120) = 0;
      goto LABEL_4;
    case 0xB:
LABEL_4:
      ++*(_DWORD *)(a1 + 120);
      NPC_Create(270, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12) + 0x10000, 0, 0, 2, a1, 256);
      if ( *(_DWORD *)(a1 + 120) > 150 )
        *(_DWORD *)(a1 + 116) = 12;
      break;
    case 0x14:
      *(_DWORD *)(a1 + 116) = 21;
      *(_DWORD *)(a1 + 120) = 0;
      goto LABEL_8;
    case 0x15:
LABEL_8:
      if ( ++*(_DWORD *)(a1 + 120) > 250 )
      {
        sub_4702D0(270, 0);
        *(_DWORD *)(a1 + 116) = 22;
      }
      break;
    default:
      break;
  }
  result = a1 + 84;
  *(_DWORD *)result = 0;
  *(_DWORD *)(result + 4) = 0;
  *(_DWORD *)(result + 8) = 0;
  *(_DWORD *)(result + 12) = 0;
  return result;
}

//----- (0045E4C0) --------------------------------------------------------
int __cdecl NPC282(int a1)
{
  int *v1; // ecx@48
  int v2; // edx@48
  int result; // eax@48
  int v4; // [sp+0h] [bp-34h]@1
  int v5; // [sp+4h] [bp-30h]@1
  int v6; // [sp+8h] [bp-2Ch]@1
  int v7; // [sp+Ch] [bp-28h]@1
  int v8; // [sp+10h] [bp-24h]@1
  int v9; // [sp+14h] [bp-20h]@1
  int v10; // [sp+18h] [bp-1Ch]@1
  int v11; // [sp+1Ch] [bp-18h]@1
  int v12; // [sp+20h] [bp-14h]@1
  int v13; // [sp+24h] [bp-10h]@1
  int v14; // [sp+28h] [bp-Ch]@1
  int v15; // [sp+2Ch] [bp-8h]@1
  int v16; // [sp+30h] [bp-4h]@1

  v5 = 256;
  v6 = 80;
  v7 = 320;
  v8 = 120;
  v9 = 256;
  v10 = 0;
  v11 = 320;
  v12 = 40;
  v13 = 256;
  v14 = 120;
  v15 = 320;
  v16 = 160;
  v4 = *(_DWORD *)(a1 + 116);
  if ( v4 )
  {
    if ( v4 != 20 )
      goto LABEL_48;
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 20;
    *(_DWORD *)(a1 + 36) = *(_DWORD *)(a1 + 12);
    if ( RNG_Range(0, 100) % 2 )
      *(_DWORD *)(a1 + 20) = -256;
    else
      *(_DWORD *)(a1 + 20) = 256;
  }
  *(_DWORD *)(a1 + 16) = -512;
  if ( *(_DWORD *)(a1 + 8) < -32768 )
    *(_BYTE *)a1 = 0;
  if ( *(_DWORD *)(a1 + 36) < *(_DWORD *)(a1 + 12) )
    *(_DWORD *)(a1 + 20) -= 16;
  if ( *(_DWORD *)(a1 + 36) > *(_DWORD *)(a1 + 12) )
    *(_DWORD *)(a1 + 20) += 16;
  if ( *(_DWORD *)(a1 + 20) > 256 )
    *(_DWORD *)(a1 + 20) = 256;
  if ( *(_DWORD *)(a1 + 20) < -256 )
    *(_DWORD *)(a1 + 20) = -256;
  if ( Tile_On_Which_Quote_Is & 8
    && Quote_Y_Position < *(_DWORD *)(a1 + 12) - 2048
    && Quote_X_Position > *(_DWORD *)(a1 + 8) - 12288
    && Quote_X_Position < *(_DWORD *)(a1 + 8) + 12288 )
  {
    *(_DWORD *)(a1 + 36) = 73728;
    *(_DWORD *)(a1 + 104) = 2;
  }
  else if ( *(_DWORD *)(a1 + 104) != 1 )
  {
    *(_DWORD *)(a1 + 104) = 0;
  }
  if ( Tile_On_Which_Quote_Is & 1
    && Quote_X_Position < *(_DWORD *)(a1 + 8) - *(_DWORD *)(a1 + 132)
    && Quote_X_Position > *(_DWORD *)(a1 + 8) - *(_DWORD *)(a1 + 132) - 4096
    && QuoteHitbox_Down + Quote_Y_Position > *(_DWORD *)(a1 + 12) - *(_DWORD *)(a1 + 128)
    && Quote_Y_Position - QuoteHitbox_Up < *(_DWORD *)(a1 + 136) + *(_DWORD *)(a1 + 12) )
  {
    *(_WORD *)(a1 + 80) &= 0xFFBFu;
    *(_DWORD *)(a1 + 104) = 1;
  }
  else if ( Tile_On_Which_Quote_Is & 4
         && Quote_X_Position > *(_DWORD *)(a1 + 132) + *(_DWORD *)(a1 + 8)
         && Quote_X_Position < *(_DWORD *)(a1 + 8) + *(_DWORD *)(a1 + 132) + 4096
         && QuoteHitbox_Down + Quote_Y_Position > *(_DWORD *)(a1 + 12) - *(_DWORD *)(a1 + 128)
         && Quote_Y_Position - QuoteHitbox_Up < *(_DWORD *)(a1 + 136) + *(_DWORD *)(a1 + 12) )
  {
    *(_WORD *)(a1 + 80) &= 0xFFBFu;
    *(_DWORD *)(a1 + 104) = 1;
  }
  else if ( Tile_On_Which_Quote_Is & 2
         && Quote_Y_Position < *(_DWORD *)(a1 + 12) - *(_DWORD *)(a1 + 128)
         && Quote_Y_Position > *(_DWORD *)(a1 + 12) - *(_DWORD *)(a1 + 128) - 4096
         && QuoteHitbox_Left + Quote_X_Position > *(_DWORD *)(a1 + 8) - *(_DWORD *)(a1 + 132)
         && Quote_X_Position - QuoteHitbox_Right < *(_DWORD *)(a1 + 124) + *(_DWORD *)(a1 + 8) )
  {
    *(_WORD *)(a1 + 80) &= 0xFFBFu;
    *(_DWORD *)(a1 + 104) = 1;
  }
  else if ( Tile_On_Which_Quote_Is & 8
         && Quote_Y_Position > *(_DWORD *)(a1 + 12) + *(_DWORD *)(a1 + 136) - 2048
         && Quote_Y_Position < *(_DWORD *)(a1 + 12) + *(_DWORD *)(a1 + 136) + 6144
         && QuoteHitbox_Left + Quote_X_Position > *(_DWORD *)(a1 + 8) - *(_DWORD *)(a1 + 132) - 2048
         && Quote_X_Position - QuoteHitbox_Right < *(_DWORD *)(a1 + 8) + *(_DWORD *)(a1 + 124) + 2048 )
  {
    *(_WORD *)(a1 + 80) &= 0xFFBFu;
    *(_DWORD *)(a1 + 104) = 1;
  }
LABEL_48:
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  v1 = &v5 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  result = v1[2];
  *(_DWORD *)(v2 + 8) = result;
  *(_DWORD *)(v2 + 12) = v1[3];
  return result;
}
// 49E63C: using guessed type int Tile_On_Which_Quote_Is;
// 49E67C: using guessed type int QuoteHitbox_Left;
// 49E680: using guessed type int QuoteHitbox_Up;
// 49E684: using guessed type int QuoteHitbox_Right;
// 49E688: using guessed type int QuoteHitbox_Down;

//----- (0045E950) --------------------------------------------------------
int __cdecl NPC283(int a1)
{
  int *v1; // ecx@138
  int v2; // edx@138
  int result; // eax@138
  int *v4; // ecx@139
  int v5; // edx@139
  signed int v6; // [sp+14h] [bp-16Ch]@0
  int v7; // [sp+18h] [bp-168h]@1
  int v8; // [sp+1Ch] [bp-164h]@1
  int v9; // [sp+20h] [bp-160h]@1
  int v10; // [sp+24h] [bp-15Ch]@1
  int v11; // [sp+28h] [bp-158h]@1
  int v12; // [sp+2Ch] [bp-154h]@1
  int v13; // [sp+30h] [bp-150h]@1
  int v14; // [sp+34h] [bp-14Ch]@1
  int v15; // [sp+38h] [bp-148h]@1
  int v16; // [sp+3Ch] [bp-144h]@1
  int v17; // [sp+40h] [bp-140h]@1
  int v18; // [sp+44h] [bp-13Ch]@1
  int v19; // [sp+48h] [bp-138h]@1
  int v20; // [sp+4Ch] [bp-134h]@1
  int v21; // [sp+50h] [bp-130h]@1
  int v22; // [sp+54h] [bp-12Ch]@1
  int v23; // [sp+58h] [bp-128h]@1
  int v24; // [sp+5Ch] [bp-124h]@1
  int v25; // [sp+60h] [bp-120h]@1
  int v26; // [sp+64h] [bp-11Ch]@1
  int v27; // [sp+68h] [bp-118h]@1
  int v28; // [sp+6Ch] [bp-114h]@1
  int v29; // [sp+70h] [bp-110h]@1
  int v30; // [sp+74h] [bp-10Ch]@1
  int v31; // [sp+78h] [bp-108h]@1
  int v32; // [sp+7Ch] [bp-104h]@1
  int v33; // [sp+80h] [bp-100h]@1
  int v34; // [sp+84h] [bp-FCh]@1
  int v35; // [sp+88h] [bp-F8h]@1
  int v36; // [sp+8Ch] [bp-F4h]@1
  int v37; // [sp+90h] [bp-F0h]@1
  int v38; // [sp+94h] [bp-ECh]@1
  int v39; // [sp+98h] [bp-E8h]@1
  int v40; // [sp+9Ch] [bp-E4h]@1
  int v41; // [sp+A0h] [bp-E0h]@1
  int v42; // [sp+A4h] [bp-DCh]@1
  int v43; // [sp+A8h] [bp-D8h]@1
  int v44; // [sp+ACh] [bp-D4h]@1
  int v45; // [sp+B0h] [bp-D0h]@1
  int v46; // [sp+B4h] [bp-CCh]@1
  int v47; // [sp+B8h] [bp-C8h]@1
  int v48; // [sp+BCh] [bp-C4h]@1
  int v49; // [sp+C0h] [bp-C0h]@1
  int v50; // [sp+C4h] [bp-BCh]@1
  int X_Position; // [sp+C8h] [bp-B8h]@66
  int Y_Position; // [sp+CCh] [bp-B4h]@66
  int v53; // [sp+D0h] [bp-B0h]@1
  int v54; // [sp+D4h] [bp-ACh]@1
  int v55; // [sp+D8h] [bp-A8h]@1
  int v56; // [sp+DCh] [bp-A4h]@1
  int v57; // [sp+E0h] [bp-A0h]@1
  int v58; // [sp+E4h] [bp-9Ch]@1
  int v59; // [sp+E8h] [bp-98h]@1
  int v60; // [sp+ECh] [bp-94h]@1
  int v61; // [sp+F0h] [bp-90h]@1
  int v62; // [sp+F4h] [bp-8Ch]@1
  int v63; // [sp+F8h] [bp-88h]@1
  int v64; // [sp+FCh] [bp-84h]@1
  int v65; // [sp+100h] [bp-80h]@1
  int v66; // [sp+104h] [bp-7Ch]@1
  int v67; // [sp+108h] [bp-78h]@1
  int v68; // [sp+10Ch] [bp-74h]@1
  int v69; // [sp+110h] [bp-70h]@1
  int v70; // [sp+114h] [bp-6Ch]@1
  int v71; // [sp+118h] [bp-68h]@1
  int v72; // [sp+11Ch] [bp-64h]@1
  int v73; // [sp+120h] [bp-60h]@1
  int v74; // [sp+124h] [bp-5Ch]@1
  int v75; // [sp+128h] [bp-58h]@1
  int v76; // [sp+12Ch] [bp-54h]@1
  int v77; // [sp+130h] [bp-50h]@1
  int v78; // [sp+134h] [bp-4Ch]@1
  int v79; // [sp+138h] [bp-48h]@1
  int v80; // [sp+13Ch] [bp-44h]@1
  int v81; // [sp+140h] [bp-40h]@1
  int v82; // [sp+144h] [bp-3Ch]@1
  int v83; // [sp+148h] [bp-38h]@1
  int v84; // [sp+14Ch] [bp-34h]@1
  int v85; // [sp+150h] [bp-30h]@1
  int v86; // [sp+154h] [bp-2Ch]@1
  int v87; // [sp+158h] [bp-28h]@1
  int v88; // [sp+15Ch] [bp-24h]@1
  int v89; // [sp+160h] [bp-20h]@1
  int v90; // [sp+164h] [bp-1Ch]@1
  int v91; // [sp+168h] [bp-18h]@1
  int v92; // [sp+16Ch] [bp-14h]@1
  int v93; // [sp+170h] [bp-10h]@1
  int v94; // [sp+174h] [bp-Ch]@1
  int v95; // [sp+178h] [bp-8h]@1
  int v96; // [sp+17Ch] [bp-4h]@1

  v53 = 0;
  v54 = 64;
  v55 = 32;
  v56 = 96;
  v57 = 32;
  v58 = 64;
  v59 = 64;
  v60 = 96;
  v61 = 64;
  v62 = 64;
  v63 = 96;
  v64 = 96;
  v65 = 96;
  v66 = 64;
  v67 = 128;
  v68 = 96;
  v69 = 128;
  v70 = 64;
  v71 = 160;
  v72 = 96;
  v73 = 160;
  v74 = 64;
  v75 = 192;
  v76 = 96;
  v77 = 192;
  v78 = 64;
  v79 = 224;
  v80 = 96;
  v81 = 224;
  v82 = 64;
  v83 = 256;
  v84 = 96;
  v85 = 0;
  v86 = 0;
  v87 = 0;
  v88 = 0;
  v89 = 256;
  v90 = 64;
  v91 = 288;
  v92 = 96;
  v93 = 288;
  v94 = 64;
  v95 = 320;
  v96 = 96;
  v7 = 0;
  v8 = 96;
  v9 = 32;
  v10 = 128;
  v11 = 32;
  v12 = 96;
  v13 = 64;
  v14 = 128;
  v15 = 64;
  v16 = 96;
  v17 = 96;
  v18 = 128;
  v19 = 96;
  v20 = 96;
  v21 = 128;
  v22 = 128;
  v23 = 128;
  v24 = 96;
  v25 = 160;
  v26 = 128;
  v27 = 160;
  v28 = 96;
  v29 = 192;
  v30 = 128;
  v31 = 192;
  v32 = 96;
  v33 = 224;
  v34 = 128;
  v35 = 224;
  v36 = 96;
  v37 = 256;
  v38 = 128;
  v39 = 0;
  v40 = 0;
  v41 = 0;
  v42 = 0;
  v43 = 256;
  v44 = 96;
  v45 = 288;
  v46 = 128;
  v47 = 288;
  v48 = 96;
  v49 = 320;
  v50 = 128;
  if ( *(_DWORD *)(a1 + 116) < 100 && (!*(_BYTE *)&byte_4BBA58 || *(_DWORD *)(a1 + 64) < 400) )
    *(_DWORD *)(a1 + 116) = 100;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 12) -= 4096;
      Play_Sound_Effect(29, 1);
      goto LABEL_7;
    case 1:
LABEL_7:
      if ( ++*(_DWORD *)(a1 + 120) / 2 % 2 )
        *(_DWORD *)(a1 + 104) = 9;
      else
        *(_DWORD *)(a1 + 104) = 0;
      break;
    case 0xA:
      *(_DWORD *)(a1 + 116) = 11;
      *(_DWORD *)(a1 + 104) = 9;
      break;
    case 0x14:
      dword_4BBA30 = 0;
      *(_DWORD *)(a1 + 116) = 21;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 100) = 0;
      goto LABEL_13;
    case 0x15:
LABEL_13:
      *(_DWORD *)(a1 + 16) = 7 * *(_DWORD *)(a1 + 16) / 8;
      *(_DWORD *)(a1 + 20) = 7 * *(_DWORD *)(a1 + 20) / 8;
      if ( ++*(_DWORD *)(a1 + 100) > 20 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 1 )
        *(_DWORD *)(a1 + 104) = 0;
      if ( ++*(_DWORD *)(a1 + 120) > 100 )
        *(_DWORD *)(a1 + 116) = 30;
      if ( *(_DWORD *)(a1 + 8) >= Quote_X_Position )
        *(_DWORD *)(a1 + 76) = 0;
      else
        *(_DWORD *)(a1 + 76) = 2;
      break;
    case 0x1E:
      *(_DWORD *)(a1 + 116) = 31;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 104) = 2;
      *(_DWORD *)(a1 + 112) = *(_DWORD *)(a1 + 64);
      goto LABEL_24;
    case 0x1F:
LABEL_24:
      if ( ++*(_DWORD *)(a1 + 100) > 1 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 3 )
        *(_DWORD *)(a1 + 104) = 2;
      if ( *(_DWORD *)(a1 + 4) & 8 )
        *(_DWORD *)(a1 + 20) = -512;
      if ( *(_DWORD *)(a1 + 8) <= dword_4BBA60 )
        *(_DWORD *)(a1 + 16) += 32;
      else
        *(_DWORD *)(a1 + 16) -= 32;
      if ( *(_DWORD *)(a1 + 12) <= Quote_Y_Position )
        *(_DWORD *)(a1 + 20) += 16;
      else
        *(_DWORD *)(a1 + 20) -= 16;
      if ( *(_DWORD *)(a1 + 16) > 512 )
        *(_DWORD *)(a1 + 16) = 512;
      if ( *(_DWORD *)(a1 + 16) < -512 )
        *(_DWORD *)(a1 + 16) = -512;
      if ( *(_DWORD *)(a1 + 20) > 512 )
        *(_DWORD *)(a1 + 20) = 512;
      if ( *(_DWORD *)(a1 + 20) < -512 )
        *(_DWORD *)(a1 + 20) = -512;
      if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
        *(_DWORD *)(a1 + 76) = 2;
      else
        *(_DWORD *)(a1 + 76) = 0;
      if ( ++*(_DWORD *)(a1 + 120) > 150 && (*(_DWORD *)(a1 + 64) < *(_DWORD *)(a1 + 112) - 20 || dword_4BBA30) )
      {
        dword_4BBA30 = 0;
        *(_DWORD *)(a1 + 116) = 40;
      }
      if ( dword_4BBAC0[0] && *(_DWORD *)(a1 + 120) > 250 )
        *(_DWORD *)(a1 + 116) = 50;
      break;
    case 0x28:
      *(_DWORD *)(a1 + 116) = 41;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 16) = 0;
      *(_DWORD *)(a1 + 20) = 0;
      if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
        *(_DWORD *)(a1 + 76) = 2;
      else
        *(_DWORD *)(a1 + 76) = 0;
      Play_Sound_Effect(103, 1);
      if ( Quote_Y_Position >= 81920 )
        *(_DWORD *)(a1 + 112) = 289;
      else
        *(_DWORD *)(a1 + 112) = 290;
      goto LABEL_61;
    case 0x29:
LABEL_61:
      if ( ++*(_DWORD *)(a1 + 120) / 2 % 2 )
        *(_DWORD *)(a1 + 104) = 4;
      else
        *(_DWORD *)(a1 + 104) = 5;
      if ( *(_DWORD *)(a1 + 120) % 6 == 1 )
      {
        if ( *(_DWORD *)(a1 + 112) == 289 )
        {
          X_Position = *(_DWORD *)(a1 + 8) + (RNG_Range(-64, 64) << 9);
          Y_Position = *(_DWORD *)(a1 + 12) + (RNG_Range(-32, 32) << 9);
        }
        else
        {
          X_Position = *(_DWORD *)(a1 + 8) + (RNG_Range(-32, 32) << 9);
          Y_Position = *(_DWORD *)(a1 + 12) + (RNG_Range(-64, 64) << 9);
        }
        if ( X_Position < 0x4000 )
          X_Position = 0x4000;
        if ( X_Position > (*(signed __int16 *)&word_49E586 - 2) << 13 )
          X_Position = (*(signed __int16 *)&word_49E586 - 2) << 13;
        if ( Y_Position < 0x4000 )
          Y_Position = 0x4000;
        if ( Y_Position > (*(signed __int16 *)&word_49E588 - 2) << 13 )
          Y_Position = (*(signed __int16 *)&word_49E588 - 2) << 13;
        Play_Sound_Effect(39, 1);
        NPC_Create(*(_DWORD *)(a1 + 112), X_Position, Y_Position, 0, 0, 0, 0, 256);
      }
      if ( *(_DWORD *)(a1 + 120) > 50 )
      {
        *(_DWORD *)(a1 + 116) = 42;
        *(_DWORD *)(a1 + 120) = 0;
        if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
          *(_DWORD *)(a1 + 76) = 2;
        else
          *(_DWORD *)(a1 + 76) = 0;
      }
      break;
    case 0x2A:
      ++*(_DWORD *)(a1 + 120);
      *(_DWORD *)(a1 + 104) = 6;
      if ( *(_DWORD *)(a1 + 120) > 50 )
      {
        *(_DWORD *)(a1 + 20) = -512;
        if ( *(_DWORD *)(a1 + 76) )
          *(_DWORD *)(a1 + 16) = -512;
        else
          *(_DWORD *)(a1 + 16) = 512;
        *(_DWORD *)(a1 + 116) = 30;
      }
      break;
    case 0x32:
      *(_DWORD *)(a1 + 116) = 51;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 16) = 0;
      *(_DWORD *)(a1 + 20) = 0;
      if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
        *(_DWORD *)(a1 + 76) = 2;
      else
        *(_DWORD *)(a1 + 76) = 0;
      Play_Sound_Effect(103, 1);
      goto LABEL_92;
    case 0x33:
LABEL_92:
      if ( ++*(_DWORD *)(a1 + 120) / 2 % 2 )
        *(_DWORD *)(a1 + 104) = 4;
      else
        *(_DWORD *)(a1 + 104) = 5;
      if ( EquippedItems & 0x20 )
      {
        if ( *(_DWORD *)(a1 + 120) % 10 == 1 )
        {
          if ( *(_DWORD *)(a1 + 76) )
          {
            X_Position = *(_DWORD *)(a1 + 8) - 5120;
            Y_Position = *(_DWORD *)(a1 + 12);
            switch ( *(_DWORD *)(a1 + 120) / 6 % 4 )
            {
              case 0:
                v6 = 88;
                break;
              case 1:
                v6 = 108;
                break;
              case 2:
                v6 = 148;
                break;
              case 3:
                v6 = 168;
                break;
              default:
                break;
            }
          }
          else
          {
            X_Position = *(_DWORD *)(a1 + 8) + 5120;
            Y_Position = *(_DWORD *)(a1 + 12);
            switch ( *(_DWORD *)(a1 + 120) / 6 % 4 )
            {
              case 0:
                v6 = 216;
                break;
              case 1:
                v6 = 236;
                break;
              case 2:
                v6 = 20;
                break;
              case 3:
                v6 = 40;
                break;
              default:
                break;
            }
          }
          Play_Sound_Effect(39, 1);
          NPC_Create(301, X_Position, Y_Position, 0, 0, v6, 0, 256);
        }
      }
      else if ( *(_DWORD *)(a1 + 120) % 24 == 1 )
      {
        if ( *(_DWORD *)(a1 + 76) )
        {
          X_Position = *(_DWORD *)(a1 + 8) - 5120;
          Y_Position = *(_DWORD *)(a1 + 12);
          switch ( *(_DWORD *)(a1 + 120) / 6 % 4 )
          {
            case 0:
              v6 = 88;
              break;
            case 1:
              v6 = 108;
              break;
            case 2:
              v6 = 148;
              break;
            case 3:
              v6 = 168;
              break;
            default:
              break;
          }
        }
        else
        {
          X_Position = *(_DWORD *)(a1 + 8) + 5120;
          Y_Position = *(_DWORD *)(a1 + 12);
          switch ( *(_DWORD *)(a1 + 120) / 6 % 4 )
          {
            case 0:
              v6 = 216;
              break;
            case 1:
              v6 = 236;
              break;
            case 2:
              v6 = 20;
              break;
            case 3:
              v6 = 40;
              break;
            default:
              break;
          }
        }
        Play_Sound_Effect(39, 1);
        NPC_Create(301, X_Position, Y_Position, 0, 0, v6, 0, 256);
      }
      if ( *(_DWORD *)(a1 + 120) > 50 )
      {
        *(_DWORD *)(a1 + 116) = 42;
        *(_DWORD *)(a1 + 120) = 0;
        if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
          *(_DWORD *)(a1 + 76) = 2;
        else
          *(_DWORD *)(a1 + 76) = 0;
      }
      break;
    case 0x63:
      *(_DWORD *)(a1 + 16) = 0;
      *(_DWORD *)(a1 + 20) = 0;
      *(_DWORD *)(a1 + 104) = 9;
      *(_WORD *)(a1 + 80) &= 0xFFDFu;
      break;
    case 0x64:
      *(_DWORD *)(a1 + 116) = 101;
      *(_DWORD *)(a1 + 104) = 9;
      *(_DWORD *)(a1 + 164) = 0;
      *(_WORD *)(a1 + 80) &= 0xFFDFu;
      *(_WORD *)(a1 + 80) |= 8u;
      *(_DWORD *)(a1 + 20) = -512;
      *(_BYTE *)(a1 + 156) += 50;
      *(_DWORD *)(a1 + 136) = 6144;
      ++dword_4BBAC0[0];
      goto LABEL_132;
    case 0x65:
LABEL_132:
      *(_DWORD *)(a1 + 20) += 32;
      if ( *(_DWORD *)(a1 + 12) > 110592 - *(_DWORD *)(a1 + 136) )
      {
        *(_DWORD *)(a1 + 12) = 110592 - *(_DWORD *)(a1 + 136);
        *(_DWORD *)(a1 + 116) = 102;
        *(_DWORD *)(a1 + 104) = 10;
        *(_DWORD *)(a1 + 16) = 0;
        *(_DWORD *)(a1 + 20) = 0;
      }
      break;
    default:
      break;
  }
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_BYTE *)(a1 + 156) )
    *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16) / 2;
  else
    *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v7 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    result = v4[2];
    *(_DWORD *)(v5 + 8) = result;
    *(_DWORD *)(v5 + 12) = v4[3];
  }
  else
  {
    v1 = &v53 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    result = v1[2];
    *(_DWORD *)(v2 + 8) = result;
    *(_DWORD *)(v2 + 12) = v1[3];
  }
  return result;
}
// 49E650: using guessed type int EquippedItems;
// 4BBA30: using guessed type int dword_4BBA30;
// 4BBAC0: using guessed type int dword_4BBAC0[];

//----- (0045F910) --------------------------------------------------------
int __cdecl NPC284(int a1)
{
  int *v1; // ecx@119
  int v2; // edx@119
  int result; // eax@119
  int *v4; // ecx@120
  int v5; // edx@120
  int v6; // [sp+8h] [bp-1A8h]@1
  int v7; // [sp+Ch] [bp-1A4h]@1
  int v8; // [sp+10h] [bp-1A0h]@1
  int v9; // [sp+14h] [bp-19Ch]@1
  int v10; // [sp+18h] [bp-198h]@1
  int v11; // [sp+1Ch] [bp-194h]@1
  int v12; // [sp+20h] [bp-190h]@1
  int v13; // [sp+24h] [bp-18Ch]@1
  int v14; // [sp+28h] [bp-188h]@1
  int v15; // [sp+2Ch] [bp-184h]@1
  int v16; // [sp+30h] [bp-180h]@1
  int v17; // [sp+34h] [bp-17Ch]@1
  int v18; // [sp+38h] [bp-178h]@1
  int v19; // [sp+3Ch] [bp-174h]@1
  int v20; // [sp+40h] [bp-170h]@1
  int v21; // [sp+44h] [bp-16Ch]@1
  int v22; // [sp+48h] [bp-168h]@1
  int v23; // [sp+4Ch] [bp-164h]@1
  int v24; // [sp+50h] [bp-160h]@1
  int v25; // [sp+54h] [bp-15Ch]@1
  int v26; // [sp+58h] [bp-158h]@1
  int v27; // [sp+5Ch] [bp-154h]@1
  int v28; // [sp+60h] [bp-150h]@1
  int v29; // [sp+64h] [bp-14Ch]@1
  int v30; // [sp+68h] [bp-148h]@1
  int v31; // [sp+6Ch] [bp-144h]@1
  int v32; // [sp+70h] [bp-140h]@1
  int v33; // [sp+74h] [bp-13Ch]@1
  int v34; // [sp+78h] [bp-138h]@1
  int v35; // [sp+7Ch] [bp-134h]@1
  int v36; // [sp+80h] [bp-130h]@1
  int v37; // [sp+84h] [bp-12Ch]@1
  int v38; // [sp+88h] [bp-128h]@1
  int v39; // [sp+8Ch] [bp-124h]@1
  int v40; // [sp+90h] [bp-120h]@1
  int v41; // [sp+94h] [bp-11Ch]@1
  int v42; // [sp+98h] [bp-118h]@1
  int v43; // [sp+9Ch] [bp-114h]@1
  int v44; // [sp+A0h] [bp-110h]@1
  int v45; // [sp+A4h] [bp-10Ch]@1
  int v46; // [sp+A8h] [bp-108h]@1
  int v47; // [sp+ACh] [bp-104h]@1
  int v48; // [sp+B0h] [bp-100h]@1
  int v49; // [sp+B4h] [bp-FCh]@1
  int v50; // [sp+B8h] [bp-F8h]@1
  int v51; // [sp+BCh] [bp-F4h]@1
  int v52; // [sp+C0h] [bp-F0h]@1
  int v53; // [sp+C4h] [bp-ECh]@1
  int v54; // [sp+C8h] [bp-E8h]@1
  int v55; // [sp+CCh] [bp-E4h]@1
  int v56; // [sp+D0h] [bp-E0h]@1
  int v57; // [sp+D4h] [bp-DCh]@1
  int v58; // [sp+D8h] [bp-D8h]@1
  int v59; // [sp+DCh] [bp-D4h]@1
  int v60; // [sp+E0h] [bp-D0h]@1
  int v61; // [sp+E4h] [bp-CCh]@1
  int v62; // [sp+E8h] [bp-C8h]@1
  int v63; // [sp+ECh] [bp-C4h]@1
  int v64; // [sp+F0h] [bp-C0h]@1
  int v65; // [sp+F4h] [bp-BCh]@1
  int v66; // [sp+F8h] [bp-B8h]@1
  int v67; // [sp+FCh] [bp-B4h]@1
  int v68; // [sp+100h] [bp-B0h]@1
  int v69; // [sp+104h] [bp-ACh]@1
  int v70; // [sp+108h] [bp-A8h]@1
  int v71; // [sp+10Ch] [bp-A4h]@1
  int v72; // [sp+110h] [bp-A0h]@1
  int v73; // [sp+114h] [bp-9Ch]@1
  int v74; // [sp+118h] [bp-98h]@1
  int v75; // [sp+11Ch] [bp-94h]@1
  int v76; // [sp+120h] [bp-90h]@1
  int v77; // [sp+124h] [bp-8Ch]@1
  int v78; // [sp+128h] [bp-88h]@1
  int v79; // [sp+12Ch] [bp-84h]@1
  int v80; // [sp+130h] [bp-80h]@1
  int v81; // [sp+134h] [bp-7Ch]@1
  int v82; // [sp+138h] [bp-78h]@1
  int v83; // [sp+13Ch] [bp-74h]@1
  int v84; // [sp+140h] [bp-70h]@1
  int v85; // [sp+144h] [bp-6Ch]@1
  int v86; // [sp+148h] [bp-68h]@1
  int v87; // [sp+14Ch] [bp-64h]@1
  int v88; // [sp+150h] [bp-60h]@1
  int v89; // [sp+154h] [bp-5Ch]@1
  int v90; // [sp+158h] [bp-58h]@1
  int v91; // [sp+15Ch] [bp-54h]@1
  int v92; // [sp+160h] [bp-50h]@1
  int v93; // [sp+164h] [bp-4Ch]@1
  int v94; // [sp+168h] [bp-48h]@1
  int v95; // [sp+16Ch] [bp-44h]@1
  int v96; // [sp+170h] [bp-40h]@1
  int v97; // [sp+174h] [bp-3Ch]@1
  int v98; // [sp+178h] [bp-38h]@1
  int v99; // [sp+17Ch] [bp-34h]@1
  int v100; // [sp+180h] [bp-30h]@1
  int v101; // [sp+184h] [bp-2Ch]@1
  int v102; // [sp+188h] [bp-28h]@1
  int v103; // [sp+18Ch] [bp-24h]@1
  int v104; // [sp+190h] [bp-20h]@1
  int v105; // [sp+194h] [bp-1Ch]@1
  int v106; // [sp+198h] [bp-18h]@1
  int v107; // [sp+19Ch] [bp-14h]@1
  int v108; // [sp+1A0h] [bp-10h]@1
  int v109; // [sp+1A4h] [bp-Ch]@1
  unsigned __int8 v110; // [sp+1AFh] [bp-1h]@37

  v58 = 0;
  v59 = 128;
  v60 = 32;
  v61 = 160;
  v62 = 32;
  v63 = 128;
  v64 = 64;
  v65 = 160;
  v66 = 64;
  v67 = 128;
  v68 = 96;
  v69 = 160;
  v70 = 96;
  v71 = 128;
  v72 = 128;
  v73 = 160;
  v74 = 128;
  v75 = 128;
  v76 = 160;
  v77 = 160;
  v78 = 160;
  v79 = 128;
  v80 = 192;
  v81 = 160;
  v82 = 192;
  v83 = 128;
  v84 = 224;
  v85 = 160;
  v86 = 224;
  v87 = 128;
  v88 = 256;
  v89 = 160;
  v90 = 0;
  v91 = 0;
  v92 = 0;
  v93 = 0;
  v94 = 256;
  v95 = 128;
  v96 = 288;
  v97 = 160;
  v98 = 288;
  v99 = 128;
  v100 = 320;
  v101 = 160;
  v102 = 224;
  v103 = 64;
  v104 = 256;
  v105 = 96;
  v106 = 208;
  v107 = 32;
  v108 = 224;
  v109 = 48;
  v6 = 0;
  v7 = 160;
  v8 = 32;
  v9 = 192;
  v10 = 32;
  v11 = 160;
  v12 = 64;
  v13 = 192;
  v14 = 64;
  v15 = 160;
  v16 = 96;
  v17 = 192;
  v18 = 96;
  v19 = 160;
  v20 = 128;
  v21 = 192;
  v22 = 128;
  v23 = 160;
  v24 = 160;
  v25 = 192;
  v26 = 160;
  v27 = 160;
  v28 = 192;
  v29 = 192;
  v30 = 192;
  v31 = 160;
  v32 = 224;
  v33 = 192;
  v34 = 224;
  v35 = 160;
  v36 = 256;
  v37 = 192;
  v38 = 0;
  v39 = 0;
  v40 = 0;
  v41 = 0;
  v42 = 256;
  v43 = 160;
  v44 = 288;
  v45 = 192;
  v46 = 288;
  v47 = 160;
  v48 = 320;
  v49 = 192;
  v50 = 224;
  v51 = 96;
  v52 = 256;
  v53 = 128;
  v54 = 208;
  v55 = 48;
  v56 = 224;
  v57 = 64;
  if ( *(_DWORD *)(a1 + 116) < 100 && (!*(_BYTE *)&byte_4BBA58 || *(_DWORD *)(a1 + 64) < 500) )
    *(_DWORD *)(a1 + 116) = 100;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 12) -= 2048;
      Play_Sound_Effect(29, 1);
      *(_DWORD *)(a1 + 112) = *(_DWORD *)(a1 + 64);
      goto LABEL_7;
    case 1:
LABEL_7:
      if ( ++*(_DWORD *)(a1 + 120) / 2 % 2 )
      {
        *(_DWORD *)(a1 + 144) = 0x2000;
        *(_DWORD *)(a1 + 148) = 0x2000;
        *(_DWORD *)(a1 + 140) = 0x2000;
        *(_DWORD *)(a1 + 104) = 11;
      }
      else
      {
        *(_DWORD *)(a1 + 144) = 1536;
        *(_DWORD *)(a1 + 148) = 4096;
        *(_DWORD *)(a1 + 140) = 4096;
        *(_DWORD *)(a1 + 104) = 12;
      }
      if ( *(_DWORD *)(a1 + 120) > 50 )
        *(_DWORD *)(a1 + 116) = 10;
      break;
    case 0xA:
      *(_DWORD *)(a1 + 116) = 11;
      *(_DWORD *)(a1 + 104) = 11;
      *(_DWORD *)(a1 + 144) = 0x2000;
      *(_DWORD *)(a1 + 148) = 0x2000;
      *(_DWORD *)(a1 + 140) = 0x2000;
      sub_4702D0(257, 1);
      break;
    case 0x14:
      *(_DWORD *)(a1 + 116) = 21;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 100) = 0;
      *(_DWORD *)(a1 + 164) = 0;
      *(_WORD *)(a1 + 80) |= 0x20u;
      *(_WORD *)(a1 + 80) &= 0xFFF7u;
      goto LABEL_15;
    case 0x15:
LABEL_15:
      *(_DWORD *)(a1 + 16) = 7 * *(_DWORD *)(a1 + 16) / 8;
      *(_DWORD *)(a1 + 20) = 7 * *(_DWORD *)(a1 + 20) / 8;
      if ( ++*(_DWORD *)(a1 + 100) > 20 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 1 )
        *(_DWORD *)(a1 + 104) = 0;
      if ( ++*(_DWORD *)(a1 + 120) > 80 )
        *(_DWORD *)(a1 + 116) = 30;
      if ( *(_DWORD *)(a1 + 8) >= Quote_X_Position )
        *(_DWORD *)(a1 + 76) = 0;
      else
        *(_DWORD *)(a1 + 76) = 2;
      if ( *(_DWORD *)(a1 + 64) < *(_DWORD *)(a1 + 112) - 50 )
      {
        *(_DWORD *)(a1 + 112) = *(_DWORD *)(a1 + 64);
        dword_4BBA30 = 10;
      }
      break;
    case 0x1E:
      *(_DWORD *)(a1 + 116) = 31;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 104) = 2;
      *(_DWORD *)(a1 + 16) = 0;
      *(_DWORD *)(a1 + 20) = 0;
      goto LABEL_28;
    case 0x1F:
LABEL_28:
      if ( ++*(_DWORD *)(a1 + 120) > 16 )
      {
        ++*(_DWORD *)(a1 + 108);
        *(_DWORD *)(a1 + 108) %= 4;
        switch ( *(_DWORD *)(a1 + 108) )
        {
          case 1:
          case 3:
            *(_DWORD *)(a1 + 116) = 34;
            break;
          case 0:
            *(_DWORD *)(a1 + 116) = 32;
            break;
          case 2:
            *(_DWORD *)(a1 + 116) = 32;
            break;
          default:
            goto LABEL_115;
        }
      }
      break;
    case 0x20:
      *(_DWORD *)(a1 + 116) = 33;
      *(_DWORD *)(a1 + 120) = 0;
      *(_WORD *)(a1 + 80) &= 0xFFDFu;
      if ( Quote_X_Position >= *(_DWORD *)(a1 + 8) )
        *(_DWORD *)(a1 + 32) = Quote_X_Position + 81920;
      else
        *(_DWORD *)(a1 + 32) = Quote_X_Position - 81920;
      *(_DWORD *)(a1 + 36) = Quote_Y_Position;
      v110 = Angle_Calculator(*(_DWORD *)(a1 + 8) - *(_DWORD *)(a1 + 32), *(_DWORD *)(a1 + 12) - *(_DWORD *)(a1 + 36));
      *(_DWORD *)(a1 + 16) = 3 * COS_function(v110);
      *(_DWORD *)(a1 + 20) = 3 * SIN_function(v110);
      *(_WORD *)(a1 + 80) &= 0xFFF7u;
      if ( *(_DWORD *)(a1 + 8) < (*(signed __int16 *)&word_49E586 << 13) / 2 && *(_DWORD *)(a1 + 16) > 0 )
      {
        if ( *(_DWORD *)(a1 + 12) < (*(signed __int16 *)&word_49E588 << 13) / 2 && *(_DWORD *)(a1 + 20) > 0 )
          *(_WORD *)(a1 + 80) |= 8u;
        if ( *(_DWORD *)(a1 + 12) > (*(signed __int16 *)&word_49E588 << 13) / 2 && *(_DWORD *)(a1 + 20) < 0 )
          *(_WORD *)(a1 + 80) |= 8u;
      }
      if ( *(_DWORD *)(a1 + 8) > (*(signed __int16 *)&word_49E586 << 13) / 2 && *(_DWORD *)(a1 + 16) < 0 )
      {
        if ( *(_DWORD *)(a1 + 12) < (*(signed __int16 *)&word_49E588 << 13) / 2 && *(_DWORD *)(a1 + 20) > 0 )
          *(_WORD *)(a1 + 80) |= 8u;
        if ( *(_DWORD *)(a1 + 12) > (*(signed __int16 *)&word_49E588 << 13) / 2 && *(_DWORD *)(a1 + 20) < 0 )
          *(_WORD *)(a1 + 80) |= 8u;
      }
      if ( *(_DWORD *)(a1 + 16) <= 0 )
        *(_DWORD *)(a1 + 76) = 0;
      else
        *(_DWORD *)(a1 + 76) = 2;
      goto LABEL_56;
    case 0x21:
LABEL_56:
      if ( ++*(_DWORD *)(a1 + 120) / 2 % 2 )
        *(_DWORD *)(a1 + 104) = 3;
      else
        *(_DWORD *)(a1 + 104) = 8;
      if ( *(_DWORD *)(a1 + 120) > 50 || *(_DWORD *)(a1 + 4) & 5 )
        *(_DWORD *)(a1 + 116) = 20;
      break;
    case 0x22:
      *(_DWORD *)(a1 + 116) = 35;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 164) = 4;
      *(_DWORD *)(a1 + 32) = Quote_X_Position;
      *(_DWORD *)(a1 + 36) = Quote_Y_Position;
      v110 = Angle_Calculator(*(_DWORD *)(a1 + 8) - *(_DWORD *)(a1 + 32), *(_DWORD *)(a1 + 12) - *(_DWORD *)(a1 + 36));
      *(_DWORD *)(a1 + 20) = 3 * SIN_function(v110);
      *(_DWORD *)(a1 + 16) = 3 * COS_function(v110);
      *(_WORD *)(a1 + 80) &= 0xFFF7u;
      if ( *(_DWORD *)(a1 + 8) < (*(signed __int16 *)&word_49E586 << 13) / 2 && *(_DWORD *)(a1 + 16) > 0 )
      {
        if ( *(_DWORD *)(a1 + 12) < (*(signed __int16 *)&word_49E588 << 13) / 2 && *(_DWORD *)(a1 + 20) > 0 )
          *(_WORD *)(a1 + 80) |= 8u;
        if ( *(_DWORD *)(a1 + 12) > (*(signed __int16 *)&word_49E588 << 13) / 2 && *(_DWORD *)(a1 + 20) < 0 )
          *(_WORD *)(a1 + 80) |= 8u;
      }
      if ( *(_DWORD *)(a1 + 8) > (*(signed __int16 *)&word_49E586 << 13) / 2 && *(_DWORD *)(a1 + 16) < 0 )
      {
        if ( *(_DWORD *)(a1 + 12) < (*(signed __int16 *)&word_49E588 << 13) / 2 && *(_DWORD *)(a1 + 20) > 0 )
          *(_WORD *)(a1 + 80) |= 8u;
        if ( *(_DWORD *)(a1 + 12) > (*(signed __int16 *)&word_49E588 << 13) / 2 && *(_DWORD *)(a1 + 20) < 0 )
          *(_WORD *)(a1 + 80) |= 8u;
      }
      if ( *(_DWORD *)(a1 + 16) <= 0 )
        *(_DWORD *)(a1 + 76) = 0;
      else
        *(_DWORD *)(a1 + 76) = 2;
      goto LABEL_82;
    case 0x23:
LABEL_82:
      if ( ++*(_DWORD *)(a1 + 120) > 20 && *(_BYTE *)(a1 + 156) )
      {
        *(_DWORD *)(a1 + 116) = 40;
      }
      else if ( *(_DWORD *)(a1 + 120) > 50 || *(_DWORD *)(a1 + 4) & 5 )
      {
        *(_DWORD *)(a1 + 116) = 20;
      }
      if ( ++*(_DWORD *)(a1 + 100) > 1 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 7 )
        *(_DWORD *)(a1 + 104) = 4;
      if ( *(_DWORD *)(a1 + 120) % 5 == 1 )
        Play_Sound_Effect(109, 1);
      break;
    case 0x28:
      *(_DWORD *)(a1 + 116) = 41;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 104) = 2;
      *(_DWORD *)(a1 + 164) = 0;
      *(_WORD *)(a1 + 80) &= 0xFFF7u;
      goto LABEL_96;
    case 0x29:
LABEL_96:
      *(_DWORD *)(a1 + 16) = 7 * *(_DWORD *)(a1 + 16) / 8;
      *(_DWORD *)(a1 + 20) = 7 * *(_DWORD *)(a1 + 20) / 8;
      if ( ++*(_DWORD *)(a1 + 120) > 6 )
      {
        *(_DWORD *)(a1 + 116) = 42;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 20) = -512;
        if ( *(_DWORD *)(a1 + 76) )
          *(_DWORD *)(a1 + 16) = -512;
        else
          *(_DWORD *)(a1 + 16) = 512;
      }
      break;
    case 0x2A:
      *(_DWORD *)(a1 + 104) = 9;
      if ( *(_DWORD *)(a1 + 4) & 8 )
      {
        *(_DWORD *)(a1 + 116) = 43;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 2;
        if ( *(_DWORD *)(a1 + 8) >= Quote_X_Position )
          *(_DWORD *)(a1 + 76) = 0;
        else
          *(_DWORD *)(a1 + 76) = 2;
      }
      *(_DWORD *)(a1 + 20) += 32;
      if ( *(_DWORD *)(a1 + 20) > 1535 )
        *(_DWORD *)(a1 + 20) = 1535;
      break;
    case 0x2B:
      if ( ++*(_DWORD *)(a1 + 120) > 16 )
        *(_DWORD *)(a1 + 116) = 20;
      break;
    case 0x63:
      *(_DWORD *)(a1 + 16) = 0;
      *(_DWORD *)(a1 + 20) = 0;
      *(_DWORD *)(a1 + 104) = 9;
      *(_WORD *)(a1 + 80) &= 0xFFDFu;
      break;
    case 0x64:
      *(_DWORD *)(a1 + 116) = 101;
      *(_DWORD *)(a1 + 104) = 9;
      *(_DWORD *)(a1 + 164) = 0;
      *(_WORD *)(a1 + 80) &= 0xFFDFu;
      *(_WORD *)(a1 + 80) |= 8u;
      *(_DWORD *)(a1 + 20) = -512;
      *(_BYTE *)(a1 + 156) += 50;
      ++dword_4BBAC0[0];
      goto LABEL_113;
    case 0x65:
LABEL_113:
      *(_DWORD *)(a1 + 20) += 32;
      if ( *(_DWORD *)(a1 + 12) > 110592 - *(_DWORD *)(a1 + 136) )
      {
        *(_DWORD *)(a1 + 12) = 110592 - *(_DWORD *)(a1 + 136);
        *(_DWORD *)(a1 + 116) = 102;
        *(_DWORD *)(a1 + 104) = 10;
        *(_DWORD *)(a1 + 16) = 0;
        *(_DWORD *)(a1 + 20) = 0;
      }
      break;
    default:
      break;
  }
LABEL_115:
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_BYTE *)(a1 + 156) )
    *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16) / 2;
  else
    *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v6 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    result = v4[2];
    *(_DWORD *)(v5 + 8) = result;
    *(_DWORD *)(v5 + 12) = v4[3];
  }
  else
  {
    v1 = &v58 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    result = v1[2];
    *(_DWORD *)(v2 + 8) = result;
    *(_DWORD *)(v2 + 12) = v1[3];
  }
  return result;
}
// 4BBA30: using guessed type int dword_4BBA30;
// 4BBAC0: using guessed type int dword_4BBAC0[];

//----- (00460910) --------------------------------------------------------
int __cdecl NPC285(void *a1)
{
  int result; // eax@3
  char *v2; // ecx@14
  int v3; // [sp+0h] [bp-18h]@4
  char v4; // [sp+17h] [bp-1h]@8

  if ( *((_DWORD *)a1 + 2) < 0 || *((_DWORD *)a1 + 2) > *(signed __int16 *)&word_49E586 << 13 )
    return sub_46F760(a1);
  v3 = *((_DWORD *)a1 + 29);
  if ( !v3 )
  {
    *((_DWORD *)a1 + 29) = 1;
    *((_DWORD *)a1 + 8) = *((_DWORD *)a1 + 2);
    *((_DWORD *)a1 + 9) = *((_DWORD *)a1 + 3);
    *((_DWORD *)a1 + 27) = *((_DWORD *)a1 + 19) / 8;
    *((_DWORD *)a1 + 19) %= 8;
    goto LABEL_8;
  }
  if ( v3 == 1 )
  {
LABEL_8:
    *((_DWORD *)a1 + 27) += 24;
    *((_DWORD *)a1 + 27) %= 256;
    v4 = *((_BYTE *)a1 + 108);
    if ( *((_DWORD *)a1 + 30) < 128 )
      ++*((_DWORD *)a1 + 30);
    if ( *((_DWORD *)a1 + 19) )
      *((_DWORD *)a1 + 4) += 21;
    else
      *((_DWORD *)a1 + 4) -= 21;
    *((_DWORD *)a1 + 8) += *((_DWORD *)a1 + 4);
    *((_DWORD *)a1 + 2) = *((_DWORD *)a1 + 8) + 4 * COS_function(v4);
    *((_DWORD *)a1 + 3) = *((_DWORD *)a1 + 9) + 6 * SIN_function(v4);
    NPC_Create(286, *((_DWORD *)a1 + 2), *((_DWORD *)a1 + 3), 0, 0, 0, 0, 256);
  }
  v2 = (char *)a1 + 84;
  *(_DWORD *)v2 = 232;
  *((_DWORD *)v2 + 1) = 104;
  *((_DWORD *)v2 + 2) = 248;
  result = 120;
  *((_DWORD *)v2 + 3) = 120;
  return result;
}

//----- (00460AE0) --------------------------------------------------------
int __cdecl NPC286(int a1)
{
  int result; // eax@4
  int *v2; // eax@5
  int v3; // ecx@5
  int v4; // [sp+0h] [bp-30h]@1
  int v5; // [sp+4h] [bp-2Ch]@1
  int v6; // [sp+8h] [bp-28h]@1
  int v7; // [sp+Ch] [bp-24h]@1
  int v8; // [sp+10h] [bp-20h]@1
  int v9; // [sp+14h] [bp-1Ch]@1
  int v10; // [sp+18h] [bp-18h]@1
  int v11; // [sp+1Ch] [bp-14h]@1
  int v12; // [sp+20h] [bp-10h]@1
  int v13; // [sp+24h] [bp-Ch]@1
  int v14; // [sp+28h] [bp-8h]@1
  int v15; // [sp+2Ch] [bp-4h]@1

  v4 = 232;
  v5 = 120;
  v6 = 248;
  v7 = 136;
  v8 = 232;
  v9 = 136;
  v10 = 248;
  v11 = 152;
  v12 = 232;
  v13 = 152;
  v14 = 248;
  v15 = 168;
  if ( ++*(_DWORD *)(a1 + 100) > 0 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    ++*(_DWORD *)(a1 + 104);
  }
  if ( *(_DWORD *)(a1 + 104) <= 2 )
  {
    v2 = &v4 + 4 * *(_DWORD *)(a1 + 104);
    v3 = a1 + 84;
    *(_DWORD *)v3 = *v2;
    *(_DWORD *)(v3 + 4) = v2[1];
    *(_DWORD *)(v3 + 8) = v2[2];
    result = v2[3];
    *(_DWORD *)(v3 + 12) = result;
  }
  else
  {
    result = a1;
    *(_BYTE *)a1 = 0;
  }
  return result;
}

//----- (00460BB0) --------------------------------------------------------
int __cdecl NPC287(int a1)
{
  int result; // eax@4
  int *v2; // edx@8
  int v3; // [sp+0h] [bp-70h]@1
  int v4; // [sp+4h] [bp-6Ch]@1
  int v5; // [sp+8h] [bp-68h]@1
  int v6; // [sp+Ch] [bp-64h]@1
  int v7; // [sp+10h] [bp-60h]@1
  int v8; // [sp+14h] [bp-5Ch]@1
  int v9; // [sp+18h] [bp-58h]@1
  int v10; // [sp+1Ch] [bp-54h]@1
  int v11; // [sp+20h] [bp-50h]@1
  int v12; // [sp+24h] [bp-4Ch]@1
  int v13; // [sp+28h] [bp-48h]@1
  int v14; // [sp+2Ch] [bp-44h]@1
  int v15; // [sp+30h] [bp-40h]@1
  int v16; // [sp+34h] [bp-3Ch]@1
  int v17; // [sp+38h] [bp-38h]@1
  int v18; // [sp+3Ch] [bp-34h]@1
  int v19; // [sp+40h] [bp-30h]@1
  int v20; // [sp+44h] [bp-2Ch]@1
  int v21; // [sp+48h] [bp-28h]@1
  int v22; // [sp+4Ch] [bp-24h]@1
  int v23; // [sp+50h] [bp-20h]@1
  int v24; // [sp+54h] [bp-1Ch]@1
  int v25; // [sp+58h] [bp-18h]@1
  int v26; // [sp+5Ch] [bp-14h]@1
  int v27; // [sp+60h] [bp-10h]@1
  int v28; // [sp+64h] [bp-Ch]@1
  int v29; // [sp+68h] [bp-8h]@1
  int v30; // [sp+6Ch] [bp-4h]@1

  v3 = 0;
  v4 = 224;
  v5 = 16;
  v6 = 240;
  v7 = 16;
  v8 = 224;
  v9 = 32;
  v10 = 240;
  v11 = 32;
  v12 = 224;
  v13 = 48;
  v14 = 240;
  v15 = 48;
  v16 = 224;
  v17 = 64;
  v18 = 240;
  v19 = 64;
  v20 = 224;
  v21 = 80;
  v22 = 240;
  v23 = 80;
  v24 = 224;
  v25 = 96;
  v26 = 240;
  v27 = 96;
  v28 = 224;
  v29 = 112;
  v30 = 240;
  if ( *(_DWORD *)(a1 + 116) )
  {
    *(_DWORD *)(a1 + 16) = 20 * *(_DWORD *)(a1 + 16) / 21;
    *(_DWORD *)(a1 + 20) = 20 * *(_DWORD *)(a1 + 20) / 21;
    *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
    *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  }
  else
  {
    *(_DWORD *)(a1 + 16) = RNG_Range(-4, 4) << 9;
    *(_DWORD *)(a1 + 116) = 1;
  }
  result = *(_DWORD *)(a1 + 100) + 1;
  *(_DWORD *)(a1 + 100) = result;
  if ( *(_DWORD *)(a1 + 100) > 1 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    result = a1;
    ++*(_DWORD *)(a1 + 104);
  }
  if ( *(_DWORD *)(a1 + 104) <= 6 )
  {
    v2 = &v3 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v2;
    *(_DWORD *)(result + 4) = v2[1];
    *(_DWORD *)(result + 8) = v2[2];
    *(_DWORD *)(result + 12) = v2[3];
  }
  else
  {
    *(_BYTE *)a1 = 0;
  }
  return result;
}

//----- (00460D70) --------------------------------------------------------
int __cdecl NPC288(int a1)
{
  int *v1; // edx@32
  int result; // eax@32
  int v3; // [sp+4h] [bp-50h]@1
  int v4; // [sp+8h] [bp-4Ch]@1
  int v5; // [sp+Ch] [bp-48h]@1
  int v6; // [sp+10h] [bp-44h]@1
  int v7; // [sp+14h] [bp-40h]@1
  int v8; // [sp+18h] [bp-3Ch]@1
  int v9; // [sp+1Ch] [bp-38h]@1
  int v10; // [sp+20h] [bp-34h]@1
  int v11; // [sp+24h] [bp-30h]@1
  int v12; // [sp+28h] [bp-2Ch]@1
  int v13; // [sp+2Ch] [bp-28h]@1
  int v14; // [sp+30h] [bp-24h]@1
  int v15; // [sp+34h] [bp-20h]@1
  int v16; // [sp+38h] [bp-1Ch]@1
  int v17; // [sp+3Ch] [bp-18h]@1
  int v18; // [sp+40h] [bp-14h]@1
  int v19; // [sp+44h] [bp-10h]@1
  int v20; // [sp+48h] [bp-Ch]@1
  int v21; // [sp+4Ch] [bp-8h]@1
  int v22; // [sp+50h] [bp-4h]@1

  v3 = 232;
  v4 = 72;
  v5 = 248;
  v6 = 88;
  v7 = 232;
  v8 = 88;
  v9 = 248;
  v10 = 104;
  v11 = 232;
  v12 = 0;
  v13 = 256;
  v14 = 24;
  v15 = 232;
  v16 = 24;
  v17 = 256;
  v18 = 48;
  v19 = 232;
  v20 = 48;
  v21 = 256;
  v22 = 72;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 16) = -512;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( *(_DWORD *)(a1 + 76) == 1 )
      {
        *(_DWORD *)(a1 + 20) -= 32;
        if ( *(_DWORD *)(a1 + 20) < -1535 )
          *(_DWORD *)(a1 + 20) = -1535;
        if ( *(_DWORD *)(a1 + 4) & 2 )
          *(_DWORD *)(a1 + 116) = 2;
      }
      else if ( *(_DWORD *)(a1 + 76) == 3 )
      {
        *(_DWORD *)(a1 + 20) += 32;
        if ( *(_DWORD *)(a1 + 20) > 1535 )
          *(_DWORD *)(a1 + 20) = 1535;
        if ( *(_DWORD *)(a1 + 4) & 8 )
          *(_DWORD *)(a1 + 116) = 2;
      }
      if ( ++*(_DWORD *)(a1 + 100) > 3 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 1 )
        *(_DWORD *)(a1 + 104) = 0;
      break;
    case 2:
      Play_Sound_Effect(44, 1);
      *(_DWORD *)(a1 + 116) = 3;
      *(_DWORD *)(a1 + 120) = 0;
      *(_WORD *)(a1 + 80) |= 8u;
      *(_DWORD *)(a1 + 20) = 0;
      if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
        *(_DWORD *)(a1 + 16) = 1024;
      else
        *(_DWORD *)(a1 + 16) = -1024;
      *(_DWORD *)(a1 + 148) = 6144;
      *(_DWORD *)(a1 + 140) = 6144;
      *(_DWORD *)(a1 + 144) = 6144;
      *(_DWORD *)(a1 + 152) = 6144;
      goto LABEL_23;
    case 3:
LABEL_23:
      if ( ++*(_DWORD *)(a1 + 104) > 4 )
        *(_DWORD *)(a1 + 104) = 2;
      if ( ++*(_DWORD *)(a1 + 120) % 4 == 1 )
      {
        if ( *(_DWORD *)(a1 + 76) == 1 )
          NPC_Create(287, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 0, 1024, 0, 0, 256);
        else
          NPC_Create(287, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 0, -1024, 0, 0, 256);
      }
      if ( *(_DWORD *)(a1 + 8) < 0x2000 || *(_DWORD *)(a1 + 8) > (*(signed __int16 *)&word_49E586 << 13) - 0x2000 )
        *(_BYTE *)a1 = 0;
      break;
    default:
      break;
  }
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  v1 = &v3 + 4 * *(_DWORD *)(a1 + 104);
  result = a1 + 84;
  *(_DWORD *)result = *v1;
  *(_DWORD *)(result + 4) = v1[1];
  *(_DWORD *)(result + 8) = v1[2];
  *(_DWORD *)(result + 12) = v1[3];
  return result;
}

//----- (004610D0) --------------------------------------------------------
int __cdecl NPC289(void *a1)
{
  int result; // eax@23
  int *v2; // eax@29
  char *v3; // ecx@29
  int *v4; // eax@30
  char *v5; // ecx@30
  int v6; // [sp+4h] [bp-60h]@1
  int v7; // [sp+8h] [bp-5Ch]@1
  int v8; // [sp+Ch] [bp-58h]@1
  int v9; // [sp+10h] [bp-54h]@1
  int v10; // [sp+14h] [bp-50h]@1
  int v11; // [sp+18h] [bp-4Ch]@1
  int v12; // [sp+1Ch] [bp-48h]@1
  int v13; // [sp+20h] [bp-44h]@1
  int v14; // [sp+24h] [bp-40h]@1
  int v15; // [sp+28h] [bp-3Ch]@1
  int v16; // [sp+2Ch] [bp-38h]@1
  int v17; // [sp+30h] [bp-34h]@1
  int v18; // [sp+34h] [bp-30h]@1
  int v19; // [sp+38h] [bp-2Ch]@1
  int v20; // [sp+3Ch] [bp-28h]@1
  int v21; // [sp+40h] [bp-24h]@1
  int v22; // [sp+44h] [bp-20h]@1
  int v23; // [sp+48h] [bp-1Ch]@1
  int v24; // [sp+4Ch] [bp-18h]@1
  int v25; // [sp+50h] [bp-14h]@1
  int v26; // [sp+54h] [bp-10h]@1
  int v27; // [sp+58h] [bp-Ch]@1
  int v28; // [sp+5Ch] [bp-8h]@1
  int v29; // [sp+60h] [bp-4h]@1

  v18 = 160;
  v19 = 32;
  v20 = 176;
  v21 = 48;
  v22 = 176;
  v23 = 32;
  v24 = 192;
  v25 = 48;
  v26 = 192;
  v27 = 32;
  v28 = 208;
  v29 = 48;
  v6 = 160;
  v7 = 48;
  v8 = 176;
  v9 = 64;
  v10 = 176;
  v11 = 48;
  v12 = 192;
  v13 = 64;
  v14 = 192;
  v15 = 48;
  v16 = 208;
  v17 = 64;
  switch ( *((_DWORD *)a1 + 29) )
  {
    case 0:
      *((_DWORD *)a1 + 29) = 1;
      *((_DWORD *)a1 + 26) = 2;
      if ( *((_DWORD *)a1 + 2) <= Quote_X_Position )
        *((_DWORD *)a1 + 19) = 2;
      else
        *((_DWORD *)a1 + 19) = 0;
      goto LABEL_5;
    case 1:
LABEL_5:
      if ( ++*((_DWORD *)a1 + 30) > 16 )
      {
        *((_DWORD *)a1 + 29) = 10;
        *((_DWORD *)a1 + 36) = 4096;
        *((_DWORD *)a1 + 38) = 4096;
        *((_DWORD *)a1 + 41) = 2;
        *((_WORD *)a1 + 40) |= 0x20u;
      }
      goto LABEL_24;
    case 0xA:
      if ( *((_DWORD *)a1 + 1) & 8 )
      {
        *((_DWORD *)a1 + 29) = 11;
        *((_DWORD *)a1 + 26) = 0;
        *((_DWORD *)a1 + 30) = 0;
        *((_DWORD *)a1 + 4) = 0;
        if ( *((_DWORD *)a1 + 2) <= Quote_X_Position )
          *((_DWORD *)a1 + 19) = 2;
        else
          *((_DWORD *)a1 + 19) = 0;
      }
      goto LABEL_24;
    case 0xB:
      if ( ++*((_DWORD *)a1 + 30) > 10 )
      {
        if ( ++*((_DWORD *)a1 + 27) <= 4 )
          *((_DWORD *)a1 + 29) = 10;
        else
          *((_DWORD *)a1 + 29) = 12;
        Play_Sound_Effect(30, 1);
        *((_DWORD *)a1 + 5) = -1536;
        if ( *((_DWORD *)a1 + 19) )
          *((_DWORD *)a1 + 4) = 512;
        else
          *((_DWORD *)a1 + 4) = -512;
        *((_DWORD *)a1 + 26) = 2;
      }
      goto LABEL_24;
    case 0xC:
      *((_WORD *)a1 + 40) |= 8u;
      if ( *((_DWORD *)a1 + 3) <= *(signed __int16 *)&word_49E588 << 13 )
        goto LABEL_24;
      result = sub_46F760(a1);
      break;
    default:
LABEL_24:
      if ( *((_DWORD *)a1 + 29) >= 10 )
        *((_DWORD *)a1 + 5) += 64;
      if ( *((_DWORD *)a1 + 5) > 1535 )
        *((_DWORD *)a1 + 5) = 1535;
      *((_DWORD *)a1 + 2) += *((_DWORD *)a1 + 4);
      *((_DWORD *)a1 + 3) += *((_DWORD *)a1 + 5);
      if ( *((_DWORD *)a1 + 19) )
      {
        v4 = &v6 + 4 * *((_DWORD *)a1 + 26);
        v5 = (char *)a1 + 84;
        *(_DWORD *)v5 = *v4;
        *((_DWORD *)v5 + 1) = v4[1];
        *((_DWORD *)v5 + 2) = v4[2];
        result = v4[3];
        *((_DWORD *)v5 + 3) = result;
      }
      else
      {
        v2 = &v18 + 4 * *((_DWORD *)a1 + 26);
        v3 = (char *)a1 + 84;
        *(_DWORD *)v3 = *v2;
        *((_DWORD *)v3 + 1) = v2[1];
        *((_DWORD *)v3 + 2) = v2[2];
        result = v2[3];
        *((_DWORD *)v3 + 3) = result;
      }
      if ( *((_DWORD *)a1 + 29) == 1 )
      {
        *((_DWORD *)a1 + 22) += 8 - *((_DWORD *)a1 + 30) / 2;
        *((_DWORD *)a1 + 24) -= *((_DWORD *)a1 + 30) / 2 + 8;
        *((_DWORD *)a1 + 36) = (*((_DWORD *)a1 + 30) << 9) / 2;
        result = (*((_DWORD *)a1 + 30) << 9) / 2;
        *((_DWORD *)a1 + 38) = result;
      }
      break;
  }
  return result;
}

//----- (004614A0) --------------------------------------------------------
int __cdecl NPC290(void *a1)
{
  int result; // eax@25
  int *v2; // ecx@27
  char *v3; // edx@27
  int *v4; // ecx@28
  char *v5; // edx@28
  int v6; // [sp+0h] [bp-64h]@1
  int v7; // [sp+4h] [bp-60h]@1
  int v8; // [sp+8h] [bp-5Ch]@1
  int v9; // [sp+Ch] [bp-58h]@1
  int v10; // [sp+10h] [bp-54h]@1
  int v11; // [sp+14h] [bp-50h]@1
  int v12; // [sp+18h] [bp-4Ch]@1
  int v13; // [sp+1Ch] [bp-48h]@1
  int v14; // [sp+20h] [bp-44h]@1
  int v15; // [sp+24h] [bp-40h]@1
  int v16; // [sp+28h] [bp-3Ch]@1
  int v17; // [sp+2Ch] [bp-38h]@1
  int v18; // [sp+30h] [bp-34h]@1
  int v19; // [sp+34h] [bp-30h]@1
  int v20; // [sp+38h] [bp-2Ch]@1
  int v21; // [sp+3Ch] [bp-28h]@1
  int v22; // [sp+40h] [bp-24h]@1
  int v23; // [sp+44h] [bp-20h]@1
  int v24; // [sp+48h] [bp-1Ch]@1
  int v25; // [sp+4Ch] [bp-18h]@1
  int v26; // [sp+50h] [bp-14h]@1
  int v27; // [sp+54h] [bp-10h]@1
  int v28; // [sp+58h] [bp-Ch]@1
  int v29; // [sp+5Ch] [bp-8h]@1
  int v30; // [sp+60h] [bp-4h]@1

  v19 = 112;
  v20 = 32;
  v21 = 128;
  v22 = 48;
  v23 = 128;
  v24 = 32;
  v25 = 144;
  v26 = 48;
  v27 = 144;
  v28 = 32;
  v29 = 160;
  v30 = 48;
  v7 = 112;
  v8 = 48;
  v9 = 128;
  v10 = 64;
  v11 = 128;
  v12 = 48;
  v13 = 144;
  v14 = 64;
  v15 = 144;
  v16 = 48;
  v17 = 160;
  v18 = 64;
  v6 = *((_DWORD *)a1 + 29);
  if ( !v6 )
  {
    *((_DWORD *)a1 + 29) = 1;
    *((_DWORD *)a1 + 26) = 2;
    if ( *((_DWORD *)a1 + 2) <= Quote_X_Position )
      *((_DWORD *)a1 + 19) = 2;
    else
      *((_DWORD *)a1 + 19) = 0;
LABEL_8:
    if ( ++*((_DWORD *)a1 + 30) > 16 )
    {
      *((_DWORD *)a1 + 29) = 10;
      *((_DWORD *)a1 + 36) = 4096;
      *((_DWORD *)a1 + 38) = 4096;
      *((_DWORD *)a1 + 41) = 2;
      *((_WORD *)a1 + 40) |= 0x20u;
      *((_DWORD *)a1 + 9) = *((_DWORD *)a1 + 3);
      *((_DWORD *)a1 + 5) = 1024;
    }
    goto LABEL_26;
  }
  if ( v6 == 1 )
    goto LABEL_8;
  if ( v6 == 10 )
  {
    if ( ++*((_DWORD *)a1 + 25) > 2 )
    {
      *((_DWORD *)a1 + 25) = 0;
      ++*((_DWORD *)a1 + 26);
    }
    if ( *((_DWORD *)a1 + 26) > 2 )
      *((_DWORD *)a1 + 26) = 0;
    if ( *((_DWORD *)a1 + 3) >= *((_DWORD *)a1 + 9) )
      *((_DWORD *)a1 + 5) -= 64;
    else
      *((_DWORD *)a1 + 5) += 64;
    if ( *((_DWORD *)a1 + 19) )
      *((_DWORD *)a1 + 4) += 16;
    else
      *((_DWORD *)a1 + 4) -= 16;
    if ( *((_DWORD *)a1 + 2) < 0
      || *((_DWORD *)a1 + 3) < 0
      || *((_DWORD *)a1 + 2) > *(signed __int16 *)&word_49E586 << 13
      || *((_DWORD *)a1 + 3) > *(signed __int16 *)&word_49E588 << 13 )
    {
      return sub_46F760(a1);
    }
  }
LABEL_26:
  *((_DWORD *)a1 + 2) += *((_DWORD *)a1 + 4);
  *((_DWORD *)a1 + 3) += *((_DWORD *)a1 + 5);
  if ( *((_DWORD *)a1 + 19) )
  {
    v4 = &v7 + 4 * *((_DWORD *)a1 + 26);
    v5 = (char *)a1 + 84;
    *(_DWORD *)v5 = *v4;
    *((_DWORD *)v5 + 1) = v4[1];
    result = v4[2];
    *((_DWORD *)v5 + 2) = result;
    *((_DWORD *)v5 + 3) = v4[3];
  }
  else
  {
    v2 = &v19 + 4 * *((_DWORD *)a1 + 26);
    v3 = (char *)a1 + 84;
    *(_DWORD *)v3 = *v2;
    *((_DWORD *)v3 + 1) = v2[1];
    result = v2[2];
    *((_DWORD *)v3 + 2) = result;
    *((_DWORD *)v3 + 3) = v2[3];
  }
  if ( *((_DWORD *)a1 + 29) == 1 )
  {
    *((_DWORD *)a1 + 22) += 8 - *((_DWORD *)a1 + 30) / 2;
    *((_DWORD *)a1 + 24) -= *((_DWORD *)a1 + 30) / 2 + 8;
    *((_DWORD *)a1 + 36) = (*((_DWORD *)a1 + 30) << 9) / 2;
    result = (*((_DWORD *)a1 + 30) << 9) / 2;
    *((_DWORD *)a1 + 38) = result;
  }
  return result;
}

//----- (00461800) --------------------------------------------------------
int __cdecl NPC291(int a1)
{
  int *v1; // ecx@4
  int v2; // edx@4
  int result; // eax@4
  int v4; // [sp+4h] [bp-20h]@1
  int v5; // [sp+8h] [bp-1Ch]@1
  int v6; // [sp+Ch] [bp-18h]@1
  int v7; // [sp+10h] [bp-14h]@1
  int v8; // [sp+14h] [bp-10h]@1
  int v9; // [sp+18h] [bp-Ch]@1
  int v10; // [sp+1Ch] [bp-8h]@1
  int v11; // [sp+20h] [bp-4h]@1

  v4 = 256;
  v5 = 80;
  v6 = 320;
  v7 = 120;
  v8 = 256;
  v9 = 0;
  v10 = 320;
  v11 = 40;
  if ( !*(_DWORD *)(a1 + 116) )
  {
    *(_DWORD *)(a1 + 116) = 20;
    if ( *(_DWORD *)(a1 + 76) == 2 )
    {
      *(_WORD *)(a1 + 80) &= 0xFFBFu;
      *(_DWORD *)(a1 + 104) = 1;
    }
  }
  v1 = &v4 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  result = v1[2];
  *(_DWORD *)(v2 + 8) = result;
  *(_DWORD *)(v2 + 12) = v1[3];
  return result;
}

//----- (004618B0) --------------------------------------------------------
int NPC292()
{
  return sub_40F310(10);
}

//----- (004618C0) --------------------------------------------------------
int __cdecl NPC293(int a1)
{
  int v1; // ST08_4@7
  int v2; // eax@7
  int *v3; // eax@9
  int v4; // ecx@9
  int result; // eax@9
  int v6; // [sp+0h] [bp-24h]@1
  int v7; // [sp+4h] [bp-20h]@1
  int v8; // [sp+8h] [bp-1Ch]@1
  int v9; // [sp+Ch] [bp-18h]@1
  int v10; // [sp+10h] [bp-14h]@1
  int v11; // [sp+14h] [bp-10h]@1
  int v12; // [sp+18h] [bp-Ch]@1
  int v13; // [sp+1Ch] [bp-8h]@1
  int v14; // [sp+20h] [bp-4h]@1

  v7 = 240;
  v8 = 200;
  v9 = 280;
  v10 = 240;
  v11 = 280;
  v12 = 200;
  v13 = 320;
  v14 = 240;
  v6 = *(_DWORD *)(a1 + 116);
  if ( v6 )
  {
    if ( v6 != 1 )
      goto LABEL_9;
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 1;
  }
  if ( ++*(_DWORD *)(a1 + 104) > 1 )
    *(_DWORD *)(a1 + 104) = 0;
  v1 = *(_DWORD *)(a1 + 12) + (RNG_Range(-16, 16) << 9);
  v2 = RNG_Range(0, 16);
  NPC_Create(4, *(_DWORD *)(a1 + 8) + (v2 << 9), v1, 0, 0, 0, 0, 256);
  *(_DWORD *)(a1 + 8) -= 4096;
  if ( *(_DWORD *)(a1 + 8) < -16384 )
    *(_BYTE *)a1 = 0;
LABEL_9:
  v3 = &v7 + 4 * *(_DWORD *)(a1 + 104);
  v4 = a1 + 84;
  *(_DWORD *)v4 = *v3;
  *(_DWORD *)(v4 + 4) = v3[1];
  *(_DWORD *)(v4 + 8) = v3[2];
  result = v3[3];
  *(_DWORD *)(v4 + 12) = result;
  return result;
}

//----- (004619E0) --------------------------------------------------------
int __cdecl NPC294(int a1)
{
  int result; // eax@1
  int v2; // [sp+0h] [bp-10h]@1
  int X_Position; // [sp+8h] [bp-8h]@17
  int Y_Position; // [sp+Ch] [bp-4h]@19

  result = a1;
  v2 = *(_DWORD *)(a1 + 116);
  if ( v2 )
  {
    if ( v2 == 1 )
    {
      ++*(_DWORD *)(a1 + 120);
      if ( EquippedItems & 0x20 )
      {
        *(_DWORD *)(a1 + 8) = Quote_X_Position + 0x8000;
        if ( *(_DWORD *)(a1 + 8) < 212992 )
          *(_DWORD *)(a1 + 8) = 212992;
      }
      else
      {
        *(_DWORD *)(a1 + 8) = Quote_X_Position + 49152;
        if ( *(_DWORD *)(a1 + 8) < 188416 )
          *(_DWORD *)(a1 + 8) = 188416;
      }
      if ( *(_DWORD *)(a1 + 8) > (*(signed __int16 *)&word_49E586 - 10) << 13 )
        *(_DWORD *)(a1 + 8) = (*(signed __int16 *)&word_49E586 - 10) << 13;
      result = a1;
      if ( *(_DWORD *)(a1 + 120) > 24 )
      {
        if ( EquippedItems & 0x20 )
          X_Position = *(_DWORD *)(a1 + 8) + (RNG_Range(-14, 14) << 13);
        else
          X_Position = *(_DWORD *)(a1 + 8) + (RNG_Range(-11, 11) << 13);
        Y_Position = Quote_Y_Position - 114688;
        if ( RNG_Range(0, 10) % 2 )
          NPC_Create(279, X_Position, Y_Position, 0, 0, 0, 0, 256);
        else
          NPC_Create(279, X_Position, Y_Position, 0, 0, 2, 0, 256);
        result = RNG_Range(0, 15);
        *(_DWORD *)(a1 + 120) = result;
      }
    }
  }
  else if ( Quote_X_Position < (*(signed __int16 *)&word_49E586 - 6) << 13 )
  {
    result = a1;
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 120) = 0;
  }
  return result;
}
// 49E650: using guessed type int EquippedItems;

//----- (00461B90) --------------------------------------------------------
int __cdecl NPC295(int a1)
{
  int *v1; // edx@18
  int result; // eax@18
  int v3; // [sp+4h] [bp-44h]@1
  int v4; // [sp+8h] [bp-40h]@1
  int v5; // [sp+Ch] [bp-3Ch]@1
  int v6; // [sp+10h] [bp-38h]@1
  int v7; // [sp+14h] [bp-34h]@1
  int v8; // [sp+18h] [bp-30h]@1
  int v9; // [sp+1Ch] [bp-2Ch]@1
  int v10; // [sp+20h] [bp-28h]@1
  int v11; // [sp+24h] [bp-24h]@1
  int v12; // [sp+28h] [bp-20h]@1
  int v13; // [sp+2Ch] [bp-1Ch]@1
  int v14; // [sp+30h] [bp-18h]@1
  int v15; // [sp+34h] [bp-14h]@1
  int v16; // [sp+38h] [bp-10h]@1
  int v17; // [sp+3Ch] [bp-Ch]@1
  int v18; // [sp+40h] [bp-8h]@1
  int v19; // [sp+44h] [bp-4h]@1

  v4 = 0;
  v5 = 0;
  v6 = 208;
  v7 = 64;
  v8 = 32;
  v9 = 64;
  v10 = 144;
  v11 = 96;
  v12 = 32;
  v13 = 96;
  v14 = 104;
  v15 = 128;
  v16 = 104;
  v17 = 96;
  v18 = 144;
  v19 = 128;
  v3 = *(_DWORD *)(a1 + 116);
  if ( v3 )
  {
    if ( v3 == 1 )
    {
      *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
      *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
      if ( *(_DWORD *)(a1 + 8) < -32768 )
        *(_BYTE *)a1 = 0;
      if ( *(_DWORD *)(a1 + 12) < -16384 )
        *(_BYTE *)a1 = 0;
    }
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 104) = *(_DWORD *)(a1 + 76) % 4;
    switch ( *(_DWORD *)(a1 + 76) )
    {
      case 0:
        *(_DWORD *)(a1 + 20) = -4096;
        *(_DWORD *)(a1 + 148) = 53248;
        *(_DWORD *)(a1 + 140) = 53248;
        break;
      case 1:
        *(_DWORD *)(a1 + 20) = -2048;
        *(_DWORD *)(a1 + 148) = 28672;
        *(_DWORD *)(a1 + 140) = 28672;
        break;
      case 2:
        *(_DWORD *)(a1 + 20) = -1024;
        *(_DWORD *)(a1 + 148) = 0x4000;
        *(_DWORD *)(a1 + 140) = 0x4000;
        break;
      case 3:
        *(_DWORD *)(a1 + 20) = -512;
        *(_DWORD *)(a1 + 148) = 10240;
        *(_DWORD *)(a1 + 140) = 10240;
        break;
      case 4:
        *(_DWORD *)(a1 + 16) = -1024;
        *(_DWORD *)(a1 + 148) = 53248;
        *(_DWORD *)(a1 + 140) = 53248;
        break;
      case 5:
        *(_DWORD *)(a1 + 16) = -512;
        *(_DWORD *)(a1 + 148) = 28672;
        *(_DWORD *)(a1 + 140) = 28672;
        break;
      case 6:
        *(_DWORD *)(a1 + 16) = -256;
        *(_DWORD *)(a1 + 148) = 0x4000;
        *(_DWORD *)(a1 + 140) = 0x4000;
        break;
      case 7:
        *(_DWORD *)(a1 + 16) = -128;
        *(_DWORD *)(a1 + 148) = 10240;
        *(_DWORD *)(a1 + 140) = 10240;
        break;
      default:
        break;
    }
  }
  v1 = &v4 + 4 * *(_DWORD *)(a1 + 104);
  result = a1 + 84;
  *(_DWORD *)result = *v1;
  *(_DWORD *)(result + 4) = v1[1];
  *(_DWORD *)(result + 8) = v1[2];
  *(_DWORD *)(result + 12) = v1[3];
  return result;
}

//----- (00461E40) --------------------------------------------------------
int __cdecl NPC296(int a1)
{
  int result; // eax@1
  int v2; // eax@2
  int v3; // eax@8
  int X_Position; // ST30_4@14
  int v5; // eax@14
  signed int v6; // [sp+8h] [bp-10h]@0
  int v7; // [sp+Ch] [bp-Ch]@2

  ++*(_DWORD *)(a1 + 120);
  result = a1;
  if ( *(_DWORD *)(a1 + 120) > 16 )
  {
    *(_DWORD *)(a1 + 120) = RNG_Range(0, 16);
    v2 = RNG_Range(0, 100) % 4;
    v7 = v2;
    if ( *(_DWORD *)(a1 + 76) )
    {
      switch ( v2 )
      {
        case 0:
          v6 = 128;
          break;
        case 1:
          v6 = 85;
          break;
        case 2:
          v6 = 64;
          break;
        case 3:
          v6 = 0;
          break;
        default:
          break;
      }
      X_Position = *(_DWORD *)(a1 + 8);
      v5 = RNG_Range(-7, 7);
      result = NPC_Create(295, X_Position, *(_DWORD *)(a1 + 12) + (v5 << 13), 0, 0, v7 + 4, 0, v6);
    }
    else
    {
      switch ( v2 )
      {
        case 0:
          v6 = 384;
          break;
        case 1:
          v6 = 128;
          break;
        case 2:
          v6 = 64;
          break;
        case 3:
          v6 = 0;
          break;
        default:
          break;
      }
      v3 = RNG_Range(-10, 10);
      result = NPC_Create(295, *(_DWORD *)(a1 + 8) + (v3 << 13), *(_DWORD *)(a1 + 12), 0, 0, v7, 0, v6);
    }
  }
  return result;
}

//----- (00461FD0) --------------------------------------------------------
signed int __cdecl NPC297(int a1)
{
  int v1; // edx@1
  signed int result; // eax@1

  *(_DWORD *)(a1 + 8) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 8) + 0x2000;
  *(_DWORD *)(a1 + 12) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 12) + 4096;
  v1 = a1 + 84;
  *(_DWORD *)v1 = 112;
  *(_DWORD *)(v1 + 4) = 48;
  result = 128;
  *(_DWORD *)(v1 + 8) = 128;
  *(_DWORD *)(v1 + 12) = 64;
  return result;
}

//----- (00462050) --------------------------------------------------------
int __cdecl NPC298(int a1)
{
  int *v1; // edx@24
  int result; // eax@24
  int v3; // [sp+4h] [bp-80h]@1
  int v4; // [sp+8h] [bp-7Ch]@1
  int v5; // [sp+Ch] [bp-78h]@1
  int v6; // [sp+10h] [bp-74h]@1
  int v7; // [sp+14h] [bp-70h]@1
  int v8; // [sp+18h] [bp-6Ch]@1
  int v9; // [sp+1Ch] [bp-68h]@1
  int v10; // [sp+20h] [bp-64h]@1
  int v11; // [sp+24h] [bp-60h]@1
  int v12; // [sp+28h] [bp-5Ch]@1
  int v13; // [sp+2Ch] [bp-58h]@1
  int v14; // [sp+30h] [bp-54h]@1
  int v15; // [sp+34h] [bp-50h]@1
  int v16; // [sp+38h] [bp-4Ch]@1
  int v17; // [sp+3Ch] [bp-48h]@1
  int v18; // [sp+40h] [bp-44h]@1
  int v19; // [sp+44h] [bp-40h]@1
  int v20; // [sp+48h] [bp-3Ch]@1
  int v21; // [sp+4Ch] [bp-38h]@1
  int v22; // [sp+50h] [bp-34h]@1
  int v23; // [sp+54h] [bp-30h]@1
  int v24; // [sp+58h] [bp-2Ch]@1
  int v25; // [sp+5Ch] [bp-28h]@1
  int v26; // [sp+60h] [bp-24h]@1
  int v27; // [sp+64h] [bp-20h]@1
  int v28; // [sp+68h] [bp-1Ch]@1
  int v29; // [sp+6Ch] [bp-18h]@1
  int v30; // [sp+70h] [bp-14h]@1
  int v31; // [sp+74h] [bp-10h]@1
  int v32; // [sp+78h] [bp-Ch]@1
  int v33; // [sp+7Ch] [bp-8h]@1
  int v34; // [sp+80h] [bp-4h]@1

  v3 = 72;
  v4 = 128;
  v5 = 88;
  v6 = 160;
  v7 = 88;
  v8 = 128;
  v9 = 104;
  v10 = 160;
  v11 = 104;
  v12 = 128;
  v13 = 120;
  v14 = 160;
  v15 = 72;
  v16 = 128;
  v17 = 88;
  v18 = 160;
  v19 = 120;
  v20 = 128;
  v21 = 136;
  v22 = 160;
  v23 = 72;
  v24 = 128;
  v25 = 88;
  v26 = 160;
  v27 = 104;
  v28 = 160;
  v29 = 120;
  v30 = 192;
  v31 = 120;
  v32 = 160;
  v33 = 136;
  v34 = 192;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 12) -= 4096;
      goto LABEL_3;
    case 1:
LABEL_3:
      *(_DWORD *)(a1 + 104) = 0;
      break;
    case 0xA:
      *(_DWORD *)(a1 + 116) = 11;
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 100) = 0;
      *(_DWORD *)(a1 + 108) = 0;
      goto LABEL_5;
    case 0xB:
LABEL_5:
      if ( ++*(_DWORD *)(a1 + 100) > 6 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 1 )
      {
        *(_DWORD *)(a1 + 104) = 0;
        if ( ++*(_DWORD *)(a1 + 108) > 7 )
        {
          *(_DWORD *)(a1 + 104) = 0;
          *(_DWORD *)(a1 + 116) = 1;
        }
      }
      break;
    case 0x14:
      *(_DWORD *)(a1 + 116) = 21;
      *(_DWORD *)(a1 + 104) = 2;
      *(_DWORD *)(a1 + 100) = 0;
      goto LABEL_12;
    case 0x15:
LABEL_12:
      if ( ++*(_DWORD *)(a1 + 100) > 10 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 5 )
        *(_DWORD *)(a1 + 104) = 2;
      *(_DWORD *)(a1 + 8) += 256;
      break;
    case 0x1E:
      *(_DWORD *)(a1 + 104) = 6;
      break;
    case 0x28:
      *(_DWORD *)(a1 + 116) = 41;
      *(_DWORD *)(a1 + 104) = 6;
      *(_DWORD *)(a1 + 100) = 0;
      *(_DWORD *)(a1 + 108) = 0;
      goto LABEL_19;
    case 0x29:
LABEL_19:
      if ( ++*(_DWORD *)(a1 + 100) > 6 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 7 )
      {
        *(_DWORD *)(a1 + 104) = 6;
        if ( ++*(_DWORD *)(a1 + 108) > 7 )
        {
          *(_DWORD *)(a1 + 104) = 6;
          *(_DWORD *)(a1 + 116) = 30;
        }
      }
      break;
    default:
      break;
  }
  v1 = &v3 + 4 * *(_DWORD *)(a1 + 104);
  result = a1 + 84;
  *(_DWORD *)result = *v1;
  *(_DWORD *)(result + 4) = v1[1];
  *(_DWORD *)(result + 8) = v1[2];
  *(_DWORD *)(result + 12) = v1[3];
  return result;
}

//----- (004623D0) --------------------------------------------------------
int __cdecl NPC299(int a1)
{
  int *v1; // ecx@8
  int v2; // edx@8
  int result; // eax@8
  int v4; // [sp+0h] [bp-20h]@1
  int v5; // [sp+4h] [bp-1Ch]@1
  int v6; // [sp+8h] [bp-18h]@1
  int v7; // [sp+Ch] [bp-14h]@1
  int v8; // [sp+10h] [bp-10h]@1
  int v9; // [sp+14h] [bp-Ch]@1
  int v10; // [sp+18h] [bp-8h]@1
  int v11; // [sp+1Ch] [bp-4h]@1

  v4 = 0;
  v5 = 0;
  v6 = 48;
  v7 = 48;
  v8 = 48;
  v9 = 0;
  v10 = 96;
  v11 = 48;
  if ( !*(_DWORD *)(a1 + 116) )
  {
    *(_DWORD *)(a1 + 116) = 1;
    if ( *(_DWORD *)(a1 + 76) )
    {
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 120) = 0;
    }
    else
    {
      *(_DWORD *)(a1 + 104) = 1;
      *(_DWORD *)(a1 + 120) = 25;
      *(_DWORD *)(a1 + 12) -= 1600;
    }
  }
  if ( ++*(_DWORD *)(a1 + 120) / 50 % 2 )
    *(_DWORD *)(a1 + 12) += 64;
  else
    *(_DWORD *)(a1 + 12) -= 64;
  v1 = &v4 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  result = v1[2];
  *(_DWORD *)(v2 + 8) = result;
  *(_DWORD *)(v2 + 12) = v1[3];
  return result;
}

//----- (004624E0) --------------------------------------------------------
signed int __cdecl NPC300(int a1)
{
  int v1; // ST08_4@4
  int v2; // eax@4
  int v3; // edx@5
  signed int result; // eax@5

  if ( !*(_DWORD *)(a1 + 116) )
  {
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 12) += 3072;
  }
  if ( ++*(_DWORD *)(a1 + 100) % 8 == 1 )
  {
    v1 = *(_DWORD *)(a1 + 12) + 4096;
    v2 = RNG_Range(-8, 8);
    Create_Animated_Effect(*(_DWORD *)(a1 + 8) + (v2 << 9), v1, 13, 1);
  }
  v3 = a1 + 84;
  *(_DWORD *)v3 = 192;
  *(_DWORD *)(v3 + 4) = 80;
  result = 208;
  *(_DWORD *)(v3 + 8) = 208;
  *(_DWORD *)(v3 + 12) = 96;
  return result;
}

//----- (004625A0) --------------------------------------------------------
int __cdecl NPC301(int a1)
{
  int *v1; // eax@21
  int v2; // ecx@21
  int result; // eax@21
  int v4; // [sp+0h] [bp-88h]@1
  int v5; // [sp+4h] [bp-84h]@5
  int v6; // [sp+8h] [bp-80h]@1
  int v7; // [sp+Ch] [bp-7Ch]@1
  int v8; // [sp+10h] [bp-78h]@1
  int v9; // [sp+14h] [bp-74h]@1
  int v10; // [sp+18h] [bp-70h]@1
  int v11; // [sp+1Ch] [bp-6Ch]@1
  int v12; // [sp+20h] [bp-68h]@1
  int v13; // [sp+24h] [bp-64h]@1
  int v14; // [sp+28h] [bp-60h]@1
  int v15; // [sp+2Ch] [bp-5Ch]@1
  int v16; // [sp+30h] [bp-58h]@1
  int v17; // [sp+34h] [bp-54h]@1
  int v18; // [sp+38h] [bp-50h]@1
  int v19; // [sp+3Ch] [bp-4Ch]@1
  int v20; // [sp+40h] [bp-48h]@1
  int v21; // [sp+44h] [bp-44h]@1
  int v22; // [sp+48h] [bp-40h]@1
  int v23; // [sp+4Ch] [bp-3Ch]@1
  int v24; // [sp+50h] [bp-38h]@1
  int v25; // [sp+54h] [bp-34h]@1
  int v26; // [sp+58h] [bp-30h]@1
  int v27; // [sp+5Ch] [bp-2Ch]@1
  int v28; // [sp+60h] [bp-28h]@1
  int v29; // [sp+64h] [bp-24h]@1
  int v30; // [sp+68h] [bp-20h]@1
  int v31; // [sp+6Ch] [bp-1Ch]@1
  int v32; // [sp+70h] [bp-18h]@1
  int v33; // [sp+74h] [bp-14h]@1
  int v34; // [sp+78h] [bp-10h]@1
  int v35; // [sp+7Ch] [bp-Ch]@1
  int v36; // [sp+80h] [bp-8h]@1
  int v37; // [sp+84h] [bp-4h]@1

  v6 = 144;
  v7 = 0;
  v8 = 160;
  v9 = 16;
  v10 = 160;
  v11 = 0;
  v12 = 176;
  v13 = 16;
  v14 = 176;
  v15 = 0;
  v16 = 192;
  v17 = 16;
  v18 = 192;
  v19 = 0;
  v20 = 208;
  v21 = 16;
  v22 = 144;
  v23 = 16;
  v24 = 160;
  v25 = 32;
  v26 = 160;
  v27 = 16;
  v28 = 176;
  v29 = 32;
  v30 = 176;
  v31 = 16;
  v32 = 192;
  v33 = 32;
  v34 = 192;
  v35 = 16;
  v36 = 208;
  v37 = 32;
  v4 = *(_DWORD *)(a1 + 116);
  if ( v4 )
  {
    if ( v4 != 1 )
      goto LABEL_17;
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 108) = *(_DWORD *)(a1 + 76);
  }
  *(_DWORD *)(a1 + 16) = 2 * COS_function(*(_BYTE *)(a1 + 108));
  *(_DWORD *)(a1 + 20) = 2 * SIN_function(*(_BYTE *)(a1 + 108));
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  v5 = Angle_Calculator(*(_DWORD *)(a1 + 8) - Quote_X_Position, *(_DWORD *)(a1 + 12) - Quote_Y_Position);
  if ( v5 >= *(_DWORD *)(a1 + 108) )
  {
    if ( v5 - *(_DWORD *)(a1 + 108) >= 128 )
      --*(_DWORD *)(a1 + 108);
    else
      ++*(_DWORD *)(a1 + 108);
  }
  else if ( *(_DWORD *)(a1 + 108) - v5 >= 128 )
  {
    ++*(_DWORD *)(a1 + 108);
  }
  else
  {
    --*(_DWORD *)(a1 + 108);
  }
  if ( *(_DWORD *)(a1 + 108) > 255 )
    *(_DWORD *)(a1 + 108) -= 256;
  if ( *(_DWORD *)(a1 + 108) < 0 )
    *(_DWORD *)(a1 + 108) += 256;
LABEL_17:
  if ( ++*(_DWORD *)(a1 + 100) > 2 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    Create_Animated_Effect(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 7, 4);
  }
  *(_DWORD *)(a1 + 104) = (*(_DWORD *)(a1 + 108) + 16) / 32;
  if ( *(_DWORD *)(a1 + 104) > 7 )
    *(_DWORD *)(a1 + 104) = 7;
  v1 = &v6 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  *(_DWORD *)(v2 + 8) = v1[2];
  result = v1[3];
  *(_DWORD *)(v2 + 12) = result;
  return result;
}

//----- (00462890) --------------------------------------------------------
int __cdecl NPC302(int a1)
{
  int v1; // ST04_4@1
  int result; // eax@1
  __int64 v3; // rax@21
  signed int i; // [sp+8h] [bp-4h]@11

  v1 = *(_DWORD *)(a1 + 116);
  result = v1 - 10;
  switch ( v1 )
  {
    case 10:
      result = Quote_X_Position;
      *(_DWORD *)(a1 + 8) = Quote_X_Position;
      *(_DWORD *)(a1 + 12) = Quote_Y_Position - 0x4000;
      break;
    case 20:
      switch ( *(_DWORD *)(a1 + 76) )
      {
        case 0:
          *(_DWORD *)(a1 + 8) -= 1024;
          break;
        case 1:
          *(_DWORD *)(a1 + 12) -= 1024;
          break;
        case 2:
          *(_DWORD *)(a1 + 8) += 1024;
          break;
        case 3:
          *(_DWORD *)(a1 + 12) += 1024;
          break;
        default:
          break;
      }
      Quote_X_Position = *(_DWORD *)(a1 + 8);
      result = *(_DWORD *)(a1 + 12);
      Quote_Y_Position = *(_DWORD *)(a1 + 12);
      break;
    case 30:
      *(_DWORD *)(a1 + 8) = Quote_X_Position;
      result = Quote_Y_Position + 40960;
      *(_DWORD *)(a1 + 12) = Quote_Y_Position + 40960;
      break;
    case 100:
      *(_DWORD *)(a1 + 116) = 101;
      if ( !*(_DWORD *)(a1 + 76) )
      {
        *(_DWORD *)(a1 + 168) = &byte_4BBA58;
        goto LABEL_21;
      }
      for ( i = 170; i < 512; ++i )
      {
        if ( *((_BYTE *)&Is_NPC_Alive + 172 * i) & 0x80 && NPC_Event_Number[43 * i] == *(_DWORD *)(a1 + 76) )
        {
          *(_DWORD *)(a1 + 168) = (char *)&Is_NPC_Alive + 172 * i;
          break;
        }
      }
      if ( i != 512 )
        goto LABEL_21;
      result = a1;
      *(_BYTE *)a1 = 0;
      break;
    case 101:
LABEL_21:
      v3 = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 8) + Quote_X_Position;
      *(_DWORD *)(a1 + 8) = ((signed int)v3 - HIDWORD(v3)) >> 1;
      result = (*(_DWORD *)(*(_DWORD *)(a1 + 168) + 12) + Quote_Y_Position) / 2;
      *(_DWORD *)(a1 + 12) = result;
      break;
    default:
      return result;
  }
  return result;
}
// 4A6250: using guessed type int NPC_Event_Number[];

//----- (00462AF0) --------------------------------------------------------
int __cdecl NPC303(int a1)
{
  int result; // eax@1
  int *v2; // ecx@9
  int v3; // edx@9
  int *v4; // ecx@10
  int v5; // edx@10
  int v6; // [sp+0h] [bp-40h]@1
  int v7; // [sp+4h] [bp-3Ch]@1
  int v8; // [sp+8h] [bp-38h]@1
  int v9; // [sp+Ch] [bp-34h]@1
  int v10; // [sp+10h] [bp-30h]@1
  int v11; // [sp+14h] [bp-2Ch]@1
  int v12; // [sp+18h] [bp-28h]@1
  int v13; // [sp+1Ch] [bp-24h]@1
  int v14; // [sp+20h] [bp-20h]@1
  int v15; // [sp+24h] [bp-1Ch]@1
  int v16; // [sp+28h] [bp-18h]@1
  int v17; // [sp+2Ch] [bp-14h]@1
  int v18; // [sp+30h] [bp-10h]@1
  int v19; // [sp+34h] [bp-Ch]@1
  int v20; // [sp+38h] [bp-8h]@1
  int v21; // [sp+3Ch] [bp-4h]@1

  v14 = 216;
  v15 = 152;
  v16 = 232;
  v17 = 168;
  v18 = 232;
  v19 = 152;
  v20 = 248;
  v21 = 168;
  v6 = 216;
  v7 = 168;
  v8 = 232;
  v9 = 184;
  v10 = 232;
  v11 = 168;
  v12 = 248;
  v13 = 184;
  result = a1;
  if ( *(_DWORD *)(a1 + 168) )
  {
    if ( *(_DWORD *)(*(_DWORD *)(a1 + 168) + 76) )
    {
      *(_DWORD *)(a1 + 76) = 2;
      *(_DWORD *)(a1 + 8) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 8) + 4096;
    }
    else
    {
      *(_DWORD *)(a1 + 76) = 0;
      *(_DWORD *)(a1 + 8) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 8) - 4096;
    }
    *(_DWORD *)(a1 + 12) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 12);
    *(_DWORD *)(a1 + 104) = 0;
    if ( *(_DWORD *)(*(_DWORD *)(a1 + 168) + 104) == 3 || *(_DWORD *)(*(_DWORD *)(a1 + 168) + 104) == 5 )
      *(_DWORD *)(a1 + 12) -= 512;
    if ( *(_DWORD *)(a1 + 76) )
    {
      v4 = &v6 + 4 * *(_DWORD *)(a1 + 104);
      v5 = a1 + 84;
      *(_DWORD *)v5 = *v4;
      *(_DWORD *)(v5 + 4) = v4[1];
      result = v4[2];
      *(_DWORD *)(v5 + 8) = result;
      *(_DWORD *)(v5 + 12) = v4[3];
    }
    else
    {
      v2 = &v14 + 4 * *(_DWORD *)(a1 + 104);
      v3 = a1 + 84;
      *(_DWORD *)v3 = *v2;
      *(_DWORD *)(v3 + 4) = v2[1];
      result = v2[2];
      *(_DWORD *)(v3 + 8) = result;
      *(_DWORD *)(v3 + 12) = v2[3];
    }
  }
  return result;
}

//----- (00462C80) --------------------------------------------------------
int __cdecl NPC304(int a1)
{
  int *v1; // eax@10
  int v2; // ecx@10
  int result; // eax@10
  int v4; // [sp+4h] [bp-40h]@1
  int v5; // [sp+8h] [bp-3Ch]@1
  int v6; // [sp+Ch] [bp-38h]@1
  int v7; // [sp+10h] [bp-34h]@1
  int v8; // [sp+14h] [bp-30h]@1
  int v9; // [sp+18h] [bp-2Ch]@1
  int v10; // [sp+1Ch] [bp-28h]@1
  int v11; // [sp+20h] [bp-24h]@1
  int v12; // [sp+24h] [bp-20h]@1
  int v13; // [sp+28h] [bp-1Ch]@1
  int v14; // [sp+2Ch] [bp-18h]@1
  int v15; // [sp+30h] [bp-14h]@1
  int v16; // [sp+34h] [bp-10h]@1
  int v17; // [sp+38h] [bp-Ch]@1
  int v18; // [sp+3Ch] [bp-8h]@1
  int v19; // [sp+40h] [bp-4h]@1

  v4 = 0;
  v5 = 176;
  v6 = 24;
  v7 = 192;
  v8 = 24;
  v9 = 176;
  v10 = 48;
  v11 = 192;
  v12 = 48;
  v13 = 176;
  v14 = 72;
  v15 = 192;
  v16 = 72;
  v17 = 176;
  v18 = 96;
  v19 = 192;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 12) += 5120;
      goto LABEL_3;
    case 1:
LABEL_3:
      *(_DWORD *)(a1 + 104) = 0;
      break;
    case 0xA:
      *(_DWORD *)(a1 + 104) = 1;
      break;
    case 0x14:
      *(_DWORD *)(a1 + 116) = 21;
      *(_DWORD *)(a1 + 104) = 2;
      goto LABEL_6;
    case 0x15:
LABEL_6:
      if ( ++*(_DWORD *)(a1 + 100) > 10 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 3 )
        *(_DWORD *)(a1 + 104) = 2;
      break;
    default:
      break;
  }
  v1 = &v4 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  *(_DWORD *)(v2 + 8) = v1[2];
  result = v1[3];
  *(_DWORD *)(v2 + 12) = result;
  return result;
}

//----- (00462E00) --------------------------------------------------------
int __cdecl NPC305(int a1)
{
  int *v1; // eax@10
  int v2; // ecx@10
  int result; // eax@10
  int *v4; // eax@11
  int v5; // ecx@11
  int v6; // [sp+0h] [bp-44h]@1
  int v7; // [sp+4h] [bp-40h]@1
  int v8; // [sp+8h] [bp-3Ch]@1
  int v9; // [sp+Ch] [bp-38h]@1
  int v10; // [sp+10h] [bp-34h]@1
  int v11; // [sp+14h] [bp-30h]@1
  int v12; // [sp+18h] [bp-2Ch]@1
  int v13; // [sp+1Ch] [bp-28h]@1
  int v14; // [sp+20h] [bp-24h]@1
  int v15; // [sp+24h] [bp-20h]@1
  int v16; // [sp+28h] [bp-1Ch]@1
  int v17; // [sp+2Ch] [bp-18h]@1
  int v18; // [sp+30h] [bp-14h]@1
  int v19; // [sp+34h] [bp-10h]@1
  int v20; // [sp+38h] [bp-Ch]@1
  int v21; // [sp+3Ch] [bp-8h]@1
  int v22; // [sp+40h] [bp-4h]@1

  v15 = 160;
  v16 = 144;
  v17 = 176;
  v18 = 160;
  v19 = 176;
  v20 = 144;
  v21 = 192;
  v22 = 160;
  v7 = 160;
  v8 = 160;
  v9 = 176;
  v10 = 176;
  v11 = 176;
  v12 = 160;
  v13 = 192;
  v14 = 176;
  v6 = *(_DWORD *)(a1 + 116);
  if ( v6 )
  {
    if ( v6 != 1 )
      goto LABEL_9;
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 12) -= 0x2000;
    *(_DWORD *)(a1 + 100) = RNG_Range(0, 6);
  }
  if ( ++*(_DWORD *)(a1 + 100) > 6 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    ++*(_DWORD *)(a1 + 104);
  }
  if ( *(_DWORD *)(a1 + 104) > 1 )
    *(_DWORD *)(a1 + 104) = 0;
LABEL_9:
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v7 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    *(_DWORD *)(v5 + 8) = v4[2];
    result = v4[3];
    *(_DWORD *)(v5 + 12) = result;
  }
  else
  {
    v1 = &v15 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    *(_DWORD *)(v2 + 8) = v1[2];
    result = v1[3];
    *(_DWORD *)(v2 + 12) = result;
  }
  return result;
}

//----- (00462F60) --------------------------------------------------------
int __cdecl NPC306(int a1)
{
  int *v1; // edx@12
  int result; // eax@12
  int *v3; // edx@13
  int v4; // [sp+0h] [bp-44h]@1
  int v5; // [sp+4h] [bp-40h]@1
  int v6; // [sp+8h] [bp-3Ch]@1
  int v7; // [sp+Ch] [bp-38h]@1
  int v8; // [sp+10h] [bp-34h]@1
  int v9; // [sp+14h] [bp-30h]@1
  int v10; // [sp+18h] [bp-2Ch]@1
  int v11; // [sp+1Ch] [bp-28h]@1
  int v12; // [sp+20h] [bp-24h]@1
  int v13; // [sp+24h] [bp-20h]@1
  int v14; // [sp+28h] [bp-1Ch]@1
  int v15; // [sp+2Ch] [bp-18h]@1
  int v16; // [sp+30h] [bp-14h]@1
  int v17; // [sp+34h] [bp-10h]@1
  int v18; // [sp+38h] [bp-Ch]@1
  int v19; // [sp+3Ch] [bp-8h]@1
  int v20; // [sp+40h] [bp-4h]@1

  v13 = 240;
  v14 = 96;
  v15 = 280;
  v16 = 128;
  v17 = 280;
  v18 = 96;
  v19 = 320;
  v20 = 128;
  v5 = 160;
  v6 = 152;
  v7 = 200;
  v8 = 184;
  v9 = 200;
  v10 = 152;
  v11 = 240;
  v12 = 184;
  v4 = *(_DWORD *)(a1 + 116);
  if ( v4 )
  {
    if ( v4 != 1 )
    {
      if ( v4 == 2 && ++*(_DWORD *)(a1 + 120) > 8 )
      {
        *(_DWORD *)(a1 + 116) = 1;
        *(_DWORD *)(a1 + 104) = 0;
      }
      goto LABEL_11;
    }
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 104) = 0;
    *(_DWORD *)(a1 + 100) = 0;
    *(_DWORD *)(a1 + 12) += 2048;
  }
  if ( RNG_Range(0, 120) == 10 )
  {
    *(_DWORD *)(a1 + 116) = 2;
    *(_DWORD *)(a1 + 120) = 0;
    *(_DWORD *)(a1 + 104) = 1;
  }
LABEL_11:
  if ( *(_DWORD *)(a1 + 76) )
  {
    v3 = &v5 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v3;
    *(_DWORD *)(result + 4) = v3[1];
    *(_DWORD *)(result + 8) = v3[2];
    *(_DWORD *)(result + 12) = v3[3];
  }
  else
  {
    v1 = &v13 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v1;
    *(_DWORD *)(result + 4) = v1[1];
    *(_DWORD *)(result + 8) = v1[2];
    *(_DWORD *)(result + 12) = v1[3];
  }
  return result;
}

//----- (004630F0) --------------------------------------------------------
int __cdecl NPC307(int a1)
{
  int *v1; // eax@15
  int v2; // ecx@15
  int result; // eax@15
  int *v4; // eax@16
  int v5; // ecx@16
  int v6; // [sp+0h] [bp-44h]@1
  int v7; // [sp+4h] [bp-40h]@1
  int v8; // [sp+8h] [bp-3Ch]@1
  int v9; // [sp+Ch] [bp-38h]@1
  int v10; // [sp+10h] [bp-34h]@1
  int v11; // [sp+14h] [bp-30h]@1
  int v12; // [sp+18h] [bp-2Ch]@1
  int v13; // [sp+1Ch] [bp-28h]@1
  int v14; // [sp+20h] [bp-24h]@1
  int v15; // [sp+24h] [bp-20h]@1
  int v16; // [sp+28h] [bp-1Ch]@1
  int v17; // [sp+2Ch] [bp-18h]@1
  int v18; // [sp+30h] [bp-14h]@1
  int v19; // [sp+34h] [bp-10h]@1
  int v20; // [sp+38h] [bp-Ch]@1
  int v21; // [sp+3Ch] [bp-8h]@1
  int v22; // [sp+40h] [bp-4h]@1

  v15 = 0;
  v16 = 32;
  v17 = 16;
  v18 = 48;
  v19 = 16;
  v20 = 32;
  v21 = 32;
  v22 = 48;
  v7 = 0;
  v8 = 48;
  v9 = 16;
  v10 = 64;
  v11 = 16;
  v12 = 48;
  v13 = 32;
  v14 = 64;
  v6 = *(_DWORD *)(a1 + 116);
  if ( v6 )
  {
    if ( v6 != 1 )
    {
      if ( v6 == 2 && ++*(_DWORD *)(a1 + 120) > 12 )
      {
        *(_DWORD *)(a1 + 116) = 1;
        *(_DWORD *)(a1 + 104) = 0;
      }
      goto LABEL_11;
    }
  }
  else
  {
    *(_DWORD *)(a1 + 8) += 512;
    *(_DWORD *)(a1 + 12) -= 1024;
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 104) = 0;
    *(_DWORD *)(a1 + 100) = 0;
  }
  if ( RNG_Range(0, 160) == 1 )
  {
    *(_DWORD *)(a1 + 116) = 2;
    *(_DWORD *)(a1 + 120) = 0;
    *(_DWORD *)(a1 + 104) = 1;
  }
LABEL_11:
  if ( Quote_X_Position >= *(_DWORD *)(a1 + 8) )
    *(_DWORD *)(a1 + 76) = 2;
  else
    *(_DWORD *)(a1 + 76) = 0;
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v7 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    *(_DWORD *)(v5 + 8) = v4[2];
    result = v4[3];
    *(_DWORD *)(v5 + 12) = result;
  }
  else
  {
    v1 = &v15 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    *(_DWORD *)(v2 + 8) = v1[2];
    result = v1[3];
    *(_DWORD *)(v2 + 12) = result;
  }
  return result;
}

//----- (004632B0) --------------------------------------------------------
int __cdecl NPC308(int a1)
{
  int *v1; // ecx@45
  int v2; // edx@45
  int result; // eax@45
  int *v4; // ecx@46
  int v5; // edx@46
  int v6; // [sp+4h] [bp-44h]@1
  int v7; // [sp+8h] [bp-40h]@1
  int v8; // [sp+Ch] [bp-3Ch]@1
  int v9; // [sp+10h] [bp-38h]@1
  int v10; // [sp+14h] [bp-34h]@1
  int v11; // [sp+18h] [bp-30h]@1
  int v12; // [sp+1Ch] [bp-2Ch]@1
  int v13; // [sp+20h] [bp-28h]@1
  int v14; // [sp+24h] [bp-24h]@1
  int v15; // [sp+28h] [bp-20h]@1
  int v16; // [sp+2Ch] [bp-1Ch]@1
  int v17; // [sp+30h] [bp-18h]@1
  int v18; // [sp+34h] [bp-14h]@1
  int v19; // [sp+38h] [bp-10h]@1
  int v20; // [sp+3Ch] [bp-Ch]@1
  int v21; // [sp+40h] [bp-8h]@1
  unsigned __int8 v22; // [sp+47h] [bp-1h]@23

  v14 = 128;
  v15 = 112;
  v16 = 144;
  v17 = 128;
  v18 = 144;
  v19 = 112;
  v20 = 160;
  v21 = 128;
  v6 = 128;
  v7 = 128;
  v8 = 144;
  v9 = 144;
  v10 = 144;
  v11 = 128;
  v12 = 160;
  v13 = 144;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( Quote_X_Position < *(_DWORD *)(a1 + 8) + 122880
        && Quote_X_Position > *(_DWORD *)(a1 + 8) - 122880
        && Quote_Y_Position < *(_DWORD *)(a1 + 12) + 98304
        && Quote_Y_Position > *(_DWORD *)(a1 + 12) - 98304 )
      {
        *(_DWORD *)(a1 + 116) = 10;
      }
      break;
    case 0xA:
      *(_DWORD *)(a1 + 116) = 11;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 24) = 0;
      *(_DWORD *)(a1 + 28) = 0;
      if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
        *(_DWORD *)(a1 + 76) = 2;
      else
        *(_DWORD *)(a1 + 76) = 0;
      goto LABEL_12;
    case 0xB:
LABEL_12:
      if ( ++*(_DWORD *)(a1 + 120) > 50 )
        *(_DWORD *)(a1 + 116) = 20;
      ++*(_DWORD *)(a1 + 100);
      if ( *(_DWORD *)(a1 + 120) > 1 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        if ( ++*(_DWORD *)(a1 + 104) > 1 )
          *(_DWORD *)(a1 + 104) = 0;
      }
      if ( Quote_X_Position > *(_DWORD *)(a1 + 8) + 163840
        || Quote_X_Position < *(_DWORD *)(a1 + 8) - 163840
        || Quote_Y_Position > *(_DWORD *)(a1 + 12) + 122880
        || Quote_Y_Position < *(_DWORD *)(a1 + 12) - 122880 )
      {
        *(_DWORD *)(a1 + 116) = 0;
      }
      break;
    case 0x14:
      *(_DWORD *)(a1 + 116) = 21;
      *(_DWORD *)(a1 + 120) = 0;
      v22 = Angle_Calculator(*(_DWORD *)(a1 + 8) - Quote_X_Position, *(_DWORD *)(a1 + 12) - Quote_Y_Position);
      v22 += RNG_Range(-3, 3);
      *(_DWORD *)(a1 + 28) = 2 * SIN_function(v22);
      *(_DWORD *)(a1 + 24) = 2 * COS_function(v22);
      if ( *(_DWORD *)(a1 + 24) >= 0 )
        *(_DWORD *)(a1 + 76) = 2;
      else
        *(_DWORD *)(a1 + 76) = 0;
      goto LABEL_26;
    case 0x15:
LABEL_26:
      if ( *(_DWORD *)(a1 + 24) < 0 && *(_DWORD *)(a1 + 4) & 1 )
      {
        *(_DWORD *)(a1 + 76) = 2;
        *(_DWORD *)(a1 + 24) = -*(_DWORD *)(a1 + 24);
      }
      if ( *(_DWORD *)(a1 + 24) > 0 && *(_DWORD *)(a1 + 4) & 4 )
      {
        *(_DWORD *)(a1 + 76) = 0;
        *(_DWORD *)(a1 + 24) = -*(_DWORD *)(a1 + 24);
      }
      if ( *(_DWORD *)(a1 + 28) < 0 && *(_DWORD *)(a1 + 4) & 2 )
        *(_DWORD *)(a1 + 28) = -*(_DWORD *)(a1 + 28);
      if ( *(_DWORD *)(a1 + 28) > 0 && *(_DWORD *)(a1 + 4) & 8 )
        *(_DWORD *)(a1 + 28) = -*(_DWORD *)(a1 + 28);
      if ( *(_DWORD *)(a1 + 4) & 0x100 )
        *(_DWORD *)(a1 + 28) = -512;
      *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 24);
      *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 28);
      if ( ++*(_DWORD *)(a1 + 120) > 50 )
        *(_DWORD *)(a1 + 116) = 10;
      if ( ++*(_DWORD *)(a1 + 104) > 1 )
        *(_DWORD *)(a1 + 104) = 0;
      break;
    default:
      break;
  }
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v6 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    result = v4[2];
    *(_DWORD *)(v5 + 8) = result;
    *(_DWORD *)(v5 + 12) = v4[3];
  }
  else
  {
    v1 = &v14 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    result = v1[2];
    *(_DWORD *)(v2 + 8) = result;
    *(_DWORD *)(v2 + 12) = v1[3];
  }
  return result;
}

//----- (00463710) --------------------------------------------------------
int __cdecl NPC309(int a1)
{
  int result; // eax@4
  int *v2; // eax@47
  int v3; // ecx@47
  int *v4; // eax@48
  int v5; // ecx@48
  int v6; // [sp+4h] [bp-40h]@1
  int v7; // [sp+8h] [bp-3Ch]@1
  int v8; // [sp+Ch] [bp-38h]@1
  int v9; // [sp+10h] [bp-34h]@1
  int v10; // [sp+14h] [bp-30h]@1
  int v11; // [sp+18h] [bp-2Ch]@1
  int v12; // [sp+1Ch] [bp-28h]@1
  int v13; // [sp+20h] [bp-24h]@1
  int v14; // [sp+24h] [bp-20h]@1
  int v15; // [sp+28h] [bp-1Ch]@1
  int v16; // [sp+2Ch] [bp-18h]@1
  int v17; // [sp+30h] [bp-14h]@1
  int v18; // [sp+34h] [bp-10h]@1
  int v19; // [sp+38h] [bp-Ch]@1
  int v20; // [sp+3Ch] [bp-8h]@1
  int v21; // [sp+40h] [bp-4h]@1

  v14 = 0;
  v15 = 0;
  v16 = 16;
  v17 = 16;
  v18 = 16;
  v19 = 0;
  v20 = 32;
  v21 = 16;
  v6 = 0;
  v7 = 16;
  v8 = 16;
  v9 = 32;
  v10 = 16;
  v11 = 16;
  v12 = 32;
  v13 = 32;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( *(_DWORD *)(a1 + 76) )
      {
        result = *(_DWORD *)(a1 + 8) + 147456;
        if ( Quote_X_Position >= result || Quote_X_Position <= *(_DWORD *)(a1 + 8) + 139264 )
          return result;
        *(_DWORD *)(a1 + 116) = 10;
      }
      else
      {
        result = a1;
        if ( Quote_X_Position <= *(_DWORD *)(a1 + 8) - 147456 )
          return result;
        result = *(_DWORD *)(a1 + 8) - 139264;
        if ( Quote_X_Position >= result )
          return result;
        *(_DWORD *)(a1 + 116) = 10;
      }
LABEL_46:
      if ( *(_DWORD *)(a1 + 76) )
      {
        v4 = &v6 + 4 * *(_DWORD *)(a1 + 104);
        v5 = a1 + 84;
        *(_DWORD *)v5 = *v4;
        *(_DWORD *)(v5 + 4) = v4[1];
        *(_DWORD *)(v5 + 8) = v4[2];
        result = v4[3];
        *(_DWORD *)(v5 + 12) = result;
      }
      else
      {
        v2 = &v14 + 4 * *(_DWORD *)(a1 + 104);
        v3 = a1 + 84;
        *(_DWORD *)v3 = *v2;
        *(_DWORD *)(v3 + 4) = v2[1];
        *(_DWORD *)(v3 + 8) = v2[2];
        result = v2[3];
        *(_DWORD *)(v3 + 12) = result;
      }
      if ( *(_DWORD *)(a1 + 64) <= 996 )
      {
        *(_DWORD *)(a1 + 40) = 316;
        result = a1;
        *(_DWORD *)(a1 + 116) = 0;
      }
      return result;
    case 0xA:
      *(_DWORD *)(a1 + 116) = 11;
      *(_WORD *)(a1 + 80) |= 0x20u;
      *(_DWORD *)(a1 + 164) = 5;
      goto LABEL_13;
    case 0xB:
LABEL_13:
      if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
        *(_DWORD *)(a1 + 76) = 2;
      else
        *(_DWORD *)(a1 + 76) = 0;
      if ( *(_DWORD *)(a1 + 76) )
        *(_DWORD *)(a1 + 24) += 16;
      else
        *(_DWORD *)(a1 + 24) -= 16;
      if ( *(_DWORD *)(a1 + 12) <= Quote_Y_Position )
        *(_DWORD *)(a1 + 28) += 16;
      else
        *(_DWORD *)(a1 + 28) -= 16;
      if ( *(_DWORD *)(a1 + 24) < 0 && *(_DWORD *)(a1 + 4) & 1 )
        *(_DWORD *)(a1 + 24) = -*(_DWORD *)(a1 + 24);
      if ( *(_DWORD *)(a1 + 24) > 0 && *(_DWORD *)(a1 + 4) & 4 )
        *(_DWORD *)(a1 + 24) = -*(_DWORD *)(a1 + 24);
      if ( *(_DWORD *)(a1 + 28) < 0 && *(_DWORD *)(a1 + 4) & 2 )
        *(_DWORD *)(a1 + 28) = -*(_DWORD *)(a1 + 28);
      if ( *(_DWORD *)(a1 + 28) > 0 && *(_DWORD *)(a1 + 4) & 8 )
        *(_DWORD *)(a1 + 28) = -*(_DWORD *)(a1 + 28);
      if ( *(_DWORD *)(a1 + 24) < -1535 )
        *(_DWORD *)(a1 + 24) = -1535;
      if ( *(_DWORD *)(a1 + 24) > 1535 )
        *(_DWORD *)(a1 + 24) = 1535;
      if ( *(_DWORD *)(a1 + 28) < -1535 )
        *(_DWORD *)(a1 + 28) = -1535;
      if ( *(_DWORD *)(a1 + 28) > 1535 )
        *(_DWORD *)(a1 + 28) = 1535;
      *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 24);
      *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 28);
      if ( ++*(_DWORD *)(a1 + 100) > 1 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 1 )
        *(_DWORD *)(a1 + 104) = 0;
      goto LABEL_46;
    default:
      goto LABEL_46;
  }
}

//----- (00463AC0) --------------------------------------------------------
int __cdecl NPC310(int a1)
{
  int *v1; // edx@43
  int v2; // eax@43
  int *v3; // edx@44
  int v4; // eax@44
  int result; // eax@45
  int v6; // [sp+4h] [bp-A0h]@1
  int v7; // [sp+8h] [bp-9Ch]@1
  int v8; // [sp+Ch] [bp-98h]@1
  int v9; // [sp+10h] [bp-94h]@1
  int v10; // [sp+14h] [bp-90h]@1
  int v11; // [sp+18h] [bp-8Ch]@1
  int v12; // [sp+1Ch] [bp-88h]@1
  int v13; // [sp+20h] [bp-84h]@1
  int v14; // [sp+24h] [bp-80h]@1
  int v15; // [sp+28h] [bp-7Ch]@1
  int v16; // [sp+2Ch] [bp-78h]@1
  int v17; // [sp+30h] [bp-74h]@1
  int v18; // [sp+34h] [bp-70h]@1
  int v19; // [sp+38h] [bp-6Ch]@1
  int v20; // [sp+3Ch] [bp-68h]@1
  int v21; // [sp+40h] [bp-64h]@1
  int v22; // [sp+44h] [bp-60h]@1
  int v23; // [sp+48h] [bp-5Ch]@1
  int v24; // [sp+4Ch] [bp-58h]@1
  int v25; // [sp+50h] [bp-54h]@1
  int v26; // [sp+54h] [bp-50h]@1
  int v27; // [sp+58h] [bp-4Ch]@1
  int v28; // [sp+5Ch] [bp-48h]@1
  int v29; // [sp+60h] [bp-44h]@1
  int v30; // [sp+64h] [bp-40h]@1
  int v31; // [sp+68h] [bp-3Ch]@1
  int v32; // [sp+6Ch] [bp-38h]@1
  int v33; // [sp+70h] [bp-34h]@1
  int v34; // [sp+74h] [bp-30h]@1
  int v35; // [sp+78h] [bp-2Ch]@1
  int v36; // [sp+7Ch] [bp-28h]@1
  int v37; // [sp+80h] [bp-24h]@1
  int v38; // [sp+84h] [bp-20h]@1
  int v39; // [sp+88h] [bp-1Ch]@1
  int v40; // [sp+8Ch] [bp-18h]@1
  int v41; // [sp+90h] [bp-14h]@1
  int v42; // [sp+94h] [bp-10h]@1
  int v43; // [sp+98h] [bp-Ch]@1
  int v44; // [sp+9Ch] [bp-8h]@1
  int v45; // [sp+A0h] [bp-4h]@1

  v26 = 32;
  v27 = 0;
  v28 = 56;
  v29 = 16;
  v30 = 56;
  v31 = 0;
  v32 = 80;
  v33 = 16;
  v34 = 80;
  v35 = 0;
  v36 = 104;
  v37 = 16;
  v38 = 104;
  v39 = 0;
  v40 = 128;
  v41 = 16;
  v42 = 128;
  v43 = 0;
  v44 = 152;
  v45 = 16;
  v6 = 32;
  v7 = 16;
  v8 = 56;
  v9 = 32;
  v10 = 56;
  v11 = 16;
  v12 = 80;
  v13 = 32;
  v14 = 80;
  v15 = 16;
  v16 = 104;
  v17 = 32;
  v18 = 104;
  v19 = 16;
  v20 = 128;
  v21 = 32;
  v22 = 128;
  v23 = 16;
  v24 = 152;
  v25 = 32;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_WORD *)(a1 + 80) &= 0xFFDFu;
      *(_WORD *)(a1 + 80) |= 4u;
      *(_DWORD *)(a1 + 164) = 0;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
        *(_DWORD *)(a1 + 76) = 2;
      else
        *(_DWORD *)(a1 + 76) = 0;
      *(_DWORD *)(a1 + 104) = 0;
      if ( Quote_X_Position > *(_DWORD *)(a1 + 8) - 0x10000
        && Quote_X_Position < *(_DWORD *)(a1 + 8) + 0x10000
        && Quote_Y_Position > *(_DWORD *)(a1 + 12) - 0x10000
        && Quote_Y_Position < *(_DWORD *)(a1 + 12) + 0x2000 )
      {
        *(_DWORD *)(a1 + 116) = 10;
      }
      break;
    case 0xA:
      *(_DWORD *)(a1 + 16) = 0;
      *(_DWORD *)(a1 + 116) = 11;
      *(_DWORD *)(a1 + 120) = 0;
      *(_WORD *)(a1 + 80) &= 0xFFDFu;
      *(_WORD *)(a1 + 80) |= 4u;
      *(_DWORD *)(a1 + 164) = 0;
      *(_DWORD *)(a1 + 104) = 0;
      goto LABEL_13;
    case 0xB:
LABEL_13:
      if ( ++*(_DWORD *)(a1 + 120) > 30 )
        *(_DWORD *)(a1 + 116) = 20;
      break;
    case 0x14:
      *(_DWORD *)(a1 + 116) = 21;
      *(_DWORD *)(a1 + 120) = 0;
      *(_WORD *)(a1 + 80) &= 0xFFFBu;
      *(_WORD *)(a1 + 80) |= 0x20u;
      *(_DWORD *)(a1 + 164) = 0;
      if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
        *(_DWORD *)(a1 + 76) = 2;
      else
        *(_DWORD *)(a1 + 76) = 0;
      goto LABEL_19;
    case 0x15:
LABEL_19:
      if ( *(_DWORD *)(a1 + 76) )
        *(_DWORD *)(a1 + 16) = 1024;
      else
        *(_DWORD *)(a1 + 16) = -1024;
      if ( ++*(_DWORD *)(a1 + 100) > 3 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 1 )
        *(_DWORD *)(a1 + 104) = 0;
      if ( ++*(_DWORD *)(a1 + 120) > 50 )
        *(_DWORD *)(a1 + 116) = 10;
      if ( *(_DWORD *)(a1 + 8) < Quote_X_Position + 20480 && *(_DWORD *)(a1 + 8) > Quote_X_Position - 20480 )
      {
        *(_DWORD *)(a1 + 20) = -768;
        *(_DWORD *)(a1 + 16) /= 2;
        *(_DWORD *)(a1 + 104) = 2;
        *(_DWORD *)(a1 + 116) = 30;
        Play_Sound_Effect(30, 1);
      }
      break;
    case 0x1E:
      if ( *(_DWORD *)(a1 + 20) > -128 )
      {
        *(_DWORD *)(a1 + 116) = 31;
        *(_DWORD *)(a1 + 100) = 0;
        *(_DWORD *)(a1 + 104) = 3;
        *(_DWORD *)(a1 + 164) = 9;
      }
      break;
    case 0x1F:
      if ( ++*(_DWORD *)(a1 + 100) > 2 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        *(_DWORD *)(a1 + 104) = 4;
      }
      if ( *(_DWORD *)(a1 + 4) & 8 )
      {
        *(_DWORD *)(a1 + 116) = 32;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 16) = 0;
        *(_DWORD *)(a1 + 164) = 3;
      }
      break;
    case 0x20:
      if ( ++*(_DWORD *)(a1 + 120) > 30 )
      {
        *(_DWORD *)(a1 + 116) = 10;
        *(_DWORD *)(a1 + 164) = 0;
      }
      break;
    default:
      break;
  }
  *(_DWORD *)(a1 + 20) += 32;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 76) )
  {
    v3 = &v6 + 4 * *(_DWORD *)(a1 + 104);
    v4 = a1 + 84;
    *(_DWORD *)v4 = *v3;
    *(_DWORD *)(v4 + 4) = v3[1];
    *(_DWORD *)(v4 + 8) = v3[2];
    *(_DWORD *)(v4 + 12) = v3[3];
  }
  else
  {
    v1 = &v26 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    *(_DWORD *)(v2 + 8) = v1[2];
    *(_DWORD *)(v2 + 12) = v1[3];
  }
  result = a1;
  if ( *(_DWORD *)(a1 + 64) <= 996 )
  {
    *(_DWORD *)(a1 + 40) = 316;
    *(_DWORD *)(a1 + 116) = 0;
  }
  return result;
}

//----- (00464090) --------------------------------------------------------
int __cdecl NPC311(int a1)
{
  int *v1; // eax@58
  int v2; // ecx@58
  int result; // eax@58
  int *v4; // eax@59
  int v5; // ecx@59
  int v6; // [sp+4h] [bp-E0h]@1
  int v7; // [sp+8h] [bp-DCh]@1
  int v8; // [sp+Ch] [bp-D8h]@1
  int v9; // [sp+10h] [bp-D4h]@1
  int v10; // [sp+14h] [bp-D0h]@1
  int v11; // [sp+18h] [bp-CCh]@1
  int v12; // [sp+1Ch] [bp-C8h]@1
  int v13; // [sp+20h] [bp-C4h]@1
  int v14; // [sp+24h] [bp-C0h]@1
  int v15; // [sp+28h] [bp-BCh]@1
  int v16; // [sp+2Ch] [bp-B8h]@1
  int v17; // [sp+30h] [bp-B4h]@1
  int v18; // [sp+34h] [bp-B0h]@1
  int v19; // [sp+38h] [bp-ACh]@1
  int v20; // [sp+3Ch] [bp-A8h]@1
  int v21; // [sp+40h] [bp-A4h]@1
  int v22; // [sp+44h] [bp-A0h]@1
  int v23; // [sp+48h] [bp-9Ch]@1
  int v24; // [sp+4Ch] [bp-98h]@1
  int v25; // [sp+50h] [bp-94h]@1
  int v26; // [sp+54h] [bp-90h]@1
  int v27; // [sp+58h] [bp-8Ch]@1
  int v28; // [sp+5Ch] [bp-88h]@1
  int v29; // [sp+60h] [bp-84h]@1
  int v30; // [sp+64h] [bp-80h]@1
  int v31; // [sp+68h] [bp-7Ch]@1
  int v32; // [sp+6Ch] [bp-78h]@1
  int v33; // [sp+70h] [bp-74h]@1
  int v34; // [sp+74h] [bp-70h]@1
  int v35; // [sp+78h] [bp-6Ch]@1
  int v36; // [sp+7Ch] [bp-68h]@1
  int v37; // [sp+80h] [bp-64h]@1
  int v38; // [sp+84h] [bp-60h]@1
  int v39; // [sp+88h] [bp-5Ch]@1
  int v40; // [sp+8Ch] [bp-58h]@1
  int v41; // [sp+90h] [bp-54h]@1
  int v42; // [sp+94h] [bp-50h]@1
  int v43; // [sp+98h] [bp-4Ch]@1
  int v44; // [sp+9Ch] [bp-48h]@1
  int v45; // [sp+A0h] [bp-44h]@1
  int v46; // [sp+A4h] [bp-40h]@1
  int v47; // [sp+A8h] [bp-3Ch]@1
  int v48; // [sp+ACh] [bp-38h]@1
  int v49; // [sp+B0h] [bp-34h]@1
  int v50; // [sp+B4h] [bp-30h]@1
  int v51; // [sp+B8h] [bp-2Ch]@1
  int v52; // [sp+BCh] [bp-28h]@1
  int v53; // [sp+C0h] [bp-24h]@1
  int v54; // [sp+C4h] [bp-20h]@1
  int v55; // [sp+C8h] [bp-1Ch]@1
  int v56; // [sp+CCh] [bp-18h]@1
  int v57; // [sp+D0h] [bp-14h]@1
  int v58; // [sp+D4h] [bp-10h]@1
  int v59; // [sp+D8h] [bp-Ch]@1
  int v60; // [sp+DCh] [bp-8h]@1
  int v61; // [sp+E0h] [bp-4h]@1

  v34 = 0;
  v35 = 32;
  v36 = 24;
  v37 = 56;
  v38 = 24;
  v39 = 32;
  v40 = 48;
  v41 = 56;
  v42 = 48;
  v43 = 32;
  v44 = 72;
  v45 = 56;
  v46 = 72;
  v47 = 32;
  v48 = 96;
  v49 = 56;
  v50 = 96;
  v51 = 32;
  v52 = 120;
  v53 = 56;
  v54 = 120;
  v55 = 32;
  v56 = 144;
  v57 = 56;
  v58 = 144;
  v59 = 32;
  v60 = 168;
  v61 = 56;
  v6 = 0;
  v7 = 56;
  v8 = 24;
  v9 = 80;
  v10 = 24;
  v11 = 56;
  v12 = 48;
  v13 = 80;
  v14 = 48;
  v15 = 56;
  v16 = 72;
  v17 = 80;
  v18 = 72;
  v19 = 56;
  v20 = 96;
  v21 = 80;
  v22 = 96;
  v23 = 56;
  v24 = 120;
  v25 = 80;
  v26 = 120;
  v27 = 56;
  v28 = 144;
  v29 = 80;
  v30 = 144;
  v31 = 56;
  v32 = 168;
  v33 = 80;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( *(_DWORD *)(a1 + 76) )
      {
        if ( Quote_X_Position > *(_DWORD *)(a1 + 8)
          && Quote_X_Position < *(_DWORD *)(a1 + 8) + 163840
          && Quote_Y_Position > *(_DWORD *)(a1 + 12) - 81920
          && Quote_Y_Position < *(_DWORD *)(a1 + 12) + 81920 )
        {
          *(_DWORD *)(a1 + 116) = 10;
        }
      }
      else if ( Quote_X_Position > *(_DWORD *)(a1 + 8) - 163840
             && Quote_X_Position < *(_DWORD *)(a1 + 8)
             && Quote_Y_Position > *(_DWORD *)(a1 + 12) - 81920
             && Quote_Y_Position < *(_DWORD *)(a1 + 12) + 81920 )
      {
        *(_DWORD *)(a1 + 116) = 10;
      }
      break;
    case 0xA:
      *(_DWORD *)(a1 + 116) = 11;
      goto LABEL_17;
    case 0xB:
LABEL_17:
      if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
        *(_DWORD *)(a1 + 76) = 2;
      else
        *(_DWORD *)(a1 + 76) = 0;
      if ( Quote_X_Position <= *(_DWORD *)(a1 + 8) - 114688
        || Quote_X_Position >= *(_DWORD *)(a1 + 8) + 114688
        || Quote_Y_Position <= *(_DWORD *)(a1 + 12) - 4096 )
      {
        *(_DWORD *)(a1 + 104) = 4;
        *(_DWORD *)(a1 + 108) = 1;
      }
      else
      {
        *(_DWORD *)(a1 + 104) = 1;
        *(_DWORD *)(a1 + 108) = 0;
      }
      if ( ++*(_DWORD *)(a1 + 120) > 10 )
        *(_DWORD *)(a1 + 116) = 20;
      break;
    case 0x14:
      *(_DWORD *)(a1 + 116) = 21;
      *(_DWORD *)(a1 + 120) = 0;
      goto LABEL_29;
    case 0x15:
LABEL_29:
      if ( *(_DWORD *)(a1 + 108) )
      {
        if ( ++*(_DWORD *)(a1 + 104) > 5 )
          *(_DWORD *)(a1 + 104) = 4;
      }
      else if ( ++*(_DWORD *)(a1 + 104) > 2 )
      {
        *(_DWORD *)(a1 + 104) = 1;
      }
      if ( ++*(_DWORD *)(a1 + 120) > 30 )
        *(_DWORD *)(a1 + 116) = 30;
      break;
    case 0x1E:
      *(_DWORD *)(a1 + 116) = 31;
      *(_DWORD *)(a1 + 120) = 0;
      if ( *(_DWORD *)(a1 + 108) )
      {
        if ( *(_DWORD *)(a1 + 76) )
          NPC_Create(312, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 1536, -1536, 2, 0, 256);
        else
          NPC_Create(312, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), -1536, -1536, 0, 0, 256);
        *(_DWORD *)(a1 + 104) = 6;
      }
      else
      {
        if ( *(_DWORD *)(a1 + 76) )
          NPC_Create(312, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 1536, 0, 2, 0, 256);
        else
          NPC_Create(312, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), -1536, 0, 0, 0, 256);
        *(_DWORD *)(a1 + 104) = 3;
      }
      goto LABEL_47;
    case 0x1F:
LABEL_47:
      if ( ++*(_DWORD *)(a1 + 120) > 30 )
      {
        *(_DWORD *)(a1 + 116) = 40;
        *(_DWORD *)(a1 + 120) = RNG_Range(0, 100);
      }
      break;
    case 0x28:
      *(_DWORD *)(a1 + 104) = 0;
      if ( ++*(_DWORD *)(a1 + 120) > 150 )
        *(_DWORD *)(a1 + 116) = 10;
      if ( Quote_X_Position < *(_DWORD *)(a1 + 8) - 180224
        || Quote_X_Position > *(_DWORD *)(a1 + 8) + 180224
        || Quote_Y_Position < *(_DWORD *)(a1 + 12) - 122880
        || Quote_Y_Position > *(_DWORD *)(a1 + 12) + 122880 )
      {
        *(_DWORD *)(a1 + 116) = 40;
        *(_DWORD *)(a1 + 120) = 0;
      }
      break;
    default:
      break;
  }
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v6 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    *(_DWORD *)(v5 + 8) = v4[2];
    result = v4[3];
    *(_DWORD *)(v5 + 12) = result;
  }
  else
  {
    v1 = &v34 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    *(_DWORD *)(v2 + 8) = v1[2];
    result = v1[3];
    *(_DWORD *)(v2 + 12) = result;
  }
  if ( *(_DWORD *)(a1 + 64) <= 992 )
  {
    *(_DWORD *)(a1 + 40) = 316;
    result = a1;
    *(_DWORD *)(a1 + 116) = 0;
  }
  return result;
}

//----- (00464740) --------------------------------------------------------
int __cdecl NPC312(int a1)
{
  int result; // eax@28
  int *v2; // eax@33
  int v3; // ecx@33
  int *v4; // eax@34
  int v5; // ecx@34
  int v6; // [sp+4h] [bp-A0h]@1
  int v7; // [sp+8h] [bp-9Ch]@1
  int v8; // [sp+Ch] [bp-98h]@1
  int v9; // [sp+10h] [bp-94h]@1
  int v10; // [sp+14h] [bp-90h]@1
  int v11; // [sp+18h] [bp-8Ch]@1
  int v12; // [sp+1Ch] [bp-88h]@1
  int v13; // [sp+20h] [bp-84h]@1
  int v14; // [sp+24h] [bp-80h]@1
  int v15; // [sp+28h] [bp-7Ch]@1
  int v16; // [sp+2Ch] [bp-78h]@1
  int v17; // [sp+30h] [bp-74h]@1
  int v18; // [sp+34h] [bp-70h]@1
  int v19; // [sp+38h] [bp-6Ch]@1
  int v20; // [sp+3Ch] [bp-68h]@1
  int v21; // [sp+40h] [bp-64h]@1
  int v22; // [sp+44h] [bp-60h]@1
  int v23; // [sp+48h] [bp-5Ch]@1
  int v24; // [sp+4Ch] [bp-58h]@1
  int v25; // [sp+50h] [bp-54h]@1
  int v26; // [sp+54h] [bp-50h]@1
  int v27; // [sp+58h] [bp-4Ch]@1
  int v28; // [sp+5Ch] [bp-48h]@1
  int v29; // [sp+60h] [bp-44h]@1
  int v30; // [sp+64h] [bp-40h]@1
  int v31; // [sp+68h] [bp-3Ch]@1
  int v32; // [sp+6Ch] [bp-38h]@1
  int v33; // [sp+70h] [bp-34h]@1
  int v34; // [sp+74h] [bp-30h]@1
  int v35; // [sp+78h] [bp-2Ch]@1
  int v36; // [sp+7Ch] [bp-28h]@1
  int v37; // [sp+80h] [bp-24h]@1
  int v38; // [sp+84h] [bp-20h]@1
  int v39; // [sp+88h] [bp-1Ch]@1
  int v40; // [sp+8Ch] [bp-18h]@1
  int v41; // [sp+90h] [bp-14h]@1
  int v42; // [sp+94h] [bp-10h]@1
  int v43; // [sp+98h] [bp-Ch]@1
  int v44; // [sp+9Ch] [bp-8h]@1
  int v45; // [sp+A0h] [bp-4h]@1

  v26 = 0;
  v27 = 160;
  v28 = 16;
  v29 = 176;
  v30 = 16;
  v31 = 160;
  v32 = 32;
  v33 = 176;
  v34 = 32;
  v35 = 160;
  v36 = 48;
  v37 = 176;
  v38 = 48;
  v39 = 160;
  v40 = 64;
  v41 = 176;
  v42 = 64;
  v43 = 160;
  v44 = 80;
  v45 = 176;
  v6 = 0;
  v7 = 176;
  v8 = 16;
  v9 = 192;
  v10 = 16;
  v11 = 176;
  v12 = 32;
  v13 = 192;
  v14 = 32;
  v15 = 176;
  v16 = 48;
  v17 = 192;
  v18 = 48;
  v19 = 176;
  v20 = 64;
  v21 = 192;
  v22 = 64;
  v23 = 176;
  v24 = 80;
  v25 = 192;
  if ( *(_DWORD *)(a1 + 116) > 0 && *(_DWORD *)(a1 + 116) < 20 && *(_DWORD *)(a1 + 4) & 0xFF )
    *(_DWORD *)(a1 + 116) = 20;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 120) = 0;
      if ( *(_DWORD *)(a1 + 16) >= 0 )
        *(_DWORD *)(a1 + 76) = 2;
      else
        *(_DWORD *)(a1 + 76) = 0;
      if ( *(_DWORD *)(a1 + 20) >= 0 )
        *(_DWORD *)(a1 + 104) = 2;
      else
        *(_DWORD *)(a1 + 104) = 0;
      goto LABEL_12;
    case 1:
LABEL_12:
      if ( ++*(_DWORD *)(a1 + 120) == 4 )
        *(_WORD *)(a1 + 80) &= 0xFFF7u;
      if ( *(_DWORD *)(a1 + 120) > 10 )
        *(_DWORD *)(a1 + 116) = 10;
      goto LABEL_30;
    case 0xA:
      *(_DWORD *)(a1 + 116) = 11;
      *(_DWORD *)(a1 + 100) = 0;
      *(_DWORD *)(a1 + 16) = 3 * *(_DWORD *)(a1 + 16) / 4;
      *(_DWORD *)(a1 + 20) = 3 * *(_DWORD *)(a1 + 20) / 4;
      goto LABEL_18;
    case 0xB:
LABEL_18:
      *(_DWORD *)(a1 + 20) += 32;
      if ( ++*(_DWORD *)(a1 + 100) > 10 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 4 )
        *(_DWORD *)(a1 + 104) = 4;
      goto LABEL_30;
    case 0x14:
      *(_DWORD *)(a1 + 116) = 21;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 16) = 0;
      *(_DWORD *)(a1 + 20) = 0;
      *(_DWORD *)(a1 + 164) = 0;
      goto LABEL_24;
    case 0x15:
LABEL_24:
      if ( ++*(_DWORD *)(a1 + 120) > 30 )
        *(_DWORD *)(a1 + 116) = 30;
      goto LABEL_30;
    case 0x1E:
      *(_DWORD *)(a1 + 116) = 31;
      *(_DWORD *)(a1 + 120) = 0;
      goto LABEL_28;
    case 0x1F:
LABEL_28:
      ++*(_DWORD *)(a1 + 120);
      result = a1;
      if ( *(_DWORD *)(a1 + 120) <= 30 )
        goto LABEL_30;
      *(_BYTE *)a1 = 0;
      break;
    default:
LABEL_30:
      if ( *(_DWORD *)(a1 + 20) > 1535 )
        *(_DWORD *)(a1 + 20) = 1535;
      *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
      *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
      if ( *(_DWORD *)(a1 + 76) )
      {
        v4 = &v6 + 4 * *(_DWORD *)(a1 + 104);
        v5 = a1 + 84;
        *(_DWORD *)v5 = *v4;
        *(_DWORD *)(v5 + 4) = v4[1];
        *(_DWORD *)(v5 + 8) = v4[2];
        result = v4[3];
        *(_DWORD *)(v5 + 12) = result;
      }
      else
      {
        v2 = &v26 + 4 * *(_DWORD *)(a1 + 104);
        v3 = a1 + 84;
        *(_DWORD *)v3 = *v2;
        *(_DWORD *)(v3 + 4) = v2[1];
        *(_DWORD *)(v3 + 8) = v2[2];
        result = v2[3];
        *(_DWORD *)(v3 + 12) = result;
      }
      if ( *(_DWORD *)(a1 + 116) == 31 )
      {
        result = *(_DWORD *)(a1 + 120) / 2 % 2;
        if ( result )
        {
          result = a1;
          *(_DWORD *)(a1 + 84) = 0;
          *(_DWORD *)(a1 + 92) = 0;
        }
      }
      break;
  }
  return result;
}

//----- (00464BB0) --------------------------------------------------------
int __cdecl NPC313(int a1)
{
  int v1; // eax@75
  int v2; // eax@103
  int *v3; // edx@121
  int result; // eax@121
  int *v5; // edx@122
  signed int v6; // [sp+0h] [bp-1C4h]@1
  int v7; // [sp+4h] [bp-1C0h]@1
  int v8; // [sp+8h] [bp-1BCh]@1
  int v9; // [sp+Ch] [bp-1B8h]@1
  int v10; // [sp+10h] [bp-1B4h]@1
  int v11; // [sp+14h] [bp-1B0h]@1
  int v12; // [sp+18h] [bp-1ACh]@1
  int v13; // [sp+1Ch] [bp-1A8h]@1
  int v14; // [sp+20h] [bp-1A4h]@1
  int v15; // [sp+24h] [bp-1A0h]@1
  int v16; // [sp+28h] [bp-19Ch]@1
  int v17; // [sp+2Ch] [bp-198h]@1
  int v18; // [sp+30h] [bp-194h]@1
  int v19; // [sp+34h] [bp-190h]@1
  int v20; // [sp+38h] [bp-18Ch]@1
  int v21; // [sp+3Ch] [bp-188h]@1
  int v22; // [sp+40h] [bp-184h]@1
  int v23; // [sp+44h] [bp-180h]@1
  int v24; // [sp+48h] [bp-17Ch]@1
  int v25; // [sp+4Ch] [bp-178h]@1
  int v26; // [sp+50h] [bp-174h]@1
  int v27; // [sp+54h] [bp-170h]@1
  int v28; // [sp+58h] [bp-16Ch]@1
  int v29; // [sp+5Ch] [bp-168h]@1
  int v30; // [sp+60h] [bp-164h]@1
  int v31; // [sp+64h] [bp-160h]@1
  int v32; // [sp+68h] [bp-15Ch]@1
  int v33; // [sp+6Ch] [bp-158h]@1
  int v34; // [sp+70h] [bp-154h]@1
  int v35; // [sp+74h] [bp-150h]@1
  int v36; // [sp+78h] [bp-14Ch]@1
  int v37; // [sp+7Ch] [bp-148h]@1
  int v38; // [sp+80h] [bp-144h]@1
  int v39; // [sp+84h] [bp-140h]@1
  int v40; // [sp+88h] [bp-13Ch]@1
  int v41; // [sp+8Ch] [bp-138h]@1
  int v42; // [sp+90h] [bp-134h]@1
  int v43; // [sp+94h] [bp-130h]@1
  int v44; // [sp+98h] [bp-12Ch]@1
  int v45; // [sp+9Ch] [bp-128h]@1
  int v46; // [sp+A0h] [bp-124h]@1
  int v47; // [sp+A4h] [bp-120h]@1
  int v48; // [sp+A8h] [bp-11Ch]@1
  int v49; // [sp+ACh] [bp-118h]@1
  int v50; // [sp+B0h] [bp-114h]@1
  int v51; // [sp+B4h] [bp-110h]@1
  int v52; // [sp+B8h] [bp-10Ch]@1
  int v53; // [sp+BCh] [bp-108h]@1
  int v54; // [sp+C0h] [bp-104h]@1
  int v55; // [sp+C4h] [bp-100h]@1
  int v56; // [sp+C8h] [bp-FCh]@1
  int v57; // [sp+CCh] [bp-F8h]@1
  int v58; // [sp+D0h] [bp-F4h]@1
  int v59; // [sp+D4h] [bp-F0h]@1
  int v60; // [sp+D8h] [bp-ECh]@1
  int v61; // [sp+DCh] [bp-E8h]@1
  int v62; // [sp+E0h] [bp-E4h]@1
  int v63; // [sp+E4h] [bp-E0h]@1
  int v64; // [sp+E8h] [bp-DCh]@1
  int v65; // [sp+ECh] [bp-D8h]@1
  int v66; // [sp+F0h] [bp-D4h]@1
  int v67; // [sp+F4h] [bp-D0h]@1
  int v68; // [sp+F8h] [bp-CCh]@1
  int v69; // [sp+FCh] [bp-C8h]@1
  int v70; // [sp+100h] [bp-C4h]@1
  int v71; // [sp+104h] [bp-C0h]@1
  int v72; // [sp+108h] [bp-BCh]@1
  int v73; // [sp+10Ch] [bp-B8h]@1
  int v74; // [sp+110h] [bp-B4h]@1
  int v75; // [sp+114h] [bp-B0h]@1
  int v76; // [sp+118h] [bp-ACh]@1
  int v77; // [sp+11Ch] [bp-A8h]@1
  int v78; // [sp+120h] [bp-A4h]@1
  int v79; // [sp+124h] [bp-A0h]@1
  int v80; // [sp+128h] [bp-9Ch]@1
  int v81; // [sp+12Ch] [bp-98h]@1
  int v82; // [sp+130h] [bp-94h]@1
  int v83; // [sp+134h] [bp-90h]@1
  int v84; // [sp+138h] [bp-8Ch]@1
  int v85; // [sp+13Ch] [bp-88h]@1
  int v86; // [sp+140h] [bp-84h]@1
  int v87; // [sp+144h] [bp-80h]@1
  int v88; // [sp+148h] [bp-7Ch]@1
  int v89; // [sp+14Ch] [bp-78h]@1
  int v90; // [sp+150h] [bp-74h]@1
  int v91; // [sp+154h] [bp-70h]@1
  int v92; // [sp+158h] [bp-6Ch]@1
  int v93; // [sp+15Ch] [bp-68h]@1
  int v94; // [sp+160h] [bp-64h]@1
  int v95; // [sp+164h] [bp-60h]@1
  int v96; // [sp+168h] [bp-5Ch]@1
  int v97; // [sp+16Ch] [bp-58h]@1
  int v98; // [sp+170h] [bp-54h]@1
  int v99; // [sp+174h] [bp-50h]@1
  int v100; // [sp+178h] [bp-4Ch]@1
  int v101; // [sp+17Ch] [bp-48h]@1
  int v102; // [sp+180h] [bp-44h]@1
  int v103; // [sp+184h] [bp-40h]@1
  int v104; // [sp+188h] [bp-3Ch]@1
  int v105; // [sp+18Ch] [bp-38h]@1
  int v106; // [sp+190h] [bp-34h]@1
  int v107; // [sp+194h] [bp-30h]@1
  int v108; // [sp+198h] [bp-2Ch]@1
  int v109; // [sp+19Ch] [bp-28h]@1
  int v110; // [sp+1A0h] [bp-24h]@1
  int v111; // [sp+1A4h] [bp-20h]@1
  int v112; // [sp+1A8h] [bp-1Ch]@1
  int v113; // [sp+1ACh] [bp-18h]@1
  int v114; // [sp+1B0h] [bp-14h]@1
  int v115; // [sp+1B4h] [bp-10h]@1
  int v116; // [sp+1B8h] [bp-Ch]@1
  int v117; // [sp+1BCh] [bp-8h]@1
  int v118; // [sp+1C0h] [bp-4h]@1

  v63 = 128;
  v64 = 0;
  v65 = 144;
  v66 = 16;
  v67 = 144;
  v68 = 0;
  v69 = 160;
  v70 = 16;
  v71 = 160;
  v72 = 0;
  v73 = 176;
  v74 = 16;
  v75 = 176;
  v76 = 0;
  v77 = 192;
  v78 = 16;
  v79 = 192;
  v80 = 0;
  v81 = 208;
  v82 = 16;
  v83 = 208;
  v84 = 0;
  v85 = 224;
  v86 = 16;
  v87 = 224;
  v88 = 0;
  v89 = 240;
  v90 = 16;
  v91 = 240;
  v92 = 0;
  v93 = 256;
  v94 = 16;
  v95 = 256;
  v96 = 0;
  v97 = 272;
  v98 = 16;
  v99 = 272;
  v100 = 0;
  v101 = 288;
  v102 = 16;
  v103 = 288;
  v104 = 0;
  v105 = 304;
  v106 = 16;
  v107 = 128;
  v108 = 0;
  v109 = 144;
  v110 = 16;
  v111 = 176;
  v112 = 0;
  v113 = 192;
  v114 = 16;
  v115 = 304;
  v116 = 0;
  v117 = 320;
  v118 = 16;
  v7 = 128;
  v8 = 16;
  v9 = 144;
  v10 = 32;
  v11 = 144;
  v12 = 16;
  v13 = 160;
  v14 = 32;
  v15 = 160;
  v16 = 16;
  v17 = 176;
  v18 = 32;
  v19 = 176;
  v20 = 16;
  v21 = 192;
  v22 = 32;
  v23 = 192;
  v24 = 16;
  v25 = 208;
  v26 = 32;
  v27 = 208;
  v28 = 16;
  v29 = 224;
  v30 = 32;
  v31 = 224;
  v32 = 16;
  v33 = 240;
  v34 = 32;
  v35 = 240;
  v36 = 16;
  v37 = 256;
  v38 = 32;
  v39 = 256;
  v40 = 16;
  v41 = 272;
  v42 = 32;
  v43 = 272;
  v44 = 16;
  v45 = 288;
  v46 = 32;
  v47 = 288;
  v48 = 16;
  v49 = 304;
  v50 = 32;
  v51 = 128;
  v52 = 16;
  v53 = 144;
  v54 = 32;
  v55 = 176;
  v56 = 16;
  v57 = 192;
  v58 = 32;
  v59 = 304;
  v60 = 16;
  v61 = 320;
  v62 = 32;
  v6 = *(_DWORD *)(a1 + 116);
  if ( v6 > 220 )
  {
    if ( v6 > 320 )
    {
      switch ( v6 )
      {
        case 330:
          *(_DWORD *)(a1 + 20) = 0;
          *(_DWORD *)(a1 + 116) = 331;
          *(_DWORD *)(a1 + 120) = 0;
          sub_40F310(16);
          Play_Sound_Effect(26, 1);
          goto LABEL_100;
        case 331:
LABEL_100:
          if ( ++*(_DWORD *)(a1 + 104) > 13 )
            *(_DWORD *)(a1 + 104) = 12;
          if ( !(++*(_DWORD *)(a1 + 120) % 6) )
          {
            v2 = RNG_Range(4, 16);
            NPC_Create(315, v2 << 13, 0, 0, 0, 0, 0, 256);
          }
          if ( *(_DWORD *)(a1 + 120) > 30 )
          {
            *(_DWORD *)(a1 + 108) = 0;
            *(_DWORD *)(a1 + 116) = 130;
            *(_WORD *)(a1 + 80) |= 0x20u;
            *(_WORD *)(a1 + 80) &= 0xFFFBu;
            *(_DWORD *)(a1 + 164) = 3;
          }
          break;
        case 500:
          *(_WORD *)(a1 + 80) &= 0xFFDFu;
          *(_DWORD *)(a1 + 116) = 501;
          *(_DWORD *)(a1 + 120) = 0;
          *(_DWORD *)(a1 + 104) = 8;
          *(_DWORD *)(a1 + 32) = *(_DWORD *)(a1 + 8);
          *(_DWORD *)(a1 + 164) = 0;
          sub_4702D0(315, 1);
          goto LABEL_108;
        case 501:
LABEL_108:
          *(_DWORD *)(a1 + 20) += 32;
          if ( ++*(_DWORD *)(a1 + 120) % 2 )
            *(_DWORD *)(a1 + 8) = *(_DWORD *)(a1 + 32);
          else
            *(_DWORD *)(a1 + 8) = *(_DWORD *)(a1 + 32) + 512;
          break;
        default:
          break;
      }
    }
    else if ( v6 == 320 )
    {
      if ( ++*(_DWORD *)(a1 + 104) > 13 )
        *(_DWORD *)(a1 + 104) = 12;
      if ( *(_DWORD *)(a1 + 12) < 0x2000 )
        *(_DWORD *)(a1 + 116) = 330;
    }
    else
    {
      switch ( v6 )
      {
        case 221:
          goto LABEL_72;
        case 300:
          *(_DWORD *)(a1 + 116) = 301;
          *(_DWORD *)(a1 + 104) = 9;
          if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
            *(_DWORD *)(a1 + 76) = 2;
          else
            *(_DWORD *)(a1 + 76) = 0;
          goto LABEL_82;
        case 301:
LABEL_82:
          if ( ++*(_DWORD *)(a1 + 104) > 11 )
            *(_DWORD *)(a1 + 104) = 9;
          if ( *(_DWORD *)(a1 + 76) )
            *(_DWORD *)(a1 + 16) = 1024;
          else
            *(_DWORD *)(a1 + 16) = -1024;
          if ( Quote_X_Position > *(_DWORD *)(a1 + 8) - 2048 && Quote_X_Position < *(_DWORD *)(a1 + 8) + 2048 )
          {
            *(_DWORD *)(a1 + 116) = 310;
            *(_DWORD *)(a1 + 120) = 0;
            *(_DWORD *)(a1 + 104) = 2;
            *(_DWORD *)(a1 + 16) = 0;
          }
          break;
        case 310:
          *(_DWORD *)(a1 + 104) = 2;
          if ( ++*(_DWORD *)(a1 + 120) > 4 )
          {
            *(_DWORD *)(a1 + 116) = 320;
            *(_DWORD *)(a1 + 104) = 12;
            *(_DWORD *)(a1 + 20) = -2048;
            Play_Sound_Effect(25, 1);
            *(_WORD *)(a1 + 80) |= 8u;
            *(_WORD *)(a1 + 80) &= 0xFFDFu;
            *(_WORD *)(a1 + 80) |= 4u;
            *(_DWORD *)(a1 + 164) = 10;
          }
          break;
        default:
          break;
      }
    }
  }
  else if ( v6 == 220 )
  {
    *(_DWORD *)(a1 + 116) = 221;
    *(_DWORD *)(a1 + 120) = 0;
    sub_40F310(16);
    Play_Sound_Effect(26, 1);
    *(_DWORD *)(a1 + 164) = 4;
LABEL_72:
    if ( ++*(_DWORD *)(a1 + 104) > 7 )
      *(_DWORD *)(a1 + 104) = 6;
    if ( !(++*(_DWORD *)(a1 + 120) % 6) )
    {
      v1 = RNG_Range(4, 16);
      NPC_Create(314, v1 << 13, 0x2000, 0, 0, 0, 0, 256);
    }
    if ( *(_DWORD *)(a1 + 120) > 30 )
    {
      *(_DWORD *)(a1 + 108) = 0;
      *(_DWORD *)(a1 + 116) = 130;
      *(_WORD *)(a1 + 80) |= 0x20u;
      *(_WORD *)(a1 + 80) &= 0xFFFBu;
      *(_DWORD *)(a1 + 164) = 3;
    }
  }
  else
  {
    switch ( v6 )
    {
      case 0:
        *(_DWORD *)(a1 + 116) = 1;
        *(_DWORD *)(a1 + 104) = 0;
        *(_DWORD *)(a1 + 100) = 0;
        *(_DWORD *)(a1 + 12) += 2048;
        goto LABEL_9;
      case 1:
LABEL_9:
        *(_DWORD *)(a1 + 20) += 64;
        if ( RNG_Range(0, 120) == 10 )
        {
          *(_DWORD *)(a1 + 116) = 2;
          *(_DWORD *)(a1 + 120) = 0;
          *(_DWORD *)(a1 + 104) = 1;
        }
        if ( *(_DWORD *)(a1 + 8) - 0x4000 < Quote_X_Position && *(_DWORD *)(a1 + 8) + 0x4000 > Quote_X_Position )
        {
          if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
            *(_DWORD *)(a1 + 76) = 2;
          else
            *(_DWORD *)(a1 + 76) = 0;
        }
        break;
      case 2:
        if ( ++*(_DWORD *)(a1 + 120) > 8 )
        {
          *(_DWORD *)(a1 + 116) = 1;
          *(_DWORD *)(a1 + 104) = 0;
        }
        break;
      case 100:
        *(_DWORD *)(a1 + 116) = 110;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 108) = 0;
        *(_WORD *)(a1 + 80) |= 0x20u;
        goto LABEL_21;
      case 110:
LABEL_21:
        *(_DWORD *)(a1 + 164) = 1;
        if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
          *(_DWORD *)(a1 + 76) = 2;
        else
          *(_DWORD *)(a1 + 76) = 0;
        *(_DWORD *)(a1 + 104) = 0;
        if ( ++*(_DWORD *)(a1 + 120) > 4 )
        {
          *(_DWORD *)(a1 + 120) = 0;
          *(_DWORD *)(a1 + 116) = 120;
          if ( ++*(_DWORD *)(a1 + 112) > 12 )
          {
            *(_DWORD *)(a1 + 112) = 0;
            *(_DWORD *)(a1 + 116) = 300;
          }
        }
        break;
      case 120:
        *(_DWORD *)(a1 + 104) = 2;
        if ( ++*(_DWORD *)(a1 + 120) > 4 )
        {
          *(_DWORD *)(a1 + 116) = 130;
          *(_DWORD *)(a1 + 104) = 3;
          *(_DWORD *)(a1 + 16) = 2 * RNG_Range(-512, 512);
          *(_DWORD *)(a1 + 20) = -2048;
          Play_Sound_Effect(30, 1);
          ++*(_DWORD *)(a1 + 108);
        }
        break;
      case 130:
        *(_DWORD *)(a1 + 20) += 128;
        if ( *(_DWORD *)(a1 + 12) > 0x10000 )
          *(_WORD *)(a1 + 80) &= 0xFFF7u;
        if ( *(_DWORD *)(a1 + 16) < 0 && *(_DWORD *)(a1 + 4) & 1 )
          *(_DWORD *)(a1 + 16) = -*(_DWORD *)(a1 + 16);
        if ( *(_DWORD *)(a1 + 16) > 0 && *(_DWORD *)(a1 + 4) & 4 )
          *(_DWORD *)(a1 + 16) = -*(_DWORD *)(a1 + 16);
        if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
          *(_DWORD *)(a1 + 76) = 2;
        else
          *(_DWORD *)(a1 + 76) = 0;
        if ( *(_DWORD *)(a1 + 20) >= -512 )
        {
          if ( *(_DWORD *)(a1 + 20) <= 512 )
            *(_DWORD *)(a1 + 104) = 0;
          else
            *(_DWORD *)(a1 + 104) = 4;
        }
        else
        {
          *(_DWORD *)(a1 + 104) = 3;
        }
        if ( *(_DWORD *)(a1 + 4) & 8 )
        {
          *(_DWORD *)(a1 + 116) = 140;
          *(_DWORD *)(a1 + 120) = 0;
          *(_DWORD *)(a1 + 104) = 2;
          *(_DWORD *)(a1 + 16) = 0;
        }
        if ( *(_DWORD *)(a1 + 108) > 4 && Quote_Y_Position < *(_DWORD *)(a1 + 12) + 2048 )
        {
          *(_DWORD *)(a1 + 116) = 200;
          *(_DWORD *)(a1 + 120) = 0;
          *(_DWORD *)(a1 + 16) = 0;
          *(_DWORD *)(a1 + 20) = 0;
        }
        break;
      case 140:
        *(_DWORD *)(a1 + 104) = 2;
        if ( ++*(_DWORD *)(a1 + 120) > 4 )
          *(_DWORD *)(a1 + 116) = 110;
        break;
      case 200:
        *(_DWORD *)(a1 + 104) = 5;
        if ( ++*(_DWORD *)(a1 + 120) > 10 )
        {
          *(_DWORD *)(a1 + 116) = 210;
          *(_DWORD *)(a1 + 104) = 6;
          if ( *(_DWORD *)(a1 + 76) )
            *(_DWORD *)(a1 + 16) = 1535;
          else
            *(_DWORD *)(a1 + 16) = -1535;
          Play_Sound_Effect(25, 1);
          *(_WORD *)(a1 + 80) &= 0xFFDFu;
          *(_WORD *)(a1 + 80) |= 4u;
          *(_DWORD *)(a1 + 164) = 10;
        }
        break;
      case 210:
        if ( ++*(_DWORD *)(a1 + 104) > 7 )
          *(_DWORD *)(a1 + 104) = 6;
        if ( *(_DWORD *)(a1 + 16) < 0 && *(_DWORD *)(a1 + 4) & 1 )
          *(_DWORD *)(a1 + 116) = 220;
        if ( *(_DWORD *)(a1 + 16) > 0 && *(_DWORD *)(a1 + 4) & 4 )
          *(_DWORD *)(a1 + 116) = 220;
        break;
      default:
        break;
    }
  }
  if ( *(_DWORD *)(a1 + 116) > 100
    && *(_DWORD *)(a1 + 116) < 500
    && *(_DWORD *)(a1 + 116) != 210
    && *(_DWORD *)(a1 + 116) != 320 )
  {
    if ( sub_4095C0() )
    {
      *(_WORD *)(a1 + 80) &= 0xFFDFu;
      *(_WORD *)(a1 + 80) |= 4u;
    }
    else
    {
      *(_WORD *)(a1 + 80) |= 0x20u;
      *(_WORD *)(a1 + 80) &= 0xFFFBu;
    }
  }
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 76) )
  {
    v5 = &v7 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v5;
    *(_DWORD *)(result + 4) = v5[1];
    *(_DWORD *)(result + 8) = v5[2];
    *(_DWORD *)(result + 12) = v5[3];
  }
  else
  {
    v3 = &v63 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v3;
    *(_DWORD *)(result + 4) = v3[1];
    *(_DWORD *)(result + 8) = v3[2];
    *(_DWORD *)(result + 12) = v3[3];
  }
  return result;
}

//----- (00465CC0) --------------------------------------------------------
int __cdecl NPC314(int a1)
{
  int v1; // ST10_4@13
  int v2; // ST0C_4@13
  int v3; // ST08_4@13
  int v4; // eax@13
  int result; // eax@15
  int *v6; // eax@24
  int v7; // ecx@24
  int v8; // [sp+0h] [bp-38h]@1
  signed int i; // [sp+4h] [bp-34h]@11
  int v10; // [sp+8h] [bp-30h]@1
  int v11; // [sp+Ch] [bp-2Ch]@1
  int v12; // [sp+10h] [bp-28h]@1
  int v13; // [sp+14h] [bp-24h]@1
  int v14; // [sp+18h] [bp-20h]@1
  int v15; // [sp+1Ch] [bp-1Ch]@1
  int v16; // [sp+20h] [bp-18h]@1
  int v17; // [sp+24h] [bp-14h]@1
  int v18; // [sp+28h] [bp-10h]@1
  int v19; // [sp+2Ch] [bp-Ch]@1
  int v20; // [sp+30h] [bp-8h]@1
  int v21; // [sp+34h] [bp-4h]@1

  v10 = 64;
  v11 = 64;
  v12 = 80;
  v13 = 80;
  v14 = 80;
  v15 = 64;
  v16 = 96;
  v17 = 80;
  v18 = 96;
  v19 = 64;
  v20 = 112;
  v21 = 80;
  v8 = *(_DWORD *)(a1 + 116);
  if ( !v8 )
  {
    *(_DWORD *)(a1 + 112) = 0;
    *(_DWORD *)(a1 + 116) = 100;
    *(_WORD *)(a1 + 80) |= 4u;
    *(_DWORD *)(a1 + 104) = RNG_Range(0, 2);
    goto LABEL_6;
  }
  if ( v8 == 100 )
  {
LABEL_6:
    *(_DWORD *)(a1 + 20) += 64;
    if ( *(_DWORD *)(a1 + 20) > 1792 )
      *(_DWORD *)(a1 + 20) = 1792;
    if ( *(_DWORD *)(a1 + 12) > 0x10000 )
      *(_WORD *)(a1 + 80) &= 0xFFF7u;
    if ( *(_DWORD *)(a1 + 4) & 8 )
    {
      *(_DWORD *)(a1 + 20) = -512;
      *(_DWORD *)(a1 + 116) = 110;
      *(_WORD *)(a1 + 80) |= 8u;
      Play_Sound_Effect(12, 1);
      sub_40F310(10);
      for ( i = 0; i < 2; ++i )
      {
        v1 = RNG_Range(-1536, 0);
        v2 = RNG_Range(-341, 341);
        v3 = *(_DWORD *)(a1 + 12) + 0x2000;
        v4 = RNG_Range(-12, 12);
        NPC_Create(4, *(_DWORD *)(a1 + 8) + (v4 << 9), v3, v2, v1, 0, 0, 256);
      }
    }
    goto LABEL_17;
  }
  if ( v8 == 110 )
  {
    *(_DWORD *)(a1 + 20) += 64;
    result = a1;
    if ( *(_DWORD *)(a1 + 12) > (*(signed __int16 *)&word_49E588 << 13) + 0x4000 )
    {
      *(_BYTE *)a1 = 0;
      return result;
    }
  }
LABEL_17:
  if ( ++*(_DWORD *)(a1 + 100) > 6 )
  {
    ++*(_DWORD *)(a1 + 100);
    ++*(_DWORD *)(a1 + 104);
  }
  if ( *(_DWORD *)(a1 + 104) > 2 )
    *(_DWORD *)(a1 + 104) = 0;
  if ( Quote_Y_Position <= *(_DWORD *)(a1 + 12) )
    *(_DWORD *)(a1 + 164) = 0;
  else
    *(_DWORD *)(a1 + 164) = 10;
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  v6 = &v10 + 4 * *(_DWORD *)(a1 + 104);
  v7 = a1 + 84;
  *(_DWORD *)v7 = *v6;
  *(_DWORD *)(v7 + 4) = v6[1];
  *(_DWORD *)(v7 + 8) = v6[2];
  result = v6[3];
  *(_DWORD *)(v7 + 12) = result;
  return result;
}

//----- (00465F60) --------------------------------------------------------
int __cdecl NPC315(void *a1)
{
  int result; // eax@39
  int *v2; // ecx@43
  char *v3; // edx@43
  int *v4; // ecx@44
  char *v5; // edx@44
  int v6; // [sp+4h] [bp-80h]@1
  int v7; // [sp+8h] [bp-7Ch]@1
  int v8; // [sp+Ch] [bp-78h]@1
  int v9; // [sp+10h] [bp-74h]@1
  int v10; // [sp+14h] [bp-70h]@1
  int v11; // [sp+18h] [bp-6Ch]@1
  int v12; // [sp+1Ch] [bp-68h]@1
  int v13; // [sp+20h] [bp-64h]@1
  int v14; // [sp+24h] [bp-60h]@1
  int v15; // [sp+28h] [bp-5Ch]@1
  int v16; // [sp+2Ch] [bp-58h]@1
  int v17; // [sp+30h] [bp-54h]@1
  int v18; // [sp+34h] [bp-50h]@1
  int v19; // [sp+38h] [bp-4Ch]@1
  int v20; // [sp+3Ch] [bp-48h]@1
  int v21; // [sp+40h] [bp-44h]@1
  int v22; // [sp+44h] [bp-40h]@1
  int v23; // [sp+48h] [bp-3Ch]@1
  int v24; // [sp+4Ch] [bp-38h]@1
  int v25; // [sp+50h] [bp-34h]@1
  int v26; // [sp+54h] [bp-30h]@1
  int v27; // [sp+58h] [bp-2Ch]@1
  int v28; // [sp+5Ch] [bp-28h]@1
  int v29; // [sp+60h] [bp-24h]@1
  int v30; // [sp+64h] [bp-20h]@1
  int v31; // [sp+68h] [bp-1Ch]@1
  int v32; // [sp+6Ch] [bp-18h]@1
  int v33; // [sp+70h] [bp-14h]@1
  int v34; // [sp+74h] [bp-10h]@1
  int v35; // [sp+78h] [bp-Ch]@1
  int v36; // [sp+7Ch] [bp-8h]@1
  int v37; // [sp+80h] [bp-4h]@1

  v22 = 128;
  v23 = 0;
  v24 = 144;
  v25 = 16;
  v26 = 160;
  v27 = 0;
  v28 = 176;
  v29 = 16;
  v30 = 176;
  v31 = 0;
  v32 = 192;
  v33 = 16;
  v34 = 192;
  v35 = 0;
  v36 = 208;
  v37 = 16;
  v6 = 128;
  v7 = 16;
  v8 = 144;
  v9 = 32;
  v10 = 160;
  v11 = 16;
  v12 = 176;
  v13 = 32;
  v14 = 176;
  v15 = 16;
  v16 = 192;
  v17 = 32;
  v18 = 192;
  v19 = 16;
  v20 = 208;
  v21 = 32;
  switch ( *((_DWORD *)a1 + 29) )
  {
    case 0:
      *((_DWORD *)a1 + 26) = 3;
      *((_DWORD *)a1 + 5) += 128;
      if ( *((_DWORD *)a1 + 3) > 0x10000 )
      {
        *((_DWORD *)a1 + 29) = 130;
        *((_WORD *)a1 + 40) &= 0xFFF7u;
      }
      break;
    case 0x64:
      *((_DWORD *)a1 + 29) = 110;
      *((_DWORD *)a1 + 30) = 0;
      *((_DWORD *)a1 + 27) = 0;
      *((_WORD *)a1 + 40) |= 0x20u;
      goto LABEL_6;
    case 0x6E:
LABEL_6:
      if ( *((_DWORD *)a1 + 2) <= Quote_X_Position )
        *((_DWORD *)a1 + 19) = 2;
      else
        *((_DWORD *)a1 + 19) = 0;
      *((_DWORD *)a1 + 26) = 0;
      if ( ++*((_DWORD *)a1 + 30) > 4 )
      {
        *((_DWORD *)a1 + 30) = 0;
        *((_DWORD *)a1 + 29) = 120;
      }
      break;
    case 0x78:
      *((_DWORD *)a1 + 26) = 1;
      if ( ++*((_DWORD *)a1 + 30) > 4 )
      {
        *((_DWORD *)a1 + 29) = 130;
        *((_DWORD *)a1 + 26) = 3;
        *((_DWORD *)a1 + 4) = 2 * RNG_Range(-512, 512);
        *((_DWORD *)a1 + 5) = -2048;
        Play_Sound_Effect(30, 1);
      }
      break;
    case 0x82:
      *((_DWORD *)a1 + 5) += 128;
      if ( *((_DWORD *)a1 + 4) < 0 && *((_DWORD *)a1 + 1) & 1 )
        *((_DWORD *)a1 + 4) = -*((_DWORD *)a1 + 4);
      if ( *((_DWORD *)a1 + 4) > 0 && *((_DWORD *)a1 + 1) & 4 )
        *((_DWORD *)a1 + 4) = -*((_DWORD *)a1 + 4);
      if ( *((_DWORD *)a1 + 2) <= Quote_X_Position )
        *((_DWORD *)a1 + 19) = 2;
      else
        *((_DWORD *)a1 + 19) = 0;
      if ( *((_DWORD *)a1 + 5) >= -512 )
      {
        if ( *((_DWORD *)a1 + 5) <= 512 )
          *((_DWORD *)a1 + 26) = 3;
        else
          *((_DWORD *)a1 + 26) = 0;
      }
      else
      {
        *((_DWORD *)a1 + 26) = 2;
      }
      if ( *((_DWORD *)a1 + 1) & 8 )
      {
        *((_DWORD *)a1 + 29) = 140;
        *((_DWORD *)a1 + 30) = 0;
        *((_DWORD *)a1 + 26) = 1;
        *((_DWORD *)a1 + 4) = 0;
      }
      break;
    case 0x8C:
      *((_DWORD *)a1 + 26) = 1;
      if ( ++*((_DWORD *)a1 + 30) > 4 )
      {
        *((_DWORD *)a1 + 29) = 110;
        *((_WORD *)a1 + 40) |= 0x20u;
      }
      break;
    default:
      break;
  }
  if ( *((_DWORD *)a1 + 29) > 100 )
  {
    if ( sub_4095C0() )
    {
      *((_WORD *)a1 + 40) &= 0xFFDFu;
      *((_WORD *)a1 + 40) |= 4u;
    }
    else
    {
      *((_WORD *)a1 + 40) |= 0x20u;
      *((_WORD *)a1 + 40) &= 0xFFFBu;
    }
  }
  if ( ++*((_DWORD *)a1 + 28) <= 300 )
  {
    if ( *((_DWORD *)a1 + 5) > 1535 )
      *((_DWORD *)a1 + 5) = 1535;
    *((_DWORD *)a1 + 2) += *((_DWORD *)a1 + 4);
    *((_DWORD *)a1 + 3) += *((_DWORD *)a1 + 5);
    if ( *((_DWORD *)a1 + 19) )
    {
      v4 = &v6 + 4 * *((_DWORD *)a1 + 26);
      v5 = (char *)a1 + 84;
      *(_DWORD *)v5 = *v4;
      *((_DWORD *)v5 + 1) = v4[1];
      result = v4[2];
      *((_DWORD *)v5 + 2) = result;
      *((_DWORD *)v5 + 3) = v4[3];
    }
    else
    {
      v2 = &v22 + 4 * *((_DWORD *)a1 + 26);
      v3 = (char *)a1 + 84;
      *(_DWORD *)v3 = *v2;
      *((_DWORD *)v3 + 1) = v2[1];
      result = v2[2];
      *((_DWORD *)v3 + 2) = result;
      *((_DWORD *)v3 + 3) = v2[3];
    }
  }
  else
  {
    result = sub_46F760(a1);
  }
  return result;
}

//----- (004664B0) --------------------------------------------------------
int __cdecl NPC316(int a1)
{
  int *v1; // eax@21
  int v2; // ecx@21
  int result; // eax@21
  int *v4; // eax@22
  int v5; // ecx@22
  int v6; // [sp+0h] [bp-64h]@1
  int v7; // [sp+4h] [bp-60h]@1
  int v8; // [sp+8h] [bp-5Ch]@1
  int v9; // [sp+Ch] [bp-58h]@1
  int v10; // [sp+10h] [bp-54h]@1
  int v11; // [sp+14h] [bp-50h]@1
  int v12; // [sp+18h] [bp-4Ch]@1
  int v13; // [sp+1Ch] [bp-48h]@1
  int v14; // [sp+20h] [bp-44h]@1
  int v15; // [sp+24h] [bp-40h]@1
  int v16; // [sp+28h] [bp-3Ch]@1
  int v17; // [sp+2Ch] [bp-38h]@1
  int v18; // [sp+30h] [bp-34h]@1
  int v19; // [sp+34h] [bp-30h]@1
  int v20; // [sp+38h] [bp-2Ch]@1
  int v21; // [sp+3Ch] [bp-28h]@1
  int v22; // [sp+40h] [bp-24h]@1
  int v23; // [sp+44h] [bp-20h]@1
  int v24; // [sp+48h] [bp-1Ch]@1
  int v25; // [sp+4Ch] [bp-18h]@1
  int v26; // [sp+50h] [bp-14h]@1
  int v27; // [sp+54h] [bp-10h]@1
  int v28; // [sp+58h] [bp-Ch]@1
  int v29; // [sp+5Ch] [bp-8h]@1
  int v30; // [sp+60h] [bp-4h]@1

  v19 = 248;
  v20 = 32;
  v21 = 272;
  v22 = 56;
  v23 = 272;
  v24 = 32;
  v25 = 296;
  v26 = 56;
  v27 = 296;
  v28 = 32;
  v29 = 320;
  v30 = 56;
  v7 = 248;
  v8 = 56;
  v9 = 272;
  v10 = 80;
  v11 = 272;
  v12 = 56;
  v13 = 296;
  v14 = 80;
  v15 = 296;
  v16 = 56;
  v17 = 320;
  v18 = 80;
  v6 = *(_DWORD *)(a1 + 116);
  if ( v6 )
  {
    if ( v6 == 1 )
    {
      if ( *(_DWORD *)(a1 + 4) & 8 )
      {
        *(_DWORD *)(a1 + 104) = 1;
        *(_DWORD *)(a1 + 100) = 0;
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 120) = 0;
      }
    }
    else if ( v6 == 2 )
    {
      *(_DWORD *)(a1 + 16) = 8 * *(_DWORD *)(a1 + 16) / 9;
      if ( ++*(_DWORD *)(a1 + 100) > 3 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 2 )
        *(_DWORD *)(a1 + 104) = 1;
      if ( ++*(_DWORD *)(a1 + 120) > 50 )
        *(_BYTE *)a1 |= 8u;
    }
  }
  else
  {
    *(_WORD *)(a1 + 80) &= 0xFFDFu;
    *(_WORD *)(a1 + 80) &= 0xFFF7u;
    *(_DWORD *)(a1 + 164) = 0;
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 104) = 0;
    *(_DWORD *)(a1 + 140) = 6144;
    *(_DWORD *)(a1 + 148) = 6144;
    *(_DWORD *)(a1 + 144) = 6144;
    *(_DWORD *)(a1 + 20) = -512;
    if ( *(_DWORD *)(a1 + 76) )
      *(_DWORD *)(a1 + 16) = -256;
    else
      *(_DWORD *)(a1 + 16) = 256;
    Play_Sound_Effect(50, 1);
  }
  *(_DWORD *)(a1 + 20) += 32;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v7 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    *(_DWORD *)(v5 + 8) = v4[2];
    result = v4[3];
    *(_DWORD *)(v5 + 12) = result;
  }
  else
  {
    v1 = &v19 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    *(_DWORD *)(v2 + 8) = v1[2];
    result = v1[3];
    *(_DWORD *)(v2 + 12) = result;
  }
  return result;
}

//----- (00466790) --------------------------------------------------------
int __cdecl NPC317(int a1)
{
  int *v1; // eax@27
  int v2; // ecx@27
  int result; // eax@27
  int *v4; // eax@28
  int v5; // ecx@28
  int v6; // [sp+4h] [bp-80h]@1
  int v7; // [sp+8h] [bp-7Ch]@1
  int v8; // [sp+Ch] [bp-78h]@1
  int v9; // [sp+10h] [bp-74h]@1
  int v10; // [sp+14h] [bp-70h]@1
  int v11; // [sp+18h] [bp-6Ch]@1
  int v12; // [sp+1Ch] [bp-68h]@1
  int v13; // [sp+20h] [bp-64h]@1
  int v14; // [sp+24h] [bp-60h]@1
  int v15; // [sp+28h] [bp-5Ch]@1
  int v16; // [sp+2Ch] [bp-58h]@1
  int v17; // [sp+30h] [bp-54h]@1
  int v18; // [sp+34h] [bp-50h]@1
  int v19; // [sp+38h] [bp-4Ch]@1
  int v20; // [sp+3Ch] [bp-48h]@1
  int v21; // [sp+40h] [bp-44h]@1
  int v22; // [sp+44h] [bp-40h]@1
  int v23; // [sp+48h] [bp-3Ch]@1
  int v24; // [sp+4Ch] [bp-38h]@1
  int v25; // [sp+50h] [bp-34h]@1
  int v26; // [sp+54h] [bp-30h]@1
  int v27; // [sp+58h] [bp-2Ch]@1
  int v28; // [sp+5Ch] [bp-28h]@1
  int v29; // [sp+60h] [bp-24h]@1
  int v30; // [sp+64h] [bp-20h]@1
  int v31; // [sp+68h] [bp-1Ch]@1
  int v32; // [sp+6Ch] [bp-18h]@1
  int v33; // [sp+70h] [bp-14h]@1
  int v34; // [sp+74h] [bp-10h]@1
  int v35; // [sp+78h] [bp-Ch]@1
  int v36; // [sp+7Ch] [bp-8h]@1
  int v37; // [sp+80h] [bp-4h]@1

  v22 = 0;
  v23 = 80;
  v24 = 32;
  v25 = 120;
  v26 = 32;
  v27 = 80;
  v28 = 64;
  v29 = 120;
  v30 = 64;
  v31 = 80;
  v32 = 96;
  v33 = 120;
  v34 = 96;
  v35 = 80;
  v36 = 128;
  v37 = 120;
  v6 = 0;
  v7 = 120;
  v8 = 32;
  v9 = 160;
  v10 = 32;
  v11 = 120;
  v12 = 64;
  v13 = 160;
  v14 = 64;
  v15 = 120;
  v16 = 96;
  v17 = 160;
  v18 = 96;
  v19 = 120;
  v20 = 128;
  v21 = 160;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 12) -= 4096;
      *(_DWORD *)(a1 + 32) = *(_DWORD *)(a1 + 8);
      goto LABEL_3;
    case 1:
LABEL_3:
      *(_DWORD *)(a1 + 16) = 0;
      *(_DWORD *)(a1 + 116) = 2;
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 108) = 0;
      goto LABEL_4;
    case 2:
LABEL_4:
      if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
        *(_DWORD *)(a1 + 76) = 2;
      else
        *(_DWORD *)(a1 + 76) = 0;
      if ( ++*(_DWORD *)(a1 + 100) > 40 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 1 )
        *(_DWORD *)(a1 + 104) = 0;
      if ( Quote_X_Position > *(_DWORD *)(a1 + 8) - 163840
        && Quote_X_Position < *(_DWORD *)(a1 + 8) + 163840
        && Quote_Y_Position > *(_DWORD *)(a1 + 12) - 81920
        && Quote_Y_Position < *(_DWORD *)(a1 + 12) + 81920
        && ++*(_DWORD *)(a1 + 108) > 50 )
      {
        *(_DWORD *)(a1 + 116) = 10;
      }
      break;
    case 0xA:
      *(_DWORD *)(a1 + 116) = 11;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 104) = 2;
      NPC_Create(319, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 0, 0, 0, a1, 256);
      goto LABEL_19;
    case 0xB:
LABEL_19:
      if ( ++*(_DWORD *)(a1 + 120) > 50 )
      {
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 116) = 12;
        *(_DWORD *)(a1 + 104) = 3;
        Play_Sound_Effect(39, 1);
      }
      break;
    case 0xC:
      if ( ++*(_DWORD *)(a1 + 120) > 20 )
        *(_DWORD *)(a1 + 116) = 1;
      break;
    default:
      break;
  }
  *(_DWORD *)(a1 + 20) += 85;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v6 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    *(_DWORD *)(v5 + 8) = v4[2];
    result = v4[3];
    *(_DWORD *)(v5 + 12) = result;
  }
  else
  {
    v1 = &v22 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    *(_DWORD *)(v2 + 8) = v1[2];
    result = v1[3];
    *(_DWORD *)(v2 + 12) = result;
  }
  if ( *(_DWORD *)(a1 + 64) <= 936 )
  {
    *(_DWORD *)(a1 + 40) = 318;
    result = a1;
    *(_DWORD *)(a1 + 116) = 0;
  }
  return result;
}

//----- (00466B80) --------------------------------------------------------
int __cdecl NPC318(int a1)
{
  int *v1; // eax@21
  int v2; // ecx@21
  int result; // eax@21
  int *v4; // eax@22
  int v5; // ecx@22
  int v6; // [sp+0h] [bp-64h]@1
  int v7; // [sp+4h] [bp-60h]@1
  int v8; // [sp+8h] [bp-5Ch]@1
  int v9; // [sp+Ch] [bp-58h]@1
  int v10; // [sp+10h] [bp-54h]@1
  int v11; // [sp+14h] [bp-50h]@1
  int v12; // [sp+18h] [bp-4Ch]@1
  int v13; // [sp+1Ch] [bp-48h]@1
  int v14; // [sp+20h] [bp-44h]@1
  int v15; // [sp+24h] [bp-40h]@1
  int v16; // [sp+28h] [bp-3Ch]@1
  int v17; // [sp+2Ch] [bp-38h]@1
  int v18; // [sp+30h] [bp-34h]@1
  int v19; // [sp+34h] [bp-30h]@1
  int v20; // [sp+38h] [bp-2Ch]@1
  int v21; // [sp+3Ch] [bp-28h]@1
  int v22; // [sp+40h] [bp-24h]@1
  int v23; // [sp+44h] [bp-20h]@1
  int v24; // [sp+48h] [bp-1Ch]@1
  int v25; // [sp+4Ch] [bp-18h]@1
  int v26; // [sp+50h] [bp-14h]@1
  int v27; // [sp+54h] [bp-10h]@1
  int v28; // [sp+58h] [bp-Ch]@1
  int v29; // [sp+5Ch] [bp-8h]@1
  int v30; // [sp+60h] [bp-4h]@1

  v19 = 224;
  v20 = 80;
  v21 = 256;
  v22 = 120;
  v23 = 256;
  v24 = 80;
  v25 = 288;
  v26 = 120;
  v27 = 288;
  v28 = 80;
  v29 = 320;
  v30 = 120;
  v7 = 224;
  v8 = 120;
  v9 = 256;
  v10 = 160;
  v11 = 256;
  v12 = 120;
  v13 = 288;
  v14 = 160;
  v15 = 288;
  v16 = 120;
  v17 = 320;
  v18 = 160;
  v6 = *(_DWORD *)(a1 + 116);
  if ( v6 )
  {
    if ( v6 == 1 )
    {
      if ( *(_DWORD *)(a1 + 4) & 8 )
      {
        *(_DWORD *)(a1 + 104) = 1;
        *(_DWORD *)(a1 + 100) = 0;
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 120) = 0;
      }
    }
    else if ( v6 == 2 )
    {
      *(_DWORD *)(a1 + 16) = 8 * *(_DWORD *)(a1 + 16) / 9;
      if ( ++*(_DWORD *)(a1 + 100) > 3 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 2 )
        *(_DWORD *)(a1 + 104) = 1;
      if ( ++*(_DWORD *)(a1 + 120) > 50 )
        *(_BYTE *)a1 |= 8u;
    }
  }
  else
  {
    *(_WORD *)(a1 + 80) &= 0xFFDFu;
    *(_WORD *)(a1 + 80) &= 0xFFF7u;
    *(_WORD *)(a1 + 80) &= 0xFFFEu;
    *(_DWORD *)(a1 + 164) = 0;
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 104) = 0;
    *(_DWORD *)(a1 + 20) = -512;
    if ( *(_DWORD *)(a1 + 76) )
      *(_DWORD *)(a1 + 16) = -64;
    else
      *(_DWORD *)(a1 + 16) = 64;
    Play_Sound_Effect(54, 1);
  }
  *(_DWORD *)(a1 + 20) += 32;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v7 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    *(_DWORD *)(v5 + 8) = v4[2];
    result = v4[3];
    *(_DWORD *)(v5 + 12) = result;
  }
  else
  {
    v1 = &v19 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    *(_DWORD *)(v2 + 8) = v1[2];
    result = v1[3];
    *(_DWORD *)(v2 + 12) = result;
  }
  return result;
}

//----- (00466E50) --------------------------------------------------------
int __cdecl NPC319(int a1)
{
  int result; // eax@8
  int *v2; // ecx@22
  int v3; // edx@22
  int v4; // [sp+0h] [bp-34h]@1
  int v5; // [sp+4h] [bp-30h]@1
  int v6; // [sp+8h] [bp-2Ch]@1
  int v7; // [sp+Ch] [bp-28h]@1
  int v8; // [sp+10h] [bp-24h]@1
  int v9; // [sp+14h] [bp-20h]@1
  int v10; // [sp+18h] [bp-1Ch]@1
  int v11; // [sp+1Ch] [bp-18h]@1
  int v12; // [sp+20h] [bp-14h]@1
  int v13; // [sp+24h] [bp-10h]@1
  int v14; // [sp+28h] [bp-Ch]@1
  int v15; // [sp+2Ch] [bp-8h]@1
  int v16; // [sp+30h] [bp-4h]@1

  v5 = 16;
  v6 = 0;
  v7 = 32;
  v8 = 16;
  v9 = 16;
  v10 = 0;
  v11 = 32;
  v12 = 16;
  v13 = 96;
  v14 = 80;
  v15 = 112;
  v16 = 96;
  v4 = *(_DWORD *)(a1 + 116);
  if ( v4 )
  {
    if ( v4 == 2 )
    {
      if ( ++*(_DWORD *)(a1 + 120) == 4 )
        *(_WORD *)(a1 + 80) &= 0xFFF7u;
      *(_DWORD *)(a1 + 20) += 42;
      if ( *(_DWORD *)(a1 + 20) > 1535 )
        *(_DWORD *)(a1 + 20) = 1535;
      *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
      *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
      if ( *(_DWORD *)(a1 + 4) & 8 )
      {
        Play_Sound_Effect(12, 1);
        sub_46F150(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 0, 3);
        *(_BYTE *)a1 = 0;
      }
    }
  }
  else
  {
    *(_DWORD *)(a1 + 12) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 12) + 5120;
    if ( *(_DWORD *)(*(_DWORD *)(a1 + 168) + 76) )
      *(_DWORD *)(a1 + 8) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 8) - 3584;
    else
      *(_DWORD *)(a1 + 8) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 8) + 3584;
    if ( *(_DWORD *)(*(_DWORD *)(a1 + 168) + 40) == 318 )
    {
      result = sub_46F150(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 0, 3);
      *(_BYTE *)a1 = 0;
      return result;
    }
    if ( *(_DWORD *)(*(_DWORD *)(a1 + 168) + 104) != 2 )
    {
      *(_DWORD *)(a1 + 116) = 2;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 20) = -1024;
      *(_DWORD *)(a1 + 12) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 12) - 2048;
      if ( *(_DWORD *)(*(_DWORD *)(a1 + 168) + 76) )
        *(_DWORD *)(a1 + 16) = 1024;
      else
        *(_DWORD *)(a1 + 16) = -1024;
    }
  }
  if ( ++*(_DWORD *)(a1 + 104) > 2 )
    *(_DWORD *)(a1 + 104) = 0;
  v2 = &v5 + 4 * *(_DWORD *)(a1 + 104);
  v3 = a1 + 84;
  *(_DWORD *)v3 = *v2;
  *(_DWORD *)(v3 + 4) = v2[1];
  result = v2[2];
  *(_DWORD *)(v3 + 8) = result;
  *(_DWORD *)(v3 + 12) = v2[3];
  return result;
}

//----- (004670C0) --------------------------------------------------------
int __cdecl NPC320(int a1)
{
  __int64 v1; // rax@17
  __int64 v2; // rax@17
  int *v3; // edx@20
  int result; // eax@20
  int *v5; // edx@21
  int v6; // [sp+0h] [bp-60h]@1
  int v7; // [sp+4h] [bp-5Ch]@1
  int v8; // [sp+8h] [bp-58h]@1
  int v9; // [sp+Ch] [bp-54h]@1
  int v10; // [sp+10h] [bp-50h]@1
  int v11; // [sp+14h] [bp-4Ch]@1
  int v12; // [sp+18h] [bp-48h]@1
  int v13; // [sp+1Ch] [bp-44h]@1
  int v14; // [sp+20h] [bp-40h]@1
  int v15; // [sp+24h] [bp-3Ch]@1
  int v16; // [sp+28h] [bp-38h]@1
  int v17; // [sp+2Ch] [bp-34h]@1
  int v18; // [sp+30h] [bp-30h]@1
  int v19; // [sp+34h] [bp-2Ch]@1
  int v20; // [sp+38h] [bp-28h]@1
  int v21; // [sp+3Ch] [bp-24h]@1
  int v22; // [sp+40h] [bp-20h]@1
  int v23; // [sp+44h] [bp-1Ch]@1
  int v24; // [sp+48h] [bp-18h]@1
  int v25; // [sp+4Ch] [bp-14h]@1
  int v26; // [sp+50h] [bp-10h]@1
  int v27; // [sp+54h] [bp-Ch]@1
  int v28; // [sp+58h] [bp-8h]@1
  int v29; // [sp+5Ch] [bp-4h]@1

  v18 = 16;
  v19 = 96;
  v20 = 32;
  v21 = 112;
  v22 = 48;
  v23 = 96;
  v24 = 64;
  v25 = 112;
  v26 = 96;
  v27 = 96;
  v28 = 112;
  v29 = 112;
  v6 = 16;
  v7 = 112;
  v8 = 32;
  v9 = 128;
  v10 = 48;
  v11 = 112;
  v12 = 64;
  v13 = 128;
  v14 = 96;
  v15 = 112;
  v16 = 112;
  v17 = 128;
  if ( !*(_DWORD *)(a1 + 116) )
  {
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 8) = Quote_X_Position;
    *(_DWORD *)(a1 + 12) = Quote_Y_Position;
    NPC_Create(321, 0, 0, 0, 0, 0, a1, 256);
  }
  if ( Tile_On_Which_Quote_Is & 8 )
  {
    if ( Quote_IsFacingUp )
    {
      *(_DWORD *)(a1 + 32) = Quote_X_Position;
      *(_DWORD *)(a1 + 36) = Quote_Y_Position - 5120;
      *(_DWORD *)(a1 + 104) = 1;
    }
    else
    {
      *(_DWORD *)(a1 + 104) = 0;
      if ( *(_DWORD *)&Quote_Direction_Faced )
      {
        *(_DWORD *)(a1 + 32) = Quote_X_Position - 3584;
        *(_DWORD *)(a1 + 36) = Quote_Y_Position - 1536;
      }
      else
      {
        *(_DWORD *)(a1 + 32) = Quote_X_Position + 3584;
        *(_DWORD *)(a1 + 36) = Quote_Y_Position - 1536;
      }
    }
  }
  else if ( Quote_IsFacingUp )
  {
    *(_DWORD *)(a1 + 32) = Quote_X_Position;
    *(_DWORD *)(a1 + 36) = Quote_Y_Position + 4096;
    *(_DWORD *)(a1 + 104) = 2;
  }
  else if ( Quote_IsFacingDown )
  {
    *(_DWORD *)(a1 + 32) = Quote_X_Position;
    *(_DWORD *)(a1 + 36) = Quote_Y_Position - 4096;
    *(_DWORD *)(a1 + 104) = 1;
  }
  else
  {
    *(_DWORD *)(a1 + 104) = 0;
    if ( *(_DWORD *)&Quote_Direction_Faced )
    {
      *(_DWORD *)(a1 + 32) = Quote_X_Position - 3584;
      *(_DWORD *)(a1 + 36) = Quote_Y_Position - 1536;
    }
    else
    {
      *(_DWORD *)(a1 + 32) = Quote_X_Position + 3584;
      *(_DWORD *)(a1 + 36) = Quote_Y_Position - 1536;
    }
  }
  v1 = *(_DWORD *)(a1 + 32) - *(_DWORD *)(a1 + 8);
  *(_DWORD *)(a1 + 8) += ((signed int)v1 - HIDWORD(v1)) >> 1;
  v2 = *(_DWORD *)(a1 + 36) - *(_DWORD *)(a1 + 12);
  *(_DWORD *)(a1 + 12) += ((signed int)v2 - HIDWORD(v2)) >> 1;
  if ( Quote_Animation_Frame % 2 )
    *(_DWORD *)(a1 + 12) -= 512;
  if ( *(_DWORD *)&Quote_Direction_Faced )
  {
    v5 = &v18 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v5;
    *(_DWORD *)(result + 4) = v5[1];
    *(_DWORD *)(result + 8) = v5[2];
    *(_DWORD *)(result + 12) = v5[3];
  }
  else
  {
    v3 = &v6 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v3;
    *(_DWORD *)(result + 4) = v3[1];
    *(_DWORD *)(result + 8) = v3[2];
    *(_DWORD *)(result + 12) = v3[3];
  }
  return result;
}
// 49E63C: using guessed type int Tile_On_Which_Quote_Is;
// 49E644: using guessed type int Quote_IsFacingUp;
// 49E648: using guessed type int Quote_IsFacingDown;
// 49E678: using guessed type int Quote_Animation_Frame;

//----- (004673F0) --------------------------------------------------------
int __cdecl NPC321(int a1)
{
  int result; // eax@1
  int *v2; // ecx@17
  int v3; // edx@17
  int *v4; // ecx@18
  int v5; // edx@18
  int v6; // [sp+0h] [bp-68h]@2
  char Direction; // [sp+4h] [bp-64h]@0
  int v8; // [sp+8h] [bp-60h]@1
  int v9; // [sp+Ch] [bp-5Ch]@1
  int v10; // [sp+10h] [bp-58h]@1
  int v11; // [sp+14h] [bp-54h]@1
  int v12; // [sp+18h] [bp-50h]@1
  int v13; // [sp+1Ch] [bp-4Ch]@1
  int v14; // [sp+20h] [bp-48h]@1
  int v15; // [sp+24h] [bp-44h]@1
  int v16; // [sp+28h] [bp-40h]@1
  int v17; // [sp+2Ch] [bp-3Ch]@1
  int v18; // [sp+30h] [bp-38h]@1
  int v19; // [sp+34h] [bp-34h]@1
  int v20; // [sp+38h] [bp-30h]@1
  int v21; // [sp+3Ch] [bp-2Ch]@1
  int v22; // [sp+40h] [bp-28h]@1
  int v23; // [sp+44h] [bp-24h]@1
  int v24; // [sp+48h] [bp-20h]@1
  int v25; // [sp+4Ch] [bp-1Ch]@1
  int v26; // [sp+50h] [bp-18h]@1
  int v27; // [sp+54h] [bp-14h]@1
  int v28; // [sp+58h] [bp-10h]@1
  int v29; // [sp+5Ch] [bp-Ch]@1
  int v30; // [sp+60h] [bp-8h]@1
  int v31; // [sp+64h] [bp-4h]@1

  v20 = 136;
  v21 = 152;
  v22 = 152;
  v23 = 168;
  v24 = 152;
  v25 = 152;
  v26 = 168;
  v27 = 168;
  v28 = 168;
  v29 = 152;
  v30 = 184;
  v31 = 168;
  v8 = 136;
  v9 = 168;
  v10 = 152;
  v11 = 184;
  v12 = 152;
  v13 = 168;
  v14 = 168;
  v15 = 184;
  v16 = 168;
  v17 = 168;
  v18 = 184;
  v19 = 184;
  result = a1;
  if ( *(_DWORD *)(a1 + 168) )
  {
    v6 = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 104);
    if ( v6 )
    {
      if ( v6 == 1 )
      {
        *(_DWORD *)(a1 + 8) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 8);
        Direction = 1;
        *(_DWORD *)(a1 + 12) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 12) - 5120;
      }
      else if ( v6 == 2 )
      {
        *(_DWORD *)(a1 + 8) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 8);
        Direction = 3;
        *(_DWORD *)(a1 + 12) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 12) + 5120;
      }
    }
    else
    {
      if ( *(_DWORD *)&Quote_Direction_Faced )
      {
        *(_DWORD *)(a1 + 8) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 8) - 4096;
        Direction = 0;
      }
      else
      {
        *(_DWORD *)(a1 + 8) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 8) + 4096;
        Direction = 2;
      }
      *(_DWORD *)(a1 + 12) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 12);
    }
    *(_DWORD *)(a1 + 104) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 104);
    if ( Game_State & 2 && Count_All_Slots_Using_Shot(43) < 2 && Key_For_Shoot_Duplicate & Key_Pressed )
    {
      Create_Bullet(43, *(_DWORD *)(*(_DWORD *)(a1 + 168) + 8), *(_DWORD *)(*(_DWORD *)(a1 + 168) + 12), Direction);
      Create_Animated_Effect(*(_DWORD *)(*(_DWORD *)(a1 + 168) + 8), *(_DWORD *)(*(_DWORD *)(a1 + 168) + 12), 3, 0);
      Play_Sound_Effect(117, 1);
    }
    if ( *(_DWORD *)&Quote_Direction_Faced )
    {
      v4 = &v20 + 4 * *(_DWORD *)(a1 + 104);
      v5 = a1 + 84;
      *(_DWORD *)v5 = *v4;
      *(_DWORD *)(v5 + 4) = v4[1];
      result = v4[2];
      *(_DWORD *)(v5 + 8) = result;
      *(_DWORD *)(v5 + 12) = v4[3];
    }
    else
    {
      v2 = &v8 + 4 * *(_DWORD *)(a1 + 104);
      v3 = a1 + 84;
      *(_DWORD *)v3 = *v2;
      *(_DWORD *)(v3 + 4) = v2[1];
      result = v2[2];
      *(_DWORD *)(v3 + 8) = result;
      *(_DWORD *)(v3 + 12) = v2[3];
    }
  }
  return result;
}
// 493614: using guessed type int Key_For_Shoot_Duplicate;
// 49E1E8: using guessed type int Game_State;
// 49E214: using guessed type int Key_Pressed;

//----- (004676D0) --------------------------------------------------------
int __cdecl NPC322(int a1)
{
  int result; // eax@1
  int *v2; // eax@14
  int v3; // ecx@14
  __int64 v4; // rax@22
  __int64 v5; // rax@22
  __int64 v6; // rax@23
  __int64 v7; // rax@23
  int v8; // edx@25
  int v9; // [sp+4h] [bp-34h]@4
  int v10; // [sp+8h] [bp-30h]@1
  int v11; // [sp+Ch] [bp-2Ch]@1
  int v12; // [sp+10h] [bp-28h]@1
  int v13; // [sp+14h] [bp-24h]@1
  int v14; // [sp+18h] [bp-20h]@1
  int v15; // [sp+1Ch] [bp-1Ch]@1
  int v16; // [sp+20h] [bp-18h]@1
  int v17; // [sp+24h] [bp-14h]@1
  int v18; // [sp+28h] [bp-10h]@1
  int v19; // [sp+2Ch] [bp-Ch]@1
  int v20; // [sp+30h] [bp-8h]@1
  int v21; // [sp+34h] [bp-4h]@1

  v10 = 272;
  v11 = 216;
  v12 = 296;
  v13 = 240;
  v14 = 296;
  v15 = 216;
  v16 = 320;
  v17 = 240;
  v18 = 160;
  v19 = 216;
  v20 = 184;
  v21 = 240;
  result = a1;
  if ( *(_DWORD *)(a1 + 116) < 2 && *(_DWORD *)(a1 + 64) <= 968 )
  {
    *(_DWORD *)(a1 + 116) = 2;
    *(_DWORD *)(a1 + 120) = 0;
    *(_WORD *)(a1 + 80) &= 0xFFDFu;
    *(_WORD *)(a1 + 80) |= 4u;
    result = Play_Sound_Effect(22, 1);
  }
  v9 = *(_DWORD *)(a1 + 116);
  if ( !v9 )
  {
    *(_DWORD *)(a1 + 116) = 1;
    if ( *(_DWORD *)(a1 + 76) )
      *(_DWORD *)(a1 + 8) += 4096;
    else
      *(_DWORD *)(a1 + 12) += 4096;
LABEL_11:
    if ( *(_BYTE *)(a1 + 156) )
      ++*(_DWORD *)(a1 + 108);
    else
      *(_DWORD *)(a1 + 108) = 0;
    v2 = &v10 + 4 * (*(_DWORD *)(a1 + 108) / 2 % 2);
    v3 = a1 + 84;
    *(_DWORD *)v3 = *v2;
    *(_DWORD *)(v3 + 4) = v2[1];
    *(_DWORD *)(v3 + 8) = v2[2];
    result = v2[3];
    *(_DWORD *)(v3 + 12) = result;
    return result;
  }
  if ( v9 == 1 )
    goto LABEL_11;
  if ( v9 == 2 )
  {
    *(_DWORD *)(a1 + 104) = 2;
    switch ( *(_DWORD *)(a1 + 120) )
    {
      case 0:
        NPC_Create(207, *(_DWORD *)(a1 + 8) + 2048, *(_DWORD *)(a1 + 12), 0, 0, 0, 0, 384);
        break;
      case 0x32:
        NPC_Create(207, *(_DWORD *)(a1 + 8) + 2048, *(_DWORD *)(a1 + 12), 0, 0, 1, 0, 384);
        break;
      case 0x64:
        NPC_Create(207, *(_DWORD *)(a1 + 8) + 2048, *(_DWORD *)(a1 + 12), 0, 0, 2, 0, 384);
        break;
      case 0x96:
        NPC_Create(207, *(_DWORD *)(a1 + 8) + 2048, *(_DWORD *)(a1 + 12), 0, 0, 3, 0, 384);
        break;
      case 0xC8:
        NPC_Create(207, *(_DWORD *)(a1 + 8) + 2048, *(_DWORD *)(a1 + 12), 0, 0, 4, 0, 384);
        break;
      case 0xFA:
        *(_DWORD *)(a1 + 132) = 24576;
        *(_DWORD *)(a1 + 124) = 24576;
        *(_DWORD *)(a1 + 128) = 24576;
        *(_DWORD *)(a1 + 136) = 24576;
        *(_DWORD *)(a1 + 164) = 12;
        Play_Sound_Effect(26, 1);
        sub_46F150(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 24576, 40);
        sub_40F310(10);
        if ( *(_DWORD *)(a1 + 76) )
        {
          v6 = (*(_DWORD *)(a1 + 8) - 4096) / 512;
          sub_413A00(((BYTE4(v6) & 0xF) + (signed int)v6) >> 4, *(_DWORD *)(a1 + 12) / 512 / 16);
          v7 = (*(_DWORD *)(a1 + 8) + 4096) / 512;
          sub_413A00(((BYTE4(v7) & 0xF) + (signed int)v7) >> 4, *(_DWORD *)(a1 + 12) / 512 / 16);
        }
        else
        {
          v4 = (*(_DWORD *)(a1 + 12) - 4096) / 512;
          sub_413A00(*(_DWORD *)(a1 + 8) / 512 / 16, ((BYTE4(v4) & 0xF) + (signed int)v4) >> 4);
          v5 = (*(_DWORD *)(a1 + 12) + 4096) / 512;
          sub_413A00(*(_DWORD *)(a1 + 8) / 512 / 16, ((BYTE4(v5) & 0xF) + (signed int)v5) >> 4);
        }
        *(_BYTE *)a1 |= 8u;
        break;
      default:
        break;
    }
    ++*(_DWORD *)(a1 + 120);
    v8 = a1 + 84;
    *(_DWORD *)v8 = v18;
    *(_DWORD *)(v8 + 4) = v19;
    result = v20;
    *(_DWORD *)(v8 + 8) = v20;
    *(_DWORD *)(v8 + 12) = v21;
  }
  return result;
}

//----- (00467C60) --------------------------------------------------------
int __cdecl NPC323(int a1)
{
  int *v1; // edx@31
  int result; // eax@31
  int v3; // [sp+8h] [bp-44h]@4
  int v4; // [sp+Ch] [bp-40h]@1
  int v5; // [sp+10h] [bp-3Ch]@1
  int v6; // [sp+14h] [bp-38h]@1
  int v7; // [sp+18h] [bp-34h]@1
  int v8; // [sp+1Ch] [bp-30h]@1
  int v9; // [sp+20h] [bp-2Ch]@1
  int v10; // [sp+24h] [bp-28h]@1
  int v11; // [sp+28h] [bp-24h]@1
  int v12; // [sp+2Ch] [bp-20h]@1
  int v13; // [sp+30h] [bp-1Ch]@1
  int v14; // [sp+34h] [bp-18h]@1
  int v15; // [sp+38h] [bp-14h]@1
  int v16; // [sp+3Ch] [bp-10h]@1
  int v17; // [sp+40h] [bp-Ch]@1
  int v18; // [sp+44h] [bp-8h]@1
  int v19; // [sp+48h] [bp-4h]@1

  v4 = 216;
  v5 = 32;
  v6 = 232;
  v7 = 56;
  v8 = 232;
  v9 = 32;
  v10 = 248;
  v11 = 56;
  v12 = 216;
  v13 = 56;
  v14 = 232;
  v15 = 80;
  v16 = 232;
  v17 = 56;
  v18 = 248;
  v19 = 80;
  if ( ++*(_DWORD *)(a1 + 100) > 3 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    if ( ++*(_DWORD *)(a1 + 104) > 3 )
      *(_DWORD *)(a1 + 104) = 0;
  }
  v3 = *(_DWORD *)(a1 + 116);
  if ( v3 )
  {
    if ( v3 != 1 )
      goto LABEL_29;
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 1;
    switch ( *(_DWORD *)(a1 + 76) )
    {
      case 0:
        *(_DWORD *)(a1 + 16) = -1536;
        break;
      case 2:
        *(_DWORD *)(a1 + 16) = 1536;
        break;
      case 1:
        *(_DWORD *)(a1 + 20) = -1536;
        break;
      case 3:
        *(_DWORD *)(a1 + 20) = 1536;
        break;
      default:
        break;
    }
  }
  if ( ++*(_DWORD *)(a1 + 120) == 16 )
    *(_WORD *)(a1 + 80) &= 0xFFF7u;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( *(_DWORD *)(a1 + 4) & 0xFF )
    *(_DWORD *)(a1 + 116) = 10;
  if ( *(_DWORD *)(a1 + 120) > 20 )
  {
    switch ( *(_DWORD *)(a1 + 76) )
    {
      case 0:
        if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position + 0x4000 )
          *(_DWORD *)(a1 + 116) = 10;
        break;
      case 2:
        if ( *(_DWORD *)(a1 + 8) >= Quote_X_Position - 0x4000 )
          *(_DWORD *)(a1 + 116) = 10;
        break;
      case 1:
        if ( *(_DWORD *)(a1 + 12) <= Quote_Y_Position + 0x4000 )
          *(_DWORD *)(a1 + 116) = 10;
        break;
      case 3:
        if ( *(_DWORD *)(a1 + 12) >= Quote_Y_Position - 0x4000 )
          *(_DWORD *)(a1 + 116) = 10;
        break;
      default:
        break;
    }
  }
LABEL_29:
  if ( *(_DWORD *)(a1 + 116) == 10 )
  {
    *(_DWORD *)(a1 + 40) = 309;
    *(_DWORD *)(a1 + 104) = 0;
    *(_DWORD *)(a1 + 116) = 11;
    *(_WORD *)(a1 + 80) |= 0x20u;
    *(_WORD *)(a1 + 80) &= 0xFFF7u;
    *(_DWORD *)(a1 + 164) = 5;
    *(_DWORD *)(a1 + 144) = 4096;
  }
  v1 = &v4 + 4 * *(_DWORD *)(a1 + 104);
  result = a1 + 84;
  *(_DWORD *)result = *v1;
  *(_DWORD *)(result + 4) = v1[1];
  *(_DWORD *)(result + 8) = v1[2];
  *(_DWORD *)(result + 12) = v1[3];
  return result;
}

//----- (00467F40) --------------------------------------------------------
int __cdecl NPC324(int a1)
{
  int result; // eax@1
  int v2; // [sp+0h] [bp-4h]@1

  result = a1;
  v2 = *(_DWORD *)(a1 + 116);
  if ( v2 == 10 )
  {
    *(_DWORD *)(a1 + 116) = 11;
    *(_DWORD *)(a1 + 120) = 0;
  }
  else if ( v2 != 11 )
  {
    return result;
  }
  result = ++*(_DWORD *)(a1 + 120) / 50;
  if ( *(_DWORD *)(a1 + 120) % 50 == 1 )
    result = NPC_Create(323, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 0, 0, *(_DWORD *)(a1 + 76), 0, 256);
  if ( *(_DWORD *)(a1 + 120) > 351 )
  {
    result = a1;
    *(_DWORD *)(a1 + 116) = 0;
  }
  return result;
}

//----- (00467FE0) --------------------------------------------------------
int __cdecl NPC325(int a1)
{
  int result; // eax@16
  int *v2; // eax@17
  int v3; // ecx@17
  int v4; // [sp+0h] [bp-74h]@1
  int v5; // [sp+4h] [bp-70h]@1
  int v6; // [sp+8h] [bp-6Ch]@1
  int v7; // [sp+Ch] [bp-68h]@1
  int v8; // [sp+10h] [bp-64h]@1
  int v9; // [sp+14h] [bp-60h]@1
  int v10; // [sp+18h] [bp-5Ch]@1
  int v11; // [sp+1Ch] [bp-58h]@1
  int v12; // [sp+20h] [bp-54h]@1
  int v13; // [sp+24h] [bp-50h]@1
  int v14; // [sp+28h] [bp-4Ch]@1
  int v15; // [sp+2Ch] [bp-48h]@1
  int v16; // [sp+30h] [bp-44h]@1
  int v17; // [sp+34h] [bp-40h]@1
  int v18; // [sp+38h] [bp-3Ch]@1
  int v19; // [sp+3Ch] [bp-38h]@1
  int v20; // [sp+40h] [bp-34h]@1
  int v21; // [sp+44h] [bp-30h]@1
  int v22; // [sp+48h] [bp-2Ch]@1
  int v23; // [sp+4Ch] [bp-28h]@1
  int v24; // [sp+50h] [bp-24h]@1
  int v25; // [sp+54h] [bp-20h]@1
  int v26; // [sp+58h] [bp-1Ch]@1
  int v27; // [sp+5Ch] [bp-18h]@1
  int v28; // [sp+60h] [bp-14h]@1
  int v29; // [sp+64h] [bp-10h]@1
  int v30; // [sp+68h] [bp-Ch]@1
  int v31; // [sp+6Ch] [bp-8h]@1
  int v32; // [sp+70h] [bp-4h]@1

  v5 = 240;
  v6 = 96;
  v7 = 272;
  v8 = 128;
  v9 = 272;
  v10 = 96;
  v11 = 304;
  v12 = 128;
  v13 = 240;
  v14 = 128;
  v15 = 272;
  v16 = 160;
  v17 = 240;
  v18 = 0;
  v19 = 256;
  v20 = 96;
  v21 = 256;
  v22 = 0;
  v23 = 272;
  v24 = 96;
  v25 = 272;
  v26 = 0;
  v27 = 288;
  v28 = 96;
  v29 = 288;
  v30 = 0;
  v31 = 304;
  v32 = 96;
  v4 = *(_DWORD *)(a1 + 116);
  if ( !v4 )
  {
    *(_DWORD *)(a1 + 116) = 1;
    Play_Sound_Effect(29, 1);
    goto LABEL_6;
  }
  if ( v4 == 1 )
  {
LABEL_6:
    if ( ++*(_DWORD *)(a1 + 100) > 0 )
    {
      *(_DWORD *)(a1 + 100) = 0;
      ++*(_DWORD *)(a1 + 104);
    }
    if ( *(_DWORD *)(a1 + 104) > 2 )
      *(_DWORD *)(a1 + 104) = 0;
    if ( ++*(_DWORD *)(a1 + 120) > 50 )
    {
      *(_DWORD *)(a1 + 116) = 10;
      *(_DWORD *)(a1 + 100) = 0;
      *(_DWORD *)(a1 + 104) = 3;
      *(_DWORD *)(a1 + 164) = 10;
      *(_DWORD *)(a1 + 140) = 4096;
      *(_DWORD *)(a1 + 144) = 6144;
      Play_Sound_Effect(101, 1);
      sub_46F150(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12) + 43008, 0, 3);
    }
    goto LABEL_17;
  }
  if ( v4 == 10 )
  {
    if ( ++*(_DWORD *)(a1 + 100) > 2 )
    {
      *(_DWORD *)(a1 + 100) = 0;
      ++*(_DWORD *)(a1 + 104);
    }
    if ( *(_DWORD *)(a1 + 104) > 6 )
    {
      result = a1;
      *(_BYTE *)a1 = 0;
      return result;
    }
  }
LABEL_17:
  v2 = &v5 + 4 * *(_DWORD *)(a1 + 104);
  v3 = a1 + 84;
  *(_DWORD *)v3 = *v2;
  *(_DWORD *)(v3 + 4) = v2[1];
  *(_DWORD *)(v3 + 8) = v2[2];
  result = v2[3];
  *(_DWORD *)(v3 + 12) = result;
  return result;
}

//----- (00468230) --------------------------------------------------------
int __cdecl NPC326(int a1)
{
  int *v1; // edx@47
  int result; // eax@47
  int *v3; // edx@48
  int v4; // [sp+4h] [bp-100h]@46
  int v5; // [sp+8h] [bp-FCh]@46
  int v6; // [sp+Ch] [bp-F8h]@46
  int v7; // [sp+10h] [bp-F4h]@46
  int v8; // [sp+14h] [bp-F0h]@46
  int v9; // [sp+18h] [bp-ECh]@46
  int v10; // [sp+1Ch] [bp-E8h]@46
  int v11; // [sp+20h] [bp-E4h]@46
  int v12; // [sp+24h] [bp-E0h]@46
  int v13; // [sp+28h] [bp-DCh]@46
  int v14; // [sp+2Ch] [bp-D8h]@46
  int v15; // [sp+30h] [bp-D4h]@46
  int v16; // [sp+34h] [bp-D0h]@46
  int v17; // [sp+38h] [bp-CCh]@46
  int v18; // [sp+3Ch] [bp-C8h]@46
  int v19; // [sp+40h] [bp-C4h]@46
  int v20; // [sp+44h] [bp-C0h]@46
  int v21; // [sp+48h] [bp-BCh]@46
  int v22; // [sp+4Ch] [bp-B8h]@46
  int v23; // [sp+50h] [bp-B4h]@46
  int v24; // [sp+54h] [bp-B0h]@46
  int v25; // [sp+58h] [bp-ACh]@46
  int v26; // [sp+5Ch] [bp-A8h]@46
  int v27; // [sp+60h] [bp-A4h]@46
  int v28; // [sp+64h] [bp-A0h]@46
  int v29; // [sp+68h] [bp-9Ch]@46
  int v30; // [sp+6Ch] [bp-98h]@46
  int v31; // [sp+70h] [bp-94h]@46
  int v32; // [sp+74h] [bp-90h]@46
  int v33; // [sp+78h] [bp-8Ch]@46
  int v34; // [sp+7Ch] [bp-88h]@46
  int v35; // [sp+80h] [bp-84h]@46
  int v36; // [sp+84h] [bp-80h]@46
  int v37; // [sp+88h] [bp-7Ch]@46
  int v38; // [sp+8Ch] [bp-78h]@46
  int v39; // [sp+90h] [bp-74h]@46
  int v40; // [sp+94h] [bp-70h]@46
  int v41; // [sp+98h] [bp-6Ch]@46
  int v42; // [sp+9Ch] [bp-68h]@46
  int v43; // [sp+A0h] [bp-64h]@46
  int v44; // [sp+A4h] [bp-60h]@46
  int v45; // [sp+A8h] [bp-5Ch]@46
  int v46; // [sp+ACh] [bp-58h]@46
  int v47; // [sp+B0h] [bp-54h]@46
  int v48; // [sp+B4h] [bp-50h]@46
  int v49; // [sp+B8h] [bp-4Ch]@46
  int v50; // [sp+BCh] [bp-48h]@46
  int v51; // [sp+C0h] [bp-44h]@46
  int v52; // [sp+C4h] [bp-40h]@46
  int v53; // [sp+C8h] [bp-3Ch]@46
  int v54; // [sp+CCh] [bp-38h]@46
  int v55; // [sp+D0h] [bp-34h]@46
  int v56; // [sp+D4h] [bp-30h]@46
  int v57; // [sp+D8h] [bp-2Ch]@46
  int v58; // [sp+DCh] [bp-28h]@46
  int v59; // [sp+E0h] [bp-24h]@46
  int v60; // [sp+E4h] [bp-20h]@46
  int v61; // [sp+E8h] [bp-1Ch]@46
  int v62; // [sp+ECh] [bp-18h]@46
  int v63; // [sp+F0h] [bp-14h]@46
  int v64; // [sp+F4h] [bp-10h]@46
  int v65; // [sp+F8h] [bp-Ch]@46
  int v66; // [sp+FCh] [bp-8h]@46
  int v67; // [sp+100h] [bp-4h]@46

  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 12) -= 4096;
      *(_DWORD *)(a1 + 8) += 0x2000;
      *(_DWORD *)(a1 + 104) = 0;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( ++*(_DWORD *)(a1 + 120) <= 80 )
      {
        if ( *(_DWORD *)(a1 + 76) )
        {
          if ( *(_DWORD *)(a1 + 120) == 50 )
            *(_DWORD *)(a1 + 104) = 1;
          if ( *(_DWORD *)(a1 + 120) == 60 )
            *(_DWORD *)(a1 + 104) = 0;
        }
        else
        {
          if ( *(_DWORD *)(a1 + 120) == 30 )
            *(_DWORD *)(a1 + 104) = 1;
          if ( *(_DWORD *)(a1 + 120) == 40 )
            *(_DWORD *)(a1 + 104) = 0;
        }
      }
      else
      {
        *(_DWORD *)(a1 + 116) = 10;
        *(_DWORD *)(a1 + 120) = 0;
      }
      break;
    case 0xA:
      if ( ++*(_DWORD *)(a1 + 120) <= 50 )
      {
        if ( *(_DWORD *)(a1 + 120) / 2 % 2 )
          *(_DWORD *)(a1 + 104) = 2;
        else
          *(_DWORD *)(a1 + 104) = 3;
      }
      else
      {
        *(_DWORD *)(a1 + 116) = 15;
        *(_DWORD *)(a1 + 104) = 4;
        if ( *(_DWORD *)(a1 + 76) )
          *(_DWORD *)(a1 + 120) = -20;
        else
          *(_DWORD *)(a1 + 120) = 0;
      }
      break;
    case 0xF:
      if ( ++*(_DWORD *)(a1 + 120) > 40 )
      {
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 116) = 20;
      }
      break;
    case 0x14:
      *(_DWORD *)(a1 + 20) += 64;
      if ( *(_DWORD *)(a1 + 20) > 1535 )
        *(_DWORD *)(a1 + 20) = 1535;
      *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
      if ( ++*(_DWORD *)(a1 + 120) > 50 )
      {
        *(_DWORD *)(a1 + 116) = 30;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 6;
        if ( *(_DWORD *)(a1 + 76) )
          NPC_Create(327, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12) - 4096, 0, 0, 0, a1, 256);
        else
          NPC_Create(327, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12) - 0x2000, 0, 0, 0, a1, 256);
      }
      break;
    case 0x1E:
      if ( ++*(_DWORD *)(a1 + 120) == 30 )
        *(_DWORD *)(a1 + 104) = 7;
      if ( *(_DWORD *)(a1 + 120) == 40 )
        *(_DWORD *)(a1 + 116) = 40;
      break;
    case 0x28:
      *(_DWORD *)(a1 + 116) = 41;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 104) = 0;
      goto LABEL_42;
    case 0x29:
LABEL_42:
      if ( ++*(_DWORD *)(a1 + 120) == 30 )
        *(_DWORD *)(a1 + 104) = 1;
      if ( *(_DWORD *)(a1 + 120) == 40 )
        *(_DWORD *)(a1 + 104) = 0;
      break;
    default:
      break;
  }
  v36 = 0;
  v37 = 128;
  v38 = 16;
  v39 = 152;
  v40 = 16;
  v41 = 128;
  v42 = 32;
  v43 = 152;
  v44 = 32;
  v45 = 128;
  v46 = 48;
  v47 = 152;
  v48 = 48;
  v49 = 128;
  v50 = 64;
  v51 = 152;
  v52 = 64;
  v53 = 128;
  v54 = 80;
  v55 = 152;
  v56 = 80;
  v57 = 128;
  v58 = 96;
  v59 = 152;
  v60 = 96;
  v61 = 128;
  v62 = 112;
  v63 = 152;
  v64 = 112;
  v65 = 128;
  v66 = 128;
  v67 = 152;
  v4 = 128;
  v5 = 128;
  v6 = 144;
  v7 = 152;
  v8 = 144;
  v9 = 128;
  v10 = 160;
  v11 = 152;
  v12 = 160;
  v13 = 128;
  v14 = 176;
  v15 = 152;
  v16 = 176;
  v17 = 128;
  v18 = 192;
  v19 = 152;
  v20 = 192;
  v21 = 128;
  v22 = 208;
  v23 = 152;
  v24 = 208;
  v25 = 128;
  v26 = 224;
  v27 = 152;
  v28 = 224;
  v29 = 128;
  v30 = 240;
  v31 = 152;
  v32 = 32;
  v33 = 152;
  v34 = 48;
  v35 = 176;
  if ( *(_DWORD *)(a1 + 76) )
  {
    v3 = &v4 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v3;
    *(_DWORD *)(result + 4) = v3[1];
    *(_DWORD *)(result + 8) = v3[2];
    *(_DWORD *)(result + 12) = v3[3];
  }
  else
  {
    v1 = &v36 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v1;
    *(_DWORD *)(result + 4) = v1[1];
    *(_DWORD *)(result + 8) = v1[2];
    *(_DWORD *)(result + 12) = v1[3];
  }
  return result;
}

//----- (00468830) --------------------------------------------------------
int __cdecl NPC327(int a1)
{
  int *v1; // eax@14
  int v2; // ecx@14
  int result; // eax@14
  int v4; // [sp+0h] [bp-24h]@1
  int v5; // [sp+4h] [bp-20h]@1
  int v6; // [sp+8h] [bp-1Ch]@1
  int v7; // [sp+Ch] [bp-18h]@1
  int v8; // [sp+10h] [bp-14h]@1
  int v9; // [sp+14h] [bp-10h]@1
  int v10; // [sp+18h] [bp-Ch]@1
  int v11; // [sp+1Ch] [bp-8h]@1
  int v12; // [sp+20h] [bp-4h]@1

  v5 = 240;
  v6 = 80;
  v7 = 256;
  v8 = 96;
  v9 = 256;
  v10 = 80;
  v11 = 272;
  v12 = 96;
  ++*(_DWORD *)(a1 + 120);
  v4 = *(_DWORD *)(a1 + 116);
  if ( v4 )
  {
    if ( v4 == 1 )
    {
      if ( *(_DWORD *)(a1 + 120) >= 48 )
      {
        *(_DWORD *)(a1 + 8) = *(_DWORD *)(a1 + 32);
        *(_DWORD *)(a1 + 12) = *(_DWORD *)(a1 + 36);
      }
      else
      {
        *(_DWORD *)(a1 + 8) = *(_DWORD *)(a1 + 32) + (RNG_Range(-1, 1) << 9);
        *(_DWORD *)(a1 + 12) = *(_DWORD *)(a1 + 36) + (RNG_Range(-1, 1) << 9);
      }
    }
  }
  else
  {
    if ( *(_DWORD *)(a1 + 120) < 4 )
      *(_DWORD *)(a1 + 12) -= 1024;
    if ( *(_DWORD *)(*(_DWORD *)(a1 + 168) + 104) == 7 )
    {
      *(_DWORD *)(a1 + 104) = 1;
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 32) = *(_DWORD *)(a1 + 8);
      *(_DWORD *)(a1 + 36) = *(_DWORD *)(a1 + 12);
    }
  }
  if ( *(_DWORD *)(a1 + 120) > 70 )
    *(_BYTE *)a1 = 0;
  v1 = &v5 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  *(_DWORD *)(v2 + 8) = v1[2];
  result = v1[3];
  *(_DWORD *)(v2 + 12) = result;
  return result;
}

//----- (00468990) --------------------------------------------------------
int __cdecl NPC328(int a1)
{
  int result; // eax@1

  result = a1 + 84;
  *(_DWORD *)result = 96;
  *(_DWORD *)(result + 4) = 0;
  *(_DWORD *)(result + 8) = 128;
  *(_DWORD *)(result + 12) = 48;
  return result;
}

//----- (004689E0) --------------------------------------------------------
signed int __cdecl NPC329(int a1)
{
  int v1; // ecx@2
  signed int result; // eax@2
  int v3; // ecx@3

  if ( ++*(_DWORD *)(a1 + 100) / 2 % 2 )
  {
    v1 = a1 + 84;
    *(_DWORD *)v1 = 48;
    *(_DWORD *)(v1 + 4) = 0;
    *(_DWORD *)(v1 + 8) = 64;
    result = 16;
    *(_DWORD *)(v1 + 12) = 16;
  }
  else
  {
    v3 = a1 + 84;
    *(_DWORD *)v3 = 64;
    *(_DWORD *)(v3 + 4) = 0;
    *(_DWORD *)(v3 + 8) = 80;
    result = 16;
    *(_DWORD *)(v3 + 12) = 16;
  }
  return result;
}

//----- (00468A90) --------------------------------------------------------
int __cdecl NPC330(int a1)
{
  int *v1; // edx@29
  int result; // eax@29
  int v3; // [sp+4h] [bp-30h]@1
  int v4; // [sp+8h] [bp-2Ch]@1
  int v5; // [sp+Ch] [bp-28h]@1
  int v6; // [sp+10h] [bp-24h]@1
  int v7; // [sp+14h] [bp-20h]@1
  int v8; // [sp+18h] [bp-1Ch]@1
  int v9; // [sp+1Ch] [bp-18h]@1
  int v10; // [sp+20h] [bp-14h]@1
  int v11; // [sp+24h] [bp-10h]@1
  int v12; // [sp+28h] [bp-Ch]@1
  int v13; // [sp+2Ch] [bp-8h]@1
  int v14; // [sp+30h] [bp-4h]@1

  v3 = 144;
  v4 = 136;
  v5 = 160;
  v6 = 152;
  v7 = 160;
  v8 = 136;
  v9 = 176;
  v10 = 152;
  v11 = 176;
  v12 = 136;
  v13 = 192;
  v14 = 152;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      sub_413A60(*(_DWORD *)(a1 + 8) / 512 / 16, *(_DWORD *)(a1 + 12) / 512 / 16, 0);
      if ( *(_DWORD *)(a1 + 76) )
        *(_DWORD *)(a1 + 116) = 30;
      else
        *(_DWORD *)(a1 + 116) = 10;
      break;
    case 0xA:
      *(_DWORD *)(a1 + 16) -= 64;
      *(_DWORD *)(a1 + 20) = 0;
      if ( *(_DWORD *)(a1 + 4) & 1 )
        *(_DWORD *)(a1 + 116) = 20;
      break;
    case 0x14:
      *(_DWORD *)(a1 + 16) = 0;
      *(_DWORD *)(a1 + 20) -= 64;
      if ( *(_DWORD *)(a1 + 4) & 2 )
        *(_DWORD *)(a1 + 116) = 30;
      break;
    case 0x1E:
      *(_DWORD *)(a1 + 16) += 64;
      *(_DWORD *)(a1 + 20) = 0;
      if ( *(_DWORD *)(a1 + 4) & 4 )
        *(_DWORD *)(a1 + 116) = 40;
      break;
    case 0x28:
      *(_DWORD *)(a1 + 16) = 0;
      *(_DWORD *)(a1 + 20) += 64;
      if ( *(_DWORD *)(a1 + 4) & 8 )
        *(_DWORD *)(a1 + 116) = 10;
      break;
    default:
      break;
  }
  if ( *(_DWORD *)(a1 + 16) < -1024 )
    *(_DWORD *)(a1 + 16) = -1024;
  if ( *(_DWORD *)(a1 + 16) > 1024 )
    *(_DWORD *)(a1 + 16) = 1024;
  if ( *(_DWORD *)(a1 + 20) < -1024 )
    *(_DWORD *)(a1 + 20) = -1024;
  if ( *(_DWORD *)(a1 + 20) > 1024 )
    *(_DWORD *)(a1 + 20) = 1024;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  if ( ++*(_DWORD *)(a1 + 100) > 1 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    ++*(_DWORD *)(a1 + 104);
  }
  if ( *(_DWORD *)(a1 + 104) > 2 )
    *(_DWORD *)(a1 + 104) = 0;
  v1 = &v3 + 4 * *(_DWORD *)(a1 + 104);
  result = a1 + 84;
  *(_DWORD *)result = *v1;
  *(_DWORD *)(result + 4) = v1[1];
  *(_DWORD *)(result + 8) = v1[2];
  *(_DWORD *)(result + 12) = v1[3];
  return result;
}

//----- (00468D70) --------------------------------------------------------
int __cdecl NPC331(int a1)
{
  int *v1; // ecx@21
  int v2; // edx@21
  int result; // eax@21
  int v4; // [sp+0h] [bp-44h]@1
  int v5; // [sp+4h] [bp-40h]@1
  int v6; // [sp+8h] [bp-3Ch]@1
  int v7; // [sp+Ch] [bp-38h]@1
  int v8; // [sp+10h] [bp-34h]@1
  int v9; // [sp+14h] [bp-30h]@1
  int v10; // [sp+18h] [bp-2Ch]@1
  int v11; // [sp+1Ch] [bp-28h]@1
  int v12; // [sp+20h] [bp-24h]@1
  int v13; // [sp+24h] [bp-20h]@1
  int v14; // [sp+28h] [bp-1Ch]@1
  int v15; // [sp+2Ch] [bp-18h]@1
  int v16; // [sp+30h] [bp-14h]@1
  int v17; // [sp+34h] [bp-10h]@1
  int v18; // [sp+38h] [bp-Ch]@1
  int v19; // [sp+3Ch] [bp-8h]@1
  int v20; // [sp+40h] [bp-4h]@1

  v5 = 288;
  v6 = 80;
  v7 = 304;
  v8 = 96;
  v9 = 304;
  v10 = 80;
  v11 = 320;
  v12 = 96;
  v13 = 288;
  v14 = 96;
  v15 = 304;
  v16 = 112;
  v17 = 304;
  v18 = 96;
  v19 = 320;
  v20 = 112;
  v4 = *(_DWORD *)(a1 + 116);
  if ( v4 )
  {
    if ( v4 != 1 )
    {
      if ( v4 == 10 && *(_DWORD *)(a1 + 4) & 8 )
      {
        *(_BYTE *)a1 = 0;
        Create_Animated_Effect(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 2, 0);
      }
      goto LABEL_11;
    }
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 1;
  }
  if ( *(_DWORD *)(a1 + 4) & 8 )
  {
    *(_DWORD *)(a1 + 20) = -512;
    *(_DWORD *)(a1 + 116) = 10;
  }
LABEL_11:
  *(_DWORD *)(a1 + 20) += 64;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  if ( ++*(_DWORD *)(a1 + 100) > 3 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    if ( *(_DWORD *)(a1 + 76) )
      --*(_DWORD *)(a1 + 104);
    else
      ++*(_DWORD *)(a1 + 104);
    if ( *(_DWORD *)(a1 + 104) < 0 )
      *(_DWORD *)(a1 + 104) += 4;
    if ( *(_DWORD *)(a1 + 104) > 3 )
      *(_DWORD *)(a1 + 104) -= 4;
  }
  v1 = &v5 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  result = v1[2];
  *(_DWORD *)(v2 + 8) = result;
  *(_DWORD *)(v2 + 12) = v1[3];
  return result;
}

//----- (00468F50) --------------------------------------------------------
int __cdecl NPC332(int a1)
{
  int X_Velocity; // ST24_4@12
  int v2; // ST24_4@13
  int *v3; // edx@19
  int result; // eax@19
  int v5; // [sp+0h] [bp-38h]@1
  int v6; // [sp+8h] [bp-30h]@1
  int v7; // [sp+Ch] [bp-2Ch]@1
  int v8; // [sp+10h] [bp-28h]@1
  int v9; // [sp+14h] [bp-24h]@1
  int v10; // [sp+18h] [bp-20h]@1
  int v11; // [sp+1Ch] [bp-1Ch]@1
  int v12; // [sp+20h] [bp-18h]@1
  int v13; // [sp+24h] [bp-14h]@1
  int v14; // [sp+28h] [bp-10h]@1
  int v15; // [sp+2Ch] [bp-Ch]@1
  int v16; // [sp+30h] [bp-8h]@1
  int v17; // [sp+34h] [bp-4h]@1

  v6 = 144;
  v7 = 96;
  v8 = 168;
  v9 = 120;
  v10 = 168;
  v11 = 96;
  v12 = 192;
  v13 = 120;
  v14 = 192;
  v15 = 96;
  v16 = 216;
  v17 = 120;
  v5 = *(_DWORD *)(a1 + 116);
  if ( v5 )
  {
    if ( v5 != 1 )
      goto LABEL_15;
  }
  else
  {
    Play_Sound_Effect(44, 1);
    *(_DWORD *)(a1 + 116) = 1;
    if ( *(_DWORD *)(a1 + 76) )
      *(_DWORD *)(a1 + 16) = 1024;
    else
      *(_DWORD *)(a1 + 16) = -1024;
  }
  if ( ++*(_DWORD *)(a1 + 100) > 1 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    if ( ++*(_DWORD *)(a1 + 104) > 2 )
      *(_DWORD *)(a1 + 104) = 0;
  }
  if ( ++*(_DWORD *)(a1 + 120) % 6 == 1 )
  {
    if ( *(_DWORD *)(a1 + 76) )
    {
      v2 = (RNG_Range(4, 16) << 9) / 8;
      NPC_Create(331, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), v2, -1024, 0, 0, 256);
    }
    else
    {
      X_Velocity = (RNG_Range(-16, -4) << 9) / 8;
      NPC_Create(331, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), X_Velocity, -1024, 0, 0, 256);
    }
    Play_Sound_Effect(12, 1);
  }
LABEL_15:
  if ( *(_DWORD *)(a1 + 4) & 1 )
    *(_BYTE *)a1 = 0;
  if ( *(_DWORD *)(a1 + 4) & 4 )
    *(_BYTE *)a1 = 0;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  v3 = &v6 + 4 * *(_DWORD *)(a1 + 104);
  result = a1 + 84;
  *(_DWORD *)result = *v3;
  *(_DWORD *)(result + 4) = v3[1];
  *(_DWORD *)(result + 8) = v3[2];
  *(_DWORD *)(result + 12) = v3[3];
  return result;
}

//----- (00469140) --------------------------------------------------------
int __cdecl NPC333(int a1)
{
  int *v1; // eax@13
  int v2; // ecx@13
  int result; // eax@13
  int v4; // [sp+0h] [bp-24h]@1
  int v5; // [sp+4h] [bp-20h]@1
  int v6; // [sp+8h] [bp-1Ch]@1
  int v7; // [sp+Ch] [bp-18h]@1
  int v8; // [sp+10h] [bp-14h]@1
  int v9; // [sp+14h] [bp-10h]@1
  int v10; // [sp+18h] [bp-Ch]@1
  int v11; // [sp+1Ch] [bp-8h]@1
  int v12; // [sp+20h] [bp-4h]@1

  v5 = 80;
  v6 = 120;
  v7 = 104;
  v8 = 144;
  v9 = 104;
  v10 = 120;
  v11 = 128;
  v12 = 144;
  v4 = *(_DWORD *)(a1 + 116);
  if ( v4 )
  {
    if ( v4 != 1 )
      goto LABEL_13;
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 32) = *(_DWORD *)(a1 + 8);
    *(_DWORD *)(a1 + 36) = *(_DWORD *)(a1 + 12);
    Play_Sound_Effect(103, 1);
    *(_DWORD *)(a1 + 12) = Quote_Y_Position;
  }
  if ( ++*(_DWORD *)(a1 + 120) / 2 % 2 )
    *(_DWORD *)(a1 + 104) = 0;
  else
    *(_DWORD *)(a1 + 104) = 1;
  if ( !*(_DWORD *)(a1 + 76) && *(_DWORD *)(a1 + 120) == 20 )
    NPC_Create(146, *(_DWORD *)(a1 + 32), *(_DWORD *)(a1 + 36), 0, 0, 0, 0, 256);
  if ( *(_DWORD *)(a1 + 120) > 40 )
    *(_BYTE *)a1 = 0;
LABEL_13:
  v1 = &v5 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  *(_DWORD *)(v2 + 8) = v1[2];
  result = v1[3];
  *(_DWORD *)(v2 + 12) = result;
  return result;
}

//----- (00469290) --------------------------------------------------------
int __cdecl NPC334(int a1)
{
  int *v1; // ecx@13
  int v2; // edx@13
  int result; // eax@13
  int *v4; // ecx@14
  int v5; // edx@14
  int v6; // [sp+0h] [bp-44h]@1
  int v7; // [sp+4h] [bp-40h]@1
  int v8; // [sp+8h] [bp-3Ch]@1
  int v9; // [sp+Ch] [bp-38h]@1
  int v10; // [sp+10h] [bp-34h]@1
  int v11; // [sp+14h] [bp-30h]@1
  int v12; // [sp+18h] [bp-2Ch]@1
  int v13; // [sp+1Ch] [bp-28h]@1
  int v14; // [sp+20h] [bp-24h]@1
  int v15; // [sp+24h] [bp-20h]@1
  int v16; // [sp+28h] [bp-1Ch]@1
  int v17; // [sp+2Ch] [bp-18h]@1
  int v18; // [sp+30h] [bp-14h]@1
  int v19; // [sp+34h] [bp-10h]@1
  int v20; // [sp+38h] [bp-Ch]@1
  int v21; // [sp+3Ch] [bp-8h]@1
  int v22; // [sp+40h] [bp-4h]@1

  v15 = 160;
  v16 = 184;
  v17 = 168;
  v18 = 200;
  v19 = 168;
  v20 = 184;
  v21 = 176;
  v22 = 200;
  v7 = 176;
  v8 = 184;
  v9 = 184;
  v10 = 200;
  v11 = 184;
  v12 = 184;
  v13 = 192;
  v14 = 200;
  v6 = *(_DWORD *)(a1 + 116);
  if ( v6 )
  {
    if ( v6 != 10 )
      goto LABEL_12;
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 10;
    if ( *(_DWORD *)(a1 + 76) )
    {
      *(_DWORD *)(a1 + 8) = Quote_X_Position - 5120;
      *(_DWORD *)(a1 + 12) = Quote_Y_Position - 1024;
    }
    else
    {
      *(_DWORD *)(a1 + 8) += 5120;
      *(_DWORD *)(a1 + 12) -= 9216;
    }
  }
  if ( ++*(_DWORD *)(a1 + 120) / 8 % 2 )
    *(_DWORD *)(a1 + 104) = 0;
  else
    *(_DWORD *)(a1 + 104) = 1;
  if ( *(_DWORD *)(a1 + 120) >= 64 )
    *(_BYTE *)a1 = 0;
LABEL_12:
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v7 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    result = v4[2];
    *(_DWORD *)(v5 + 8) = result;
    *(_DWORD *)(v5 + 12) = v4[3];
  }
  else
  {
    v1 = &v15 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    result = v1[2];
    *(_DWORD *)(v2 + 8) = result;
    *(_DWORD *)(v2 + 12) = v1[3];
  }
  return result;
}

//----- (00469430) --------------------------------------------------------
int __cdecl NPC335(int a1)
{
  int *v1; // ecx@11
  int v2; // edx@11
  int result; // eax@11
  int v4; // [sp+4h] [bp-30h]@1
  int v5; // [sp+8h] [bp-2Ch]@1
  int v6; // [sp+Ch] [bp-28h]@1
  int v7; // [sp+10h] [bp-24h]@1
  int v8; // [sp+14h] [bp-20h]@1
  int v9; // [sp+18h] [bp-1Ch]@1
  int v10; // [sp+1Ch] [bp-18h]@1
  int v11; // [sp+20h] [bp-14h]@1
  int v12; // [sp+24h] [bp-10h]@1
  int v13; // [sp+28h] [bp-Ch]@1
  int v14; // [sp+2Ch] [bp-8h]@1
  int v15; // [sp+30h] [bp-4h]@1

  v4 = 0;
  v5 = 16;
  v6 = 16;
  v7 = 32;
  v8 = 16;
  v9 = 16;
  v10 = 32;
  v11 = 32;
  v12 = 32;
  v13 = 16;
  v14 = 48;
  v15 = 32;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 120) = RNG_Range(3, 20);
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( --*(_DWORD *)(a1 + 120) <= 0 )
      {
        *(_DWORD *)(a1 + 116) = 2;
        *(_DWORD *)(a1 + 120) = RNG_Range(10, 50);
        *(_DWORD *)(a1 + 104) = 1;
        *(_DWORD *)(a1 + 16) = 1536;
      }
      break;
    case 2:
      if ( --*(_DWORD *)(a1 + 120) <= 0 )
      {
        *(_DWORD *)(a1 + 116) = 3;
        *(_DWORD *)(a1 + 120) = RNG_Range(40, 50);
        *(_DWORD *)(a1 + 104) = 2;
        *(_DWORD *)(a1 + 20) = RNG_Range(-256, 256);
      }
      break;
    case 3:
      if ( --*(_DWORD *)(a1 + 120) <= 0 )
      {
        *(_DWORD *)(a1 + 116) = 1;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 0;
      }
      break;
    default:
      break;
  }
  *(_DWORD *)(a1 + 16) -= 16;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  v1 = &v4 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  result = v1[2];
  *(_DWORD *)(v2 + 8) = result;
  *(_DWORD *)(v2 + 12) = v1[3];
  return result;
}

//----- (00469610) --------------------------------------------------------
int __cdecl NPC336(int a1)
{
  int result; // eax@1
  int v2; // eax@8
  int v3; // [sp+0h] [bp-8h]@1

  result = a1;
  v3 = *(_DWORD *)(a1 + 116);
  if ( v3 )
  {
    if ( v3 == 10 )
    {
      result = a1;
      if ( ++*(_DWORD *)(a1 + 120) % 4 == 1 )
      {
        v2 = RNG_Range(0, 13);
        result = NPC_Create(335, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12) + (v2 << 13), 0, 0, 0, 0, 0);
      }
    }
  }
  else if ( Invincibility_Timer )
  {
    result = a1;
    *(_BYTE *)a1 = 0;
  }
  return result;
}
// 49E6C8: using guessed type char Invincibility_Timer;

//----- (004696B0) --------------------------------------------------------
int __cdecl NPC337(int a1)
{
  int *v1; // ecx@13
  int v2; // edx@13
  int result; // eax@13
  int v4; // [sp+0h] [bp-24h]@1
  int v5; // [sp+4h] [bp-20h]@1
  int v6; // [sp+8h] [bp-1Ch]@1
  int v7; // [sp+Ch] [bp-18h]@1
  int v8; // [sp+10h] [bp-14h]@1
  int v9; // [sp+14h] [bp-10h]@1
  int v10; // [sp+18h] [bp-Ch]@1
  int v11; // [sp+1Ch] [bp-8h]@1
  int v12; // [sp+20h] [bp-4h]@1

  v5 = 256;
  v6 = 112;
  v7 = 288;
  v8 = 152;
  v9 = 288;
  v10 = 112;
  v11 = 320;
  v12 = 152;
  v4 = *(_DWORD *)(a1 + 116);
  if ( v4 )
  {
    if ( v4 != 1 )
    {
      if ( v4 != 2 )
        goto LABEL_11;
      goto LABEL_7;
    }
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 12) -= 4096;
  }
  *(_DWORD *)(a1 + 16) = 0;
  *(_DWORD *)(a1 + 116) = 2;
  *(_DWORD *)(a1 + 104) = 0;
LABEL_7:
  if ( ++*(_DWORD *)(a1 + 100) > 50 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    ++*(_DWORD *)(a1 + 104);
  }
  if ( *(_DWORD *)(a1 + 104) > 1 )
    *(_DWORD *)(a1 + 104) = 0;
LABEL_11:
  *(_DWORD *)(a1 + 20) += 64;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  v1 = &v5 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  result = v1[2];
  *(_DWORD *)(v2 + 8) = result;
  *(_DWORD *)(v2 + 12) = v1[3];
  return result;
}

//----- (00469800) --------------------------------------------------------
char *__cdecl NPC338(void *a1)
{
  char *result; // eax@23
  int *v2; // edx@25
  int *v3; // edx@26
  int v4; // [sp+0h] [bp-44h]@1
  int v5; // [sp+4h] [bp-40h]@1
  int v6; // [sp+8h] [bp-3Ch]@1
  int v7; // [sp+Ch] [bp-38h]@1
  int v8; // [sp+10h] [bp-34h]@1
  int v9; // [sp+14h] [bp-30h]@1
  int v10; // [sp+18h] [bp-2Ch]@1
  int v11; // [sp+1Ch] [bp-28h]@1
  int v12; // [sp+20h] [bp-24h]@1
  int v13; // [sp+24h] [bp-20h]@1
  int v14; // [sp+28h] [bp-1Ch]@1
  int v15; // [sp+2Ch] [bp-18h]@1
  int v16; // [sp+30h] [bp-14h]@1
  int v17; // [sp+34h] [bp-10h]@1
  int v18; // [sp+38h] [bp-Ch]@1
  int v19; // [sp+3Ch] [bp-8h]@1
  int v20; // [sp+40h] [bp-4h]@1

  v13 = 288;
  v14 = 0;
  v15 = 304;
  v16 = 16;
  v17 = 304;
  v18 = 0;
  v19 = 320;
  v20 = 16;
  v5 = 288;
  v6 = 16;
  v7 = 304;
  v8 = 32;
  v9 = 304;
  v10 = 16;
  v11 = 320;
  v12 = 32;
  v4 = *((_DWORD *)a1 + 29);
  if ( v4 )
  {
    if ( v4 != 1 )
      goto LABEL_24;
  }
  else
  {
    *((_DWORD *)a1 + 29) = 1;
    *((_DWORD *)a1 + 36) = 4096;
    *((_DWORD *)a1 + 38) = 4096;
    *((_DWORD *)a1 + 41) = 3;
    *((_WORD *)a1 + 40) |= 0x20u;
    *((_DWORD *)a1 + 9) = *((_DWORD *)a1 + 3);
    *((_DWORD *)a1 + 5) = (RNG_Range(-10, 10) << 9) / 2;
  }
  if ( ++*((_DWORD *)a1 + 25) > 2 )
  {
    *((_DWORD *)a1 + 25) = 0;
    ++*((_DWORD *)a1 + 26);
  }
  if ( *((_DWORD *)a1 + 26) > 1 )
    *((_DWORD *)a1 + 26) = 0;
  if ( *((_DWORD *)a1 + 3) >= *((_DWORD *)a1 + 9) )
    *((_DWORD *)a1 + 5) -= 128;
  else
    *((_DWORD *)a1 + 5) += 128;
  if ( *((_DWORD *)a1 + 19) )
    *((_DWORD *)a1 + 4) += 32;
  else
    *((_DWORD *)a1 + 4) -= 32;
  if ( *((_DWORD *)a1 + 4) > 1024 )
    *((_DWORD *)a1 + 4) = 1024;
  if ( *((_DWORD *)a1 + 4) < -1024 )
    *((_DWORD *)a1 + 4) = -1024;
  if ( *((_DWORD *)a1 + 2) < 0
    || *((_DWORD *)a1 + 3) < 0
    || *((_DWORD *)a1 + 2) > *(signed __int16 *)&word_49E586 << 13
    || *((_DWORD *)a1 + 3) > *(signed __int16 *)&word_49E588 << 13 )
  {
    return (char *)sub_46F760(a1);
  }
LABEL_24:
  *((_DWORD *)a1 + 2) += *((_DWORD *)a1 + 4);
  *((_DWORD *)a1 + 3) += *((_DWORD *)a1 + 5);
  if ( *((_DWORD *)a1 + 19) )
  {
    v3 = &v5 + 4 * *((_DWORD *)a1 + 26);
    result = (char *)a1 + 84;
    *(_DWORD *)result = *v3;
    *((_DWORD *)result + 1) = v3[1];
    *((_DWORD *)result + 2) = v3[2];
    *((_DWORD *)result + 3) = v3[3];
  }
  else
  {
    v2 = &v13 + 4 * *((_DWORD *)a1 + 26);
    result = (char *)a1 + 84;
    *(_DWORD *)result = *v2;
    *((_DWORD *)result + 1) = v2[1];
    *((_DWORD *)result + 2) = v2[2];
    *((_DWORD *)result + 3) = v2[3];
  }
  return result;
}

//----- (00469AA0) --------------------------------------------------------
int __cdecl NPC339(int a1)
{
  int result; // eax@1
  int v2; // ST14_4@7
  int v3; // eax@7
  int v4; // [sp+0h] [bp-4h]@1

  result = a1;
  v4 = *(_DWORD *)(a1 + 116);
  if ( v4 )
  {
    if ( v4 != 1 )
      return result;
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 120) = RNG_Range(0, 40);
  }
  if ( *(_DWORD *)(a1 + 120) )
  {
    result = a1;
    --*(_DWORD *)(a1 + 120);
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 0;
    v2 = *(_DWORD *)(a1 + 76);
    v3 = RNG_Range(-16, 16);
    result = NPC_Create(338, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12) + (v3 << 9), 0, 0, v2, 0, 256);
  }
  return result;
}

//----- (00469B40) --------------------------------------------------------
int __cdecl NPC340(int a1)
{
  int *v1; // ecx@203
  int v2; // edx@203
  int result; // eax@203
  int *v4; // ecx@204
  int v5; // edx@204
  int v6; // [sp+0h] [bp-170h]@29
  signed int v7; // [sp+4h] [bp-16Ch]@1
  int v8; // [sp+8h] [bp-168h]@202
  int v9; // [sp+Ch] [bp-164h]@202
  int v10; // [sp+10h] [bp-160h]@202
  int v11; // [sp+14h] [bp-15Ch]@202
  int v12; // [sp+18h] [bp-158h]@202
  int v13; // [sp+1Ch] [bp-154h]@202
  int v14; // [sp+20h] [bp-150h]@202
  int v15; // [sp+24h] [bp-14Ch]@202
  int v16; // [sp+28h] [bp-148h]@202
  int v17; // [sp+2Ch] [bp-144h]@202
  int v18; // [sp+30h] [bp-140h]@202
  int v19; // [sp+34h] [bp-13Ch]@202
  int v20; // [sp+38h] [bp-138h]@202
  int v21; // [sp+3Ch] [bp-134h]@202
  int v22; // [sp+40h] [bp-130h]@202
  int v23; // [sp+44h] [bp-12Ch]@202
  int v24; // [sp+48h] [bp-128h]@202
  int v25; // [sp+4Ch] [bp-124h]@202
  int v26; // [sp+50h] [bp-120h]@202
  int v27; // [sp+54h] [bp-11Ch]@202
  int v28; // [sp+58h] [bp-118h]@202
  int v29; // [sp+5Ch] [bp-114h]@202
  int v30; // [sp+60h] [bp-110h]@202
  int v31; // [sp+64h] [bp-10Ch]@202
  int v32; // [sp+68h] [bp-108h]@202
  int v33; // [sp+6Ch] [bp-104h]@202
  int v34; // [sp+70h] [bp-100h]@202
  int v35; // [sp+74h] [bp-FCh]@202
  int v36; // [sp+78h] [bp-F8h]@202
  int v37; // [sp+7Ch] [bp-F4h]@202
  int v38; // [sp+80h] [bp-F0h]@202
  int v39; // [sp+84h] [bp-ECh]@202
  int v40; // [sp+88h] [bp-E8h]@202
  int v41; // [sp+8Ch] [bp-E4h]@202
  int v42; // [sp+90h] [bp-E0h]@202
  int v43; // [sp+94h] [bp-DCh]@202
  int v44; // [sp+98h] [bp-D8h]@202
  int v45; // [sp+9Ch] [bp-D4h]@202
  int v46; // [sp+A0h] [bp-D0h]@202
  int v47; // [sp+A4h] [bp-CCh]@202
  int v48; // [sp+A8h] [bp-C8h]@202
  int v49; // [sp+ACh] [bp-C4h]@202
  int v50; // [sp+B0h] [bp-C0h]@202
  int v51; // [sp+B4h] [bp-BCh]@202
  int i; // [sp+B8h] [bp-B8h]@87
  int X_Position; // [sp+BCh] [bp-B4h]@89
  int v54; // [sp+C0h] [bp-B0h]@202
  int v55; // [sp+C4h] [bp-ACh]@202
  int v56; // [sp+C8h] [bp-A8h]@202
  int v57; // [sp+CCh] [bp-A4h]@202
  int v58; // [sp+D0h] [bp-A0h]@202
  int v59; // [sp+D4h] [bp-9Ch]@202
  int v60; // [sp+D8h] [bp-98h]@202
  int v61; // [sp+DCh] [bp-94h]@202
  int v62; // [sp+E0h] [bp-90h]@202
  int v63; // [sp+E4h] [bp-8Ch]@202
  int v64; // [sp+E8h] [bp-88h]@202
  int v65; // [sp+ECh] [bp-84h]@202
  int v66; // [sp+F0h] [bp-80h]@202
  int v67; // [sp+F4h] [bp-7Ch]@202
  int v68; // [sp+F8h] [bp-78h]@202
  int v69; // [sp+FCh] [bp-74h]@202
  int v70; // [sp+100h] [bp-70h]@202
  int v71; // [sp+104h] [bp-6Ch]@202
  int v72; // [sp+108h] [bp-68h]@202
  int v73; // [sp+10Ch] [bp-64h]@202
  int v74; // [sp+110h] [bp-60h]@202
  int v75; // [sp+114h] [bp-5Ch]@202
  int v76; // [sp+118h] [bp-58h]@202
  int v77; // [sp+11Ch] [bp-54h]@202
  int v78; // [sp+120h] [bp-50h]@202
  int v79; // [sp+124h] [bp-4Ch]@202
  int v80; // [sp+128h] [bp-48h]@202
  int v81; // [sp+12Ch] [bp-44h]@202
  int v82; // [sp+130h] [bp-40h]@202
  int v83; // [sp+134h] [bp-3Ch]@202
  int v84; // [sp+138h] [bp-38h]@202
  int v85; // [sp+13Ch] [bp-34h]@202
  int v86; // [sp+140h] [bp-30h]@202
  int v87; // [sp+144h] [bp-2Ch]@202
  int v88; // [sp+148h] [bp-28h]@202
  int v89; // [sp+14Ch] [bp-24h]@202
  int v90; // [sp+150h] [bp-20h]@202
  int v91; // [sp+154h] [bp-1Ch]@202
  int v92; // [sp+158h] [bp-18h]@202
  int v93; // [sp+15Ch] [bp-14h]@202
  int v94; // [sp+160h] [bp-10h]@202
  int v95; // [sp+164h] [bp-Ch]@202
  int v96; // [sp+168h] [bp-8h]@202
  int v97; // [sp+16Ch] [bp-4h]@202

  v7 = *(_DWORD *)(a1 + 116);
  if ( v7 > 222 )
  {
    if ( v7 > 310 )
    {
      if ( v7 > 1002 )
      {
        if ( v7 == 1003 )
        {
          if ( ++*(_DWORD *)(a1 + 120) > 30 )
          {
            *(_DWORD *)(a1 + 120) = 0;
            *(_DWORD *)(a1 + 116) = 1004;
            *(_DWORD *)(a1 + 104) = 3;
            *(_DWORD *)(a1 + 20) -= 2560;
            *(_DWORD *)(a1 + 76) = 0;
            *(_WORD *)(a1 + 80) |= 8u;
          }
        }
        else if ( v7 == 1004 )
        {
          if ( *(_DWORD *)(a1 + 12) < 0 )
          {
            *(_DWORD *)(a1 + 16) = 0;
            *(_DWORD *)(a1 + 20) = 0;
            *(_DWORD *)(a1 + 116) = 1005;
            *(_DWORD *)(a1 + 120) = 0;
            Explosion_(0, 0, 2);
            Play_Sound_Effect(29, 1);
          }
          if ( ++*(_DWORD *)(a1 + 120) / 2 % 2 )
            *(_DWORD *)(a1 + 104) = 8;
          else
            *(_DWORD *)(a1 + 104) = 9;
        }
      }
      else if ( v7 == 1002 )
      {
        if ( ++*(_DWORD *)(a1 + 120) > 150 )
        {
          *(_DWORD *)(a1 + 120) = 0;
          *(_DWORD *)(a1 + 116) = 1003;
          *(_DWORD *)(a1 + 104) = 3;
        }
        if ( *(_DWORD *)(a1 + 120) / 2 % 2 )
          *(_DWORD *)(a1 + 8) = *(_DWORD *)(a1 + 32) + 512;
        else
          *(_DWORD *)(a1 + 8) = *(_DWORD *)(a1 + 32) - 512;
      }
      else if ( v7 == 320 )
      {
        *(_DWORD *)(a1 + 16) = 0;
        *(_DWORD *)(a1 + 20) = 0;
        *(_DWORD *)(a1 + 76) = 2;
        if ( ++*(_DWORD *)(a1 + 120) == 40 )
          Explosion_(0, 0, 2);
        if ( *(_DWORD *)(a1 + 120) > 50 && *(_DWORD *)(a1 + 120) % 10 == 1 )
        {
          X_Position = ((4 * *(_DWORD *)(a1 + 120) - 200) / 10 + 2) << 13;
          NPC_Create(333, X_Position, 155648, 0, 0, 0, 0, 256);
        }
        if ( *(_DWORD *)(a1 + 120) > 140 )
          *(_DWORD *)(a1 + 116) = 240;
        if ( ++*(_DWORD *)(a1 + 100) / 2 % 2 )
          *(_DWORD *)(a1 + 104) = 4;
        else
          *(_DWORD *)(a1 + 104) = 5;
      }
      else
      {
        if ( v7 == 1000 )
        {
          *(_DWORD *)(a1 + 116) = 1001;
          *(_DWORD *)(a1 + 120) = 0;
          *(_DWORD *)(a1 + 104) = 10;
          *(_DWORD *)(a1 + 32) = *(_DWORD *)(a1 + 8);
          *(_DWORD *)(a1 + 16) = 0;
          *(_WORD *)(a1 + 80) &= 0xFFDFu;
          sub_46F150(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 16, 16);
          Play_Sound_Effect(72, 1);
        }
        else if ( v7 != 1001 )
        {
          goto LABEL_202;
        }
        *(_DWORD *)(a1 + 20) += 32;
        if ( *(_DWORD *)(a1 + 20) > 1535 )
          *(_DWORD *)(a1 + 20) = 1535;
        if ( ++*(_DWORD *)(a1 + 120) / 2 % 2 )
          *(_DWORD *)(a1 + 8) = *(_DWORD *)(a1 + 32) + 512;
        else
          *(_DWORD *)(a1 + 8) = *(_DWORD *)(a1 + 32) - 512;
        if ( *(_DWORD *)(a1 + 4) & 8 )
        {
          *(_DWORD *)(a1 + 116) = 1002;
          *(_DWORD *)(a1 + 120) = 0;
        }
      }
    }
    else if ( v7 == 310 )
    {
LABEL_141:
      ++*(_DWORD *)(a1 + 100);
      if ( ++*(_DWORD *)(a1 + 120) <= 200 || *(_DWORD *)(a1 + 100) >= 20 )
        *(_DWORD *)(a1 + 76) = 0;
      else
        *(_DWORD *)(a1 + 76) = 2;
      if ( *(_DWORD *)(a1 + 100) / 2 % 2 )
        *(_DWORD *)(a1 + 104) = 4;
      else
        *(_DWORD *)(a1 + 104) = 5;
      if ( *(_DWORD *)(a1 + 8) >= *(_DWORD *)(a1 + 32) )
        *(_DWORD *)(a1 + 16) -= 64;
      else
        *(_DWORD *)(a1 + 16) += 64;
      if ( *(_DWORD *)(a1 + 12) >= *(_DWORD *)(a1 + 36) )
        *(_DWORD *)(a1 + 20) -= 64;
      else
        *(_DWORD *)(a1 + 20) += 64;
      if ( *(_DWORD *)(a1 + 16) > 1024 )
        *(_DWORD *)(a1 + 16) = 1024;
      if ( *(_DWORD *)(a1 + 16) < -1024 )
        *(_DWORD *)(a1 + 16) = -1024;
      if ( *(_DWORD *)(a1 + 20) > 1024 )
        *(_DWORD *)(a1 + 20) = 1024;
      if ( *(_DWORD *)(a1 + 20) < -1024 )
        *(_DWORD *)(a1 + 20) = -1024;
      if ( *(_DWORD *)(a1 + 120) > 200 && *(_DWORD *)(a1 + 120) % 40 == 1 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        NPC_Create(333, Quote_X_Position, 155648, 0, 0, 0, 0, 256);
      }
      if ( *(_DWORD *)(a1 + 120) > 480 )
      {
        *(_DWORD *)(a1 + 116) = 320;
        *(_DWORD *)(a1 + 120) = 0;
      }
    }
    else
    {
      switch ( v7 )
      {
        case 230:
          *(_DWORD *)(a1 + 116) = 231;
          *(_DWORD *)(a1 + 120) = 0;
          *(_DWORD *)(a1 + 104) = 8;
          *(_DWORD *)(a1 + 100) = 0;
          *(_DWORD *)(a1 + 16) = 0;
          *(_DWORD *)(a1 + 164) = 10;
          *(_DWORD *)(a1 + 76) = 2;
          Play_Sound_Effect(25, 1);
          goto LABEL_102;
        case 231:
LABEL_102:
          *(_DWORD *)(a1 + 20) = 2048;
          if ( ++*(_DWORD *)(a1 + 120) / 2 % 2 )
            *(_DWORD *)(a1 + 104) = 8;
          else
            *(_DWORD *)(a1 + 104) = 9;
          if ( *(_DWORD *)(a1 + 4) & 8 )
          {
            *(_DWORD *)(a1 + 116) = 232;
            *(_DWORD *)(a1 + 120) = 0;
            *(_DWORD *)(a1 + 164) = 3;
            if ( Quote_X_Position >= *(_DWORD *)(a1 + 8) )
              *(_DWORD *)(a1 + 76) = 2;
            else
              *(_DWORD *)(a1 + 76) = 0;
            for ( i = 0; i < 8; ++i )
            {
              X_Position = *(_DWORD *)(a1 + 8) + (RNG_Range(-16, 16) << 9);
              NPC_Create(4, X_Position, *(_DWORD *)(a1 + 12) + 5120, 0, 0, 0, 0, 256);
            }
            NPC_Create(332, *(_DWORD *)(a1 + 8) - 6144, *(_DWORD *)(a1 + 12) + 6144, 0, 0, 0, 0, 256);
            NPC_Create(332, *(_DWORD *)(a1 + 8) + 6144, *(_DWORD *)(a1 + 12) + 6144, 0, 0, 2, 0, 256);
            sub_40F320(10);
            Play_Sound_Effect(26, 1);
          }
          if ( *(_DWORD *)(a1 + 108) < 4
            && Quote_Y_Position > *(_DWORD *)(a1 + 12) - 0x2000
            && Quote_Y_Position < *(_DWORD *)(a1 + 12) + 0x2000 )
          {
            *(_DWORD *)(a1 + 116) = 201;
          }
          break;
        case 232:
          ++*(_DWORD *)(a1 + 120);
          *(_DWORD *)(a1 + 16) = 0;
          *(_DWORD *)(a1 + 104) = 3;
          if ( *(_DWORD *)(a1 + 120) > 30 )
          {
            if ( *(_DWORD *)(a1 + 108) <= 3 )
              *(_DWORD *)(a1 + 116) = 201;
            else
              *(_DWORD *)(a1 + 116) = 242;
          }
          break;
        case 240:
          *(_DWORD *)(a1 + 116) = 241;
          *(_DWORD *)(a1 + 76) = 0;
          goto LABEL_124;
        case 241:
LABEL_124:
          *(_DWORD *)(a1 + 20) += 128;
          if ( *(_DWORD *)(a1 + 20) > 1535 )
            *(_DWORD *)(a1 + 20) = 1535;
          if ( ++*(_DWORD *)(a1 + 100) / 2 % 2 )
            *(_DWORD *)(a1 + 104) = 4;
          else
            *(_DWORD *)(a1 + 104) = 5;
          if ( *(_DWORD *)(a1 + 4) & 8 )
          {
            *(_DWORD *)(a1 + 116) = 242;
            *(_DWORD *)(a1 + 120) = 0;
            *(_DWORD *)(a1 + 104) = 3;
            if ( Quote_X_Position >= *(_DWORD *)(a1 + 8) )
              *(_DWORD *)(a1 + 76) = 2;
            else
              *(_DWORD *)(a1 + 76) = 0;
          }
          break;
        case 242:
          *(_DWORD *)(a1 + 16) = 3 * *(_DWORD *)(a1 + 16) / 4;
          *(_DWORD *)(a1 + 104) = 3;
          if ( ++*(_DWORD *)(a1 + 120) > 10 )
            *(_DWORD *)(a1 + 116) = 110;
          break;
        case 300:
          *(_DWORD *)(a1 + 116) = 310;
          *(_DWORD *)(a1 + 120) = 0;
          *(_DWORD *)(a1 + 20) = -1536;
          if ( *(_DWORD *)(a1 + 8) <= 163840 )
          {
            *(_DWORD *)(a1 + 76) = 0;
            *(_DWORD *)(a1 + 32) = Quote_X_Position;
            *(_DWORD *)(a1 + 36) = 90112;
          }
          else
          {
            *(_DWORD *)(a1 + 76) = 2;
            *(_DWORD *)(a1 + 32) = Quote_X_Position;
            *(_DWORD *)(a1 + 36) = 90112;
          }
          *(_DWORD *)(a1 + 100) = 0;
          goto LABEL_141;
        default:
          break;
      }
    }
  }
  else if ( v7 == 222 )
  {
    ++*(_DWORD *)(a1 + 120);
    *(_DWORD *)(a1 + 16) = 0;
    *(_DWORD *)(a1 + 104) = 8;
    if ( *(_DWORD *)(a1 + 120) > 30 )
    {
      if ( *(_DWORD *)(a1 + 108) <= 3 )
        *(_DWORD *)(a1 + 116) = 201;
      else
        *(_DWORD *)(a1 + 116) = 240;
    }
  }
  else
  {
    switch ( v7 )
    {
      case 0:
        *(_DWORD *)(a1 + 116) = 1;
        *(_BYTE *)a1 = -128;
        *(_DWORD *)(a1 + 68) = 1;
        *(_DWORD *)(a1 + 76) = 0;
        *(_DWORD *)(a1 + 12) -= 3072;
        *(_DWORD *)(a1 + 164) = 0;
        NPC_Create(341, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12) - 0x2000, 0, 0, 0, a1, 256);
        break;
      case 10:
        *(_DWORD *)(a1 + 116) = 11;
        *(_DWORD *)(a1 + 120) = 0;
        goto LABEL_18;
      case 11:
LABEL_18:
        if ( ++*(_DWORD *)(a1 + 120) > 100 )
          *(_DWORD *)(a1 + 116) = 100;
        break;
      case 100:
        *(_DWORD *)(a1 + 116) = 110;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 1;
        *(_DWORD *)(a1 + 100) = 0;
        *(_DWORD *)(a1 + 164) = 4;
        *(_WORD *)(a1 + 80) |= 0x20u;
        goto LABEL_22;
      case 110:
LABEL_22:
        *(_DWORD *)(a1 + 116) = 111;
        *(_DWORD *)(a1 + 164) = 3;
        *(_DWORD *)(a1 + 32) = *(_DWORD *)(a1 + 64);
        goto LABEL_23;
      case 111:
LABEL_23:
        if ( ++*(_DWORD *)(a1 + 100) > 10 )
        {
          *(_DWORD *)(a1 + 100) = 0;
          ++*(_DWORD *)(a1 + 104);
        }
        if ( *(_DWORD *)(a1 + 104) > 2 )
          *(_DWORD *)(a1 + 104) = 1;
        ++*(_DWORD *)(a1 + 120);
        if ( *(_DWORD *)(a1 + 64) < *(_DWORD *)(a1 + 32) - 50 || *(_DWORD *)(a1 + 120) > 150 )
        {
          v6 = *(_DWORD *)(a1 + 112) % 5;
          if ( v6 >= 0 )
          {
            if ( v6 <= 3 )
            {
              *(_DWORD *)(a1 + 116) = 200;
            }
            else if ( v6 == 4 )
            {
              *(_DWORD *)(a1 + 116) = 300;
            }
          }
          ++*(_DWORD *)(a1 + 112);
        }
        if ( Quote_X_Position >= *(_DWORD *)(a1 + 8) )
          *(_DWORD *)(a1 + 76) = 2;
        else
          *(_DWORD *)(a1 + 76) = 0;
        break;
      case 200:
        *(_DWORD *)(a1 + 116) = 201;
        *(_DWORD *)(a1 + 108) = 0;
        goto LABEL_41;
      case 201:
LABEL_41:
        if ( *(_DWORD *)(a1 + 16) )
          *(_DWORD *)(a1 + 116) = 203;
        else
          *(_DWORD *)(a1 + 116) = 202;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 3;
        *(_DWORD *)(a1 + 164) = 3;
        ++*(_DWORD *)(a1 + 108);
        goto LABEL_45;
      case 202:
LABEL_45:
        if ( Quote_X_Position >= *(_DWORD *)(a1 + 8) )
          *(_DWORD *)(a1 + 76) = 2;
        else
          *(_DWORD *)(a1 + 76) = 0;
        *(_DWORD *)(a1 + 16) = 8 * *(_DWORD *)(a1 + 16) / 9;
        *(_DWORD *)(a1 + 20) = 8 * *(_DWORD *)(a1 + 20) / 9;
        if ( ++*(_DWORD *)(a1 + 120) > 20 )
          *(_DWORD *)(a1 + 116) = 210;
        break;
      case 203:
        *(_DWORD *)(a1 + 16) = 8 * *(_DWORD *)(a1 + 16) / 9;
        *(_DWORD *)(a1 + 20) = 8 * *(_DWORD *)(a1 + 20) / 9;
        if ( ++*(_DWORD *)(a1 + 120) > 20 )
        {
          if ( Quote_Y_Position >= *(_DWORD *)(a1 + 12) + 6144 )
            *(_DWORD *)(a1 + 116) = 230;
          else
            *(_DWORD *)(a1 + 116) = 220;
        }
        break;
      case 210:
        *(_DWORD *)(a1 + 116) = 211;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 6;
        *(_DWORD *)(a1 + 100) = 0;
        *(_DWORD *)(a1 + 20) = 0;
        *(_DWORD *)(a1 + 164) = 10;
        if ( Quote_X_Position >= *(_DWORD *)(a1 + 8) )
          *(_DWORD *)(a1 + 76) = 2;
        else
          *(_DWORD *)(a1 + 76) = 0;
        Play_Sound_Effect(25, 1);
        goto LABEL_60;
      case 211:
LABEL_60:
        if ( *(_DWORD *)(a1 + 76) )
          *(_DWORD *)(a1 + 16) = 2048;
        else
          *(_DWORD *)(a1 + 16) = -2048;
        if ( ++*(_DWORD *)(a1 + 120) / 2 % 2 )
          *(_DWORD *)(a1 + 104) = 6;
        else
          *(_DWORD *)(a1 + 104) = 7;
        if ( !*(_DWORD *)(a1 + 76) && *(_DWORD *)(a1 + 4) & 1 )
        {
          *(_DWORD *)(a1 + 116) = 212;
          *(_DWORD *)(a1 + 120) = 0;
          *(_DWORD *)(a1 + 164) = 3;
          sub_40F320(10);
          Play_Sound_Effect(26, 1);
        }
        if ( *(_DWORD *)(a1 + 76) == 2 && *(_DWORD *)(a1 + 4) & 4 )
        {
          *(_DWORD *)(a1 + 116) = 212;
          *(_DWORD *)(a1 + 120) = 0;
          *(_DWORD *)(a1 + 164) = 3;
          sub_40F320(10);
          Play_Sound_Effect(26, 1);
        }
        if ( *(_DWORD *)(a1 + 108) < 4
          && Quote_X_Position > *(_DWORD *)(a1 + 8) - 0x2000
          && Quote_X_Position < *(_DWORD *)(a1 + 8) + 0x2000 )
        {
          *(_DWORD *)(a1 + 116) = 201;
        }
        break;
      case 212:
        ++*(_DWORD *)(a1 + 120);
        *(_DWORD *)(a1 + 16) = 0;
        *(_DWORD *)(a1 + 104) = 6;
        if ( *(_DWORD *)(a1 + 120) > 30 )
        {
          if ( *(_DWORD *)(a1 + 108) <= 3 )
            *(_DWORD *)(a1 + 116) = 201;
          else
            *(_DWORD *)(a1 + 116) = 240;
        }
        break;
      case 220:
        *(_DWORD *)(a1 + 116) = 221;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 8;
        *(_DWORD *)(a1 + 100) = 0;
        *(_DWORD *)(a1 + 16) = 0;
        *(_DWORD *)(a1 + 164) = 10;
        *(_DWORD *)(a1 + 76) = 0;
        Play_Sound_Effect(25, 1);
        goto LABEL_83;
      case 221:
LABEL_83:
        *(_DWORD *)(a1 + 20) = -2048;
        if ( ++*(_DWORD *)(a1 + 120) / 2 % 2 )
          *(_DWORD *)(a1 + 104) = 8;
        else
          *(_DWORD *)(a1 + 104) = 9;
        if ( *(_DWORD *)(a1 + 12) < 24576 )
        {
          *(_DWORD *)(a1 + 12) = 24576;
          *(_DWORD *)(a1 + 20) = 0;
          *(_DWORD *)(a1 + 116) = 222;
          *(_DWORD *)(a1 + 120) = 0;
          *(_DWORD *)(a1 + 164) = 3;
          for ( i = 0; i < 8; ++i )
          {
            X_Position = *(_DWORD *)(a1 + 8) + (RNG_Range(-16, 16) << 9);
            NPC_Create(4, X_Position, *(_DWORD *)(a1 + 12) - 5120, 0, 0, 0, 0, 256);
          }
          NPC_Create(332, *(_DWORD *)(a1 + 8) - 6144, *(_DWORD *)(a1 + 12) - 6144, 0, 0, 0, 0, 256);
          NPC_Create(332, *(_DWORD *)(a1 + 8) + 6144, *(_DWORD *)(a1 + 12) - 6144, 0, 0, 2, 0, 256);
          sub_40F320(10);
          Play_Sound_Effect(26, 1);
        }
        if ( *(_DWORD *)(a1 + 108) < 4
          && Quote_Y_Position > *(_DWORD *)(a1 + 12) - 0x2000
          && Quote_Y_Position < *(_DWORD *)(a1 + 12) + 0x2000 )
        {
          *(_DWORD *)(a1 + 116) = 201;
        }
        break;
      default:
        break;
    }
  }
LABEL_202:
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  v54 = 0;
  v55 = 0;
  v56 = 48;
  v57 = 40;
  v58 = 48;
  v59 = 0;
  v60 = 96;
  v61 = 40;
  v62 = 96;
  v63 = 0;
  v64 = 144;
  v65 = 40;
  v66 = 144;
  v67 = 0;
  v68 = 192;
  v69 = 40;
  v70 = 192;
  v71 = 0;
  v72 = 240;
  v73 = 40;
  v74 = 240;
  v75 = 0;
  v76 = 288;
  v77 = 40;
  v78 = 0;
  v79 = 80;
  v80 = 48;
  v81 = 120;
  v82 = 48;
  v83 = 80;
  v84 = 96;
  v85 = 120;
  v86 = 96;
  v87 = 80;
  v88 = 144;
  v89 = 120;
  v90 = 144;
  v91 = 80;
  v92 = 192;
  v93 = 120;
  v94 = 192;
  v95 = 80;
  v96 = 240;
  v97 = 120;
  v8 = 0;
  v9 = 40;
  v10 = 48;
  v11 = 80;
  v12 = 48;
  v13 = 40;
  v14 = 96;
  v15 = 80;
  v16 = 96;
  v17 = 40;
  v18 = 144;
  v19 = 80;
  v20 = 144;
  v21 = 40;
  v22 = 192;
  v23 = 80;
  v24 = 192;
  v25 = 40;
  v26 = 240;
  v27 = 80;
  v28 = 240;
  v29 = 40;
  v30 = 288;
  v31 = 80;
  v32 = 0;
  v33 = 120;
  v34 = 48;
  v35 = 160;
  v36 = 48;
  v37 = 120;
  v38 = 96;
  v39 = 160;
  v40 = 96;
  v41 = 120;
  v42 = 144;
  v43 = 160;
  v44 = 144;
  v45 = 120;
  v46 = 192;
  v47 = 160;
  v48 = 192;
  v49 = 120;
  v50 = 240;
  v51 = 160;
  if ( *(_DWORD *)(a1 + 76) )
  {
    v4 = &v8 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    result = v4[2];
    *(_DWORD *)(v5 + 8) = result;
    *(_DWORD *)(v5 + 12) = v4[3];
  }
  else
  {
    v1 = &v54 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    result = v1[2];
    *(_DWORD *)(v2 + 8) = result;
    *(_DWORD *)(v2 + 12) = v1[3];
  }
  return result;
}

//----- (0046B240) --------------------------------------------------------
int __cdecl NPC341(int a1)
{
  int *v1; // eax@9
  int v2; // ecx@9
  int result; // eax@9
  int v4; // [sp+0h] [bp-30h]@1
  int v5; // [sp+4h] [bp-2Ch]@1
  int v6; // [sp+8h] [bp-28h]@1
  int v7; // [sp+Ch] [bp-24h]@1
  int v8; // [sp+10h] [bp-20h]@1
  int v9; // [sp+14h] [bp-1Ch]@1
  int v10; // [sp+18h] [bp-18h]@1
  int v11; // [sp+1Ch] [bp-14h]@1
  int v12; // [sp+20h] [bp-10h]@1
  int v13; // [sp+24h] [bp-Ch]@1
  int v14; // [sp+28h] [bp-8h]@1
  int v15; // [sp+2Ch] [bp-4h]@1

  v4 = 288;
  v5 = 32;
  v6 = 320;
  v7 = 48;
  v8 = 288;
  v9 = 48;
  v10 = 320;
  v11 = 64;
  v12 = 288;
  v13 = 64;
  v14 = 320;
  v15 = 80;
  if ( *(_DWORD *)(*(_DWORD *)(a1 + 168) + 116) == 11 && *(_DWORD *)(*(_DWORD *)(a1 + 168) + 120) > 50 )
    ++*(_DWORD *)(a1 + 100);
  if ( *(_DWORD *)(a1 + 100) > 4 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    if ( *(_DWORD *)(a1 + 104) < 2 )
      ++*(_DWORD *)(a1 + 104);
  }
  if ( *(_DWORD *)(*(_DWORD *)(a1 + 168) + 104) )
    *(_BYTE *)a1 = 0;
  v1 = &v4 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  *(_DWORD *)(v2 + 8) = v1[2];
  result = v1[3];
  *(_DWORD *)(v2 + 12) = result;
  return result;
}

//----- (0046B340) --------------------------------------------------------
int __cdecl NPC342(void *a1)
{
  int result; // eax@89
  int v2; // esi@105
  int v3; // esi@105
  int *v4; // eax@106
  char *v5; // ecx@106
  signed int v6; // [sp+8h] [bp-38h]@4
  int v7; // [sp+Ch] [bp-34h]@1
  int v8; // [sp+10h] [bp-30h]@1
  int v9; // [sp+14h] [bp-2Ch]@1
  int v10; // [sp+18h] [bp-28h]@1
  int v11; // [sp+1Ch] [bp-24h]@1
  int v12; // [sp+20h] [bp-20h]@1
  int v13; // [sp+24h] [bp-1Ch]@1
  int v14; // [sp+28h] [bp-18h]@1
  int v15; // [sp+2Ch] [bp-14h]@1
  int v16; // [sp+30h] [bp-10h]@1
  int v17; // [sp+34h] [bp-Ch]@1
  int v18; // [sp+38h] [bp-8h]@1
  char v19; // [sp+3Fh] [bp-1h]@105

  v7 = 240;
  v8 = 48;
  v9 = 280;
  v10 = 88;
  v11 = 240;
  v12 = 88;
  v13 = 280;
  v14 = 128;
  v15 = 280;
  v16 = 48;
  v17 = 320;
  v18 = 88;
  if ( *((_DWORD *)a1 + 29) < 1000 && *(_DWORD *)(*((_DWORD *)a1 + 42) + 116) >= 1000 )
    *((_DWORD *)a1 + 29) = 1000;
  v6 = *((_DWORD *)a1 + 29);
  if ( v6 <= 23 )
  {
    if ( v6 == 23 )
    {
      *((_DWORD *)a1 + 26) = 2;
      *((_DWORD *)a1 + 27) -= 4;
      if ( *((_DWORD *)a1 + 27) < 0 )
        *((_DWORD *)a1 + 27) += 512;
      if ( *(_DWORD *)(*((_DWORD *)a1 + 42) + 116) == 420 )
        *((_DWORD *)a1 + 29) = 30;
    }
    else
    {
      switch ( v6 )
      {
        case 0:
          *((_DWORD *)a1 + 29) = 10;
          *((_DWORD *)a1 + 27) = 2 * (*((_DWORD *)a1 + 19) & 0xFF);
          *((_DWORD *)a1 + 19) >>= 8;
          *((_DWORD *)a1 + 28) = 192;
          *((_DWORD *)a1 + 41) = 14;
          goto LABEL_17;
        case 10:
LABEL_17:
          if ( *((_DWORD *)a1 + 28) >= 320 )
            *((_DWORD *)a1 + 29) = 11;
          else
            *((_DWORD *)a1 + 28) += 8;
          goto LABEL_90;
        case 11:
          if ( *((_DWORD *)a1 + 28) <= 304 )
            *((_DWORD *)a1 + 29) = 12;
          else
            *((_DWORD *)a1 + 28) -= 4;
          goto LABEL_90;
        case 12:
          if ( *(_DWORD *)(*((_DWORD *)a1 + 42) + 116) == 311 )
            *((_DWORD *)a1 + 29) = 20;
          goto LABEL_90;
        case 20:
          *((_DWORD *)a1 + 29) = 21;
          *((_WORD *)a1 + 40) |= 0x20u;
          *((_DWORD *)a1 + 16) = 1000;
          goto LABEL_29;
        case 21:
LABEL_29:
          *((_DWORD *)a1 + 27) -= 2;
          if ( *((_DWORD *)a1 + 27) < 0 )
            *((_DWORD *)a1 + 27) += 512;
          if ( *((_BYTE *)a1 + 156) )
          {
            if ( ++dword_4A6218 / 2 % 2 )
              *((_DWORD *)a1 + 26) = 1;
            else
              *((_DWORD *)a1 + 26) = 0;
          }
          else
          {
            *((_DWORD *)a1 + 26) = 0;
          }
          if ( *((_DWORD *)a1 + 16) < 900 )
          {
            *((_DWORD *)a1 + 29) = 22;
            *((_WORD *)a1 + 40) &= 0xFFDFu;
            sub_46F150(*((_DWORD *)a1 + 2), *((_DWORD *)a1 + 3), 0x2000, 32);
            Play_Sound_Effect(71, 1);
          }
          *(_DWORD *)(*((_DWORD *)a1 + 42) + 108) = 4;
          if ( *(_DWORD *)(*((_DWORD *)a1 + 42) + 116) == 401 )
            *((_DWORD *)a1 + 29) = 23;
          break;
        case 22:
          *((_DWORD *)a1 + 26) = 2;
          *((_DWORD *)a1 + 27) -= 2;
          if ( *((_DWORD *)a1 + 27) < 0 )
            *((_DWORD *)a1 + 27) += 512;
          if ( *(_DWORD *)(*((_DWORD *)a1 + 42) + 116) == 401 )
            *((_DWORD *)a1 + 29) = 23;
          break;
        default:
          goto LABEL_90;
      }
    }
    goto LABEL_90;
  }
  if ( v6 <= 41 )
  {
    if ( v6 == 41 )
      goto LABEL_70;
    if ( v6 == 30 )
    {
      *((_DWORD *)a1 + 29) = 31;
      *((_DWORD *)a1 + 16) = 1000;
      *((_DWORD *)a1 + 41) = 10;
      if ( !*((_DWORD *)a1 + 19) )
        *((_WORD *)a1 + 40) |= 0x20u;
      *((_DWORD *)a1 + 5) = 0;
    }
    else if ( v6 != 31 )
    {
      if ( v6 != 40 )
        goto LABEL_90;
      *((_DWORD *)a1 + 29) = 41;
      *((_DWORD *)a1 + 4) = 0;
      *((_DWORD *)a1 + 5) = 0;
      *((_DWORD *)a1 + 26) = 2;
      *((_DWORD *)a1 + 41) = 5;
      *((_WORD *)a1 + 40) &= 0xFFD7u;
      sub_46F150(*((_DWORD *)a1 + 2), *((_DWORD *)a1 + 3), 0x2000, 32);
      Play_Sound_Effect(71, 1);
LABEL_70:
      if ( *((_DWORD *)a1 + 1) & 1 )
        *((_DWORD *)a1 + 4) = 256;
      if ( *((_DWORD *)a1 + 1) & 4 )
        *((_DWORD *)a1 + 4) = -256;
      if ( *((_DWORD *)a1 + 1) & 8 )
      {
        if ( !*((_DWORD *)a1 + 4) )
        {
          if ( Quote_X_Position >= *((_DWORD *)a1 + 2) )
            *((_DWORD *)a1 + 4) = -256;
          else
            *((_DWORD *)a1 + 4) = 256;
        }
        *((_DWORD *)a1 + 5) = -2048;
        Play_Sound_Effect(26, 1);
      }
      *((_DWORD *)a1 + 5) += 32;
      if ( *((_DWORD *)a1 + 5) > 1535 )
        *((_DWORD *)a1 + 5) = 1535;
      goto LABEL_90;
    }
    ++*((_DWORD *)a1 + 27);
    *((_DWORD *)a1 + 27) %= 512;
    if ( *((_DWORD *)a1 + 28) > 256 )
      --*((_DWORD *)a1 + 28);
    if ( *((_WORD *)a1 + 40) & 0x20 )
    {
      if ( *((_BYTE *)a1 + 156) )
      {
        if ( ++dword_4A6218 / 2 % 2 )
          *((_DWORD *)a1 + 26) = 1;
        else
          *((_DWORD *)a1 + 26) = 0;
      }
      else
      {
        *((_DWORD *)a1 + 26) = 0;
      }
    }
    else
    {
      *((_DWORD *)a1 + 26) = 2;
    }
    if ( *((_DWORD *)a1 + 16) < 900 )
      *((_DWORD *)a1 + 29) = 40;
    goto LABEL_90;
  }
  if ( v6 == 1000 )
  {
    *((_DWORD *)a1 + 29) = 1001;
    *((_DWORD *)a1 + 4) = 0;
    *((_DWORD *)a1 + 5) = 0;
    *((_DWORD *)a1 + 26) = 2;
    *((_WORD *)a1 + 40) &= 0xFFD7u;
    *((_DWORD *)a1 + 41) = 0;
    *((_DWORD *)a1 + 27) /= 4;
    *((_DWORD *)a1 + 17) = 0;
  }
  else if ( v6 != 1001 )
  {
    goto LABEL_90;
  }
  if ( *((_DWORD *)a1 + 27) <= 0 )
  {
    sub_46F150(*((_DWORD *)a1 + 2), *((_DWORD *)a1 + 3), 0x2000, 32);
    Play_Sound_Effect(71, 1);
    return sub_46F760(a1);
  }
  if ( --*((_DWORD *)a1 + 27) / 2 % 2 )
    *((_DWORD *)a1 + 26) = 1;
  else
    *((_DWORD *)a1 + 26) = 0;
LABEL_90:
  if ( *((_DWORD *)a1 + 29) == 21 || *((_DWORD *)a1 + 29) == 22 )
  {
    switch ( *(_DWORD *)(*((_DWORD *)a1 + 42) + 76) )
    {
      case 0:
        if ( *((_DWORD *)a1 + 27) == 140 )
        {
          NPC_Create(4, *((_DWORD *)a1 + 2) + 4096, *((_DWORD *)a1 + 3) + 6144, 0, 0, 0, 0, 256);
          NPC_Create(4, *((_DWORD *)a1 + 2) - 4096, *((_DWORD *)a1 + 3) + 6144, 0, 0, 0, 0, 256);
          Play_Sound_Effect(26, 1);
        }
        break;
      case 1:
        if ( *((_DWORD *)a1 + 27) == 268 )
        {
          NPC_Create(4, *((_DWORD *)a1 + 2) - 6144, *((_DWORD *)a1 + 3) + 4096, 0, 0, 0, 0, 256);
          NPC_Create(4, *((_DWORD *)a1 + 2) - 6144, *((_DWORD *)a1 + 3) - 4096, 0, 0, 0, 0, 256);
          Play_Sound_Effect(26, 1);
        }
        break;
      case 2:
        if ( *((_DWORD *)a1 + 27) == 396 )
        {
          NPC_Create(4, *((_DWORD *)a1 + 2) + 4096, *((_DWORD *)a1 + 3) - 6144, 0, 0, 0, 0, 256);
          NPC_Create(4, *((_DWORD *)a1 + 2) - 4096, *((_DWORD *)a1 + 3) - 6144, 0, 0, 0, 0, 256);
          NPC_Create(345, *((_DWORD *)a1 + 2) - 4096, *((_DWORD *)a1 + 3) - 6144, 0, 0, 0, 0, 256);
          Play_Sound_Effect(26, 1);
        }
        break;
      case 3:
        if ( *((_DWORD *)a1 + 27) == 12 )
        {
          NPC_Create(4, *((_DWORD *)a1 + 2) + 6144, *((_DWORD *)a1 + 3) + 4096, 0, 0, 0, 0, 256);
          NPC_Create(4, *((_DWORD *)a1 + 2) + 6144, *((_DWORD *)a1 + 3) - 4096, 0, 0, 0, 0, 256);
          Play_Sound_Effect(26, 1);
        }
        break;
      default:
        break;
    }
  }
  if ( *((_DWORD *)a1 + 29) < 40 )
  {
    v19 = *((_DWORD *)a1 + 27) / 2;
    v2 = *((_DWORD *)a1 + 42);
    *((_DWORD *)a1 + 8) = *(_DWORD *)(v2 + 8) + *((_DWORD *)a1 + 28) * COS_function(v19) / 4;
    v3 = *((_DWORD *)a1 + 42);
    *((_DWORD *)a1 + 9) = *(_DWORD *)(v3 + 12) + *((_DWORD *)a1 + 28) * SIN_function(v19) / 4;
    *((_DWORD *)a1 + 4) = *((_DWORD *)a1 + 8) - *((_DWORD *)a1 + 2);
    *((_DWORD *)a1 + 5) = *((_DWORD *)a1 + 9) - *((_DWORD *)a1 + 3);
  }
  *((_DWORD *)a1 + 2) += *((_DWORD *)a1 + 4);
  *((_DWORD *)a1 + 3) += *((_DWORD *)a1 + 5);
  v4 = &v7 + 4 * *((_DWORD *)a1 + 26);
  v5 = (char *)a1 + 84;
  *(_DWORD *)v5 = *v4;
  *((_DWORD *)v5 + 1) = v4[1];
  *((_DWORD *)v5 + 2) = v4[2];
  result = v4[3];
  *((_DWORD *)v5 + 3) = result;
  return result;
}
// 4A6218: using guessed type int dword_4A6218;

//----- (0046BD80) --------------------------------------------------------
int __cdecl NPC343(int a1)
{
  int v1; // eax@1
  int result; // eax@3

  v1 = a1 + 84;
  *(_DWORD *)v1 = 0;
  *(_DWORD *)(v1 + 4) = 0;
  *(_DWORD *)(v1 + 8) = 120;
  *(_DWORD *)(v1 + 12) = 120;
  if ( ++*(_DWORD *)(a1 + 120) > 100 )
    *(_BYTE *)a1 = 0;
  *(_DWORD *)(a1 + 8) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 8);
  result = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 12);
  *(_DWORD *)(a1 + 12) = result;
  return result;
}

//----- (0046BE10) --------------------------------------------------------
int __cdecl NPC344(int a1)
{
  int v1; // ecx@2
  int v2; // edx@3
  int result; // eax@6

  if ( *(_DWORD *)(a1 + 76) )
  {
    v2 = a1 + 84;
    *(_DWORD *)v2 = 296;
    *(_DWORD *)(v2 + 4) = 0;
    *(_DWORD *)(v2 + 8) = 320;
    *(_DWORD *)(v2 + 12) = 16;
    *(_DWORD *)(a1 + 8) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 8) + 12288;
  }
  else
  {
    v1 = a1 + 84;
    *(_DWORD *)v1 = 272;
    *(_DWORD *)(v1 + 4) = 0;
    *(_DWORD *)(v1 + 8) = 296;
    *(_DWORD *)(v1 + 12) = 16;
    *(_DWORD *)(a1 + 8) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 8) - 12288;
  }
  if ( ++*(_DWORD *)(a1 + 120) > 100 )
    *(_BYTE *)a1 = 0;
  result = *(_DWORD *)(a1 + 168);
  *(_DWORD *)(a1 + 12) = *(_DWORD *)(result + 12) - 18432;
  return result;
}

//----- (0046BF00) --------------------------------------------------------
int __cdecl NPC345(int a1)
{
  int v1; // eax@10
  int v2; // ST10_4@15
  int v3; // ST0C_4@15
  int v4; // ST08_4@15
  int v5; // eax@15
  int result; // eax@17
  int *v7; // eax@23
  int v8; // ecx@23
  int v9; // [sp+0h] [bp-48h]@1
  signed int i; // [sp+4h] [bp-44h]@13
  int v11; // [sp+8h] [bp-40h]@1
  int v12; // [sp+Ch] [bp-3Ch]@1
  int v13; // [sp+10h] [bp-38h]@1
  int v14; // [sp+14h] [bp-34h]@1
  int v15; // [sp+18h] [bp-30h]@1
  int v16; // [sp+1Ch] [bp-2Ch]@1
  int v17; // [sp+20h] [bp-28h]@1
  int v18; // [sp+24h] [bp-24h]@1
  int v19; // [sp+28h] [bp-20h]@1
  int v20; // [sp+2Ch] [bp-1Ch]@1
  int v21; // [sp+30h] [bp-18h]@1
  int v22; // [sp+34h] [bp-14h]@1
  int v23; // [sp+38h] [bp-10h]@1
  int v24; // [sp+3Ch] [bp-Ch]@1
  int v25; // [sp+40h] [bp-8h]@1
  int v26; // [sp+44h] [bp-4h]@1

  v11 = 128;
  v12 = 176;
  v13 = 144;
  v14 = 192;
  v15 = 144;
  v16 = 176;
  v17 = 160;
  v18 = 192;
  v19 = 160;
  v20 = 176;
  v21 = 176;
  v22 = 192;
  v23 = 176;
  v24 = 176;
  v25 = 192;
  v26 = 192;
  v9 = *(_DWORD *)(a1 + 116);
  if ( !v9 )
  {
    *(_DWORD *)(a1 + 116) = 100;
    *(_DWORD *)(a1 + 104) = RNG_Range(0, 16) % 4;
    goto LABEL_6;
  }
  if ( v9 == 100 )
  {
LABEL_6:
    *(_DWORD *)(a1 + 20) += 64;
    if ( *(_DWORD *)(a1 + 20) > 1792 )
      *(_DWORD *)(a1 + 20) = 1792;
    if ( *(_DWORD *)(a1 + 12) > 0x10000 )
      *(_WORD *)(a1 + 80) &= 0xFFF7u;
    v1 = (*(_DWORD *)(a1 + 120))++ / 2 % 2;
    if ( v1 )
      NPC_Create(4, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 0, 0, 0, 0, 256);
    if ( *(_DWORD *)(a1 + 4) & 8 )
    {
      *(_DWORD *)(a1 + 20) = -512;
      *(_DWORD *)(a1 + 116) = 110;
      *(_WORD *)(a1 + 80) |= 8u;
      Play_Sound_Effect(12, 1);
      sub_40F310(10);
      for ( i = 0; i < 4; ++i )
      {
        v2 = RNG_Range(-1536, 0);
        v3 = RNG_Range(-341, 341);
        v4 = *(_DWORD *)(a1 + 12) + 0x2000;
        v5 = RNG_Range(-12, 12);
        NPC_Create(4, *(_DWORD *)(a1 + 8) + (v5 << 9), v4, v3, v2, 0, 0, 256);
      }
    }
    goto LABEL_19;
  }
  if ( v9 == 110 )
  {
    *(_DWORD *)(a1 + 20) += 64;
    result = a1;
    if ( *(_DWORD *)(a1 + 12) > (*(signed __int16 *)&word_49E588 << 13) + 0x4000 )
    {
      *(_BYTE *)a1 = 0;
      return result;
    }
  }
LABEL_19:
  if ( ++*(_DWORD *)(a1 + 100) > 8 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    ++*(_DWORD *)(a1 + 104);
  }
  if ( *(_DWORD *)(a1 + 104) > 3 )
    *(_DWORD *)(a1 + 104) = 0;
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  v7 = &v11 + 4 * *(_DWORD *)(a1 + 104);
  v8 = a1 + 84;
  *(_DWORD *)v8 = *v7;
  *(_DWORD *)(v8 + 4) = v7[1];
  *(_DWORD *)(v8 + 8) = v7[2];
  result = v7[3];
  *(_DWORD *)(v8 + 12) = result;
  return result;
}

//----- (0046C1D0) --------------------------------------------------------
int __cdecl NPC346(int a1)
{
  char v1; // ST1F_1@55
  int v2; // esi@55
  int v3; // esi@55
  __int64 v4; // rax@58
  __int64 v5; // rax@63
  int result; // eax@67
  signed int v7; // [sp+4h] [bp-18h]@4

  if ( *(_DWORD *)(a1 + 116) < 1000 && *(_DWORD *)(*(_DWORD *)(a1 + 168) + 116) >= 1000 )
    *(_DWORD *)(a1 + 116) = 1000;
  v7 = *(_DWORD *)(a1 + 116);
  if ( v7 <= 40 )
  {
    if ( v7 == 40 )
    {
      *(_DWORD *)(a1 + 108) -= 2;
      if ( *(_DWORD *)(a1 + 108) < 0 )
        *(_DWORD *)(a1 + 108) += 1024;
      if ( *(_DWORD *)(*(_DWORD *)(a1 + 168) + 116) == 422 )
        *(_DWORD *)(a1 + 116) = 20;
    }
    else
    {
      switch ( v7 )
      {
        case 0:
          *(_DWORD *)(a1 + 116) = 10;
          *(_DWORD *)(a1 + 108) = 4 * *(_DWORD *)(a1 + 76);
          *(_DWORD *)(a1 + 112) = 192;
          *(_DWORD *)(a1 + 104) = 0;
          goto LABEL_15;
        case 10:
LABEL_15:
          if ( *(_DWORD *)(a1 + 112) >= 448 )
            *(_DWORD *)(a1 + 116) = 11;
          else
            *(_DWORD *)(a1 + 112) += 8;
          break;
        case 11:
          if ( *(_DWORD *)(*(_DWORD *)(a1 + 168) + 116) == 411 )
            *(_DWORD *)(a1 + 116) = 20;
          break;
        case 20:
          if ( --*(_DWORD *)(a1 + 108) < 0 )
            *(_DWORD *)(a1 + 108) += 1024;
          if ( *(_DWORD *)(*(_DWORD *)(a1 + 168) + 116) == 421 )
            *(_DWORD *)(a1 + 116) = 40;
          if ( *(_DWORD *)(*(_DWORD *)(a1 + 168) + 116) == 423 )
            *(_DWORD *)(a1 + 116) = 100;
          break;
        case 30:
          ++*(_DWORD *)(a1 + 108);
          *(_DWORD *)(a1 + 108) %= 1024;
          if ( *(_DWORD *)(*(_DWORD *)(a1 + 168) + 116) == 425 )
            *(_DWORD *)(a1 + 116) = 50;
          if ( *(_DWORD *)(*(_DWORD *)(a1 + 168) + 116) == 427 )
            *(_DWORD *)(a1 + 116) = 100;
          break;
        default:
          goto LABEL_50;
      }
    }
    goto LABEL_50;
  }
  if ( v7 > 1000 )
  {
    if ( v7 != 1001 )
      goto LABEL_50;
  }
  else
  {
    if ( v7 != 1000 )
    {
      if ( v7 == 50 )
      {
        *(_DWORD *)(a1 + 108) += 2;
        *(_DWORD *)(a1 + 108) %= 1024;
        if ( *(_DWORD *)(*(_DWORD *)(a1 + 168) + 116) == 426 )
          *(_DWORD *)(a1 + 116) = 30;
      }
      else if ( v7 == 100 )
      {
        *(_DWORD *)(a1 + 104) = 0;
        if ( *(_DWORD *)(*(_DWORD *)(a1 + 168) + 116) == 424 )
          *(_DWORD *)(a1 + 116) = 30;
        if ( *(_DWORD *)(*(_DWORD *)(a1 + 168) + 116) == 428 )
          *(_DWORD *)(a1 + 116) = 20;
      }
      goto LABEL_50;
    }
    *(_DWORD *)(a1 + 116) = 1001;
    *(_DWORD *)(a1 + 16) = 0;
    *(_DWORD *)(a1 + 20) = 0;
    *(_WORD *)(a1 + 80) &= 0xFFBFu;
  }
  *(_DWORD *)(a1 + 20) += 64;
  if ( *(_DWORD *)(a1 + 12) > *(signed __int16 *)&word_49E588 << 13 )
    *(_BYTE *)a1 = 0;
LABEL_50:
  if ( *(_DWORD *)(a1 + 116) < 1000 )
  {
    if ( Quote_Y_Position <= *(_DWORD *)(a1 + 12) - 4096 || Quote_Y_Velocity >= 0 )
      *(_WORD *)(a1 + 80) |= 0x40u;
    else
      *(_WORD *)(a1 + 80) &= 0xFFBFu;
    v1 = *(_DWORD *)(a1 + 108) / 4;
    v2 = *(_DWORD *)(a1 + 168);
    *(_DWORD *)(a1 + 32) = *(_DWORD *)(v2 + 8) + *(_DWORD *)(a1 + 112) * COS_function(v1) / 4;
    v3 = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 12);
    *(_DWORD *)(a1 + 36) = v3 + *(_DWORD *)(a1 + 112) * SIN_function(v1) / 4 + 0x2000;
    *(_DWORD *)(a1 + 16) = *(_DWORD *)(a1 + 32) - *(_DWORD *)(a1 + 8);
    if ( *(_DWORD *)(a1 + 116) != 20 && *(_DWORD *)(a1 + 116) != 30 )
    {
      if ( *(_DWORD *)(a1 + 116) != 40 && *(_DWORD *)(a1 + 116) != 50 )
      {
        *(_DWORD *)(a1 + 104) = *(_DWORD *)(a1 + 36) - *(_DWORD *)(a1 + 12);
      }
      else if ( !(*(_DWORD *)(a1 + 108) / 2 % 2) )
      {
        v5 = *(_DWORD *)(a1 + 36) - *(_DWORD *)(a1 + 12);
        *(_DWORD *)(a1 + 104) = ((signed int)v5 - HIDWORD(v5)) >> 1;
      }
    }
    else if ( !(*(_DWORD *)(a1 + 108) % 4) )
    {
      v4 = *(_DWORD *)(a1 + 36) - *(_DWORD *)(a1 + 12);
      *(_DWORD *)(a1 + 104) = ((BYTE4(v4) & 3) + (signed int)v4) >> 2;
    }
    *(_DWORD *)(a1 + 20) = *(_DWORD *)(a1 + 104);
  }
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
  result = a1 + 84;
  *(_DWORD *)result = 240;
  *(_DWORD *)(result + 4) = 0;
  *(_DWORD *)(result + 8) = 272;
  *(_DWORD *)(result + 12) = 16;
  return result;
}
// 49E670: using guessed type int Quote_Y_Velocity;

//----- (0046C710) --------------------------------------------------------
int __cdecl NPC347(int a1)
{
  int *v1; // eax@26
  int v2; // ecx@26
  int result; // eax@26
  int v4; // [sp+4h] [bp-40h]@26
  int v5; // [sp+8h] [bp-3Ch]@26
  int v6; // [sp+Ch] [bp-38h]@26
  int v7; // [sp+10h] [bp-34h]@26
  int v8; // [sp+14h] [bp-30h]@26
  int v9; // [sp+18h] [bp-2Ch]@26
  int v10; // [sp+1Ch] [bp-28h]@26
  int v11; // [sp+20h] [bp-24h]@26
  int v12; // [sp+24h] [bp-20h]@26
  int v13; // [sp+28h] [bp-1Ch]@26
  int v14; // [sp+2Ch] [bp-18h]@26
  int v15; // [sp+30h] [bp-14h]@26
  int v16; // [sp+34h] [bp-10h]@26
  int v17; // [sp+38h] [bp-Ch]@26
  int v18; // [sp+3Ch] [bp-8h]@26
  int v19; // [sp+40h] [bp-4h]@26

  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      goto LABEL_3;
    case 1:
LABEL_3:
      *(_DWORD *)(a1 + 104) = 0;
      if ( Quote_Y_Position < *(_DWORD *)(a1 + 12) + 0x10000 && Quote_Y_Position > *(_DWORD *)(a1 + 12) - 0x10000 )
      {
        *(_DWORD *)(a1 + 116) = 10;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 1;
      }
      break;
    case 0xA:
      if ( ++*(_DWORD *)(a1 + 120) == 4 )
        *(_DWORD *)(a1 + 104) = 2;
      if ( *(_DWORD *)(a1 + 120) > 12 )
      {
        *(_DWORD *)(a1 + 116) = 12;
        *(_DWORD *)(a1 + 16) = 1792;
        Play_Sound_Effect(6, 1);
        *(_DWORD *)(a1 + 104) = 3;
      }
      break;
    case 0xC:
      if ( Quote_Y_Position >= *(_DWORD *)(a1 + 12) )
        *(_DWORD *)(a1 + 20) = 170;
      else
        *(_DWORD *)(a1 + 20) = -170;
      if ( *(_DWORD *)(a1 + 4) & 1 )
      {
        *(_DWORD *)(a1 + 116) = 13;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 2;
        *(_DWORD *)(a1 + 16) = 0;
        *(_DWORD *)(a1 + 20) = 0;
      }
      else
      {
        *(_DWORD *)(a1 + 16) -= 42;
        if ( *(_DWORD *)(a1 + 16) < -1535 )
          *(_DWORD *)(a1 + 16) = -1535;
        *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
        *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
      }
      break;
    case 0xD:
      if ( ++*(_DWORD *)(a1 + 120) == 2 )
        *(_DWORD *)(a1 + 104) = 1;
      if ( *(_DWORD *)(a1 + 120) == 6 )
        *(_DWORD *)(a1 + 104) = 0;
      if ( *(_DWORD *)(a1 + 120) > 16 )
        *(_DWORD *)(a1 + 116) = 1;
      break;
    default:
      break;
  }
  v4 = 256;
  v5 = 48;
  v6 = 272;
  v7 = 64;
  v8 = 272;
  v9 = 48;
  v10 = 288;
  v11 = 64;
  v12 = 288;
  v13 = 48;
  v14 = 304;
  v15 = 64;
  v16 = 304;
  v17 = 48;
  v18 = 320;
  v19 = 64;
  v1 = &v4 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  *(_DWORD *)(v2 + 8) = v1[2];
  result = v1[3];
  *(_DWORD *)(v2 + 12) = result;
  return result;
}

//----- (0046C9B0) --------------------------------------------------------
int __cdecl NPC348(int a1)
{
  int *v1; // eax@11
  int v2; // ecx@11
  int result; // eax@11
  int v4; // [sp+0h] [bp-24h]@1
  int v5; // [sp+4h] [bp-20h]@1
  int v6; // [sp+8h] [bp-1Ch]@1
  int v7; // [sp+Ch] [bp-18h]@1
  int v8; // [sp+10h] [bp-14h]@1
  int v9; // [sp+14h] [bp-10h]@1
  int v10; // [sp+18h] [bp-Ch]@1
  int v11; // [sp+1Ch] [bp-8h]@1
  int v12; // [sp+20h] [bp-4h]@1

  v5 = 128;
  v6 = 152;
  v7 = 160;
  v8 = 176;
  v9 = 160;
  v10 = 152;
  v11 = 192;
  v12 = 176;
  v4 = *(_DWORD *)(a1 + 116);
  if ( v4 )
  {
    if ( v4 != 1 )
      goto LABEL_11;
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 1;
  }
  if ( ++*(_DWORD *)(a1 + 120) >= 128 )
  {
    *(_DWORD *)(a1 + 116) = 10;
    *(_DWORD *)(a1 + 104) = 0;
    *(_DWORD *)(a1 + 164) = 2;
  }
  else
  {
    *(_DWORD *)(a1 + 12) -= 128;
    if ( *(_DWORD *)(a1 + 120) / 2 % 2 )
      *(_DWORD *)(a1 + 104) = 1;
    else
      *(_DWORD *)(a1 + 104) = 0;
  }
LABEL_11:
  v1 = &v5 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  *(_DWORD *)(v2 + 8) = v1[2];
  result = v1[3];
  *(_DWORD *)(v2 + 12) = result;
  return result;
}

//----- (0046CAC0) --------------------------------------------------------
signed int __cdecl NPC349(int a1)
{
  int v1; // ecx@6
  signed int result; // eax@6

  if ( !*(_DWORD *)(a1 + 116) )
  {
    *(_DWORD *)(a1 + 116) = 1;
    if ( !*(_DWORD *)(a1 + 76) )
      *(_DWORD *)(a1 + 8) += 4096;
    if ( *(_DWORD *)(a1 + 76) == 2 )
      *(_DWORD *)(a1 + 12) += 0x2000;
  }
  v1 = a1 + 84;
  *(_DWORD *)v1 = 0;
  *(_DWORD *)(v1 + 4) = 0;
  *(_DWORD *)(v1 + 8) = 16;
  result = 16;
  *(_DWORD *)(v1 + 12) = 16;
  return result;
}

//----- (0046CB50) --------------------------------------------------------
int __cdecl NPC350(void *a1)
{
  int result; // eax@52
  int *v2; // ecx@71
  char *v3; // edx@71
  int *v4; // ecx@72
  char *v5; // edx@72
  int v6; // [sp+4h] [bp-E0h]@1
  int v7; // [sp+8h] [bp-DCh]@1
  int v8; // [sp+Ch] [bp-D8h]@1
  int v9; // [sp+10h] [bp-D4h]@1
  int v10; // [sp+14h] [bp-D0h]@1
  int v11; // [sp+18h] [bp-CCh]@1
  int v12; // [sp+1Ch] [bp-C8h]@1
  int v13; // [sp+20h] [bp-C4h]@1
  int v14; // [sp+24h] [bp-C0h]@1
  int v15; // [sp+28h] [bp-BCh]@1
  int v16; // [sp+2Ch] [bp-B8h]@1
  int v17; // [sp+30h] [bp-B4h]@1
  int v18; // [sp+34h] [bp-B0h]@1
  int v19; // [sp+38h] [bp-ACh]@1
  int v20; // [sp+3Ch] [bp-A8h]@1
  int v21; // [sp+40h] [bp-A4h]@1
  int v22; // [sp+44h] [bp-A0h]@1
  int v23; // [sp+48h] [bp-9Ch]@1
  int v24; // [sp+4Ch] [bp-98h]@1
  int v25; // [sp+50h] [bp-94h]@1
  int v26; // [sp+54h] [bp-90h]@1
  int v27; // [sp+58h] [bp-8Ch]@1
  int v28; // [sp+5Ch] [bp-88h]@1
  int v29; // [sp+60h] [bp-84h]@1
  int v30; // [sp+64h] [bp-80h]@1
  int v31; // [sp+68h] [bp-7Ch]@1
  int v32; // [sp+6Ch] [bp-78h]@1
  int v33; // [sp+70h] [bp-74h]@1
  int v34; // [sp+74h] [bp-70h]@1
  int v35; // [sp+78h] [bp-6Ch]@1
  int v36; // [sp+7Ch] [bp-68h]@1
  int v37; // [sp+80h] [bp-64h]@1
  int v38; // [sp+84h] [bp-60h]@1
  int v39; // [sp+88h] [bp-5Ch]@1
  int v40; // [sp+8Ch] [bp-58h]@1
  int v41; // [sp+90h] [bp-54h]@1
  int v42; // [sp+94h] [bp-50h]@1
  int v43; // [sp+98h] [bp-4Ch]@1
  int v44; // [sp+9Ch] [bp-48h]@1
  int v45; // [sp+A0h] [bp-44h]@1
  int v46; // [sp+A4h] [bp-40h]@1
  int v47; // [sp+A8h] [bp-3Ch]@1
  int v48; // [sp+ACh] [bp-38h]@1
  int v49; // [sp+B0h] [bp-34h]@1
  int v50; // [sp+B4h] [bp-30h]@1
  int v51; // [sp+B8h] [bp-2Ch]@1
  int v52; // [sp+BCh] [bp-28h]@1
  int v53; // [sp+C0h] [bp-24h]@1
  int v54; // [sp+C4h] [bp-20h]@1
  int v55; // [sp+C8h] [bp-1Ch]@1
  int v56; // [sp+CCh] [bp-18h]@1
  int v57; // [sp+D0h] [bp-14h]@1
  int v58; // [sp+D4h] [bp-10h]@1
  int v59; // [sp+D8h] [bp-Ch]@1
  int v60; // [sp+DCh] [bp-8h]@1
  int v61; // [sp+E0h] [bp-4h]@1

  v34 = 0;
  v35 = 160;
  v36 = 24;
  v37 = 184;
  v38 = 24;
  v39 = 160;
  v40 = 48;
  v41 = 184;
  v42 = 48;
  v43 = 160;
  v44 = 72;
  v45 = 184;
  v46 = 72;
  v47 = 160;
  v48 = 96;
  v49 = 184;
  v50 = 96;
  v51 = 160;
  v52 = 120;
  v53 = 184;
  v54 = 120;
  v55 = 160;
  v56 = 144;
  v57 = 184;
  v58 = 144;
  v59 = 160;
  v60 = 168;
  v61 = 184;
  v6 = 0;
  v7 = 184;
  v8 = 24;
  v9 = 208;
  v10 = 24;
  v11 = 184;
  v12 = 48;
  v13 = 208;
  v14 = 48;
  v15 = 184;
  v16 = 72;
  v17 = 208;
  v18 = 72;
  v19 = 184;
  v20 = 96;
  v21 = 208;
  v22 = 96;
  v23 = 184;
  v24 = 120;
  v25 = 208;
  v26 = 120;
  v27 = 184;
  v28 = 144;
  v29 = 208;
  v30 = 144;
  v31 = 184;
  v32 = 168;
  v33 = 208;
  switch ( *((_DWORD *)a1 + 29) )
  {
    case 0:
      *((_DWORD *)a1 + 29) = 1;
      if ( *((_DWORD *)a1 + 19) )
        *((_DWORD *)a1 + 8) = *((_DWORD *)a1 + 2) + 0x10000;
      else
        *((_DWORD *)a1 + 8) = *((_DWORD *)a1 + 2) - 0x10000;
      *((_DWORD *)a1 + 9) = *((_DWORD *)a1 + 3);
      *((_DWORD *)a1 + 5) = 2 * RNG_Range(-512, 512);
      *((_DWORD *)a1 + 4) = 2 * RNG_Range(-512, 512);
      goto LABEL_6;
    case 1:
LABEL_6:
      if ( ++*((_DWORD *)a1 + 25) > 1 )
      {
        *((_DWORD *)a1 + 25) = 0;
        if ( ++*((_DWORD *)a1 + 26) > 1 )
          *((_DWORD *)a1 + 26) = 0;
      }
      if ( *((_DWORD *)a1 + 19) )
      {
        if ( *((_DWORD *)a1 + 2) > *((_DWORD *)a1 + 8) )
          *((_DWORD *)a1 + 29) = 20;
      }
      else if ( *((_DWORD *)a1 + 2) < *((_DWORD *)a1 + 8) )
      {
        *((_DWORD *)a1 + 29) = 20;
      }
      goto LABEL_53;
    case 0x14:
      *((_DWORD *)a1 + 29) = 21;
      *((_DWORD *)a1 + 30) = RNG_Range(0, 150);
      *((_DWORD *)a1 + 26) = 2;
      *((_DWORD *)a1 + 25) = 0;
      goto LABEL_17;
    case 0x15:
LABEL_17:
      if ( ++*((_DWORD *)a1 + 25) > 2 )
      {
        *((_DWORD *)a1 + 25) = 0;
        if ( ++*((_DWORD *)a1 + 26) > 3 )
          *((_DWORD *)a1 + 26) = 2;
      }
      if ( ++*((_DWORD *)a1 + 30) > 300 )
        *((_DWORD *)a1 + 29) = 30;
      if ( Quote_X_Position < *((_DWORD *)a1 + 2) + 57344
        && Quote_X_Position > *((_DWORD *)a1 + 2) - 57344
        && Quote_Y_Position < *((_DWORD *)a1 + 3) + 0x2000
        && Quote_Y_Position > *((_DWORD *)a1 + 3) - 0x2000 )
      {
        *((_DWORD *)a1 + 29) = 30;
      }
      goto LABEL_53;
    case 0x1E:
      *((_DWORD *)a1 + 29) = 31;
      *((_DWORD *)a1 + 30) = 0;
      *((_DWORD *)a1 + 25) = 0;
      goto LABEL_29;
    case 0x1F:
LABEL_29:
      if ( ++*((_DWORD *)a1 + 25) / 2 % 2 )
        *((_DWORD *)a1 + 26) = 3;
      else
        *((_DWORD *)a1 + 26) = 4;
      if ( ++*((_DWORD *)a1 + 30) > 30 )
      {
        *((_DWORD *)a1 + 29) = 40;
        *((_DWORD *)a1 + 26) = 5;
        if ( *((_DWORD *)a1 + 19) )
          NPC_Create(312, *((_DWORD *)a1 + 2), *((_DWORD *)a1 + 3), 2048, 0, 2, 0, 409);
        else
          NPC_Create(312, *((_DWORD *)a1 + 2), *((_DWORD *)a1 + 3), -2048, 0, 0, 0, 409);
      }
      goto LABEL_53;
    case 0x28:
      *((_DWORD *)a1 + 29) = 41;
      *((_DWORD *)a1 + 30) = 0;
      *((_DWORD *)a1 + 25) = 0;
      goto LABEL_38;
    case 0x29:
LABEL_38:
      if ( ++*((_DWORD *)a1 + 25) > 2 )
      {
        *((_DWORD *)a1 + 25) = 0;
        if ( ++*((_DWORD *)a1 + 26) > 6 )
          *((_DWORD *)a1 + 26) = 5;
      }
      if ( ++*((_DWORD *)a1 + 30) > 40 )
      {
        *((_DWORD *)a1 + 29) = 50;
        *((_DWORD *)a1 + 26) = 0;
        *((_DWORD *)a1 + 4) = 0;
        *((_DWORD *)a1 + 5) = 0;
      }
      goto LABEL_53;
    case 0x32:
      if ( ++*((_DWORD *)a1 + 25) > 1 )
      {
        *((_DWORD *)a1 + 25) = 0;
        if ( ++*((_DWORD *)a1 + 26) > 1 )
          *((_DWORD *)a1 + 26) = 0;
      }
      if ( *((_DWORD *)a1 + 19) )
        *((_DWORD *)a1 + 4) += 32;
      else
        *((_DWORD *)a1 + 4) -= 32;
      if ( *((_DWORD *)a1 + 2) >= 0 && *((_DWORD *)a1 + 2) <= *(signed __int16 *)&word_49E586 << 13 )
        goto LABEL_53;
      result = sub_46F760(a1);
      break;
    default:
LABEL_53:
      if ( *((_DWORD *)a1 + 29) < 50 )
      {
        if ( *((_DWORD *)a1 + 2) < *((_DWORD *)a1 + 8) )
          *((_DWORD *)a1 + 4) += 42;
        if ( *((_DWORD *)a1 + 2) > *((_DWORD *)a1 + 8) )
          *((_DWORD *)a1 + 4) -= 42;
        if ( *((_DWORD *)a1 + 3) < *((_DWORD *)a1 + 9) )
          *((_DWORD *)a1 + 5) += 42;
        if ( *((_DWORD *)a1 + 3) > *((_DWORD *)a1 + 9) )
          *((_DWORD *)a1 + 5) -= 42;
        if ( *((_DWORD *)a1 + 4) > 1024 )
          *((_DWORD *)a1 + 4) = 1024;
        if ( *((_DWORD *)a1 + 4) < -1024 )
          *((_DWORD *)a1 + 4) = -1024;
        if ( *((_DWORD *)a1 + 5) > 1024 )
          *((_DWORD *)a1 + 5) = 1024;
        if ( *((_DWORD *)a1 + 5) < -1024 )
          *((_DWORD *)a1 + 5) = -1024;
      }
      *((_DWORD *)a1 + 2) += *((_DWORD *)a1 + 4);
      *((_DWORD *)a1 + 3) += *((_DWORD *)a1 + 5);
      if ( *((_DWORD *)a1 + 19) )
      {
        v4 = &v6 + 4 * *((_DWORD *)a1 + 26);
        v5 = (char *)a1 + 84;
        *(_DWORD *)v5 = *v4;
        *((_DWORD *)v5 + 1) = v4[1];
        result = v4[2];
        *((_DWORD *)v5 + 2) = result;
        *((_DWORD *)v5 + 3) = v4[3];
      }
      else
      {
        v2 = &v34 + 4 * *((_DWORD *)a1 + 26);
        v3 = (char *)a1 + 84;
        *(_DWORD *)v3 = *v2;
        *((_DWORD *)v3 + 1) = v2[1];
        result = v2[2];
        *((_DWORD *)v3 + 2) = result;
        *((_DWORD *)v3 + 3) = v2[3];
      }
      break;
  }
  return result;
}

//----- (0046D340) --------------------------------------------------------
int __cdecl NPC351(int a1)
{
  int *v1; // edx@10
  int result; // eax@10
  int v3; // [sp+4h] [bp-90h]@1
  int v4; // [sp+8h] [bp-8Ch]@1
  int v5; // [sp+Ch] [bp-88h]@1
  int v6; // [sp+10h] [bp-84h]@1
  int v7; // [sp+14h] [bp-80h]@1
  int v8; // [sp+18h] [bp-7Ch]@1
  int v9; // [sp+1Ch] [bp-78h]@1
  int v10; // [sp+20h] [bp-74h]@1
  int v11; // [sp+24h] [bp-70h]@1
  int v12; // [sp+28h] [bp-6Ch]@1
  int v13; // [sp+2Ch] [bp-68h]@1
  int v14; // [sp+30h] [bp-64h]@1
  int v15; // [sp+34h] [bp-60h]@1
  int v16; // [sp+38h] [bp-5Ch]@1
  int v17; // [sp+3Ch] [bp-58h]@1
  int v18; // [sp+40h] [bp-54h]@1
  int v19; // [sp+44h] [bp-50h]@1
  int v20; // [sp+48h] [bp-4Ch]@1
  int v21; // [sp+4Ch] [bp-48h]@1
  int v22; // [sp+50h] [bp-44h]@1
  int v23; // [sp+54h] [bp-40h]@1
  int v24; // [sp+58h] [bp-3Ch]@1
  int v25; // [sp+5Ch] [bp-38h]@1
  int v26; // [sp+60h] [bp-34h]@1
  int v27; // [sp+64h] [bp-30h]@1
  int v28; // [sp+68h] [bp-2Ch]@1
  int v29; // [sp+6Ch] [bp-28h]@1
  int v30; // [sp+70h] [bp-24h]@1
  int v31; // [sp+74h] [bp-20h]@1
  int v32; // [sp+78h] [bp-1Ch]@1
  int v33; // [sp+7Ch] [bp-18h]@1
  int v34; // [sp+80h] [bp-14h]@1
  int v35; // [sp+84h] [bp-10h]@1
  int v36; // [sp+88h] [bp-Ch]@1
  int v37; // [sp+8Ch] [bp-8h]@1
  int v38; // [sp+90h] [bp-4h]@1

  v3 = 0;
  v4 = 96;
  v5 = 32;
  v6 = 136;
  v7 = 32;
  v8 = 96;
  v9 = 64;
  v10 = 136;
  v11 = 64;
  v12 = 96;
  v13 = 96;
  v14 = 136;
  v15 = 96;
  v16 = 96;
  v17 = 128;
  v18 = 136;
  v19 = 128;
  v20 = 96;
  v21 = 160;
  v22 = 136;
  v23 = 0;
  v24 = 176;
  v25 = 32;
  v26 = 216;
  v27 = 32;
  v28 = 176;
  v29 = 64;
  v30 = 216;
  v31 = 64;
  v32 = 176;
  v33 = 96;
  v34 = 216;
  v35 = 96;
  v36 = 176;
  v37 = 128;
  v38 = 216;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      *(_DWORD *)(a1 + 104) = *(_DWORD *)(a1 + 76) / 10;
      *(_DWORD *)(a1 + 8) += 4096;
      *(_DWORD *)(a1 + 12) += 6144;
      break;
    case 0xA:
      if ( Check_Flag(*(_DWORD *)(a1 + 44)) )
      {
        *(_DWORD *)(a1 + 116) = 20;
      }
      else
      {
        *(_DWORD *)(a1 + 116) = 11;
        *(_WORD *)(a1 + 80) |= 0x20u;
      }
      goto LABEL_6;
    case 0xB:
LABEL_6:
      if ( *(_DWORD *)(a1 + 64) <= 900 )
      {
        NPC_Create(
          351,
          *(_DWORD *)(a1 + 8) - 4096,
          *(_DWORD *)(a1 + 12) - 6144,
          0,
          0,
          10 * (*(_DWORD *)(a1 + 104) + 4),
          0,
          0);
        *(_BYTE *)a1 |= 8u;
      }
      break;
    case 0x14:
      *(_DWORD *)(a1 + 104) += 4;
      *(_DWORD *)(a1 + 116) = 1;
      break;
    default:
      break;
  }
  v1 = &v3 + 4 * *(_DWORD *)(a1 + 104);
  result = a1 + 84;
  *(_DWORD *)result = *v1;
  *(_DWORD *)(result + 4) = v1[1];
  *(_DWORD *)(result + 8) = v1[2];
  *(_DWORD *)(result + 12) = v1[3];
  return result;
}

//----- (0046D5D0) --------------------------------------------------------
int __cdecl NPC352(int a1)
{
  int *v1; // ecx@17
  int v2; // edx@17
  int result; // eax@17
  int v4; // [sp+8h] [bp-1C4h]@1
  int v5; // [sp+Ch] [bp-1C0h]@17
  int v6; // [sp+10h] [bp-1BCh]@17
  int v7; // [sp+14h] [bp-1B8h]@17
  int v8; // [sp+18h] [bp-1B4h]@17
  int v9; // [sp+1Ch] [bp-1B0h]@17
  int v10; // [sp+20h] [bp-1ACh]@17
  int v11; // [sp+24h] [bp-1A8h]@17
  int v12; // [sp+28h] [bp-1A4h]@17
  int v13; // [sp+2Ch] [bp-1A0h]@17
  int v14; // [sp+30h] [bp-19Ch]@17
  int v15; // [sp+34h] [bp-198h]@17
  int v16; // [sp+38h] [bp-194h]@17
  int v17; // [sp+3Ch] [bp-190h]@17
  int v18; // [sp+40h] [bp-18Ch]@17
  int v19; // [sp+44h] [bp-188h]@17
  int v20; // [sp+48h] [bp-184h]@17
  int v21; // [sp+4Ch] [bp-180h]@17
  int v22; // [sp+50h] [bp-17Ch]@17
  int v23; // [sp+54h] [bp-178h]@17
  int v24; // [sp+58h] [bp-174h]@17
  int v25; // [sp+5Ch] [bp-170h]@17
  int v26; // [sp+60h] [bp-16Ch]@17
  int v27; // [sp+64h] [bp-168h]@17
  int v28; // [sp+68h] [bp-164h]@17
  int v29; // [sp+6Ch] [bp-160h]@17
  int v30; // [sp+70h] [bp-15Ch]@17
  int v31; // [sp+74h] [bp-158h]@17
  int v32; // [sp+78h] [bp-154h]@17
  int v33; // [sp+7Ch] [bp-150h]@17
  int v34; // [sp+80h] [bp-14Ch]@17
  int v35; // [sp+84h] [bp-148h]@17
  int v36; // [sp+88h] [bp-144h]@17
  int v37; // [sp+8Ch] [bp-140h]@17
  int v38; // [sp+90h] [bp-13Ch]@17
  int v39; // [sp+94h] [bp-138h]@17
  int v40; // [sp+98h] [bp-134h]@17
  int v41; // [sp+9Ch] [bp-130h]@17
  int v42; // [sp+A0h] [bp-12Ch]@17
  int v43; // [sp+A4h] [bp-128h]@17
  int v44; // [sp+A8h] [bp-124h]@17
  int v45; // [sp+ACh] [bp-120h]@17
  int v46; // [sp+B0h] [bp-11Ch]@17
  int v47; // [sp+B4h] [bp-118h]@17
  int v48; // [sp+B8h] [bp-114h]@17
  int v49; // [sp+BCh] [bp-110h]@17
  int v50; // [sp+C0h] [bp-10Ch]@17
  int v51; // [sp+C4h] [bp-108h]@17
  int v52; // [sp+C8h] [bp-104h]@17
  int v53; // [sp+CCh] [bp-100h]@17
  int v54; // [sp+D0h] [bp-FCh]@17
  int v55; // [sp+D4h] [bp-F8h]@17
  int v56; // [sp+D8h] [bp-F4h]@17
  int v57; // [sp+DCh] [bp-F0h]@17
  int v58; // [sp+E0h] [bp-ECh]@17
  int v59; // [sp+E4h] [bp-E8h]@17
  int v60; // [sp+E8h] [bp-E4h]@17
  int v61; // [sp+ECh] [bp-E0h]@17
  int v62; // [sp+F0h] [bp-DCh]@17
  int v63; // [sp+F4h] [bp-D8h]@17
  int v64; // [sp+F8h] [bp-D4h]@17
  int v65; // [sp+FCh] [bp-D0h]@17
  int v66; // [sp+100h] [bp-CCh]@17
  int v67; // [sp+104h] [bp-C8h]@17
  int v68; // [sp+108h] [bp-C4h]@17
  int v69; // [sp+10Ch] [bp-C0h]@17
  int v70; // [sp+110h] [bp-BCh]@17
  int v71; // [sp+114h] [bp-B8h]@17
  int v72; // [sp+118h] [bp-B4h]@17
  int v73; // [sp+11Ch] [bp-B0h]@17
  int v74; // [sp+120h] [bp-ACh]@17
  int v75; // [sp+124h] [bp-A8h]@17
  int v76; // [sp+128h] [bp-A4h]@17
  int v77; // [sp+12Ch] [bp-A0h]@17
  int v78; // [sp+130h] [bp-9Ch]@17
  int v79; // [sp+134h] [bp-98h]@17
  int v80; // [sp+138h] [bp-94h]@17
  int v81; // [sp+13Ch] [bp-90h]@17
  int v82; // [sp+140h] [bp-8Ch]@17
  int v83; // [sp+144h] [bp-88h]@17
  int v84; // [sp+148h] [bp-84h]@17
  int v85; // [sp+14Ch] [bp-80h]@17
  int v86; // [sp+150h] [bp-7Ch]@17
  int v87; // [sp+154h] [bp-78h]@17
  int v88; // [sp+158h] [bp-74h]@17
  int v89; // [sp+15Ch] [bp-70h]@17
  int v90; // [sp+160h] [bp-6Ch]@17
  int v91; // [sp+164h] [bp-68h]@17
  int v92; // [sp+168h] [bp-64h]@17
  int v93; // [sp+16Ch] [bp-60h]@17
  int v94; // [sp+170h] [bp-5Ch]@17
  int v95; // [sp+174h] [bp-58h]@17
  int v96; // [sp+178h] [bp-54h]@17
  int v97; // [sp+17Ch] [bp-50h]@17
  int v98; // [sp+180h] [bp-4Ch]@17
  int v99; // [sp+184h] [bp-48h]@17
  int v100; // [sp+188h] [bp-44h]@17
  int v101; // [sp+18Ch] [bp-40h]@17
  int v102; // [sp+190h] [bp-3Ch]@17
  int v103; // [sp+194h] [bp-38h]@17
  int v104; // [sp+198h] [bp-34h]@17
  int v105; // [sp+19Ch] [bp-30h]@17
  int v106; // [sp+1A0h] [bp-2Ch]@17
  int v107; // [sp+1A4h] [bp-28h]@17
  int v108; // [sp+1A8h] [bp-24h]@17
  int v109; // [sp+1ACh] [bp-20h]@17
  int v110; // [sp+1B0h] [bp-1Ch]@17
  int v111; // [sp+1B4h] [bp-18h]@17
  int v112; // [sp+1B8h] [bp-14h]@17
  int v113; // [sp+1BCh] [bp-10h]@17
  int v114; // [sp+1C0h] [bp-Ch]@17
  int v115; // [sp+1C4h] [bp-8h]@17
  int v116; // [sp+1C8h] [bp-4h]@17

  v4 = *(_DWORD *)(a1 + 116);
  if ( v4 )
  {
    if ( v4 != 1 )
      goto LABEL_17;
  }
  else
  {
    *(_DWORD *)(a1 + 116) = 1;
    *(_DWORD *)(a1 + 104) = 0;
    *(_DWORD *)(a1 + 108) = *(_DWORD *)(a1 + 76) / 100;
    *(_DWORD *)(a1 + 76) %= 100;
    switch ( *(_DWORD *)(a1 + 108) )
    {
      case 7:
      case 8:
      case 9:
      case 0xC:
      case 0xD:
        *(_DWORD *)(a1 + 52) = 21;
        break;
      default:
        break;
    }
    switch ( *(_DWORD *)(a1 + 108) )
    {
      case 2:
      case 4:
      case 9:
      case 0xC:
        *(_DWORD *)(a1 + 144) = 0x2000;
        break;
      default:
        break;
    }
    if ( *(_DWORD *)(a1 + 108) == 9 )
    {
      *(_DWORD *)(a1 + 148) = 10240;
      *(_DWORD *)(a1 + 140) = 10240;
      *(_DWORD *)(a1 + 8) -= 512;
    }
    if ( !*(_DWORD *)(a1 + 108) )
      NPC_Create(145, 0, 0, 0, 0, 2, a1, 256);
  }
  *(_DWORD *)(a1 + 20) += 64;
  if ( *(_DWORD *)(a1 + 20) > 1535 )
    *(_DWORD *)(a1 + 20) = 1535;
  if ( *(_DWORD *)(a1 + 4) & 8 )
  {
    *(_DWORD *)(a1 + 20) = 0;
    *(_DWORD *)(a1 + 116) = 2;
    *(_DWORD *)(a1 + 104) = 1;
  }
  *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
LABEL_17:
  v5 = 304;
  v6 = 48;
  v7 = 320;
  v8 = 64;
  v9 = 224;
  v10 = 48;
  v11 = 240;
  v12 = 64;
  v13 = 32;
  v14 = 80;
  v15 = 48;
  v16 = 96;
  v17 = 0;
  v18 = 80;
  v19 = 16;
  v20 = 96;
  v21 = 224;
  v22 = 216;
  v23 = 240;
  v24 = 240;
  v25 = 192;
  v26 = 216;
  v27 = 208;
  v28 = 240;
  v29 = 48;
  v30 = 16;
  v31 = 64;
  v32 = 32;
  v33 = 0;
  v34 = 16;
  v35 = 16;
  v36 = 32;
  v37 = 112;
  v38 = 192;
  v39 = 128;
  v40 = 216;
  v41 = 80;
  v42 = 192;
  v43 = 96;
  v44 = 216;
  v45 = 304;
  v46 = 0;
  v47 = 320;
  v48 = 16;
  v49 = 224;
  v50 = 0;
  v51 = 240;
  v52 = 16;
  v53 = 176;
  v54 = 32;
  v55 = 192;
  v56 = 48;
  v57 = 176;
  v58 = 32;
  v59 = 192;
  v60 = 48;
  v61 = 240;
  v62 = 16;
  v63 = 256;
  v64 = 32;
  v65 = 224;
  v66 = 16;
  v67 = 240;
  v68 = 32;
  v69 = 208;
  v70 = 16;
  v71 = 224;
  v72 = 32;
  v73 = 192;
  v74 = 16;
  v75 = 208;
  v76 = 32;
  v77 = 280;
  v78 = 128;
  v79 = 320;
  v80 = 152;
  v81 = 280;
  v82 = 152;
  v83 = 320;
  v84 = 176;
  v85 = 32;
  v86 = 112;
  v87 = 48;
  v88 = 128;
  v89 = 0;
  v90 = 112;
  v91 = 16;
  v92 = 128;
  v93 = 80;
  v94 = 0;
  v95 = 96;
  v96 = 16;
  v97 = 112;
  v98 = 0;
  v99 = 128;
  v100 = 16;
  v101 = 16;
  v102 = 152;
  v103 = 32;
  v104 = 176;
  v105 = 0;
  v106 = 152;
  v107 = 16;
  v108 = 176;
  v109 = 48;
  v110 = 16;
  v111 = 64;
  v112 = 32;
  v113 = 48;
  v114 = 0;
  v115 = 64;
  v116 = 16;
  v1 = &v5 + 4 * (*(_DWORD *)(a1 + 104) + 2 * *(_DWORD *)(a1 + 108));
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  result = v1[2];
  *(_DWORD *)(v2 + 8) = result;
  *(_DWORD *)(v2 + 12) = v1[3];
  return result;
}

//----- (0046DBE0) --------------------------------------------------------
int __cdecl NPC353(int a1)
{
  int result; // eax@1
  int *v2; // edx@14
  int *v3; // ecx@54
  int v4; // edx@54
  int *v5; // ecx@55
  int v6; // edx@55
  int v7; // [sp+8h] [bp-80h]@1
  int v8; // [sp+Ch] [bp-7Ch]@1
  int v9; // [sp+10h] [bp-78h]@1
  int v10; // [sp+14h] [bp-74h]@1
  int v11; // [sp+18h] [bp-70h]@1
  int v12; // [sp+1Ch] [bp-6Ch]@1
  int v13; // [sp+20h] [bp-68h]@1
  int v14; // [sp+24h] [bp-64h]@1
  int v15; // [sp+28h] [bp-60h]@1
  int v16; // [sp+2Ch] [bp-5Ch]@1
  int v17; // [sp+30h] [bp-58h]@1
  int v18; // [sp+34h] [bp-54h]@1
  int v19; // [sp+38h] [bp-50h]@1
  int v20; // [sp+3Ch] [bp-4Ch]@1
  int v21; // [sp+40h] [bp-48h]@1
  int v22; // [sp+44h] [bp-44h]@1
  int v23; // [sp+48h] [bp-40h]@1
  int v24; // [sp+4Ch] [bp-3Ch]@1
  int v25; // [sp+50h] [bp-38h]@1
  int v26; // [sp+54h] [bp-34h]@1
  int v27; // [sp+58h] [bp-30h]@1
  int v28; // [sp+5Ch] [bp-2Ch]@1
  int v29; // [sp+60h] [bp-28h]@1
  int v30; // [sp+64h] [bp-24h]@1
  int v31; // [sp+68h] [bp-20h]@1
  int v32; // [sp+6Ch] [bp-1Ch]@1
  int v33; // [sp+70h] [bp-18h]@1
  int v34; // [sp+74h] [bp-14h]@1
  int v35; // [sp+78h] [bp-10h]@1
  int v36; // [sp+7Ch] [bp-Ch]@1
  int v37; // [sp+80h] [bp-8h]@1
  int v38; // [sp+84h] [bp-4h]@1

  v15 = 168;
  v16 = 160;
  v17 = 184;
  v18 = 184;
  v19 = 184;
  v20 = 160;
  v21 = 200;
  v22 = 184;
  v23 = 168;
  v24 = 184;
  v25 = 184;
  v26 = 208;
  v27 = 184;
  v28 = 184;
  v29 = 200;
  v30 = 208;
  v31 = 200;
  v32 = 160;
  v33 = 216;
  v34 = 176;
  v35 = 216;
  v36 = 160;
  v37 = 232;
  v38 = 176;
  v7 = 200;
  v8 = 176;
  v9 = 216;
  v10 = 192;
  v11 = 216;
  v12 = 176;
  v13 = 232;
  v14 = 192;
  result = a1;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 1;
      switch ( *(_DWORD *)(a1 + 76) )
      {
        case 0:
          *(_DWORD *)(a1 + 16) = -1536;
          break;
        case 2:
          *(_DWORD *)(a1 + 16) = 1536;
          break;
        case 1:
          *(_DWORD *)(a1 + 20) = -1536;
          break;
        case 3:
          *(_DWORD *)(a1 + 20) = 1536;
          break;
        default:
          goto LABEL_7;
      }
      goto LABEL_7;
    case 1:
LABEL_7:
      if ( ++*(_DWORD *)(a1 + 120) == 8 )
        *(_WORD *)(a1 + 80) &= 0xFFF7u;
      *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
      *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
      if ( *(_DWORD *)(a1 + 120) == 16 )
        *(_DWORD *)(a1 + 116) = 10;
      if ( ++*(_DWORD *)(a1 + 100) > 2 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        if ( ++*(_DWORD *)(a1 + 104) > 3 )
          *(_DWORD *)(a1 + 104) = 0;
      }
      v2 = &v15 + 4 * *(_DWORD *)(a1 + 104);
      result = a1 + 84;
      *(_DWORD *)result = *v2;
      *(_DWORD *)(result + 4) = v2[1];
      *(_DWORD *)(result + 8) = v2[2];
      *(_DWORD *)(result + 12) = v2[3];
      return result;
    case 0xA:
      *(_DWORD *)(a1 + 116) = 11;
      *(_DWORD *)(a1 + 104) = 0;
      *(_WORD *)(a1 + 80) |= 0x20u;
      *(_WORD *)(a1 + 80) &= 0xFFF7u;
      *(_DWORD *)(a1 + 164) = 5;
      *(_DWORD *)(a1 + 144) = 4096;
      goto LABEL_16;
    case 0xB:
LABEL_16:
      if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
        *(_DWORD *)(a1 + 76) = 2;
      else
        *(_DWORD *)(a1 + 76) = 0;
      if ( Quote_Y_Position - 12288 <= *(_DWORD *)(a1 + 12) )
      {
        if ( *(_DWORD *)(a1 + 76) )
          *(_DWORD *)(a1 + 24) += 16;
        else
          *(_DWORD *)(a1 + 24) -= 16;
      }
      else if ( *(_DWORD *)(a1 + 76) )
      {
        *(_DWORD *)(a1 + 24) -= 16;
      }
      else
      {
        *(_DWORD *)(a1 + 24) += 16;
      }
      if ( *(_DWORD *)(a1 + 12) <= Quote_Y_Position )
        *(_DWORD *)(a1 + 28) += 16;
      else
        *(_DWORD *)(a1 + 28) -= 16;
      if ( *(_DWORD *)(a1 + 24) < 0 && *(_DWORD *)(a1 + 4) & 1 )
        *(_DWORD *)(a1 + 24) = -*(_DWORD *)(a1 + 24);
      if ( *(_DWORD *)(a1 + 24) > 0 && *(_DWORD *)(a1 + 4) & 4 )
        *(_DWORD *)(a1 + 24) = -*(_DWORD *)(a1 + 24);
      if ( *(_DWORD *)(a1 + 28) < 0 && *(_DWORD *)(a1 + 4) & 2 )
        *(_DWORD *)(a1 + 28) = -*(_DWORD *)(a1 + 28);
      if ( *(_DWORD *)(a1 + 28) > 0 && *(_DWORD *)(a1 + 4) & 8 )
        *(_DWORD *)(a1 + 28) = -*(_DWORD *)(a1 + 28);
      if ( *(_DWORD *)(a1 + 24) < -1535 )
        *(_DWORD *)(a1 + 24) = -1535;
      if ( *(_DWORD *)(a1 + 24) > 1535 )
        *(_DWORD *)(a1 + 24) = 1535;
      if ( *(_DWORD *)(a1 + 28) < -1535 )
        *(_DWORD *)(a1 + 28) = -1535;
      if ( *(_DWORD *)(a1 + 28) > 1535 )
        *(_DWORD *)(a1 + 28) = 1535;
      *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 24);
      *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 28);
      if ( ++*(_DWORD *)(a1 + 100) > 1 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        if ( ++*(_DWORD *)(a1 + 104) > 1 )
          *(_DWORD *)(a1 + 104) = 0;
      }
      if ( *(_DWORD *)(a1 + 76) )
      {
        v5 = &v7 + 4 * *(_DWORD *)(a1 + 104);
        v6 = a1 + 84;
        *(_DWORD *)v6 = *v5;
        *(_DWORD *)(v6 + 4) = v5[1];
        result = v5[2];
        *(_DWORD *)(v6 + 8) = result;
        *(_DWORD *)(v6 + 12) = v5[3];
      }
      else
      {
        v3 = &v31 + 4 * *(_DWORD *)(a1 + 104);
        v4 = a1 + 84;
        *(_DWORD *)v4 = *v3;
        *(_DWORD *)(v4 + 4) = v3[1];
        result = v3[2];
        *(_DWORD *)(v4 + 8) = result;
        *(_DWORD *)(v4 + 12) = v3[3];
      }
      break;
    default:
      return result;
  }
  return result;
}

//----- (0046E110) --------------------------------------------------------
int __cdecl NPC354(int a1)
{
  int result; // eax@1
  int v2; // [sp+0h] [bp-10h]@1
  signed int i; // [sp+4h] [bp-Ch]@13

  result = a1;
  v2 = *(_DWORD *)(a1 + 116);
  if ( !v2 )
  {
    *(_DWORD *)(a1 + 136) = 143360;
    return result;
  }
  if ( v2 == 10 )
  {
    *(_DWORD *)(a1 + 116) = 11;
    *(_DWORD *)(a1 + 120) = 0;
    if ( *(_DWORD *)(a1 + 76) )
      *(_DWORD *)(a1 + 8) -= 0x2000;
    else
      *(_DWORD *)(a1 + 8) += 0x2000;
  }
  else if ( v2 != 11 )
  {
    return result;
  }
  ++*(_DWORD *)(a1 + 120);
  result = a1;
  if ( *(_DWORD *)(a1 + 120) > 100 )
  {
    *(_DWORD *)(a1 + 120) = 0;
    sub_40F310(20);
    Play_Sound_Effect(26, 1);
    Play_Sound_Effect(12, 1);
    if ( *(_DWORD *)(a1 + 76) )
    {
      result = a1;
      *(_DWORD *)(a1 + 8) += 0x2000;
    }
    else
    {
      result = a1;
      *(_DWORD *)(a1 + 8) -= 0x2000;
    }
    for ( i = 0; i < 20; ++i )
    {
      sub_413A60(*(_DWORD *)(a1 + 8) / 512 / 16, i + *(_DWORD *)(a1 + 12) / 512 / 16, 0x6Du);
      result = i + 1;
    }
  }
  return result;
}

//----- (0046E280) --------------------------------------------------------
int __cdecl NPC355(int a1)
{
  int *v1; // edx@7
  int result; // eax@7
  int v3; // [sp+8h] [bp-40h]@1
  int v4; // [sp+Ch] [bp-3Ch]@1
  int v5; // [sp+10h] [bp-38h]@1
  int v6; // [sp+14h] [bp-34h]@1
  int v7; // [sp+18h] [bp-30h]@1
  int v8; // [sp+1Ch] [bp-2Ch]@1
  int v9; // [sp+20h] [bp-28h]@1
  int v10; // [sp+24h] [bp-24h]@1
  int v11; // [sp+28h] [bp-20h]@1
  int v12; // [sp+2Ch] [bp-1Ch]@1
  int v13; // [sp+30h] [bp-18h]@1
  int v14; // [sp+34h] [bp-14h]@1
  int v15; // [sp+38h] [bp-10h]@1
  int v16; // [sp+3Ch] [bp-Ch]@1
  int v17; // [sp+40h] [bp-8h]@1
  int v18; // [sp+44h] [bp-4h]@1

  v3 = 80;
  v4 = 16;
  v5 = 96;
  v6 = 32;
  v7 = 80;
  v8 = 96;
  v9 = 96;
  v10 = 112;
  v11 = 128;
  v12 = 16;
  v13 = 144;
  v14 = 32;
  v15 = 208;
  v16 = 96;
  v17 = 224;
  v18 = 112;
  if ( !*(_DWORD *)(a1 + 116) )
  {
    switch ( *(_DWORD *)(a1 + 76) )
    {
      case 0:
        *(_DWORD *)(a1 + 52) = 16;
        *(_DWORD *)(a1 + 104) = 0;
        *(_DWORD *)(a1 + 8) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 8) - 7168;
        *(_DWORD *)(a1 + 12) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 12) + 5120;
        break;
      case 1:
        *(_DWORD *)(a1 + 52) = 23;
        *(_DWORD *)(a1 + 104) = 1;
        *(_DWORD *)(a1 + 8) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 8) + 7168;
        *(_DWORD *)(a1 + 12) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 12) + 5120;
        break;
      case 2:
        *(_DWORD *)(a1 + 52) = 16;
        *(_DWORD *)(a1 + 104) = 2;
        *(_DWORD *)(a1 + 8) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 8) - 3584;
        *(_DWORD *)(a1 + 12) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 12) - 9728;
        break;
      case 3:
        *(_DWORD *)(a1 + 52) = 23;
        *(_DWORD *)(a1 + 104) = 3;
        *(_DWORD *)(a1 + 8) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 8) + 2048;
        *(_DWORD *)(a1 + 12) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 12) - 9728;
        break;
      default:
        break;
    }
  }
  v1 = &v3 + 4 * *(_DWORD *)(a1 + 104);
  result = a1 + 84;
  *(_DWORD *)result = *v1;
  *(_DWORD *)(result + 4) = v1[1];
  *(_DWORD *)(result + 8) = v1[2];
  *(_DWORD *)(result + 12) = v1[3];
  return result;
}

//----- (0046E480) --------------------------------------------------------
int __cdecl NPC356(int a1)
{
  int *v1; // edx@19
  int result; // eax@19
  int v3; // [sp+4h] [bp-20h]@1
  int v4; // [sp+8h] [bp-1Ch]@1
  int v5; // [sp+Ch] [bp-18h]@1
  int v6; // [sp+10h] [bp-14h]@1
  int v7; // [sp+14h] [bp-10h]@1
  int v8; // [sp+18h] [bp-Ch]@1
  int v9; // [sp+1Ch] [bp-8h]@1
  int v10; // [sp+20h] [bp-4h]@1

  v3 = 240;
  v4 = 128;
  v5 = 280;
  v6 = 152;
  v7 = 240;
  v8 = 152;
  v9 = 280;
  v10 = 176;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 116) = 11;
      *(_DWORD *)(a1 + 100) = 0;
      *(_DWORD *)(a1 + 36) = *(_DWORD *)(a1 + 12) - 0x2000;
      *(_DWORD *)(a1 + 32) = *(_DWORD *)(a1 + 8) - 3072;
      *(_DWORD *)(a1 + 20) = 0;
      NPC_Create(355, 0, 0, 0, 0, 3, a1, 170);
      NPC_Create(355, 0, 0, 0, 0, 2, a1, 170);
      goto LABEL_3;
    case 0xB:
LABEL_3:
      if ( *(_DWORD *)(a1 + 8) >= *(_DWORD *)(a1 + 32) )
        *(_DWORD *)(a1 + 16) -= 8;
      else
        *(_DWORD *)(a1 + 16) += 8;
      if ( *(_DWORD *)(a1 + 12) >= *(_DWORD *)(a1 + 36) )
        *(_DWORD *)(a1 + 20) -= 8;
      else
        *(_DWORD *)(a1 + 20) += 8;
      *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
      *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
      break;
    case 0x14:
      *(_DWORD *)(a1 + 116) = 21;
      *(_DWORD *)(a1 + 16) = -1024;
      *(_DWORD *)(a1 + 20) = 512;
      goto LABEL_11;
    case 0x15:
LABEL_11:
      ++*(_DWORD *)(a1 + 100);
      *(_DWORD *)(a1 + 16) += 16;
      *(_DWORD *)(a1 + 20) -= 8;
      *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
      *(_DWORD *)(a1 + 12) += *(_DWORD *)(a1 + 20);
      if ( *(_DWORD *)(a1 + 8) > 491520 )
        *(_DWORD *)(a1 + 116) = 22;
      break;
    case 0x16:
      *(_DWORD *)(a1 + 16) = 0;
      *(_DWORD *)(a1 + 20) = 0;
      break;
    default:
      break;
  }
  if ( ++*(_DWORD *)(a1 + 100) > 4 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    ++*(_DWORD *)(a1 + 104);
  }
  if ( *(_DWORD *)(a1 + 104) > 1 )
    *(_DWORD *)(a1 + 104) = 0;
  v1 = &v3 + 4 * *(_DWORD *)(a1 + 104);
  result = a1 + 84;
  *(_DWORD *)result = *v1;
  *(_DWORD *)(result + 4) = v1[1];
  *(_DWORD *)(result + 8) = v1[2];
  *(_DWORD *)(result + 12) = v1[3];
  return result;
}

//----- (0046E730) --------------------------------------------------------
int __cdecl NPC357(int a1)
{
  int result; // eax@1
  int v2; // edx@5
  int v3; // ecx@7
  int v4; // ST08_4@12
  int v5; // eax@12
  int v6; // [sp+0h] [bp-14h]@1

  result = a1;
  v6 = *(_DWORD *)(a1 + 116);
  if ( !v6 )
  {
    v2 = a1 + 84;
    *(_DWORD *)v2 = 224;
    *(_DWORD *)(v2 + 4) = 136;
    *(_DWORD *)(v2 + 8) = 240;
    *(_DWORD *)(v2 + 12) = 152;
    result = *(_DWORD *)(a1 + 120) + 1;
    *(_DWORD *)(a1 + 120) = result;
    goto LABEL_11;
  }
  if ( v6 == 10 )
  {
    *(_DWORD *)(a1 + 120) = 0;
    *(_DWORD *)(a1 + 116) = 11;
    Play_Sound_Effect(29, 1);
  }
  else if ( v6 != 11 )
  {
    goto LABEL_11;
  }
  ++*(_DWORD *)(a1 + 120);
  v3 = a1 + 84;
  *(_DWORD *)v3 = 224;
  *(_DWORD *)(v3 + 4) = 136;
  *(_DWORD *)(v3 + 8) = 240;
  *(_DWORD *)(v3 + 12) = 152;
  result = *(_DWORD *)(a1 + 120) / 2 % 2;
  if ( result )
  {
    result = a1;
    *(_DWORD *)(a1 + 92) = *(_DWORD *)(a1 + 84);
  }
  if ( *(_DWORD *)(a1 + 120) > 50 )
  {
    result = a1;
    *(_BYTE *)a1 = 0;
  }
LABEL_11:
  if ( *(_DWORD *)(a1 + 120) % 8 == 1 )
  {
    v4 = *(_DWORD *)(a1 + 12) + 4096;
    v5 = RNG_Range(-8, 8);
    result = Create_Animated_Effect(*(_DWORD *)(a1 + 8) + (v5 << 9), v4, 13, 1);
  }
  return result;
}

//----- (0046E870) --------------------------------------------------------
int __cdecl NPC358(int a1)
{
  int *v1; // eax@13
  int v2; // ecx@13
  int result; // eax@13
  int v4; // [sp+0h] [bp-54h]@1
  int v5; // [sp+4h] [bp-50h]@1
  int v6; // [sp+8h] [bp-4Ch]@1
  int v7; // [sp+Ch] [bp-48h]@1
  int v8; // [sp+10h] [bp-44h]@1
  int v9; // [sp+14h] [bp-40h]@1
  int v10; // [sp+18h] [bp-3Ch]@1
  int v11; // [sp+1Ch] [bp-38h]@1
  int v12; // [sp+20h] [bp-34h]@1
  int v13; // [sp+24h] [bp-30h]@1
  int v14; // [sp+28h] [bp-2Ch]@1
  int v15; // [sp+2Ch] [bp-28h]@1
  int v16; // [sp+30h] [bp-24h]@1
  int v17; // [sp+34h] [bp-20h]@1
  int v18; // [sp+38h] [bp-1Ch]@1
  int v19; // [sp+3Ch] [bp-18h]@1
  int v20; // [sp+40h] [bp-14h]@1
  int v21; // [sp+44h] [bp-10h]@1
  int v22; // [sp+48h] [bp-Ch]@1
  int v23; // [sp+4Ch] [bp-8h]@1
  int v24; // [sp+50h] [bp-4h]@1

  v5 = 208;
  v6 = 8;
  v7 = 224;
  v8 = 32;
  v9 = 224;
  v10 = 8;
  v11 = 240;
  v12 = 32;
  v13 = 240;
  v14 = 8;
  v15 = 256;
  v16 = 32;
  v17 = 256;
  v18 = 8;
  v19 = 272;
  v20 = 32;
  v21 = 272;
  v22 = 8;
  v23 = 288;
  v24 = 32;
  v4 = *(_DWORD *)(a1 + 116);
  if ( v4 )
  {
    if ( v4 == 10 )
    {
      if ( ++*(_DWORD *)(a1 + 100) > 6 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 4 )
        *(_DWORD *)(a1 + 104) = 3;
    }
  }
  else
  {
    if ( ++*(_DWORD *)(a1 + 100) > 6 )
    {
      *(_DWORD *)(a1 + 100) = 0;
      ++*(_DWORD *)(a1 + 104);
    }
    if ( *(_DWORD *)(a1 + 104) > 1 )
      *(_DWORD *)(a1 + 104) = 0;
  }
  v1 = &v5 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  *(_DWORD *)(v2 + 8) = v1[2];
  result = v1[3];
  *(_DWORD *)(v2 + 12) = result;
  return result;
}

//----- (0046E9E0) --------------------------------------------------------
int __cdecl NPC359(int a1)
{
  int result; // eax@1
  int v2; // eax@6

  result = a1;
  if ( Quote_X_Position < *(_DWORD *)(a1 + 8) + 163840 )
  {
    result = *(_DWORD *)(a1 + 8) - 163840;
    if ( Quote_X_Position > result && Quote_Y_Position < *(_DWORD *)(a1 + 12) + 163840 )
    {
      result = a1;
      if ( Quote_Y_Position > *(_DWORD *)(a1 + 12) - 81920 )
      {
        result = RNG_Range(0, 100);
        if ( result == 2 )
        {
          v2 = RNG_Range(-6, 6);
          result = NPC_Create(73, *(_DWORD *)(a1 + 8) + (v2 << 9), *(_DWORD *)(a1 + 12) - 3584, 0, 0, 0, 0, 0);
        }
      }
    }
  }
  return result;
}

//----- (0046EA90) --------------------------------------------------------
// NPC 360 : Thank you!
// The thank you screen.
signed int __cdecl NPC360_Thank_You(int a1)
{
  int v1; // ecx@3
  signed int result; // eax@3

  if ( !*(_DWORD *)(a1 + 116) )
  {
    ++*(_DWORD *)(a1 + 116);
    *(_DWORD *)(a1 + 8) -= 4096;
    *(_DWORD *)(a1 + 12) -= 4096;
  }
  v1 = a1 + 84;
  *(_DWORD *)v1 = 0;
  *(_DWORD *)(v1 + 4) = 176;
  *(_DWORD *)(v1 + 8) = 48;
  result = 184;
  *(_DWORD *)(v1 + 12) = 184;
  if ( EquippedItems & 0x80 )
    result = 48;
  return result;
}
// 49E650: using guessed type int EquippedItems;

//----- (0046EB30) --------------------------------------------------------
void *sub_46EB30()
{
  return memset(&Is_NPC_Alive, 0, 0x15800u);
}

//----- (0046EB50) --------------------------------------------------------
signed int __cdecl sub_46EB50(int a1)
{
  signed int result; // eax@2
  char str; // [sp+0h] [bp-130h]@1
  int v3; // [sp+10Ch] [bp-24h]@1
  __int16 v4; // [sp+110h] [bp-20h]@7
  __int16 v5; // [sp+112h] [bp-1Eh]@7
  __int16 v6; // [sp+114h] [bp-1Ch]@7
  __int16 v7; // [sp+116h] [bp-1Ah]@7
  __int16 v8; // [sp+118h] [bp-18h]@7
  __int16 v9; // [sp+11Ah] [bp-16h]@7
  char ptr1; // [sp+11Ch] [bp-14h]@3
  FILE *stream; // [sp+120h] [bp-10h]@1
  int i; // [sp+124h] [bp-Ch]@5
  int v13; // [sp+128h] [bp-8h]@5
  int v14; // [sp+12Ch] [bp-4h]@5

  v3 = dword_498B20;
  sprintf(&str, "%s\\%s", byte_49E220, a1);
  stream = fopen(&str, "rb");
  if ( stream )
  {
    sub_480F55((FILE *)&ptr1, 1u, 4u, stream);
    if ( !memcmp(&ptr1, off_498540, 3u) )
    {
      sub_480F55((FILE *)&v14, 4u, 1u, stream);
      memset(&Is_NPC_Alive, 0, 0x15800u);
      v13 = 170;
      for ( i = 0; i < v14; ++i )
      {
        sub_480F55((FILE *)&v4, 0xCu, 1u, stream);
        NPC_Direction[43 * v13] = (v9 & 0x1000) != 0 ? 2 : 0;
        NPC_Type[43 * v13] = v8;
        NPC_Event_Number[43 * v13] = v7;
        NPC_Unknown[43 * v13] = v6;
        NPC_X_Position[43 * v13] = v4 << 13;
        NPC_Y_Position[43 * v13] = v5 << 13;
        NPC_Flags[86 * v13] = v9;
        NPC_Flags[86 * v13] |= *((_WORD *)NPCStruct_Flags + 12 * NPC_Type[43 * v13]);
        NPC_EXP_Health_Missiles_Dropped[43 * v13] = *((_DWORD *)NPCStruct_Flags + 6 * NPC_Type[43 * v13] + 2);
        sub_46EE50((int)&Is_NPC_Alive + 172 * v13);
        if ( NPC_Flags[86 * v13] & 0x800 )
        {
          if ( Check_Flag(NPC_Unknown[43 * v13]) == 1 )
            *((_BYTE *)&Is_NPC_Alive + 172 * v13) |= 0x80u;
        }
        else if ( NPC_Flags[86 * v13] & 0x4000 )
        {
          if ( !Check_Flag(NPC_Unknown[43 * v13]) )
            *((_BYTE *)&Is_NPC_Alive + 172 * v13) |= 0x80u;
        }
        else
        {
          *((_BYTE *)&Is_NPC_Alive + 172 * v13) = -128;
        }
        ++v13;
      }
      fclose(stream);
      result = 1;
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}
// 498B20: using guessed type int dword_498B20;
// 4A6228: using guessed type int NPC_X_Position[];
// 4A622C: using guessed type int NPC_Y_Position[];
// 4A6248: using guessed type int NPC_Type[];
// 4A624C: using guessed type int NPC_Unknown[];
// 4A6250: using guessed type int NPC_Event_Number[];
// 4A6264: using guessed type int NPC_EXP_Health_Missiles_Dropped[];
// 4A626C: using guessed type int NPC_Direction[];
// 4A6270: using guessed type __int16 NPC_Flags[];

//----- (0046EE50) --------------------------------------------------------
int __cdecl sub_46EE50(int a1)
{
  int v1; // ST00_4@1
  int result; // eax@1

  v1 = *(_DWORD *)(a1 + 40);
  *(_DWORD *)(a1 + 52) = *((_BYTE *)NPCStruct_Flags + 24 * v1 + 4);
  *(_DWORD *)(a1 + 56) = *((_BYTE *)NPCStruct_Flags + 24 * v1 + 5);
  *(_DWORD *)(a1 + 60) = *((_BYTE *)NPCStruct_Flags + 24 * v1 + 6);
  *(_DWORD *)(a1 + 164) = *((_DWORD *)NPCStruct_Flags + 6 * v1 + 3);
  *(_DWORD *)(a1 + 72) = *((_BYTE *)NPCStruct_Flags + 24 * v1 + 7);
  *(_DWORD *)(a1 + 64) = *((_WORD *)NPCStruct_Flags + 12 * v1 + 1);
  *(_DWORD *)(a1 + 124) = *((_BYTE *)NPCStruct_Flags + 24 * v1 + 16) << 9;
  *(_DWORD *)(a1 + 132) = *((_BYTE *)NPCStruct_Flags + 24 * v1 + 18) << 9;
  *(_DWORD *)(a1 + 128) = *((_BYTE *)NPCStruct_Flags + 24 * v1 + 17) << 9;
  *(_DWORD *)(a1 + 136) = *((_BYTE *)NPCStruct_Flags + 24 * v1 + 19) << 9;
  *(_DWORD *)(a1 + 140) = *((_BYTE *)NPCStruct_Flags + 24 * v1 + 20) << 9;
  *(_DWORD *)(a1 + 148) = *((_BYTE *)NPCStruct_Flags + 24 * v1 + 22) << 9;
  *(_DWORD *)(a1 + 144) = *((_BYTE *)NPCStruct_Flags + 24 * v1 + 21) << 9;
  result = a1;
  *(_DWORD *)(a1 + 152) = *((_BYTE *)NPCStruct_Flags + 24 * v1 + 23) << 9;
  return result;
}

//----- (0046EFD0) --------------------------------------------------------
int __cdecl NPC_Create(int NPC_ID, int X_Position, int Y_Position, int X_Velocity, int Y_Velocity, int a6, int a7, int a8)
{
  int result; // eax@1
  int i; // [sp+0h] [bp-4h]@1

  result = a8;
  for ( i = a8; i < 512 && *((_BYTE *)&Is_NPC_Alive + 172 * i); ++i )
    result = i + 1;
  if ( i != 512 )
  {
    memset((char *)&Is_NPC_Alive + 172 * i, 0, 0xACu);
    *((_BYTE *)&Is_NPC_Alive + 172 * i) |= 0x80u;
    NPC_Direction[43 * i] = a6;
    NPC_Type[43 * i] = NPC_ID;
    NPC_X_Position[43 * i] = X_Position;
    NPC_Y_Position[43 * i] = Y_Position;
    NPC_X_Velocity[43 * i] = X_Velocity;
    NPC_Y_Velocity[43 * i] = Y_Velocity;
    NPC_Parent_Variable[43 * i] = a7;
    NPC_Flags[86 * i] = *((_WORD *)NPCStruct_Flags + 12 * NPC_Type[43 * i]);
    NPC_EXP_Health_Missiles_Dropped[43 * i] = *((_DWORD *)NPCStruct_Flags + 6 * NPC_Type[43 * i] + 2);
    result = sub_46EE50((int)&Is_NPC_Alive + 172 * i);
  }
  return result;
}
// 4A6228: using guessed type int NPC_X_Position[];
// 4A622C: using guessed type int NPC_Y_Position[];
// 4A6230: using guessed type int NPC_X_Velocity[];
// 4A6234: using guessed type int NPC_Y_Velocity[];
// 4A6248: using guessed type int NPC_Type[];
// 4A6264: using guessed type int NPC_EXP_Health_Missiles_Dropped[];
// 4A626C: using guessed type int NPC_Direction[];
// 4A6270: using guessed type __int16 NPC_Flags[];
// 4A62C8: using guessed type int NPC_Parent_Variable[];

//----- (0046F150) --------------------------------------------------------
int __cdecl sub_46F150(int X_Position, int Y_Position, int maximum, int a4)
{
  int v4; // ST24_4@3
  int v5; // ST20_4@3
  int i; // [sp+8h] [bp-4h]@1
  int maximuma; // [sp+1Ch] [bp+10h]@1

  maximuma = maximum / 512;
  for ( i = 0; i < a4; ++i )
  {
    v4 = RNG_Range(-maximuma, maximuma) << 9;
    v5 = RNG_Range(-maximuma, maximuma) << 9;
    NPC_Create(4, v4 + X_Position, v5 + Y_Position, 0, 0, 0, 0, 256);
  }
  return Create_Animated_Effect(X_Position, Y_Position, 12, 0);
}

//----- (0046F200) --------------------------------------------------------
int __cdecl sub_46F200(int X_Position, int Y_Position, int maximum, int a4)
{
  int v4; // ST24_4@3
  int v5; // ST20_4@3
  int i; // [sp+8h] [bp-4h]@1
  int maximuma; // [sp+1Ch] [bp+10h]@1

  maximuma = maximum / 512;
  for ( i = 0; i < a4; ++i )
  {
    v4 = RNG_Range(-maximuma, maximuma) << 9;
    v5 = RNG_Range(-maximuma, maximuma) << 9;
    NPC_Create(4, v4 + X_Position, v5 + Y_Position, 0, 0, 1, 0, 256);
  }
  return Create_Animated_Effect(X_Position, Y_Position, 12, 0);
}

//----- (0046F2B0) --------------------------------------------------------
int __cdecl Spawn_Exp(int X_Position, int Y_Position, signed int XP_Amount)
{
  int result; // eax@4
  int v4; // [sp+0h] [bp-8h]@0
  signed int i; // [sp+4h] [bp-4h]@1

  for ( i = 256; XP_Amount; result = sub_46EE50((int)&Is_NPC_Alive + 172 * i) )
  {
    while ( i < 512 )
    {
      result = 172 * i;
      if ( !*((_BYTE *)&Is_NPC_Alive + 172 * i) )
        break;
      ++i;
    }
    if ( i == 512 )
      break;
    memset((char *)&Is_NPC_Alive + 172 * i, 0, 0xACu);
    if ( XP_Amount < 20 )
    {
      if ( XP_Amount < 5 )
      {
        if ( XP_Amount >= 1 )
        {
          --XP_Amount;
          v4 = 1;
        }
      }
      else
      {
        XP_Amount -= 5;
        v4 = 5;
      }
    }
    else
    {
      XP_Amount -= 20;
      v4 = 20;
    }
    *((_BYTE *)&Is_NPC_Alive + 172 * i) |= 0x80u;
    NPC_Direction[43 * i] = 0;
    NPC_Type[43 * i] = 1;
    NPC_X_Position[43 * i] = X_Position;
    NPC_Y_Position[43 * i] = Y_Position;
    NPC_Flags[86 * i] = *((_WORD *)NPCStruct_Flags + 12 * NPC_Type[43 * i]);
    NPC_EXP_Health_Missiles_Dropped[43 * i] = v4;
  }
  return result;
}
// 4A6228: using guessed type int NPC_X_Position[];
// 4A622C: using guessed type int NPC_Y_Position[];
// 4A6248: using guessed type int NPC_Type[];
// 4A6264: using guessed type int NPC_EXP_Health_Missiles_Dropped[];
// 4A626C: using guessed type int NPC_Direction[];
// 4A6270: using guessed type __int16 NPC_Flags[];

//----- (0046F430) --------------------------------------------------------
signed int __cdecl Spawn_Missiles(int a1, int a2, int a3)
{
  signed int result; // eax@10
  int v4; // [sp+0h] [bp-38h]@3
  signed int v5; // [sp+4h] [bp-34h]@1
  int ptr[10]; // [sp+8h] [bp-30h]@1
  int v7; // [sp+30h] [bp-8h]@11
  int i; // [sp+34h] [bp-4h]@1

  v5 = 0;
  memset(ptr, 0, 0x28u);
  for ( i = 0; i < 8; ++i )
  {
    v4 = *((_DWORD *)&WeaponData_ID + 5 * i);
    if ( v4 == 5 )
    {
      ptr[v5++] = 0;
    }
    else if ( v4 == 10 )
    {
      ptr[v5++] = 1;
    }
    else
    {
      ptr[v5] = 0;
    }
  }
  if ( v5 )
  {
    i = RNG_Range(1, 10 * v5);
    v7 = ptr[i % v5];
    for ( i = 256; i < 512 && *((_BYTE *)&Is_NPC_Alive + 172 * i); ++i )
      ;
    if ( i == 512 )
    {
      result = 0;
    }
    else
    {
      memset((char *)&Is_NPC_Alive + 172 * i, 0, 0xACu);
      *((_BYTE *)&Is_NPC_Alive + 172 * i) |= 0x80u;
      NPC_Direction[43 * i] = 0;
      NPC_Event_Number[43 * i] = v7;
      NPC_Type[43 * i] = 86;
      NPC_X_Position[43 * i] = a1;
      NPC_Y_Position[43 * i] = a2;
      NPC_Flags[86 * i] = *((_WORD *)NPCStruct_Flags + 12 * NPC_Type[43 * i]);
      NPC_EXP_Health_Missiles_Dropped[43 * i] = a3;
      sub_46EE50((int)&Is_NPC_Alive + 172 * i);
      result = 1;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}
// 4A6228: using guessed type int NPC_X_Position[];
// 4A622C: using guessed type int NPC_Y_Position[];
// 4A6248: using guessed type int NPC_Type[];
// 4A6250: using guessed type int NPC_Event_Number[];
// 4A6264: using guessed type int NPC_EXP_Health_Missiles_Dropped[];
// 4A626C: using guessed type int NPC_Direction[];
// 4A6270: using guessed type __int16 NPC_Flags[];
// 46F430: using guessed type int ptr[10];

//----- (0046F630) --------------------------------------------------------
signed int __cdecl Spawn_HP(int a1, int a2, int a3)
{
  signed int result; // eax@6
  signed int i; // [sp+0h] [bp-4h]@1

  for ( i = 256; i < 512 && *((_BYTE *)&Is_NPC_Alive + 172 * i); ++i )
    ;
  if ( i == 512 )
  {
    result = 0;
  }
  else
  {
    memset((char *)&Is_NPC_Alive + 172 * i, 0, 0xACu);
    *((_BYTE *)&Is_NPC_Alive + 172 * i) |= 0x80u;
    NPC_Direction[43 * i] = 0;
    NPC_Type[43 * i] = 87;
    NPC_X_Position[43 * i] = a1;
    NPC_Y_Position[43 * i] = a2;
    NPC_Flags[86 * i] = *((_WORD *)NPCStruct_Flags + 12 * NPC_Type[43 * i]);
    NPC_EXP_Health_Missiles_Dropped[43 * i] = a3;
    sub_46EE50((int)&Is_NPC_Alive + 172 * i);
    result = 1;
  }
  return result;
}
// 4A6228: using guessed type int NPC_X_Position[];
// 4A622C: using guessed type int NPC_Y_Position[];
// 4A6248: using guessed type int NPC_Type[];
// 4A6264: using guessed type int NPC_EXP_Health_Missiles_Dropped[];
// 4A626C: using guessed type int NPC_Direction[];
// 4A6270: using guessed type __int16 NPC_Flags[];

//----- (0046F760) --------------------------------------------------------
int __cdecl sub_46F760(void *ptr)
{
  int v1; // ST0C_4@1
  int v2; // ST10_4@1

  v1 = *((_DWORD *)ptr + 2);
  v2 = *((_DWORD *)ptr + 3);
  memset(ptr, 0, 0xACu);
  *((_DWORD *)ptr + 27) = 0;
  *((_DWORD *)ptr + 2) = v1;
  *((_DWORD *)ptr + 3) = v2;
  *(_BYTE *)ptr |= 0x80u;
  *((_DWORD *)ptr + 19) = 0;
  *((_DWORD *)ptr + 10) = 3;
  *((_WORD *)ptr + 40) = *((_WORD *)NPCStruct_Flags + 12 * *((_DWORD *)ptr + 10));
  *((_DWORD *)ptr + 17) = *((_DWORD *)NPCStruct_Flags + 6 * *((_DWORD *)ptr + 10) + 2);
  return sub_46EE50((int)ptr);
}
// 4BBA30: using guessed type int dword_4BBA30;

//----- (0046F810) --------------------------------------------------------
void __cdecl sub_46F810(signed int a1, signed int a2)
{
  __int64 v2; // rax@12
  int v3; // ST08_4@12
  __int64 v4; // rax@12
  int v5; // [sp+0h] [bp-Ch]@10
  signed int i; // [sp+4h] [bp-8h]@1
  char v7; // [sp+Bh] [bp-1h]@5

  for ( i = 0; i < 512; ++i )
  {
    if ( *((_BYTE *)&Is_NPC_Alive + 172 * i) & 0x80 )
    {
      if ( NPC_Touching_Bullet_Flag[172 * i] )
      {
        v7 = 2 * (((signed int)(unsigned __int8)NPC_Touching_Bullet_Flag[172 * i] >> 1) % 2) - 1;
      }
      else
      {
        v7 = 0;
        if ( NPC_Flags[86 * i] & 0x8000 && NPC_Damage_Taken[43 * i] )
        {
          sub_425BF0((int)&NPC_X_Position[43 * i], (int)&NPC_Y_Position[43 * i], NPC_Damage_Taken[43 * i]);
          NPC_Damage_Taken[43 * i] = 0;
        }
      }
      if ( NPC_Direction[43 * i] )
        v5 = dword_4A62B4[43 * i];
      else
        v5 = dword_4A62AC[43 * i];
      v2 = NPC_Y_Position[43 * i] - dword_4A62B0[43 * i];
      v3 = (((WORD2(v2) & 0x1FF) + (signed int)v2) >> 9) - a2 / 512;
      v4 = NPC_X_Position[43 * i] - v5;
      Render_Graphics(
        (int)&FullscreenRect,
        v7 + (((WORD2(v4) & 0x1FF) + (signed int)v4) >> 9) - a1 / 512,
        v3,
        (int)&NPC_Rects + 172 * i,
        NPC_Spritesheet[43 * i]);
    }
  }
}
// 48F91C: using guessed type int FullscreenRect;
// 4A6228: using guessed type int NPC_X_Position[];
// 4A622C: using guessed type int NPC_Y_Position[];
// 4A6254: using guessed type int NPC_Spritesheet[];
// 4A626C: using guessed type int NPC_Direction[];
// 4A6270: using guessed type __int16 NPC_Flags[];
// 4A62AC: using guessed type int dword_4A62AC[];
// 4A62B0: using guessed type int dword_4A62B0[];
// 4A62B4: using guessed type int dword_4A62B4[];
// 4A62C0: using guessed type int NPC_Damage_Taken[];

//----- (0046FA00) --------------------------------------------------------
int sub_46FA00()
{
  int result; // eax@6
  signed int i; // [sp+4h] [bp-4h]@1

  for ( i = 0; i < 512; ++i )
  {
    if ( *((_BYTE *)&Is_NPC_Alive + 172 * i) & 0x80 )
    {
      ROM_Ptr_NPC_Code[NPC_Type[43 * i]]((int)&Is_NPC_Alive + 172 * i);
      if ( NPC_Touching_Bullet_Flag[172 * i] )
        --NPC_Touching_Bullet_Flag[172 * i];
    }
    result = i + 1;
  }
  return result;
}
// 498548: using guessed type int (__cdecl *ROM_Ptr_NPC_Code[48])(int);
// 4A6248: using guessed type int NPC_Type[];

//----- (0046FAB0) --------------------------------------------------------
int __cdecl sub_46FAB0(int a1, int a2, int a3)
{
  int result; // eax@13
  signed int i; // [sp+0h] [bp-4h]@1

  for ( i = 0; i < 512; ++i )
  {
    if ( *((_BYTE *)&Is_NPC_Alive + 172 * i) & 0x80 && NPC_Event_Number[43 * i] == a1 )
    {
      NPC_Flags[86 * i] &= 0x7F00u;
      NPC_Type[43 * i] = a2;
      NPC_Flags[86 * i] |= *((_WORD *)NPCStruct_Flags + 12 * NPC_Type[43 * i]);
      NPC_EXP_Health_Missiles_Dropped[43 * i] = *((_DWORD *)NPCStruct_Flags + 6 * NPC_Type[43 * i] + 2);
      sub_46EE50((int)&Is_NPC_Alive + 172 * i);
      *((_BYTE *)&Is_NPC_Alive + 172 * i) |= 0x80u;
      NPC_Generic_4[43 * i] = 0;
      NPC_Generic_5[43 * i] = 0;
      NPC_Generic_2[43 * i] = 0;
      NPC_Generic_3[43 * i] = 0;
      NPC_Generic[43 * i] = 0;
      NPC_Generic__Counter_[43 * i] = 0;
      NPC_X_Velocity[43 * i] = 0;
      NPC_Y_Velocity[43 * i] = 0;
      if ( a3 != 5 )
      {
        if ( a3 == 4 )
        {
          if ( NPC_X_Position[43 * i] >= Quote_X_Position )
            NPC_Direction[43 * i] = 0;
          else
            NPC_Direction[43 * i] = 2;
        }
        else
        {
          NPC_Direction[43 * i] = a3;
        }
      }
      ROM_Ptr_NPC_Code[a2]((int)&Is_NPC_Alive + 172 * i);
    }
    result = i + 1;
  }
  return result;
}
// 498548: using guessed type int (__cdecl *ROM_Ptr_NPC_Code[48])(int);
// 4A6228: using guessed type int NPC_X_Position[];
// 4A6230: using guessed type int NPC_X_Velocity[];
// 4A6234: using guessed type int NPC_Y_Velocity[];
// 4A6248: using guessed type int NPC_Type[];
// 4A6250: using guessed type int NPC_Event_Number[];
// 4A6264: using guessed type int NPC_EXP_Health_Missiles_Dropped[];
// 4A626C: using guessed type int NPC_Direction[];
// 4A6270: using guessed type __int16 NPC_Flags[];
// 4A6284: using guessed type int NPC_Generic__Counter_[];
// 4A6288: using guessed type int NPC_Generic[];
// 4A628C: using guessed type int NPC_Generic_2[];
// 4A6290: using guessed type int NPC_Generic_3[];
// 4A6294: using guessed type int NPC_Generic_4[];
// 4A6298: using guessed type int NPC_Generic_5[];

//----- (0046FD10) --------------------------------------------------------
int __cdecl sub_46FD10(int a1, int a2, int a3)
{
  int result; // eax@13
  signed int i; // [sp+0h] [bp-4h]@1

  for ( i = 0; i < 512; ++i )
  {
    if ( *((_BYTE *)&Is_NPC_Alive + 172 * i) & 0x80 && NPC_Event_Number[43 * i] == a1 )
    {
      NPC_Flags[86 * i] &= 0x7F00u;
      NPC_Flags[86 * i] |= 0x2000u;
      NPC_Type[43 * i] = a2;
      NPC_Flags[86 * i] |= *((_WORD *)NPCStruct_Flags + 12 * NPC_Type[43 * i]);
      NPC_EXP_Health_Missiles_Dropped[43 * i] = *((_DWORD *)NPCStruct_Flags + 6 * NPC_Type[43 * i] + 2);
      sub_46EE50((int)&Is_NPC_Alive + 172 * i);
      *((_BYTE *)&Is_NPC_Alive + 172 * i) |= 0x80u;
      NPC_Generic_4[43 * i] = 0;
      NPC_Generic_5[43 * i] = 0;
      NPC_Generic_2[43 * i] = 0;
      NPC_Generic_3[43 * i] = 0;
      NPC_Generic[43 * i] = 0;
      NPC_Generic__Counter_[43 * i] = 0;
      NPC_X_Velocity[43 * i] = 0;
      NPC_Y_Velocity[43 * i] = 0;
      if ( a3 != 5 )
      {
        if ( a3 == 4 )
        {
          if ( NPC_X_Position[43 * i] >= Quote_X_Position )
            NPC_Direction[43 * i] = 0;
          else
            NPC_Direction[43 * i] = 2;
        }
        else
        {
          NPC_Direction[43 * i] = (char)a3;
        }
      }
      ROM_Ptr_NPC_Code[a2]((int)&Is_NPC_Alive + 172 * i);
    }
    result = i + 1;
  }
  return result;
}
// 498548: using guessed type int (__cdecl *ROM_Ptr_NPC_Code[48])(int);
// 4A6228: using guessed type int NPC_X_Position[];
// 4A6230: using guessed type int NPC_X_Velocity[];
// 4A6234: using guessed type int NPC_Y_Velocity[];
// 4A6248: using guessed type int NPC_Type[];
// 4A6250: using guessed type int NPC_Event_Number[];
// 4A6264: using guessed type int NPC_EXP_Health_Missiles_Dropped[];
// 4A626C: using guessed type int NPC_Direction[];
// 4A6270: using guessed type __int16 NPC_Flags[];
// 4A6284: using guessed type int NPC_Generic__Counter_[];
// 4A6288: using guessed type int NPC_Generic[];
// 4A628C: using guessed type int NPC_Generic_2[];
// 4A6290: using guessed type int NPC_Generic_3[];
// 4A6294: using guessed type int NPC_Generic_4[];
// 4A6298: using guessed type int NPC_Generic_5[];

//----- (0046FF90) --------------------------------------------------------
int __cdecl sub_46FF90(int a1, int a2, int a3)
{
  int result; // eax@3
  signed int i; // [sp+0h] [bp-4h]@1

  for ( i = 0; i < 512; ++i )
  {
    result = 172 * i;
    if ( *((_BYTE *)&Is_NPC_Alive + 172 * i) & 0x80 )
    {
      result = NPC_Event_Number[43 * i];
      if ( result == a1 )
        break;
    }
  }
  if ( i != 512 )
  {
    result = a2;
    NPC_Generic_4[43 * i] = a2;
    if ( a3 != 5 )
    {
      if ( a3 == 4 )
      {
        if ( NPC_X_Position[43 * i] >= Quote_X_Position )
        {
          NPC_Direction[43 * i] = 0;
        }
        else
        {
          result = 172 * i;
          NPC_Direction[43 * i] = 2;
        }
      }
      else
      {
        result = a3;
        NPC_Direction[43 * i] = a3;
      }
    }
  }
  return result;
}
// 4A6228: using guessed type int NPC_X_Position[];
// 4A6250: using guessed type int NPC_Event_Number[];
// 4A626C: using guessed type int NPC_Direction[];
// 4A6294: using guessed type int NPC_Generic_4[];

//----- (00470060) --------------------------------------------------------
int __cdecl sub_470060(int a1, int a2, int a3, int a4)
{
  int result; // eax@3
  signed int i; // [sp+0h] [bp-4h]@1

  for ( i = 0; i < 512; ++i )
  {
    result = 172 * i;
    if ( *((_BYTE *)&Is_NPC_Alive + 172 * i) & 0x80 )
    {
      result = NPC_Event_Number[43 * i];
      if ( result == a1 )
        break;
    }
  }
  if ( i != 512 )
  {
    result = a2;
    NPC_X_Position[43 * i] = a2;
    NPC_Y_Position[43 * i] = a3;
    if ( a4 != 5 )
    {
      if ( a4 == 4 )
      {
        result = 172 * i;
        if ( NPC_X_Position[43 * i] >= Quote_X_Position )
        {
          result = 172 * i;
          NPC_Direction[43 * i] = 0;
        }
        else
        {
          NPC_Direction[43 * i] = 2;
        }
      }
      else
      {
        NPC_Direction[43 * i] = (char)a4;
      }
    }
  }
  return result;
}
// 4A6228: using guessed type int NPC_X_Position[];
// 4A622C: using guessed type int NPC_Y_Position[];
// 4A6250: using guessed type int NPC_Event_Number[];
// 4A626C: using guessed type int NPC_Direction[];

//----- (00470150) --------------------------------------------------------
int __cdecl sub_470150(int a1)
{
  int result; // eax@1
  signed int v2; // [sp+0h] [bp-4h]@1

  v2 = 0;
  result = *(_BYTE *)&Player_Flags & 0xFE;
  *(_BYTE *)&Player_Flags &= 0xFEu;
  Quote_Y_Velocity = -512;
  if ( a1 )
  {
    if ( a1 == 2 )
    {
      *(_DWORD *)&Quote_Direction_Faced = 2;
      Quote_X_Velocity = -512;
    }
    else
    {
      while ( v2 < 512 )
      {
        if ( *((_BYTE *)&Is_NPC_Alive + 172 * v2) & 0x80 )
        {
          result = 172 * v2;
          if ( NPC_Event_Number[43 * v2] == a1 )
            break;
        }
        ++v2;
      }
      if ( v2 != 512 )
      {
        result = 172 * v2;
        if ( NPC_X_Position[43 * v2] >= Quote_X_Position )
        {
          *(_DWORD *)&Quote_Direction_Faced = 2;
          Quote_X_Velocity = -512;
        }
        else
        {
          *(_DWORD *)&Quote_Direction_Faced = 0;
          Quote_X_Velocity = 512;
        }
      }
    }
  }
  else
  {
    *(_DWORD *)&Quote_Direction_Faced = 0;
    Quote_X_Velocity = 512;
  }
  return result;
}
// 49E66C: using guessed type int Quote_X_Velocity;
// 49E670: using guessed type int Quote_Y_Velocity;
// 4A6228: using guessed type int NPC_X_Position[];
// 4A6250: using guessed type int NPC_Event_Number[];

//----- (00470250) --------------------------------------------------------
int __cdecl sub_470250(int a1)
{
  int result; // eax@6
  signed int i; // [sp+0h] [bp-4h]@1

  for ( i = 0; i < 512; ++i )
  {
    if ( *((_BYTE *)&Is_NPC_Alive + 172 * i) & 0x80 )
    {
      if ( NPC_Event_Number[43 * i] == a1 )
      {
        *((_BYTE *)&Is_NPC_Alive + 172 * i) = 0;
        sub_40E890(NPC_Unknown[43 * i]);
      }
    }
    result = i + 1;
  }
  return result;
}
// 4A624C: using guessed type int NPC_Unknown[];
// 4A6250: using guessed type int NPC_Event_Number[];

//----- (004702D0) --------------------------------------------------------
int __cdecl sub_4702D0(int a1, int a2)
{
  int result; // eax@13
  int v3; // [sp+0h] [bp-8h]@6
  signed int i; // [sp+4h] [bp-4h]@1

  for ( i = 0; i < 512; ++i )
  {
    if ( *((_BYTE *)&Is_NPC_Alive + 172 * i) & 0x80 )
    {
      if ( NPC_Type[43 * i] == a1 )
      {
        *((_BYTE *)&Is_NPC_Alive + 172 * i) = 0;
        sub_40E890(NPC_Unknown[43 * i]);
        if ( a2 )
        {
          Play_Sound_Effect(NPC_Death_Sound[43 * i], 1);
          v3 = NPC_Explosion_Size[43 * i];
          switch ( v3 )
          {
            case 1:
              sub_46F150(NPC_X_Position[43 * i], NPC_Y_Position[43 * i], dword_4A62B4[43 * i], 4);
              break;
            case 2:
              sub_46F150(NPC_X_Position[43 * i], NPC_Y_Position[43 * i], dword_4A62B4[43 * i], 8);
              break;
            case 3:
              sub_46F150(NPC_X_Position[43 * i], NPC_Y_Position[43 * i], dword_4A62B4[43 * i], 16);
              break;
          }
        }
      }
    }
    result = i + 1;
  }
  return result;
}
// 4A6228: using guessed type int NPC_X_Position[];
// 4A622C: using guessed type int NPC_Y_Position[];
// 4A6248: using guessed type int NPC_Type[];
// 4A624C: using guessed type int NPC_Unknown[];
// 4A625C: using guessed type int NPC_Death_Sound[];
// 4A6268: using guessed type int NPC_Explosion_Size[];
// 4A62B4: using guessed type int dword_4A62B4[];

//----- (00470490) --------------------------------------------------------
signed int __cdecl sub_470490(int a1)
{
  signed int i; // [sp+0h] [bp-4h]@1

  for ( i = 0; i < 512; ++i )
  {
    if ( *((_BYTE *)&Is_NPC_Alive + 172 * i) & 0x80 && NPC_Type[43 * i] == a1 )
      return 1;
  }
  return 0;
}
// 4A6248: using guessed type int NPC_Type[];

//----- (004704F0) --------------------------------------------------------
bool __cdecl sub_4704F0(int a1)
{
  signed int i; // [sp+0h] [bp-4h]@1

  for ( i = 0; i < 512 && (!(*((_BYTE *)&Is_NPC_Alive + 172 * i) & 0x80) || NPC_Event_Number[43 * i] != a1); ++i )
    ;
  return i < 512;
}
// 4A6250: using guessed type int NPC_Event_Number[];

//----- (004705C0) --------------------------------------------------------
int __cdecl sub_4705C0(int a1, int a2, int a3)
{
  int result; // eax@21
  signed int v4; // [sp+0h] [bp-4h]@1

  v4 = 0;
  if ( *(_DWORD *)(a1 + 12) - *(_DWORD *)(a1 + 128) < (16 * a3 + 5) << 9
    && *(_DWORD *)(a1 + 136) + *(_DWORD *)(a1 + 12) > (16 * a3 - 5) << 9
    && *(_DWORD *)(a1 + 8) - *(_DWORD *)(a1 + 132) < (16 * a2 + 8) << 9
    && *(_DWORD *)(a1 + 8) - *(_DWORD *)(a1 + 132) > a2 << 13 )
  {
    *(_DWORD *)(a1 + 8) = *(_DWORD *)(a1 + 132) + ((16 * a2 + 8) << 9);
    v4 = 1;
  }
  if ( *(_DWORD *)(a1 + 12) - *(_DWORD *)(a1 + 128) < (16 * a3 + 5) << 9
    && *(_DWORD *)(a1 + 136) + *(_DWORD *)(a1 + 12) > (16 * a3 - 5) << 9
    && *(_DWORD *)(a1 + 132) + *(_DWORD *)(a1 + 8) > (16 * a2 - 8) << 9
    && *(_DWORD *)(a1 + 132) + *(_DWORD *)(a1 + 8) < a2 << 13 )
  {
    *(_DWORD *)(a1 + 8) = ((16 * a2 - 8) << 9) - *(_DWORD *)(a1 + 132);
    v4 |= 4u;
  }
  if ( *(_DWORD *)(a1 + 8) - *(_DWORD *)(a1 + 132) < (16 * a2 + 5) << 9
    && *(_DWORD *)(a1 + 132) + *(_DWORD *)(a1 + 8) > (16 * a2 - 5) << 9
    && *(_DWORD *)(a1 + 12) - *(_DWORD *)(a1 + 128) < (16 * a3 + 8) << 9
    && *(_DWORD *)(a1 + 12) - *(_DWORD *)(a1 + 128) > a3 << 13 )
  {
    *(_DWORD *)(a1 + 12) = *(_DWORD *)(a1 + 128) + ((16 * a3 + 8) << 9);
    *(_DWORD *)(a1 + 20) = 0;
    v4 |= 2u;
  }
  if ( *(_DWORD *)(a1 + 8) - *(_DWORD *)(a1 + 132) < (16 * a2 + 5) << 9
    && *(_DWORD *)(a1 + 132) + *(_DWORD *)(a1 + 8) > (16 * a2 - 5) << 9
    && *(_DWORD *)(a1 + 136) + *(_DWORD *)(a1 + 12) > (16 * a3 - 8) << 9
    && *(_DWORD *)(a1 + 136) + *(_DWORD *)(a1 + 12) < a3 << 13 )
  {
    *(_DWORD *)(a1 + 12) = ((16 * a3 - 8) << 9) - *(_DWORD *)(a1 + 136);
    *(_DWORD *)(a1 + 20) = 0;
    v4 |= 8u;
  }
  result = a1;
  *(_DWORD *)(a1 + 4) |= v4;
  return result;
}

//----- (00470870) --------------------------------------------------------
int __cdecl sub_470870(int a1, int a2, int a3)
{
  __int64 v3; // rax@3
  __int64 v4; // rax@5
  int result; // eax@8
  signed int v6; // [sp+4h] [bp-4h]@1

  v6 = 0;
  if ( *(_DWORD *)(a1 + 8) < (16 * a2 + 8) << 9 && *(_DWORD *)(a1 + 8) > (16 * a2 - 8) << 9 )
  {
    v3 = *(_DWORD *)(a1 + 8) - (a2 << 13);
    if ( *(_DWORD *)(a1 + 12) - *(_DWORD *)(a1 + 128) < (a3 << 13) - (((signed int)v3 - HIDWORD(v3)) >> 1) + 2048
      && *(_DWORD *)(a1 + 136) + *(_DWORD *)(a1 + 12) > (16 * a3 - 8) << 9 )
    {
      v4 = *(_DWORD *)(a1 + 8) - (a2 << 13);
      *(_DWORD *)(a1 + 12) = (a3 << 13) - (((signed int)v4 - HIDWORD(v4)) >> 1) + *(_DWORD *)(a1 + 128) + 2048;
      if ( *(_DWORD *)(a1 + 20) < 0 )
        *(_DWORD *)(a1 + 20) = 0;
      v6 = 2;
    }
  }
  result = a1;
  *(_DWORD *)(a1 + 4) |= v6;
  return result;
}

//----- (00470970) --------------------------------------------------------
int __cdecl sub_470970(int a1, int a2, int a3)
{
  __int64 v3; // rax@3
  __int64 v4; // rax@5
  int result; // eax@8
  signed int v6; // [sp+4h] [bp-4h]@1

  v6 = 0;
  if ( *(_DWORD *)(a1 + 8) < (16 * a2 + 8) << 9 && *(_DWORD *)(a1 + 8) > (16 * a2 - 8) << 9 )
  {
    v3 = *(_DWORD *)(a1 + 8) - (a2 << 13);
    if ( *(_DWORD *)(a1 + 12) - *(_DWORD *)(a1 + 128) < (a3 << 13) - (((signed int)v3 - HIDWORD(v3)) >> 1) - 2048
      && *(_DWORD *)(a1 + 136) + *(_DWORD *)(a1 + 12) > (16 * a3 - 8) << 9 )
    {
      v4 = *(_DWORD *)(a1 + 8) - (a2 << 13);
      *(_DWORD *)(a1 + 12) = (a3 << 13) - (((signed int)v4 - HIDWORD(v4)) >> 1) + *(_DWORD *)(a1 + 128) - 2048;
      if ( *(_DWORD *)(a1 + 20) < 0 )
        *(_DWORD *)(a1 + 20) = 0;
      v6 = 2;
    }
  }
  result = a1;
  *(_DWORD *)(a1 + 4) |= v6;
  return result;
}

//----- (00470A70) --------------------------------------------------------
int __cdecl sub_470A70(int a1, int a2, int a3)
{
  __int64 v3; // rax@3
  __int64 v4; // rax@5
  int result; // eax@8
  signed int v6; // [sp+4h] [bp-4h]@1

  v6 = 0;
  if ( *(_DWORD *)(a1 + 8) < (16 * a2 + 8) << 9 && *(_DWORD *)(a1 + 8) > (16 * a2 - 8) << 9 )
  {
    v3 = *(_DWORD *)(a1 + 8) - (a2 << 13);
    if ( *(_DWORD *)(a1 + 12) - *(_DWORD *)(a1 + 128) < (a3 << 13) + (((signed int)v3 - HIDWORD(v3)) >> 1) - 2048
      && *(_DWORD *)(a1 + 136) + *(_DWORD *)(a1 + 12) > (16 * a3 - 8) << 9 )
    {
      v4 = *(_DWORD *)(a1 + 8) - (a2 << 13);
      *(_DWORD *)(a1 + 12) = (((signed int)v4 - HIDWORD(v4)) >> 1) + (a3 << 13) + *(_DWORD *)(a1 + 128) - 2048;
      if ( *(_DWORD *)(a1 + 20) < 0 )
        *(_DWORD *)(a1 + 20) = 0;
      v6 = 2;
    }
  }
  result = a1;
  *(_DWORD *)(a1 + 4) |= v6;
  return result;
}

//----- (00470B70) --------------------------------------------------------
int __cdecl sub_470B70(int a1, int a2, int a3)
{
  __int64 v3; // rax@3
  __int64 v4; // rax@5
  int result; // eax@8
  signed int v6; // [sp+4h] [bp-4h]@1

  v6 = 0;
  if ( *(_DWORD *)(a1 + 8) < (16 * a2 + 8) << 9 && *(_DWORD *)(a1 + 8) > (16 * a2 - 8) << 9 )
  {
    v3 = *(_DWORD *)(a1 + 8) - (a2 << 13);
    if ( *(_DWORD *)(a1 + 12) - *(_DWORD *)(a1 + 128) < (a3 << 13) + (((signed int)v3 - HIDWORD(v3)) >> 1) + 2048
      && *(_DWORD *)(a1 + 136) + *(_DWORD *)(a1 + 12) > (16 * a3 - 8) << 9 )
    {
      v4 = *(_DWORD *)(a1 + 8) - (a2 << 13);
      *(_DWORD *)(a1 + 12) = (((signed int)v4 - HIDWORD(v4)) >> 1) + (a3 << 13) + *(_DWORD *)(a1 + 128) + 2048;
      if ( *(_DWORD *)(a1 + 20) < 0 )
        *(_DWORD *)(a1 + 20) = 0;
      v6 = 2;
    }
  }
  result = a1;
  *(_DWORD *)(a1 + 4) |= v6;
  return result;
}

//----- (00470C70) --------------------------------------------------------
int __cdecl sub_470C70(int a1, int a2, int a3)
{
  __int64 v3; // rax@3
  __int64 v4; // rax@5
  int result; // eax@8
  signed int v6; // [sp+4h] [bp-4h]@1

  v6 = 0x10000;
  if ( *(_DWORD *)(a1 + 8) < (16 * a2 + 8) << 9 && *(_DWORD *)(a1 + 8) > (16 * a2 - 8) << 9 )
  {
    v3 = *(_DWORD *)(a1 + 8) - (a2 << 13);
    if ( *(_DWORD *)(a1 + 136) + *(_DWORD *)(a1 + 12) > (a3 << 13) + (((signed int)v3 - HIDWORD(v3)) >> 1) - 2048
      && *(_DWORD *)(a1 + 12) - *(_DWORD *)(a1 + 128) < (16 * a3 + 8) << 9 )
    {
      v4 = *(_DWORD *)(a1 + 8) - (a2 << 13);
      *(_DWORD *)(a1 + 12) = (a3 << 13) + (((signed int)v4 - HIDWORD(v4)) >> 1) - 2048 - *(_DWORD *)(a1 + 136);
      if ( *(_DWORD *)(a1 + 20) > 0 )
        *(_DWORD *)(a1 + 20) = 0;
      v6 = 65576;
    }
  }
  result = a1;
  *(_DWORD *)(a1 + 4) |= v6;
  return result;
}

//----- (00470D80) --------------------------------------------------------
int __cdecl sub_470D80(int a1, int a2, int a3)
{
  __int64 v3; // rax@3
  __int64 v4; // rax@5
  int result; // eax@8
  signed int v6; // [sp+4h] [bp-4h]@1

  v6 = 0x20000;
  if ( *(_DWORD *)(a1 + 8) < (16 * a2 + 8) << 9 && *(_DWORD *)(a1 + 8) >= (16 * a2 - 8) << 9 )
  {
    v3 = *(_DWORD *)(a1 + 8) - (a2 << 13);
    if ( *(_DWORD *)(a1 + 136) + *(_DWORD *)(a1 + 12) > (a3 << 13) + (((signed int)v3 - HIDWORD(v3)) >> 1) + 2048
      && *(_DWORD *)(a1 + 12) - *(_DWORD *)(a1 + 128) < (16 * a3 + 8) << 9 )
    {
      v4 = *(_DWORD *)(a1 + 8) - (a2 << 13);
      *(_DWORD *)(a1 + 12) = (a3 << 13) + (((signed int)v4 - HIDWORD(v4)) >> 1) + 2048 - *(_DWORD *)(a1 + 136);
      if ( *(_DWORD *)(a1 + 20) > 0 )
        *(_DWORD *)(a1 + 20) = 0;
      v6 = 131112;
    }
  }
  result = a1;
  *(_DWORD *)(a1 + 4) |= v6;
  return result;
}

//----- (00470E90) --------------------------------------------------------
int __cdecl sub_470E90(int a1, int a2, int a3)
{
  __int64 v3; // rax@3
  __int64 v4; // rax@5
  int result; // eax@8
  signed int v6; // [sp+4h] [bp-4h]@1

  v6 = 0x40000;
  if ( *(_DWORD *)(a1 + 8) < (16 * a2 + 8) << 9 && *(_DWORD *)(a1 + 8) > (16 * a2 - 8) << 9 )
  {
    v3 = *(_DWORD *)(a1 + 8) - (a2 << 13);
    if ( *(_DWORD *)(a1 + 136) + *(_DWORD *)(a1 + 12) > (a3 << 13) - (((signed int)v3 - HIDWORD(v3)) >> 1) + 2048
      && *(_DWORD *)(a1 + 12) - *(_DWORD *)(a1 + 128) < (16 * a3 + 8) << 9 )
    {
      v4 = *(_DWORD *)(a1 + 8) - (a2 << 13);
      *(_DWORD *)(a1 + 12) = (a3 << 13) - (((signed int)v4 - HIDWORD(v4)) >> 1) + 2048 - *(_DWORD *)(a1 + 136);
      if ( *(_DWORD *)(a1 + 20) > 0 )
        *(_DWORD *)(a1 + 20) = 0;
      v6 = 262168;
    }
  }
  result = a1;
  *(_DWORD *)(a1 + 4) |= v6;
  return result;
}

//----- (00470FA0) --------------------------------------------------------
int __cdecl sub_470FA0(int a1, int a2, int a3)
{
  __int64 v3; // rax@3
  __int64 v4; // rax@5
  int result; // eax@8
  signed int v6; // [sp+4h] [bp-4h]@1

  v6 = 0x80000;
  if ( *(_DWORD *)(a1 + 8) < (16 * a2 + 8) << 9 && *(_DWORD *)(a1 + 8) > (16 * a2 - 8) << 9 )
  {
    v3 = *(_DWORD *)(a1 + 8) - (a2 << 13);
    if ( *(_DWORD *)(a1 + 136) + *(_DWORD *)(a1 + 12) > (a3 << 13) - (((signed int)v3 - HIDWORD(v3)) >> 1) - 2048
      && *(_DWORD *)(a1 + 12) - *(_DWORD *)(a1 + 128) < (16 * a3 + 8) << 9 )
    {
      v4 = *(_DWORD *)(a1 + 8) - (a2 << 13);
      *(_DWORD *)(a1 + 12) = (a3 << 13) - (((signed int)v4 - HIDWORD(v4)) >> 1) - 2048 - *(_DWORD *)(a1 + 136);
      if ( *(_DWORD *)(a1 + 20) > 0 )
        *(_DWORD *)(a1 + 20) = 0;
      v6 = 524312;
    }
  }
  result = a1;
  *(_DWORD *)(a1 + 4) |= v6;
  return result;
}

//----- (004710B0) --------------------------------------------------------
int __cdecl sub_4710B0(int a1, int a2, int a3)
{
  int result; // eax@6
  signed int v4; // [sp+0h] [bp-4h]@1

  v4 = 0;
  if ( *(_DWORD *)(a1 + 8) - *(_DWORD *)(a1 + 132) < (16 * a2 + 6) << 9
    && *(_DWORD *)(a1 + 132) + *(_DWORD *)(a1 + 8) > (16 * a2 - 6) << 9
    && *(_DWORD *)(a1 + 12) - *(_DWORD *)(a1 + 128) < (16 * a3 + 6) << 9
    && *(_DWORD *)(a1 + 136) + *(_DWORD *)(a1 + 12) > (16 * a3 - 6) << 9 )
  {
    v4 = 256;
  }
  result = v4 | *(_DWORD *)(a1 + 4);
  *(_DWORD *)(a1 + 4) = result;
  return result;
}

//----- (00471160) --------------------------------------------------------
void sub_471160()
{
  __int64 v0; // rax@7
  __int64 v1; // rax@7
  __int64 v2; // rax@8
  __int64 v3; // rax@8
  signed int v4; // [sp+4h] [bp-5Ch]@7
  int v5; // [sp+8h] [bp-58h]@1
  int v6; // [sp+Ch] [bp-54h]@1
  int v7; // [sp+10h] [bp-50h]@1
  int v8; // [sp+14h] [bp-4Ch]@1
  int v9; // [sp+18h] [bp-48h]@1
  int v10; // [sp+1Ch] [bp-44h]@1
  int v11; // [sp+20h] [bp-40h]@1
  int v12; // [sp+24h] [bp-3Ch]@1
  int v13; // [sp+28h] [bp-38h]@1
  int j; // [sp+2Ch] [bp-34h]@9
  int v15; // [sp+30h] [bp-30h]@1
  int v16; // [sp+34h] [bp-2Ch]@1
  int v17; // [sp+38h] [bp-28h]@1
  int v18; // [sp+3Ch] [bp-24h]@1
  int v19; // [sp+40h] [bp-20h]@1
  int v20; // [sp+44h] [bp-1Ch]@1
  int v21; // [sp+48h] [bp-18h]@1
  int v22; // [sp+4Ch] [bp-14h]@1
  int v23; // [sp+50h] [bp-10h]@1
  int i; // [sp+54h] [bp-Ch]@1
  int v25; // [sp+58h] [bp-8h]@7
  int v26; // [sp+5Ch] [bp-4h]@7

  v5 = 0;
  v6 = 1;
  v7 = 0;
  v8 = 1;
  v9 = 2;
  v10 = 2;
  v11 = 2;
  v12 = 0;
  v13 = 1;
  v15 = 0;
  v16 = 0;
  v17 = 1;
  v18 = 1;
  v19 = 0;
  v20 = 1;
  v21 = 2;
  v22 = 2;
  v23 = 2;
  for ( i = 0; i < 512; ++i )
  {
    if ( *((_BYTE *)&Is_NPC_Alive + 172 * i) & 0x80 && !(NPC_Flags[86 * i] & 8) )
    {
      if ( NPC_Explosion_Size[43 * i] < 3 )
      {
        v4 = 4;
        v2 = NPC_X_Position[43 * i] / 16;
        v25 = ((WORD2(v2) & 0x1FF) + (signed int)v2) >> 9;
        v3 = NPC_Y_Position[43 * i] / 16;
        v26 = ((WORD2(v3) & 0x1FF) + (signed int)v3) >> 9;
      }
      else
      {
        v4 = 9;
        v0 = NPC_X_Position[43 * i] - 4096;
        v25 = (((BYTE4(v0) & 0xF) + (signed int)v0) >> 4) / 512;
        v1 = NPC_Y_Position[43 * i] - 4096;
        v26 = (((BYTE4(v1) & 0xF) + (signed int)v1) >> 4) / 512;
      }
      Collision_Flag[43 * i] = 0;
      for ( j = 0; j < v4; ++j )
      {
        switch ( sub_4139A0(*(&v5 + j) + v25, *(&v15 + j) + v26) )
        {
          case 0x44:
            if ( !(NPC_Flags[86 * i] & 2) )
              goto LABEL_13;
            break;
          case 3:
          case 5:
          case 0x41:
          case 0x43:
LABEL_13:
            sub_4705C0((int)&Is_NPC_Alive + 172 * i, *(&v5 + j) + v25, *(&v15 + j) + v26);
            break;
          case 0x50:
            sub_470870((int)&Is_NPC_Alive + 172 * i, *(&v5 + j) + v25, *(&v15 + j) + v26);
            break;
          case 0x51:
            sub_470970((int)&Is_NPC_Alive + 172 * i, *(&v5 + j) + v25, *(&v15 + j) + v26);
            break;
          case 0x52:
            sub_470A70((int)&Is_NPC_Alive + 172 * i, *(&v5 + j) + v25, *(&v15 + j) + v26);
            break;
          case 0x53:
            sub_470B70((int)&Is_NPC_Alive + 172 * i, *(&v5 + j) + v25, *(&v15 + j) + v26);
            break;
          case 0x54:
            sub_470C70((int)&Is_NPC_Alive + 172 * i, *(&v5 + j) + v25, *(&v15 + j) + v26);
            break;
          case 0x55:
            sub_470D80((int)&Is_NPC_Alive + 172 * i, *(&v5 + j) + v25, *(&v15 + j) + v26);
            break;
          case 0x56:
            sub_470E90((int)&Is_NPC_Alive + 172 * i, *(&v5 + j) + v25, *(&v15 + j) + v26);
            break;
          case 0x57:
            sub_470FA0((int)&Is_NPC_Alive + 172 * i, *(&v5 + j) + v25, *(&v15 + j) + v26);
            break;
          case 2:
          case 0x60:
          case 0x62:
            sub_4710B0((int)&Is_NPC_Alive + 172 * i, *(&v5 + j) + v25, *(&v15 + j) + v26);
            break;
          case 4:
          case 0x61:
          case 0x64:
            sub_4705C0((int)&Is_NPC_Alive + 172 * i, *(&v5 + j) + v25, *(&v15 + j) + v26);
            sub_4710B0((int)&Is_NPC_Alive + 172 * i, *(&v5 + j) + v25, *(&v15 + j) + v26);
            break;
          case 0x70:
            sub_470870((int)&Is_NPC_Alive + 172 * i, *(&v5 + j) + v25, *(&v15 + j) + v26);
            sub_4710B0((int)&Is_NPC_Alive + 172 * i, *(&v5 + j) + v25, *(&v15 + j) + v26);
            break;
          case 0x71:
            sub_470970((int)&Is_NPC_Alive + 172 * i, *(&v5 + j) + v25, *(&v15 + j) + v26);
            sub_4710B0((int)&Is_NPC_Alive + 172 * i, *(&v5 + j) + v25, *(&v15 + j) + v26);
            break;
          case 0x72:
            sub_470A70((int)&Is_NPC_Alive + 172 * i, *(&v5 + j) + v25, *(&v15 + j) + v26);
            sub_4710B0((int)&Is_NPC_Alive + 172 * i, *(&v5 + j) + v25, *(&v15 + j) + v26);
            break;
          case 0x73:
            sub_470B70((int)&Is_NPC_Alive + 172 * i, *(&v5 + j) + v25, *(&v15 + j) + v26);
            sub_4710B0((int)&Is_NPC_Alive + 172 * i, *(&v5 + j) + v25, *(&v15 + j) + v26);
            break;
          case 0x74:
            sub_470C70((int)&Is_NPC_Alive + 172 * i, *(&v5 + j) + v25, *(&v15 + j) + v26);
            sub_4710B0((int)&Is_NPC_Alive + 172 * i, *(&v5 + j) + v25, *(&v15 + j) + v26);
            break;
          case 0x75:
            sub_470D80((int)&Is_NPC_Alive + 172 * i, *(&v5 + j) + v25, *(&v15 + j) + v26);
            sub_4710B0((int)&Is_NPC_Alive + 172 * i, *(&v5 + j) + v25, *(&v15 + j) + v26);
            break;
          case 0x76:
            sub_470E90((int)&Is_NPC_Alive + 172 * i, *(&v5 + j) + v25, *(&v15 + j) + v26);
            sub_4710B0((int)&Is_NPC_Alive + 172 * i, *(&v5 + j) + v25, *(&v15 + j) + v26);
            break;
          case 0x77:
            sub_470FA0((int)&Is_NPC_Alive + 172 * i, *(&v5 + j) + v25, *(&v15 + j) + v26);
            sub_4710B0((int)&Is_NPC_Alive + 172 * i, *(&v5 + j) + v25, *(&v15 + j) + v26);
            break;
          case 0xA0:
            Collision_Flag[43 * i] |= 0x100u;
            goto LABEL_33;
          case 0x80:
LABEL_33:
            Collision_Flag[43 * i] |= 0x1000u;
            break;
          case 0xA1:
            Collision_Flag[43 * i] |= 0x100u;
            goto LABEL_35;
          case 0x81:
LABEL_35:
            Collision_Flag[43 * i] |= 0x2000u;
            break;
          case 0xA2:
            Collision_Flag[43 * i] |= 0x100u;
            goto LABEL_37;
          case 0x82:
LABEL_37:
            Collision_Flag[43 * i] |= 0x4000u;
            break;
          case 0xA3:
            Collision_Flag[43 * i] |= 0x100u;
            goto LABEL_39;
          case 0x83:
LABEL_39:
            Collision_Flag[43 * i] |= 0x8000u;
            break;
          default:
            break;
        }
        if ( NPC_Y_Position[43 * i] > GlobalWaterDepth + 2048 )
          Collision_Flag[43 * i] |= 0x100u;
      }
    }
  }
}
// 499C90: using guessed type int GlobalWaterDepth;
// 4A6224: using guessed type int Collision_Flag[];
// 4A6228: using guessed type int NPC_X_Position[];
// 4A622C: using guessed type int NPC_Y_Position[];
// 4A6268: using guessed type int NPC_Explosion_Size[];
// 4A6270: using guessed type __int16 NPC_Flags[];

//----- (00471B80) --------------------------------------------------------
void *__cdecl sub_471B80(void *a1, int a2)
{
  signed int v2; // eax@17
  void *result; // eax@21
  int v4; // [sp+0h] [bp-Ch]@9
  int v5; // [sp+4h] [bp-8h]@1

  Play_Sound_Effect(*((_DWORD *)a1 + 15), 1);
  v5 = *((_DWORD *)a1 + 18);
  switch ( v5 )
  {
    case 1:
      sub_46F150(*((_DWORD *)a1 + 2), *((_DWORD *)a1 + 3), *((_DWORD *)a1 + 37), 3);
      break;
    case 2:
      sub_46F150(*((_DWORD *)a1 + 2), *((_DWORD *)a1 + 3), *((_DWORD *)a1 + 37), 7);
      break;
    case 3:
      sub_46F150(*((_DWORD *)a1 + 2), *((_DWORD *)a1 + 3), *((_DWORD *)a1 + 37), 12);
      break;
  }
  if ( *((_DWORD *)a1 + 17) )
  {
    v4 = RNG_Range(1, 5);
    if ( v4 == 1 )
    {
      if ( *((_DWORD *)a1 + 17) <= 6 )
        Spawn_HP(*((_DWORD *)a1 + 2), *((_DWORD *)a1 + 3), 2);
      else
        Spawn_HP(*((_DWORD *)a1 + 2), *((_DWORD *)a1 + 3), 6);
    }
    else if ( v4 != 2
           || (*((_DWORD *)a1 + 17) <= 6 ? (v2 = Spawn_Missiles(*((_DWORD *)a1 + 2), *((_DWORD *)a1 + 3), 1)) : (v2 = Spawn_Missiles(*((_DWORD *)a1 + 2), *((_DWORD *)a1 + 3), 3)),
               !v2) )
    {
      Spawn_Exp(*((_DWORD *)a1 + 2), *((_DWORD *)a1 + 3), *((_DWORD *)a1 + 17));
    }
  }
  result = (void *)sub_40E890(*((_DWORD *)a1 + 11));
  if ( *((_WORD *)a1 + 40) & 0x8000 )
  {
    result = a1;
    if ( *((_WORD *)a1 + 40) & 0x8000 && *((_DWORD *)a1 + 40) )
      result = (void *)sub_425BF0((int)a1 + 8, (int)a1 + 12, *((_DWORD *)a1 + 40));
    if ( a2 )
      result = (void *)sub_46F760(a1);
  }
  else
  {
    *(_BYTE *)a1 = 0;
  }
  return result;
}

//----- (00471D50) --------------------------------------------------------
int sub_471D50()
{
  int result; // eax@2
  __int64 v1; // rax@35
  int v2; // ST04_4@35
  __int64 v3; // rax@35
  __int64 v4; // rax@35
  int v5; // ST04_4@35
  __int64 v6; // rax@35
  __int64 v7; // rax@35
  int v8; // ST04_4@35
  __int64 v9; // rax@35
  __int64 v10; // rax@47
  int v11; // ST04_4@47
  __int64 v12; // rax@47
  signed int j; // [sp+0h] [bp-Ch]@7
  signed int v14; // [sp+4h] [bp-8h]@12
  signed int i; // [sp+8h] [bp-4h]@1

  for ( i = 0; i < 512; ++i )
  {
    if ( !(*((_BYTE *)&Is_NPC_Alive + 172 * i) & 0x80) || NPC_Flags[86 * i] & 0x20 && NPC_Flags[86 * i] & 0x2000 )
      goto LABEL_2;
    for ( j = 0; j < 64; ++j )
    {
      if ( WeaponObj_In_Use[32 * j] & 0x80 && WeaponObj_Damage[32 * j] != -1 )
      {
        v14 = 0;
        if ( NPC_Flags[86 * i] & 0x20
          && NPC_X_Position[43 * i] - *(&NPC_Hitbox.right + 43 * i) < dword_499CF8[32 * j]
                                                                    + WeaponObj_X_Position[32 * j]
          && *(&NPC_Hitbox.right + 43 * i) + NPC_X_Position[43 * i] > WeaponObj_X_Position[32 * j]
                                                                    - dword_499CF8[32 * j]
          && NPC_Y_Position[43 * i] - *(&NPC_Hitbox.top + 43 * i) < dword_499CFC[32 * j] + WeaponObj_Y_Position[32 * j]
          && *(&NPC_Hitbox.bottom + 43 * i) + NPC_Y_Position[43 * i] > WeaponObj_Y_Position[32 * j]
                                                                     - dword_499CFC[32 * j] )
        {
          v14 = 1;
        }
        else if ( NPC_Flags[86 * i] & 4
               && NPC_X_Position[43 * i] - *(&NPC_Hitbox.right + 43 * i) < dword_499D00[32 * j]
                                                                         + WeaponObj_X_Position[32 * j]
               && *(&NPC_Hitbox.right + 43 * i) + NPC_X_Position[43 * i] > WeaponObj_X_Position[32 * j]
                                                                         - dword_499D00[32 * j]
               && NPC_Y_Position[43 * i] - *(&NPC_Hitbox.top + 43 * i) < dword_499D04[32 * j]
                                                                       + WeaponObj_Y_Position[32 * j]
               && *(&NPC_Hitbox.bottom + 43 * i) + NPC_Y_Position[43 * i] > WeaponObj_Y_Position[32 * j]
                                                                          - dword_499D04[32 * j] )
        {
          v14 = 1;
        }
        if ( v14 )
        {
          if ( NPC_Flags[86 * i] & 0x20 )
          {
            NPC_Current_Health[43 * i] -= WeaponObj_Damage[32 * j];
            if ( NPC_Current_Health[43 * i] >= 1 )
            {
              if ( (signed int)(unsigned __int8)NPC_Touching_Bullet_Flag[172 * i] < 14 )
              {
                v1 = NPC_Y_Position[43 * i] + WeaponObj_Y_Position[32 * j];
                v2 = ((signed int)v1 - HIDWORD(v1)) >> 1;
                v3 = NPC_X_Position[43 * i] + WeaponObj_X_Position[32 * j];
                Create_Animated_Effect(((signed int)v3 - HIDWORD(v3)) >> 1, v2, 11, 0);
                v4 = NPC_Y_Position[43 * i] + WeaponObj_Y_Position[32 * j];
                v5 = ((signed int)v4 - HIDWORD(v4)) >> 1;
                v6 = NPC_X_Position[43 * i] + WeaponObj_X_Position[32 * j];
                Create_Animated_Effect(((signed int)v6 - HIDWORD(v6)) >> 1, v5, 11, 0);
                v7 = NPC_Y_Position[43 * i] + WeaponObj_Y_Position[32 * j];
                v8 = ((signed int)v7 - HIDWORD(v7)) >> 1;
                v9 = NPC_X_Position[43 * i] + WeaponObj_X_Position[32 * j];
                Create_Animated_Effect(((signed int)v9 - HIDWORD(v9)) >> 1, v8, 11, 0);
                Play_Sound_Effect(NPC_Sound_When_Hit[43 * i], 1);
                NPC_Touching_Bullet_Flag[172 * i] = 16;
              }
              if ( NPC_Flags[86 * i] & 0x8000 )
                NPC_Damage_Taken[43 * i] -= WeaponObj_Damage[32 * j];
            }
            else
            {
              NPC_Current_Health[43 * i] = 0;
              if ( NPC_Flags[86 * i] & 0x8000 )
                NPC_Damage_Taken[43 * i] -= WeaponObj_Damage[32 * j];
              if ( *(_BYTE *)&Player_Flags & 0x80 && NPC_Flags[86 * i] & 0x200 )
                Call_TSC_Event(NPC_Event_Number[43 * i]);
              else
                *((_BYTE *)&Is_NPC_Alive + 172 * i) |= 8u;
            }
          }
          else if ( WeaponObj_ShotID[32 * j] != 13
                 && WeaponObj_ShotID[32 * j] != 14
                 && WeaponObj_ShotID[32 * j] != 15
                 && WeaponObj_ShotID[32 * j] != 28
                 && WeaponObj_ShotID[32 * j] != 29
                 && WeaponObj_ShotID[32 * j] != 30
                 && !(WeaponObj_Flags[32 * j] & 0x10) )
          {
            v10 = NPC_Y_Position[43 * i] + WeaponObj_Y_Position[32 * j];
            v11 = ((signed int)v10 - HIDWORD(v10)) >> 1;
            v12 = NPC_X_Position[43 * i] + WeaponObj_X_Position[32 * j];
            Create_Animated_Effect(((signed int)v12 - HIDWORD(v12)) >> 1, v11, 2, 2);
            Play_Sound_Effect(31, 1);
            WeaponObj_Num_Impacts[32 * j] = 0;
            continue;
          }
          --WeaponObj_Num_Impacts[32 * j];
        }
      }
    }
    if ( *((_BYTE *)&Is_NPC_Alive + 172 * i) & 8 )
      sub_471B80((char *)&Is_NPC_Alive + 172 * i, 1);
LABEL_2:
    result = i + 1;
  }
  return result;
}
// 499C9C: using guessed type int WeaponObj_ShotID[];
// 499CA0: using guessed type int WeaponObj_Flags[];
// 499CA4: using guessed type int WeaponObj_In_Use[];
// 499CA8: using guessed type int WeaponObj_X_Position[];
// 499CAC: using guessed type int WeaponObj_Y_Position[];
// 499CF0: using guessed type int WeaponObj_Damage[];
// 499CF4: using guessed type int WeaponObj_Num_Impacts[];
// 499CF8: using guessed type int dword_499CF8[];
// 499CFC: using guessed type int dword_499CFC[];
// 499D00: using guessed type int dword_499D00[];
// 499D04: using guessed type int dword_499D04[];
// 4A6228: using guessed type int NPC_X_Position[];
// 4A622C: using guessed type int NPC_Y_Position[];
// 4A6250: using guessed type int NPC_Event_Number[];
// 4A6258: using guessed type int NPC_Sound_When_Hit[];
// 4A6260: using guessed type int NPC_Current_Health[];
// 4A6270: using guessed type __int16 NPC_Flags[];
// 4A62C0: using guessed type int NPC_Damage_Taken[];

//----- (00472400) --------------------------------------------------------
int __cdecl sub_472400(LPCSTR lpFileName)
{
  int result; // eax@2
  unsigned int v2; // [sp+0h] [bp-10h]@1
  FILE *stream; // [sp+4h] [bp-Ch]@5
  signed int v4; // [sp+8h] [bp-8h]@3
  signed int i; // [sp+Ch] [bp-4h]@7
  signed int j; // [sp+Ch] [bp-4h]@10
  signed int k; // [sp+Ch] [bp-4h]@13
  signed int l; // [sp+Ch] [bp-4h]@16
  signed int m; // [sp+Ch] [bp-4h]@19
  signed int n; // [sp+Ch] [bp-4h]@22
  signed int ii; // [sp+Ch] [bp-4h]@25
  signed int jj; // [sp+Ch] [bp-4h]@28
  signed int kk; // [sp+Ch] [bp-4h]@31
  signed int ll; // [sp+Ch] [bp-4h]@34

  v2 = FileLength((char *)lpFileName);
  if ( v2 == -1 )
  {
    result = 0;
  }
  else
  {
    v4 = v2 / 0x18;
    NPCStruct_Flags = malloc(24 * (v2 / 0x18));
    if ( NPCStruct_Flags )
    {
      stream = fopen(lpFileName, "rb");
      if ( stream )
      {
        for ( i = 0; i < v4; ++i )
          sub_480F55((FILE *)((char *)NPCStruct_Flags + 24 * i), 2u, 1u, stream);
        for ( j = 0; j < v4; ++j )
          sub_480F55((FILE *)((char *)NPCStruct_Flags + 24 * j + 2), 2u, 1u, stream);
        for ( k = 0; k < v4; ++k )
          sub_480F55((FILE *)((char *)NPCStruct_Flags + 24 * k + 4), 1u, 1u, stream);
        for ( l = 0; l < v4; ++l )
          sub_480F55((FILE *)((char *)NPCStruct_Flags + 24 * l + 6), 1u, 1u, stream);
        for ( m = 0; m < v4; ++m )
          sub_480F55((FILE *)((char *)NPCStruct_Flags + 24 * m + 5), 1u, 1u, stream);
        for ( n = 0; n < v4; ++n )
          sub_480F55((FILE *)((char *)NPCStruct_Flags + 24 * n + 7), 1u, 1u, stream);
        for ( ii = 0; ii < v4; ++ii )
          sub_480F55((FILE *)((char *)NPCStruct_Flags + 24 * ii + 8), 4u, 1u, stream);
        for ( jj = 0; jj < v4; ++jj )
          sub_480F55((FILE *)((char *)NPCStruct_Flags + 24 * jj + 12), 4u, 1u, stream);
        for ( kk = 0; kk < v4; ++kk )
          sub_480F55((FILE *)((char *)NPCStruct_Flags + 24 * kk + 16), 4u, 1u, stream);
        for ( ll = 0; ll < v4; ++ll )
          sub_480F55((FILE *)((char *)NPCStruct_Flags + 24 * ll + 20), 4u, 1u, stream);
        fclose(stream);
        result = 1;
      }
      else
      {
        free(NPCStruct_Flags);
        NPCStruct_Flags = 0;
        result = 0;
      }
    }
    else
    {
      result = 0;
    }
  }
  return result;
}

//----- (00472710) --------------------------------------------------------
void sub_472710()
{
  if ( NPCStruct_Flags )
  {
    free(NPCStruct_Flags);
    NPCStruct_Flags = 0;
  }
}

//----- (00472740) --------------------------------------------------------
int __cdecl sub_472740(int a1)
{
  int result; // eax@1

  memset(&byte_4BBA58, 0, 0xD70u);
  *(_BYTE *)&byte_4BBA58 = -128;
  result = a1;
  dword_4BBA80 = a1;
  return result;
}
// 4BBA80: using guessed type int dword_4BBA80;

//----- (00472770) --------------------------------------------------------
void __cdecl sub_472770(signed int a1, signed int a2)
{
  __int64 v2; // rax@12
  int v3; // ST08_4@12
  __int64 v4; // rax@12
  int v5; // [sp+0h] [bp-Ch]@10
  signed int i; // [sp+4h] [bp-8h]@1
  char v7; // [sp+Bh] [bp-1h]@5

  for ( i = 19; i >= 0; --i )
  {
    if ( *((_BYTE *)&byte_4BBA58 + 172 * i) & 0x80 )
    {
      if ( byte_4BBAF4[172 * i] )
      {
        v7 = 2 * (((signed int)(unsigned __int8)byte_4BBAF4[172 * i] >> 1) % 2) - 1;
      }
      else
      {
        v7 = 0;
        if ( word_4BBAA8[86 * i] & 0x8000 && dword_4BBAF8[43 * i] )
        {
          sub_425BF0((int)(&dword_4BBA60 + 43 * i), (int)(&dword_4BBA64 + 43 * i), dword_4BBAF8[43 * i]);
          dword_4BBAF8[43 * i] = 0;
        }
      }
      if ( dword_4BBAA4[43 * i] )
        v5 = dword_4BBAEC[43 * i];
      else
        v5 = dword_4BBAE4[43 * i];
      v2 = *(&dword_4BBA64 + 43 * i) - dword_4BBAE8[43 * i];
      v3 = (((WORD2(v2) & 0x1FF) + (signed int)v2) >> 9) - a2 / 512;
      v4 = *(&dword_4BBA60 + 43 * i) - v5;
      Render_Graphics(
        (int)&FullscreenRect,
        v7 + (((WORD2(v4) & 0x1FF) + (signed int)v4) >> 9) - a1 / 512,
        v3,
        (int)&dword_4BBAAC[43 * i],
        22);
    }
  }
}
// 48F91C: using guessed type int FullscreenRect;
// 4BBAA4: using guessed type int dword_4BBAA4[];
// 4BBAA8: using guessed type __int16 word_4BBAA8[];
// 4BBAAC: using guessed type int dword_4BBAAC[];
// 4BBAE4: using guessed type int dword_4BBAE4[];
// 4BBAE8: using guessed type int dword_4BBAE8[];
// 4BBAEC: using guessed type int dword_4BBAEC[];
// 4BBAF8: using guessed type int dword_4BBAF8[];

//----- (00472940) --------------------------------------------------------
// Can be optimised to
// mov eax, [ebp+arg_0]
// mov dword_4BBACC, eax
// retn
// (offset 472940
// 8B 45 08 A3 CC BA 4B 00 C3 90 90)
int __cdecl sub_472940(int a1)
{
  int result; // eax@1

  result = a1;
  dword_4BBACC[0] = a1;
  return result;
}
// 4BBACC: using guessed type int dword_4BBACC[];

//----- (00472950) --------------------------------------------------------
int sub_472950()
{
  int result; // eax@2
  int v1; // [sp+0h] [bp-14h]@31
  signed int j; // [sp+4h] [bp-10h]@5
  signed int i; // [sp+8h] [bp-Ch]@1
  signed int v4; // [sp+Ch] [bp-8h]@10
  int v5; // [sp+10h] [bp-4h]@25

  for ( i = 0; i < 20; ++i )
  {
    if ( *((_BYTE *)&byte_4BBA58 + 172 * i) & 0x80 )
    {
      for ( j = 0; j < 64; ++j )
      {
        if ( WeaponObj_In_Use[32 * j] & 0x80 && WeaponObj_Damage[32 * j] != -1 )
        {
          v4 = 0;
          if ( word_4BBAA8[86 * i] & 0x20
            && *(&dword_4BBA60 + 43 * i) - dword_4BBADC[43 * i] < dword_499CF8[32 * j] + WeaponObj_X_Position[32 * j]
            && dword_4BBADC[43 * i] + *(&dword_4BBA60 + 43 * i) > WeaponObj_X_Position[32 * j] - dword_499CF8[32 * j]
            && *(&dword_4BBA64 + 43 * i) - dword_4BBAD8[43 * i] < dword_499CFC[32 * j] + WeaponObj_Y_Position[32 * j]
            && dword_4BBAE0[43 * i] + *(&dword_4BBA64 + 43 * i) > WeaponObj_Y_Position[32 * j] - dword_499CFC[32 * j] )
          {
            v4 = 1;
          }
          else if ( word_4BBAA8[86 * i] & 4
                 && *(&dword_4BBA60 + 43 * i) - dword_4BBADC[43 * i] < dword_499D00[32 * j]
                                                                     + WeaponObj_X_Position[32 * j]
                 && dword_4BBADC[43 * i] + *(&dword_4BBA60 + 43 * i) > WeaponObj_X_Position[32 * j]
                                                                     - dword_499D00[32 * j]
                 && *(&dword_4BBA64 + 43 * i) - dword_4BBAD8[43 * i] < dword_499D04[32 * j]
                                                                     + WeaponObj_Y_Position[32 * j]
                 && dword_4BBAE0[43 * i] + *(&dword_4BBA64 + 43 * i) > WeaponObj_Y_Position[32 * j]
                                                                     - dword_499D04[32 * j] )
          {
            v4 = 1;
          }
          if ( v4 )
          {
            if ( word_4BBAA8[86 * i] & 0x20 )
            {
              if ( *((_BYTE *)&byte_4BBA58 + 172 * i) & 0x10 )
                v5 = 0;
              else
                v5 = i;
              Omega_Health[43 * v5] -= WeaponObj_Damage[32 * j];
              if ( Omega_Health[43 * v5] >= 1 )
              {
                if ( (signed int)(unsigned __int8)byte_4BBAF4[172 * i] < 14 )
                {
                  Create_Animated_Effect(WeaponObj_X_Position[32 * j], WeaponObj_Y_Position[32 * j], 11, 0);
                  Create_Animated_Effect(WeaponObj_X_Position[32 * j], WeaponObj_Y_Position[32 * j], 11, 0);
                  Create_Animated_Effect(WeaponObj_X_Position[32 * j], WeaponObj_Y_Position[32 * j], 11, 0);
                  Play_Sound_Effect(dword_4BBA90[43 * v5], 1);
                }
                byte_4BBAF4[172 * i] = 8;
                byte_4BBAF4[172 * v5] = 8;
                dword_4BBAF8[43 * v5] -= WeaponObj_Damage[32 * j];
              }
              else
              {
                Omega_Health[43 * v5] = v5;
                if ( *(_BYTE *)&Player_Flags & 0x80 && word_4BBAA8[86 * v5] & 0x200 )
                {
                  Call_TSC_Event(dword_4BBA88[43 * v5]);
                }
                else
                {
                  Play_Sound_Effect(dword_4BBA94[43 * v5], 1);
                  v1 = dword_4BBAA0[43 * v5];
                  switch ( v1 )
                  {
                    case 1:
                      sub_46F150(*(&dword_4BBA60 + 43 * v5), *(&dword_4BBA64 + 43 * v5), dword_4BBAEC[43 * v5], 4);
                      break;
                    case 2:
                      sub_46F150(*(&dword_4BBA60 + 43 * v5), *(&dword_4BBA64 + 43 * v5), dword_4BBAEC[43 * v5], 8);
                      break;
                    case 3:
                      sub_46F150(*(&dword_4BBA60 + 43 * v5), *(&dword_4BBA64 + 43 * v5), dword_4BBAEC[43 * v5], 16);
                      break;
                  }
                  *((_BYTE *)&byte_4BBA58 + 172 * v5) = 0;
                }
              }
              if ( --WeaponObj_Num_Impacts[32 * j] < 1 )
                WeaponObj_In_Use[32 * j] = 0;
            }
            else if ( WeaponObj_ShotID[32 * j] != 13
                   && WeaponObj_ShotID[32 * j] != 14
                   && WeaponObj_ShotID[32 * j] != 15
                   && WeaponObj_ShotID[32 * j] != 28
                   && WeaponObj_ShotID[32 * j] != 29
                   && WeaponObj_ShotID[32 * j] != 30 )
            {
              if ( !(WeaponObj_Flags[32 * j] & 0x10) )
              {
                Create_Animated_Effect(WeaponObj_X_Position[32 * j], WeaponObj_Y_Position[32 * j], 2, 2);
                Play_Sound_Effect(31, 1);
                WeaponObj_In_Use[32 * j] = 0;
              }
            }
            else
            {
              --WeaponObj_Num_Impacts[32 * j];
            }
          }
        }
      }
    }
    result = i + 1;
  }
  return result;
}
// 499C9C: using guessed type int WeaponObj_ShotID[];
// 499CA0: using guessed type int WeaponObj_Flags[];
// 499CA4: using guessed type int WeaponObj_In_Use[];
// 499CA8: using guessed type int WeaponObj_X_Position[];
// 499CAC: using guessed type int WeaponObj_Y_Position[];
// 499CF0: using guessed type int WeaponObj_Damage[];
// 499CF4: using guessed type int WeaponObj_Num_Impacts[];
// 499CF8: using guessed type int dword_499CF8[];
// 499CFC: using guessed type int dword_499CFC[];
// 499D00: using guessed type int dword_499D00[];
// 499D04: using guessed type int dword_499D04[];
// 4BBA88: using guessed type int dword_4BBA88[];
// 4BBA90: using guessed type int dword_4BBA90[];
// 4BBA94: using guessed type int dword_4BBA94[];
// 4BBA98: using guessed type int Omega_Health[];
// 4BBAA0: using guessed type int dword_4BBAA0[];
// 4BBAA8: using guessed type __int16 word_4BBAA8[];
// 4BBAD8: using guessed type int dword_4BBAD8[];
// 4BBADC: using guessed type int dword_4BBADC[];
// 4BBAE0: using guessed type int dword_4BBAE0[];
// 4BBAEC: using guessed type int dword_4BBAEC[];
// 4BBAF8: using guessed type int dword_4BBAF8[];

//----- (00473000) --------------------------------------------------------
int sub_473000()
{
  int result; // eax@1
  signed int i; // [sp+4h] [bp-4h]@2

  result = *(_BYTE *)&byte_4BBA58 & 0x80;
  if ( *(_BYTE *)&byte_4BBA58 & 0x80 )
  {
    result = ((int (__cdecl *)(_DWORD))ROM_Ptr_Boss_Code[dword_4BBA80])(dword_4BBA80);
    for ( i = 0; i < 20; ++i )
    {
      if ( byte_4BBAF4[172 * i] )
        --byte_4BBAF4[172 * i];
      result = i + 1;
    }
  }
  return result;
}
// 472FF0: using guessed type int __cdecl Boss0_NoSpecialBoss(_DWORD);
// 498AEC: using guessed type int (*ROM_Ptr_Boss_Code[10])();
// 4BBA80: using guessed type int dword_4BBA80;

//----- (00473080) --------------------------------------------------------
int sub_473080()
{
  int result; // eax@1
  __int64 v1; // rax@7
  __int64 v2; // rax@7
  __int64 v3; // rax@8
  __int64 v4; // rax@8
  signed int v5; // [sp+4h] [bp-ACh]@7
  int v6; // [sp+8h] [bp-A8h]@1
  int v7; // [sp+Ch] [bp-A4h]@1
  int v8; // [sp+10h] [bp-A0h]@1
  int v9; // [sp+14h] [bp-9Ch]@1
  int v10; // [sp+18h] [bp-98h]@1
  int v11; // [sp+1Ch] [bp-94h]@1
  int v12; // [sp+20h] [bp-90h]@1
  int v13; // [sp+24h] [bp-8Ch]@1
  int v14; // [sp+28h] [bp-88h]@1
  int v15; // [sp+2Ch] [bp-84h]@1
  int v16; // [sp+30h] [bp-80h]@1
  int v17; // [sp+34h] [bp-7Ch]@1
  int v18; // [sp+38h] [bp-78h]@1
  int v19; // [sp+3Ch] [bp-74h]@1
  int v20; // [sp+40h] [bp-70h]@1
  int v21; // [sp+44h] [bp-6Ch]@1
  int j; // [sp+4Ch] [bp-64h]@9
  char v23[16]; // [sp+50h] [bp-60h]@12
  int v24; // [sp+60h] [bp-50h]@1
  int i; // [sp+64h] [bp-4Ch]@1
  int v26; // [sp+68h] [bp-48h]@1
  int v27; // [sp+6Ch] [bp-44h]@1
  int v28; // [sp+70h] [bp-40h]@1
  int v29; // [sp+74h] [bp-3Ch]@1
  int v30; // [sp+78h] [bp-38h]@1
  int v31; // [sp+7Ch] [bp-34h]@1
  int v32; // [sp+80h] [bp-30h]@1
  int v33; // [sp+84h] [bp-2Ch]@1
  int v34; // [sp+88h] [bp-28h]@1
  int v35; // [sp+8Ch] [bp-24h]@1
  int v36; // [sp+90h] [bp-20h]@1
  int v37; // [sp+94h] [bp-1Ch]@1
  int v38; // [sp+98h] [bp-18h]@1
  int v39; // [sp+9Ch] [bp-14h]@1
  int v40; // [sp+A0h] [bp-10h]@1
  int v41; // [sp+A4h] [bp-Ch]@1
  int v42; // [sp+A8h] [bp-8h]@7
  int v43; // [sp+ACh] [bp-4h]@7

  result = dword_498B20;
  v24 = dword_498B20;
  v6 = 0;
  v7 = 1;
  v8 = 0;
  v9 = 1;
  v10 = 2;
  v11 = 2;
  v12 = 2;
  v13 = 0;
  v14 = 1;
  v15 = -1;
  v16 = -1;
  v17 = -1;
  v18 = -1;
  v19 = 0;
  v20 = 1;
  v21 = 2;
  v26 = 0;
  v27 = 0;
  v28 = 1;
  v29 = 1;
  v30 = 0;
  v31 = 1;
  v32 = 2;
  v33 = 2;
  v34 = 2;
  v35 = -1;
  v36 = 0;
  v37 = 1;
  v38 = 2;
  v39 = -1;
  v40 = -1;
  v41 = -1;
  for ( i = 0; i < 20; ++i )
  {
    if ( *((_BYTE *)&byte_4BBA58 + 172 * i) & 0x80 && !(word_4BBAA8[86 * i] & 8) )
    {
      if ( dword_4BBAA0[43 * i] < 3 )
      {
        v5 = 4;
        v3 = *(&dword_4BBA60 + 43 * i) / 16;
        v42 = ((WORD2(v3) & 0x1FF) + (signed int)v3) >> 9;
        v4 = *(&dword_4BBA64 + 43 * i) / 16;
        v43 = ((WORD2(v4) & 0x1FF) + (signed int)v4) >> 9;
      }
      else
      {
        v5 = 16;
        v1 = *(&dword_4BBA60 + 43 * i) / 16;
        v42 = ((WORD2(v1) & 0x1FF) + (signed int)v1) >> 9;
        v2 = *(&dword_4BBA64 + 43 * i) / 16;
        v43 = ((WORD2(v2) & 0x1FF) + (signed int)v2) >> 9;
      }
      dword_4BBA5C[43 * i] = 0;
      for ( j = 0; j < v5; ++j )
      {
        v23[j] = sub_4139A0(*(&v6 + j) + v42, *(&v26 + j) + v43);
        switch ( v23[j] )
        {
          case 0x44:
            if ( !(word_4BBAA8[86 * i] & 2) )
              goto LABEL_14;
            break;
          case 5:
          case 0x41:
          case 0x43:
LABEL_14:
            sub_4705C0((int)&byte_4BBA58 + 172 * i, *(&v6 + j) + v42, *(&v26 + j) + v43);
            break;
          case 0x50:
            sub_470870((int)&byte_4BBA58 + 172 * i, *(&v6 + j) + v42, *(&v26 + j) + v43);
            break;
          case 0x51:
            sub_470970((int)&byte_4BBA58 + 172 * i, *(&v6 + j) + v42, *(&v26 + j) + v43);
            break;
          case 0x52:
            sub_470A70((int)&byte_4BBA58 + 172 * i, *(&v6 + j) + v42, *(&v26 + j) + v43);
            break;
          case 0x53:
            sub_470B70((int)&byte_4BBA58 + 172 * i, *(&v6 + j) + v42, *(&v26 + j) + v43);
            break;
          case 0x54:
            sub_470C70((int)&byte_4BBA58 + 172 * i, *(&v6 + j) + v42, *(&v26 + j) + v43);
            break;
          case 0x55:
            sub_470D80((int)&byte_4BBA58 + 172 * i, *(&v6 + j) + v42, *(&v26 + j) + v43);
            break;
          case 0x56:
            sub_470E90((int)&byte_4BBA58 + 172 * i, *(&v6 + j) + v42, *(&v26 + j) + v43);
            break;
          case 0x57:
            sub_470FA0((int)&byte_4BBA58 + 172 * i, *(&v6 + j) + v42, *(&v26 + j) + v43);
            break;
          case 2:
          case 0x60:
          case 0x61:
          case 0x64:
            sub_4705C0((int)&byte_4BBA58 + 172 * i, *(&v6 + j) + v42, *(&v26 + j) + v43);
            sub_4710B0((int)&byte_4BBA58 + 172 * i, *(&v6 + j) + v42, *(&v26 + j) + v43);
            break;
          case 0x70:
            sub_470870((int)&byte_4BBA58 + 172 * i, *(&v6 + j) + v42, *(&v26 + j) + v43);
            sub_4710B0((int)&byte_4BBA58 + 172 * i, *(&v6 + j) + v42, *(&v26 + j) + v43);
            break;
          case 0x71:
            sub_470970((int)&byte_4BBA58 + 172 * i, *(&v6 + j) + v42, *(&v26 + j) + v43);
            sub_4710B0((int)&byte_4BBA58 + 172 * i, *(&v6 + j) + v42, *(&v26 + j) + v43);
            break;
          case 0x72:
            sub_470A70((int)&byte_4BBA58 + 172 * i, *(&v6 + j) + v42, *(&v26 + j) + v43);
            sub_4710B0((int)&byte_4BBA58 + 172 * i, *(&v6 + j) + v42, *(&v26 + j) + v43);
            break;
          case 0x73:
            sub_470B70((int)&byte_4BBA58 + 172 * i, *(&v6 + j) + v42, *(&v26 + j) + v43);
            sub_4710B0((int)&byte_4BBA58 + 172 * i, *(&v6 + j) + v42, *(&v26 + j) + v43);
            break;
          case 0x74:
            sub_470C70((int)&byte_4BBA58 + 172 * i, *(&v6 + j) + v42, *(&v26 + j) + v43);
            sub_4710B0((int)&byte_4BBA58 + 172 * i, *(&v6 + j) + v42, *(&v26 + j) + v43);
            break;
          case 0x75:
            sub_470D80((int)&byte_4BBA58 + 172 * i, *(&v6 + j) + v42, *(&v26 + j) + v43);
            sub_4710B0((int)&byte_4BBA58 + 172 * i, *(&v6 + j) + v42, *(&v26 + j) + v43);
            break;
          case 0x76:
            sub_470E90((int)&byte_4BBA58 + 172 * i, *(&v6 + j) + v42, *(&v26 + j) + v43);
            sub_4710B0((int)&byte_4BBA58 + 172 * i, *(&v6 + j) + v42, *(&v26 + j) + v43);
            break;
          case 0x77:
            sub_470FA0((int)&byte_4BBA58 + 172 * i, *(&v6 + j) + v42, *(&v26 + j) + v43);
            sub_4710B0((int)&byte_4BBA58 + 172 * i, *(&v6 + j) + v42, *(&v26 + j) + v43);
            break;
          default:
            continue;
        }
      }
    }
    result = i + 1;
  }
  return result;
}
// 498B20: using guessed type int dword_498B20;
// 4BBA5C: using guessed type int dword_4BBA5C[];
// 4BBAA0: using guessed type int dword_4BBAA0[];
// 4BBAA8: using guessed type __int16 word_4BBAA8[];
// 473080: using guessed type char var_60[16];

//----- (004739B0) --------------------------------------------------------
int __cdecl sub_4739B0(int a1)
{
  int *v1; // edx@9
  int v2; // eax@9
  int result; // eax@9
  int v4; // [sp+4h] [bp-40h]@1
  int v5; // [sp+8h] [bp-3Ch]@1
  int v6; // [sp+Ch] [bp-38h]@1
  int v7; // [sp+10h] [bp-34h]@1
  int v8; // [sp+14h] [bp-30h]@1
  int v9; // [sp+18h] [bp-2Ch]@1
  int v10; // [sp+1Ch] [bp-28h]@1
  int v11; // [sp+20h] [bp-24h]@1
  int v12; // [sp+24h] [bp-20h]@1
  int v13; // [sp+28h] [bp-1Ch]@1
  int v14; // [sp+2Ch] [bp-18h]@1
  int v15; // [sp+30h] [bp-14h]@1
  int v16; // [sp+34h] [bp-10h]@1
  int v17; // [sp+38h] [bp-Ch]@1
  int v18; // [sp+3Ch] [bp-8h]@1
  int v19; // [sp+40h] [bp-4h]@1

  v4 = 0;
  v5 = 0;
  v6 = 72;
  v7 = 112;
  v8 = 0;
  v9 = 112;
  v10 = 72;
  v11 = 224;
  v12 = 160;
  v13 = 0;
  v14 = 232;
  v15 = 112;
  v16 = 0;
  v17 = 0;
  v18 = 0;
  v19 = 0;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0xA:
      *(_DWORD *)(a1 + 116) = 11;
      *(_DWORD *)(a1 + 104) = 2;
      *(_WORD *)(a1 + 80) = 8;
      *(_DWORD *)(a1 + 140) = 18432;
      *(_DWORD *)(a1 + 144) = 28672;
      goto LABEL_3;
    case 0xB:
LABEL_3:
      *(_DWORD *)(a1 + 8) = dword_4BBA60 - 18432;
      *(_DWORD *)(a1 + 12) = dword_4BBA64;
      break;
    case 0x32:
      *(_DWORD *)(a1 + 116) = 51;
      *(_DWORD *)(a1 + 120) = 112;
      goto LABEL_5;
    case 0x33:
LABEL_5:
      if ( !--*(_DWORD *)(a1 + 120) )
      {
        *(_DWORD *)(a1 + 116) = 100;
        *(_DWORD *)(a1 + 104) = 3;
      }
      *(_DWORD *)(a1 + 8) = dword_4BBA60 - 18432;
      *(_DWORD *)(a1 + 12) = dword_4BBA64;
      break;
    case 0x64:
      *(_DWORD *)(a1 + 104) = 3;
      break;
    default:
      break;
  }
  v1 = &v4 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  *(_DWORD *)(v2 + 8) = v1[2];
  *(_DWORD *)(v2 + 12) = v1[3];
  result = a1;
  if ( *(_DWORD *)(a1 + 116) == 51 )
  {
    result = a1;
    *(_DWORD *)(a1 + 96) = *(_DWORD *)(a1 + 120) + *(_DWORD *)(a1 + 88);
  }
  return result;
}

//----- (00473BD0) --------------------------------------------------------
int __cdecl sub_473BD0(int a1)
{
  int *v1; // edx@9
  int v2; // eax@9
  int result; // eax@9
  int v4; // [sp+4h] [bp-30h]@1
  int v5; // [sp+8h] [bp-2Ch]@1
  int v6; // [sp+Ch] [bp-28h]@1
  int v7; // [sp+10h] [bp-24h]@1
  int v8; // [sp+14h] [bp-20h]@1
  int v9; // [sp+18h] [bp-1Ch]@1
  int v10; // [sp+1Ch] [bp-18h]@1
  int v11; // [sp+20h] [bp-14h]@1
  int v12; // [sp+24h] [bp-10h]@1
  int v13; // [sp+28h] [bp-Ch]@1
  int v14; // [sp+2Ch] [bp-8h]@1
  int v15; // [sp+30h] [bp-4h]@1

  v4 = 72;
  v5 = 0;
  v6 = 160;
  v7 = 112;
  v8 = 72;
  v9 = 112;
  v10 = 160;
  v11 = 224;
  v12 = 0;
  v13 = 0;
  v14 = 0;
  v15 = 0;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0xA:
      *(_DWORD *)(a1 + 116) = 11;
      *(_DWORD *)(a1 + 104) = 0;
      *(_WORD *)(a1 + 80) = 8;
      *(_DWORD *)(a1 + 140) = 22528;
      *(_DWORD *)(a1 + 144) = 28672;
      goto LABEL_3;
    case 0xB:
LABEL_3:
      *(_DWORD *)(a1 + 8) = dword_4BBA60 + 22528;
      *(_DWORD *)(a1 + 12) = dword_4BBA64;
      break;
    case 0x32:
      *(_DWORD *)(a1 + 116) = 51;
      *(_DWORD *)(a1 + 120) = 112;
      goto LABEL_5;
    case 0x33:
LABEL_5:
      if ( !--*(_DWORD *)(a1 + 120) )
      {
        *(_DWORD *)(a1 + 116) = 100;
        *(_DWORD *)(a1 + 104) = 2;
      }
      *(_DWORD *)(a1 + 8) = dword_4BBA60 + 22528;
      *(_DWORD *)(a1 + 12) = dword_4BBA64;
      break;
    case 0x64:
      *(_DWORD *)(a1 + 104) = 2;
      break;
    default:
      break;
  }
  v1 = &v4 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  *(_DWORD *)(v2 + 8) = v1[2];
  *(_DWORD *)(v2 + 12) = v1[3];
  result = a1;
  if ( *(_DWORD *)(a1 + 116) == 51 )
  {
    result = a1;
    *(_DWORD *)(a1 + 96) = *(_DWORD *)(a1 + 120) + *(_DWORD *)(a1 + 88);
  }
  return result;
}

//----- (00473DE0) --------------------------------------------------------
int __cdecl sub_473DE0(int a1)
{
  __int64 v1; // rax@4
  __int64 v2; // rax@4
  __int64 v3; // rax@15
  __int64 v4; // rax@15
  int Y_Velocity; // ST24_4@19
  int X_Velocity; // ST28_4@19
  __int64 v7; // rax@21
  __int64 v8; // rax@21
  int *v9; // edx@27
  int result; // eax@27
  int v11; // [sp+Ch] [bp-34h]@1
  int v12; // [sp+10h] [bp-30h]@1
  int v13; // [sp+14h] [bp-2Ch]@1
  int v14; // [sp+18h] [bp-28h]@1
  int v15; // [sp+1Ch] [bp-24h]@1
  int v16; // [sp+20h] [bp-20h]@1
  int v17; // [sp+24h] [bp-1Ch]@1
  int v18; // [sp+28h] [bp-18h]@1
  int v19; // [sp+2Ch] [bp-14h]@1
  int v20; // [sp+30h] [bp-10h]@1
  int v21; // [sp+34h] [bp-Ch]@1
  int v22; // [sp+38h] [bp-8h]@1
  unsigned __int8 v23; // [sp+3Fh] [bp-1h]@19

  v11 = 256;
  v12 = 0;
  v13 = 320;
  v14 = 40;
  v15 = 256;
  v16 = 40;
  v17 = 320;
  v18 = 80;
  v19 = 256;
  v20 = 80;
  v21 = 320;
  v22 = 120;
  *(_DWORD *)(a1 + 64) = 1000;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0xA:
      *(_DWORD *)(a1 + 104) = 2;
      *(_WORD *)(a1 + 80) &= 0xFFDFu;
      break;
    case 0x64:
      *(_DWORD *)(a1 + 116) = 101;
      *(_DWORD *)(a1 + 104) = 2;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 32) = dword_4BBA60 + (RNG_Range(-128, 32) << 9);
      *(_DWORD *)(a1 + 36) = dword_4BBA64 + (RNG_Range(-64, 64) << 9);
      *(_WORD *)(a1 + 80) |= 0x20u;
      goto LABEL_4;
    case 0x65:
LABEL_4:
      v1 = *(_DWORD *)(a1 + 32) - *(_DWORD *)(a1 + 8);
      *(_DWORD *)(a1 + 8) += ((BYTE4(v1) & 0xF) + (signed int)v1) >> 4;
      v2 = *(_DWORD *)(a1 + 36) - *(_DWORD *)(a1 + 12);
      *(_DWORD *)(a1 + 12) += ((BYTE4(v2) & 0xF) + (signed int)v2) >> 4;
      if ( ++*(_DWORD *)(a1 + 120) > 50 )
        *(_DWORD *)(a1 + 104) = 0;
      break;
    case 0x78:
      *(_DWORD *)(a1 + 116) = 121;
      *(_DWORD *)(a1 + 120) = 0;
      goto LABEL_8;
    case 0x79:
LABEL_8:
      if ( ++*(_DWORD *)(a1 + 120) / 2 % 2 )
        *(_DWORD *)(a1 + 104) = 0;
      else
        *(_DWORD *)(a1 + 104) = 1;
      if ( *(_DWORD *)(a1 + 120) > 20 )
        *(_DWORD *)(a1 + 116) = 130;
      break;
    case 0x82:
      *(_DWORD *)(a1 + 116) = 131;
      *(_DWORD *)(a1 + 104) = 2;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 32) = *(_DWORD *)(a1 + 8) + (RNG_Range(24, 48) << 9);
      *(_DWORD *)(a1 + 36) = *(_DWORD *)(a1 + 12) + (RNG_Range(-4, 4) << 9);
      goto LABEL_15;
    case 0x83:
LABEL_15:
      v3 = *(_DWORD *)(a1 + 32) - *(_DWORD *)(a1 + 8);
      *(_DWORD *)(a1 + 8) += ((BYTE4(v3) & 0xF) + (signed int)v3) >> 4;
      v4 = *(_DWORD *)(a1 + 36) - *(_DWORD *)(a1 + 12);
      *(_DWORD *)(a1 + 12) += ((BYTE4(v4) & 0xF) + (signed int)v4) >> 4;
      if ( ++*(_DWORD *)(a1 + 120) > 50 )
      {
        *(_DWORD *)(a1 + 116) = 140;
        *(_DWORD *)(a1 + 104) = 0;
      }
      if ( *(_DWORD *)(a1 + 120) == 1 || *(_DWORD *)(a1 + 120) == 3 )
      {
        v23 = Angle_Calculator(*(_DWORD *)(a1 + 8) - Quote_X_Position, *(_DWORD *)(a1 + 12) - Quote_Y_Position);
        v23 += RNG_Range(-2, 2);
        Y_Velocity = 2 * SIN_function(v23);
        X_Velocity = 2 * COS_function(v23);
        NPC_Create(178, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), X_Velocity, Y_Velocity, 0, 0, 256);
        Play_Sound_Effect(39, 1);
      }
      break;
    case 0x8C:
      v7 = *(_DWORD *)(a1 + 32) - *(_DWORD *)(a1 + 8);
      *(_DWORD *)(a1 + 8) += ((BYTE4(v7) & 0xF) + (signed int)v7) >> 4;
      v8 = *(_DWORD *)(a1 + 36) - *(_DWORD *)(a1 + 12);
      *(_DWORD *)(a1 + 12) += ((BYTE4(v8) & 0xF) + (signed int)v8) >> 4;
      break;
    case 0xC8:
      *(_DWORD *)(a1 + 116) = 201;
      *(_DWORD *)(a1 + 104) = 2;
      *(_DWORD *)(a1 + 16) = 0;
      *(_DWORD *)(a1 + 20) = 0;
      goto LABEL_23;
    case 0xC9:
LABEL_23:
      *(_DWORD *)(a1 + 16) += 32;
      *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
      if ( *(_DWORD *)(a1 + 8) > (*(signed __int16 *)&word_49E586 << 13) + 0x4000 )
        *(_BYTE *)a1 = 0;
      break;
    default:
      break;
  }
  if ( *(_BYTE *)(a1 + 156) )
    *(_DWORD *)(a1 + 32) += 1024;
  v9 = &v11 + 4 * *(_DWORD *)(a1 + 104);
  result = a1 + 84;
  *(_DWORD *)result = *v9;
  *(_DWORD *)(result + 4) = v9[1];
  *(_DWORD *)(result + 8) = v9[2];
  *(_DWORD *)(result + 12) = v9[3];
  return result;
}

//----- (00474340) --------------------------------------------------------
int __cdecl sub_474340(int a1)
{
  int result; // eax@1

  result = a1;
  switch ( *(_DWORD *)(a1 + 108) )
  {
    case 0:
      *(_DWORD *)(a1 + 8) = dword_4BBA60;
      result = a1;
      *(_DWORD *)(a1 + 12) = dword_4BBA64 - 0x4000;
      break;
    case 1:
      *(_DWORD *)(a1 + 8) = dword_4BBA60 + 14336;
      result = a1;
      *(_DWORD *)(a1 + 12) = dword_4BBA64;
      break;
    case 2:
      result = a1;
      *(_DWORD *)(a1 + 8) = dword_4BBA60 + 2048;
      *(_DWORD *)(a1 + 12) = dword_4BBA64 + 0x4000;
      break;
    case 3:
      *(_DWORD *)(a1 + 8) = dword_4BBA60 - 14336;
      result = a1;
      *(_DWORD *)(a1 + 12) = dword_4BBA64 + 2048;
      break;
    default:
      return result;
  }
  return result;
}

//----- (00474400) --------------------------------------------------------
int Boss_4_Core()
{
  int v0; // ST08_4@30
  int v1; // eax@30
  int v2; // ST08_4@36
  int v3; // eax@36
  unsigned __int8 v4; // ST47_1@45
  int Y_Velocity; // ST38_4@45
  int X_Velocity; // ST3C_4@45
  int v7; // ST10_4@51
  int v8; // ST0C_4@51
  int v9; // ST08_4@51
  int v10; // eax@51
  int v11; // ST10_4@56
  int v12; // ST0C_4@56
  int v13; // ST08_4@56
  int v14; // eax@56
  int v15; // ST10_4@74
  int v16; // ST0C_4@74
  int v17; // ST08_4@74
  int v18; // eax@74
  signed int v20; // [sp+Ch] [bp-1Ch]@1
  signed int v21; // [sp+10h] [bp-18h]@1
  signed int i; // [sp+20h] [bp-8h]@49
  signed int j; // [sp+20h] [bp-8h]@52
  signed int k; // [sp+20h] [bp-8h]@72

  v21 = 0;
  v20 = *((_DWORD *)&byte_4BBA58 + 29);
  if ( v20 <= 220 )
  {
    if ( v20 != 220 )
    {
      switch ( v20 )
      {
        case 0:
          *((_DWORD *)&byte_4BBA58 + 29) = 10;
          *((_DWORD *)&byte_4BBA58 + 17) = 1;
          *(_BYTE *)&byte_4BBA58 = -128;
          *((_WORD *)&byte_4BBA58 + 40) = -32756;
          *((_DWORD *)&byte_4BBA58 + 16) = 650;
          *((_DWORD *)&byte_4BBA58 + 14) = 114;
          *((_DWORD *)&byte_4BBA58 + 2) = 630784;
          *((_DWORD *)&byte_4BBA58 + 3) = 114688;
          *((_DWORD *)&byte_4BBA58 + 4) = 0;
          *((_DWORD *)&byte_4BBA58 + 5) = 0;
          *((_DWORD *)&byte_4BBA58 + 12) = 1000;
          *((_WORD *)&byte_4BBA58 + 40) |= 0x200u;
          byte_4BBD08 = -128;
          dword_4BBD7C = 10;
          byte_4BBDB4 = -128;
          dword_4BBE28 = 10;
          byte_4BBFB8 = -128;
          word_4BC008 = 12;
          dword_4BC044 = 0;
          dword_4BC048 = 0;
          dword_4BC03C = 20480;
          dword_4BC038 = 0x2000;
          dword_4BC040 = 0x2000;
          dword_4BC024 = 0;
          qmemcpy(&byte_4BC064, &byte_4BBFB8, 0xACu);
          dword_4BC0E8 = 18432;
          dword_4BC0E4 = 12288;
          dword_4BC0EC = 12288;
          dword_4BC0D0 = 1;
          qmemcpy(&unk_4BC110, &byte_4BBFB8, 0xACu);
          dword_4BC194 = 22528;
          dword_4BC190 = 4096;
          dword_4BC198 = 4096;
          dword_4BC17C = 2;
          qmemcpy(&byte_4BC1BC, &byte_4BBFB8, 0xACu);
          byte_4BC1BC |= 0x10u;
          dword_4BC240 = 10240;
          dword_4BC23C = 10240;
          dword_4BC244 = 10240;
          dword_4BC228 = 3;
          byte_4BBB04 = -128;
          dword_4BBB78 = 10;
          word_4BBB54 = 44;
          dword_4BBB44 = 1000;
          dword_4BBB3C = 54;
          dword_4BBB88 = 12288;
          dword_4BBB84 = 0x2000;
          dword_4BBB8C = 0x2000;
          dword_4BBB90 = 0x4000;
          dword_4BBB94 = 10240;
          dword_4BBB0C = *((_DWORD *)&byte_4BBA58 + 2) - 4096;
          dword_4BBB10 = *((_DWORD *)&byte_4BBA58 + 3) - 0x8000;
          qmemcpy(&byte_4BBBB0, &byte_4BBB04, 0xACu);
          dword_4BBBB8 = *((_DWORD *)&byte_4BBA58 + 2) + 0x2000;
          dword_4BBBBC = *((_DWORD *)&byte_4BBA58 + 3);
          qmemcpy(&byte_4BBC5C, &byte_4BBB04, 0xACu);
          X_Position = *((_DWORD *)&byte_4BBA58 + 2) - 4096;
          dword_4BBC68 = *((_DWORD *)&byte_4BBA58 + 3) + 0x8000;
          qmemcpy(&byte_4BBE60, &byte_4BBB04, 0xACu);
          dword_4BBE68 = *((_DWORD *)&byte_4BBA58 + 2) - 24576;
          dword_4BBE6C = *((_DWORD *)&byte_4BBA58 + 3) - 0x4000;
          qmemcpy(&byte_4BBF0C, &byte_4BBB04, 0xACu);
          dword_4BBF14 = *((_DWORD *)&byte_4BBA58 + 2) - 24576;
          dword_4BBF18 = *((_DWORD *)&byte_4BBA58 + 3) + 0x4000;
          goto LABEL_71;
        case 200:
          *((_DWORD *)&byte_4BBA58 + 29) = 201;
          *((_DWORD *)&byte_4BBA58 + 30) = 0;
          word_4BC20C &= 0xFFDFu;
          dword_4BBA28 = 0;
          TSC_SSS_SPS__2();
          goto LABEL_14;
        case 201:
LABEL_14:
          *((_DWORD *)&byte_4BBA58 + 8) = Quote_X_Position;
          *((_DWORD *)&byte_4BBA58 + 9) = Quote_Y_Position;
          if ( ++*((_DWORD *)&byte_4BBA58 + 30) > 400 )
          {
            ++*((_DWORD *)&byte_4BBA58 + 27);
            Play_Sound_Effect(115, 1);
            if ( *((_DWORD *)&byte_4BBA58 + 27) <= 3 )
            {
              *((_DWORD *)&byte_4BBA58 + 29) = 210;
              dword_4BBD70 = 0;
              dword_4BBE1C = 0;
              v21 = 1;
            }
            else
            {
              *((_DWORD *)&byte_4BBA58 + 27) = 0;
              *((_DWORD *)&byte_4BBA58 + 29) = 220;
              dword_4BBD70 = 0;
              dword_4BBE1C = 0;
              v21 = 1;
            }
          }
          goto LABEL_71;
        case 210:
          *((_DWORD *)&byte_4BBA58 + 29) = 211;
          *((_DWORD *)&byte_4BBA58 + 30) = 0;
          *((_DWORD *)&byte_4BBA58 + 28) = *((_DWORD *)&byte_4BBA58 + 16);
          word_4BC20C |= 0x20u;
          goto LABEL_20;
        case 211:
LABEL_20:
          *((_DWORD *)&byte_4BBA58 + 8) = Quote_X_Position;
          *((_DWORD *)&byte_4BBA58 + 9) = Quote_Y_Position;
          if ( *((_BYTE *)&byte_4BBA58 + 156) )
          {
            if ( ((signed int)(unsigned __int8)++NPCStruct_Tileset >> 1) % 2 )
            {
              dword_4BBD70 = 0;
              dword_4BBE1C = 0;
            }
            else
            {
              dword_4BBD70 = 1;
              dword_4BBE1C = 1;
            }
          }
          else
          {
            dword_4BBD70 = 0;
            dword_4BBE1C = 0;
          }
          if ( ++*((_DWORD *)&byte_4BBA58 + 30) % 100 == 1 )
          {
            dword_4BBA2C = RNG_Range(80, 100);
            dword_4BBA20 = dword_4BC1C4;
            dword_4BBA24 = dword_4BC1C8;
          }
          if ( *((_DWORD *)&byte_4BBA58 + 30) < 200 && *((_DWORD *)&byte_4BBA58 + 30) % 20 == 1 )
          {
            v0 = *((_DWORD *)&byte_4BBA58 + 3) + (RNG_Range(-64, 64) << 9);
            v1 = RNG_Range(-48, -16);
            NPC_Create(179, *((_DWORD *)&byte_4BBA58 + 2) + (v1 << 9), v0, 0, 0, 0, 0, 256);
          }
          if ( *((_DWORD *)&byte_4BBA58 + 30) > 400
            || *((_DWORD *)&byte_4BBA58 + 16) < *((_DWORD *)&byte_4BBA58 + 28) - 200 )
          {
            *((_DWORD *)&byte_4BBA58 + 29) = 200;
            dword_4BBD70 = 2;
            dword_4BBE1C = 0;
            v21 = 1;
          }
          break;
        default:
          goto LABEL_71;
      }
      goto LABEL_71;
    }
    *((_DWORD *)&byte_4BBA58 + 29) = 221;
    *((_DWORD *)&byte_4BBA58 + 30) = 0;
    dword_4BBA28 = 1;
    word_4BC20C |= 0x20u;
    sub_40F310(100);
    TSC_SSS_SPS_(1, 1000);
    goto LABEL_36;
  }
  if ( v20 > 501 )
  {
    if ( v20 == 600 )
    {
      *((_DWORD *)&byte_4BBA58 + 29) = 601;
      dword_4BBD7C = 50;
      dword_4BBE28 = 50;
      word_4BC008 &= 0xFFFBu;
      word_4BC0B4 &= 0xFFFBu;
      word_4BC160 &= 0xFFFBu;
      word_4BC20C &= 0xFFFBu;
    }
    else if ( v20 != 601 )
    {
      goto LABEL_71;
    }
    if ( ++*((_DWORD *)&byte_4BBA58 + 30) / 2 % 2 )
      *((_DWORD *)&byte_4BBA58 + 2) -= 2048;
    else
      *((_DWORD *)&byte_4BBA58 + 2) += 2048;
  }
  else
  {
    if ( v20 != 501 )
    {
      if ( v20 == 221 )
      {
LABEL_36:
        ++*((_DWORD *)&byte_4BBA58 + 30);
        v2 = Quote_Y_Position + (RNG_Range(-160, 160) << 9);
        v3 = RNG_Range(-50, 150);
        NPC_Create(199, Quote_X_Position + (v3 << 10), v2, 0, 0, 0, 0, 256);
        Quote_X_Velocity -= 32;
        *(_BYTE *)&Player_Flags |= 0x20u;
        if ( *((_BYTE *)&byte_4BBA58 + 156) )
        {
          if ( ((signed int)(unsigned __int8)++NPCStruct_Tileset >> 1) % 2 )
          {
            dword_4BBD70 = 0;
            dword_4BBE1C = 0;
          }
          else
          {
            dword_4BBD70 = 1;
            dword_4BBE1C = 1;
          }
        }
        else
        {
          dword_4BBD70 = 0;
          dword_4BBE1C = 0;
        }
        if ( *((_DWORD *)&byte_4BBA58 + 30) == 300
          || *((_DWORD *)&byte_4BBA58 + 30) == 350
          || *((_DWORD *)&byte_4BBA58 + 30) == 400 )
        {
          v4 = Angle_Calculator(
                 *((_DWORD *)&byte_4BBA58 + 2) - Quote_X_Position,
                 *((_DWORD *)&byte_4BBA58 + 3) - Quote_Y_Position);
          Y_Velocity = 3 * SIN_function(v4);
          X_Velocity = 3 * COS_function(v4);
          NPC_Create(
            218,
            *((_DWORD *)&byte_4BBA58 + 2) - 20480,
            *((_DWORD *)&byte_4BBA58 + 3),
            X_Velocity,
            Y_Velocity,
            0,
            0,
            256);
          Play_Sound_Effect(101, 1);
        }
        if ( *((_DWORD *)&byte_4BBA58 + 30) > 400 )
        {
          *((_DWORD *)&byte_4BBA58 + 29) = 200;
          dword_4BBD70 = 2;
          dword_4BBE1C = 0;
          v21 = 1;
        }
        goto LABEL_71;
      }
      if ( v20 != 500 )
        goto LABEL_71;
      TSC_SSS_SPS__2();
      *((_DWORD *)&byte_4BBA58 + 29) = 501;
      *((_DWORD *)&byte_4BBA58 + 30) = 0;
      *((_DWORD *)&byte_4BBA58 + 4) = 0;
      *((_DWORD *)&byte_4BBA58 + 5) = 0;
      dword_4BBD70 = 2;
      dword_4BBE1C = 0;
      dword_4BBB78 = 200;
      dword_4BBC24 = 200;
      dword_4BBCD0 = 200;
      dword_4BBED4 = 200;
      dword_4BBF80 = 200;
      sub_40F310(20);
      for ( i = 0; i < 32; ++i )
      {
        v7 = RNG_Range(-128, 128) << 9;
        v8 = RNG_Range(-128, 128) << 9;
        v9 = *((_DWORD *)&byte_4BBA58 + 3) + (RNG_Range(-64, 64) << 9);
        v10 = RNG_Range(-128, 128);
        NPC_Create(4, *((_DWORD *)&byte_4BBA58 + 2) + (v10 << 9), v9, v8, v7, 0, 0, 256);
      }
      for ( j = 0; j < 12; ++j )
        word_4BBAA8[86 * j] &= 0xFFDBu;
    }
    if ( ++*((_DWORD *)&byte_4BBA58 + 30) % 16 )
    {
      v11 = RNG_Range(-128, 128) << 9;
      v12 = RNG_Range(-128, 128) << 9;
      v13 = *((_DWORD *)&byte_4BBA58 + 3) + (RNG_Range(-32, 32) << 9);
      v14 = RNG_Range(-64, 64);
      NPC_Create(4, *((_DWORD *)&byte_4BBA58 + 2) + (v14 << 9), v13, v12, v11, 0, 0, 256);
    }
    if ( *((_DWORD *)&byte_4BBA58 + 30) / 2 % 2 )
      *((_DWORD *)&byte_4BBA58 + 2) -= 512;
    else
      *((_DWORD *)&byte_4BBA58 + 2) += 512;
    if ( *((_DWORD *)&byte_4BBA58 + 2) >= 516096 )
      *((_DWORD *)&byte_4BBA58 + 2) -= 128;
    else
      *((_DWORD *)&byte_4BBA58 + 2) += 128;
    if ( *((_DWORD *)&byte_4BBA58 + 3) >= 90112 )
      *((_DWORD *)&byte_4BBA58 + 3) -= 128;
    else
      *((_DWORD *)&byte_4BBA58 + 3) += 128;
  }
LABEL_71:
  if ( v21 )
  {
    sub_40F310(20);
    dword_4BBB78 = 100;
    dword_4BBC24 = 100;
    dword_4BBCD0 = 100;
    dword_4BBED4 = 100;
    dword_4BBF80 = 100;
    Play_Sound_Effect(26, 1);
    for ( k = 0; k < 8; ++k )
    {
      v15 = RNG_Range(-256, 256);
      v16 = RNG_Range(-512, 512);
      v17 = dword_4BBD14;
      v18 = RNG_Range(-32, 16);
      NPC_Create(4, dword_4BBD10 + (v18 << 9), v17, v16, v15, 0, 0, 256);
    }
  }
  if ( *((_DWORD *)&byte_4BBA58 + 29) >= 200 && *((_DWORD *)&byte_4BBA58 + 29) < 300 )
  {
    switch ( *((_DWORD *)&byte_4BBA58 + 30) )
    {
      case 0x50:
        dword_4BBB78 = 120;
        break;
      case 0x6E:
        dword_4BBC24 = 120;
        break;
      case 0x8C:
        dword_4BBCD0 = 120;
        break;
      case 0xAA:
        dword_4BBED4 = 120;
        break;
      case 0xC8:
        dword_4BBF80 = 120;
        break;
      default:
        break;
    }
    if ( *((_DWORD *)&byte_4BBA58 + 2) < *((_DWORD *)&byte_4BBA58 + 8) + 81920 )
      *((_DWORD *)&byte_4BBA58 + 4) += 4;
    if ( *((_DWORD *)&byte_4BBA58 + 2) > *((_DWORD *)&byte_4BBA58 + 8) + 81920 )
      *((_DWORD *)&byte_4BBA58 + 4) -= 4;
    if ( *((_DWORD *)&byte_4BBA58 + 3) < *((_DWORD *)&byte_4BBA58 + 9) )
      *((_DWORD *)&byte_4BBA58 + 5) += 4;
    if ( *((_DWORD *)&byte_4BBA58 + 3) > *((_DWORD *)&byte_4BBA58 + 9) )
      *((_DWORD *)&byte_4BBA58 + 5) -= 4;
  }
  if ( *((_DWORD *)&byte_4BBA58 + 4) > 128 )
    *((_DWORD *)&byte_4BBA58 + 4) = 128;
  if ( *((_DWORD *)&byte_4BBA58 + 4) < -128 )
    *((_DWORD *)&byte_4BBA58 + 4) = -128;
  if ( *((_DWORD *)&byte_4BBA58 + 5) > 128 )
    *((_DWORD *)&byte_4BBA58 + 5) = 128;
  if ( *((_DWORD *)&byte_4BBA58 + 5) < -128 )
    *((_DWORD *)&byte_4BBA58 + 5) = -128;
  *((_DWORD *)&byte_4BBA58 + 2) += *((_DWORD *)&byte_4BBA58 + 4);
  *((_DWORD *)&byte_4BBA58 + 3) += *((_DWORD *)&byte_4BBA58 + 5);
  sub_4739B0((int)&byte_4BBD08);
  sub_473BD0((int)&byte_4BBDB4);
  sub_473DE0((int)&byte_4BBB04);
  sub_473DE0((int)&byte_4BBBB0);
  sub_473DE0((int)&byte_4BBC5C);
  sub_473DE0((int)&byte_4BBE60);
  sub_473DE0((int)&byte_4BBF0C);
  sub_474340((int)&byte_4BBFB8);
  sub_474340((int)&byte_4BC064);
  sub_474340((int)&unk_4BC110);
  return sub_474340((int)&byte_4BC1BC);
}
// 49E66C: using guessed type int Quote_X_Velocity;
// 4BBA20: using guessed type int dword_4BBA20;
// 4BBA24: using guessed type int dword_4BBA24;
// 4BBA28: using guessed type int dword_4BBA28;
// 4BBA2C: using guessed type int dword_4BBA2C;
// 4BBA38: using guessed type char NPCStruct_Tileset;
// 4BBAA8: using guessed type __int16 word_4BBAA8[];
// 4BBB04: using guessed type char byte_4BBB04;
// 4BBB0C: using guessed type int dword_4BBB0C;
// 4BBB10: using guessed type int dword_4BBB10;
// 4BBB3C: using guessed type int dword_4BBB3C;
// 4BBB44: using guessed type int dword_4BBB44;
// 4BBB54: using guessed type __int16 word_4BBB54;
// 4BBB78: using guessed type int dword_4BBB78;
// 4BBB84: using guessed type int dword_4BBB84;
// 4BBB88: using guessed type int dword_4BBB88;
// 4BBB8C: using guessed type int dword_4BBB8C;
// 4BBB90: using guessed type int dword_4BBB90;
// 4BBB94: using guessed type int dword_4BBB94;
// 4BBBB0: using guessed type char byte_4BBBB0;
// 4BBBB8: using guessed type int dword_4BBBB8;
// 4BBBBC: using guessed type int dword_4BBBBC;
// 4BBC24: using guessed type int dword_4BBC24;
// 4BBC5C: using guessed type char byte_4BBC5C;
// 4BBCD0: using guessed type int dword_4BBCD0;
// 4BBD08: using guessed type char byte_4BBD08;
// 4BBD10: using guessed type int dword_4BBD10;
// 4BBD70: using guessed type int dword_4BBD70;
// 4BBD7C: using guessed type int dword_4BBD7C;
// 4BBDB4: using guessed type char byte_4BBDB4;
// 4BBE1C: using guessed type int dword_4BBE1C;
// 4BBE28: using guessed type int dword_4BBE28;
// 4BBE60: using guessed type char byte_4BBE60;
// 4BBE68: using guessed type int dword_4BBE68;
// 4BBE6C: using guessed type int dword_4BBE6C;
// 4BBED4: using guessed type int dword_4BBED4;
// 4BBF0C: using guessed type char byte_4BBF0C;
// 4BBF14: using guessed type int dword_4BBF14;
// 4BBF18: using guessed type int dword_4BBF18;
// 4BBF80: using guessed type int dword_4BBF80;
// 4BBFB8: using guessed type char byte_4BBFB8;
// 4BC008: using guessed type __int16 word_4BC008;
// 4BC024: using guessed type int dword_4BC024;
// 4BC038: using guessed type int dword_4BC038;
// 4BC03C: using guessed type int dword_4BC03C;
// 4BC040: using guessed type int dword_4BC040;
// 4BC044: using guessed type int dword_4BC044;
// 4BC048: using guessed type int dword_4BC048;
// 4BC064: using guessed type char byte_4BC064;
// 4BC0B4: using guessed type __int16 word_4BC0B4;
// 4BC0D0: using guessed type int dword_4BC0D0;
// 4BC0E4: using guessed type int dword_4BC0E4;
// 4BC0E8: using guessed type int dword_4BC0E8;
// 4BC0EC: using guessed type int dword_4BC0EC;
// 4BC160: using guessed type __int16 word_4BC160;
// 4BC17C: using guessed type int dword_4BC17C;
// 4BC190: using guessed type int dword_4BC190;
// 4BC194: using guessed type int dword_4BC194;
// 4BC198: using guessed type int dword_4BC198;
// 4BC1BC: using guessed type char byte_4BC1BC;
// 4BC1C4: using guessed type int dword_4BC1C4;
// 4BC1C8: using guessed type int dword_4BC1C8;
// 4BC20C: using guessed type __int16 word_4BC20C;
// 4BC228: using guessed type int dword_4BC228;
// 4BC23C: using guessed type int dword_4BC23C;
// 4BC240: using guessed type int dword_4BC240;
// 4BC244: using guessed type int dword_4BC244;

//----- (004753D0) --------------------------------------------------------
int Boss_7_Undead_Core()
{
  int v0; // ST10_4@75
  int v1; // ST0C_4@75
  int v2; // ST08_4@75
  int v3; // eax@75
  int v4; // ST10_4@80
  int v5; // ST0C_4@80
  int v6; // ST08_4@80
  int v7; // eax@80
  int v8; // ST14_4@86
  int v9; // eax@86
  int v10; // ST10_4@103
  int v11; // ST0C_4@103
  int v12; // ST08_4@103
  int v13; // eax@103
  int v14; // eax@115
  int v15; // eax@117
  signed int v17; // [sp+10h] [bp-18h]@1
  signed int v18; // [sp+14h] [bp-14h]@1
  signed int j; // [sp+1Ch] [bp-Ch]@73
  signed int k; // [sp+1Ch] [bp-Ch]@76
  signed int i; // [sp+1Ch] [bp-Ch]@90
  signed int l; // [sp+1Ch] [bp-Ch]@101
  int v23; // [sp+20h] [bp-8h]@0
  int Y_Position; // [sp+24h] [bp-4h]@0

  v18 = 0;
  v17 = *((_DWORD *)&byte_4BBA58 + 29);
  if ( v17 <= 220 )
  {
    if ( v17 != 220 )
    {
      switch ( v17 )
      {
        case 1:
          *((_DWORD *)&byte_4BBA58 + 29) = 10;
          *((_DWORD *)&byte_4BBA58 + 17) = 1;
          *(_BYTE *)&byte_4BBA58 = -128;
          *((_WORD *)&byte_4BBA58 + 40) = -32756;
          *((_DWORD *)&byte_4BBA58 + 16) = 700;
          *((_DWORD *)&byte_4BBA58 + 14) = 114;
          *((_DWORD *)&byte_4BBA58 + 2) = 303104;
          *((_DWORD *)&byte_4BBA58 + 3) = 61440;
          *((_DWORD *)&byte_4BBA58 + 4) = 0;
          *((_DWORD *)&byte_4BBA58 + 5) = 0;
          *((_DWORD *)&byte_4BBA58 + 12) = 1000;
          *((_WORD *)&byte_4BBA58 + 40) |= 0x200u;
          byte_4BBC5C = -128;
          dword_4BBCD0 = 0;
          byte_4BBD08 = -128;
          dword_4BBD7C = 10;
          byte_4BBDB4 = -128;
          dword_4BBE28 = 10;
          byte_4BBFB8 = -128;
          word_4BC008 = 8;
          dword_4BC044 = 0;
          dword_4BC048 = 0;
          dword_4BC03C = 20480;
          dword_4BC038 = 0x2000;
          dword_4BC040 = 0x2000;
          dword_4BC024 = 0;
          qmemcpy(&byte_4BC064, &byte_4BBFB8, 0xACu);
          dword_4BC0E8 = 18432;
          dword_4BC0E4 = 12288;
          dword_4BC0EC = 12288;
          dword_4BC0D0 = 1;
          qmemcpy(&unk_4BC110, &byte_4BBFB8, 0xACu);
          dword_4BC194 = 22528;
          dword_4BC190 = 4096;
          dword_4BC198 = 4096;
          dword_4BC17C = 2;
          qmemcpy(&byte_4BC1BC, &byte_4BBFB8, 0xACu);
          byte_4BC1BC |= 0x10u;
          dword_4BC240 = 10240;
          dword_4BC23C = 10240;
          dword_4BC244 = 10240;
          dword_4BC228 = 3;
          byte_4BBB04 = -128;
          dword_4BBB78 = 0;
          word_4BBB54 = 40;
          dword_4BBB44 = 1000;
          dword_4BBB3C = 54;
          dword_4BBB88 = 12288;
          dword_4BBB84 = 0x2000;
          dword_4BBB8C = 0x2000;
          dword_4BBB90 = 0x4000;
          dword_4BBB94 = 10240;
          dword_4BBBAC = (int)&byte_4BBA58;
          qmemcpy(&byte_4BBBB0, &byte_4BBB04, 0xACu);
          dword_4BBC20 = 128;
          qmemcpy(&byte_4BBE60, &byte_4BBB04, 0xACu);
          dword_4BBECC = 1;
          qmemcpy(&byte_4BBF0C, &byte_4BBB04, 0xACu);
          dword_4BBF78 = 1;
          dword_4BBF7C = 128;
          NPCStruct_Exp = *((_DWORD *)&byte_4BBA58 + 16);
          goto LABEL_94;
        case 15:
          *((_DWORD *)&byte_4BBA58 + 29) = 16;
          v18 = 1;
          *((_DWORD *)&byte_4BBA58 + 19) = 0;
          dword_4BBCD0 = 10;
          dword_4BBD70 = 0;
          goto LABEL_94;
        case 20:
          *((_DWORD *)&byte_4BBA58 + 29) = 210;
          v18 = 1;
          *((_DWORD *)&byte_4BBA58 + 19) = 0;
          dword_4BBB78 = 5;
          dword_4BBC24 = 5;
          dword_4BBED4 = 5;
          dword_4BBF80 = 5;
          goto LABEL_94;
        case 200:
          *((_DWORD *)&byte_4BBA58 + 29) = 201;
          *((_DWORD *)&byte_4BBA58 + 30) = 0;
          dword_4BBCD0 = 0;
          dword_4BBD70 = 2;
          dword_4BBE1C = 0;
          word_4BC008 &= 0xFFFBu;
          word_4BC0B4 &= 0xFFFBu;
          word_4BC160 &= 0xFFFBu;
          word_4BC20C &= 0xFFDFu;
          dword_4BBA28 = 0;
          TSC_SSS_SPS__2();
          v18 = 1;
          goto LABEL_18;
        case 201:
LABEL_18:
          ++*((_DWORD *)&byte_4BBA58 + 30);
          if ( (*((_DWORD *)&byte_4BBA58 + 19) == 2
             || *((_DWORD *)&byte_4BBA58 + 26) > 0
             || *((_DWORD *)&byte_4BBA58 + 16) < 200)
            && *((_DWORD *)&byte_4BBA58 + 30) > 200 )
          {
            ++*((_DWORD *)&byte_4BBA58 + 27);
            Play_Sound_Effect(115, 1);
            if ( *((_DWORD *)&byte_4BBA58 + 16) >= 200 )
            {
              if ( *((_DWORD *)&byte_4BBA58 + 27) <= 2 )
                *((_DWORD *)&byte_4BBA58 + 29) = 210;
              else
                *((_DWORD *)&byte_4BBA58 + 29) = 220;
            }
            else
            {
              *((_DWORD *)&byte_4BBA58 + 29) = 230;
            }
          }
          goto LABEL_94;
        case 210:
          *((_DWORD *)&byte_4BBA58 + 29) = 211;
          *((_DWORD *)&byte_4BBA58 + 30) = 0;
          dword_4BBCD0 = 10;
          word_4BC008 |= 4u;
          word_4BC0B4 |= 4u;
          word_4BC160 |= 4u;
          word_4BC20C |= 0x20u;
          NPCStruct_Exp = *((_DWORD *)&byte_4BBA58 + 16);
          v18 = 1;
          goto LABEL_29;
        case 211:
LABEL_29:
          ++NPCStruct_DeathSnd;
          if ( *((_BYTE *)&byte_4BBA58 + 156) && ((signed int)(unsigned __int8)NPCStruct_DeathSnd >> 1) % 2 )
          {
            dword_4BBD70 = 1;
            dword_4BBE1C = 1;
          }
          else
          {
            dword_4BBD70 = 0;
            dword_4BBE1C = 0;
          }
          if ( ++*((_DWORD *)&byte_4BBA58 + 30) % 100 == 1 )
          {
            dword_4BBA2C = RNG_Range(80, 100);
            dword_4BBA20 = dword_4BC1C4;
            dword_4BBA24 = dword_4BC1C8;
          }
          if ( *((_DWORD *)&byte_4BBA58 + 30) < 300 )
          {
            if ( *((_DWORD *)&byte_4BBA58 + 30) % 120 == 1 )
              NPC_Create(
                288,
                *((_DWORD *)&byte_4BBA58 + 2) - 0x4000,
                *((_DWORD *)&byte_4BBA58 + 3) - 0x2000,
                0,
                0,
                1,
                0,
                32);
            if ( *((_DWORD *)&byte_4BBA58 + 30) % 120 == 61 )
              NPC_Create(
                288,
                *((_DWORD *)&byte_4BBA58 + 2) - 0x4000,
                *((_DWORD *)&byte_4BBA58 + 3) + 0x2000,
                0,
                0,
                3,
                0,
                32);
          }
          if ( *((_DWORD *)&byte_4BBA58 + 16) < NPCStruct_Exp - 50 || *((_DWORD *)&byte_4BBA58 + 30) > 400 )
            *((_DWORD *)&byte_4BBA58 + 29) = 200;
          break;
        default:
          goto LABEL_94;
      }
      goto LABEL_94;
    }
    *((_DWORD *)&byte_4BBA58 + 29) = 221;
    *((_DWORD *)&byte_4BBA58 + 30) = 0;
    *((_DWORD *)&byte_4BBA58 + 27) = 0;
    dword_4BBA28 = 1;
    dword_4BBCD0 = 20;
    word_4BC008 |= 4u;
    word_4BC0B4 |= 4u;
    word_4BC160 |= 4u;
    word_4BC20C |= 0x20u;
    sub_40F310(100);
    NPCStruct_Exp = *((_DWORD *)&byte_4BBA58 + 16);
    v18 = 1;
    goto LABEL_45;
  }
  if ( v17 > 500 )
  {
    if ( v17 != 501 )
    {
      if ( v17 == 1000 )
      {
        sub_40F310(100);
        if ( !(++dword_4BBAD0 % 8) )
          Play_Sound_Effect(44, 1);
        v8 = dword_4BBA64 + (RNG_Range(-64, 64) << 9);
        v9 = RNG_Range(-72, 72);
        sub_46F150(dword_4BBA60 + (v9 << 9), v8, 1, 1);
        if ( dword_4BBAD0 > 100 )
        {
          dword_4BBAD0 = 0;
          dword_4BBACC[0] = 1001;
          Explosion_(dword_4BBA60, dword_4BBA64, 1);
          Play_Sound_Effect(35, 1);
        }
      }
      else if ( v17 == 1001 )
      {
        sub_40F310(40);
        if ( ++dword_4BBAD0 > 50 )
        {
          for ( i = 0; i < 20; ++i )
            *((_BYTE *)&byte_4BBA58 + 172 * i) = 0;
          sub_4702D0(158, 1);
          sub_4702D0(301, 1);
        }
      }
      goto LABEL_94;
    }
LABEL_79:
    if ( ++*((_DWORD *)&byte_4BBA58 + 30) % 16 )
    {
      v4 = RNG_Range(-128, 128) << 9;
      v5 = RNG_Range(-128, 128) << 9;
      v6 = *((_DWORD *)&byte_4BBA58 + 3) + (RNG_Range(-32, 32) << 9);
      v7 = RNG_Range(-64, 64);
      NPC_Create(4, *((_DWORD *)&byte_4BBA58 + 2) + (v7 << 9), v6, v5, v4, 0, 0, 256);
    }
    *((_DWORD *)&byte_4BBA58 + 2) += 64;
    *((_DWORD *)&byte_4BBA58 + 3) += 128;
    if ( *((_DWORD *)&byte_4BBA58 + 30) > 200 )
    {
      *((_DWORD *)&byte_4BBA58 + 30) = 0;
      *((_DWORD *)&byte_4BBA58 + 29) = 1000;
    }
    goto LABEL_94;
  }
  if ( v17 == 500 )
  {
    TSC_SSS_SPS__2();
    *((_DWORD *)&byte_4BBA58 + 29) = 501;
    *((_DWORD *)&byte_4BBA58 + 30) = 0;
    *((_DWORD *)&byte_4BBA58 + 4) = 0;
    *((_DWORD *)&byte_4BBA58 + 5) = 0;
    dword_4BBCD0 = 0;
    dword_4BBD70 = 2;
    dword_4BBE1C = 0;
    dword_4BBB78 = 5;
    dword_4BBC24 = 5;
    dword_4BBED4 = 5;
    dword_4BBF80 = 5;
    sub_40F310(20);
    for ( j = 0; j < 100; ++j )
    {
      v0 = RNG_Range(-128, 128) << 9;
      v1 = RNG_Range(-128, 128) << 9;
      v2 = *((_DWORD *)&byte_4BBA58 + 3) + (RNG_Range(-64, 64) << 9);
      v3 = RNG_Range(-128, 128);
      NPC_Create(4, *((_DWORD *)&byte_4BBA58 + 2) + (v3 << 9), v2, v1, v0, 0, 0, 0);
    }
    sub_4702D0(282, 1);
    word_4BC20C &= 0xFFDFu;
    for ( k = 0; k < 12; ++k )
      word_4BBAA8[86 * k] &= 0xFFFBu;
    goto LABEL_79;
  }
  if ( v17 == 221 )
  {
LABEL_45:
    if ( ++*((_DWORD *)&byte_4BBA58 + 30) % 40 == 1 )
    {
      switch ( RNG_Range(0, 3) )
      {
        case 0:
          v23 = dword_4BBB0C;
          Y_Position = dword_4BBB10;
          break;
        case 1:
          v23 = dword_4BBBB8;
          Y_Position = dword_4BBBBC;
          break;
        case 2:
          v23 = dword_4BBE68;
          Y_Position = dword_4BBE6C;
          break;
        case 3:
          v23 = dword_4BBF14;
          Y_Position = dword_4BBF18;
          break;
        default:
          break;
      }
      Play_Sound_Effect(25, 1);
      NPC_Create(285, v23 - 0x2000, Y_Position, 0, 0, 0, 0, 256);
      NPC_Create(285, v23 - 0x2000, Y_Position, 0, 0, 1024, 0, 256);
    }
    ++NPCStruct_DeathSnd;
    if ( *((_BYTE *)&byte_4BBA58 + 156) && ((signed int)(unsigned __int8)NPCStruct_DeathSnd >> 1) % 2 )
    {
      dword_4BBD70 = 1;
      dword_4BBE1C = 1;
    }
    else
    {
      dword_4BBD70 = 0;
      dword_4BBE1C = 0;
    }
    if ( *((_DWORD *)&byte_4BBA58 + 16) < NPCStruct_Exp - 150
      || *((_DWORD *)&byte_4BBA58 + 30) > 400
      || *((_DWORD *)&byte_4BBA58 + 16) < 200 )
    {
      *((_DWORD *)&byte_4BBA58 + 29) = 200;
    }
    goto LABEL_94;
  }
  if ( v17 == 230 )
  {
    *((_DWORD *)&byte_4BBA58 + 29) = 231;
    *((_DWORD *)&byte_4BBA58 + 30) = 0;
    dword_4BBCD0 = 30;
    word_4BC008 |= 4u;
    word_4BC0B4 |= 4u;
    word_4BC160 |= 4u;
    word_4BC20C |= 0x20u;
    Play_Sound_Effect(25, 1);
    NPC_Create(285, X_Position - 0x2000, dword_4BBC68, 0, 0, 0, 0, 256);
    NPC_Create(285, X_Position - 0x2000, dword_4BBC68, 0, 0, 1024, 0, 256);
    NPC_Create(285, X_Position, dword_4BBC68 - 0x2000, 0, 0, 0, 0, 256);
    NPC_Create(285, X_Position, dword_4BBC68 - 0x2000, 0, 0, 1024, 0, 256);
    NPC_Create(285, X_Position, dword_4BBC68 + 0x2000, 0, 0, 0, 0, 256);
    NPC_Create(285, X_Position, dword_4BBC68 + 0x2000, 0, 0, 1024, 0, 256);
    NPCStruct_Exp = *((_DWORD *)&byte_4BBA58 + 16);
    v18 = 1;
  }
  else if ( v17 != 231 )
  {
    goto LABEL_94;
  }
  ++NPCStruct_DeathSnd;
  if ( *((_BYTE *)&byte_4BBA58 + 156) && ((signed int)(unsigned __int8)NPCStruct_DeathSnd >> 1) % 2 )
  {
    dword_4BBD70 = 1;
    dword_4BBE1C = 1;
  }
  else
  {
    dword_4BBD70 = 0;
    dword_4BBE1C = 0;
  }
  if ( ++*((_DWORD *)&byte_4BBA58 + 30) % 100 == 1 )
  {
    dword_4BBA2C = RNG_Range(80, 100);
    dword_4BBA20 = dword_4BC1C4;
    dword_4BBA24 = dword_4BC1C8;
  }
  if ( *((_DWORD *)&byte_4BBA58 + 30) % 120 == 1 )
    NPC_Create(288, *((_DWORD *)&byte_4BBA58 + 2) - 0x4000, *((_DWORD *)&byte_4BBA58 + 3) - 0x2000, 0, 0, 1, 0, 32);
  if ( *((_DWORD *)&byte_4BBA58 + 30) % 120 == 61 )
    NPC_Create(288, *((_DWORD *)&byte_4BBA58 + 2) - 0x4000, *((_DWORD *)&byte_4BBA58 + 3) + 0x2000, 0, 0, 3, 0, 32);
LABEL_94:
  if ( v18 )
  {
    sub_40F310(20);
    if ( *((_DWORD *)&byte_4BBA58 + 29) == 201 )
    {
      dword_4BBF80 = 10;
      dword_4BBED4 = 10;
      dword_4BBC24 = 10;
      dword_4BBB78 = 10;
    }
    if ( *((_DWORD *)&byte_4BBA58 + 29) == 221 )
    {
      dword_4BBF80 = 20;
      dword_4BBED4 = 20;
      dword_4BBC24 = 20;
      dword_4BBB78 = 20;
    }
    if ( *((_DWORD *)&byte_4BBA58 + 29) == 231 )
    {
      dword_4BBF80 = 30;
      dword_4BBED4 = 30;
      dword_4BBC24 = 30;
      dword_4BBB78 = 30;
    }
    Play_Sound_Effect(26, 1);
    for ( l = 0; l < 8; ++l )
    {
      v10 = RNG_Range(-256, 256);
      v11 = RNG_Range(-512, 512);
      v12 = dword_4BBD14;
      v13 = RNG_Range(-32, 16);
      NPC_Create(4, dword_4BBD10 + (v13 << 9), v12, v11, v10, 0, 0, 256);
    }
  }
  if ( *((_DWORD *)&byte_4BBA58 + 29) >= 200 && *((_DWORD *)&byte_4BBA58 + 29) < 300 )
  {
    if ( *((_DWORD *)&byte_4BBA58 + 2) < 98304 )
      *((_DWORD *)&byte_4BBA58 + 19) = 2;
    if ( *((_DWORD *)&byte_4BBA58 + 2) > (*(signed __int16 *)&word_49E586 - 4) << 13 )
      *((_DWORD *)&byte_4BBA58 + 19) = 0;
    if ( *((_DWORD *)&byte_4BBA58 + 19) )
      *((_DWORD *)&byte_4BBA58 + 4) += 4;
    else
      *((_DWORD *)&byte_4BBA58 + 4) -= 4;
  }
  switch ( *((_DWORD *)&byte_4BBA58 + 29) )
  {
    case 0xC9:
    case 0xD3:
    case 0xDD:
    case 0xE7:
      if ( ++*((_DWORD *)&byte_4BBA58 + 28) == 150 )
      {
        *((_DWORD *)&byte_4BBA58 + 28) = 0;
        v14 = RNG_Range(-1, 3);
        NPC_Create(282, (*(signed __int16 *)&word_49E586 << 13) + 64, (v14 + 10) << 13, 0, 0, 0, 0, 48);
      }
      else if ( *((_DWORD *)&byte_4BBA58 + 28) == 75 )
      {
        v15 = RNG_Range(-3, 0);
        NPC_Create(282, (*(signed __int16 *)&word_49E586 << 13) + 64, (v15 + 3) << 13, 0, 0, 0, 0, 48);
      }
      break;
    default:
      break;
  }
  if ( *((_DWORD *)&byte_4BBA58 + 4) > 128 )
    *((_DWORD *)&byte_4BBA58 + 4) = 128;
  if ( *((_DWORD *)&byte_4BBA58 + 4) < -128 )
    *((_DWORD *)&byte_4BBA58 + 4) = -128;
  if ( *((_DWORD *)&byte_4BBA58 + 5) > 128 )
    *((_DWORD *)&byte_4BBA58 + 5) = 128;
  if ( *((_DWORD *)&byte_4BBA58 + 5) < -128 )
    *((_DWORD *)&byte_4BBA58 + 5) = -128;
  *((_DWORD *)&byte_4BBA58 + 2) += *((_DWORD *)&byte_4BBA58 + 4);
  *((_DWORD *)&byte_4BBA58 + 3) += *((_DWORD *)&byte_4BBA58 + 5);
  sub_476B90((int)&byte_4BBC5C);
  sub_476790((int)&byte_4BBD08);
  sub_4769A0((int)&byte_4BBDB4);
  sub_476E50((int)&byte_4BBB04);
  sub_476E50((int)&byte_4BBBB0);
  sub_476E50((int)&byte_4BBE60);
  sub_476E50((int)&byte_4BBF0C);
  sub_477230((int)&byte_4BBFB8);
  sub_477230((int)&byte_4BC064);
  sub_477230((int)&unk_4BC110);
  return sub_477230((int)&byte_4BC1BC);
}
// 4BBA20: using guessed type int dword_4BBA20;
// 4BBA24: using guessed type int dword_4BBA24;
// 4BBA28: using guessed type int dword_4BBA28;
// 4BBA2C: using guessed type int dword_4BBA2C;
// 4BBA39: using guessed type char NPCStruct_DeathSnd;
// 4BBA3C: using guessed type int NPCStruct_Exp;
// 4BBAA8: using guessed type __int16 word_4BBAA8[];
// 4BBACC: using guessed type int dword_4BBACC[];
// 4BBAD0: using guessed type int dword_4BBAD0;
// 4BBB04: using guessed type char byte_4BBB04;
// 4BBB0C: using guessed type int dword_4BBB0C;
// 4BBB10: using guessed type int dword_4BBB10;
// 4BBB3C: using guessed type int dword_4BBB3C;
// 4BBB44: using guessed type int dword_4BBB44;
// 4BBB54: using guessed type __int16 word_4BBB54;
// 4BBB78: using guessed type int dword_4BBB78;
// 4BBB84: using guessed type int dword_4BBB84;
// 4BBB88: using guessed type int dword_4BBB88;
// 4BBB8C: using guessed type int dword_4BBB8C;
// 4BBB90: using guessed type int dword_4BBB90;
// 4BBB94: using guessed type int dword_4BBB94;
// 4BBBAC: using guessed type int dword_4BBBAC;
// 4BBBB0: using guessed type char byte_4BBBB0;
// 4BBBB8: using guessed type int dword_4BBBB8;
// 4BBBBC: using guessed type int dword_4BBBBC;
// 4BBC20: using guessed type int dword_4BBC20;
// 4BBC24: using guessed type int dword_4BBC24;
// 4BBC5C: using guessed type char byte_4BBC5C;
// 4BBCD0: using guessed type int dword_4BBCD0;
// 4BBD08: using guessed type char byte_4BBD08;
// 4BBD10: using guessed type int dword_4BBD10;
// 4BBD70: using guessed type int dword_4BBD70;
// 4BBD7C: using guessed type int dword_4BBD7C;
// 4BBDB4: using guessed type char byte_4BBDB4;
// 4BBE1C: using guessed type int dword_4BBE1C;
// 4BBE28: using guessed type int dword_4BBE28;
// 4BBE60: using guessed type char byte_4BBE60;
// 4BBE68: using guessed type int dword_4BBE68;
// 4BBE6C: using guessed type int dword_4BBE6C;
// 4BBECC: using guessed type int dword_4BBECC;
// 4BBED4: using guessed type int dword_4BBED4;
// 4BBF0C: using guessed type char byte_4BBF0C;
// 4BBF14: using guessed type int dword_4BBF14;
// 4BBF18: using guessed type int dword_4BBF18;
// 4BBF78: using guessed type int dword_4BBF78;
// 4BBF7C: using guessed type int dword_4BBF7C;
// 4BBF80: using guessed type int dword_4BBF80;
// 4BBFB8: using guessed type char byte_4BBFB8;
// 4BC008: using guessed type __int16 word_4BC008;
// 4BC024: using guessed type int dword_4BC024;
// 4BC038: using guessed type int dword_4BC038;
// 4BC03C: using guessed type int dword_4BC03C;
// 4BC040: using guessed type int dword_4BC040;
// 4BC044: using guessed type int dword_4BC044;
// 4BC048: using guessed type int dword_4BC048;
// 4BC064: using guessed type char byte_4BC064;
// 4BC0B4: using guessed type __int16 word_4BC0B4;
// 4BC0D0: using guessed type int dword_4BC0D0;
// 4BC0E4: using guessed type int dword_4BC0E4;
// 4BC0E8: using guessed type int dword_4BC0E8;
// 4BC0EC: using guessed type int dword_4BC0EC;
// 4BC160: using guessed type __int16 word_4BC160;
// 4BC17C: using guessed type int dword_4BC17C;
// 4BC190: using guessed type int dword_4BC190;
// 4BC194: using guessed type int dword_4BC194;
// 4BC198: using guessed type int dword_4BC198;
// 4BC1BC: using guessed type char byte_4BC1BC;
// 4BC1C4: using guessed type int dword_4BC1C4;
// 4BC1C8: using guessed type int dword_4BC1C8;
// 4BC20C: using guessed type __int16 word_4BC20C;
// 4BC228: using guessed type int dword_4BC228;
// 4BC23C: using guessed type int dword_4BC23C;
// 4BC240: using guessed type int dword_4BC240;
// 4BC244: using guessed type int dword_4BC244;

//----- (00476790) --------------------------------------------------------
int __cdecl sub_476790(int a1)
{
  int *v1; // ecx@9
  int v2; // edx@9
  int result; // eax@9
  int v4; // [sp+4h] [bp-40h]@1
  int v5; // [sp+8h] [bp-3Ch]@1
  int v6; // [sp+Ch] [bp-38h]@1
  int v7; // [sp+10h] [bp-34h]@1
  int v8; // [sp+14h] [bp-30h]@1
  int v9; // [sp+18h] [bp-2Ch]@1
  int v10; // [sp+1Ch] [bp-28h]@1
  int v11; // [sp+20h] [bp-24h]@1
  int v12; // [sp+24h] [bp-20h]@1
  int v13; // [sp+28h] [bp-1Ch]@1
  int v14; // [sp+2Ch] [bp-18h]@1
  int v15; // [sp+30h] [bp-14h]@1
  int v16; // [sp+34h] [bp-10h]@1
  int v17; // [sp+38h] [bp-Ch]@1
  int v18; // [sp+3Ch] [bp-8h]@1
  int v19; // [sp+40h] [bp-4h]@1

  v4 = 0;
  v5 = 0;
  v6 = 72;
  v7 = 112;
  v8 = 0;
  v9 = 112;
  v10 = 72;
  v11 = 224;
  v12 = 160;
  v13 = 0;
  v14 = 232;
  v15 = 112;
  v16 = 0;
  v17 = 0;
  v18 = 0;
  v19 = 0;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0xA:
      *(_DWORD *)(a1 + 116) = 11;
      *(_DWORD *)(a1 + 104) = 2;
      *(_WORD *)(a1 + 80) = 8;
      *(_DWORD *)(a1 + 140) = 18432;
      *(_DWORD *)(a1 + 144) = 28672;
      goto LABEL_3;
    case 0xB:
LABEL_3:
      *(_DWORD *)(a1 + 8) = dword_4BBA60 - 18432;
      *(_DWORD *)(a1 + 12) = dword_4BBA64;
      break;
    case 0x32:
      *(_DWORD *)(a1 + 116) = 51;
      *(_DWORD *)(a1 + 120) = 112;
      goto LABEL_5;
    case 0x33:
LABEL_5:
      if ( !--*(_DWORD *)(a1 + 120) )
      {
        *(_DWORD *)(a1 + 116) = 100;
        *(_DWORD *)(a1 + 104) = 3;
      }
      break;
    case 0x64:
      *(_DWORD *)(a1 + 104) = 3;
      break;
    default:
      break;
  }
  v1 = &v4 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  result = v1[2];
  *(_DWORD *)(v2 + 8) = result;
  *(_DWORD *)(v2 + 12) = v1[3];
  if ( *(_DWORD *)(a1 + 116) == 51 )
  {
    result = a1;
    *(_DWORD *)(a1 + 96) = *(_DWORD *)(a1 + 120) + *(_DWORD *)(a1 + 88);
  }
  return result;
}

//----- (004769A0) --------------------------------------------------------
int __cdecl sub_4769A0(int a1)
{
  int *v1; // ecx@9
  int v2; // edx@9
  int result; // eax@9
  int v4; // [sp+4h] [bp-30h]@1
  int v5; // [sp+8h] [bp-2Ch]@1
  int v6; // [sp+Ch] [bp-28h]@1
  int v7; // [sp+10h] [bp-24h]@1
  int v8; // [sp+14h] [bp-20h]@1
  int v9; // [sp+18h] [bp-1Ch]@1
  int v10; // [sp+1Ch] [bp-18h]@1
  int v11; // [sp+20h] [bp-14h]@1
  int v12; // [sp+24h] [bp-10h]@1
  int v13; // [sp+28h] [bp-Ch]@1
  int v14; // [sp+2Ch] [bp-8h]@1
  int v15; // [sp+30h] [bp-4h]@1

  v4 = 72;
  v5 = 0;
  v6 = 160;
  v7 = 112;
  v8 = 72;
  v9 = 112;
  v10 = 160;
  v11 = 224;
  v12 = 0;
  v13 = 0;
  v14 = 0;
  v15 = 0;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0xA:
      *(_DWORD *)(a1 + 116) = 11;
      *(_DWORD *)(a1 + 104) = 0;
      *(_WORD *)(a1 + 80) = 8;
      *(_DWORD *)(a1 + 140) = 22528;
      *(_DWORD *)(a1 + 144) = 28672;
      goto LABEL_3;
    case 0xB:
LABEL_3:
      *(_DWORD *)(a1 + 8) = dword_4BBA60 + 22528;
      *(_DWORD *)(a1 + 12) = dword_4BBA64;
      break;
    case 0x32:
      *(_DWORD *)(a1 + 116) = 51;
      *(_DWORD *)(a1 + 120) = 112;
      goto LABEL_5;
    case 0x33:
LABEL_5:
      if ( !--*(_DWORD *)(a1 + 120) )
      {
        *(_DWORD *)(a1 + 116) = 100;
        *(_DWORD *)(a1 + 104) = 2;
      }
      break;
    case 0x64:
      *(_DWORD *)(a1 + 104) = 2;
      break;
    default:
      break;
  }
  v1 = &v4 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  result = v1[2];
  *(_DWORD *)(v2 + 8) = result;
  *(_DWORD *)(v2 + 12) = v1[3];
  if ( *(_DWORD *)(a1 + 116) == 51 )
  {
    result = a1;
    *(_DWORD *)(a1 + 96) = *(_DWORD *)(a1 + 120) + *(_DWORD *)(a1 + 88);
  }
  return result;
}

//----- (00476B90) --------------------------------------------------------
int __cdecl sub_476B90(int a1)
{
  int *v1; // edx@20
  int result; // eax@20
  int v3; // [sp+4h] [bp-50h]@1
  int v4; // [sp+8h] [bp-4Ch]@1
  int v5; // [sp+Ch] [bp-48h]@1
  int v6; // [sp+10h] [bp-44h]@1
  int v7; // [sp+14h] [bp-40h]@1
  int v8; // [sp+18h] [bp-3Ch]@1
  int v9; // [sp+1Ch] [bp-38h]@1
  int v10; // [sp+20h] [bp-34h]@1
  int v11; // [sp+24h] [bp-30h]@1
  int v12; // [sp+28h] [bp-2Ch]@1
  int v13; // [sp+2Ch] [bp-28h]@1
  int v14; // [sp+30h] [bp-24h]@1
  int v15; // [sp+34h] [bp-20h]@1
  int v16; // [sp+38h] [bp-1Ch]@1
  int v17; // [sp+3Ch] [bp-18h]@1
  int v18; // [sp+40h] [bp-14h]@1
  int v19; // [sp+44h] [bp-10h]@1
  int v20; // [sp+48h] [bp-Ch]@1
  int v21; // [sp+4Ch] [bp-8h]@1
  int v22; // [sp+50h] [bp-4h]@1

  v3 = 0;
  v4 = 0;
  v5 = 0;
  v6 = 0;
  v7 = 160;
  v8 = 112;
  v9 = 232;
  v10 = 152;
  v11 = 160;
  v12 = 152;
  v13 = 232;
  v14 = 192;
  v15 = 160;
  v16 = 192;
  v17 = 232;
  v18 = 232;
  v19 = 248;
  v20 = 160;
  v21 = 320;
  v22 = 200;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0:
      *(_DWORD *)(a1 + 104) = 0;
      break;
    case 0xA:
      *(_DWORD *)(a1 + 104) = 1;
      break;
    case 0x14:
      *(_DWORD *)(a1 + 104) = 2;
      break;
    case 0x1E:
      *(_DWORD *)(a1 + 116) = 31;
      *(_DWORD *)(a1 + 104) = 3;
      *(_DWORD *)(a1 + 120) = 100;
      goto LABEL_6;
    case 0x1F:
LABEL_6:
      if ( ++*(_DWORD *)(a1 + 120) > 300 )
        *(_DWORD *)(a1 + 120) = 0;
      if ( *(_DWORD *)(a1 + 120) > 250 && *(_DWORD *)(a1 + 120) % 16 == 1 )
        Play_Sound_Effect(26, 1);
      if ( *(_DWORD *)(a1 + 120) > 250 && *(_DWORD *)(a1 + 120) % 16 == 7 )
      {
        NPC_Create(293, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), 0, 0, 0, 0, 128);
        Play_Sound_Effect(101, 1);
      }
      if ( *(_DWORD *)(a1 + 120) == 200 )
        Play_Sound_Effect(116, 1);
      if ( *(_DWORD *)(a1 + 120) > 200 && *(_DWORD *)(a1 + 120) % 2 )
        *(_DWORD *)(a1 + 104) = 4;
      else
        *(_DWORD *)(a1 + 104) = 3;
      break;
    default:
      break;
  }
  *(_DWORD *)(a1 + 148) = 18432;
  *(_DWORD *)(a1 + 140) = 18432;
  *(_DWORD *)(a1 + 144) = 10240;
  *(_DWORD *)(a1 + 8) = dword_4BBA60 - 18432;
  *(_DWORD *)(a1 + 12) = dword_4BBA64 + 2048;
  *(_WORD *)(a1 + 80) = 8;
  v1 = &v3 + 4 * *(_DWORD *)(a1 + 104);
  result = a1 + 84;
  *(_DWORD *)result = *v1;
  *(_DWORD *)(result + 4) = v1[1];
  *(_DWORD *)(result + 8) = v1[2];
  *(_DWORD *)(result + 12) = v1[3];
  return result;
}

//----- (00476E50) --------------------------------------------------------
int __cdecl sub_476E50(int a1)
{
  int result; // eax@1
  int v2; // esi@15
  int v3; // esi@15
  int *v4; // ecx@16
  int v5; // edx@16
  int v6; // [sp+8h] [bp-34h]@1
  int v7; // [sp+Ch] [bp-30h]@1
  int v8; // [sp+10h] [bp-2Ch]@1
  int v9; // [sp+14h] [bp-28h]@1
  int v10; // [sp+18h] [bp-24h]@1
  int v11; // [sp+1Ch] [bp-20h]@1
  int v12; // [sp+20h] [bp-1Ch]@1
  int v13; // [sp+24h] [bp-18h]@1
  int v14; // [sp+28h] [bp-14h]@1
  int v15; // [sp+2Ch] [bp-10h]@1
  int v16; // [sp+30h] [bp-Ch]@1
  int v17; // [sp+34h] [bp-8h]@1
  int v18; // [sp+38h] [bp-4h]@13

  v6 = 256;
  v7 = 0;
  v8 = 320;
  v9 = 40;
  v10 = 256;
  v11 = 40;
  v12 = 320;
  v13 = 80;
  v14 = 256;
  v15 = 80;
  v16 = 320;
  v17 = 120;
  result = a1;
  if ( *(_BYTE *)a1 )
  {
    *(_DWORD *)(a1 + 64) = 1000;
    switch ( *(_DWORD *)(a1 + 116) )
    {
      case 0:
        *(_WORD *)(a1 + 80) &= 0xFFDFu;
        break;
      case 5:
        *(_DWORD *)(a1 + 104) = 0;
        *(_WORD *)(a1 + 80) &= 0xFFDFu;
        ++*(_DWORD *)(a1 + 112);
        *(_DWORD *)(a1 + 112) %= 256;
        break;
      case 0xA:
        *(_DWORD *)(a1 + 104) = 0;
        *(_WORD *)(a1 + 80) &= 0xFFDFu;
        *(_DWORD *)(a1 + 112) += 2;
        *(_DWORD *)(a1 + 112) %= 256;
        break;
      case 0x14:
        *(_DWORD *)(a1 + 104) = 1;
        *(_WORD *)(a1 + 80) &= 0xFFDFu;
        *(_DWORD *)(a1 + 112) += 2;
        *(_DWORD *)(a1 + 112) %= 256;
        break;
      case 0x1E:
        *(_DWORD *)(a1 + 104) = 0;
        *(_WORD *)(a1 + 80) &= 0xFFDFu;
        *(_DWORD *)(a1 + 112) += 4;
        *(_DWORD *)(a1 + 112) %= 256;
        break;
      case 0xC8:
        *(_DWORD *)(a1 + 116) = 201;
        *(_DWORD *)(a1 + 104) = 2;
        *(_DWORD *)(a1 + 16) = 0;
        *(_DWORD *)(a1 + 20) = 0;
        goto LABEL_9;
      case 0xC9:
LABEL_9:
        *(_DWORD *)(a1 + 16) += 32;
        *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
        if ( *(_DWORD *)(a1 + 8) > (*(signed __int16 *)&word_49E586 << 13) + 0x4000 )
          *(_BYTE *)a1 = 0;
        break;
      default:
        break;
    }
    if ( *(_DWORD *)(a1 + 116) < 50 )
    {
      if ( *(_DWORD *)(a1 + 108) )
        v18 = *(_DWORD *)(a1 + 112) + 128;
      else
        v18 = *(_DWORD *)(a1 + 112) + 384;
      v2 = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 8);
      *(_DWORD *)(a1 + 8) = v2 + 48 * COS_function(v18 / 2) - 4096;
      v3 = *(_DWORD *)(a1 + 168);
      *(_DWORD *)(a1 + 12) = *(_DWORD *)(v3 + 12) + 80 * SIN_function(v18 / 2);
    }
    v4 = &v6 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    result = v4[2];
    *(_DWORD *)(v5 + 8) = result;
    *(_DWORD *)(v5 + 12) = v4[3];
  }
  return result;
}

//----- (00477230) --------------------------------------------------------
int __cdecl sub_477230(int a1)
{
  int result; // eax@1

  result = a1;
  switch ( *(_DWORD *)(a1 + 108) )
  {
    case 0:
      *(_DWORD *)(a1 + 8) = dword_4BBA60;
      result = a1;
      *(_DWORD *)(a1 + 12) = dword_4BBA64 - 0x4000;
      break;
    case 1:
      *(_DWORD *)(a1 + 8) = dword_4BBA60 + 14336;
      result = a1;
      *(_DWORD *)(a1 + 12) = dword_4BBA64;
      break;
    case 2:
      result = a1;
      *(_DWORD *)(a1 + 8) = dword_4BBA60 + 2048;
      *(_DWORD *)(a1 + 12) = dword_4BBA64 + 0x4000;
      break;
    case 3:
      *(_DWORD *)(a1 + 8) = dword_4BBA60 - 14336;
      result = a1;
      *(_DWORD *)(a1 + 12) = dword_4BBA64 + 2048;
      break;
    default:
      return result;
  }
  return result;
}

//----- (004772F0) --------------------------------------------------------
int Boss_9_Ballos_Ball()
{
  int v0; // eax@34
  int v1; // eax@63
  int v2; // eax@71
  int X_Position; // ST34_4@119
  int v4; // eax@119
  int v5; // ST14_4@147
  int v6; // eax@147
  int v7; // ST34_4@158
  int Y_Position; // ST38_4@158
  int v9; // ST34_4@162
  int v10; // ST38_4@162
  int v11; // ST34_4@171
  int v12; // eax@171
  int v13; // ST34_4@174
  int v14; // eax@174
  signed int v16; // [sp+8h] [bp-14h]@1
  int l; // [sp+10h] [bp-Ch]@32
  int k; // [sp+10h] [bp-Ch]@61
  int i; // [sp+10h] [bp-Ch]@69
  signed int j; // [sp+10h] [bp-Ch]@75
  signed int m; // [sp+10h] [bp-Ch]@102
  int n; // [sp+10h] [bp-Ch]@117
  int jj; // [sp+10h] [bp-Ch]@156
  int ii; // [sp+10h] [bp-Ch]@160
  int kk; // [sp+10h] [bp-Ch]@166

  v16 = *((_DWORD *)&byte_4BBA58 + 29);
  if ( v16 <= 314 )
  {
    if ( v16 == 314 )
    {
      *((_DWORD *)&byte_4BBA58 + 19) = 3;
      *((_DWORD *)&byte_4BBA58 + 5) = 938;
      *((_DWORD *)&byte_4BBA58 + 4) = 0;
      *((_DWORD *)&byte_4BBA58 + 3) += *((_DWORD *)&byte_4BBA58 + 5);
      if ( *((_DWORD *)&byte_4BBA58 + 3) > 115200 )
      {
        *((_DWORD *)&byte_4BBA58 + 3) = 115200;
        *((_DWORD *)&byte_4BBA58 + 29) = 311;
      }
    }
    else if ( v16 > 204 )
    {
      switch ( v16 )
      {
        case 220:
          *((_DWORD *)&byte_4BBA58 + 29) = 221;
          *((_DWORD *)&byte_4BBA58 + 16) = 1200;
          dword_4BBB78 = 200;
          dword_4BBC24 = 200;
          *((_DWORD *)&byte_4BBA58 + 4) = 0;
          *((_DWORD *)&byte_4BBA58 + 26) = 0;
          *((_BYTE *)&byte_4BBA58 + 156) = 0;
          LOBYTE(NPCStruct_Damage) = 0;
          goto LABEL_66;
        case 221:
LABEL_66:
          *((_DWORD *)&byte_4BBA58 + 5) += 64;
          if ( *((_DWORD *)&byte_4BBA58 + 5) > 3072 )
            *((_DWORD *)&byte_4BBA58 + 5) = 3072;
          *((_DWORD *)&byte_4BBA58 + 3) += *((_DWORD *)&byte_4BBA58 + 5);
          if ( *((_DWORD *)&byte_4BBA58 + 3) > 155648 - *((_DWORD *)&byte_4BBA58 + 34) )
          {
            *((_DWORD *)&byte_4BBA58 + 3) = 155648 - *((_DWORD *)&byte_4BBA58 + 34);
            *((_DWORD *)&byte_4BBA58 + 5) = 0;
            *((_DWORD *)&byte_4BBA58 + 29) = 222;
            *((_DWORD *)&byte_4BBA58 + 30) = 0;
            sub_40F320(30);
            Play_Sound_Effect(26, 1);
            for ( i = 0; i < 16; ++i )
            {
              v2 = RNG_Range(-40, 40);
              NPC_Create(
                4,
                *((_DWORD *)&byte_4BBA58 + 2) + (v2 << 9),
                *((_DWORD *)&byte_4BBA58 + 3) + 20480,
                0,
                0,
                0,
                0,
                256);
            }
            if ( Tile_On_Which_Quote_Is & 8 )
              Quote_Y_Velocity = -512;
          }
          goto LABEL_152;
        case 300:
          *((_DWORD *)&byte_4BBA58 + 29) = 301;
          *((_DWORD *)&byte_4BBA58 + 30) = 0;
          for ( j = 0; j < 256; j += 64 )
          {
            NPC_Create(
              342,
              *((_DWORD *)&byte_4BBA58 + 2),
              *((_DWORD *)&byte_4BBA58 + 3),
              0,
              0,
              j,
              (int)&byte_4BBA58,
              90);
            NPC_Create(
              342,
              *((_DWORD *)&byte_4BBA58 + 2),
              *((_DWORD *)&byte_4BBA58 + 3),
              0,
              0,
              j + 544,
              (int)&byte_4BBA58,
              90);
          }
          NPC_Create(343, *((_DWORD *)&byte_4BBA58 + 2), *((_DWORD *)&byte_4BBA58 + 3), 0, 0, 0, (int)&byte_4BBA58, 24);
          NPC_Create(
            344,
            *((_DWORD *)&byte_4BBA58 + 2) - 12288,
            *((_DWORD *)&byte_4BBA58 + 3) - 18432,
            0,
            0,
            0,
            (int)&byte_4BBA58,
            32);
          NPC_Create(
            344,
            *((_DWORD *)&byte_4BBA58 + 2) + 12288,
            *((_DWORD *)&byte_4BBA58 + 3) - 18432,
            0,
            0,
            2,
            (int)&byte_4BBA58,
            32);
          goto LABEL_79;
        case 301:
LABEL_79:
          *((_DWORD *)&byte_4BBA58 + 3) += (115200 - *((_DWORD *)&byte_4BBA58 + 3)) / 8;
          if ( ++*((_DWORD *)&byte_4BBA58 + 30) > 50 )
          {
            *((_DWORD *)&byte_4BBA58 + 29) = 310;
            *((_DWORD *)&byte_4BBA58 + 30) = 0;
          }
          break;
        case 311:
          *((_DWORD *)&byte_4BBA58 + 19) = 0;
          *((_DWORD *)&byte_4BBA58 + 4) = -938;
          *((_DWORD *)&byte_4BBA58 + 5) = 0;
          *((_DWORD *)&byte_4BBA58 + 2) += *((_DWORD *)&byte_4BBA58 + 4);
          if ( *((_DWORD *)&byte_4BBA58 + 2) < 56832 )
          {
            *((_DWORD *)&byte_4BBA58 + 2) = 56832;
            *((_DWORD *)&byte_4BBA58 + 29) = 312;
          }
          break;
        case 312:
          *((_DWORD *)&byte_4BBA58 + 19) = 1;
          *((_DWORD *)&byte_4BBA58 + 5) = -938;
          *((_DWORD *)&byte_4BBA58 + 4) = 0;
          *((_DWORD *)&byte_4BBA58 + 3) += *((_DWORD *)&byte_4BBA58 + 5);
          if ( *((_DWORD *)&byte_4BBA58 + 3) < 56832 )
          {
            *((_DWORD *)&byte_4BBA58 + 3) = 56832;
            *((_DWORD *)&byte_4BBA58 + 29) = 313;
          }
          break;
        case 313:
          *((_DWORD *)&byte_4BBA58 + 19) = 2;
          *((_DWORD *)&byte_4BBA58 + 4) = 938;
          *((_DWORD *)&byte_4BBA58 + 5) = 0;
          *((_DWORD *)&byte_4BBA58 + 2) += *((_DWORD *)&byte_4BBA58 + 4);
          if ( *((_DWORD *)&byte_4BBA58 + 2) > 262656 )
          {
            *((_DWORD *)&byte_4BBA58 + 2) = 262656;
            *((_DWORD *)&byte_4BBA58 + 29) = 314;
          }
          if ( *((_DWORD *)&byte_4BBA58 + 27) )
            --*((_DWORD *)&byte_4BBA58 + 27);
          if ( !*((_DWORD *)&byte_4BBA58 + 27)
            && *((_DWORD *)&byte_4BBA58 + 2) > 155648
            && *((_DWORD *)&byte_4BBA58 + 2) < 172032 )
          {
            *((_DWORD *)&byte_4BBA58 + 29) = 400;
          }
          break;
        default:
          goto LABEL_152;
      }
    }
    else if ( v16 == 204 )
    {
      if ( *((_DWORD *)&byte_4BBA58 + 2) < 40960 )
        *((_DWORD *)&byte_4BBA58 + 4) = 512;
      if ( *((_DWORD *)&byte_4BBA58 + 2) > 278528 )
        *((_DWORD *)&byte_4BBA58 + 4) = -512;
      *((_DWORD *)&byte_4BBA58 + 5) += 85;
      if ( *((_DWORD *)&byte_4BBA58 + 5) > 3072 )
        *((_DWORD *)&byte_4BBA58 + 5) = 3072;
      *((_DWORD *)&byte_4BBA58 + 2) += *((_DWORD *)&byte_4BBA58 + 4);
      *((_DWORD *)&byte_4BBA58 + 3) += *((_DWORD *)&byte_4BBA58 + 5);
      if ( *((_DWORD *)&byte_4BBA58 + 3) > 155648 - *((_DWORD *)&byte_4BBA58 + 34) )
      {
        *((_DWORD *)&byte_4BBA58 + 3) = 155648 - *((_DWORD *)&byte_4BBA58 + 34);
        *((_DWORD *)&byte_4BBA58 + 5) = 0;
        *((_DWORD *)&byte_4BBA58 + 29) = 201;
        *((_DWORD *)&byte_4BBA58 + 30) = 0;
        if ( Quote_Y_Position > *((_DWORD *)&byte_4BBA58 + 3) + 28672 )
          Take_Damage(16);
        if ( Tile_On_Which_Quote_Is & 8 )
          Quote_Y_Velocity = -512;
        sub_40F320(30);
        Play_Sound_Effect(26, 1);
        NPC_Create(332, *((_DWORD *)&byte_4BBA58 + 2) - 6144, *((_DWORD *)&byte_4BBA58 + 3) + 26624, 0, 0, 0, 0, 256);
        NPC_Create(332, *((_DWORD *)&byte_4BBA58 + 2) + 6144, *((_DWORD *)&byte_4BBA58 + 3) + 26624, 0, 0, 2, 0, 256);
        Play_Sound_Effect(44, 1);
        for ( k = 0; k < 16; ++k )
        {
          v1 = RNG_Range(-40, 40);
          NPC_Create(
            4,
            *((_DWORD *)&byte_4BBA58 + 2) + (v1 << 9),
            *((_DWORD *)&byte_4BBA58 + 3) + 20480,
            0,
            0,
            0,
            0,
            256);
        }
      }
    }
    else
    {
      switch ( v16 )
      {
        case 0:
          *((_DWORD *)&byte_4BBA58 + 29) = 1;
          *(_BYTE *)&byte_4BBA58 = -128;
          *((_DWORD *)&byte_4BBA58 + 17) = 1;
          *((_DWORD *)&byte_4BBA58 + 19) = 0;
          *((_DWORD *)&byte_4BBA58 + 2) = 163840;
          *((_DWORD *)&byte_4BBA58 + 3) = -32768;
          *((_DWORD *)&byte_4BBA58 + 14) = 54;
          *((_DWORD *)&byte_4BBA58 + 31) = 0x4000;
          *((_DWORD *)&byte_4BBA58 + 32) = 24576;
          *((_DWORD *)&byte_4BBA58 + 33) = 0x4000;
          *((_DWORD *)&byte_4BBA58 + 34) = 24576;
          *((_WORD *)&byte_4BBA58 + 40) = -32184;
          *((_DWORD *)&byte_4BBA58 + 18) = 3;
          *((_DWORD *)&byte_4BBA58 + 41) = 0;
          *((_DWORD *)&byte_4BBA58 + 12) = 1000;
          *((_DWORD *)&byte_4BBA58 + 16) = 800;
          byte_4BBB04 = -112;
          dword_4BBB50 = 0;
          word_4BBB54 = 8;
          dword_4BBB44 = 10000;
          dword_4BBB90 = 6144;
          dword_4BBB94 = 0;
          dword_4BBB98 = 6144;
          dword_4BBB9C = 0x2000;
          dword_4BBB80 = 6144;
          dword_4BBB84 = 0;
          dword_4BBB88 = 6144;
          dword_4BBB8C = 0x2000;
          qmemcpy(&byte_4BBBB0, &byte_4BBB04, 0xACu);
          dword_4BBBFC = 2;
          byte_4BBC5C = -112;
          word_4BBCAC = 13;
          dword_4BBCE8 = 30720;
          dword_4BBCEC = 30720;
          dword_4BBCF0 = 30720;
          dword_4BBCF4 = 30720;
          dword_4BBCD8 = 24576;
          dword_4BBCDC = 12288;
          dword_4BBCE0 = 24576;
          dword_4BBCE4 = 0x4000;
          byte_4BBD08 = -112;
          word_4BBD58 = 13;
          dword_4BBD84 = 0x4000;
          dword_4BBD88 = 4096;
          dword_4BBD8C = 0x4000;
          dword_4BBD90 = 4096;
          byte_4BBDB4 = -112;
          word_4BBE04 = 76;
          dword_4BBE30 = 0x4000;
          dword_4BBE34 = 0;
          dword_4BBE38 = 0x4000;
          dword_4BBE3C = 24576;
          goto LABEL_152;
        case 100:
          *((_DWORD *)&byte_4BBA58 + 29) = 101;
          *((_DWORD *)&byte_4BBA58 + 26) = 0;
          *((_DWORD *)&byte_4BBA58 + 2) = Quote_X_Position;
          NPC_Create(333, Quote_X_Position, 155648, 0, 0, 2, 0, 256);
          *((_DWORD *)&byte_4BBA58 + 30) = 0;
          goto LABEL_22;
        case 101:
LABEL_22:
          if ( ++*((_DWORD *)&byte_4BBA58 + 30) > 30 )
            *((_DWORD *)&byte_4BBA58 + 29) = 102;
          goto LABEL_152;
        case 102:
          *((_DWORD *)&byte_4BBA58 + 5) += 64;
          if ( *((_DWORD *)&byte_4BBA58 + 5) > 3072 )
            *((_DWORD *)&byte_4BBA58 + 5) = 3072;
          *((_DWORD *)&byte_4BBA58 + 3) += *((_DWORD *)&byte_4BBA58 + 5);
          if ( *((_DWORD *)&byte_4BBA58 + 3) > 155648 - *((_DWORD *)&byte_4BBA58 + 34) )
          {
            *((_DWORD *)&byte_4BBA58 + 3) = 155648 - *((_DWORD *)&byte_4BBA58 + 34);
            *((_DWORD *)&byte_4BBA58 + 5) = 0;
            *((_DWORD *)&byte_4BBA58 + 29) = 103;
            *((_DWORD *)&byte_4BBA58 + 30) = 0;
            sub_40F320(30);
            Play_Sound_Effect(44, 1);
            if ( Quote_Y_Position > *((_DWORD *)&byte_4BBA58 + 3) + 24576
              && Quote_X_Position < *((_DWORD *)&byte_4BBA58 + 2) + 12288
              && Quote_X_Position > *((_DWORD *)&byte_4BBA58 + 2) - 12288 )
            {
              Take_Damage(16);
            }
            for ( l = 0; l < 16; ++l )
            {
              v0 = RNG_Range(-40, 40);
              NPC_Create(
                4,
                *((_DWORD *)&byte_4BBA58 + 2) + (v0 << 9),
                *((_DWORD *)&byte_4BBA58 + 3) + 20480,
                0,
                0,
                0,
                0,
                256);
            }
            if ( Tile_On_Which_Quote_Is & 8 )
              Quote_Y_Velocity = -512;
          }
          goto LABEL_152;
        case 103:
          if ( ++*((_DWORD *)&byte_4BBA58 + 30) == 50 )
          {
            *((_DWORD *)&byte_4BBA58 + 29) = 104;
            dword_4BBB78 = 100;
            dword_4BBC24 = 100;
          }
          goto LABEL_152;
        case 200:
          *((_DWORD *)&byte_4BBA58 + 29) = 201;
          *((_DWORD *)&byte_4BBA58 + 27) = 0;
          goto LABEL_42;
        case 201:
LABEL_42:
          *((_DWORD *)&byte_4BBA58 + 29) = 203;
          *((_DWORD *)&byte_4BBA58 + 4) = 0;
          ++*((_DWORD *)&byte_4BBA58 + 27);
          *((_DWORD *)&byte_4BBA58 + 34) = 24576;
          *((_DWORD *)&byte_4BBA58 + 41) = 0;
          if ( *((_DWORD *)&byte_4BBA58 + 27) % 3 )
            *((_DWORD *)&byte_4BBA58 + 30) = 50;
          else
            *((_DWORD *)&byte_4BBA58 + 30) = 150;
          goto LABEL_45;
        case 203:
LABEL_45:
          if ( --*((_DWORD *)&byte_4BBA58 + 30) <= 0 )
          {
            *((_DWORD *)&byte_4BBA58 + 29) = 204;
            *((_DWORD *)&byte_4BBA58 + 5) = -3072;
            if ( *((_DWORD *)&byte_4BBA58 + 2) >= Quote_X_Position )
              *((_DWORD *)&byte_4BBA58 + 4) = -512;
            else
              *((_DWORD *)&byte_4BBA58 + 4) = 512;
          }
          break;
        default:
          goto LABEL_152;
      }
    }
    goto LABEL_152;
  }
  if ( v16 <= 424 )
  {
    if ( v16 == 424 )
    {
      if ( ++*((_DWORD *)&byte_4BBA58 + 25) > 200 )
      {
        *((_DWORD *)&byte_4BBA58 + 25) = 0;
        *((_DWORD *)&byte_4BBA58 + 29) = 425;
      }
    }
    else
    {
      switch ( v16 )
      {
        case 400:
          *((_DWORD *)&byte_4BBA58 + 29) = 401;
          *((_DWORD *)&byte_4BBA58 + 30) = 0;
          *((_DWORD *)&byte_4BBA58 + 4) = 0;
          *((_DWORD *)&byte_4BBA58 + 5) = 0;
          sub_4702D0(339, 0);
          goto LABEL_101;
        case 401:
LABEL_101:
          *((_DWORD *)&byte_4BBA58 + 3) += (81408 - *((_DWORD *)&byte_4BBA58 + 3)) / 8;
          if ( ++*((_DWORD *)&byte_4BBA58 + 30) > 50 )
          {
            *((_DWORD *)&byte_4BBA58 + 30) = 0;
            *((_DWORD *)&byte_4BBA58 + 29) = 410;
            for ( m = 0; m < 256; m += 32 )
              NPC_Create(
                346,
                *((_DWORD *)&byte_4BBA58 + 2),
                *((_DWORD *)&byte_4BBA58 + 3),
                0,
                0,
                m,
                (int)&byte_4BBA58,
                80);
            NPC_Create(
              343,
              *((_DWORD *)&byte_4BBA58 + 2),
              *((_DWORD *)&byte_4BBA58 + 3),
              0,
              0,
              0,
              (int)&byte_4BBA58,
              24);
            NPC_Create(
              344,
              *((_DWORD *)&byte_4BBA58 + 2) - 12288,
              *((_DWORD *)&byte_4BBA58 + 3) - 18432,
              0,
              0,
              0,
              (int)&byte_4BBA58,
              32);
            NPC_Create(
              344,
              *((_DWORD *)&byte_4BBA58 + 2) + 12288,
              *((_DWORD *)&byte_4BBA58 + 3) - 18432,
              0,
              0,
              2,
              (int)&byte_4BBA58,
              32);
          }
          goto LABEL_152;
        case 410:
          if ( ++*((_DWORD *)&byte_4BBA58 + 30) > 50 )
          {
            *((_DWORD *)&byte_4BBA58 + 30) = 0;
            *((_DWORD *)&byte_4BBA58 + 29) = 411;
          }
          goto LABEL_152;
        case 411:
          if ( ++*((_DWORD *)&byte_4BBA58 + 30) % 30 == 1 )
            NPC_Create(348, (2 * (*((_DWORD *)&byte_4BBA58 + 30) / 30) + 2) << 13, 172032, 0, 0, 0, 0, 384);
          if ( *((_DWORD *)&byte_4BBA58 + 30) / 3 % 2 )
            Play_Sound_Effect(26, 1);
          if ( *((_DWORD *)&byte_4BBA58 + 30) > 540 )
            *((_DWORD *)&byte_4BBA58 + 29) = 420;
          goto LABEL_152;
        case 420:
          *((_DWORD *)&byte_4BBA58 + 29) = 421;
          *((_DWORD *)&byte_4BBA58 + 30) = 0;
          *((_DWORD *)&byte_4BBA58 + 25) = 0;
          sub_40F320(30);
          Play_Sound_Effect(35, 1);
          dword_4BBB78 = 102;
          dword_4BBC24 = 102;
          for ( n = 0; n < 256; ++n )
          {
            X_Position = *((_DWORD *)&byte_4BBA58 + 2) + (RNG_Range(-60, 60) << 9);
            v4 = RNG_Range(-60, 60);
            NPC_Create(4, X_Position, *((_DWORD *)&byte_4BBA58 + 3) + (v4 << 9), 0, 0, 0, 0, 0);
          }
          goto LABEL_120;
        case 421:
LABEL_120:
          if ( ++*((_DWORD *)&byte_4BBA58 + 25) > 500 )
          {
            *((_DWORD *)&byte_4BBA58 + 25) = 0;
            *((_DWORD *)&byte_4BBA58 + 29) = 422;
          }
          break;
        case 422:
          if ( ++*((_DWORD *)&byte_4BBA58 + 25) > 200 )
          {
            *((_DWORD *)&byte_4BBA58 + 25) = 0;
            *((_DWORD *)&byte_4BBA58 + 29) = 423;
          }
          break;
        case 423:
          if ( ++*((_DWORD *)&byte_4BBA58 + 25) > 20 )
          {
            *((_DWORD *)&byte_4BBA58 + 25) = 0;
            *((_DWORD *)&byte_4BBA58 + 29) = 424;
          }
          break;
        default:
          goto LABEL_152;
      }
    }
    goto LABEL_152;
  }
  if ( v16 <= 428 )
  {
    switch ( v16 )
    {
      case 428:
        if ( ++*((_DWORD *)&byte_4BBA58 + 25) > 200 )
        {
          *((_DWORD *)&byte_4BBA58 + 25) = 0;
          *((_DWORD *)&byte_4BBA58 + 29) = 421;
        }
        break;
      case 425:
        if ( ++*((_DWORD *)&byte_4BBA58 + 25) > 500 )
        {
          *((_DWORD *)&byte_4BBA58 + 25) = 0;
          *((_DWORD *)&byte_4BBA58 + 29) = 426;
        }
        break;
      case 426:
        if ( ++*((_DWORD *)&byte_4BBA58 + 25) > 200 )
        {
          *((_DWORD *)&byte_4BBA58 + 25) = 0;
          *((_DWORD *)&byte_4BBA58 + 29) = 427;
        }
        break;
      default:
        if ( v16 == 427 && ++*((_DWORD *)&byte_4BBA58 + 25) > 20 )
        {
          *((_DWORD *)&byte_4BBA58 + 25) = 0;
          *((_DWORD *)&byte_4BBA58 + 29) = 428;
        }
        break;
    }
    goto LABEL_152;
  }
  if ( v16 == 1000 )
  {
    *((_DWORD *)&byte_4BBA58 + 29) = 1001;
    *((_DWORD *)&byte_4BBA58 + 30) = 0;
    dword_4BBB78 = 300;
    dword_4BBC24 = 300;
    word_4BBAA8[0] &= 0xFFBEu;
    word_4BBCAC &= 0xFFBEu;
    word_4BBD58 &= 0xFFBEu;
    word_4BBE04 &= 0xFFBEu;
  }
  else if ( v16 != 1001 )
  {
    if ( v16 == 1002 )
    {
      sub_40F320(40);
      if ( ++dword_4BBAD0 == 50 )
      {
        *(_BYTE *)&byte_4BBA58 = 0;
        byte_4BBB04 = 0;
        byte_4BBBB0 = 0;
        byte_4BBC5C = 0;
        byte_4BBD08 = 0;
        byte_4BBDB4 = 0;
        sub_4702D0(350, 1);
        sub_4702D0(348, 1);
      }
    }
    goto LABEL_152;
  }
  if ( !(++dword_4BBAD0 % 12) )
    Play_Sound_Effect(44, 1);
  v5 = dword_4BBA64 + (RNG_Range(-60, 60) << 9);
  v6 = RNG_Range(-60, 60);
  sub_46F150(dword_4BBA60 + (v6 << 9), v5, 1, 1);
  if ( dword_4BBAD0 > 150 )
  {
    dword_4BBAD0 = 0;
    dword_4BBACC[0] = 1002;
    Explosion_(dword_4BBA60, dword_4BBA64, 1);
    Play_Sound_Effect(35, 1);
  }
LABEL_152:
  if ( *((_DWORD *)&byte_4BBA58 + 29) > 420 && *((_DWORD *)&byte_4BBA58 + 29) < 500 )
  {
    word_4BBCAC |= 0x20u;
    word_4BBD58 |= 0x20u;
    word_4BBE04 |= 0x20u;
    if ( ++*((_DWORD *)&byte_4BBA58 + 30) > 300 )
    {
      *((_DWORD *)&byte_4BBA58 + 30) = 0;
      if ( Quote_X_Position <= *((_DWORD *)&byte_4BBA58 + 2) )
      {
        for ( ii = 0; ii < 8; ++ii )
        {
          v9 = (RNG_Range(-4, 4) << 13) / 4;
          v10 = (RNG_Range(8, 68) << 13) / 4;
          NPC_Create(350, v9, v10, 0, 0, 2, 0, 256);
        }
      }
      else
      {
        for ( jj = 0; jj < 8; ++jj )
        {
          v7 = ((RNG_Range(-4, 4) + 156) << 13) / 4;
          Y_Position = (RNG_Range(8, 68) << 13) / 4;
          NPC_Create(350, v7, Y_Position, 0, 0, 0, 0, 256);
        }
      }
    }
    if ( *((_DWORD *)&byte_4BBA58 + 30) == 270
      || *((_DWORD *)&byte_4BBA58 + 30) == 280
      || *((_DWORD *)&byte_4BBA58 + 30) == 290 )
    {
      NPC_Create(353, *((_DWORD *)&byte_4BBA58 + 2), *((_DWORD *)&byte_4BBA58 + 3) - 26624, 0, 0, 1, 0, 256);
      Play_Sound_Effect(39, 1);
      for ( kk = 0; kk < 4; ++kk )
        NPC_Create(4, *((_DWORD *)&byte_4BBA58 + 2), *((_DWORD *)&byte_4BBA58 + 3) - 26624, 0, 0, 0, 0, 256);
    }
    if ( *((_DWORD *)&byte_4BBA58 + 16) <= 500 )
    {
      if ( RNG_Range(0, 4) == 2 )
      {
        v13 = *((_DWORD *)&byte_4BBA58 + 2) + (RNG_Range(-40, 40) << 9);
        v14 = RNG_Range(0, 40);
        NPC_Create(270, v13, *((_DWORD *)&byte_4BBA58 + 3) + (v14 << 9), 0, 0, 3, 0, 0);
      }
    }
    else if ( RNG_Range(0, 10) == 2 )
    {
      v11 = *((_DWORD *)&byte_4BBA58 + 2) + (RNG_Range(-40, 40) << 9);
      v12 = RNG_Range(0, 40);
      NPC_Create(270, v11, *((_DWORD *)&byte_4BBA58 + 3) + (v12 << 9), 0, 0, 3, 0, 0);
    }
  }
  if ( *((_BYTE *)&byte_4BBA58 + 156) )
  {
    LOBYTE(NPCStruct_Damage) = NPCStruct_Damage + 1;
    dword_4BBCC4 = ((signed int)(unsigned __int8)NPCStruct_Damage >> 1) % 2 != 0;
  }
  else
  {
    dword_4BBCC4 = 0;
  }
  if ( *((_DWORD *)&byte_4BBA58 + 29) > 420 )
    dword_4BBCC4 += 2;
  sub_478AA0((int)&byte_4BBB04);
  sub_478AA0((int)&byte_4BBBB0);
  sub_478F20((int)&byte_4BBC5C);
  sub_478FE0((int)&byte_4BBD08);
  return sub_479010((int)&byte_4BBDB4);
}
// 49E63C: using guessed type int Tile_On_Which_Quote_Is;
// 49E670: using guessed type int Quote_Y_Velocity;
// 4BBA40: using guessed type int NPCStruct_Damage;
// 4BBAA8: using guessed type __int16 word_4BBAA8[];
// 4BBACC: using guessed type int dword_4BBACC[];
// 4BBAD0: using guessed type int dword_4BBAD0;
// 4BBB04: using guessed type char byte_4BBB04;
// 4BBB44: using guessed type int dword_4BBB44;
// 4BBB50: using guessed type int dword_4BBB50;
// 4BBB54: using guessed type __int16 word_4BBB54;
// 4BBB78: using guessed type int dword_4BBB78;
// 4BBB80: using guessed type int dword_4BBB80;
// 4BBB84: using guessed type int dword_4BBB84;
// 4BBB88: using guessed type int dword_4BBB88;
// 4BBB8C: using guessed type int dword_4BBB8C;
// 4BBB90: using guessed type int dword_4BBB90;
// 4BBB94: using guessed type int dword_4BBB94;
// 4BBB98: using guessed type int dword_4BBB98;
// 4BBB9C: using guessed type int dword_4BBB9C;
// 4BBBB0: using guessed type char byte_4BBBB0;
// 4BBBFC: using guessed type int dword_4BBBFC;
// 4BBC24: using guessed type int dword_4BBC24;
// 4BBC5C: using guessed type char byte_4BBC5C;
// 4BBCAC: using guessed type __int16 word_4BBCAC;
// 4BBCC4: using guessed type int dword_4BBCC4;
// 4BBCD8: using guessed type int dword_4BBCD8;
// 4BBCDC: using guessed type int dword_4BBCDC;
// 4BBCE0: using guessed type int dword_4BBCE0;
// 4BBCE4: using guessed type int dword_4BBCE4;
// 4BBCE8: using guessed type int dword_4BBCE8;
// 4BBCEC: using guessed type int dword_4BBCEC;
// 4BBCF0: using guessed type int dword_4BBCF0;
// 4BBCF4: using guessed type int dword_4BBCF4;
// 4BBD08: using guessed type char byte_4BBD08;
// 4BBD58: using guessed type __int16 word_4BBD58;
// 4BBD84: using guessed type int dword_4BBD84;
// 4BBD88: using guessed type int dword_4BBD88;
// 4BBD8C: using guessed type int dword_4BBD8C;
// 4BBD90: using guessed type int dword_4BBD90;
// 4BBDB4: using guessed type char byte_4BBDB4;
// 4BBE04: using guessed type __int16 word_4BBE04;
// 4BBE30: using guessed type int dword_4BBE30;
// 4BBE34: using guessed type int dword_4BBE34;
// 4BBE38: using guessed type int dword_4BBE38;
// 4BBE3C: using guessed type int dword_4BBE3C;

//----- (00478AA0) --------------------------------------------------------
int __cdecl sub_478AA0(int a1)
{
  int *v1; // edx@27
  int result; // eax@27
  int *v3; // edx@28
  int v4; // [sp+4h] [bp-A0h]@1
  int v5; // [sp+8h] [bp-9Ch]@1
  int v6; // [sp+Ch] [bp-98h]@1
  int v7; // [sp+10h] [bp-94h]@1
  int v8; // [sp+14h] [bp-90h]@1
  int v9; // [sp+18h] [bp-8Ch]@1
  int v10; // [sp+1Ch] [bp-88h]@1
  int v11; // [sp+20h] [bp-84h]@1
  int v12; // [sp+24h] [bp-80h]@1
  int v13; // [sp+28h] [bp-7Ch]@1
  int v14; // [sp+2Ch] [bp-78h]@1
  int v15; // [sp+30h] [bp-74h]@1
  int v16; // [sp+34h] [bp-70h]@1
  int v17; // [sp+38h] [bp-6Ch]@1
  int v18; // [sp+3Ch] [bp-68h]@1
  int v19; // [sp+40h] [bp-64h]@1
  int v20; // [sp+44h] [bp-60h]@1
  int v21; // [sp+48h] [bp-5Ch]@1
  int v22; // [sp+4Ch] [bp-58h]@1
  int v23; // [sp+50h] [bp-54h]@1
  int v24; // [sp+54h] [bp-50h]@1
  int v25; // [sp+58h] [bp-4Ch]@1
  int v26; // [sp+5Ch] [bp-48h]@1
  int v27; // [sp+60h] [bp-44h]@1
  int v28; // [sp+64h] [bp-40h]@1
  int v29; // [sp+68h] [bp-3Ch]@1
  int v30; // [sp+6Ch] [bp-38h]@1
  int v31; // [sp+70h] [bp-34h]@1
  int v32; // [sp+74h] [bp-30h]@1
  int v33; // [sp+78h] [bp-2Ch]@1
  int v34; // [sp+7Ch] [bp-28h]@1
  int v35; // [sp+80h] [bp-24h]@1
  int v36; // [sp+84h] [bp-20h]@1
  int v37; // [sp+88h] [bp-1Ch]@1
  int v38; // [sp+8Ch] [bp-18h]@1
  int v39; // [sp+90h] [bp-14h]@1
  int v40; // [sp+94h] [bp-10h]@1
  int v41; // [sp+98h] [bp-Ch]@1
  int v42; // [sp+9Ch] [bp-8h]@1
  int v43; // [sp+A0h] [bp-4h]@1

  v24 = 272;
  v25 = 0;
  v26 = 296;
  v27 = 16;
  v28 = 272;
  v29 = 16;
  v30 = 296;
  v31 = 32;
  v32 = 272;
  v33 = 32;
  v34 = 296;
  v35 = 48;
  v36 = 0;
  v37 = 0;
  v38 = 0;
  v39 = 0;
  v40 = 240;
  v41 = 16;
  v42 = 264;
  v43 = 32;
  v4 = 296;
  v5 = 0;
  v6 = 320;
  v7 = 16;
  v8 = 296;
  v9 = 16;
  v10 = 320;
  v11 = 32;
  v12 = 296;
  v13 = 32;
  v14 = 320;
  v15 = 48;
  v16 = 0;
  v17 = 0;
  v18 = 0;
  v19 = 0;
  v20 = 240;
  v21 = 32;
  v22 = 264;
  v23 = 48;
  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0x64:
      *(_DWORD *)(a1 + 116) = 101;
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 100) = 0;
      goto LABEL_3;
    case 0x65:
LABEL_3:
      if ( ++*(_DWORD *)(a1 + 100) > 2 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        ++*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) > 2 )
        *(_DWORD *)(a1 + 116) = 102;
      break;
    case 0x66:
      *(_DWORD *)(a1 + 104) = 3;
      break;
    case 0xC8:
      *(_DWORD *)(a1 + 116) = 201;
      *(_DWORD *)(a1 + 104) = 3;
      *(_DWORD *)(a1 + 100) = 0;
      goto LABEL_10;
    case 0xC9:
LABEL_10:
      if ( ++*(_DWORD *)(a1 + 100) > 2 )
      {
        *(_DWORD *)(a1 + 100) = 0;
        --*(_DWORD *)(a1 + 104);
      }
      if ( *(_DWORD *)(a1 + 104) <= 0 )
        *(_DWORD *)(a1 + 116) = 202;
      break;
    case 0x12C:
      *(_DWORD *)(a1 + 116) = 301;
      *(_DWORD *)(a1 + 104) = 4;
      if ( *(_DWORD *)(a1 + 76) )
        sub_46F150(*(_DWORD *)(a1 + 8) + 2048, *(_DWORD *)(a1 + 12), 2048, 10);
      else
        sub_46F150(*(_DWORD *)(a1 + 8) - 2048, *(_DWORD *)(a1 + 12), 2048, 10);
      break;
    default:
      break;
  }
  if ( *(_DWORD *)(a1 + 76) )
    *(_DWORD *)(a1 + 8) = dword_4BBA60 + 12288;
  else
    *(_DWORD *)(a1 + 8) = dword_4BBA60 - 12288;
  *(_DWORD *)(a1 + 12) = dword_4BBA64 - 18432;
  if ( *(_DWORD *)(a1 + 116) >= 0 && *(_DWORD *)(a1 + 116) < 300 )
  {
    if ( *(_DWORD *)(a1 + 104) == 3 )
      *(_WORD *)(a1 + 80) |= 0x20u;
    else
      *(_WORD *)(a1 + 80) &= 0xFFDFu;
  }
  if ( *(_DWORD *)(a1 + 76) )
  {
    v3 = &v4 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v3;
    *(_DWORD *)(result + 4) = v3[1];
    *(_DWORD *)(result + 8) = v3[2];
    *(_DWORD *)(result + 12) = v3[3];
  }
  else
  {
    v1 = &v24 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v1;
    *(_DWORD *)(result + 4) = v1[1];
    *(_DWORD *)(result + 8) = v1[2];
    *(_DWORD *)(result + 12) = v1[3];
  }
  return result;
}

//----- (00478F20) --------------------------------------------------------
int __cdecl sub_478F20(int a1)
{
  int *v1; // eax@1
  int v2; // ecx@1
  int result; // eax@1
  int v4; // [sp+0h] [bp-40h]@1
  int v5; // [sp+4h] [bp-3Ch]@1
  int v6; // [sp+8h] [bp-38h]@1
  int v7; // [sp+Ch] [bp-34h]@1
  int v8; // [sp+10h] [bp-30h]@1
  int v9; // [sp+14h] [bp-2Ch]@1
  int v10; // [sp+18h] [bp-28h]@1
  int v11; // [sp+1Ch] [bp-24h]@1
  int v12; // [sp+20h] [bp-20h]@1
  int v13; // [sp+24h] [bp-1Ch]@1
  int v14; // [sp+28h] [bp-18h]@1
  int v15; // [sp+2Ch] [bp-14h]@1
  int v16; // [sp+30h] [bp-10h]@1
  int v17; // [sp+34h] [bp-Ch]@1
  int v18; // [sp+38h] [bp-8h]@1
  int v19; // [sp+3Ch] [bp-4h]@1

  v4 = 0;
  v5 = 0;
  v6 = 120;
  v7 = 120;
  v8 = 120;
  v9 = 0;
  v10 = 240;
  v11 = 120;
  v12 = 0;
  v13 = 120;
  v14 = 120;
  v15 = 240;
  v16 = 120;
  v17 = 120;
  v18 = 240;
  v19 = 240;
  *(_DWORD *)(a1 + 8) = dword_4BBA60;
  *(_DWORD *)(a1 + 12) = dword_4BBA64;
  v1 = &v4 + 4 * *(_DWORD *)(a1 + 104);
  v2 = a1 + 84;
  *(_DWORD *)v2 = *v1;
  *(_DWORD *)(v2 + 4) = v1[1];
  *(_DWORD *)(v2 + 8) = v1[2];
  result = v1[3];
  *(_DWORD *)(v2 + 12) = result;
  return result;
}

//----- (00478FE0) --------------------------------------------------------
int __cdecl sub_478FE0(int a1)
{
  int result; // eax@1

  *(_DWORD *)(a1 + 8) = dword_4BBA60;
  result = a1;
  *(_DWORD *)(a1 + 12) = dword_4BBA64 - 22528;
  return result;
}

//----- (00479010) --------------------------------------------------------
int __cdecl sub_479010(int a1)
{
  int result; // eax@1

  *(_DWORD *)(a1 + 8) = dword_4BBA60;
  result = dword_4BBA64;
  *(_DWORD *)(a1 + 12) = dword_4BBA64;
  return result;
}

//----- (00479030) --------------------------------------------------------
char *Boss_2_Balfrog()
{
  int v0; // edx@3
  int v1; // ST10_4@5
  int v2; // ST0C_4@5
  int v3; // ST08_4@5
  int v4; // eax@5
  int v5; // ST08_4@38
  int v6; // eax@38
  int v7; // ST10_4@40
  int v8; // ST0C_4@40
  int v9; // ST08_4@40
  int v10; // eax@40
  int v11; // eax@50
  int v12; // ST08_4@85
  int v13; // eax@85
  int v14; // ST08_4@88
  int v15; // eax@88
  int v16; // ST10_4@91
  int v17; // ST0C_4@91
  int v18; // ST08_4@91
  int v19; // eax@91
  int v20; // ST10_4@101
  int v21; // ST0C_4@101
  int v22; // ST08_4@101
  int v23; // eax@101
  int v24; // ST10_4@104
  int v25; // ST0C_4@104
  int v26; // ST08_4@104
  int v27; // eax@104
  int v28; // ST10_4@115
  int v29; // ST0C_4@115
  int v30; // ST08_4@115
  int v31; // eax@115
  int *v32; // ecx@131
  int v33; // edx@131
  int *v34; // ecx@132
  int v35; // edx@132
  int Y_Velocity; // [sp+4h] [bp-13Ch]@59
  int v38; // [sp+8h] [bp-138h]@1
  int v39; // [sp+Ch] [bp-134h]@1
  int v40; // [sp+10h] [bp-130h]@1
  int v41; // [sp+14h] [bp-12Ch]@1
  int v42; // [sp+18h] [bp-128h]@1
  int v43; // [sp+1Ch] [bp-124h]@1
  int v44; // [sp+20h] [bp-120h]@1
  int v45; // [sp+24h] [bp-11Ch]@1
  int v46; // [sp+28h] [bp-118h]@1
  int v47; // [sp+2Ch] [bp-114h]@1
  int v48; // [sp+30h] [bp-110h]@1
  int v49; // [sp+34h] [bp-10Ch]@1
  int v50; // [sp+38h] [bp-108h]@1
  int v51; // [sp+3Ch] [bp-104h]@1
  int v52; // [sp+40h] [bp-100h]@1
  int v53; // [sp+44h] [bp-FCh]@1
  int v54; // [sp+48h] [bp-F8h]@1
  int v55; // [sp+4Ch] [bp-F4h]@1
  int v56; // [sp+50h] [bp-F0h]@1
  int v57; // [sp+54h] [bp-ECh]@1
  int v58; // [sp+58h] [bp-E8h]@1
  int v59; // [sp+5Ch] [bp-E4h]@1
  int v60; // [sp+60h] [bp-E0h]@1
  int v61; // [sp+64h] [bp-DCh]@1
  int v62; // [sp+68h] [bp-D8h]@1
  int v63; // [sp+6Ch] [bp-D4h]@1
  int v64; // [sp+70h] [bp-D0h]@1
  int v65; // [sp+74h] [bp-CCh]@1
  int v66; // [sp+78h] [bp-C8h]@1
  int v67; // [sp+7Ch] [bp-C4h]@1
  int v68; // [sp+80h] [bp-C0h]@1
  int v69; // [sp+84h] [bp-BCh]@1
  int v70; // [sp+88h] [bp-B8h]@1
  int v71; // [sp+8Ch] [bp-B4h]@1
  int v72; // [sp+90h] [bp-B0h]@1
  int v73; // [sp+94h] [bp-ACh]@1
  int X_Velocity; // [sp+9Ch] [bp-A4h]@59
  int i; // [sp+A0h] [bp-A0h]@3
  _DWORD *v76; // [sp+A4h] [bp-9Ch]@1
  int v77; // [sp+A8h] [bp-98h]@1
  int v78; // [sp+ACh] [bp-94h]@1
  int v79; // [sp+B0h] [bp-90h]@1
  int v80; // [sp+B4h] [bp-8Ch]@1
  int v81; // [sp+B8h] [bp-88h]@1
  int v82; // [sp+BCh] [bp-84h]@1
  int v83; // [sp+C0h] [bp-80h]@1
  int v84; // [sp+C4h] [bp-7Ch]@1
  int v85; // [sp+C8h] [bp-78h]@1
  int v86; // [sp+CCh] [bp-74h]@1
  int v87; // [sp+D0h] [bp-70h]@1
  int v88; // [sp+D4h] [bp-6Ch]@1
  int v89; // [sp+D8h] [bp-68h]@1
  int v90; // [sp+DCh] [bp-64h]@1
  int v91; // [sp+E0h] [bp-60h]@1
  int v92; // [sp+E4h] [bp-5Ch]@1
  int v93; // [sp+E8h] [bp-58h]@1
  int v94; // [sp+ECh] [bp-54h]@1
  int v95; // [sp+F0h] [bp-50h]@1
  int v96; // [sp+F4h] [bp-4Ch]@1
  int v97; // [sp+F8h] [bp-48h]@1
  int v98; // [sp+FCh] [bp-44h]@1
  int v99; // [sp+100h] [bp-40h]@1
  int v100; // [sp+104h] [bp-3Ch]@1
  int v101; // [sp+108h] [bp-38h]@1
  int v102; // [sp+10Ch] [bp-34h]@1
  int v103; // [sp+110h] [bp-30h]@1
  int v104; // [sp+114h] [bp-2Ch]@1
  int v105; // [sp+118h] [bp-28h]@1
  int v106; // [sp+11Ch] [bp-24h]@1
  int v107; // [sp+120h] [bp-20h]@1
  int v108; // [sp+124h] [bp-1Ch]@1
  int v109; // [sp+128h] [bp-18h]@1
  int v110; // [sp+12Ch] [bp-14h]@1
  int v111; // [sp+130h] [bp-10h]@1
  int v112; // [sp+134h] [bp-Ch]@1
  unsigned __int8 v113; // [sp+13Fh] [bp-1h]@57

  v77 = 0;
  v78 = 0;
  v79 = 0;
  v80 = 0;
  v81 = 0;
  v82 = 48;
  v83 = 80;
  v84 = 112;
  v85 = 0;
  v86 = 112;
  v87 = 80;
  v88 = 176;
  v89 = 0;
  v90 = 176;
  v91 = 80;
  v92 = 240;
  v93 = 160;
  v94 = 48;
  v95 = 240;
  v96 = 112;
  v97 = 160;
  v98 = 112;
  v99 = 240;
  v100 = 200;
  v101 = 200;
  v102 = 0;
  v103 = 240;
  v104 = 24;
  v105 = 80;
  v106 = 0;
  v107 = 120;
  v108 = 24;
  v109 = 120;
  v110 = 0;
  v111 = 160;
  v112 = 24;
  v38 = 0;
  v39 = 0;
  v40 = 0;
  v41 = 0;
  v42 = 80;
  v43 = 48;
  v44 = 160;
  v45 = 112;
  v46 = 80;
  v47 = 112;
  v48 = 160;
  v49 = 176;
  v50 = 80;
  v51 = 176;
  v52 = 160;
  v53 = 240;
  v54 = 240;
  v55 = 48;
  v56 = 320;
  v57 = 112;
  v58 = 240;
  v59 = 112;
  v60 = 320;
  v61 = 200;
  v62 = 200;
  v63 = 24;
  v64 = 240;
  v65 = 48;
  v66 = 80;
  v67 = 24;
  v68 = 120;
  v69 = 48;
  v70 = 120;
  v71 = 24;
  v72 = 160;
  v73 = 48;
  v76 = &byte_4BBA58;
  switch ( *((_DWORD *)&byte_4BBA58 + 29) )
  {
    case 0:
      v76[2] = 49152;
      v76[3] = 102400;
      v76[19] = 2;
      v76[35] = 24576;
      v76[36] = 24576;
      v76[37] = 0x4000;
      v76[38] = 0x2000;
      v76[14] = 52;
      v76[31] = 12288;
      v76[32] = 0x2000;
      v76[33] = 12288;
      v76[34] = 0x2000;
      v76[18] = 3;
      v76[17] = 1;
      v76[12] = 1000;
      *((_WORD *)v76 + 40) |= 0x8200u;
      v76[16] = 300;
      break;
    case 0xA:
      v76[29] = 11;
      v76[26] = 3;
      *(_BYTE *)v76 = -128;
      v0 = (int)(v76 + 21);
      *(_DWORD *)v0 = v38;
      *(_DWORD *)(v0 + 4) = v39;
      *(_DWORD *)(v0 + 8) = v40;
      *(_DWORD *)(v0 + 12) = v41;
      byte_4BBB04 = -112;
      dword_4BBB34 = 1000;
      byte_4BBBB0 = -128;
      dword_4BBBA8 = 5;
      dword_4BBC54 = 5;
      for ( i = 0; i < 8; ++i )
      {
        v1 = RNG_Range(-1536, 0);
        v2 = RNG_Range(-341, 341);
        v3 = v76[3] + (RNG_Range(-12, 12) << 9);
        v4 = RNG_Range(-12, 12);
        NPC_Create(4, v76[2] + (v4 << 9), v3, v2, v1, 0, 0, 256);
      }
      break;
    case 0x14:
      v76[29] = 21;
      v76[30] = 0;
      goto LABEL_8;
    case 0x15:
LABEL_8:
      if ( ++v76[30] / 2 % 2 )
        v76[26] = 3;
      else
        v76[26] = 0;
      break;
    case 0x64:
      v76[29] = 101;
      v76[30] = 0;
      v76[26] = 1;
      v76[4] = 0;
      goto LABEL_13;
    case 0x65:
LABEL_13:
      if ( ++v76[30] > 50 )
      {
        v76[29] = 102;
        v76[25] = 0;
        v76[26] = 2;
      }
      break;
    case 0x66:
      if ( ++v76[25] > 10 )
      {
        v76[29] = 103;
        v76[25] = 0;
        v76[26] = 1;
      }
      break;
    case 0x67:
      if ( ++v76[25] > 4 )
      {
        v76[29] = 104;
        v76[26] = 5;
        v76[5] = -1024;
        Play_Sound_Effect(25, 1);
        if ( v76[19] )
          v76[4] = 512;
        else
          v76[4] = -512;
        v76[36] = 0x8000;
        v76[38] = 12288;
      }
      break;
    case 0x68:
      if ( !v76[19] && v76[1] & 1 )
      {
        v76[19] = 2;
        v76[4] = 512;
      }
      if ( v76[19] == 2 && v76[1] & 4 )
      {
        v76[19] = 0;
        v76[4] = -512;
      }
      if ( v76[1] & 8 )
      {
        Play_Sound_Effect(26, 1);
        sub_40F310(30);
        v76[29] = 100;
        v76[26] = 1;
        v76[36] = 24576;
        v76[38] = 0x2000;
        if ( !v76[19] && v76[2] < Quote_X_Position )
        {
          v76[19] = 2;
          v76[29] = 110;
        }
        if ( v76[19] == 2 && v76[2] > Quote_X_Position )
        {
          v76[19] = 0;
          v76[29] = 110;
        }
        v5 = RNG_Range(0, 4) << 13;
        v6 = RNG_Range(4, 16);
        NPC_Create(110, v6 << 13, v5, 0, 0, 4, 0, 128);
        for ( i = 0; i < 4; ++i )
        {
          v7 = RNG_Range(-1536, 0);
          v8 = RNG_Range(-341, 341);
          v9 = v76[34] + v76[3];
          v10 = RNG_Range(-12, 12);
          NPC_Create(4, v76[2] + (v10 << 9), v9, v8, v7, 0, 0, 256);
        }
      }
      break;
    case 0x6E:
      v76[26] = 1;
      v76[30] = 0;
      v76[29] = 111;
      goto LABEL_43;
    case 0x6F:
LABEL_43:
      ++v76[30];
      v76[4] = 8 * v76[4] / 9;
      if ( v76[30] > 50 )
      {
        v76[26] = 2;
        v76[25] = 0;
        v76[29] = 112;
      }
      break;
    case 0x70:
      if ( ++v76[25] > 4 )
      {
        v76[29] = 113;
        v76[30] = 0;
        v76[26] = 3;
        v76[27] = 16;
        word_4BBB54 |= 0x20u;
        v76[8] = v76[16];
      }
      break;
    case 0x71:
      if ( *((_BYTE *)v76 + 156) )
      {
        v11 = v76[28]++ / 2 % 2;
        if ( v11 )
          v76[26] = 4;
        else
          v76[26] = 3;
      }
      else
      {
        v76[28] = 0;
        v76[26] = 3;
      }
      v76[4] = 10 * v76[4] / 11;
      if ( ++v76[30] > 16 )
      {
        v76[30] = 0;
        --v76[27];
        v113 = v76[19] ? Angle_Calculator(v76[2] + 0x4000 - Quote_X_Position, v76[3] - 4096 - Quote_Y_Position) : Angle_Calculator(v76[2] - 0x4000 - Quote_X_Position, v76[3] - 4096 - Quote_Y_Position);
        v113 += RNG_Range(-16, 16);
        Y_Velocity = SIN_function(v113);
        X_Velocity = COS_function(v113);
        if ( v76[19] )
          NPC_Create(108, v76[2] + 0x4000, v76[3] - 4096, X_Velocity, Y_Velocity, 0, 0, 256);
        else
          NPC_Create(108, v76[2] - 0x4000, v76[3] - 4096, X_Velocity, Y_Velocity, 0, 0, 256);
        Play_Sound_Effect(39, 1);
        if ( !v76[27] || v76[16] < v76[8] - 90 )
        {
          v76[29] = 114;
          v76[30] = 0;
          v76[26] = 2;
          v76[25] = 0;
          word_4BBB54 &= 0xFFDFu;
        }
      }
      break;
    case 0x72:
      if ( ++v76[25] > 10 )
      {
        if ( ++dword_4BBB70 <= 2 )
        {
          v76[29] = 100;
        }
        else
        {
          dword_4BBB70 = 0;
          v76[29] = 120;
        }
        v76[25] = 0;
        v76[26] = 1;
      }
      break;
    case 0x78:
      v76[29] = 121;
      v76[30] = 0;
      v76[26] = 1;
      v76[4] = 0;
      goto LABEL_73;
    case 0x79:
LABEL_73:
      if ( ++v76[30] > 50 )
      {
        v76[29] = 122;
        v76[25] = 0;
        v76[26] = 2;
      }
      break;
    case 0x7A:
      if ( ++v76[25] > 20 )
      {
        v76[29] = 123;
        v76[25] = 0;
        v76[26] = 1;
      }
      break;
    case 0x7B:
      if ( ++v76[25] > 4 )
      {
        v76[29] = 124;
        v76[26] = 5;
        v76[5] = -2560;
        v76[36] = 0x8000;
        v76[38] = 12288;
        Play_Sound_Effect(25, 1);
      }
      break;
    case 0x7C:
      if ( v76[1] & 8 )
      {
        Play_Sound_Effect(26, 1);
        sub_40F310(60);
        v76[29] = 100;
        v76[26] = 1;
        v76[36] = 24576;
        v76[38] = 0x2000;
        for ( i = 0; i < 2; ++i )
        {
          v12 = RNG_Range(0, 4) << 13;
          v13 = RNG_Range(4, 16);
          NPC_Create(104, v13 << 13, v12, 0, 0, 4, 0, 128);
        }
        for ( i = 0; i < 6; ++i )
        {
          v14 = RNG_Range(0, 4) << 13;
          v15 = RNG_Range(4, 16);
          NPC_Create(110, v15 << 13, v14, 0, 0, 4, 0, 128);
        }
        for ( i = 0; i < 8; ++i )
        {
          v16 = RNG_Range(-1536, 0);
          v17 = RNG_Range(-341, 341);
          v18 = v76[34] + v76[3];
          v19 = RNG_Range(-12, 12);
          NPC_Create(4, v76[2] + (v19 << 9), v18, v17, v16, 0, 0, 256);
        }
        if ( !v76[19] && v76[2] < Quote_X_Position )
        {
          v76[19] = 2;
          v76[29] = 110;
        }
        if ( v76[19] == 2 && v76[2] > Quote_X_Position )
        {
          v76[19] = 0;
          v76[29] = 110;
        }
      }
      break;
    case 0x82:
      v76[29] = 131;
      v76[26] = 3;
      v76[30] = 0;
      v76[4] = 0;
      Play_Sound_Effect(72, 1);
      for ( i = 0; i < 8; ++i )
      {
        v20 = RNG_Range(-1536, 0);
        v21 = RNG_Range(-341, 341);
        v22 = v76[3] + (RNG_Range(-12, 12) << 9);
        v23 = RNG_Range(-12, 12);
        NPC_Create(4, v76[2] + (v23 << 9), v22, v21, v20, 0, 0, 256);
      }
      byte_4BBB04 = 0;
      byte_4BBBB0 = 0;
      goto LABEL_103;
    case 0x83:
LABEL_103:
      if ( !(++v76[30] % 5) )
      {
        v24 = RNG_Range(-1536, 0);
        v25 = RNG_Range(-341, 341);
        v26 = v76[3] + (RNG_Range(-12, 12) << 9);
        v27 = RNG_Range(-12, 12);
        NPC_Create(4, v76[2] + (v27 << 9), v26, v25, v24, 0, 0, 256);
      }
      if ( v76[30] / 2 % 2 )
        v76[2] -= 512;
      else
        v76[2] += 512;
      if ( v76[30] > 100 )
      {
        v76[30] = 0;
        v76[29] = 132;
      }
      break;
    case 0x84:
      if ( ++v76[30] / 2 % 2 )
      {
        v76[35] = 10240;
        v76[36] = 6144;
        v76[37] = 10240;
        v76[38] = 6144;
        v76[26] = 6;
      }
      else
      {
        v76[35] = 24576;
        v76[36] = 24576;
        v76[37] = 0x4000;
        v76[38] = 0x2000;
        v76[26] = 3;
      }
      if ( !(v76[30] % 9) )
      {
        v28 = RNG_Range(-1536, 0);
        v29 = RNG_Range(-341, 341);
        v30 = v76[3] + (RNG_Range(-12, 12) << 9);
        v31 = RNG_Range(-12, 12);
        NPC_Create(4, v76[2] + (v31 << 9), v30, v29, v28, 0, 0, 256);
      }
      if ( v76[30] > 150 )
      {
        v76[29] = 140;
        v76[34] = 6144;
      }
      break;
    case 0x8C:
      v76[29] = 141;
      goto LABEL_120;
    case 0x8D:
LABEL_120:
      if ( v76[1] & 8 )
      {
        v76[29] = 142;
        v76[30] = 0;
        v76[26] = 7;
      }
      break;
    case 0x8E:
      if ( ++v76[30] > 30 )
      {
        v76[26] = 8;
        v76[5] = -2560;
        *((_WORD *)v76 + 40) |= 8u;
        v76[29] = 143;
      }
      break;
    case 0x8F:
      v76[5] = -2560;
      if ( v76[3] < 0 )
      {
        *(_BYTE *)v76 = 0;
        Play_Sound_Effect(26, 1);
        sub_40F310(30);
      }
      break;
    default:
      break;
  }
  v76[5] += 64;
  if ( v76[5] > 1535 )
    v76[5] = 1535;
  v76[2] += v76[4];
  v76[3] += v76[5];
  if ( v76[19] )
  {
    v34 = &v38 + 4 * v76[26];
    v35 = (int)(v76 + 21);
    *(_DWORD *)v35 = *v34;
    *(_DWORD *)(v35 + 4) = v34[1];
    *(_DWORD *)(v35 + 8) = v34[2];
    *(_DWORD *)(v35 + 12) = v34[3];
  }
  else
  {
    v32 = &v77 + 4 * v76[26];
    v33 = (int)(v76 + 21);
    *(_DWORD *)v33 = *v32;
    *(_DWORD *)(v33 + 4) = v32[1];
    *(_DWORD *)(v33 + 8) = v32[2];
    *(_DWORD *)(v33 + 12) = v32[3];
  }
  sub_47A6A0();
  return sub_47A800();
}
// 4BBB04: using guessed type char byte_4BBB04;
// 4BBB34: using guessed type int dword_4BBB34;
// 4BBB54: using guessed type __int16 word_4BBB54;
// 4BBB70: using guessed type int dword_4BBB70;
// 4BBBA8: using guessed type int dword_4BBBA8;
// 4BBBB0: using guessed type char byte_4BBBB0;
// 4BBC54: using guessed type int dword_4BBC54;

//----- (0047A6A0) --------------------------------------------------------
char *sub_47A6A0()
{
  char *result; // eax@4
  signed int v1; // [sp+8h] [bp-4h]@2

  if ( dword_4BBAA4[0] )
    v1 = -1;
  else
    v1 = 1;
  result = (char *)dword_4BBAC0[0];
  switch ( dword_4BBAC0[0] )
  {
    case 0:
      *((_DWORD *)&byte_4BBB04 + 14) = 52;
      *((_DWORD *)&byte_4BBB04 + 31) = 0x2000;
      *((_DWORD *)&byte_4BBB04 + 32) = 0x2000;
      *((_DWORD *)&byte_4BBB04 + 33) = 0x2000;
      result = &byte_4BBB04;
      *((_DWORD *)&byte_4BBB04 + 34) = 0x2000;
      *((_DWORD *)&byte_4BBB04 + 18) = 3;
      *((_WORD *)&byte_4BBB04 + 40) = 4;
      break;
    case 1:
      *((_DWORD *)&byte_4BBB04 + 2) = dword_4BBA60 + -12288 * v1;
      result = &byte_4BBB04;
      *((_DWORD *)&byte_4BBB04 + 3) = dword_4BBA64 - 12288;
      break;
    case 2:
      *((_DWORD *)&byte_4BBB04 + 2) = dword_4BBA60 + -12288 * v1;
      result = (char *)(dword_4BBA64 - 10240);
      *((_DWORD *)&byte_4BBB04 + 3) = dword_4BBA64 - 10240;
      break;
    case 3:
    case 4:
      result = &byte_4BBB04;
      *((_DWORD *)&byte_4BBB04 + 2) = dword_4BBA60 + -12288 * v1;
      *((_DWORD *)&byte_4BBB04 + 3) = dword_4BBA64 - 0x2000;
      break;
    case 5:
      *((_DWORD *)&byte_4BBB04 + 2) = dword_4BBA60 + -12288 * v1;
      result = &byte_4BBB04;
      *((_DWORD *)&byte_4BBB04 + 3) = dword_4BBA64 - 22016;
      break;
    default:
      return result;
  }
  return result;
}
// 4BBAA4: using guessed type int dword_4BBAA4[];
// 4BBAC0: using guessed type int dword_4BBAC0[];
// 4BBB04: using guessed type char byte_4BBB04;

//----- (0047A800) --------------------------------------------------------
char *sub_47A800()
{
  char *result; // eax@1

  result = (char *)dword_4BBAC0[0];
  if ( dword_4BBAC0[0] )
  {
    if ( dword_4BBAC0[0] > 0 && dword_4BBAC0[0] <= 5 )
    {
      result = (char *)dword_4BBA60;
      *((_DWORD *)&byte_4BBBB0 + 2) = dword_4BBA60;
      *((_DWORD *)&byte_4BBBB0 + 3) = dword_4BBA64;
    }
  }
  else
  {
    *((_DWORD *)&byte_4BBBB0 + 14) = 52;
    *((_DWORD *)&byte_4BBBB0 + 31) = 12288;
    *((_DWORD *)&byte_4BBBB0 + 32) = 0x2000;
    *((_DWORD *)&byte_4BBBB0 + 33) = 12288;
    *((_DWORD *)&byte_4BBBB0 + 34) = 0x2000;
    result = &byte_4BBBB0;
    *((_DWORD *)&byte_4BBBB0 + 18) = 3;
    *((_WORD *)&byte_4BBBB0 + 40) = 4;
  }
  return result;
}
// 4BBAC0: using guessed type int dword_4BBAC0[];
// 4BBBB0: using guessed type char byte_4BBBB0;

//----- (0047A8A0) --------------------------------------------------------
char *sub_47A8A0()
{
  int v0; // ST08_4@16
  int v1; // eax@16
  int v2; // ST10_4@47
  int v3; // eax@47
  int v4; // ST10_4@55
  int v5; // ST0C_4@55
  int v6; // ST08_4@55
  int v7; // eax@55
  int v8; // ST10_4@58
  int v9; // ST0C_4@58
  int v10; // ST08_4@58
  int v11; // eax@58
  int *v12; // edx@61
  char *result; // eax@61
  int *v14; // edx@62
  int *v15; // edx@64
  signed int v16; // [sp+0h] [bp-12Ch]@1
  signed int i; // [sp+8h] [bp-124h]@53
  int v18; // [sp+Ch] [bp-120h]@59
  int v19; // [sp+10h] [bp-11Ch]@59
  int v20; // [sp+14h] [bp-118h]@59
  int v21; // [sp+18h] [bp-114h]@59
  int v22; // [sp+1Ch] [bp-110h]@59
  int v23; // [sp+20h] [bp-10Ch]@59
  int v24; // [sp+24h] [bp-108h]@59
  int v25; // [sp+28h] [bp-104h]@59
  int v26; // [sp+2Ch] [bp-100h]@59
  int v27; // [sp+30h] [bp-FCh]@59
  int v28; // [sp+34h] [bp-F8h]@59
  int v29; // [sp+38h] [bp-F4h]@59
  int v30; // [sp+3Ch] [bp-F0h]@59
  int v31; // [sp+40h] [bp-ECh]@59
  int v32; // [sp+44h] [bp-E8h]@59
  int v33; // [sp+48h] [bp-E4h]@59
  int v34; // [sp+4Ch] [bp-E0h]@59
  int v35; // [sp+50h] [bp-DCh]@59
  int v36; // [sp+54h] [bp-D8h]@59
  int v37; // [sp+58h] [bp-D4h]@59
  int v38; // [sp+5Ch] [bp-D0h]@59
  int v39; // [sp+60h] [bp-CCh]@59
  int v40; // [sp+64h] [bp-C8h]@59
  int v41; // [sp+68h] [bp-C4h]@59
  int v42; // [sp+6Ch] [bp-C0h]@59
  int v43; // [sp+70h] [bp-BCh]@59
  int v44; // [sp+74h] [bp-B8h]@59
  int v45; // [sp+78h] [bp-B4h]@59
  int v46; // [sp+7Ch] [bp-B0h]@59
  int v47; // [sp+80h] [bp-ACh]@59
  int v48; // [sp+84h] [bp-A8h]@59
  int v49; // [sp+88h] [bp-A4h]@59
  int v50; // [sp+8Ch] [bp-A0h]@59
  int v51; // [sp+90h] [bp-9Ch]@59
  int v52; // [sp+94h] [bp-98h]@59
  int v53; // [sp+98h] [bp-94h]@59
  int v54; // [sp+9Ch] [bp-90h]@59
  int v55; // [sp+A0h] [bp-8Ch]@59
  int v56; // [sp+A4h] [bp-88h]@59
  int v57; // [sp+A8h] [bp-84h]@59
  int v58; // [sp+ACh] [bp-80h]@59
  int v59; // [sp+B0h] [bp-7Ch]@59
  int v60; // [sp+B4h] [bp-78h]@59
  int v61; // [sp+B8h] [bp-74h]@59
  int v62; // [sp+BCh] [bp-70h]@59
  int v63; // [sp+C0h] [bp-6Ch]@59
  int v64; // [sp+C4h] [bp-68h]@59
  int v65; // [sp+C8h] [bp-64h]@59
  int v66; // [sp+CCh] [bp-60h]@59
  int v67; // [sp+D0h] [bp-5Ch]@59
  int v68; // [sp+D4h] [bp-58h]@59
  int v69; // [sp+D8h] [bp-54h]@59
  int v70; // [sp+DCh] [bp-50h]@59
  int v71; // [sp+E0h] [bp-4Ch]@59
  int v72; // [sp+E4h] [bp-48h]@59
  int v73; // [sp+E8h] [bp-44h]@59
  int v74; // [sp+ECh] [bp-40h]@59
  int v75; // [sp+F0h] [bp-3Ch]@59
  int v76; // [sp+F4h] [bp-38h]@59
  int v77; // [sp+F8h] [bp-34h]@59
  int v78; // [sp+FCh] [bp-30h]@59
  int v79; // [sp+100h] [bp-2Ch]@59
  int v80; // [sp+104h] [bp-28h]@59
  int v81; // [sp+108h] [bp-24h]@59
  int v82; // [sp+10Ch] [bp-20h]@59
  int v83; // [sp+110h] [bp-1Ch]@59
  int v84; // [sp+114h] [bp-18h]@59
  int v85; // [sp+118h] [bp-14h]@59
  int v86; // [sp+11Ch] [bp-10h]@59
  int v87; // [sp+120h] [bp-Ch]@59
  int v88; // [sp+124h] [bp-8h]@59
  int v89; // [sp+128h] [bp-4h]@59

  v16 = *((_DWORD *)&byte_4BBA58 + 29);
  if ( v16 <= 250 )
  {
    if ( v16 != 250 )
    {
      if ( !v16 )
      {
        *(_BYTE *)&byte_4BBA58 = -128;
        *((_DWORD *)&byte_4BBA58 + 17) = 1;
        *((_DWORD *)&byte_4BBA58 + 19) = 2;
        *((_DWORD *)&byte_4BBA58 + 29) = 100;
        *((_DWORD *)&byte_4BBA58 + 2) = 81920;
        *((_DWORD *)&byte_4BBA58 + 3) = 0x10000;
        *((_DWORD *)&byte_4BBA58 + 35) = 20480;
        *((_DWORD *)&byte_4BBA58 + 36) = 6144;
        *((_DWORD *)&byte_4BBA58 + 37) = 12288;
        *((_DWORD *)&byte_4BBA58 + 38) = 6144;
        *((_DWORD *)&byte_4BBA58 + 14) = 54;
        *((_DWORD *)&byte_4BBA58 + 31) = 0x2000;
        *((_DWORD *)&byte_4BBA58 + 32) = 5120;
        *((_DWORD *)&byte_4BBA58 + 33) = 0x2000;
        *((_DWORD *)&byte_4BBA58 + 34) = 5120;
        *((_WORD *)&byte_4BBA58 + 40) = -32216;
        *((_DWORD *)&byte_4BBA58 + 18) = 3;
        *((_DWORD *)&byte_4BBA58 + 41) = 10;
        *((_DWORD *)&byte_4BBA58 + 12) = 1000;
        *((_DWORD *)&byte_4BBA58 + 16) = 400;
        goto LABEL_59;
      }
      if ( v16 == 100 )
      {
        *((_DWORD *)&byte_4BBA58 + 29) = 101;
        *((_WORD *)&byte_4BBA58 + 40) &= 0xFFDFu;
        *((_DWORD *)&byte_4BBA58 + 30) = 0;
      }
      else if ( v16 != 101 )
      {
        goto LABEL_59;
      }
      if ( ++*((_DWORD *)&byte_4BBA58 + 30) > 50 )
      {
        *((_DWORD *)&byte_4BBA58 + 29) = 250;
        *((_DWORD *)&byte_4BBA58 + 30) = 0;
      }
      if ( !(*((_DWORD *)&byte_4BBA58 + 30) % 4) )
      {
        v0 = RNG_Range(2, 13) << 13;
        v1 = RNG_Range(15, 18);
        NPC_Create(197, v1 << 13, v0, 0, 0, 0, 0, 256);
      }
      goto LABEL_59;
    }
    *((_DWORD *)&byte_4BBA58 + 29) = 251;
    if ( *((_DWORD *)&byte_4BBA58 + 19) == 2 )
    {
      *((_DWORD *)&byte_4BBA58 + 2) = 122880;
      *((_DWORD *)&byte_4BBA58 + 3) = Quote_Y_Position;
    }
    else
    {
      *((_DWORD *)&byte_4BBA58 + 2) = 368640;
      *((_DWORD *)&byte_4BBA58 + 3) = RNG_Range(2, 13) << 13;
    }
    *((_DWORD *)&byte_4BBA58 + 8) = *((_DWORD *)&byte_4BBA58 + 2);
    *((_DWORD *)&byte_4BBA58 + 9) = *((_DWORD *)&byte_4BBA58 + 3);
    *((_DWORD *)&byte_4BBA58 + 5) = RNG_Range(-512, 512);
    *((_DWORD *)&byte_4BBA58 + 4) = RNG_Range(-512, 512);
    *((_WORD *)&byte_4BBA58 + 40) |= 0x20u;
LABEL_22:
    if ( *((_DWORD *)&byte_4BBA58 + 19) == 2 )
    {
      *((_DWORD *)&byte_4BBA58 + 8) += 1024;
    }
    else
    {
      *((_DWORD *)&byte_4BBA58 + 8) -= 512;
      if ( *((_DWORD *)&byte_4BBA58 + 9) >= Quote_Y_Position )
        *((_DWORD *)&byte_4BBA58 + 9) -= 512;
      else
        *((_DWORD *)&byte_4BBA58 + 9) += 512;
    }
    if ( *((_DWORD *)&byte_4BBA58 + 2) >= *((_DWORD *)&byte_4BBA58 + 8) )
      *((_DWORD *)&byte_4BBA58 + 4) -= 8;
    else
      *((_DWORD *)&byte_4BBA58 + 4) += 8;
    if ( *((_DWORD *)&byte_4BBA58 + 3) >= *((_DWORD *)&byte_4BBA58 + 9) )
      *((_DWORD *)&byte_4BBA58 + 5) -= 8;
    else
      *((_DWORD *)&byte_4BBA58 + 5) += 8;
    if ( *((_DWORD *)&byte_4BBA58 + 5) > 512 )
      *((_DWORD *)&byte_4BBA58 + 5) = 512;
    if ( *((_DWORD *)&byte_4BBA58 + 5) < -512 )
      *((_DWORD *)&byte_4BBA58 + 5) = -512;
    *((_DWORD *)&byte_4BBA58 + 2) += *((_DWORD *)&byte_4BBA58 + 4);
    *((_DWORD *)&byte_4BBA58 + 3) += *((_DWORD *)&byte_4BBA58 + 5);
    if ( *((_DWORD *)&byte_4BBA58 + 19) == 2 )
    {
      if ( *((_DWORD *)&byte_4BBA58 + 2) > 368640 )
      {
        *((_DWORD *)&byte_4BBA58 + 19) = 0;
        *((_DWORD *)&byte_4BBA58 + 29) = 100;
      }
    }
    else if ( *((_DWORD *)&byte_4BBA58 + 2) < 139264 )
    {
      *((_DWORD *)&byte_4BBA58 + 19) = 2;
      *((_DWORD *)&byte_4BBA58 + 29) = 100;
    }
    if ( !*((_DWORD *)&byte_4BBA58 + 19)
      && (++*((_DWORD *)&byte_4BBA58 + 30) == 300
       || *((_DWORD *)&byte_4BBA58 + 30) == 310
       || *((_DWORD *)&byte_4BBA58 + 30) == 320) )
    {
      Play_Sound_Effect(39, 1);
      v2 = RNG_Range(-3, 3) << 9;
      v3 = RNG_Range(-3, 0);
      NPC_Create(198, *((_DWORD *)&byte_4BBA58 + 2) + 5120, *((_DWORD *)&byte_4BBA58 + 3) + 512, v3 << 9, v2, 2, 0, 256);
    }
    if ( ++*((_DWORD *)&byte_4BBA58 + 25) > 2 )
    {
      *((_DWORD *)&byte_4BBA58 + 25) = 0;
      ++*((_DWORD *)&byte_4BBA58 + 26);
    }
    if ( *((_DWORD *)&byte_4BBA58 + 26) > 7 )
      *((_DWORD *)&byte_4BBA58 + 26) = 0;
    goto LABEL_59;
  }
  if ( v16 == 251 )
    goto LABEL_22;
  if ( v16 == 1000 )
  {
    *((_WORD *)&byte_4BBA58 + 40) &= 0xFFDFu;
    *((_DWORD *)&byte_4BBA58 + 26) = 8;
    *((_DWORD *)&byte_4BBA58 + 41) = 0;
    *((_DWORD *)&byte_4BBA58 + 29) = 1001;
    *((_DWORD *)&byte_4BBA58 + 8) = *((_DWORD *)&byte_4BBA58 + 2);
    *((_DWORD *)&byte_4BBA58 + 9) = *((_DWORD *)&byte_4BBA58 + 3);
    sub_40F310(20);
    for ( i = 0; i < 32; ++i )
    {
      v4 = RNG_Range(-128, 128) << 9;
      v5 = RNG_Range(-128, 128) << 9;
      v6 = *((_DWORD *)&byte_4BBA58 + 3) + (RNG_Range(-64, 64) << 9);
      v7 = RNG_Range(-128, 128);
      NPC_Create(4, *((_DWORD *)&byte_4BBA58 + 2) + (v7 << 9), v6, v5, v4, 0, 0, 256);
    }
    sub_4702D0(197, 1);
    sub_4702D0(271, 1);
    sub_4702D0(272, 1);
  }
  else if ( v16 != 1001 )
  {
    goto LABEL_59;
  }
  *((_DWORD *)&byte_4BBA58 + 8) -= 512;
  *((_DWORD *)&byte_4BBA58 + 2) = *((_DWORD *)&byte_4BBA58 + 8) + (RNG_Range(-1, 1) << 9);
  *((_DWORD *)&byte_4BBA58 + 3) = *((_DWORD *)&byte_4BBA58 + 9) + (RNG_Range(-1, 1) << 9);
  if ( !(++*((_DWORD *)&byte_4BBA58 + 30) % 4) )
  {
    v8 = RNG_Range(-128, 128) << 9;
    v9 = RNG_Range(-128, 128) << 9;
    v10 = *((_DWORD *)&byte_4BBA58 + 3) + (RNG_Range(-64, 64) << 9);
    v11 = RNG_Range(-128, 128);
    NPC_Create(4, *((_DWORD *)&byte_4BBA58 + 2) + (v11 << 9), v10, v9, v8, 0, 0, 256);
  }
LABEL_59:
  v18 = 0;
  v19 = 0;
  v20 = 64;
  v21 = 24;
  v22 = 64;
  v23 = 0;
  v24 = 128;
  v25 = 24;
  v26 = 128;
  v27 = 0;
  v28 = 192;
  v29 = 24;
  v30 = 64;
  v31 = 0;
  v32 = 128;
  v33 = 24;
  v34 = 0;
  v35 = 0;
  v36 = 64;
  v37 = 24;
  v38 = 192;
  v39 = 0;
  v40 = 256;
  v41 = 24;
  v42 = 256;
  v43 = 0;
  v44 = 320;
  v45 = 24;
  v46 = 192;
  v47 = 0;
  v48 = 256;
  v49 = 24;
  v50 = 256;
  v51 = 48;
  v52 = 320;
  v53 = 72;
  v54 = 0;
  v55 = 24;
  v56 = 64;
  v57 = 48;
  v58 = 64;
  v59 = 24;
  v60 = 128;
  v61 = 48;
  v62 = 128;
  v63 = 24;
  v64 = 192;
  v65 = 48;
  v66 = 64;
  v67 = 24;
  v68 = 128;
  v69 = 48;
  v70 = 0;
  v71 = 24;
  v72 = 64;
  v73 = 48;
  v74 = 192;
  v75 = 24;
  v76 = 256;
  v77 = 48;
  v78 = 256;
  v79 = 24;
  v80 = 320;
  v81 = 48;
  v82 = 192;
  v83 = 24;
  v84 = 256;
  v85 = 48;
  v86 = 256;
  v87 = 48;
  v88 = 320;
  v89 = 72;
  if ( *((_BYTE *)&byte_4BBA58 + 156) )
  {
    ++BYTE1(NPCStruct_Damage);
    if ( ((signed int)BYTE1(NPCStruct_Damage) >> 1) % 2 )
    {
      v12 = &v18 + 4 * *((_DWORD *)&byte_4BBA58 + 26);
      result = (char *)&byte_4BBA58 + 84;
      *(_DWORD *)result = *v12;
      *((_DWORD *)result + 1) = v12[1];
      *((_DWORD *)result + 2) = v12[2];
      *((_DWORD *)result + 3) = v12[3];
    }
    else
    {
      v14 = &v54 + 4 * *((_DWORD *)&byte_4BBA58 + 26);
      result = (char *)&byte_4BBA58 + 84;
      *(_DWORD *)result = *v14;
      *((_DWORD *)result + 1) = v14[1];
      *((_DWORD *)result + 2) = v14[2];
      *((_DWORD *)result + 3) = v14[3];
    }
  }
  else
  {
    v15 = &v18 + 4 * *((_DWORD *)&byte_4BBA58 + 26);
    result = (char *)&byte_4BBA58 + 84;
    *(_DWORD *)result = *v15;
    *((_DWORD *)result + 1) = v15[1];
    *((_DWORD *)result + 2) = v15[2];
    *((_DWORD *)result + 3) = v15[3];
  }
  return result;
}
// 4BBA40: using guessed type int NPCStruct_Damage;

//----- (0047B460) --------------------------------------------------------
signed int __cdecl sub_47B460(int a1)
{
  signed int result; // eax@6
  signed int i; // [sp+0h] [bp-4h]@1

  for ( i = 0; i < 512 && NPC_Event_Number[43 * i] != a1; ++i )
    ;
  if ( i == 512 )
  {
    result = 0;
  }
  else
  {
    NPCStruct_Hitbox = 1;
    NPCStruct_Rects.top = NPC_Current_Health[43 * i];
    NPCStruct_Rects.right = NPC_Current_Health[43 * i];
    NPCStruct_Rects.left = (LONG)&NPC_Current_Health[43 * i];
    result = 1;
  }
  return result;
}
// 4A6250: using guessed type int NPC_Event_Number[];
// 4A6260: using guessed type int NPC_Current_Health[];
// 4BBA44: using guessed type int NPCStruct_Hitbox;

//----- (0047B500) --------------------------------------------------------
signed int sub_47B500()
{
  NPCStruct_Hitbox = 1;
  NPCStruct_Rects.top = Omega_Health[0];
  NPCStruct_Rects.right = Omega_Health[0];
  NPCStruct_Rects.left = (LONG)Omega_Health;
  return 1;
}
// 4BBA44: using guessed type int NPCStruct_Hitbox;
// 4BBA98: using guessed type int Omega_Health[];

//----- (0047B540) --------------------------------------------------------
LONG sub_47B540()
{
  LONG result; // eax@2
  int Src_Rects; // [sp+0h] [bp-50h]@1
  int v2; // [sp+4h] [bp-4Ch]@1
  int v3; // [sp+8h] [bp-48h]@1
  int v4; // [sp+Ch] [bp-44h]@1
  int v5; // [sp+10h] [bp-40h]@1
  int v6; // [sp+14h] [bp-3Ch]@1
  LONG v7; // [sp+18h] [bp-38h]@1
  int v8; // [sp+1Ch] [bp-34h]@1
  int v9; // [sp+20h] [bp-30h]@1
  int v10; // [sp+24h] [bp-2Ch]@1
  int v11; // [sp+28h] [bp-28h]@1
  int v12; // [sp+2Ch] [bp-24h]@1
  int v13; // [sp+30h] [bp-20h]@1
  int v14; // [sp+34h] [bp-1Ch]@1
  int v15; // [sp+38h] [bp-18h]@1
  int v16; // [sp+3Ch] [bp-14h]@1
  int v17; // [sp+40h] [bp-10h]@1
  int v18; // [sp+44h] [bp-Ch]@1
  LONG v19; // [sp+48h] [bp-8h]@1
  int v20; // [sp+4Ch] [bp-4h]@1

  v9 = 0;
  v10 = 48;
  v11 = 32;
  v12 = 56;
  Src_Rects = 0;
  v2 = 0;
  v3 = 244;
  v4 = 8;
  v13 = 0;
  v14 = 16;
  v15 = 244;
  v16 = 24;
  v17 = 0;
  v18 = 24;
  v19 = 0;
  v20 = 32;
  v5 = 0;
  v6 = 32;
  v7 = 232;
  v8 = 40;
  if ( NPCStruct_Hitbox )
  {
    result = NPCStruct_Rects.left;
    if ( *(_DWORD *)NPCStruct_Rects.left >= 1 )
    {
      v19 = 198 * *(_DWORD *)NPCStruct_Rects.left / NPCStruct_Rects.top;
      if ( NPCStruct_Rects.right <= *(_DWORD *)NPCStruct_Rects.left )
      {
        NPCStruct_Rects.bottom = 0;
      }
      else if ( ++NPCStruct_Rects.bottom > 30 )
      {
        --NPCStruct_Rects.right;
      }
      v7 = 198 * NPCStruct_Rects.right / NPCStruct_Rects.top;
      Render_Graphics((int)&FullscreenRect, 32, 220, (int)&Src_Rects, 26);
      Render_Graphics((int)&FullscreenRect, 32, 228, (int)&v13, 26);
      Render_Graphics((int)&FullscreenRect, 72, 224, (int)&v5, 26);
      Render_Graphics((int)&FullscreenRect, 72, 224, (int)&v17, 26);
      result = Render_Graphics((int)&FullscreenRect, 40, 224, (int)&v9, 26);
    }
    else
    {
      NPCStruct_Hitbox = 0;
    }
  }
  return result;
}
// 48F91C: using guessed type int FullscreenRect;
// 4BBA44: using guessed type int NPCStruct_Hitbox;

//----- (0047B6F0) --------------------------------------------------------
// Boss 1 : Omega
// Omega's AI.
int Boss_1_Omega()
{
  int v0; // eax@22
  int v1; // eax@23
  int v2; // eax@57
  int v3; // ST14_4@81
  int v4; // eax@81
  int *v5; // eax@86
  int result; // eax@86
  int v7; // [sp+Ch] [bp-40h]@86
  int v8; // [sp+10h] [bp-3Ch]@86
  int v9; // [sp+14h] [bp-38h]@86
  int v10; // [sp+18h] [bp-34h]@86
  int v11; // [sp+1Ch] [bp-30h]@86
  int v12; // [sp+20h] [bp-2Ch]@86
  int v13; // [sp+24h] [bp-28h]@86
  int v14; // [sp+28h] [bp-24h]@86
  int v15; // [sp+2Ch] [bp-20h]@86
  int v16; // [sp+30h] [bp-1Ch]@86
  int v17; // [sp+34h] [bp-18h]@86
  int v18; // [sp+38h] [bp-14h]@86
  int v19; // [sp+3Ch] [bp-10h]@86
  int v20; // [sp+40h] [bp-Ch]@86
  int v21; // [sp+44h] [bp-8h]@86
  int v22; // [sp+48h] [bp-4h]@86

  switch ( dword_4BBACC[0] )
  {
    case 0:
      dword_4BBA60 = 1794048;
      dword_4BBA64 = 0x20000;
      dword_4BBAE4[0] = 20480;
      dword_4BBAE8[0] = 20480;
      dword_4BBAEC[0] = 20480;
      dword_4BBAF0 = 0x2000;
      dword_4BBA78 = 1794048;
      dword_4BBA7C[0] = 0x20000;
      dword_4BBA90[0] = 52;
      dword_4BBAD4 = 4096;
      dword_4BBAD8[0] = 12288;
      dword_4BBADC[0] = 4096;
      dword_4BBAE0[0] = 0x2000;
      word_4BBAA8[0] = -32248;
      dword_4BBAA0[0] = 3;
      dword_4BBA9C = 1;
      dword_4BBA88[0] = 210;
      Omega_Health[0] = 400;
      byte_4BBB04 = -128;
      dword_4BBB90 = 6144;
      dword_4BBB94 = 4096;
      dword_4BBB98 = 6144;
      dword_4BBB9C = 4096;
      word_4BBB54 = 8;
      qmemcpy(&byte_4BBBB0, &byte_4BBB04, 0xACu);
      dword_4BBB50 = 0;
      dword_4BBBFC = 2;
      byte_4BBC5C = -128;
      dword_4BBCE8 = 12288;
      dword_4BBCEC = 0x2000;
      dword_4BBCF0 = 0x2000;
      dword_4BBCF4 = 0x2000;
      dword_4BBC94 = 52;
      dword_4BBCD8 = 4096;
      dword_4BBCDC = 4096;
      dword_4BBCE0 = 4096;
      dword_4BBCE4 = 4096;
      word_4BBCAC = 8;
      X_Position = 1785856;
      dword_4BBC68 = 0x20000;
      dword_4BBCA8 = 0;
      qmemcpy(&byte_4BBD08, &byte_4BBC5C, 0xACu);
      dword_4BBD54 = 2;
      X_Position = 1802240;
      byte_4BBDB4 = -128;
      break;
    case 0x14:
      dword_4BBACC[0] = 30;
      dword_4BBAD0 = 0;
      dword_4BBAC0[0] = 0;
      goto LABEL_4;
    case 0x1E:
LABEL_4:
      sub_40F310(2);
      dword_4BBA64 -= 512;
      if ( !(++dword_4BBAD0 % 4) )
        Play_Sound_Effect(26, 1);
      if ( dword_4BBAD0 == 48 )
      {
        dword_4BBAD0 = 0;
        dword_4BBACC[0] = 40;
        if ( Omega_Health[0] <= 280 )
        {
          dword_4BBACC[0] = 110;
          word_4BBAA8[0] |= 0x20u;
          word_4BBAA8[0] &= 0xFFF7u;
          word_4BBCAC &= 0xFFF7u;
          word_4BBD58 &= 0xFFF7u;
          dword_4BBCD0 = 3;
          dword_4BBD7C = 3;
          dword_4BBE34 = 0x2000;
        }
      }
      break;
    case 0x28:
      if ( ++dword_4BBAD0 == 48 )
      {
        dword_4BBAD0 = 0;
        dword_4BBACC[0] = 50;
        dword_4BBABC = 0;
        dword_4BBE34 = 0x2000;
        Play_Sound_Effect(102, 1);
      }
      break;
    case 0x32:
      if ( ++dword_4BBABC > 2 )
      {
        dword_4BBABC = 0;
        ++dword_4BBAC0[0];
      }
      if ( dword_4BBAC0[0] == 3 )
      {
        dword_4BBACC[0] = 60;
        dword_4BBAD0 = 0;
        word_4BBAA8[0] |= 0x20u;
        dword_4BBAD4 = 0x2000;
        dword_4BBADC[0] = 0x2000;
      }
      break;
    case 0x3C:
      if ( ++dword_4BBAD0 > 20 && dword_4BBAD0 < 80 && !(dword_4BBAD0 % 3) )
      {
        if ( RNG_Range(0, 9) >= 8 )
        {
          v1 = RNG_Range(-256, 256);
          NPC_Create(48, dword_4BBA60, dword_4BBA64 - 0x2000, v1, -819, 2, 0, 256);
        }
        else
        {
          v0 = RNG_Range(-256, 256);
          NPC_Create(48, dword_4BBA60, dword_4BBA64 - 0x2000, v0, -819, 0, 0, 256);
        }
        Play_Sound_Effect(39, 1);
      }
      if ( dword_4BBAD0 == 200 || Count_Weapon_Shot_Occurences(6) )
      {
        dword_4BBABC = 0;
        dword_4BBACC[0] = 70;
        Play_Sound_Effect(102, 1);
      }
      break;
    case 0x46:
      if ( ++dword_4BBABC > 2 )
      {
        dword_4BBABC = 0;
        --dword_4BBAC0[0];
      }
      if ( dword_4BBAC0[0] == 1 )
        dword_4BBAFC[0] = 20;
      if ( !dword_4BBAC0[0] )
      {
        Play_Sound_Effect(102, 0);
        Play_Sound_Effect(12, 1);
        dword_4BBACC[0] = 80;
        dword_4BBAD0 = 0;
        word_4BBAA8[0] &= 0xFFDFu;
        dword_4BBAD4 = 12288;
        dword_4BBADC[0] = 12288;
        dword_4BBE34 = 18432;
        dword_4BBAFC[0] = 0;
      }
      break;
    case 0x50:
      if ( ++dword_4BBAD0 == 48 )
      {
        dword_4BBAD0 = 0;
        dword_4BBACC[0] = 90;
      }
      break;
    case 0x5A:
      sub_40F310(2);
      dword_4BBA64 += 512;
      if ( !(++dword_4BBAD0 % 4) )
        Play_Sound_Effect(26, 1);
      if ( dword_4BBAD0 == 48 )
      {
        dword_4BBAD0 = 0;
        dword_4BBACC[0] = 100;
      }
      break;
    case 0x64:
      if ( ++dword_4BBAD0 == 120 )
      {
        dword_4BBAD0 = 0;
        dword_4BBACC[0] = 30;
        dword_4BBA60 = dword_4BBA78 + (RNG_Range(-64, 64) << 9);
        dword_4BBA64 = dword_4BBA7C[0];
      }
      break;
    case 0x6E:
      if ( ++dword_4BBABC > 2 )
      {
        dword_4BBABC = 0;
        ++dword_4BBAC0[0];
      }
      if ( dword_4BBAC0[0] == 3 )
      {
        dword_4BBACC[0] = 120;
        dword_4BBAD0 = 0;
        dword_4BBAD4 = 0x2000;
        dword_4BBADC[0] = 0x2000;
      }
      break;
    case 0x78:
      if ( ++dword_4BBAD0 == 50 || Count_Weapon_Shot_Occurences(6) )
      {
        dword_4BBACC[0] = 130;
        Play_Sound_Effect(102, 1);
        dword_4BBAD0 = 0;
        dword_4BBABC = 0;
      }
      if ( dword_4BBAD0 < 30 && !(dword_4BBAD0 % 5) )
      {
        v2 = RNG_Range(-341, 341);
        NPC_Create(48, dword_4BBA60, dword_4BBA64 - 0x2000, v2, -819, 0, 0, 256);
        Play_Sound_Effect(39, 1);
      }
      break;
    case 0x82:
      if ( ++dword_4BBABC > 2 )
      {
        dword_4BBABC = 0;
        --dword_4BBAC0[0];
      }
      if ( dword_4BBAC0[0] == 1 )
        dword_4BBAFC[0] = 20;
      if ( !dword_4BBAC0[0] )
      {
        dword_4BBACC[0] = 140;
        word_4BBAA8[0] |= 0x20u;
        dword_4BBAD4 = 0x2000;
        dword_4BBADC[0] = 0x2000;
        dword_4BBA6C = -1535;
        Play_Sound_Effect(102, 0);
        Play_Sound_Effect(12, 1);
        Play_Sound_Effect(25, 1);
        if ( dword_4BBA60 < Quote_X_Position )
          dword_4BBA68[0] = 256;
        if ( dword_4BBA60 > Quote_X_Position )
          dword_4BBA68[0] = -256;
        dword_4BBAFC[0] = 0;
        dword_4BBE34 = 18432;
      }
      break;
    case 0x8C:
      if ( Tile_On_Which_Quote_Is & 8 && dword_4BBA6C > 0 )
        dword_4BBE58 = 20;
      else
        dword_4BBE58 = 0;
      dword_4BBA6C += 36;
      if ( dword_4BBA6C > 1535 )
        dword_4BBA6C = 1535;
      dword_4BBA64 += dword_4BBA6C;
      dword_4BBA60 += dword_4BBA68[0];
      if ( dword_4BBA5C[0] & 8 )
      {
        dword_4BBACC[0] = 110;
        dword_4BBAD0 = 0;
        dword_4BBABC = 0;
        dword_4BBE34 = 0x2000;
        dword_4BBE58 = 0;
        Play_Sound_Effect(26, 1);
        Play_Sound_Effect(12, 1);
        sub_40F310(30);
      }
      break;
    case 0x96:
      sub_40F310(2);
      if ( !(++dword_4BBAD0 % 12) )
        Play_Sound_Effect(52, 1);
      v3 = dword_4BBA64 + (RNG_Range(-48, 24) << 9);
      v4 = RNG_Range(-48, 48);
      sub_46F150(dword_4BBA60 + (v4 << 9), v3, 1, 1);
      if ( dword_4BBAD0 > 100 )
      {
        dword_4BBAD0 = 0;
        dword_4BBACC[0] = 160;
        Explosion_(dword_4BBA60, dword_4BBA64, 1);
        Play_Sound_Effect(35, 1);
      }
      break;
    case 0xA0:
      sub_40F310(40);
      if ( ++dword_4BBAD0 > 50 )
      {
        *(_BYTE *)&byte_4BBA58 = 0;
        byte_4BBB04 = 0;
        byte_4BBBB0 = 0;
        byte_4BBC5C = 0;
        byte_4BBD08 = 0;
        byte_4BBDB4 = 0;
      }
      break;
    default:
      break;
  }
  v7 = 0;
  v8 = 0;
  v9 = 80;
  v10 = 56;
  v11 = 80;
  v12 = 0;
  v13 = 160;
  v14 = 56;
  v15 = 160;
  v16 = 0;
  v17 = 240;
  v18 = 56;
  v19 = 80;
  v20 = 0;
  v21 = 160;
  v22 = 56;
  v5 = &v7 + 4 * dword_4BBAC0[0];
  dword_4BBAAC[0] = *v5;
  dword_4BBAB0 = v5[1];
  dword_4BBAB4 = v5[2];
  dword_4BBAB8 = v5[3];
  byte_4BBBA0 = byte_4BBAF4[0];
  byte_4BBC4C = byte_4BBAF4[0];
  byte_4BBCF8 = byte_4BBAF4[0];
  byte_4BBDA4 = byte_4BBAF4[0];
  sub_47C4E0();
  sub_47C380();
  result = sub_47C7A0();
  if ( !Omega_Health[0] && dword_4BBACC[0] < 150 )
  {
    dword_4BBACC[0] = 150;
    dword_4BBAD0 = 0;
    dword_4BBAFC[0] = 0;
    dword_4BBE58 = 0;
    result = sub_4702D0(48, 1);
  }
  return result;
}
// 49E63C: using guessed type int Tile_On_Which_Quote_Is;
// 4BBA5C: using guessed type int dword_4BBA5C[];
// 4BBA68: using guessed type int dword_4BBA68[];
// 4BBA6C: using guessed type int dword_4BBA6C;
// 4BBA78: using guessed type int dword_4BBA78;
// 4BBA7C: using guessed type int dword_4BBA7C[];
// 4BBA88: using guessed type int dword_4BBA88[];
// 4BBA90: using guessed type int dword_4BBA90[];
// 4BBA98: using guessed type int Omega_Health[];
// 4BBA9C: using guessed type int dword_4BBA9C;
// 4BBAA0: using guessed type int dword_4BBAA0[];
// 4BBAA8: using guessed type __int16 word_4BBAA8[];
// 4BBAAC: using guessed type int dword_4BBAAC[];
// 4BBAB0: using guessed type int dword_4BBAB0;
// 4BBAB4: using guessed type int dword_4BBAB4;
// 4BBAB8: using guessed type int dword_4BBAB8;
// 4BBABC: using guessed type int dword_4BBABC;
// 4BBAC0: using guessed type int dword_4BBAC0[];
// 4BBACC: using guessed type int dword_4BBACC[];
// 4BBAD0: using guessed type int dword_4BBAD0;
// 4BBAD4: using guessed type int dword_4BBAD4;
// 4BBAD8: using guessed type int dword_4BBAD8[];
// 4BBADC: using guessed type int dword_4BBADC[];
// 4BBAE0: using guessed type int dword_4BBAE0[];
// 4BBAE4: using guessed type int dword_4BBAE4[];
// 4BBAE8: using guessed type int dword_4BBAE8[];
// 4BBAEC: using guessed type int dword_4BBAEC[];
// 4BBAF0: using guessed type int dword_4BBAF0;
// 4BBAFC: using guessed type int dword_4BBAFC[];
// 4BBB04: using guessed type char byte_4BBB04;
// 4BBB50: using guessed type int dword_4BBB50;
// 4BBB54: using guessed type __int16 word_4BBB54;
// 4BBB90: using guessed type int dword_4BBB90;
// 4BBB94: using guessed type int dword_4BBB94;
// 4BBB98: using guessed type int dword_4BBB98;
// 4BBB9C: using guessed type int dword_4BBB9C;
// 4BBBA0: using guessed type char byte_4BBBA0;
// 4BBBB0: using guessed type char byte_4BBBB0;
// 4BBBFC: using guessed type int dword_4BBBFC;
// 4BBC4C: using guessed type char byte_4BBC4C;
// 4BBC5C: using guessed type char byte_4BBC5C;
// 4BBC94: using guessed type int dword_4BBC94;
// 4BBCA8: using guessed type int dword_4BBCA8;
// 4BBCAC: using guessed type __int16 word_4BBCAC;
// 4BBCD0: using guessed type int dword_4BBCD0;
// 4BBCD8: using guessed type int dword_4BBCD8;
// 4BBCDC: using guessed type int dword_4BBCDC;
// 4BBCE0: using guessed type int dword_4BBCE0;
// 4BBCE4: using guessed type int dword_4BBCE4;
// 4BBCE8: using guessed type int dword_4BBCE8;
// 4BBCEC: using guessed type int dword_4BBCEC;
// 4BBCF0: using guessed type int dword_4BBCF0;
// 4BBCF4: using guessed type int dword_4BBCF4;
// 4BBCF8: using guessed type char byte_4BBCF8;
// 4BBD08: using guessed type char byte_4BBD08;
// 4BBD54: using guessed type int dword_4BBD54;
// 4BBD58: using guessed type __int16 word_4BBD58;
// 4BBD7C: using guessed type int dword_4BBD7C;
// 4BBDA4: using guessed type char byte_4BBDA4;
// 4BBDB4: using guessed type char byte_4BBDB4;
// 4BBE34: using guessed type int dword_4BBE34;
// 4BBE58: using guessed type int dword_4BBE58;

//----- (0047C380) --------------------------------------------------------
int sub_47C380()
{
  int result; // eax@6
  __int64 v1; // rax@3
  int *v2; // ecx@4
  int *v3; // edx@4
  int *v4; // ecx@5
  int *v5; // edx@5
  int v6; // [sp+0h] [bp-24h]@1
  int v7; // [sp+4h] [bp-20h]@1
  int v8; // [sp+8h] [bp-1Ch]@1
  int v9; // [sp+Ch] [bp-18h]@1
  int i; // [sp+10h] [bp-14h]@1
  int v11; // [sp+14h] [bp-10h]@1
  int v12; // [sp+18h] [bp-Ch]@1
  int v13; // [sp+1Ch] [bp-8h]@1
  int v14; // [sp+20h] [bp-4h]@1

  v11 = 80;
  v12 = 56;
  v13 = 104;
  v14 = 72;
  v6 = 104;
  v7 = 56;
  v8 = 128;
  v9 = 72;
  for ( i = 1; i < 3; ++i )
  {
    v1 = dword_4BBA64 + *(&dword_4BBA64 + 43 * (i + 2)) - 4096;
    *(&dword_4BBA64 + 43 * i) = ((signed int)v1 - HIDWORD(v1)) >> 1;
    if ( dword_4BBAA4[43 * i] )
    {
      v4 = &v6 + 4 * dword_4BBAC0[43 * i];
      v5 = &dword_4BBAAC[43 * i];
      *v5 = *v4;
      v5[1] = v4[1];
      v5[2] = v4[2];
      v5[3] = v4[3];
      *(&dword_4BBA60 + 43 * i) = dword_4BBA60 + 0x2000;
    }
    else
    {
      *(&dword_4BBA60 + 43 * i) = dword_4BBA60 - 0x2000;
      v2 = &v11 + 4 * dword_4BBAC0[43 * i];
      v3 = &dword_4BBAAC[43 * i];
      *v3 = *v2;
      v3[1] = v2[1];
      v3[2] = v2[2];
      v3[3] = v2[3];
    }
    result = i + 1;
  }
  return result;
}
// 4BBAA4: using guessed type int dword_4BBAA4[];
// 4BBAAC: using guessed type int dword_4BBAAC[];
// 4BBAC0: using guessed type int dword_4BBAC0[];

//----- (0047C4E0) --------------------------------------------------------
int sub_47C4E0()
{
  int result; // eax@25
  __int64 v1; // rax@17
  int *v2; // eax@23
  int *v3; // ecx@23
  int *v4; // eax@24
  int *v5; // ecx@24
  int v6; // [sp+0h] [bp-48h]@3
  int v7; // [sp+4h] [bp-44h]@1
  int v8; // [sp+8h] [bp-40h]@1
  int v9; // [sp+Ch] [bp-3Ch]@1
  int v10; // [sp+10h] [bp-38h]@1
  int v11; // [sp+14h] [bp-34h]@1
  int v12; // [sp+18h] [bp-30h]@1
  int v13; // [sp+1Ch] [bp-2Ch]@1
  int v14; // [sp+20h] [bp-28h]@1
  int i; // [sp+24h] [bp-24h]@1
  int v16; // [sp+28h] [bp-20h]@1
  int v17; // [sp+2Ch] [bp-1Ch]@1
  int v18; // [sp+30h] [bp-18h]@1
  int v19; // [sp+34h] [bp-14h]@1
  int v20; // [sp+38h] [bp-10h]@1
  int v21; // [sp+3Ch] [bp-Ch]@1
  int v22; // [sp+40h] [bp-8h]@1
  int v23; // [sp+44h] [bp-4h]@1

  v16 = 0;
  v17 = 56;
  v18 = 40;
  v19 = 88;
  v20 = 40;
  v21 = 56;
  v22 = 80;
  v23 = 88;
  v7 = 0;
  v8 = 88;
  v9 = 40;
  v10 = 120;
  v11 = 40;
  v12 = 88;
  v13 = 80;
  v14 = 120;
  for ( i = 3; i < 5; ++i )
  {
    v6 = dword_4BBACC[43 * i];
    if ( v6 )
    {
      if ( v6 != 1 )
      {
        if ( v6 == 3 )
        {
          dword_4BBA7C[43 * i] = dword_4BBA64 + 12288;
          if ( i == 3 )
            *(&dword_4BBA60 + 129) = dword_4BBA60 - 0x2000;
          if ( i == 4 )
            *(&dword_4BBA60 + 172) = dword_4BBA60 + 0x2000;
          v1 = dword_4BBA7C[43 * i] - *(&dword_4BBA64 + 43 * i);
          *(&dword_4BBA64 + 43 * i) += ((signed int)v1 - HIDWORD(v1)) >> 1;
        }
        goto LABEL_18;
      }
    }
    else
    {
      dword_4BBACC[43 * i] = 1;
    }
    *(&dword_4BBA64 + 43 * i) = dword_4BBA64;
    if ( i == 3 )
      *(&dword_4BBA60 + 129) = dword_4BBA60 - 0x2000;
    if ( i == 4 )
      *(&dword_4BBA60 + 172) = dword_4BBA60 + 0x2000;
LABEL_18:
    dword_4BBAC0[43 * i] = !(dword_4BBA5C[43 * i] & 8) && *(&dword_4BBA64 + 43 * i) > dword_4BBA7C[43 * i];
    if ( dword_4BBAA4[43 * i] )
    {
      v4 = &v7 + 4 * dword_4BBAC0[43 * i];
      v5 = &dword_4BBAAC[43 * i];
      *v5 = *v4;
      v5[1] = v4[1];
      v5[2] = v4[2];
      v5[3] = v4[3];
    }
    else
    {
      v2 = &v16 + 4 * dword_4BBAC0[43 * i];
      v3 = &dword_4BBAAC[43 * i];
      *v3 = *v2;
      v3[1] = v2[1];
      v3[2] = v2[2];
      v3[3] = v2[3];
    }
    result = i + 1;
  }
  return result;
}
// 4BBA5C: using guessed type int dword_4BBA5C[];
// 4BBA7C: using guessed type int dword_4BBA7C[];
// 4BBAA4: using guessed type int dword_4BBAA4[];
// 4BBAAC: using guessed type int dword_4BBAAC[];
// 4BBAC0: using guessed type int dword_4BBAC0[];
// 4BBACC: using guessed type int dword_4BBACC[];

//----- (0047C7A0) --------------------------------------------------------
int sub_47C7A0()
{
  int result; // eax@1

  result = dword_4BBE28;
  if ( !dword_4BBE28 )
  {
    word_4BBE04 |= 9u;
    dword_4BBE30 = 10240;
    dword_4BBE34 = 18432;
    dword_4BBE38 = 10240;
    dword_4BBE3C = 0x2000;
    dword_4BBE28 = 1;
    goto LABEL_5;
  }
  if ( dword_4BBE28 == 1 )
  {
LABEL_5:
    dword_4BBDBC = dword_4BBA60;
    result = dword_4BBA64;
    dword_4BBDC0 = dword_4BBA64;
  }
  return result;
}
// 4BBDBC: using guessed type int dword_4BBDBC;
// 4BBDC0: using guessed type int dword_4BBDC0;
// 4BBE04: using guessed type __int16 word_4BBE04;
// 4BBE28: using guessed type int dword_4BBE28;
// 4BBE30: using guessed type int dword_4BBE30;
// 4BBE34: using guessed type int dword_4BBE34;
// 4BBE38: using guessed type int dword_4BBE38;
// 4BBE3C: using guessed type int dword_4BBE3C;

//----- (0047C820) --------------------------------------------------------
char *Boss_8_Heavy_Press()
{
  int v0; // ST14_4@17
  int v1; // eax@17
  int v2; // eax@23
  int v3; // ST14_4@42
  int v4; // eax@42
  int *v5; // edx@59
  char *result; // eax@59
  int *v7; // edx@60
  int *v8; // edx@62
  signed int v9; // [sp+8h] [bp-70h]@1
  signed int i; // [sp+10h] [bp-68h]@21
  signed int k; // [sp+10h] [bp-68h]@28
  signed int j; // [sp+10h] [bp-68h]@52
  int v13; // [sp+18h] [bp-60h]@57
  int v14; // [sp+1Ch] [bp-5Ch]@57
  int v15; // [sp+20h] [bp-58h]@57
  int v16; // [sp+24h] [bp-54h]@57
  int v17; // [sp+28h] [bp-50h]@57
  int v18; // [sp+2Ch] [bp-4Ch]@57
  int v19; // [sp+30h] [bp-48h]@57
  int v20; // [sp+34h] [bp-44h]@57
  int v21; // [sp+38h] [bp-40h]@57
  int v22; // [sp+3Ch] [bp-3Ch]@57
  int v23; // [sp+40h] [bp-38h]@57
  int v24; // [sp+44h] [bp-34h]@57
  int v25; // [sp+48h] [bp-30h]@57
  int v26; // [sp+4Ch] [bp-2Ch]@57
  int v27; // [sp+50h] [bp-28h]@57
  int v28; // [sp+54h] [bp-24h]@57
  int v29; // [sp+58h] [bp-20h]@57
  int v30; // [sp+5Ch] [bp-1Ch]@57
  int v31; // [sp+60h] [bp-18h]@57
  int v32; // [sp+64h] [bp-14h]@57
  int v33; // [sp+68h] [bp-10h]@57
  int v34; // [sp+6Ch] [bp-Ch]@57
  int v35; // [sp+70h] [bp-8h]@57
  int v36; // [sp+74h] [bp-4h]@57

  v9 = *((_DWORD *)&byte_4BBA58 + 29);
  if ( v9 <= 31 )
  {
    if ( v9 == 31 )
    {
LABEL_20:
      *((_DWORD *)&byte_4BBA58 + 3) += 2048;
      if ( *((_DWORD *)&byte_4BBA58 + 3) >= 211456 )
      {
        *((_DWORD *)&byte_4BBA58 + 3) = 211456;
        *((_DWORD *)&byte_4BBA58 + 26) = 0;
        *((_DWORD *)&byte_4BBA58 + 29) = 20;
        Play_Sound_Effect(44, 1);
        for ( i = 0; i < 5; ++i )
        {
          v2 = RNG_Range(-40, 40);
          NPC_Create(
            4,
            *((_DWORD *)&byte_4BBA58 + 2) + (v2 << 9),
            *((_DWORD *)&byte_4BBA58 + 3) + 30720,
            0,
            0,
            0,
            0,
            256);
        }
      }
    }
    else
    {
      switch ( v9 )
      {
        case 0:
          *((_DWORD *)&byte_4BBA58 + 29) = 10;
          *(_BYTE *)&byte_4BBA58 = -128;
          *((_DWORD *)&byte_4BBA58 + 17) = 1;
          *((_DWORD *)&byte_4BBA58 + 19) = 2;
          *((_DWORD *)&byte_4BBA58 + 2) = 0;
          *((_DWORD *)&byte_4BBA58 + 3) = 0;
          *((_DWORD *)&byte_4BBA58 + 35) = 20480;
          *((_DWORD *)&byte_4BBA58 + 36) = 30720;
          *((_DWORD *)&byte_4BBA58 + 37) = 20480;
          *((_DWORD *)&byte_4BBA58 + 38) = 30720;
          *((_DWORD *)&byte_4BBA58 + 14) = 54;
          *((_DWORD *)&byte_4BBA58 + 31) = 25088;
          *((_DWORD *)&byte_4BBA58 + 32) = 30720;
          *((_DWORD *)&byte_4BBA58 + 33) = 20480;
          *((_DWORD *)&byte_4BBA58 + 34) = 24576;
          *((_WORD *)&byte_4BBA58 + 40) = -32184;
          *((_DWORD *)&byte_4BBA58 + 18) = 3;
          *((_DWORD *)&byte_4BBA58 + 41) = 10;
          *((_DWORD *)&byte_4BBA58 + 12) = 1000;
          *((_DWORD *)&byte_4BBA58 + 16) = 700;
          goto LABEL_57;
        case 5:
          *((_DWORD *)&byte_4BBA58 + 29) = 6;
          *((_DWORD *)&byte_4BBA58 + 2) = 0;
          *((_DWORD *)&byte_4BBA58 + 3) = 0;
          byte_4BBB04 = 0;
          byte_4BBBB0 = 0;
          goto LABEL_57;
        case 10:
          *((_DWORD *)&byte_4BBA58 + 29) = 11;
          *((_DWORD *)&byte_4BBA58 + 2) = 81920;
          *((_DWORD *)&byte_4BBA58 + 3) = 37888;
          goto LABEL_57;
        case 20:
          *((_DWORD *)&byte_4BBA58 + 41) = 0;
          *((_DWORD *)&byte_4BBA58 + 29) = 21;
          *((_DWORD *)&byte_4BBA58 + 2) = 81920;
          *((_DWORD *)&byte_4BBA58 + 3) = 211456;
          *((_WORD *)&byte_4BBA58 + 40) &= 0xFFBFu;
          byte_4BBB04 = 0;
          byte_4BBBB0 = 0;
          goto LABEL_16;
        case 21:
LABEL_16:
          if ( !(++*((_DWORD *)&byte_4BBA58 + 30) % 16) )
          {
            v0 = *((_DWORD *)&byte_4BBA58 + 3) + (RNG_Range(-60, 60) << 9);
            v1 = RNG_Range(-40, 40);
            sub_46F150(*((_DWORD *)&byte_4BBA58 + 2) + (v1 << 9), v0, 1, 1);
          }
          break;
        case 30:
          *((_DWORD *)&byte_4BBA58 + 29) = 31;
          *((_DWORD *)&byte_4BBA58 + 26) = 2;
          *((_DWORD *)&byte_4BBA58 + 2) = 81920;
          *((_DWORD *)&byte_4BBA58 + 3) = 0x8000;
          goto LABEL_20;
        default:
          goto LABEL_57;
      }
    }
    goto LABEL_57;
  }
  if ( v9 > 500 )
  {
    if ( v9 != 501 )
    {
      if ( v9 == 510 )
      {
        *((_DWORD *)&byte_4BBA58 + 5) += 64;
        *((_DWORD *)&byte_4BBA58 + 41) = 127;
        *((_DWORD *)&byte_4BBA58 + 3) += *((_DWORD *)&byte_4BBA58 + 5);
        if ( !*((_DWORD *)&byte_4BBA58 + 27) && *((_DWORD *)&byte_4BBA58 + 3) > 81920 )
        {
          *((_DWORD *)&byte_4BBA58 + 27) = 1;
          *((_DWORD *)&byte_4BBA58 + 5) = -512;
          *((_DWORD *)&byte_4BBA58 + 41) = 0;
          for ( j = 0; j < 7; ++j )
          {
            sub_413A60(j + 7, 14, 0);
            sub_46F150((j + 7) << 13, 114688, 0, 0);
            Play_Sound_Effect(12, 1);
          }
        }
        if ( *((_DWORD *)&byte_4BBA58 + 3) > 245760 )
          *((_DWORD *)&byte_4BBA58 + 29) = 520;
      }
      goto LABEL_57;
    }
LABEL_41:
    if ( !(++*((_DWORD *)&byte_4BBA58 + 30) % 16) )
    {
      Play_Sound_Effect(12, 1);
      v3 = *((_DWORD *)&byte_4BBA58 + 3) + (RNG_Range(-60, 60) << 9);
      v4 = RNG_Range(-40, 40);
      sub_46F150(*((_DWORD *)&byte_4BBA58 + 2) + (v4 << 9), v3, 1, 1);
    }
    if ( *((_DWORD *)&byte_4BBA58 + 30) == 95 )
      *((_DWORD *)&byte_4BBA58 + 26) = 1;
    if ( *((_DWORD *)&byte_4BBA58 + 30) == 98 )
      *((_DWORD *)&byte_4BBA58 + 26) = 2;
    if ( *((_DWORD *)&byte_4BBA58 + 30) > 100 )
      *((_DWORD *)&byte_4BBA58 + 29) = 510;
    goto LABEL_57;
  }
  if ( v9 == 500 )
  {
    word_4BBCAC &= 0xFFDFu;
    *((_DWORD *)&byte_4BBA58 + 29) = 501;
    *((_DWORD *)&byte_4BBA58 + 30) = 0;
    *((_DWORD *)&byte_4BBA58 + 27) = 0;
    sub_4702D0(325, 1);
    sub_4702D0(330, 1);
    goto LABEL_41;
  }
  if ( v9 == 100 )
  {
    *((_DWORD *)&byte_4BBA58 + 29) = 101;
    *((_DWORD *)&byte_4BBA58 + 28) = 9;
    *((_DWORD *)&byte_4BBA58 + 30) = -100;
    byte_4BBB04 = -128;
    dword_4BBB80 = 7168;
    dword_4BBB88 = 7168;
    dword_4BBB84 = 4096;
    dword_4BBB8C = 4096;
    word_4BBB54 = 12;
    qmemcpy(&byte_4BBBB0, &byte_4BBB04, 0xACu);
    byte_4BBC5C = -112;
    word_4BBCAC |= 0x20u;
    dword_4BBCD8 = 3072;
    dword_4BBCE0 = 3072;
    dword_4BBCDC = 4096;
    dword_4BBCE4 = 4096;
    NPC_Create(325, *((_DWORD *)&byte_4BBA58 + 2), *((_DWORD *)&byte_4BBA58 + 3) + 30720, 0, 0, 0, 0, 256);
  }
  else if ( v9 != 101 )
  {
    goto LABEL_57;
  }
  if ( *((_DWORD *)&byte_4BBA58 + 28) > 1 && *((_DWORD *)&byte_4BBA58 + 16) < 70 * *((_DWORD *)&byte_4BBA58 + 28) )
  {
    --*((_DWORD *)&byte_4BBA58 + 28);
    for ( k = 0; k < 5; ++k )
    {
      sub_413A60(k + 8, *((_DWORD *)&byte_4BBA58 + 28), 0);
      sub_46F150((k + 8) << 13, *((_DWORD *)&byte_4BBA58 + 28) << 13, 0, 4);
      Play_Sound_Effect(12, 1);
    }
  }
  if ( ++*((_DWORD *)&byte_4BBA58 + 30) == 81 || *((_DWORD *)&byte_4BBA58 + 30) == 241 )
    NPC_Create(323, 24576, 122880, 0, 0, 1, 0, 256);
  if ( *((_DWORD *)&byte_4BBA58 + 30) == 1 || *((_DWORD *)&byte_4BBA58 + 30) == 161 )
    NPC_Create(323, 139264, 122880, 0, 0, 1, 0, 256);
  if ( *((_DWORD *)&byte_4BBA58 + 30) >= 300 )
  {
    *((_DWORD *)&byte_4BBA58 + 30) = 0;
    NPC_Create(325, *((_DWORD *)&byte_4BBA58 + 2), *((_DWORD *)&byte_4BBA58 + 3) + 30720, 0, 0, 0, 0, 256);
  }
LABEL_57:
  dword_4BBB0C = *((_DWORD *)&byte_4BBA58 + 2) - 12288;
  dword_4BBB10 = *((_DWORD *)&byte_4BBA58 + 3) + 26624;
  dword_4BBBB8 = *((_DWORD *)&byte_4BBA58 + 2) + 12288;
  dword_4BBBBC = *((_DWORD *)&byte_4BBA58 + 3) + 26624;
  X_Position = *((_DWORD *)&byte_4BBA58 + 2);
  dword_4BBC68 = *((_DWORD *)&byte_4BBA58 + 3) + 20480;
  v13 = 0;
  v14 = 0;
  v15 = 80;
  v16 = 120;
  v17 = 80;
  v18 = 0;
  v19 = 160;
  v20 = 120;
  v21 = 160;
  v22 = 0;
  v23 = 240;
  v24 = 120;
  v25 = 0;
  v26 = 120;
  v27 = 80;
  v28 = 240;
  v29 = 80;
  v30 = 120;
  v31 = 160;
  v32 = 240;
  v33 = 160;
  v34 = 120;
  v35 = 240;
  v36 = 240;
  if ( *((_BYTE *)&byte_4BBA58 + 156) )
  {
    if ( ((signed int)(unsigned __int8)++byte_4BC7C8 >> 1) % 2 )
    {
      v5 = &v13 + 4 * *((_DWORD *)&byte_4BBA58 + 26);
      result = (char *)&byte_4BBA58 + 84;
      *(_DWORD *)result = *v5;
      *((_DWORD *)result + 1) = v5[1];
      *((_DWORD *)result + 2) = v5[2];
      *((_DWORD *)result + 3) = v5[3];
    }
    else
    {
      v7 = &v25 + 4 * *((_DWORD *)&byte_4BBA58 + 26);
      result = (char *)&byte_4BBA58 + 84;
      *(_DWORD *)result = *v7;
      *((_DWORD *)result + 1) = v7[1];
      *((_DWORD *)result + 2) = v7[2];
      *((_DWORD *)result + 3) = v7[3];
    }
  }
  else
  {
    v8 = &v13 + 4 * *((_DWORD *)&byte_4BBA58 + 26);
    result = (char *)&byte_4BBA58 + 84;
    *(_DWORD *)result = *v8;
    *((_DWORD *)result + 1) = v8[1];
    *((_DWORD *)result + 2) = v8[2];
    *((_DWORD *)result + 3) = v8[3];
  }
  return result;
}
// 4BBB04: using guessed type char byte_4BBB04;
// 4BBB0C: using guessed type int dword_4BBB0C;
// 4BBB10: using guessed type int dword_4BBB10;
// 4BBB54: using guessed type __int16 word_4BBB54;
// 4BBB80: using guessed type int dword_4BBB80;
// 4BBB84: using guessed type int dword_4BBB84;
// 4BBB88: using guessed type int dword_4BBB88;
// 4BBB8C: using guessed type int dword_4BBB8C;
// 4BBBB0: using guessed type char byte_4BBBB0;
// 4BBBB8: using guessed type int dword_4BBBB8;
// 4BBBBC: using guessed type int dword_4BBBBC;
// 4BBC5C: using guessed type char byte_4BBC5C;
// 4BBCAC: using guessed type __int16 word_4BBCAC;
// 4BBCD8: using guessed type int dword_4BBCD8;
// 4BBCDC: using guessed type int dword_4BBCDC;
// 4BBCE0: using guessed type int dword_4BBCE0;
// 4BBCE4: using guessed type int dword_4BBCE4;
// 4BC7C8: using guessed type char byte_4BC7C8;

//----- (0047D170) --------------------------------------------------------
int Boss_6_Dragon_Sisters()
{
  int v0; // ST08_4@67
  int v1; // eax@67
  char *v2; // edx@83
  int result; // eax@83
  signed int v4; // [sp+8h] [bp-18h]@1

  v4 = *((_DWORD *)&byte_4BBA58 + 29);
  if ( v4 > 401 )
  {
    switch ( v4 )
    {
      case 1000:
        *((_DWORD *)&byte_4BBA58 + 29) = 1001;
        *((_DWORD *)&byte_4BBA58 + 30) = 0;
        dword_4BBC24 = 1000;
        dword_4BBCD0 = 1000;
        dword_4BBD7C = 1000;
        dword_4BBE28 = 1000;
        sub_46F150(*((_DWORD *)&byte_4BBA58 + 2), *((_DWORD *)&byte_4BBA58 + 3), *((_DWORD *)&byte_4BBA58 + 37), 40);
        goto LABEL_65;
      case 1001:
LABEL_65:
        if ( ++*((_DWORD *)&byte_4BBA58 + 30) > 100 )
          *((_DWORD *)&byte_4BBA58 + 29) = 1010;
        v0 = *((_DWORD *)&byte_4BBA58 + 3) + (RNG_Range(-70, 70) << 9);
        v1 = RNG_Range(-128, 128);
        NPC_Create(4, *((_DWORD *)&byte_4BBA58 + 2) + (v1 << 9), v0, 0, 0, 0, 0, 256);
        break;
      case 1010:
        *((_DWORD *)&byte_4BBA58 + 27) += 4;
        if ( *((_DWORD *)&byte_4BBA58 + 27) > 1023 )
          *((_DWORD *)&byte_4BBA58 + 27) -= 1024;
        if ( *((_DWORD *)&byte_4BBA58 + 8) > 8 )
          --*((_DWORD *)&byte_4BBA58 + 8);
        if ( *((_DWORD *)&byte_4BBA58 + 9) > 0 )
          --*((_DWORD *)&byte_4BBA58 + 9);
        if ( *((_DWORD *)&byte_4BBA58 + 8) < -8 )
          ++*((_DWORD *)&byte_4BBA58 + 8);
        if ( *((_DWORD *)&byte_4BBA58 + 9) < 0 )
          ++*((_DWORD *)&byte_4BBA58 + 9);
        if ( !*((_DWORD *)&byte_4BBA58 + 9) )
        {
          *((_DWORD *)&byte_4BBA58 + 29) = 1020;
          *((_DWORD *)&byte_4BBA58 + 30) = 0;
          Explosion_(dword_4BBA60, dword_4BBA64, 1);
          Play_Sound_Effect(35, 1);
        }
        break;
      case 1020:
        if ( ++dword_4BBAD0 > 50 )
        {
          sub_4702D0(211, 1);
          *(_BYTE *)&byte_4BBA58 = 0;
          byte_4BBB04 = 0;
          byte_4BBBB0 = 0;
          byte_4BBC5C = 0;
          byte_4BBD08 = 0;
          byte_4BBDB4 = 0;
          dword_4BBACC[0] = 0;
        }
        break;
      default:
        break;
    }
  }
  else if ( v4 == 401 )
  {
    if ( ++*((_DWORD *)&byte_4BBA58 + 30) >= 100 )
    {
      if ( *((_DWORD *)&byte_4BBA58 + 30) >= 120 )
      {
        if ( *((_DWORD *)&byte_4BBA58 + 30) >= 500 )
        {
          if ( *((_DWORD *)&byte_4BBA58 + 30) >= 540 )
          {
            if ( *((_DWORD *)&byte_4BBA58 + 30) >= 560 )
            {
              *((_DWORD *)&byte_4BBA58 + 29) = 100;
              *((_DWORD *)&byte_4BBA58 + 30) = 0;
              dword_4BBC24 = 100;
              dword_4BBD7C = 100;
              goto Return;
            }
            ++*((_DWORD *)&byte_4BBA58 + 27);
          }
          else
          {
            *((_DWORD *)&byte_4BBA58 + 27) += 2;
          }
        }
        else
        {
          *((_DWORD *)&byte_4BBA58 + 27) += 4;
        }
      }
      else
      {
        *((_DWORD *)&byte_4BBA58 + 27) += 2;
      }
    }
    else
    {
      ++*((_DWORD *)&byte_4BBA58 + 27);
    }
    if ( *((_DWORD *)&byte_4BBA58 + 27) > 1023 )
      *((_DWORD *)&byte_4BBA58 + 27) -= 1024;
  }
  else if ( v4 > 100 )
  {
    if ( v4 == 110 )
    {
      if ( ++*((_DWORD *)&byte_4BBA58 + 30) >= 20 )
      {
        if ( *((_DWORD *)&byte_4BBA58 + 30) >= 60 )
        {
          if ( *((_DWORD *)&byte_4BBA58 + 30) >= *((_DWORD *)&byte_4BBA58 + 28) )
          {
            if ( *((_DWORD *)&byte_4BBA58 + 30) >= *((_DWORD *)&byte_4BBA58 + 28) + 40 )
            {
              if ( *((_DWORD *)&byte_4BBA58 + 30) >= *((_DWORD *)&byte_4BBA58 + 28) + 60 )
              {
                if ( *((_DWORD *)&byte_4BBA58 + 16) >= 300 )
                {
                  *((_DWORD *)&byte_4BBA58 + 30) = 0;
                  *((_DWORD *)&byte_4BBA58 + 29) = 100;
                  *((_DWORD *)&byte_4BBA58 + 28) = RNG_Range(400, 700);
                }
                else
                {
                  *((_DWORD *)&byte_4BBA58 + 30) = 0;
                  *((_DWORD *)&byte_4BBA58 + 29) = 400;
                  dword_4BBC24 = 400;
                  dword_4BBD7C = 400;
                }
                goto Return;
              }
              --*((_DWORD *)&byte_4BBA58 + 27);
            }
            else
            {
              *((_DWORD *)&byte_4BBA58 + 27) -= 2;
            }
          }
          else
          {
            *((_DWORD *)&byte_4BBA58 + 27) -= 4;
          }
        }
        else
        {
          *((_DWORD *)&byte_4BBA58 + 27) -= 2;
        }
      }
      else
      {
        --*((_DWORD *)&byte_4BBA58 + 27);
      }
      if ( *((_DWORD *)&byte_4BBA58 + 27) <= 0 )
        *((_DWORD *)&byte_4BBA58 + 27) += 1024;
    }
    else if ( v4 == 400 && ++*((_DWORD *)&byte_4BBA58 + 30) > 100 )
    {
      *((_DWORD *)&byte_4BBA58 + 30) = 0;
      *((_DWORD *)&byte_4BBA58 + 29) = 401;
    }
  }
  else if ( v4 == 100 )
  {
    if ( ++*((_DWORD *)&byte_4BBA58 + 30) >= 100 )
    {
      if ( *((_DWORD *)&byte_4BBA58 + 30) >= 120 )
      {
        if ( *((_DWORD *)&byte_4BBA58 + 30) >= *((_DWORD *)&byte_4BBA58 + 28) )
        {
          if ( *((_DWORD *)&byte_4BBA58 + 30) >= *((_DWORD *)&byte_4BBA58 + 28) + 40 )
          {
            if ( *((_DWORD *)&byte_4BBA58 + 30) >= *((_DWORD *)&byte_4BBA58 + 28) + 60 )
            {
              *((_DWORD *)&byte_4BBA58 + 30) = 0;
              *((_DWORD *)&byte_4BBA58 + 29) = 110;
              *((_DWORD *)&byte_4BBA58 + 28) = RNG_Range(400, 700);
              goto Return;
            }
            ++*((_DWORD *)&byte_4BBA58 + 27);
          }
          else
          {
            *((_DWORD *)&byte_4BBA58 + 27) += 2;
          }
        }
        else
        {
          *((_DWORD *)&byte_4BBA58 + 27) += 4;
        }
      }
      else
      {
        *((_DWORD *)&byte_4BBA58 + 27) += 2;
      }
    }
    else
    {
      ++*((_DWORD *)&byte_4BBA58 + 27);
    }
    if ( *((_DWORD *)&byte_4BBA58 + 27) > 1023 )
      *((_DWORD *)&byte_4BBA58 + 27) -= 1024;
  }
  else if ( v4 )
  {
    if ( v4 == 20 && --*((_DWORD *)&byte_4BBA58 + 8) <= 112 )
    {
      *((_DWORD *)&byte_4BBA58 + 29) = 100;
      *((_DWORD *)&byte_4BBA58 + 30) = 0;
      dword_4BBC24 = 100;
      dword_4BBD7C = 100;
      dword_4BBCD0 = 100;
      dword_4BBE28 = 100;
    }
  }
  else
  {
    *(_BYTE *)&byte_4BBA58 = -128;
    *((_DWORD *)&byte_4BBA58 + 19) = 0;
    *((_DWORD *)&byte_4BBA58 + 29) = 10;
    *((_DWORD *)&byte_4BBA58 + 17) = 0;
    *((_DWORD *)&byte_4BBA58 + 2) = 81920;
    *((_DWORD *)&byte_4BBA58 + 3) = 0x10000;
    *((_DWORD *)&byte_4BBA58 + 35) = 4096;
    *((_DWORD *)&byte_4BBA58 + 36) = 4096;
    *((_DWORD *)&byte_4BBA58 + 37) = 0x10000;
    *((_DWORD *)&byte_4BBA58 + 38) = 4096;
    *((_DWORD *)&byte_4BBA58 + 14) = 54;
    *((_DWORD *)&byte_4BBA58 + 31) = 4096;
    *((_DWORD *)&byte_4BBA58 + 32) = 4096;
    *((_DWORD *)&byte_4BBA58 + 33) = 4096;
    *((_DWORD *)&byte_4BBA58 + 34) = 4096;
    *((_WORD *)&byte_4BBA58 + 40) = 8;
    *((_WORD *)&byte_4BBA58 + 40) |= 0x200u;
    *((_DWORD *)&byte_4BBA58 + 18) = 3;
    *((_DWORD *)&byte_4BBA58 + 41) = 0;
    *((_DWORD *)&byte_4BBA58 + 12) = 1000;
    *((_DWORD *)&byte_4BBA58 + 16) = 500;
    *((_DWORD *)&byte_4BBA58 + 28) = RNG_Range(700, 1200);
    *((_DWORD *)&byte_4BBA58 + 8) = 180;
    *((_DWORD *)&byte_4BBA58 + 9) = 61;
    dword_4BBC44 = 10240;
    dword_4BBC3C = 10240;
    dword_4BBC40 = 0x2000;
    dword_4BBC48 = 0x2000;
    dword_4BBC34 = 6144;
    dword_4BBC2C = 6144;
    dword_4BBC30 = 5120;
    dword_4BBC38 = 5120;
    word_4BBC00 = 12;
    dword_4BBC58 = (int)&byte_4BBC5C;
    byte_4BBBB0 = -112;
    dword_4BBC54 = 10;
    byte_4BBC5C = -128;
    dword_4BBCF0 = 10240;
    dword_4BBCE8 = 10240;
    dword_4BBCEC = 10240;
    dword_4BBCF4 = 10240;
    dword_4BBCE0 = 6144;
    dword_4BBCD8 = 6144;
    dword_4BBCDC = 1024;
    dword_4BBCE4 = 0x2000;
    word_4BBCAC = 8;
    dword_4BBD04 = (int)&byte_4BBA58;
    dword_4BBD00 = 10;
    qmemcpy(&byte_4BBD08, &byte_4BBBB0, 0xACu);
    dword_4BBDB0 = (int)&byte_4BBDB4;
    qmemcpy(&byte_4BBDB4, &byte_4BBC5C, 0xACu);
    dword_4BBE20 = 128;
  }
Return:
  sub_47DF10((int)&byte_4BBBB0);
  sub_47DAA0((int)&byte_4BBC5C);
  sub_47DF10((int)&byte_4BBD08);
  sub_47DAA0((int)&byte_4BBDB4);
  v2 = (char *)&byte_4BBA58 + 84;
  *(_DWORD *)v2 = 0;
  *((_DWORD *)v2 + 1) = 0;
  result = 0;
  *((_DWORD *)v2 + 2) = 0;
  *((_DWORD *)v2 + 3) = 0;
  return result;
}
// 4BBACC: using guessed type int dword_4BBACC[];
// 4BBAD0: using guessed type int dword_4BBAD0;
// 4BBB04: using guessed type char byte_4BBB04;
// 4BBBB0: using guessed type char byte_4BBBB0;
// 4BBC00: using guessed type __int16 word_4BBC00;
// 4BBC24: using guessed type int dword_4BBC24;
// 4BBC2C: using guessed type int dword_4BBC2C;
// 4BBC30: using guessed type int dword_4BBC30;
// 4BBC34: using guessed type int dword_4BBC34;
// 4BBC38: using guessed type int dword_4BBC38;
// 4BBC3C: using guessed type int dword_4BBC3C;
// 4BBC40: using guessed type int dword_4BBC40;
// 4BBC44: using guessed type int dword_4BBC44;
// 4BBC48: using guessed type int dword_4BBC48;
// 4BBC54: using guessed type int dword_4BBC54;
// 4BBC58: using guessed type int dword_4BBC58;
// 4BBC5C: using guessed type char byte_4BBC5C;
// 4BBCAC: using guessed type __int16 word_4BBCAC;
// 4BBCD0: using guessed type int dword_4BBCD0;
// 4BBCD8: using guessed type int dword_4BBCD8;
// 4BBCDC: using guessed type int dword_4BBCDC;
// 4BBCE0: using guessed type int dword_4BBCE0;
// 4BBCE4: using guessed type int dword_4BBCE4;
// 4BBCE8: using guessed type int dword_4BBCE8;
// 4BBCEC: using guessed type int dword_4BBCEC;
// 4BBCF0: using guessed type int dword_4BBCF0;
// 4BBCF4: using guessed type int dword_4BBCF4;
// 4BBD00: using guessed type int dword_4BBD00;
// 4BBD04: using guessed type int dword_4BBD04;
// 4BBD08: using guessed type char byte_4BBD08;
// 4BBD7C: using guessed type int dword_4BBD7C;
// 4BBDB0: using guessed type int dword_4BBDB0;
// 4BBDB4: using guessed type char byte_4BBDB4;
// 4BBE20: using guessed type int dword_4BBE20;
// 4BBE28: using guessed type int dword_4BBE28;

//----- (0047DAA0) --------------------------------------------------------
int __cdecl sub_47DAA0(int a1)
{
  __int64 v1; // rax@9
  int v2; // esi@9
  int v3; // esi@9
  __int64 v4; // rax@14
  int v5; // esi@14
  int v6; // esi@14
  __int64 v7; // rax@14
  __int64 v8; // rax@14
  __int64 v9; // rax@19
  int v10; // esi@19
  int v11; // esi@19
  __int64 v12; // rax@19
  __int64 v13; // rax@19
  int *v14; // eax@27
  int v15; // ecx@27
  int result; // eax@27
  int *v17; // eax@28
  int v18; // ecx@28
  signed int v19; // [sp+4h] [bp-68h]@1
  int v20; // [sp+8h] [bp-64h]@1
  int v21; // [sp+Ch] [bp-60h]@1
  int v22; // [sp+10h] [bp-5Ch]@1
  int v23; // [sp+14h] [bp-58h]@1
  int v24; // [sp+18h] [bp-54h]@1
  int v25; // [sp+1Ch] [bp-50h]@1
  int v26; // [sp+20h] [bp-4Ch]@1
  int v27; // [sp+24h] [bp-48h]@1
  int v28; // [sp+28h] [bp-44h]@1
  int v29; // [sp+2Ch] [bp-40h]@1
  int v30; // [sp+30h] [bp-3Ch]@1
  int v31; // [sp+34h] [bp-38h]@1
  int v32; // [sp+38h] [bp-34h]@1
  int v33; // [sp+3Ch] [bp-30h]@1
  int v34; // [sp+40h] [bp-2Ch]@1
  int v35; // [sp+44h] [bp-28h]@1
  int v36; // [sp+48h] [bp-24h]@1
  int v37; // [sp+4Ch] [bp-20h]@1
  int v38; // [sp+50h] [bp-1Ch]@1
  int v39; // [sp+54h] [bp-18h]@1
  int v40; // [sp+58h] [bp-14h]@1
  int v41; // [sp+5Ch] [bp-10h]@1
  int v42; // [sp+60h] [bp-Ch]@1
  int v43; // [sp+64h] [bp-8h]@1
  char v44; // [sp+6Bh] [bp-1h]@9

  v32 = 0;
  v33 = 0;
  v34 = 40;
  v35 = 40;
  v36 = 40;
  v37 = 0;
  v38 = 80;
  v39 = 40;
  v40 = 80;
  v41 = 0;
  v42 = 120;
  v43 = 40;
  v20 = 0;
  v21 = 40;
  v22 = 40;
  v23 = 80;
  v24 = 40;
  v25 = 40;
  v26 = 80;
  v27 = 80;
  v28 = 80;
  v29 = 40;
  v30 = 120;
  v31 = 80;
  v19 = *(_DWORD *)(a1 + 116);
  if ( v19 > 100 )
  {
    if ( v19 == 1000 )
    {
      *(_DWORD *)(a1 + 116) = 1001;
      *(_WORD *)(a1 + 80) &= 0xFFDFu;
    }
    else if ( v19 != 1001 )
    {
      goto LABEL_22;
    }
    v9 = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 108);
    v44 = *(_BYTE *)(a1 + 108) + (((BYTE4(v9) & 3) + (signed int)v9) >> 2);
    v10 = *(_DWORD *)(a1 + 168);
    *(_DWORD *)(a1 + 32) = *(_DWORD *)(v10 + 8) + *(_DWORD *)(*(_DWORD *)(a1 + 168) + 32) * COS_function(v44);
    v11 = *(_DWORD *)(a1 + 168);
    *(_DWORD *)(a1 + 36) = *(_DWORD *)(v11 + 12) + *(_DWORD *)(*(_DWORD *)(a1 + 168) + 36) * SIN_function(v44);
    v12 = *(_DWORD *)(a1 + 32) - *(_DWORD *)(a1 + 8);
    *(_DWORD *)(a1 + 8) += ((BYTE4(v12) & 7) + (signed int)v12) >> 3;
    v13 = *(_DWORD *)(a1 + 36) - *(_DWORD *)(a1 + 12);
    *(_DWORD *)(a1 + 12) += ((BYTE4(v13) & 7) + (signed int)v13) >> 3;
    if ( *(_DWORD *)(a1 + 8) <= *(_DWORD *)(*(_DWORD *)(a1 + 168) + 8) )
      *(_DWORD *)(a1 + 76) = 2;
    else
      *(_DWORD *)(a1 + 76) = 0;
  }
  else if ( v19 == 100 )
  {
    v4 = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 108);
    v44 = *(_BYTE *)(a1 + 108) + (((BYTE4(v4) & 3) + (signed int)v4) >> 2);
    v5 = *(_DWORD *)(a1 + 168);
    *(_DWORD *)(a1 + 32) = *(_DWORD *)(v5 + 8) + *(_DWORD *)(*(_DWORD *)(a1 + 168) + 32) * COS_function(v44);
    v6 = *(_DWORD *)(a1 + 168);
    *(_DWORD *)(a1 + 36) = *(_DWORD *)(v6 + 12) + *(_DWORD *)(*(_DWORD *)(a1 + 168) + 36) * SIN_function(v44);
    v7 = *(_DWORD *)(a1 + 32) - *(_DWORD *)(a1 + 8);
    *(_DWORD *)(a1 + 8) += ((BYTE4(v7) & 7) + (signed int)v7) >> 3;
    v8 = *(_DWORD *)(a1 + 36) - *(_DWORD *)(a1 + 12);
    *(_DWORD *)(a1 + 12) += ((BYTE4(v8) & 7) + (signed int)v8) >> 3;
    if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
      *(_DWORD *)(a1 + 76) = 2;
    else
      *(_DWORD *)(a1 + 76) = 0;
  }
  else
  {
    if ( v19 )
    {
      if ( v19 != 10 )
        goto LABEL_22;
    }
    else
    {
      v1 = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 108);
      v44 = *(_BYTE *)(a1 + 108) + (((BYTE4(v1) & 3) + (signed int)v1) >> 2);
      *(_DWORD *)(a1 + 116) = 10;
      v2 = *(_DWORD *)(a1 + 168);
      *(_DWORD *)(a1 + 8) += *(_DWORD *)(*(_DWORD *)(a1 + 168) + 32) * COS_function(v44) + *(_DWORD *)(v2 + 8);
      v3 = *(_DWORD *)(a1 + 168);
      *(_DWORD *)(a1 + 12) += *(_DWORD *)(*(_DWORD *)(a1 + 168) + 36) * SIN_function(v44) + *(_DWORD *)(v3 + 12);
    }
    if ( *(_DWORD *)(a1 + 8) <= Quote_X_Position )
      *(_DWORD *)(a1 + 76) = 2;
    else
      *(_DWORD *)(a1 + 76) = 0;
  }
LABEL_22:
  if ( ++*(_DWORD *)(a1 + 100) > 2 )
  {
    *(_DWORD *)(a1 + 100) = 0;
    ++*(_DWORD *)(a1 + 104);
  }
  if ( *(_DWORD *)(a1 + 104) > 2 )
    *(_DWORD *)(a1 + 104) = 0;
  if ( *(_DWORD *)(a1 + 76) )
  {
    v17 = &v20 + 4 * *(_DWORD *)(a1 + 104);
    v18 = a1 + 84;
    *(_DWORD *)v18 = *v17;
    *(_DWORD *)(v18 + 4) = v17[1];
    *(_DWORD *)(v18 + 8) = v17[2];
    result = v17[3];
    *(_DWORD *)(v18 + 12) = result;
  }
  else
  {
    v14 = &v32 + 4 * *(_DWORD *)(a1 + 104);
    v15 = a1 + 84;
    *(_DWORD *)v15 = *v14;
    *(_DWORD *)(v15 + 4) = v14[1];
    *(_DWORD *)(v15 + 8) = v14[2];
    result = v14[3];
    *(_DWORD *)(v15 + 12) = result;
  }
  return result;
}

//----- (0047DF10) --------------------------------------------------------
int __cdecl sub_47DF10(int a1)
{
  int *v1; // edx@57
  int result; // eax@57
  int *v3; // edx@58
  signed int v4; // [sp+0h] [bp-98h]@1
  int Y_Velocity; // [sp+4h] [bp-94h]@30
  int Y_Velocitya; // [sp+4h] [bp-94h]@47
  int v7; // [sp+8h] [bp-90h]@1
  int v8; // [sp+Ch] [bp-8Ch]@1
  int v9; // [sp+10h] [bp-88h]@1
  int v10; // [sp+14h] [bp-84h]@1
  int v11; // [sp+18h] [bp-80h]@1
  int v12; // [sp+1Ch] [bp-7Ch]@1
  int v13; // [sp+20h] [bp-78h]@1
  int v14; // [sp+24h] [bp-74h]@1
  int v15; // [sp+28h] [bp-70h]@1
  int v16; // [sp+2Ch] [bp-6Ch]@1
  int v17; // [sp+30h] [bp-68h]@1
  int v18; // [sp+34h] [bp-64h]@1
  int v19; // [sp+38h] [bp-60h]@1
  int v20; // [sp+3Ch] [bp-5Ch]@1
  int v21; // [sp+40h] [bp-58h]@1
  int v22; // [sp+44h] [bp-54h]@1
  int X_Velocity; // [sp+4Ch] [bp-4Ch]@30
  int v24; // [sp+50h] [bp-48h]@1
  int v25; // [sp+54h] [bp-44h]@1
  int v26; // [sp+58h] [bp-40h]@1
  int v27; // [sp+5Ch] [bp-3Ch]@1
  int v28; // [sp+60h] [bp-38h]@1
  int v29; // [sp+64h] [bp-34h]@1
  int v30; // [sp+68h] [bp-30h]@1
  int v31; // [sp+6Ch] [bp-2Ch]@1
  int v32; // [sp+70h] [bp-28h]@1
  int v33; // [sp+74h] [bp-24h]@1
  int v34; // [sp+78h] [bp-20h]@1
  int v35; // [sp+7Ch] [bp-1Ch]@1
  int v36; // [sp+80h] [bp-18h]@1
  int v37; // [sp+84h] [bp-14h]@1
  int v38; // [sp+88h] [bp-10h]@1
  int v39; // [sp+8Ch] [bp-Ch]@1
  unsigned __int8 v40; // [sp+97h] [bp-1h]@30

  v24 = 0;
  v25 = 80;
  v26 = 40;
  v27 = 112;
  v28 = 40;
  v29 = 80;
  v30 = 80;
  v31 = 112;
  v32 = 80;
  v33 = 80;
  v34 = 120;
  v35 = 112;
  v36 = 120;
  v37 = 80;
  v38 = 160;
  v39 = 112;
  v7 = 0;
  v8 = 112;
  v9 = 40;
  v10 = 144;
  v11 = 40;
  v12 = 112;
  v13 = 80;
  v14 = 144;
  v15 = 80;
  v16 = 112;
  v17 = 120;
  v18 = 144;
  v19 = 120;
  v20 = 112;
  v21 = 160;
  v22 = 144;
  v4 = *(_DWORD *)(a1 + 116);
  if ( v4 <= 220 )
  {
    if ( v4 == 220 )
    {
      if ( ++*(_DWORD *)(a1 + 120) % 8 == 1 )
      {
        v40 = Angle_Calculator(*(_DWORD *)(a1 + 8) - Quote_X_Position, *(_DWORD *)(a1 + 12) - Quote_Y_Position);
        v40 += RNG_Range(-6, 6);
        Y_Velocity = SIN_function(v40);
        X_Velocity = COS_function(v40);
        if ( *(_DWORD *)(a1 + 76) )
          NPC_Create(202, *(_DWORD *)(a1 + 8) + 4096, *(_DWORD *)(a1 + 12), X_Velocity, Y_Velocity, 0, 0, 256);
        else
          NPC_Create(202, *(_DWORD *)(a1 + 8) - 4096, *(_DWORD *)(a1 + 12), X_Velocity, Y_Velocity, 0, 0, 256);
        Play_Sound_Effect(33, 1);
      }
      if ( *(_DWORD *)(a1 + 120) > 50 )
        *(_DWORD *)(a1 + 116) = 200;
    }
    else
    {
      switch ( v4 )
      {
        case 0:
          *(_DWORD *)(a1 + 116) = 1;
          goto LABEL_53;
        case 100:
          *(_DWORD *)(a1 + 116) = 200;
          goto LABEL_13;
        case 200:
LABEL_13:
          *(_WORD *)(a1 + 80) &= 0xFFDFu;
          *(_DWORD *)(a1 + 104) = 0;
          *(_DWORD *)(a1 + 124) = 0x2000;
          *(_DWORD *)(a1 + 116) = 201;
          *(_DWORD *)(a1 + 108) = RNG_Range(100, 200);
          goto LABEL_14;
        case 201:
LABEL_14:
          if ( *(_DWORD *)(a1 + 108) )
          {
            --*(_DWORD *)(a1 + 108);
          }
          else
          {
            *(_DWORD *)(a1 + 116) = 210;
            *(_DWORD *)(a1 + 120) = 0;
            *(_DWORD *)(a1 + 112) = 0;
          }
          break;
        case 210:
          if ( ++*(_DWORD *)(a1 + 120) == 3 )
            *(_DWORD *)(a1 + 104) = 1;
          if ( *(_DWORD *)(a1 + 120) == 6 )
          {
            *(_DWORD *)(a1 + 104) = 2;
            *(_DWORD *)(a1 + 124) = 4096;
            *(_WORD *)(a1 + 80) |= 0x20u;
            *(_DWORD *)(a1 + 112) = 0;
          }
          if ( *(_DWORD *)(a1 + 120) > 150 )
          {
            *(_DWORD *)(a1 + 116) = 220;
            *(_DWORD *)(a1 + 120) = 0;
          }
          if ( *(_BYTE *)(a1 + 156) )
            ++*(_DWORD *)(a1 + 112);
          if ( *(_DWORD *)(a1 + 112) > 10 )
          {
            Play_Sound_Effect(51, 1);
            sub_46F150(*(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), *(_DWORD *)(a1 + 148), 4);
            *(_DWORD *)(a1 + 116) = 300;
            *(_DWORD *)(a1 + 120) = 0;
            *(_DWORD *)(a1 + 104) = 3;
            *(_DWORD *)(a1 + 124) = 0x2000;
          }
          break;
        default:
          goto LABEL_53;
      }
    }
    goto LABEL_53;
  }
  if ( v4 > 401 )
  {
    if ( v4 == 1000 )
    {
      *(_WORD *)(a1 + 80) &= 0xFFDFu;
      *(_DWORD *)(a1 + 104) = 3;
    }
  }
  else
  {
    if ( v4 == 401 )
    {
LABEL_41:
      if ( ++*(_DWORD *)(a1 + 120) == 3 )
        *(_DWORD *)(a1 + 104) = 1;
      if ( *(_DWORD *)(a1 + 120) == 6 )
      {
        *(_DWORD *)(a1 + 104) = 2;
        *(_DWORD *)(a1 + 124) = 4096;
        *(_WORD *)(a1 + 80) |= 0x20u;
        *(_DWORD *)(a1 + 112) = 0;
      }
      if ( *(_DWORD *)(a1 + 120) > 20 && *(_DWORD *)(a1 + 120) % 32 == 1 )
      {
        v40 = Angle_Calculator(*(_DWORD *)(a1 + 8) - Quote_X_Position, *(_DWORD *)(a1 + 12) - Quote_Y_Position);
        v40 += RNG_Range(-6, 6);
        Y_Velocitya = SIN_function(v40);
        X_Velocity = COS_function(v40);
        if ( *(_DWORD *)(a1 + 76) )
          NPC_Create(202, *(_DWORD *)(a1 + 8) + 4096, *(_DWORD *)(a1 + 12), X_Velocity, Y_Velocitya, 0, 0, 256);
        else
          NPC_Create(202, *(_DWORD *)(a1 + 8) - 4096, *(_DWORD *)(a1 + 12), X_Velocity, Y_Velocitya, 0, 0, 256);
        Play_Sound_Effect(33, 1);
      }
      goto LABEL_53;
    }
    if ( v4 != 300 )
    {
      if ( v4 != 400 )
        goto LABEL_53;
      *(_DWORD *)(a1 + 116) = 401;
      *(_DWORD *)(a1 + 120) = 0;
      *(_DWORD *)(a1 + 104) = 0;
      *(_DWORD *)(a1 + 124) = 0x2000;
      *(_WORD *)(a1 + 80) &= 0xFFDFu;
      goto LABEL_41;
    }
    if ( ++*(_DWORD *)(a1 + 120) > 100 )
      *(_DWORD *)(a1 + 116) = 200;
  }
LABEL_53:
  *(_DWORD *)(a1 + 76) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 76);
  if ( *(_DWORD *)(a1 + 76) )
    *(_DWORD *)(a1 + 8) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 8) + 2048;
  else
    *(_DWORD *)(a1 + 8) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 8) - 2048;
  *(_DWORD *)(a1 + 12) = *(_DWORD *)(*(_DWORD *)(a1 + 168) + 12) - 4096;
  if ( *(_DWORD *)(a1 + 76) )
  {
    v3 = &v7 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v3;
    *(_DWORD *)(result + 4) = v3[1];
    *(_DWORD *)(result + 8) = v3[2];
    *(_DWORD *)(result + 12) = v3[3];
  }
  else
  {
    v1 = &v24 + 4 * *(_DWORD *)(a1 + 104);
    result = a1 + 84;
    *(_DWORD *)result = *v1;
    *(_DWORD *)(result + 4) = v1[1];
    *(_DWORD *)(result + 8) = v1[2];
    *(_DWORD *)(result + 12) = v1[3];
  }
  return result;
}

//----- (0047E6F0) --------------------------------------------------------
// Boss 3: Monster X
// Monster X's AI.
void *Boss_3_Monster_X()
{
  int v0; // ST14_4@119
  int v1; // eax@119
  __int64 v2; // rax@127
  void *result; // eax@135
  signed int v4; // [sp+8h] [bp-Ch]@1
  signed int i; // [sp+10h] [bp-4h]@123

  v4 = *((_DWORD *)&byte_4BBA58 + 29);
  if ( v4 > 401 )
  {
    if ( v4 > 601 )
    {
      if ( v4 > 1000 )
      {
        if ( v4 == 1001 )
        {
          sub_40F310(40);
          if ( ++*((_DWORD *)&byte_4BBA58 + 30) > 50 )
          {
            for ( i = 0; i < 20; ++i )
              *((_BYTE *)&byte_4BBA58 + 172 * i) = 0;
            sub_4702D0(158, 1);
            NPC_Create(159, *((_DWORD *)&byte_4BBA58 + 2), *((_DWORD *)&byte_4BBA58 + 3) - 12288, 0, 0, 0, 0, 0);
          }
        }
      }
      else if ( v4 == 1000 )
      {
        sub_40F310(2);
        if ( !(++*((_DWORD *)&byte_4BBA58 + 30) % 8) )
          Play_Sound_Effect(52, 1);
        v0 = *((_DWORD *)&byte_4BBA58 + 3) + (RNG_Range(-64, 64) << 9);
        v1 = RNG_Range(-72, 72);
        sub_46F150(*((_DWORD *)&byte_4BBA58 + 2) + (v1 << 9), v0, 1, 1);
        if ( *((_DWORD *)&byte_4BBA58 + 30) > 100 )
        {
          *((_DWORD *)&byte_4BBA58 + 30) = 0;
          *((_DWORD *)&byte_4BBA58 + 29) = 1001;
          Explosion_(*((_DWORD *)&byte_4BBA58 + 2), *((_DWORD *)&byte_4BBA58 + 3), 1);
          Play_Sound_Effect(35, 1);
        }
      }
      else
      {
        if ( v4 == 602 )
        {
          *((_DWORD *)&byte_4BBA58 + 29) = 603;
          *((_DWORD *)&byte_4BBA58 + 30) = 0;
          *((_DWORD *)&byte_4BBA58 + 27) = 0;
          dword_4BBB78 = 40;
          dword_4BBC24 = 40;
        }
        else if ( v4 != 603 )
        {
          goto LABEL_127;
        }
        if ( ++*((_DWORD *)&byte_4BBA58 + 30) > 50 )
        {
          if ( *((_DWORD *)&byte_4BBA58 + 2) <= Quote_X_Position )
            *((_DWORD *)&byte_4BBA58 + 29) = 200;
          else
            *((_DWORD *)&byte_4BBA58 + 29) = 100;
        }
      }
    }
    else if ( v4 == 601 )
    {
LABEL_107:
      ++*((_DWORD *)&byte_4BBA58 + 30);
      if ( *((_DWORD *)&byte_4BBA58 + 16) < *((_DWORD *)&byte_4BBA58 + 28) - 200 || *((_DWORD *)&byte_4BBA58 + 30) > 300 )
      {
        *((_DWORD *)&byte_4BBA58 + 29) = 602;
        *((_DWORD *)&byte_4BBA58 + 30) = 0;
      }
    }
    else
    {
      switch ( v4 )
      {
        case 500:
          *((_DWORD *)&byte_4BBA58 + 29) = 501;
          *((_DWORD *)&byte_4BBA58 + 30) = 0;
          dword_4BBB78 = 10;
          dword_4BBC24 = 10;
          goto LABEL_92;
        case 501:
LABEL_92:
          if ( ++*((_DWORD *)&byte_4BBA58 + 30) > 300 )
          {
            *((_DWORD *)&byte_4BBA58 + 29) = 502;
            *((_DWORD *)&byte_4BBA58 + 30) = 0;
          }
          if ( !byte_4BBC5C && !byte_4BBD08 && !byte_4BBDB4 && !byte_4BBE60 )
          {
            *((_DWORD *)&byte_4BBA58 + 29) = 502;
            *((_DWORD *)&byte_4BBA58 + 30) = 0;
          }
          break;
        case 502:
          *((_DWORD *)&byte_4BBA58 + 29) = 503;
          *((_DWORD *)&byte_4BBA58 + 30) = 0;
          *((_DWORD *)&byte_4BBA58 + 27) = 0;
          dword_4BBB78 = 20;
          dword_4BBC24 = 20;
          goto LABEL_101;
        case 503:
LABEL_101:
          if ( ++*((_DWORD *)&byte_4BBA58 + 30) > 50 )
          {
            if ( *((_DWORD *)&byte_4BBA58 + 2) <= Quote_X_Position )
              *((_DWORD *)&byte_4BBA58 + 29) = 200;
            else
              *((_DWORD *)&byte_4BBA58 + 29) = 100;
          }
          break;
        case 600:
          *((_DWORD *)&byte_4BBA58 + 29) = 601;
          *((_DWORD *)&byte_4BBA58 + 30) = 0;
          *((_DWORD *)&byte_4BBA58 + 28) = *((_DWORD *)&byte_4BBA58 + 16);
          dword_4BBB78 = 30;
          dword_4BBC24 = 30;
          goto LABEL_107;
        default:
          break;
      }
    }
  }
  else if ( v4 == 401 )
  {
LABEL_75:
    if ( ++*((_DWORD *)&byte_4BBA58 + 30) == 4 )
      dword_4BC0D8 = 400;
    if ( *((_DWORD *)&byte_4BBA58 + 30) == 8 )
      dword_4BC184 = 400;
    if ( *((_DWORD *)&byte_4BBA58 + 30) == 10 )
      dword_4BC230 = 400;
    if ( *((_DWORD *)&byte_4BBA58 + 30) == 12 )
      dword_4BC2DC = 400;
    if ( *((_DWORD *)&byte_4BBA58 + 30) > 50 )
    {
      if ( byte_4BBC5C || byte_4BBD08 || byte_4BBDB4 || byte_4BBE60 )
        *((_DWORD *)&byte_4BBA58 + 29) = 500;
      else
        *((_DWORD *)&byte_4BBA58 + 29) = 600;
    }
  }
  else if ( v4 > 101 )
  {
    switch ( v4 )
    {
      case 200:
        *((_DWORD *)&byte_4BBA58 + 30) = 0;
        *((_DWORD *)&byte_4BBA58 + 29) = 201;
        ++*((_DWORD *)&byte_4BBA58 + 27);
        goto LABEL_42;
      case 201:
LABEL_42:
        if ( ++*((_DWORD *)&byte_4BBA58 + 30) == 4 )
          dword_4BC0D8 = 200;
        if ( *((_DWORD *)&byte_4BBA58 + 30) == 8 )
          dword_4BC184 = 200;
        if ( *((_DWORD *)&byte_4BBA58 + 30) == 10 )
          dword_4BC230 = 200;
        if ( *((_DWORD *)&byte_4BBA58 + 30) == 12 )
          dword_4BC2DC = 200;
        if ( *((_DWORD *)&byte_4BBA58 + 30) > 120 && *((_DWORD *)&byte_4BBA58 + 27) > 2 )
          *((_DWORD *)&byte_4BBA58 + 29) = 400;
        if ( *((_DWORD *)&byte_4BBA58 + 30) > 121 && Quote_X_Position < *((_DWORD *)&byte_4BBA58 + 2) )
          *((_DWORD *)&byte_4BBA58 + 29) = 100;
        break;
      case 300:
        *((_DWORD *)&byte_4BBA58 + 30) = 0;
        *((_DWORD *)&byte_4BBA58 + 29) = 301;
        goto LABEL_58;
      case 301:
LABEL_58:
        if ( ++*((_DWORD *)&byte_4BBA58 + 30) == 4 )
          dword_4BC0D8 = 300;
        if ( *((_DWORD *)&byte_4BBA58 + 30) == 8 )
          dword_4BC184 = 300;
        if ( *((_DWORD *)&byte_4BBA58 + 30) == 10 )
          dword_4BC230 = 300;
        if ( *((_DWORD *)&byte_4BBA58 + 30) == 12 )
          dword_4BC2DC = 300;
        if ( *((_DWORD *)&byte_4BBA58 + 30) > 50 )
        {
          if ( byte_4BBC5C || byte_4BBD08 || byte_4BBDB4 || byte_4BBE60 )
            *((_DWORD *)&byte_4BBA58 + 29) = 500;
          else
            *((_DWORD *)&byte_4BBA58 + 29) = 600;
        }
        break;
      case 400:
        *((_DWORD *)&byte_4BBA58 + 30) = 0;
        *((_DWORD *)&byte_4BBA58 + 29) = 401;
        goto LABEL_75;
      default:
        break;
    }
  }
  else if ( v4 == 101 )
  {
LABEL_26:
    if ( ++*((_DWORD *)&byte_4BBA58 + 30) == 4 )
      dword_4BC0D8 = 100;
    if ( *((_DWORD *)&byte_4BBA58 + 30) == 8 )
      dword_4BC184 = 100;
    if ( *((_DWORD *)&byte_4BBA58 + 30) == 10 )
      dword_4BC230 = 100;
    if ( *((_DWORD *)&byte_4BBA58 + 30) == 12 )
      dword_4BC2DC = 100;
    if ( *((_DWORD *)&byte_4BBA58 + 30) > 120 && *((_DWORD *)&byte_4BBA58 + 27) > 2 )
      *((_DWORD *)&byte_4BBA58 + 29) = 300;
    if ( *((_DWORD *)&byte_4BBA58 + 30) > 121 && Quote_X_Position > *((_DWORD *)&byte_4BBA58 + 2) )
      *((_DWORD *)&byte_4BBA58 + 29) = 200;
  }
  else
  {
    switch ( v4 )
    {
      case 0:
        *((_DWORD *)&byte_4BBA58 + 16) = 1;
        *((_DWORD *)&byte_4BBA58 + 2) = -163840;
        break;
      case 1:
        *((_DWORD *)&byte_4BBA58 + 16) = 700;
        *((_DWORD *)&byte_4BBA58 + 17) = 1;
        *((_DWORD *)&byte_4BBA58 + 29) = 1;
        *((_DWORD *)&byte_4BBA58 + 2) = 0x100000;
        *((_DWORD *)&byte_4BBA58 + 3) = 102400;
        *((_DWORD *)&byte_4BBA58 + 14) = 54;
        *((_DWORD *)&byte_4BBA58 + 31) = 12288;
        *((_DWORD *)&byte_4BBA58 + 32) = 12288;
        *((_DWORD *)&byte_4BBA58 + 33) = 12288;
        *((_DWORD *)&byte_4BBA58 + 34) = 12288;
        *((_WORD *)&byte_4BBA58 + 40) = -32248;
        *((_DWORD *)&byte_4BBA58 + 18) = 3;
        *((_DWORD *)&byte_4BBA58 + 12) = 1000;
        *((_DWORD *)&byte_4BBA58 + 26) = 0;
        byte_4BBB04 = -128;
        dword_4BBB4C = 3;
        dword_4BBB50 = 0;
        dword_4BBB90 = 12288;
        dword_4BBB94 = 12288;
        dword_4BBB98 = 12288;
        dword_4BBB9C = 12288;
        word_4BBB54 = 8;
        qmemcpy(&byte_4BBBB0, &byte_4BBB04, 0xACu);
        dword_4BBBFC = 2;
        byte_4BBC5C = -128;
        dword_4BBC9C = 60;
        dword_4BBC94 = 54;
        dword_4BBC98 = 71;
        dword_4BBCA4 = 2;
        dword_4BBCE8 = 4096;
        dword_4BBCEC = 4096;
        dword_4BBCF0 = 4096;
        dword_4BBCF4 = 4096;
        dword_4BBCD8 = 2560;
        dword_4BBCE0 = 2560;
        dword_4BBCDC = 2560;
        dword_4BBCE4 = 2560;
        word_4BBCAC = 8;
        dword_4BBC7C = 0;
        qmemcpy(&byte_4BBD08, &byte_4BBC5C, 0xACu);
        dword_4BBD28 = 1;
        qmemcpy(&byte_4BBDB4, &byte_4BBC5C, 0xACu);
        dword_4BBDD4 = 2;
        dword_4BBDF4 = 100;
        qmemcpy(&byte_4BBE60, &byte_4BBC5C, 0xACu);
        dword_4BBE80 = 3;
        dword_4BBEA0 = 100;
        byte_4BBF0C = -128;
        dword_4BBF14 = 0x100000;
        dword_4BBF18 = 102400;
        dword_4BBF98 = 26624;
        dword_4BBF9C = 12288;
        dword_4BBFA0 = 26624;
        dword_4BBFA4 = 12288;
        dword_4BBF44 = 52;
        dword_4BBF88 = 4096;
        dword_4BBF8C = 12288;
        dword_4BBF90 = 4096;
        dword_4BBF94 = 0x2000;
        word_4BBF5C = 8;
        dword_4BBF54 = 3;
        dword_4BBF74 = 0;
        byte_4BC064 = -128;
        dword_4BC0D8 = 0;
        dword_4BC0B0 = 1;
        dword_4BC06C = 1015808;
        dword_4BC070 = 73728;
        dword_4BC0F0 = 18432;
        dword_4BC0F4 = 4096;
        dword_4BC0F8 = 18432;
        dword_4BC0FC = 12288;
        dword_4BC09C = 52;
        dword_4BC0E0 = 14336;
        dword_4BC0E4 = 4096;
        dword_4BC0E8 = 14336;
        dword_4BC0EC = 0x2000;
        word_4BC0B4 = 141;
        dword_4BC0AC = 3;
        qmemcpy(&unk_4BC110, &byte_4BC064, 0xACu);
        dword_4BC118 = 1081344;
        qmemcpy(&byte_4BC1BC, &byte_4BC064, 0xACu);
        dword_4BC208 = 3;
        dword_4BC1C4 = 1015808;
        dword_4BC1C8 = 0x20000;
        dword_4BC24C = 12288;
        dword_4BC254 = 4096;
        dword_4BC23C = 0x2000;
        dword_4BC244 = 4096;
        qmemcpy(&unk_4BC268, &byte_4BC1BC, 0xACu);
        dword_4BC270 = 1081344;
        qmemcpy(&byte_4BC314, &byte_4BC064, 0xACu);
        byte_4BC314 = -128;
        dword_4BC3A4 = 0x2000;
        dword_4BC3AC = 0x2000;
        dword_4BC3A0 = 15360;
        dword_4BC3A8 = 21504;
        dword_4BC380 = 9;
        dword_4BC37C = 0;
        word_4BC364 = 8;
        qmemcpy(&unk_4BC3C0, &byte_4BC314, 0xACu);
        dword_4BC44C = 21504;
        dword_4BC454 = 15360;
        dword_4BC42C = 10;
        dword_4BC428 = 1;
        word_4BC410 = 8;
        qmemcpy(&unk_4BC46C, &byte_4BC314, 0xACu);
        dword_4BC4FC = 0x2000;
        dword_4BC504 = 0x2000;
        dword_4BC4D8 = 11;
        dword_4BC4D4 = 2;
        word_4BC4BC = 8;
        qmemcpy(&unk_4BC518, &unk_4BC46C, 0xACu);
        dword_4BC5A4 = 21504;
        dword_4BC5AC = 15360;
        dword_4BC584 = 12;
        dword_4BC580 = 3;
        word_4BC568 = 8;
        *((_DWORD *)&byte_4BBA58 + 29) = 2;
        break;
      case 10:
        *((_DWORD *)&byte_4BBA58 + 29) = 11;
        *((_DWORD *)&byte_4BBA58 + 30) = 0;
        *((_DWORD *)&byte_4BBA58 + 27) = 0;
        goto LABEL_20;
      case 11:
LABEL_20:
        if ( ++*((_DWORD *)&byte_4BBA58 + 30) > 100 )
        {
          *((_DWORD *)&byte_4BBA58 + 30) = 0;
          if ( *((_DWORD *)&byte_4BBA58 + 2) <= Quote_X_Position )
            *((_DWORD *)&byte_4BBA58 + 29) = 200;
          else
            *((_DWORD *)&byte_4BBA58 + 29) = 100;
        }
        break;
      case 100:
        *((_DWORD *)&byte_4BBA58 + 30) = 0;
        *((_DWORD *)&byte_4BBA58 + 29) = 101;
        ++*((_DWORD *)&byte_4BBA58 + 27);
        goto LABEL_26;
      default:
        break;
    }
  }
LABEL_127:
  sub_47F710((int)&byte_4BC064);
  sub_47F710((int)&unk_4BC110);
  sub_47F710((int)&byte_4BC1BC);
  sub_47F710((int)&unk_4BC268);
  v2 = (dword_4BC270 + dword_4BC1C4 + dword_4BC118 + dword_4BC06C) / 4 - *((_DWORD *)&byte_4BBA58 + 2);
  *((_DWORD *)&byte_4BBA58 + 2) += ((BYTE4(v2) & 0xF) + (signed int)v2) >> 4;
  sub_4808C0((int)&byte_4BBF0C);
  sub_480090((int)&byte_4BC314);
  sub_480090((int)&unk_4BC3C0);
  sub_480090((int)&unk_4BC46C);
  sub_480090((int)&unk_4BC518);
  sub_4802A0((int)&byte_4BBB04);
  sub_4802A0((int)&byte_4BBBB0);
  if ( byte_4BBC5C )
    sub_480550((int)&byte_4BBC5C);
  if ( byte_4BBD08 )
    sub_480550((int)&byte_4BBD08);
  if ( byte_4BBDB4 )
    sub_480550((int)&byte_4BBDB4);
  if ( byte_4BBE60 )
    sub_480550((int)&byte_4BBE60);
  result = &byte_4BBA58;
  if ( !*((_DWORD *)&byte_4BBA58 + 16) && *((_DWORD *)&byte_4BBA58 + 29) < 1000 )
  {
    *((_DWORD *)&byte_4BBA58 + 29) = 1000;
    result = &byte_4BBA58;
    *((_DWORD *)&byte_4BBA58 + 30) = 0;
    *((_BYTE *)&byte_4BBA58 + 156) = -106;
    dword_4BC0D8 = 300;
    dword_4BC184 = 300;
    dword_4BC230 = 300;
    dword_4BC2DC = 300;
  }
  return result;
}
// 4BBB04: using guessed type char byte_4BBB04;
// 4BBB4C: using guessed type int dword_4BBB4C;
// 4BBB50: using guessed type int dword_4BBB50;
// 4BBB54: using guessed type __int16 word_4BBB54;
// 4BBB78: using guessed type int dword_4BBB78;
// 4BBB90: using guessed type int dword_4BBB90;
// 4BBB94: using guessed type int dword_4BBB94;
// 4BBB98: using guessed type int dword_4BBB98;
// 4BBB9C: using guessed type int dword_4BBB9C;
// 4BBBB0: using guessed type char byte_4BBBB0;
// 4BBBFC: using guessed type int dword_4BBBFC;
// 4BBC24: using guessed type int dword_4BBC24;
// 4BBC5C: using guessed type char byte_4BBC5C;
// 4BBC7C: using guessed type int dword_4BBC7C;
// 4BBC94: using guessed type int dword_4BBC94;
// 4BBC98: using guessed type int dword_4BBC98;
// 4BBC9C: using guessed type int dword_4BBC9C;
// 4BBCA4: using guessed type int dword_4BBCA4;
// 4BBCAC: using guessed type __int16 word_4BBCAC;
// 4BBCD8: using guessed type int dword_4BBCD8;
// 4BBCDC: using guessed type int dword_4BBCDC;
// 4BBCE0: using guessed type int dword_4BBCE0;
// 4BBCE4: using guessed type int dword_4BBCE4;
// 4BBCE8: using guessed type int dword_4BBCE8;
// 4BBCEC: using guessed type int dword_4BBCEC;
// 4BBCF0: using guessed type int dword_4BBCF0;
// 4BBCF4: using guessed type int dword_4BBCF4;
// 4BBD08: using guessed type char byte_4BBD08;
// 4BBD28: using guessed type int dword_4BBD28;
// 4BBDB4: using guessed type char byte_4BBDB4;
// 4BBDD4: using guessed type int dword_4BBDD4;
// 4BBDF4: using guessed type int dword_4BBDF4;
// 4BBE60: using guessed type char byte_4BBE60;
// 4BBE80: using guessed type int dword_4BBE80;
// 4BBEA0: using guessed type int dword_4BBEA0;
// 4BBF0C: using guessed type char byte_4BBF0C;
// 4BBF14: using guessed type int dword_4BBF14;
// 4BBF18: using guessed type int dword_4BBF18;
// 4BBF44: using guessed type int dword_4BBF44;
// 4BBF54: using guessed type int dword_4BBF54;
// 4BBF5C: using guessed type __int16 word_4BBF5C;
// 4BBF74: using guessed type int dword_4BBF74;
// 4BBF88: using guessed type int dword_4BBF88;
// 4BBF8C: using guessed type int dword_4BBF8C;
// 4BBF90: using guessed type int dword_4BBF90;
// 4BBF94: using guessed type int dword_4BBF94;
// 4BBF98: using guessed type int dword_4BBF98;
// 4BBF9C: using guessed type int dword_4BBF9C;
// 4BBFA0: using guessed type int dword_4BBFA0;
// 4BBFA4: using guessed type int dword_4BBFA4;
// 4BC064: using guessed type char byte_4BC064;
// 4BC06C: using guessed type int dword_4BC06C;
// 4BC070: using guessed type int dword_4BC070;
// 4BC09C: using guessed type int dword_4BC09C;
// 4BC0AC: using guessed type int dword_4BC0AC;
// 4BC0B0: using guessed type int dword_4BC0B0;
// 4BC0B4: using guessed type __int16 word_4BC0B4;
// 4BC0D8: using guessed type int dword_4BC0D8;
// 4BC0E0: using guessed type int dword_4BC0E0;
// 4BC0E4: using guessed type int dword_4BC0E4;
// 4BC0E8: using guessed type int dword_4BC0E8;
// 4BC0EC: using guessed type int dword_4BC0EC;
// 4BC0F0: using guessed type int dword_4BC0F0;
// 4BC0F4: using guessed type int dword_4BC0F4;
// 4BC0F8: using guessed type int dword_4BC0F8;
// 4BC0FC: using guessed type int dword_4BC0FC;
// 4BC118: using guessed type int dword_4BC118;
// 4BC184: using guessed type int dword_4BC184;
// 4BC1BC: using guessed type char byte_4BC1BC;
// 4BC1C4: using guessed type int dword_4BC1C4;
// 4BC1C8: using guessed type int dword_4BC1C8;
// 4BC208: using guessed type int dword_4BC208;
// 4BC230: using guessed type int dword_4BC230;
// 4BC23C: using guessed type int dword_4BC23C;
// 4BC244: using guessed type int dword_4BC244;
// 4BC24C: using guessed type int dword_4BC24C;
// 4BC254: using guessed type int dword_4BC254;
// 4BC270: using guessed type int dword_4BC270;
// 4BC2DC: using guessed type int dword_4BC2DC;
// 4BC314: using guessed type char byte_4BC314;
// 4BC364: using guessed type __int16 word_4BC364;
// 4BC37C: using guessed type int dword_4BC37C;
// 4BC380: using guessed type int dword_4BC380;
// 4BC3A0: using guessed type int dword_4BC3A0;
// 4BC3A4: using guessed type int dword_4BC3A4;
// 4BC3A8: using guessed type int dword_4BC3A8;
// 4BC3AC: using guessed type int dword_4BC3AC;
// 4BC410: using guessed type __int16 word_4BC410;
// 4BC428: using guessed type int dword_4BC428;
// 4BC42C: using guessed type int dword_4BC42C;
// 4BC44C: using guessed type int dword_4BC44C;
// 4BC454: using guessed type int dword_4BC454;
// 4BC4BC: using guessed type __int16 word_4BC4BC;
// 4BC4D4: using guessed type int dword_4BC4D4;
// 4BC4D8: using guessed type int dword_4BC4D8;
// 4BC4FC: using guessed type int dword_4BC4FC;
// 4BC504: using guessed type int dword_4BC504;
// 4BC568: using guessed type __int16 word_4BC568;
// 4BC580: using guessed type int dword_4BC580;
// 4BC584: using guessed type int dword_4BC584;
// 4BC5A4: using guessed type int dword_4BC5A4;
// 4BC5AC: using guessed type int dword_4BC5AC;

//----- (0047F710) --------------------------------------------------------
int __cdecl sub_47F710(int a1)
{
  int *v1; // ecx@69
  int v2; // edx@69
  int result; // eax@69
  int *v4; // ecx@70
  int v5; // edx@70
  signed int v6; // [sp+0h] [bp-C4h]@1
  int v7; // [sp+4h] [bp-C0h]@1
  int v8; // [sp+8h] [bp-BCh]@1
  int v9; // [sp+Ch] [bp-B8h]@1
  int v10; // [sp+10h] [bp-B4h]@1
  int v11; // [sp+14h] [bp-B0h]@1
  int v12; // [sp+18h] [bp-ACh]@1
  int v13; // [sp+1Ch] [bp-A8h]@1
  int v14; // [sp+20h] [bp-A4h]@1
  int v15; // [sp+24h] [bp-A0h]@1
  int v16; // [sp+28h] [bp-9Ch]@1
  int v17; // [sp+2Ch] [bp-98h]@1
  int v18; // [sp+30h] [bp-94h]@1
  int v19; // [sp+34h] [bp-90h]@1
  int v20; // [sp+38h] [bp-8Ch]@1
  int v21; // [sp+3Ch] [bp-88h]@1
  int v22; // [sp+40h] [bp-84h]@1
  int v23; // [sp+44h] [bp-80h]@1
  int v24; // [sp+48h] [bp-7Ch]@1
  int v25; // [sp+4Ch] [bp-78h]@1
  int v26; // [sp+50h] [bp-74h]@1
  int v27; // [sp+54h] [bp-70h]@1
  int v28; // [sp+58h] [bp-6Ch]@1
  int v29; // [sp+5Ch] [bp-68h]@1
  int v30; // [sp+60h] [bp-64h]@1
  int v31; // [sp+64h] [bp-60h]@1
  int v32; // [sp+68h] [bp-5Ch]@1
  int v33; // [sp+6Ch] [bp-58h]@1
  int v34; // [sp+70h] [bp-54h]@1
  int v35; // [sp+74h] [bp-50h]@1
  int v36; // [sp+78h] [bp-4Ch]@1
  int v37; // [sp+7Ch] [bp-48h]@1
  int v38; // [sp+80h] [bp-44h]@1
  int v39; // [sp+84h] [bp-40h]@1
  int v40; // [sp+88h] [bp-3Ch]@1
  int v41; // [sp+8Ch] [bp-38h]@1
  int v42; // [sp+90h] [bp-34h]@1
  int v43; // [sp+94h] [bp-30h]@1
  int v44; // [sp+98h] [bp-2Ch]@1
  int v45; // [sp+9Ch] [bp-28h]@1
  int v46; // [sp+A0h] [bp-24h]@1
  int v47; // [sp+A4h] [bp-20h]@1
  int v48; // [sp+A8h] [bp-1Ch]@1
  int v49; // [sp+ACh] [bp-18h]@1
  int v50; // [sp+B0h] [bp-14h]@1
  int v51; // [sp+B4h] [bp-10h]@1
  int v52; // [sp+B8h] [bp-Ch]@1
  int v53; // [sp+BCh] [bp-8h]@1
  int v54; // [sp+C0h] [bp-4h]@1

  v31 = 0;
  v32 = 0;
  v33 = 72;
  v34 = 32;
  v35 = 0;
  v36 = 32;
  v37 = 72;
  v38 = 64;
  v39 = 72;
  v40 = 0;
  v41 = 144;
  v42 = 32;
  v43 = 144;
  v44 = 0;
  v45 = 216;
  v46 = 32;
  v47 = 72;
  v48 = 32;
  v49 = 144;
  v50 = 64;
  v51 = 144;
  v52 = 32;
  v53 = 216;
  v54 = 64;
  v7 = 0;
  v8 = 64;
  v9 = 72;
  v10 = 96;
  v11 = 0;
  v12 = 96;
  v13 = 72;
  v14 = 128;
  v15 = 72;
  v16 = 64;
  v17 = 144;
  v18 = 96;
  v19 = 144;
  v20 = 64;
  v21 = 216;
  v22 = 96;
  v23 = 72;
  v24 = 96;
  v25 = 144;
  v26 = 128;
  v27 = 144;
  v28 = 96;
  v29 = 216;
  v30 = 128;
  v6 = *(_DWORD *)(a1 + 116);
  if ( v6 > 201 )
  {
    switch ( v6 )
    {
      case 202:
        *(_WORD *)(a1 + 80) &= 0xFFEFu;
        *(_DWORD *)(a1 + 116) = 203;
        *(_DWORD *)(a1 + 104) = 0;
        *(_DWORD *)(a1 + 100) = 0;
        goto LABEL_29;
      case 203:
LABEL_29:
        ++*(_DWORD *)(a1 + 120);
        if ( ++*(_DWORD *)(a1 + 100) > 1 )
        {
          *(_DWORD *)(a1 + 100) = 0;
          ++*(_DWORD *)(a1 + 104);
        }
        if ( *(_DWORD *)(a1 + 104) > 1 )
          *(_DWORD *)(a1 + 104) = 0;
        *(_DWORD *)(a1 + 16) += 32;
        break;
      case 300:
        *(_DWORD *)(a1 + 116) = 301;
        *(_DWORD *)(a1 + 104) = 4;
        *(_DWORD *)(a1 + 100) = 0;
        *(_WORD *)(a1 + 80) |= 0x10u;
        goto LABEL_35;
      case 301:
LABEL_35:
        if ( ++*(_DWORD *)(a1 + 100) > 0 )
        {
          *(_DWORD *)(a1 + 100) = 0;
          ++*(_DWORD *)(a1 + 104);
        }
        if ( *(_DWORD *)(a1 + 104) > 5 )
          *(_DWORD *)(a1 + 104) = 4;
        *(_DWORD *)(a1 + 16) += 32;
        if ( *(_DWORD *)(a1 + 16) > 0 )
        {
          *(_DWORD *)(a1 + 16) = 0;
          *(_DWORD *)(a1 + 116) = 10;
        }
        break;
      case 400:
        *(_DWORD *)(a1 + 116) = 401;
        *(_DWORD *)(a1 + 104) = 2;
        *(_DWORD *)(a1 + 100) = 0;
        *(_WORD *)(a1 + 80) |= 0x10u;
        goto LABEL_43;
      case 401:
LABEL_43:
        if ( ++*(_DWORD *)(a1 + 100) > 0 )
        {
          *(_DWORD *)(a1 + 100) = 0;
          ++*(_DWORD *)(a1 + 104);
        }
        if ( *(_DWORD *)(a1 + 104) > 3 )
          *(_DWORD *)(a1 + 104) = 2;
        *(_DWORD *)(a1 + 16) -= 32;
        if ( *(_DWORD *)(a1 + 16) < 0 )
        {
          *(_DWORD *)(a1 + 16) = 0;
          *(_DWORD *)(a1 + 116) = 10;
        }
        break;
      default:
        break;
    }
  }
  else if ( v6 == 201 )
  {
LABEL_21:
    if ( ++*(_DWORD *)(a1 + 120) > 30 )
      *(_DWORD *)(a1 + 116) = 202;
    if ( ++*(_DWORD *)(a1 + 100) > 0 )
    {
      *(_DWORD *)(a1 + 100) = 0;
      ++*(_DWORD *)(a1 + 104);
    }
    if ( *(_DWORD *)(a1 + 104) > 5 )
      *(_DWORD *)(a1 + 104) = 4;
    *(_DWORD *)(a1 + 16) += 32;
  }
  else
  {
    switch ( v6 )
    {
      case 10:
        *(_DWORD *)(a1 + 104) = 0;
        *(_WORD *)(a1 + 80) &= 0xFFEFu;
        break;
      case 100:
        *(_WORD *)(a1 + 80) |= 0x10u;
        *(_DWORD *)(a1 + 116) = 101;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 2;
        *(_DWORD *)(a1 + 100) = 0;
        goto LABEL_7;
      case 101:
LABEL_7:
        if ( ++*(_DWORD *)(a1 + 120) > 30 )
          *(_DWORD *)(a1 + 116) = 102;
        if ( ++*(_DWORD *)(a1 + 100) > 0 )
        {
          *(_DWORD *)(a1 + 100) = 0;
          ++*(_DWORD *)(a1 + 104);
        }
        if ( *(_DWORD *)(a1 + 104) > 3 )
          *(_DWORD *)(a1 + 104) = 2;
        *(_DWORD *)(a1 + 16) -= 32;
        break;
      case 102:
        *(_WORD *)(a1 + 80) &= 0xFFEFu;
        *(_DWORD *)(a1 + 116) = 103;
        *(_DWORD *)(a1 + 104) = 0;
        *(_DWORD *)(a1 + 100) = 0;
        goto LABEL_15;
      case 103:
LABEL_15:
        ++*(_DWORD *)(a1 + 120);
        if ( ++*(_DWORD *)(a1 + 100) > 1 )
        {
          *(_DWORD *)(a1 + 100) = 0;
          ++*(_DWORD *)(a1 + 104);
        }
        if ( *(_DWORD *)(a1 + 104) > 1 )
          *(_DWORD *)(a1 + 104) = 0;
        *(_DWORD *)(a1 + 16) -= 32;
        break;
      case 200:
        *(_WORD *)(a1 + 80) |= 0x10u;
        *(_WORD *)(a1 + 80) |= 0x80u;
        *(_DWORD *)(a1 + 116) = 201;
        *(_DWORD *)(a1 + 120) = 0;
        *(_DWORD *)(a1 + 104) = 4;
        *(_DWORD *)(a1 + 100) = 0;
        goto LABEL_21;
      default:
        break;
    }
  }
  if ( (*(_DWORD *)(a1 + 116) == 101
     || *(_DWORD *)(a1 + 116) == 201
     || *(_DWORD *)(a1 + 116) == 301
     || *(_DWORD *)(a1 + 116) == 401)
    && *(_DWORD *)(a1 + 120) % 2 == 1 )
  {
    Play_Sound_Effect(112, 1);
  }
  if ( (*(_DWORD *)(a1 + 116) == 103 || *(_DWORD *)(a1 + 116) == 203) && *(_DWORD *)(a1 + 120) % 4 == 1 )
    Play_Sound_Effect(111, 1);
  if ( *(_DWORD *)(a1 + 116) < 100
    || Quote_Y_Position >= *(_DWORD *)(a1 + 12) + 2048
    || Quote_Y_Position <= *(_DWORD *)(a1 + 12) - 2048 )
  {
    *(_DWORD *)(a1 + 164) = 0;
    *(_WORD *)(a1 + 80) &= 0xFF7Fu;
  }
  else
  {
    *(_DWORD *)(a1 + 164) = 10;
    *(_WORD *)(a1 + 80) |= 0x80u;
  }
  if ( *(_DWORD *)(a1 + 16) > 1024 )
    *(_DWORD *)(a1 + 16) = 1024;
  if ( *(_DWORD *)(a1 + 16) < -1024 )
    *(_DWORD *)(a1 + 16) = -1024;
  *(_DWORD *)(a1 + 8) += *(_DWORD *)(a1 + 16);
  if ( *(_DWORD *)(a1 + 76) == 1 )
  {
    v1 = &v31 + 4 * *(_DWORD *)(a1 + 104);
    v2 = a1 + 84;
    *(_DWORD *)v2 = *v1;
    *(_DWORD *)(v2 + 4) = v1[1];
    result = v1[2];
    *(_DWORD *)(v2 + 8) = result;
    *(_DWORD *)(v2 + 12) = v1[3];
  }
  else
  {
    v4 = &v7 + 4 * *(_DWORD *)(a1 + 104);
    v5 = a1 + 84;
    *(_DWORD *)v5 = *v4;
    *(_DWORD *)(v5 + 4) = v4[1];
    result = v4[2];
    *(_DWORD *)(v5 + 8) = result;
    *(_DWORD *)(v5 + 12) = v4[3];
  }
  return result;
}

//----- (00480090) --------------------------------------------------------
int __cdecl sub_480090(int a1)
{
  __int64 v1; // rax@14
  __int64 v2; // rax@14
  int result; // eax@14
  int v4; // [sp+4h] [bp-50h]@1
  signed int v5; // [sp+8h] [bp-4Ch]@0
  int v6; // [sp+Ch] [bp-48h]@1
  int v7; // [sp+10h] [bp-44h]@1
  int v8; // [sp+14h] [bp-40h]@1
  int v9; // [sp+18h] [bp-3Ch]@1
  int v10; // [sp+1Ch] [bp-38h]@1
  int v11; // [sp+20h] [bp-34h]@1
  int v12; // [sp+24h] [bp-30h]@1
  int v13; // [sp+28h] [bp-2Ch]@1
  int v14; // [sp+2Ch] [bp-28h]@1
  int v15; // [sp+30h] [bp-24h]@1
  int v16; // [sp+34h] [bp-20h]@1
  int v17; // [sp+38h] [bp-1Ch]@1
  int v18; // [sp+3Ch] [bp-18h]@1
  int v19; // [sp+40h] [bp-14h]@1
  int v20; // [sp+44h] [bp-10h]@1
  int v21; // [sp+48h] [bp-Ch]@1
  int v22; // [sp+4Ch] [bp-8h]@8
  int v23; // [sp+50h] [bp-4h]@8

  v6 = 0;
  v7 = 128;
  v8 = 72;
  v9 = 160;
  v10 = 72;
  v11 = 128;
  v12 = 144;
  v13 = 160;
  v14 = 0;
  v15 = 160;
  v16 = 72;
  v17 = 192;
  v18 = 72;
  v19 = 160;
  v20 = 144;
  v21 = 192;
  v4 = *(_DWORD *)(a1 + 116);
  if ( v4 == 10 )
  {
    *(_DWORD *)(a1 + 116) = 11;
    *(_DWORD *)(a1 + 120) = 30 * *(_DWORD *)(a1 + 104) + 30;
  }
  else if ( v4 != 11 )
  {
    goto LABEL_14;
  }
  if ( *(_DWORD *)(a1 + 120) )
  {
    --*(_DWORD *)(a1 + 120);
  }
  else
  {
    switch ( *(_DWORD *)(a1 + 104) )
    {
      case 0:
        v22 = -15360;
        v23 = 3072;
        NPC_Create(158, *(_DWORD *)(a1 + 8) - 15360, *(_DWORD *)(a1 + 12) + 3072, 0, 0, 3, 0, 256);
        break;
      case 1:
        v22 = 15360;
        v23 = 3072;
        NPC_Create(158, *(_DWORD *)(a1 + 8) + 15360, *(_DWORD *)(a1 + 12) + 3072, 0, 0, 2, 0, 256);
        break;
      case 2:
        v22 = -15360;
        v23 = -3072;
        NPC_Create(158, *(_DWORD *)(a1 + 8) - 15360, *(_DWORD *)(a1 + 12) - 3072, 0, 0, 0, 0, 256);
        break;
      case 3:
        v5 = 1;
        v22 = 15360;
        v23 = -3072;
        goto LABEL_12;
      default:
LABEL_12:
        NPC_Create(158, v22 + *(_DWORD *)(a1 + 8), v23 + *(_DWORD *)(a1 + 12), 0, 0, v5, 0, 256);
        break;
    }
    Play_Sound_Effect(39, 1);
    *(_DWORD *)(a1 + 120) = 120;
  }
LABEL_14:
  v1 = *(&dword_4BBA60 + 43 * *(_DWORD *)(a1 + 108)) + dword_4BBA60;
  *(_DWORD *)(a1 + 8) = ((signed int)v1 - HIDWORD(v1)) >> 1;
  v2 = *(&dword_4BBA64 + 43 * *(_DWORD *)(a1 + 108)) + dword_4BBA64;
  *(_DWORD *)(a1 + 12) = ((signed int)v2 - HIDWORD(v2)) >> 1;
  HIDWORD(v2) = &v6 + 4 * *(_DWORD *)(a1 + 104);
  result = a1 + 84;
  *(_QWORD *)result = *(_QWORD *)HIDWORD(v2);
  *(_QWORD *)(result + 8) = *(_QWORD *)(HIDWORD(v2) + 8);
  return result;
}

//----- (004802A0) --------------------------------------------------------
int __cdecl sub_4802A0(int a1)
{
  int v1; // eax@14
  int result; // eax@14
  int v3; // edx@15

  switch ( *(_DWORD *)(a1 + 116) )
  {
    case 0xA:
      *(_DWORD *)(a1 + 32) += 512;
      if ( *(_DWORD *)(a1 + 32) > 0x4000 )
      {
        *(_DWORD *)(a1 + 32) = 0x4000;
        *(_DWORD *)(a1 + 116) = 0;
        dword_4BBCD0 = 10;
        dword_4BBD7C = 10;
        dword_4BBE28 = 10;
        dword_4BBED4 = 10;
      }
      break;
    case 0x14:
      *(_DWORD *)(a1 + 32) -= 512;
      if ( *(_DWORD *)(a1 + 32) < 0 )
      {
        *(_DWORD *)(a1 + 32) = 0;
        *(_DWORD *)(a1 + 116) = 0;
        dword_4BBCD0 = 0;
        dword_4BBD7C = 0;
        dword_4BBE28 = 0;
        dword_4BBED4 = 0;
      }
      break;
    case 0x1E:
      *(_DWORD *)(a1 + 32) += 512;
      if ( *(_DWORD *)(a1 + 32) > 10240 )
      {
        *(_DWORD *)(a1 + 32) = 10240;
        *(_DWORD *)(a1 + 116) = 0;
        dword_4BBF80 = 10;
        dword_4BC388 = 10;
        dword_4BC434 = 10;
        dword_4BC4E0 = 10;
        dword_4BC58C = 10;
      }
      break;
    case 0x28:
      *(_DWORD *)(a1 + 32) -= 512;
      if ( *(_DWORD *)(a1 + 32) < 0 )
      {
        *(_DWORD *)(a1 + 32) = 0;
        *(_DWORD *)(a1 + 116) = 0;
        dword_4BBF80 = 0;
        dword_4BC388 = 0;
        dword_4BC434 = 0;
        dword_4BC4E0 = 0;
        dword_4BC58C = 0;
      }
      break;
    default:
      break;
  }
  if ( *(_DWORD *)(a1 + 76) )
  {
    v3 = a1 + 84;
    *(_DWORD *)v3 = 264;
    *(_DWORD *)(v3 + 4) = 96;
    *(_DWORD *)(v3 + 8) = 312;
    *(_DWORD *)(v3 + 12) = 144;
    result = a1;
    *(_DWORD *)(a1 + 8) = dword_4BBA60 + *(_DWORD *)(a1 + 32) + 12288;
    *(_DWORD *)(a1 + 12) = dword_4BBA64;
  }
  else
  {
    v1 = a1 + 84;
    *(_DWORD *)v1 = 216;
    *(_DWORD *)(v1 + 4) = 96;
    *(_DWORD *)(v1 + 8) = 264;
    *(_DWORD *)(v1 + 12) = 144;
    *(_DWORD *)(a1 + 8) = dword_4BBA60 - 12288 - *(_DWORD *)(a1 + 32);
    result = a1;
    *(_DWORD *)(a1 + 12) = dword_4BBA64;
  }
  return result;
}
// 4BBCD0: using guessed type int dword_4BBCD0;
// 4BBD7C: using guessed type int dword_4BBD7C;
// 4BBE28: using guessed type int dword_4BBE28;
// 4BBED4: using guessed type int dword_4BBED4;
// 4BBF80: using guessed type int dword_4BBF80;
// 4BC388: using guessed type int dword_4BC388;
// 4BC434: using guessed type int dword_4BC434;
// 4BC4E0: using guessed type int dword_4BC4E0;
// 4BC58C: using guessed type int dword_4BC58C;

//----- (00480550) --------------------------------------------------------
int __cdecl sub_480550(int a1)
{
  int Y_Velocity; // ST28_4@13
  int X_Velocity; // ST2C_4@13
  int *v3; // eax@19
  int v4; // ecx@19
  int result; // eax@19
  int v6; // [sp+4h] [bp-94h]@1
  int v7; // [sp+10h] [bp-88h]@1
  int v8; // [sp+14h] [bp-84h]@1
  int v9; // [sp+18h] [bp-80h]@1
  int v10; // [sp+1Ch] [bp-7Ch]@1
  int v11; // [sp+20h] [bp-78h]@1
  int v12; // [sp+24h] [bp-74h]@1
  int v13; // [sp+28h] [bp-70h]@1
  int v14; // [sp+2Ch] [bp-6Ch]@1
  int v15; // [sp+30h] [bp-68h]@1
  int v16; // [sp+34h] [bp-64h]@1
  int v17; // [sp+38h] [bp-60h]@1
  int v18; // [sp+3Ch] [bp-5Ch]@1
  int v19; // [sp+40h] [bp-58h]@1
  int v20; // [sp+44h] [bp-54h]@1
  int v21; // [sp+48h] [bp-50h]@1
  int v22; // [sp+4Ch] [bp-4Ch]@1
  int v23; // [sp+50h] [bp-48h]@1
  int v24; // [sp+54h] [bp-44h]@1
  int v25; // [sp+58h] [bp-40h]@1
  int v26; // [sp+5Ch] [bp-3Ch]@1
  int v27; // [sp+60h] [bp-38h]@1
  int v28; // [sp+64h] [bp-34h]@1
  int v29; // [sp+68h] [bp-30h]@1
  int v30; // [sp+6Ch] [bp-2Ch]@1
  int v31; // [sp+70h] [bp-28h]@1
  int v32; // [sp+74h] [bp-24h]@1
  int v33; // [sp+78h] [bp-20h]@1
  int v34; // [sp+7Ch] [bp-1Ch]@1
  int v35; // [sp+80h] [bp-18h]@1
  int v36; // [sp+84h] [bp-14h]@1
  int v37; // [sp+88h] [bp-10h]@1
  int v38; // [sp+8Ch] [bp-Ch]@1
  unsigned __int8 v39; // [sp+97h] [bp-1h]@13

  v7 = 0;
  v8 = 192;
  v9 = 16;
  v10 = 208;
  v11 = 16;
  v12 = 192;
  v13 = 32;
  v14 = 208;
  v15 = 32;
  v16 = 192;
  v17 = 48;
  v18 = 208;
  v19 = 48;
  v20 = 192;
  v21 = 64;
  v22 = 208;
  v23 = 0;
  v24 = 208;
  v25 = 16;
  v26 = 224;
  v27 = 16;
  v28 = 208;
  v29 = 32;
  v30 = 224;
  v31 = 32;
  v32 = 208;
  v33 = 48;
  v34 = 224;
  v35 = 48;
  v36 = 208;
  v37 = 64;
  v38 = 224;
  v6 = *(_DWORD *)(a1 + 116);
  if ( !v6 )
  {
    *(_WORD *)(a1 + 80) &= 0xFFDFu;
    *(_DWORD *)(a1 + 104) = 0;
    goto LABEL_14;
  }
  if ( v6 == 10 )
  {
    *(_DWORD *)(a1 + 116) = 11;
    *(_DWORD *)(a1 + 120) = 10 * *(_DWORD *)(a1 + 32) + 40;
    *(_WORD *)(a1 + 80) |= 0x20u;
  }
  else if ( v6 != 11 )
  {
    goto LABEL_14;
  }
  *(_DWORD *)(a1 + 104) = *(_DWORD *)(a1 + 120) < 16 && *(_DWORD *)(a1 + 120) / 2 % 2;
  if ( *(_DWORD *)(a1 + 120) )
  {
    --*(_DWORD *)(a1 + 120);
  }
  else
  {
    v39 = Angle_Calculator(*(_DWORD *)(a1 + 8) - Quote_X_Position, *(_DWORD *)(a1 + 12) - Quote_Y_Position);
    v39 += RNG_Range(-2, 2);
    Y_Velocity = 3 * SIN_function(v39);
    X_Velocity = 3 * COS_function(v39);
    NPC_Create(156, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), X_Velocity, Y_Velocity, 0, 0, 256);
    Play_Sound_Effect(39, 1);
    *(_DWORD *)(a1 + 120) = 40;
  }
LABEL_14:
  switch ( *(_DWORD *)(a1 + 32) )
  {
    case 0:
      *(_DWORD *)(a1 + 8) = dword_4BBA60 - 11264;
      *(_DWORD *)(a1 + 12) = dword_4BBA64 - 0x2000;
      break;
    case 1:
      *(_DWORD *)(a1 + 8) = dword_4BBA60 + 14336;
      *(_DWORD *)(a1 + 12) = dword_4BBA64 - 0x2000;
      break;
    case 2:
      *(_DWORD *)(a1 + 8) = dword_4BBA60 - 7680;
      *(_DWORD *)(a1 + 12) = dword_4BBA64 + 7168;
      break;
    case 3:
      *(_DWORD *)(a1 + 8) = dword_4BBA60 + 8704;
      *(_DWORD *)(a1 + 12) = dword_4BBA64 + 7168;
      break;
    default:
      break;
  }
  v3 = &v7 + 4 * (*(_DWORD *)(a1 + 32) + 4 * *(_DWORD *)(a1 + 104));
  v4 = a1 + 84;
  *(_DWORD *)v4 = *v3;
  *(_DWORD *)(v4 + 4) = v3[1];
  *(_DWORD *)(v4 + 8) = v3[2];
  result = v3[3];
  *(_DWORD *)(v4 + 12) = result;
  return result;
}

//----- (004808C0) --------------------------------------------------------
int __cdecl sub_4808C0(int a1)
{
  int v1; // eax@8
  int *v2; // ecx@15
  int v3; // edx@15
  int result; // eax@15
  int v5; // [sp+0h] [bp-34h]@1
  int v6; // [sp+4h] [bp-30h]@1
  int v7; // [sp+8h] [bp-2Ch]@1
  int v8; // [sp+Ch] [bp-28h]@1
  int v9; // [sp+10h] [bp-24h]@1
  int v10; // [sp+14h] [bp-20h]@1
  int v11; // [sp+18h] [bp-1Ch]@1
  int v12; // [sp+1Ch] [bp-18h]@1
  int v13; // [sp+20h] [bp-14h]@1
  int v14; // [sp+24h] [bp-10h]@1
  int v15; // [sp+28h] [bp-Ch]@1
  int v16; // [sp+2Ch] [bp-8h]@1
  int v17; // [sp+30h] [bp-4h]@1

  v6 = 216;
  v7 = 0;
  v8 = 320;
  v9 = 48;
  v10 = 216;
  v11 = 48;
  v12 = 320;
  v13 = 96;
  v14 = 216;
  v15 = 144;
  v16 = 320;
  v17 = 192;
  v5 = *(_DWORD *)(a1 + 116);
  if ( !v5 )
  {
    word_4BBAA8[0] &= 0xFFDFu;
    *(_DWORD *)(a1 + 104) = 0;
    goto LABEL_13;
  }
  if ( v5 == 10 )
  {
    *(_DWORD *)(a1 + 116) = 11;
    *(_DWORD *)(a1 + 120) = 10 * *(_DWORD *)(a1 + 32) + 40;
    word_4BBAA8[0] |= 0x20u;
  }
  else if ( v5 != 11 )
  {
    goto LABEL_13;
  }
  if ( byte_4BBAF4[0] )
  {
    v1 = ((signed int)(unsigned __int8)byte_4BC7C9++ >> 1) % 2;
    if ( v1 )
      *(_DWORD *)(a1 + 104) = 1;
    else
      *(_DWORD *)(a1 + 104) = 0;
  }
  else
  {
    *(_DWORD *)(a1 + 104) = 0;
  }
LABEL_13:
  dword_4BBF14 = dword_4BBA60;
  dword_4BBF18 = dword_4BBA64;
  if ( dword_4BBACC[0] <= 10 )
    *(_DWORD *)(a1 + 104) = 2;
  v2 = &v6 + 4 * *(_DWORD *)(a1 + 104);
  v3 = a1 + 84;
  *(_DWORD *)v3 = *v2;
  *(_DWORD *)(v3 + 4) = v2[1];
  result = v2[2];
  *(_DWORD *)(v3 + 8) = result;
  *(_DWORD *)(v3 + 12) = v2[3];
  return result;
}
// 4BBAA8: using guessed type __int16 word_4BBAA8[];
// 4BBACC: using guessed type int dword_4BBACC[];
// 4BBF14: using guessed type int dword_4BBF14;
// 4BBF18: using guessed type int dword_4BBF18;
// 4BC7C9: using guessed type char byte_4BC7C9;

//----- (00480DAD) --------------------------------------------------------
// return 1
signed int report_failure_Return_1()
{
  return 1;
}

//----- (00480F55) --------------------------------------------------------
void __cdecl sub_480F55(FILE *file, size_t sizea, size_t counta, FILE *filea)
{
  _lock_file(filea);
  fread(file, sizea, counta, filea);
  JUMPOUT(&loc_480F97);
}

//----- (00481981) --------------------------------------------------------
void __cdecl sub_481981(FILE *file, size_t sizea, size_t counta, FILE *filea)
{
  _SEH_prolog(&stru_48CAC8, 12);
  _lock_file(filea);
  fwrite(file, sizea, counta, filea);
  JUMPOUT(&loc_4819C3);
}
// 4820AC: using guessed type _DWORD __cdecl _SEH_prolog(_DWORD, _DWORD);
// 48CAC8: using guessed type _SCOPETABLE_ENTRY stru_48CAC8;

//----- (00481F9A) --------------------------------------------------------
// return 1
signed int __security_error_handler_return_1()
{
  return 1;
}

//----- (00481F9E) --------------------------------------------------------
#error "481F91: positive sp value has been found (funcsize=0)"

//----- (00482475) --------------------------------------------------------
int __usercall flsall_sub_482475@<eax>(int a1@<esi>)
{
  return _unlock_file2(a1, *(_DWORD *)(dword_4BD034 + 4 * a1));
}
// 4825F1: using guessed type _DWORD __cdecl _unlock_file2(_DWORD, _DWORD);
// 4BD034: using guessed type int dword_4BD034;

//----- (004824A1) --------------------------------------------------------
int flsall_sub_4824A1()
{
  return _unlock(1);
}
// 483734: using guessed type _DWORD __cdecl _unlock(_DWORD);

//----- (004824AA) --------------------------------------------------------
int Return_flsall_1()
{
  return flsall(1);
}
// 4823D5: using guessed type _DWORD __cdecl flsall(_DWORD);

//----- (0048451C) --------------------------------------------------------
int __usercall freefls@<eax>(int a1@<ebp>)
{
  int v1; // esi@1

  v1 = *(_DWORD *)(a1 + 8);
  return freefls();
}
// 484521: using guessed type int freefls(void);

//----- (00486CC0) --------------------------------------------------------
void sub_486CC0()
{
  int v0; // [sp+0h] [bp-28h]@0
  int v1; // [sp+4h] [bp-24h]@0
  const char *i; // [sp+Ch] [bp-1Ch]@1

  for ( i = ""; i < ""; i += 4 )
  {
    if ( *(_DWORD *)i )
      (*(void (__stdcall **)(int, int))i)(v0, v1);
  }
}

//----- (00486D04) --------------------------------------------------------
void sub_486D04(void)
{
  int v0; // [sp+0h] [bp-28h]@0
  int v1; // [sp+4h] [bp-24h]@0
  const char *i; // [sp+Ch] [bp-1Ch]@1

  for ( i = ""; i < ""; i += 4 )
  {
    if ( *(_DWORD *)i )
      (*(void (__stdcall **)(int, int))i)(v0, v1);
  }
}

//----- (0048763C) --------------------------------------------------------
int _alloc_osfhnd_sub_48763C()
{
  return _unlock(11);
}
// 483734: using guessed type _DWORD __cdecl _unlock(_DWORD);

//----- (004876E5) --------------------------------------------------------
int commit_call___unlock_fhandle()
{
  return _unlock_fhandle();
}

//----- (0048784E) --------------------------------------------------------
int _fcloseall_sub_48784E()
{
  return _unlock(1);
}
// 483734: using guessed type _DWORD __cdecl _unlock(_DWORD);

//----- (00488F49) --------------------------------------------------------
int __cdecl sub_488F49(int a1, int a2)
{
  return _ld12cvt(a1, a2, &unk_4994F0);
}
// 488DF1: using guessed type _DWORD __cdecl _ld12cvt(_DWORD, _DWORD, _DWORD);

//----- (00488F5F) --------------------------------------------------------
int __cdecl sub_488F5F(int a1, int a2)
{
  return _ld12cvt(a1, a2, &unk_499508);
}
// 488DF1: using guessed type _DWORD __cdecl _ld12cvt(_DWORD, _DWORD, _DWORD);

//----- (00488F75) --------------------------------------------------------
int __cdecl sub_488F75(int a1, int a2)
{
  char v3; // [sp+0h] [bp-14h]@1
  char v4; // [sp+4h] [bp-10h]@1
  int v5; // [sp+10h] [bp-4h]@1

  v5 = dword_498B20;
  __strgtold12(&v4, &v3, a2, 0, 0, 0, 0);
  return sub_488F49((int)&v4, a1);
}
// 48A1AB: using guessed type _DWORD __cdecl __strgtold12(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 498B20: using guessed type int dword_498B20;

//----- (00488FB2) --------------------------------------------------------
int __cdecl sub_488FB2(int a1, int a2)
{
  char v3; // [sp+0h] [bp-14h]@1
  char v4; // [sp+4h] [bp-10h]@1
  int v5; // [sp+10h] [bp-4h]@1

  v5 = dword_498B20;
  __strgtold12(&v4, &v3, a2, 0, 0, 0, 0);
  return sub_488F5F((int)&v4, a1);
}
// 48A1AB: using guessed type _DWORD __cdecl __strgtold12(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 498B20: using guessed type int dword_498B20;

//----- (0048AD5E) --------------------------------------------------------
int Return_0()
{
  return 0;
}

//----- (0048AF52) --------------------------------------------------------
int __usercall realloc_sub_48AF52@<eax>(int a1@<ebp>)
{
  int v1; // esi@1
  int v2; // edi@1

  v1 = *(_DWORD *)(a1 + 12);
  v2 = *(_DWORD *)(a1 + 8);
  return realloc_sub_48AF5A();
}
// 48AF5A: using guessed type int realloc_sub_48AF5A(void);

#error "There were 1 decompilation failure(s) on 823 function(s)"
